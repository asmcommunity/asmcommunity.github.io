<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>funny looking Messagebox..? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17256" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17256">funny looking Messagebox..?</a></p>
   <div class="post" id="post-133743">
    <div class="subject"><a href="#post-133743">funny looking Messagebox..?</a></div>
    <div class="body">Hello all!<br />i have a question regarding a messagebox that looks weird (see mbox.gif).<br />the code before the MessageBox call reads the com-port, fetching a number then putting it into a buffer:<br /><pre><code><br />.data<br />...<br />tmpbuf  db 30 dup&#40;0&#41;<br />tmp  db 'Det h?r talet togs emot! %i',0<br />...<br />.code<br />...<br />mov dx,3f8h<br />in al,dx<br />invoke wsprintf,addr tmpbuf,addr tmp,al<br />invoke MessageBox,NULL,addr tmpbuf,addr DNamn,MB_OK<br />...<br /></code></pre><br />ive written a driver that changes the IOPM so this process can access the comport (thank you Four-F =).</div>
    <div class="meta">Posted on 2004-02-16 17:36:50 by sluggo</div>
   </div>
   <div class="post" id="post-133760">
    <div class="subject"><a href="#post-133760">funny looking Messagebox..?</a></div>
    <div class="body">wsprintf takes DWORD parameters, you are passing a byte. The message box is not being displayed properly because the stack is corrupt.</div>
    <div class="meta">Posted on 2004-02-16 21:28:12 by donkey</div>
   </div>
   <div class="post" id="post-133762">
    <div class="subject"><a href="#post-133762">funny looking Messagebox..?</a></div>
    <div class="body">this kind of message box and dialogboxes can also be seen in nt systems when you dont have the xor eax,eax, ret (mov eax,FALSE) (mov eax,TRUE) statements at the end of your dlg proc when you return to system<br /><br />and if you open up task mgr youll see that it has hogged 100%cpu and all other functions will be noticeably slower</div>
    <div class="meta">Posted on 2004-02-17 00:04:39 by bluffer</div>
   </div>
   <div class="post" id="post-133771">
    <div class="subject"><a href="#post-133771">funny looking Messagebox..?</a></div>
    <div class="body">thanks donkey. and i promise to read the reference more properly before posting any more dumb questions!</div>
    <div class="meta">Posted on 2004-02-17 03:36:02 by sluggo</div>
   </div>
   <div class="post" id="post-133772">
    <div class="subject"><a href="#post-133772">funny looking Messagebox..?</a></div>
    <div class="body">there are no dumb questions. If it is, it's no longer a question but a statement. :grin:</div>
    <div class="meta">Posted on 2004-02-17 03:43:44 by arkane</div>
   </div>
  </div>
 </body>
</html>