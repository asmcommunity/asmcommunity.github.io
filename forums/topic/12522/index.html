<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Newbie - Why is this code generating an error - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12522" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=12522">Newbie - Why is this code generating an error</a></p>
   <div class="post" id="post-96857">
    <div class="subject"><a href="#post-96857">Newbie - Why is this code generating an error</a></div>
    <div class="body">Hi <br /><br />Am new to Assemply Can someone please tell me whats wrong with this code. <br />If i run it it will give the correct results but a popup window appears <br />saying there was errors. I am using Masm32 and Win2k.<br /><br />I use the following in a make file to assemble and link.<br /><br />###########Make File##################################################<br /><br />Test.exe: Test.obj<br />	link /SUBSYSTEM:console Test.obj kernel32.lib<br /><br /><br /><br />Test.obj: Test.asm<br />	ml /coff /c Test.asm <br /><br /><br />######################################################################<br /><br /><br />#############################Test.asm###################################<br />.386<br />.model flat, STDCALL<br />option casemap :none   ; case sensitive<br /><br />include \Masm32\include\Masm32.inc<br />includelib \Masm32\lib\Masm32.lib<br /> <br /><br /><br />.data<br />	<br />    	buffer Byte 20 Dup(0),0<br />	result Qword 0.0<br />	months Qword 12.0<br />	prompt Byte &quot;Please enter monthly salary&quot;,13,10,0<br />	prompt1 Byte &quot;Your Annual Salary Is: &quot;,0<br />	<br /><br />.code<br />	start:<br /><br />                INVOKE StdOut, ADDR prompt<br />                INVOKE StdIn, ADDR buffer, 20<br />	<br /><br />	<br />	INVOKE StrToFloat, ADDR buffer, ADDR result<br /><br />	fld result	<br />	fmul months<br /><br /><br />	fstp result<br /><br />	INVOKE StdOut, ADDR prompt1<br />	INVOKE FloatToStr2, result, ADDR buffer<br />                INVOKE StdOut, ADDR buffer<br /><br /><br />end start<br /><br />end<br /><br />#######################################################################</div>
    <div class="meta">Posted on 2003-04-15 04:06:18 by shiny</div>
   </div>
   <div class="post" id="post-96859">
    <div class="subject"><a href="#post-96859">Newbie - Why is this code generating an error</a></div>
    <div class="body">You forgot abt ExitProcess. <br />PS wrong forum. Your thread should be in main</div>
    <div class="meta">Posted on 2003-04-15 04:13:30 by roticv</div>
   </div>
   <div class="post" id="post-96865">
    <div class="subject"><a href="#post-96865">Newbie - Why is this code generating an error</a></div>
    <div class="body">I'd put the kernel32.lib in the asm file, usinge the inlcudelib. And I think it would be an good idea to include windows.inc and kernel32.inc. I've attached your code with some modifications so it compiles and run, as you intended (I hope).</div>
    <div class="meta">Posted on 2003-04-15 04:28:55 by scientica</div>
   </div>
   <div class="post" id="post-96872">
    <div class="subject"><a href="#post-96872">Newbie - Why is this code generating an error</a></div>
    <div class="body">Hi<br /><br />Thanks a lot scientica. I will try it and give you the feedback.</div>
    <div class="meta">Posted on 2003-04-15 05:10:58 by shiny</div>
   </div>
   <div class="post" id="post-96881">
    <div class="subject"><a href="#post-96881">Newbie - Why is this code generating an error</a></div>
    <div class="body">Oh yes, I suppose the error is due to the fact that every exe masm produced is padded with CCh at the end of the codes(which is int 3 in opcodes.) As you did not not call ExitProcess, the exe is excuted till int3 and thus the error.</div>
    <div class="meta">Posted on 2003-04-15 06:48:59 by roticv</div>
   </div>
   <div class="post" id="post-97181">
    <div class="subject"><a href="#post-97181">Newbie - Why is this code generating an error</a></div>
    <div class="body">Hi<br /><br />It worked perfectly. You made my day thanks a lot</div>
    <div class="meta">Posted on 2003-04-16 03:14:24 by shiny</div>
   </div>
  </div>
 </body>
</html>