<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Newbie needs some help - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4954" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4954">Newbie needs some help</a></p>
   <div class="post" id="post-34794">
    <div class="subject"><a href="#post-34794">Newbie needs some help</a></div>
    <div class="body">I'm a newbie to this forum, and I need a little bit of assistance.<br /><br />i'm having trouble writing a proggie (apparently)<br /><br />i have to write a program that reads 16 numbers (range from 0-999) from the standard input and displays them on the screen as a 4 X 4 matrix.  Like this:<br /><br />       0     50       2   200<br />     66     21     54     20<br />       1       3       4       6<br />   100   150   120     99<br /><br />then, it has to:<br />1) compute and display the sum of row 1<br />2) compute and display the sum of col 2<br />3) count and display the number of values &gt; 100<br />4) wait for a key to be pressed, and then interchange rows 1 and 2 and redisplay the matrix.<br /><br />this is what i have. anyone have any advice?<br /><pre><code><br />Title Assignment6 &#40;try2.asm&#41;<br /><br />.model small<br />.stack 100h<br /><br />.data<br />   numberPrompt db &quot;Enter a number between 0 and 999&#58; &quot;, 0<br />   sumRow1Msg db &quot;The sum of row 1 is&#58; &quot;, 0<br />   sumCol2Msg db &quot;The sum of column 2 is&#58; &quot;, 0<br />   numGtr100Msg db &quot;The number of values &gt; 100 is&#58; &quot;, 0<br />   notInRangePrompt db &quot;The value in not in the range&#58; &quot;, 0<br />   matrix dw 16 dup &#40;?&#41;<br />   count = 16<br /><br />.code<br />extrn Writestring&#58;proc, Readint&#58;proc, Writeint&#58;proc, Crlf&#58;proc<br /><br />main proc<br />   mov ax, @data<br />   mov ds, ax<br /><br />   call GetNums<br />   call DisplayMatrix<br />   call sumRow1<br />   call sumCol2<br />   call Greater100<br />   call Swap1W2<br /><br />main endp<br /><br />GetNums proc<br />   push cx<br />;   mov es, @data<br />   mov di, offset matrix<br />   mov cx, count<br /><br />   GetData&#58;<br />      mov dx, offset numberPrompt<br />      call Writestring<br />      call Readint<br /><br />;if &#40;ax &gt; 999&#41; or &#40;ax &lt; 0&#41; then jump to NOTINRANGE else jump to INRANGE<br /><br />      cmp ax, 999<br />      jg NOTINRANGE<br />      cmp ax, 0<br />      jl NOTINRANGE<br />      jmp INRANGE<br /><br />      NOTINRANGE&#58;<br />         mov dx, offset notInRangePrompt<br />         dec cx<br />         loop GetData<br /><br />      INRANGE&#58;<br />         call Crlf<br />         stosw          ; stosw = es&#58;&#91;di&#93;=ax; di+=2<br />         loop GetData<br /><br />   pop cx<br />GetNums endp<br /><br /><br />DisplayMatrix proc<br />   mov si, offset matrix<br />   mov cx, count<br />   Display&#58;<br />      lodsw        ;&#40;equivalent to mov ax,ds&#58;&#91;si&#93;; add si,2&#41;<br />      mov bx,10<br />      push cx     ; &#40;make sure WriteInt does not modify it&#41;<br />      call WriteInt<br />      pop cx<br />      dec cx       ;&#40;decrease cx by one, and check if lowest 2 bits are zero,<br />                  ;which means 4*k items have been printed, where k is integer&#41;<br />       test cx,3<br />       jnz short NotEndOfLine<br />       push cx<br />       call Crlf<br />       pop cx<br />   NotEndOfLine&#58;<br />       or cx,cx   ;&#40;if cx is not zero jump back to Display&#41;<br />       jnz Display<br />DisplayMatrix endp<br /><br />;get sum row 1<br />sumRow1 proc<br />   mov si, offset matrix<br />   mov bx, &#91;si&#93;<br />   mov cx, 3<br />   Sum1&#58;<br />      add si, 2<br />      add bx, &#91;si&#93;<br />      loop Sum1<br /><br />   mov  dx,offset sumRow1Msg<br />   push bx<br />   call Writestring<br />   pop bx<br /><br />   mov  ax,bx       ; get the sum&#40;in BX&#41;<br />   mov  bx,10<br />   call Writeint   ; display it<br />   call Crlf<br />sumRow1 endp<br /><br />;get sum col 2<br />sumCol2 proc<br />   mov si, offset matrix+2<br />   mov bx, &#91;si&#93;<br />   mov cx, 3<br />   Sum2&#58;<br />      add si, 8<br />      add bx, &#91;si&#93;<br />      loop Sum2<br /><br />   mov  dx, offset sumCol2Msg<br />   push bx<br />   call Writestring<br />   pop bx<br />   mov  ax,bx       ; get the sum&#40;in BX&#41;<br />   mov  bx,10<br />   call Writeint   ; display it<br />   call Crlf<br />sumCol2 endp<br /><br />; count display number vals &gt; 100<br />;while &#40;cx &lt; count&#41;<br />;&#123;<br />; if &#40;&#91;si&#93; &lt; 100&#41;<br />;      count = count + 1<br />; cx++<br />; si = si +2<br />;&#125;<br />Greater100 proc<br />   mov si, offset matrix<br />   xor bx, bx               ; set bx to zero<br /><br />   mov cx, 1<br />   While&#58;<br />      cmp cx, count<br />       jg Enddo<br />      cmp &#91;si&#93;, 100<br />       jl L2<br />      inc bx<br />   L2&#58;<br />      inc cx<br />      add si, 2<br />      jmp While<br />   Enddo&#58;<br />      mov  dx, offset numGtr100Msg<br />      push bx<br />      call Writestring<br />      pop bx<br />      mov  ax,bx       ; get the sum&#40;in BX&#41;<br />      mov  bx,10<br />      call Writeint   ; display it<br />      call Crlf<br />Greater100 endp<br /><br />;swap rows 1 and 2<br />Swap1W2 proc<br />   mov si, offset matrix<br />   mov di, offset matrix+8<br />   mov cx, 4<br />   rowSwap&#58;<br />      mov bx, &#91;si&#93;<br />      xchg bx, &#91;di&#93;<br />      mov &#91;si&#93;, bx<br />      add si, 2<br />      add di, 2<br />      loop rowSwap<br />   call DisplayMatrix<br />Swap1W2 endp<br /><br />end main<br /></code></pre></div>
    <div class="meta">Posted on 2002-04-24 02:50:44 by Zombiefreak</div>
   </div>
   <div class="post" id="post-34864">
    <div class="subject"><a href="#post-34864">Newbie needs some help</a></div>
    <div class="body">Howdy Zombiefreak,<br /><br />This looks like a school assignment.  Which means figuring it out on your own is a major point of the exercise.  Furthermore, I'm probably the last person on the forum to have helpful assembly advice--I'm as new if not newer to assembly than you.  So, this post isn't going to have the answer you thought you were looking for.<br /><br />However, some thoughts you may not have realized you needed:<br /><br />- You can paste code and preserve formatting by using the <strong>[</strong><strong>code]</strong> and <strong><strong>code]</strong> tags (note: use square braces, not curly).<br />- Try telling us what your program does wrong.  Does it add incorrectly?  What output DOES it generate?  Does it crash when you type input?  What kind of crash, and what error messages?  Does it not assemble?  What error messages does the assembler emit?<br />- I'm not trying to put you off; rather I'm trying to help you see how to formulate a question that will elicit answers.  :)<br /><br />Good luck!<br /><br />-Chalain<br /><br /><span style="font-size:9px><strong>bitRAKE</strong>: just fixed tag display.</span></div>
    <div class="meta">Posted on 2002-04-24 11:59:49 by Chalain</div>
   </div>
   <div class="post" id="post-34865">
    <div class="subject"><a href="#post-34865">Newbie needs some help</a></div>
    <div class="body">Well, i'm getting an error that says:<br />assembly1 &lt;129&gt; : fatal error A1008 unmatched marco nesting<br /><br />i've got most of the math worked out pretty well, to where it should work.  however, i'm not good with outputing to the screen.  I don't know how to output the matrix to the screen, in a right justified form.  Any tips?<br /><br />i'm trying to go through my old assignments to figure out what i did wrong.  my prof's kinda difficult and doesn't assist very much.</div>
    <div class="meta">Posted on 2002-04-24 12:04:41 by Zombiefreak</div>
   </div>
   <div class="post" id="post-34866">
    <div class="subject"><a href="#post-34866">Newbie needs some help</a></div>
    <div class="body"><div class="quote"><br />i'm trying to go through my old assignments to figure out what i did wrong.  my prof's kinda difficult and doesn't assist very much.</div>What about your class buddies? I always worked in groups - mainly so we could pick each other up when we were falling down drunk. :)</div>
    <div class="meta">Posted on 2002-04-24 12:08:23 by bitRAKE</div>
   </div>
   <div class="post" id="post-34867">
    <div class="subject"><a href="#post-34867">Newbie needs some help</a></div>
    <div class="body">Okay, again, I'm the worst assembly guy here, but...<br /><br />The error code is on the last line of the program, which usually means SHGHW (Something Has Gone Horribly Wrong), which also usually means you've got a formatting, layout, or pairing error somewhere.  You're probably omitting something early on in your code, like a close tag for something you opened.<br /><br />Hmm... Or, an open tag for something you've closed!  I don't have a 16-bit assembler, but I see what would be a bug on my system:<br /><br />Your program ends with end main, but your .code segment does not begin with <br /><br /><pre><code>main&#58;</code></pre><br /><br />Could that be it?<br /><br />OH, also... none of your procs end with ret.  Is that intentional?<br /><br />Cheers!<br /><br />-Chalain</div>
    <div class="meta">Posted on 2002-04-24 12:17:19 by Chalain</div>
   </div>
   <div class="post" id="post-34868">
    <div class="subject"><a href="#post-34868">Newbie needs some help</a></div>
    <div class="body">Chalain, if you got masm you actually *do* have a 16bit assembler...<br />you might not have a 16bit linker tho ;)</div>
    <div class="meta">Posted on 2002-04-24 12:31:25 by f0dder</div>
   </div>
   <div class="post" id="post-34888">
    <div class="subject"><a href="#post-34888">Newbie needs some help</a></div>
    <div class="body"><div class="quote"><br />Chalain, if you got masm you actually *do* have a 16bit assembler...<br />you might not have a 16bit linker tho ;) </div><br /><br />D'OH!  That's right.<br /><br />Hey, I *said* I was a poor authority.  :tongue:<br /><br />...at least I was right about <em>that</em>.  :grin:<br /><br />-Chalain</div>
    <div class="meta">Posted on 2002-04-24 15:52:44 by Chalain</div>
   </div>
   <div class="post" id="post-34916">
    <div class="subject"><a href="#post-34916">Newbie needs some help</a></div>
    <div class="body"><div class="quote"><br /><br /><br />Hmm... Or, an open tag for something you've closed!  I don't have a 16-bit assembler, but I see what would be a bug on my system:<br /><br />Your program ends with end main, but your .code segment does not begin with <br /><br /><pre><code>main&#58;</code></pre><br /><br />Could that be it?<br /><br />OH, also... none of your procs end with ret.  Is that intentional?<br /> </div><br /><br />I just looked this over again, to make sure it wasn't a script kiddie screw up, but it's not...whew.   From what I know (and what I've read in our book), code needs to look something like:<br /><pre><code><br />main proc<br />    blah blah blah<br />    call someFunction<br />main endp<br /><br />someFunction<br />   blah blah blah<br />someFunction endp<br /><br />end main<br /></code></pre><br />that's it.<br /><br />i've made a lot of corrections to the code to where it SHOULD work properly, but I'm still getting the unmatched macro nesting error.<br /><br />Edited code above as well.<br /><br />I found a standard library that'll format the matrix and all, but i'm tryin' really hard to figure all this stuff out.  can anyone help with that error?</div>
    <div class="meta">Posted on 2002-04-24 17:59:45 by Zombiefreak</div>
   </div>
   <div class="post" id="post-35182">
    <div class="subject"><a href="#post-35182">Newbie needs some help</a></div>
    <div class="body">Try renaming the label <strong>While</strong> to something else. It's potentially confusing to the assembler to use a predefined identifier (<strong>while</strong> is actually a macro loop directive) as a label.</div>
    <div class="meta">Posted on 2002-04-26 14:59:45 by tenkey</div>
   </div>
  </div>
 </body>
</html>