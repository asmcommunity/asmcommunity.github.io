<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Packed BCD floating point. Whats that?? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6605" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=6605">Packed BCD floating point. Whats that??</a></p>
   <div class="post" id="post-47682">
    <div class="subject"><a href="#post-47682">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Hi all<br /><br />Does this ancient data format still have some use in these FPU days? I will say yes if fast convertion to ascii or high precicion is needed. Here is a demo of the convertion methods. If there is any interest I can also show how to do basic maths.<br /><br />KetilO</div>
    <div class="meta">Posted on 2002-07-15 09:12:38 by KetilO</div>
   </div>
   <div class="post" id="post-47683">
    <div class="subject"><a href="#post-47683">Packed BCD floating point. Whats that??</a></div>
    <div class="body">and ... here is the code.</div>
    <div class="meta">Posted on 2002-07-15 09:16:19 by KetilO</div>
   </div>
   <div class="post" id="post-47763">
    <div class="subject"><a href="#post-47763">Re: Packed BCD floating point. Whats that??</a></div>
    <div class="body"><div class="quote"><em>Originally posted by KetilO </em><br />If there is any interest I can also show how to do basic maths.<br /><br />KetilO </div><br /><br />If you have the time or the inclination then I'd for one would like to see some of this :)<br /><br />Sliver</div>
    <div class="meta">Posted on 2002-07-15 14:07:52 by Sliver</div>
   </div>
   <div class="post" id="post-47908">
    <div class="subject"><a href="#post-47908">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Ditto</div>
    <div class="meta">Posted on 2002-07-16 08:18:36 by gscundiff</div>
   </div>
   <div class="post" id="post-47981">
    <div class="subject"><a href="#post-47981">Packed BCD floating point. Whats that??</a></div>
    <div class="body">I would like that very much.<br />Have you ever heard of excess 64 BCD encoding?<br />TIA.</div>
    <div class="meta">Posted on 2002-07-16 15:22:12 by Roy Cline</div>
   </div>
   <div class="post" id="post-48368">
    <div class="subject"><a href="#post-48368">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Hi all<br /><br />There seem to be some interest in this number format, so here is a demo with basic math operations.<br /><br />To Roy Cline: Excess 64 BCD??? Tell me more!<br /><br />KetilO</div>
    <div class="meta">Posted on 2002-07-18 07:45:17 by KetilO</div>
   </div>
   <div class="post" id="post-48710">
    <div class="subject"><a href="#post-48710">Packed BCD floating point. Whats that??</a></div>
    <div class="body">31 41 59 26 53 59 41 (this is hex) = 3.14159265359 (pi)<br />41 hex = 65 - 64 = 1 therefore number is 3.xxxxxxxx<br />31 41 59 26 53 59 C1 (this is hex) = -3.14159265359<br />C1 hex = 193 - 128 = 65 - 64 = 1 therefore number is -3.xxxxxxx<br />31 41 59 26 53 59 40     ''   &quot;  &quot; = 0.314159265359<br />31 41 59 26 53 59 C0   &quot;    &quot;   &quot; = -0.314159265359<br />The above is a 7 byte signed 12 digit precision excess 64 bcd numbers.<br />It helps to look at the encoded byte as a binary number you test<br />and mask off some bits.<br />This was designed for 8 bit registers, therefore today ....?<br />Note -- not limited to 7 bytes - can be more or less.</div>
    <div class="meta">Posted on 2002-07-18 22:39:24 by Roy Cline</div>
   </div>
   <div class="post" id="post-48735">
    <div class="subject"><a href="#post-48735">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Hi Roy Cline<br /><br />Exactly the same format as in the demo, except I have the exponent in the high byte. Putting the exponent in the high byte helps if you need to sort the numbers (just flip bit 7, the sign). I also have a math pack (in 16 bit code) using binary floating point. If there is any inerest in the subject I can rewrite it to 32 bit code.<br /><br />KetilO</div>
    <div class="meta">Posted on 2002-07-19 01:53:19 by KetilO</div>
   </div>
   <div class="post" id="post-48827">
    <div class="subject"><a href="#post-48827">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Yes I agree about the high byte and sorting -- if sorting was necessary I<br />did exactly that. And, yes I &quot;need&quot; a math package for this format in 32 or 64 bit.<br />We use to code a precision flag into our routines. The flag was the number<br />of bytes of precision - actually - the flag could only be 8, 10, 12, or 14.<br />Yes, I would like the package.<br />TIA.</div>
    <div class="meta">Posted on 2002-07-19 09:38:40 by Roy Cline</div>
   </div>
   <div class="post" id="post-54207">
    <div class="subject"><a href="#post-54207">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Hi KeltiO<br /><br />The bcd values represents the real hexadecimal numbers ?<br /><br />I mean when i calculate for example the number 1e16, it shows on the app<br /><br /><br />511000000000000000000000000000000000000000<br /><br />but it is indeed<br /><br />2386F26FC10000<br /><br />How they are represented ? I didn't figure out the bcd numbers.<br /><br />I'm trying to get the hexadecimal values for some equates like:<br /><br />LDBL_EPSILON 1.08420217248550443412e-019<br />FLT_MIN 1.175494351e-38F<br />LDBL_MAX 1.189731495357231765e+4932<br />FLT_EPSILON 1.192092896e-07F<br />DBL_MAX 1.7976931348623158e+308<br />DBL_EPSILON 2.2204460492503131e-016<br />DBL_MIN 2.2250738585072014e-308<br />LDBL_MIN 3.3621031431120935063e-4932<br />FLT_MAX 3.402823466e+38F<br /><br />Which values they really have in hexadecimal ?<br /><br />Best Regards,<br /><br />Beyond2000!</div>
    <div class="meta">Posted on 2002-08-20 01:25:39 by Beyond2000!</div>
   </div>
   <div class="post" id="post-54215">
    <div class="subject"><a href="#post-54215">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Hi Beyond2000!<br /><br />BCD (binary coded decimal) floating point is very different from binary floating point. In the demo the most signifficant byte holds the sign (most signifficant bit) and the binary representation of the exponent where 1e0=41h The exponent is really a pointer into a 128+Precision digits BCD. Also in BCD each number (0-9) is representated in a nybble (4 bits).<br /><br />In short:<br /><br />1e16=5110000......<br />2e1=4220000.....<br />3e0=4130000.....<br /><br />KetilO</div>
    <div class="meta">Posted on 2002-08-20 02:43:57 by KetilO</div>
   </div>
   <div class="post" id="post-54219">
    <div class="subject"><a href="#post-54219">Packed BCD floating point. Whats that??</a></div>
    <div class="body">Hi all<br /><br />Here is an unfinished demo of binary floating point the hard way. I did not finish it because I could not find an easy solution to the 999999.................. problem common to binary flating point. The demo confirms to the 10 byte (80 bit) floating point used by the FPU. You can set the presision by changing a constant (in 4 bytes steps)<br /><br />KetilO</div>
    <div class="meta">Posted on 2002-08-20 03:02:45 by KetilO</div>
   </div>
  </div>
 </body>
</html>