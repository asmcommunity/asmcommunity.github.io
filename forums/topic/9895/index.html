<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Newbie Question Concerning Structures - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9895" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=9895">Newbie Question Concerning Structures</a></p>
   <div class="post" id="post-73853">
    <div class="subject"><a href="#post-73853">Newbie Question Concerning Structures</a></div>
    <div class="body">Hi,<br />How would use one structure within another?  this doesnt work <br /><br />struc POINT x,y<br />{<br />        .x dw x+0<br />        .y dw y+0<br />}<br /><br />struc MSG hwnd,message,wParam,lParam,time,pt<br />{<br />  hwnd      dw hwnd+0<br />  message   dw message+0<br />  wParam    dw wParam+0<br />  lParam    dw lParam+0<br />  time      dw time+0<br />  pt        POINT                             &lt;------------- or POINT &lt;&gt; either<br />}     <br />Would be great if someone could help me thanx.</div>
    <div class="meta">Posted on 2003-01-01 10:25:21 by keyoke</div>
   </div>
   <div class="post" id="post-73854">
    <div class="subject"><a href="#post-73854">Newbie Question Concerning Structures</a></div>
    <div class="body">You get the error because &quot;pt&quot; label is used as the macro argument, and when you don't provide this argument to &quot;MSG&quot; macro, it has empty value, so &quot;pt POINT&quot; becomes &quot;POINT&quot; and this instruciton is not recognized (because there's no standard macro of that name, only the structure macro, which need a label).<br />Here's the correct version:<br /><pre><code><br />struc POINT x,y<br />&#123;<br />.x dw x+0<br />.y dw y+0<br />&#125;<br /><br />struc MSG hwnd,message,wParam,lParam,time,pt<br />&#123;<br /> .hwnd dw hwnd+0<br /> .message dw message+0<br /> .wParam dw wParam+0<br /> .lParam dw lParam+0<br /> .time dw time+0<br /> .pt POINT pt<br />&#125;<br /></code></pre></div>
    <div class="meta">Posted on 2003-01-01 10:31:12 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-73856">
    <div class="subject"><a href="#post-73856">Newbie Question Concerning Structures</a></div>
    <div class="body">hehe i shouldve seen that thanks for the help</div>
    <div class="meta">Posted on 2003-01-01 11:01:59 by keyoke</div>
   </div>
   <div class="post" id="post-73864">
    <div class="subject"><a href="#post-73864">Two Other Questions</a></div>
    <div class="body">Hi Privalov,<br />could u help me with just these two questions...<br /><br /><br />HWND            TYPEDEF DWORD <br />does this work for fasm? i didnt see typedef in the text.because i get an error when using it in my code eg<br /><br />hwnd HWND<br /><br />and is there a SIZEOF macro that can be used or must i just use this<br /><br />struc WNDCLASSEX   style,lpfnWndProc,cbClsExtra,\<br />                   cbWndExtra,hInstance,hIcon,hCursor,\<br />                   hbrBackground,lpszMenuName,hIconSm,cbSize<br />{<br />  .style             dw      style+0<br />  .lpfnWndProc       dw      lpfnWndProc+0<br />  .cbClsExtra        dw      cbClsExtra+0<br />  .cbWndExtra        dw      cbWndExtra+0<br />  .hInstance         dw      hInstance+0<br />  .hIcon             dw      hIcon+0<br />  .hCursor           dw      hCursor+0<br />  .hbrBackground     dw      hbrBackground+0<br />  .lpszMenuName      dw      lpszMenuName+0<br />  .lpszClassName     dw      lpszClassName+0<br />  .hIconSm           dw      hIconSm+0<br />  .cbSize  = $-.style<br />}  <br />will this work?<br /><br />thanks 4 your help</div>
    <div class="meta">Posted on 2003-01-01 12:01:40 by keyoke</div>
   </div>
   <div class="post" id="post-73875">
    <div class="subject"><a href="#post-73875">Newbie Question Concerning Structures</a></div>
    <div class="body">ASM is quite different from C/C++. For all windows variables (HWND, and all that other stuff) just use dd....example<br /><br />hwnd dd 0 ; that works......<br /><br />I'm not sure but I think you have to use the $-.firstvar thing...</div>
    <div class="meta">Posted on 2003-01-01 12:49:57 by CyberGuy</div>
   </div>
  </div>
 </body>
</html>