<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Code snippets - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7342" />
  <link rel="prev" href="../?id=7342&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=7342">Code snippets</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=7342&amp;page=1" style="">&laquo;</a><a href="../?id=7342&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="7342" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-56351">
    <div class="subject"><a href="#post-56351">Code snippets</a></div>
    <div class="body">One that I wrote just then for use in a certain rounding (and granuality) situation:<br /><br />inc eax<br />shr eax,2<br />adc eax,0<br />shl eax,2<br /><br />Will round eax up to the nearest multiple of 4, if nesscery (ie wont round 4 up to 8).<br /><br />I think this can be extened for other situations, ie if Ive allocated 34567 bytes of memory how much will of actualy been allocated becuase of the 4096 byte page granuality:<br /><br />add eax,011111111111b (11 bits)<br />shr eax,12<br />adc eax,0<br />shl eax,12<br /><br />But ive only tested the former version.</div>
    <div class="meta">Posted on 2002-09-06 06:07:59 by huh</div>
   </div>
   <div class="post" id="post-56355">
    <div class="subject"><a href="#post-56355">Code snippets</a></div>
    <div class="body"><strong>Huh</strong> try this instead:<br /><pre><code><br />add eax, 3<br />and eax, 0FFFFFFFCh<br /></code></pre><br /><br />Mirno</div>
    <div class="meta">Posted on 2002-09-06 06:48:29 by Mirno</div>
   </div>
   <div class="post" id="post-56371">
    <div class="subject"><a href="#post-56371">Code snippets</a></div>
    <div class="body">A more general solution would be this:<br /><br />add eax, R-1<br />and eax, -R<br /><br />where R is the power of two you want to round up to.</div>
    <div class="meta">Posted on 2002-09-06 08:44:39 by gliptic</div>
   </div>
   <div class="post" id="post-56572">
    <div class="subject"><a href="#post-56572">Code snippets</a></div>
    <div class="body">my all time favorite:<br /><br />mov eax, 0<br /><br />break dependencies on eax :)</div>
    <div class="meta">Posted on 2002-09-07 19:44:55 by stryker</div>
   </div>
   <div class="post" id="post-56613">
    <div class="subject"><a href="#post-56613">Code snippets</a></div>
    <div class="body">MOV is not all time favorite :)<br /><div class="quote">The AMD Athlon processor is able to avoid the false read<br />dependency on the XOR instruction.</div> <br /><div class="quote">Pentium 4 processor provides special support to xor, sub, or pxor operations,<br />specifically when executed within the same register, recognizing that clearing a<br />register does not depend on the old value of the register.<br /></div></div>
    <div class="meta">Posted on 2002-09-08 02:14:22 by Nexo</div>
   </div>
   <div class="post" id="post-56645">
    <div class="subject"><a href="#post-56645">Code snippets</a></div>
    <div class="body">I have a p3 and that was just <strong><u>my</u></strong> all time favorite not the all time favorite. :)</div>
    <div class="meta">Posted on 2002-09-08 09:46:30 by stryker</div>
   </div>
   <div class="post" id="post-56654">
    <div class="subject"><a href="#post-56654">Code snippets</a></div>
    <div class="body"><strong>stryker</strong>, you have luck with P3 :)<br /><br />24281603.pdf<br /><div class="quote">Pentium Pro and Pentium II processors provide special support to XOR a register with itself,<br />recognizing that clearing a register does not depend on the old value of the register.<br /></div></div>
    <div class="meta">Posted on 2002-09-08 11:02:00 by Nexo</div>
   </div>
   <div class="post" id="post-56656">
    <div class="subject"><a href="#post-56656">Code snippets</a></div>
    <div class="body">lol :grin:</div>
    <div class="meta">Posted on 2002-09-08 11:11:50 by stryker</div>
   </div>
   <div class="post" id="post-57450">
    <div class="subject"><a href="#post-57450">Code snippets</a></div>
    <div class="body">This one terminates the current process on XP:<br /><pre><code><br />not esp<br />int 3<br /></code></pre><br /><br />I dunno what it will do on the 95 family of windows.</div>
    <div class="meta">Posted on 2002-09-12 22:36:05 by huh</div>
   </div>
   <div class="post" id="post-57456">
    <div class="subject"><a href="#post-57456">Code snippets</a></div>
    <div class="body">nop<br /><br />sometimes adding a couple of this in a loop will increase the speed of an algorithm. :)</div>
    <div class="meta">Posted on 2002-09-12 23:36:07 by stryker</div>
   </div>
   <div class="post" id="post-57457">
    <div class="subject"><a href="#post-57457">Howz this one?</a></div>
    <div class="body">*************<br /><br />CLI<br />HLT<br /><br />**************<br /><br /><br />Two bytes but powerful,</div>
    <div class="meta">Posted on 2002-09-13 00:21:05 by sajen</div>
   </div>
   <div class="post" id="post-57462">
    <div class="subject"><a href="#post-57462">Code snippets</a></div>
    <div class="body"><strong>cli</strong> and <strong>hlt</strong>(I think) are both privileged instructions and both will cause an exception under NT -&gt; XP</div>
    <div class="meta">Posted on 2002-09-13 00:48:42 by huh</div>
   </div>
   <div class="post" id="post-57464">
    <div class="subject"><a href="#post-57464">How about this one</a></div>
    <div class="body">I have tested it on Windows 95 works 8-)<br /><br />*********************<br /><br />MOV AX,1681h         <br />INT 21h              ;Go to critical mode 8-)<br /><br /><br />*********************<br /><br /><br /><br />Now I am not sure about this one, but I think that this will make Windows go into a beautiful mode, where no applications are executed. untill AX is filled with 1682 and the INT 21h is called, But then why should we call INT 21H, <br /><br />Windows always likes to be hanged right 8-)</div>
    <div class="meta">Posted on 2002-09-13 01:09:06 by sajen</div>
   </div>
   <div class="post" id="post-57488">
    <div class="subject"><a href="#post-57488">Code snippets</a></div>
    <div class="body">What preempts under XP when an app doesn't return from a wind_msg_loop?</div>
    <div class="meta">Posted on 2002-09-13 03:40:31 by eet_1024</div>
   </div>
   <div class="post" id="post-57490">
    <div class="subject"><a href="#post-57490">Code snippets</a></div>
    <div class="body">sajen - XP is built on a kernel in which security is actually implemented. I dont think there is any general method from which you can hang XP without ring0 priviledges, and I dont think there is anyway of getting ring zero priviledges without writing a driver.<br /><br />But then again, like most people I consider this a good thing :)<br /><br />eet_1024 - I presume that would be the point in which windows decideds your app is not responding?</div>
    <div class="meta">Posted on 2002-09-13 03:48:12 by huh</div>
   </div>
   <div class="post" id="post-57658">
    <div class="subject"><a href="#post-57658">Code snippets</a></div>
    <div class="body">Since windows is cooperative, is there a watch dog timer that returns control to windows?</div>
    <div class="meta">Posted on 2002-09-14 01:23:40 by eet_1024</div>
   </div>
   <div class="post" id="post-58280">
    <div class="subject"><a href="#post-58280">Code snippets</a></div>
    <div class="body"><div class="quote"><br />Since windows is cooperative, is there a watch dog timer that returns control to windows? </div><br /><br />Windows versions later than 3.11 (or NT+) are not cooperative, they are preemptive. The timer calls a SwitchProcess / SwitchThread interupt which transfers control to another process or thread. If an application is freezed or crashed, windows will hopefully detect it and kill it.</div>
    <div class="meta">Posted on 2002-09-17 04:35:04 by gliptic</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=7342&amp;page=1" style="">&laquo;</a><a href="../?id=7342&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="7342" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>