<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Are there places for downloading precompiled .LIB-files? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29072" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29072">Are there places for downloading precompiled .LIB-files?</a></p>
   <div class="post" id="post-205362">
    <div class="subject"><a href="#post-205362">Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">I often find tons of source code written in sh**y C. But none of it contains a library which I can statically include in an asm project. I am absolutely not interested in installing an ugly C compiler devouring thousands of millions of bytes which is giving me lots of error messages even if I would compile a simple &quot;Hello world&quot; to compile such a library by myself.<br />So I would rather prefer to download a .LIB file and - if nothing other is available - a C-header file which I can easily translate into ASM.<br />Recently I am searching for a library for the audio compressor &quot;wavpack&quot; and the data compressor &quot;7zip&quot;.<br /><br />Are there any dedicated people out there who make such libraries available?<br /><br />Thanks in advance.</div>
    <div class="meta">Posted on 2008-05-25 15:43:51 by TasmDev</div>
   </div>
   <div class="post" id="post-205363">
    <div class="subject"><a href="#post-205363">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">You can find lots of .lib files on the web, however I suggest you don&#039;t use them unless you:<br />A) have a good look at the code in a debugger<br />B) are absolutely convinced that the source is clean.<br /><br />Theres a LOT of malware getting about inside LIB files - think about it, they&#039;re a choice target because the malware ends up in some innocent author&#039;s application, who gets the blame?<br /></div>
    <div class="meta">Posted on 2008-05-25 22:59:05 by Homer</div>
   </div>
   <div class="post" id="post-205384">
    <div class="subject"><a href="#post-205384">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">this website <a target="_blank" href="http://fasmlib.x86asm.net/">http://fasmlib.x86asm.net/</a> has some libraries. doesn&#039;t look like it has the specific ones your looking for though. the libraries support masm, fasm, nasm and vasm.</div>
    <div class="meta">Posted on 2008-05-28 02:05:30 by smurf</div>
   </div>
   <div class="post" id="post-205422">
    <div class="subject"><a href="#post-205422">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body"><div class="quote"><br />You can find lots of .lib files on the web</div><br /><br />OK, tell me where.<br />Almost all of the &quot;libraries&quot; are C/C++ source code files, which have to be compiled first with the respective C compiler.<br /><br /><div class="quote"><br />however I suggest you don&#039;t use them unless...</div><br /><br />I am not a layman.<br /><br /><div class="quote"><br />this website <a target="_blank" href="http://fasmlib.x86asm.net/">http://fasmlib.x86asm.net/</a> has some libraries.</div><br /><br />Thanks for your help, but this is not what I am looking for. I prefer to utilize the sophisticated standard-C-libraries/DLLs from M$ which are shipped in every OS.</div>
    <div class="meta">Posted on 2008-06-01 13:04:37 by TasmDev</div>
   </div>
   <div class="post" id="post-205426">
    <div class="subject"><a href="#post-205426">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">In regards to 7-zip, this product is not released in DLL form, so thats why you won&#039;t find a lib for it - however I looked at the sourcecode in the SDK download, and it does contain a DLL build, but yes, you&#039;ll have to compile the sourcecode yourself - doing so will produce both a DLL AND a LIB file.<br />In regards to WAVPACK - the &#039;Windows DLL&#039; download pack does indeed contain the LIB as well.<br /><br />Anything else?<br /><br /></div>
    <div class="meta">Posted on 2008-06-02 02:13:13 by Homer</div>
   </div>
   <div class="post" id="post-205431">
    <div class="subject"><a href="#post-205431">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">As an ASM-programmer I don&#039;t want separate DLLs.<br /><br />First reason:<br />If the worst comes to the worst this would have the user of my program to store them into the Win-Sys-directory - just only for the purpose of running this one program. I don&#039;t want to annoy users with unnecessary installation processes.<br /><br />Second reason:<br />The program becomes OS-specific. I would have to adapt the ASM-source for different calling conventions. Only those ugly GNU-programmers do that and harass poor users with strange &quot;tarball-gz-mingw&quot;-installations, if they don&#039;t run on the UNOX-rail.<br /><br />If I had static libraries I would be able to insert all the code into the one and only binary and could compile it with Watcom-Link for every OS or every purpose I like.<br /><br />Not having appropriate libraries at disposal is one of the greatest drawbacks an ASM-programmer can have. This is one reason that makes programming in ASM intricately.</div>
    <div class="meta">Posted on 2008-06-02 20:53:40 by TasmDev</div>
   </div>
   <div class="post" id="post-205440">
    <div class="subject"><a href="#post-205440">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body"><strong>TasmDev:</strong> no reason to dump the DLL files in %SystemRoot%, just dump them in the your application&#039;s folder... Sure, you&#039;ll have to distribute a .zip instead of a single .exe, but just how bad is that? The only real issue is that you&#039;ll bloat up size a bit unless you link dynamically against libc, but that&#039;s a relatively low hit with most compilers.<br /><br />The source doesn&#039;t become any more OS-specific by linking dynamically, just like it doesn&#039;t become any less OS-specific by linking statically (and you mean toolset-specific anyway, not os-specific). Either the C library source doesn&#039;t specify a calling convention, and will be CDECL (except for x64 builds, but that would require different assembly code anyway), or it specifies a calling convention, which you&#039;ll then have to use - simple as that.<br /><br />Yes, I can understand that it&#039;s a bother for you that static libraries might not be readily available, but I&#039;m afraid that&#039;s just the way the world is. It&#039;s a good idea having a (decent) C/C++ toolchain installed anyway, so you won&#039;t have to wait for other people to recompile a library for you, in case a critical bug is found in a library you use.</div>
    <div class="meta">Posted on 2008-06-03 06:40:51 by f0dder</div>
   </div>
   <div class="post" id="post-205441">
    <div class="subject"><a href="#post-205441">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">lol - ouch @ libC exploits</div>
    <div class="meta">Posted on 2008-06-03 07:27:24 by Homer</div>
   </div>
   <div class="post" id="post-205442">
    <div class="subject"><a href="#post-205442">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body"><div class="quote"><br />lol - ouch @ libC exploits<br /></div><br />What do you mean by this?<br /><br />If you&#039;re talking about the various unsafe libc string functions, I wouldn&#039;t recommend anybody to use them... existing libraries tend to use libc functions, though, and thus you can&#039;t really do away with it, if you wan&#039;t to use other people&#039;s code.</div>
    <div class="meta">Posted on 2008-06-03 07:36:39 by f0dder</div>
   </div>
   <div class="post" id="post-205444">
    <div class="subject"><a href="#post-205444">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">Actually my current project is completely in assembly and uses several DLLs, the advantages of DLLs do not magically disappear just because we are using assembly language. They provide a very modular way to distribute your package and allow for updates and enhancements to be small and manageable. For instance in RMS (my project) there are 7 DLLs that handle many of the end user specific tasks and optimiztaions while the main program is largely static and uniform for all users. Since each customer has very specific needs and formulae the idea of lumping them into an unmanageable behemoth of code would be counter-productive. There are places for static linking, for example zlibstat is one I use quite often as well as my own libraries that contain alot of the standard code snippets I use but outside of those I generally use dynamically linked files. iExpress does an adequate job of packaging the application and using DLLs allows me to target specific scenarios without rewriting alot of code or including a spaghetti of execution paths in order to optimize the program for different Windows versions, processors and instruction sets.<br /><br />Donkey</div>
    <div class="meta">Posted on 2008-06-03 22:14:02 by donkey</div>
   </div>
   <div class="post" id="post-205446">
    <div class="subject"><a href="#post-205446">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body"><div class="quote"><br />If you&#039;re talking about the various unsafe libc string functions, I wouldn&#039;t recommend anybody to use them... existing libraries tend to use libc functions, though, and thus you can&#039;t really do away with it, if you wan&#039;t to use other people&#039;s code<br /></div><br /><br />Indeed - I was referring to the issue of exploits in public libraries being inherited and distributed through precompiled binary libraries built on such public libraries... the libc string functions are just a great example.<br /><br /></div>
    <div class="meta">Posted on 2008-06-03 23:56:59 by Homer</div>
   </div>
   <div class="post" id="post-205448">
    <div class="subject"><a href="#post-205448">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />If you&#039;re talking about the various unsafe libc string functions, I wouldn&#039;t recommend anybody to use them... existing libraries tend to use libc functions, though, and thus you can&#039;t really do away with it, if you wan&#039;t to use other people&#039;s code<br /></div><br /><br />Indeed - I was referring to the issue of exploits in public libraries being inherited and distributed through precompiled binary libraries built on such public libraries... the libc string functions are just a great example.<br /></div><br />They are... horrid<strong>++</strong> :) - designed back in the dawn of time, when people didn&#039;t think about exploits etc.</div>
    <div class="meta">Posted on 2008-06-04 08:30:17 by f0dder</div>
   </div>
   <div class="post" id="post-205469">
    <div class="subject"><a href="#post-205469">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">The further the topic goes the further the subject changes.<br /><br />I didn&#039;t ask about security exploits of .LIB-files - I asked if they are available for download somewhere.</div>
    <div class="meta">Posted on 2008-06-08 20:38:43 by TasmDev</div>
   </div>
   <div class="post" id="post-205489">
    <div class="subject"><a href="#post-205489">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">By the way, another reason that getting precompiled .lib files is a bad idea: you will be dependent on the libc version (and possibly also compiler) used to compile the .lib. Now, obviously libc doesn&#039;t get linked into a static library, but a thing like fgetc(), for instance, might be implemented as a macro that depends on internal data structures...<br /><br />Calling convention shouldn&#039;t be a problem, and name mangling usually isn&#039;t either, as long as you stick with C and not C++ (since you plan on using with assembly, you&#039;re probably sticking with C :)). But you <strong>could</strong> face problems wrt. padding and alignment of data structures.<br /><br />These are real-world issues, that tend to show up as pretty subtle bugs...</div>
    <div class="meta">Posted on 2008-06-14 07:21:44 by f0dder</div>
   </div>
   <div class="post" id="post-207302">
    <div class="subject"><a href="#post-207302">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">After a long time of experimenting I have found a convenient solution to compile and use different compiled C source codes in assembler programs. This extends programming possibilities immense.<br /><br />I want to describe how it can be accomplished this for 32bit-libraries with the WATCOM-C-compiler.<br /><br />Download WATCOM-C here:<br />ftp://ftp.openwatcom.org/open-watcom-c-dos-1.8.exe <br />or<br />ftp://ftp.openwatcom.org/open-watcom-c-win32-1.8.exe<br />(77MB, both files have the same content)<br /><br />Extract the self-extracting ZIP-file to a path of your choice (I don&#039;t recommend to start the self-extracting EXE).<br /><br />Create a BAT-file similar to this (name it COMPIL32.BAT, for example):<br /><pre><code><br />@echo off<br />set dos4g=quiet<br />set wcgmemory=?<br />set watcom=&lt;!!!SET_THIS_TO_YOUR_MAIN_WATCOM_FOLDER!!!&gt;<br />set include=%watcom%\h;%watcom%\h\nt;.<br />set wcc386=%wcc386%/q/5r/ai/aq/d0/ecd/fpi87/fp5/oaehnps/s/zm/zp#1/zz<br />%watcom%\binnt\wcc386 %1 %2 %3 %4 %5 %6 %7 %8 %9<br />set watcom=<br />set wcc386=<br />set include=<br /></code></pre><br />Description:<br />Line 4: Path to the main-WATCOM-folder<br />Line 6: Change this line to your preferred compiler options (invoke WCC386.EXE for a description)<br /><br />To make sure that all functions can be called from assembler with &quot;__stdcall&quot; conventions and without name-mangling I do the following:<br /><br />Edit the file %WATCOM%\H\_comdef.h, line 50:<br />Replace:<br /><pre><code><br />#define _WRTLFCONV __declspec(__watcall)<br />#define _WRTLDCONV __declspec(__watcall)<br /></code></pre><br />with:<br /><pre><code><br />#pragma aux default &quot;*&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parm routine &#91;] \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value struct struct caller &#91;] \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modify <br />#pragma aux __cdecl &quot;*&quot; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; parm routine &#91;] \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value struct struct caller &#91;] \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modify <br />#define _WRTLFCONV __declspec(__cdecl)<br />#define _WRTLDCONV __declspec(__cdecl)<br /></code></pre><br /><br />Now it is necessary to analyze the source code for additional switches required to make. This depends on the complexity of the source and might be very difficult.<br />After managing this compile a file &quot;source.c&quot; using COMPIL32.BAT with the required switches:<br /><pre><code><br />COMPIL32.BAT /fi&lt;REQUIRED_ADDITIONAL_INCLUDE_FILES&gt; /i&lt;REQUIRED_ADDITIONAL_INCLUDE_FOLDER&gt; /d&lt;REQUIRED_DEFINITIONS&gt; source.c<br /></code></pre><br /><br />Now all C-functions can be accessed by assembler like this (TASM-syntax):<br />Declaration:<br /><pre><code><br />c_lib_function	proto stdcall param1:type1, param2:type2, var_params:type_var:?<br /></code></pre><br />Or:<br /><pre><code><br />.686p<br />.model flat,stdcall<br />.code<br />c_lib_function	proto param1:type1, param2:type2, var_params:type_var:?<br /></code></pre><br />Calling the function (TASM-syntax):<br /><pre><code><br />call c_lib_function, param_1, param_2, param_var_1, param_var_2<br /></code></pre><br /><br />Now the .OBJ-files can be linked together (if you use WLINK, see its documentation).</div>
    <div class="meta">Posted on 2009-04-12 13:20:29 by TasmDev</div>
   </div>
   <div class="post" id="post-207308">
    <div class="subject"><a href="#post-207308">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">Hi TASMDev, I assume you are working exclusively with TASM, but I have searched before for something similar using MASM.&nbsp; I was looking for use a DLL without having to LoadLibrary, GetProcAddress, FreeLibrary method and stumbled across this:<br />http://win32assembly.online.fr/importlib.html<br />This may or may not help you since you have a procedure already and this does use the MASM package.</div>
    <div class="meta">Posted on 2009-04-13 00:10:50 by GoldStar611</div>
   </div>
   <div class="post" id="post-207313">
    <div class="subject"><a href="#post-207313">Re: Are there places for downloading precompiled .LIB-files?</a></div>
    <div class="body">To create import libraries from DLLs is easer to do for TASM than for MASM. MASM has the bad habit to decorate all _stdcall-functions with pre- and suffixes. They have to be removed later with some waste of effort. Your link is proving this.<br />With WLIB only one step is necessary to create a ready-to-use import library:<br /><pre><code><br />WLIB /q /pa /c imp_mydll +mydll.dll<br /></code></pre><br /><br />Given that the declaration for a function is known it can be used immediatly in the ASM-source:<br /><pre><code><br />includelib imp_mydll.lib<br />my_imp_func proto stdcall p1:type1, p2:type2<br />...<br />call my_imp_func, parm1, parm2<br /></code></pre><br /><br />But my problem didn&#039;t consist in creating import libraries from DLLs - my problem is: I often can&#039;t find appropriate pre-compiled libraries for my purposes. I thought I had expressed this a long time ago. In most cases algorithms exist in C-source code only (e.g. TAR-BZ files) which must be compiled first to use it. So I thought I could communicate this idea here.</div>
    <div class="meta">Posted on 2009-04-13 07:48:21 by TasmDev</div>
   </div>
  </div>
 </body>
</html>