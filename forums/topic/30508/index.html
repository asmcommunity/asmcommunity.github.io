<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>VKim inspired macros for GoAsm X64 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30508" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=42">RadASM</a> &raquo; <a href="../?id=30508">VKim inspired macros for GoAsm X64</a></p>
   <div class="post" id="post-214189">
    <div class="subject"><a href="#post-214189">VKim inspired macros for GoAsm X64</a></div>
    <div class="body">For those 64 bit GoAsm developers who use RadAsm 3.x as their primary IDE I have attached a set of runtime debug macros They allow you to get runtime data from your project as well as a few other useful functions such as code disassembly and symbol table dumps, single step variable spy, MMX and FPU contents. See the readme file for syntax. The library is loosely based on vKim&#039;s excellent macros for MASM and is pretty much all I use when debugging 64 bit apps because of the lack of 64 bit compatible tools (PEBrowse and WinDbg being the only ones I have). This is a work in progress since I add functions as I need them or someone asks for them so if you find it useful you might want to check in every once in a while to see if its been updated.<br /><br />You must use the /MIX GoLink switch when building with this library. You need the latest headers from my website in order to rebuild the lib project, they are available <a target="_blank" href="http://www.quickersoft.com/donkey/index.html">here</a>. Source code and RadAsm 3.x project file are included.<br /><br />Some sample outputs:<br /><br />Disassemble(offset SomeLabel,10)<br /><pre><code>----------------------------------------<br />Disassembling 10 lines beginning at 0000000000401114<br />----------------------------------------<br />00000000`00401114 48894c2408 &nbsp; &nbsp; &nbsp;mov &nbsp; &nbsp; qword ptr ,rcx<br />00000000`00401119 4889542410 &nbsp; &nbsp; &nbsp;mov &nbsp; &nbsp; qword ptr ,rdx<br />00000000`0040111e 4c89442418 &nbsp; &nbsp; &nbsp;mov &nbsp; &nbsp; qword ptr ,r8<br />00000000`00401123 4c894c2420 &nbsp; &nbsp; &nbsp;mov &nbsp; &nbsp; qword ptr ,r9<br />00000000`00401128 55 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;push &nbsp; &nbsp;rbp<br />00000000`00401129 4889e5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mov &nbsp; &nbsp; rbp,rsp<br />00000000`0040112c 4881ec88000000 &nbsp;sub &nbsp; &nbsp; rsp,88h<br />00000000`00401133 c745b050000000 &nbsp;mov &nbsp; &nbsp; dword ptr ,50h<br />00000000`0040113a c745b403000000 &nbsp;mov &nbsp; &nbsp; dword ptr ,3<br />00000000`00401141 48c745b8fa124000 mov &nbsp; &nbsp; qword ptr ,offset test64+0x12fa (00000000`004012fa)<br />----------------------------------------<br />Disassembly ended, next instruction at 0000000000401149<br />----------------------------------------</code></pre><br /><br />DumpSymbols<br /><pre><code>----------------------------------------<br />Dumping symbol table<br />----------------------------------------<br />0x0000000000401057 : CODE : START<br />0x0000000000401114 : CODE : WinMain<br />0x00000000004012FA : CODE : DlgProc<br />0x000000000040131D : CODE : DlgProc.WM_COMMAND<br />0x0000000000401356 : CODE : DlgProc.WM_DESTROY<br />0x0000000000401374 : CODE : DlgProc.DEFPROC<br />0x00000000004013A0 : CODE : DlgProc.EXIT<br />0x0000000000405000 : DATA : szRad30WinClass<br />0x0000000000405878 : DATA : hInstance<br />0x0000000000405880 : DATA : hDlg<br />0x0000000000405888 : DATA : buffer<br />0x0000000000406000 : CNST : TestConstant<br />----------------------------------------</code></pre><br /><br />DumpMem(offset ClassName,64)<br /><pre><code>----------------------------------------<br />Line 83 : Hex dump of 64 bytes at address 0x405012<br />0000000000405012: 44 69 61 6C 6F 67 43 6C 61 73 73 00 00 00 00 00 DialogClass.....<br />0000000000405022: 00 00 F4 3F 52 B8 9E 3F 98 FF 00 00 98 FF 00 00 ...?R..?........<br />0000000000405032: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 39 56 ..............9V<br />0000000000405042: FE 27 07 84 47 4F 83 64 EE 11 8F B0 8A C8 68 E6 .&#039;..GO.d......h.<br />----------------------------------------</code></pre><br /><br />Note that it only works in 64 bit programs and with RadAsm 3.x. Symbols require a COFF based debug build. Include the following in your source, change the paths to reflect your system:<br /><br /><pre><code>#define DBG64LIB C:\Programming\RadASM3\GoAsm\dbg\Debug64.lib<br />#include C:\Programming\RadASM3\GoAsm\dbg\Debug64.a</code></pre><br /><br />Edgar</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=3310" target="_blank">Debug64.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2011-03-18 00:07:47 by donkey</div>
   </div>
  </div>
 </body>
</html>