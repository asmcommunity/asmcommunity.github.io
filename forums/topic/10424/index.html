<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Size of the compiled binary... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10424" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=10424">Size of the compiled binary...</a></p>
   <div class="post" id="post-78339">
    <div class="subject"><a href="#post-78339">Size of the compiled binary...</a></div>
    <div class="body">Hi..<br /><br />I've come across a, for me, strange behavior of the ml/link combo...<br /><br />I wrote a small dll and during the development the dll size kept at a constant size of 3.072 bytes.. it didn't change by putting more code in or cutting some out (well.. eventually it would change, of course)..<br /><br />Even Iczelion's tutorial #2 compiles at 2.560 bytes, whereas s/he writes that on the used machine it compiled at 1.536 bytes.<br /><br />Examined with a hexeditor one can see that the binary is filled with '00' bytes... as padding obviously...<br /><br />Now I wonder, is there a way to cut that padding down? I mean, of course 3k or 2k is not really big... but still it bugs me when I know that it should be possible to cut it down... :)<br /><br />Any ideas?<br />- Thomas</div>
    <div class="meta">Posted on 2003-01-25 16:03:56 by TAF</div>
   </div>
   <div class="post" id="post-78340">
    <div class="subject"><a href="#post-78340">Size of the compiled binary...</a></div>
    <div class="body">Use PE realigner.</div>
    <div class="meta">Posted on 2003-01-25 16:10:44 by comrade</div>
   </div>
   <div class="post" id="post-78345">
    <div class="subject"><a href="#post-78345">Size of the compiled binary...</a></div>
    <div class="body">&gt; Use PE realigner.<br /><br />I've googled a bit for those and there are quite a lot of those... any recommendations?<br /><br />So there's nothing one can do (switches, directives, etc.) with the tools provided (ml, link, etc.)?<br /><br />- Thomas</div>
    <div class="meta">Posted on 2003-01-25 16:45:54 by TAF</div>
   </div>
   <div class="post" id="post-78362">
    <div class="subject"><a href="#post-78362">Size of the compiled binary...</a></div>
    <div class="body"><div class="quote"><br /><br />So there's nothing one can do (switches, directives, etc.) with the tools provided (ml, link, etc.)?<br /><br />- Thomas </div><br /><br />What about the /ALIGN switch? :)</div>
    <div class="meta">Posted on 2003-01-25 19:10:29 by bazik</div>
   </div>
   <div class="post" id="post-78409">
    <div class="subject"><a href="#post-78409">Size of the compiled binary...</a></div>
    <div class="body"><div class="quote">What about the /ALIGN switch?</div> <br /><br />It spits out a warning (LINK : warning LNK4108: /ALIGN specified without /DRIVER or /VXD; image may not run) but the linked dll seems to work and is much smaller indeed... from 3.072 down to 1.216.. :)<br />I chose /ALIGN:64 is that ok? what would be a good value?<br /><br />So, in most cases(?), I can disregard that warning ?<br /><br />Thanks for that /ALIGN hint...<br />- Thomas</div>
    <div class="meta">Posted on 2003-01-26 03:32:37 by TAF</div>
   </div>
   <div class="post" id="post-78635">
    <div class="subject"><a href="#post-78635">Size of the compiled binary...</a></div>
    <div class="body">TAF,<br /><br />be careful with alignment, the default with the linker in MASM32 is 512 bytes and if you go under that, the image will probably not run. The zero padding is to maintain section alignment so there is not a lot that can be done about it.<br /><br />What may be worth a try is to combine the sections in the DLL as you may get a size reduction this way but be sure to test it on the later versions of Windows as they can be a bit piggy about changes of this type.<br /><br />Have a look at the /MERGE option.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2003-01-27 12:07:03 by hutch--</div>
   </div>
   <div class="post" id="post-78670">
    <div class="subject"><a href="#post-78670">Size of the compiled binary...</a></div>
    <div class="body">Hi Hutch..<br /><br />The Alignment.. yeah.. although everything worked I had a weird feeling about that small alignment.. and eventually resigned to the fact that MASM must have chosen that alignment and displayed that warning with good reason... so I switched back to the default...<br /><br />Will look into that /MERGE switch...<br /><br />Still I find that padding (in the file) strange.. :)<br /><br />Thanks.. <br />- Thomas</div>
    <div class="meta">Posted on 2003-01-27 16:18:13 by TAF</div>
   </div>
  </div>
 </body>
</html>