<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>FPU in windows NT? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26552" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26552">FPU in windows NT?</a></p>
   <div class="post" id="post-192086">
    <div class="subject"><a href="#post-192086">FPU in windows NT?</a></div>
    <div class="body">hi,
i tried to run some of my programs on win nt. the programs use gdi functions and fpu. i looked up in the api-reference that all my gdi functions are supported on nt, but what's the problem then? why doesnt my program run? is it because of FPU instructions? if you want to try yourself, please download "balls.zip" or "flinstra.zip" from my website: www.fly.to/safcon

tnx for your help!
cya</div>
    <div class="meta">Posted on 2001-01-10 13:27:00 by [SaFc0n]</div>
   </div>
   <div class="post" id="post-192087">
    <div class="subject"><a href="#post-192087">FPU in windows NT?</a></div>
    <div class="body">NT is WAY more strict about your programming style than other versions of windows. It's these strict standards that make NT so stable. For example you absolutely MUST preserve ebx, esi and edi registers under NT. If you alter one of them and don't put it back, your program won't run. Also when access any hardware (Including the file system) you must implement security function properly, or it will only run while the administrator is logged in. Also you must make sure that you don't push more data than you pop. 

Most of these things you can get away with under win9x and your program will run and compile fine, however on NT or Win2k it won't function.
Hope this helps a little,
Ben</div>
    <div class="meta">Posted on 2001-01-10 21:17:00 by cyberben </div>
   </div>
   <div class="post" id="post-192088">
    <div class="subject"><a href="#post-192088">FPU in windows NT?</a></div>
    <div class="body">A lot of the Win9x GDI is in 16-bit code.  When the system switches from 32-bit to 16-bit code, the 32-bit registers are automatically preserved.  If the 32-bit API function simply delegates all of its function to 16-bit code, all your registers are preserved automatically.  That's how your program escaped problems on Win9x.

In NT, the GDI remains in 32-bit code, which makes certain assumptions about which registers it can clobber, and which ones it must preserve.  Ignore these assumptions (conventions) at your peril.</div>
    <div class="meta">Posted on 2001-01-10 22:00:00 by tank </div>
   </div>
  </div>
 </body>
</html>