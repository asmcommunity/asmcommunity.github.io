<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>negative numbers - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9238" />
    <link rel="next" href="../?id=9238&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=9238">negative numbers</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=9238&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=9238&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="9238" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=9238&amp;page=2">&gt;</a><a href="../?id=9238&amp;page=2">&raquo;</a></form>   <div class="post" id="post-67975">
    <div class="subject"><a href="#post-67975">negative numbers</a></div>
    <div class="body">mov eax,-5<br /><br />why it is -5 and not 11111111111111111111111111111100 b &lt;===Very huge number. <br /><br />if i load -5 or 11111111111111111111111111111100 b how the program  know what i wont to have in eax.<br /><br />how can i make  |-5| = 5  if i do not know that ^:eek:</div>
    <div class="meta">Posted on 2002-11-28 14:40:04 by drakoforma</div>
   </div>
   <div class="post" id="post-67981">
    <div class="subject"><a href="#post-67981">negative numbers</a></div>
    <div class="body">answer:<br /><br />when u refer to -5, its really a very long binary number as u pointed out.<br />ITS THE SAME NUMBER !!!<br />You can put it in binary, hex, decimal or any other number system u want, its the Same Number. k?</div>
    <div class="meta">Posted on 2002-11-28 16:25:24 by Homer</div>
   </div>
   <div class="post" id="post-67986">
    <div class="subject"><a href="#post-67986">Re: negative numbers</a></div>
    <div class="body"><div class="quote"><br />how can i make  |-5| = 5  if i do not know that ^:eek: </div><br />Absolute:<br /><pre><code>mov	eax, &#91;number&#93;<br />mov	ecx, &#91;number&#93;<br />sar	ecx, 31<br />xor	eax, ecx<br />sub	eax, ecx</code></pre></div>
    <div class="meta">Posted on 2002-11-28 16:41:55 by comrade</div>
   </div>
   <div class="post" id="post-67989">
    <div class="subject"><a href="#post-67989">negative numbers</a></div>
    <div class="body">not eax<br />add eax 001b ; || or was it &gt;&gt; inc eax ?<br /><br /><br />?<br /><br />Just guessing here :) I did that once for an trackbar...</div>
    <div class="meta">Posted on 2002-11-28 16:52:22 by JimmyClif</div>
   </div>
   <div class="post" id="post-67995">
    <div class="subject"><a href="#post-67995">negative numbers</a></div>
    <div class="body">Or just:<br /><br />NEG EAX<br /><br />:)</div>
    <div class="meta">Posted on 2002-11-28 18:15:27 by S/390</div>
   </div>
   <div class="post" id="post-67998">
    <div class="subject"><a href="#post-67998">negative numbers</a></div>
    <div class="body"><pre><code><br />xor eax,eax<br />mov ecx, &#91;number&#93;<br />cmp eax,ecx<br />ja out<br />neg ecx<br />out&#58;<br /></code></pre></div>
    <div class="meta">Posted on 2002-11-28 19:01:07 by roticv</div>
   </div>
   <div class="post" id="post-68006">
    <div class="subject"><a href="#post-68006">negative numbers</a></div>
    <div class="body">Weird... somehow I thought neg didn't change the sign if the op was already negative...<br /><br />Well, it does.. Good to know :stupid:</div>
    <div class="meta">Posted on 2002-11-28 19:46:43 by JimmyClif</div>
   </div>
   <div class="post" id="post-68008">
    <div class="subject"><a href="#post-68008">negative numbers</a></div>
    <div class="body"><pre><code>&#91;size=12&#93;   mov eax, &#91;number&#93;<br />   cdq<br />   add eax, edx<br />   xor eax, edx&#91;/size&#93;</code></pre></div>
    <div class="meta">Posted on 2002-11-28 20:11:36 by iblis</div>
   </div>
   <div class="post" id="post-68011">
    <div class="subject"><a href="#post-68011">negative numbers</a></div>
    <div class="body">Yup, NEG is short for NEGate. Makes positive numbers negative, and negative numbers positive, by subtracting from 0. :)</div>
    <div class="meta">Posted on 2002-11-28 20:56:25 by S/390</div>
   </div>
   <div class="post" id="post-68015">
    <div class="subject"><a href="#post-68015">negative numbers</a></div>
    <div class="body"><div class="quote"><br /><pre><code><br />xor eax,eax<br />mov ecx, &#91;number&#93;<br />cmp eax,ecx<br />ja out<br />neg ecx<br />out&#58;<br /></code></pre> </div><br />perhaps &quot;out&quot; might not be the best label name... might confuse some assemblers!</div>
    <div class="meta">Posted on 2002-11-28 22:15:52 by jademtech</div>
   </div>
   <div class="post" id="post-68019">
    <div class="subject"><a href="#post-68019">negative numbers</a></div>
    <div class="body">My mistake, I could not think of any better label at that point of time :grin:</div>
    <div class="meta">Posted on 2002-11-28 22:40:44 by roticv</div>
   </div>
   <div class="post" id="post-68256">
    <div class="subject"><a href="#post-68256">negative numbers</a></div>
    <div class="body">Hello all.....<br /><br />    Let me clear you all about negative number storage.<br /><br />suppose you want to store -5 , then what processor do it calculate it's 2's complement and then store it or do any operation after that.<br />     By saying 2's complement I mean.<br /><br />to represent -5 we do.<br /><br />5 ===&gt;  0000 0000 0000 0000 0000 0000 0000 0101 ( this is 5 )<br />              1111 1111 1111 1111 1111 1111 1111 1010 ( after complement )<br />-5 ==&gt;   1111 1111 1111 1111 1111 1111 1111 1011 ( add 1 )<br /><br />so if you write<br />       mov eax, 11111111111111111111111111111011b<br /><br />you will this instruction at run time as in any debugger ( like SoftIce )<br /><br />       mov eax, FFFFFFFB &lt;===== that is -5<br /><br />hope this help you<br /><br />cya</div>
    <div class="meta">Posted on 2002-11-30 03:54:33 by processingspeed</div>
   </div>
   <div class="post" id="post-68263">
    <div class="subject"><a href="#post-68263">negative numbers</a></div>
    <div class="body">i've seen a snipplet to get the absolute of a number:<br /><br /><pre><code><br />mov eax,&#91;number&#93;<br />@@&#58;<br />  neg eax<br />js @b        ; if the sign flag is set after negating, negate again, cuz it WAS already a positive number<br /></code></pre></div>
    <div class="meta">Posted on 2002-11-30 04:45:06 by hartyl</div>
   </div>
   <div class="post" id="post-68271">
    <div class="subject"><a href="#post-68271">negative numbers</a></div>
    <div class="body">That snippet has hiden bug. If eax = 80000000h it goes to endless loop!!!<br />Use <strong>jl</strong> instead of <strong>js</strong>.<pre><code>abs MACRO r&#58;REQ<br />@@&#58;	neg r<br />	jl @B	<br />ENDM</code></pre><br />If you have to compare signed value you can do this:<br /><pre><code>.if SDWORD PTR eax &lt; 0<br />    ; do something<br />.endif</code></pre>or<pre><code>assume eax&#58;SDWORD<br />.if eax &lt; 0<br />    ; do something<br />.endif<br />assume eax&#58;nothing</code></pre><br />If you don't do this masm will treat value in eax as unsigned.<br />So say not -5, but 0FFFFFFFBh.<br />And 0FFFFFFFBh is &gt; 0.</div>
    <div class="meta">Posted on 2002-11-30 07:24:22 by Four-F</div>
   </div>
   <div class="post" id="post-68273">
    <div class="subject"><a href="#post-68273">Re: negative numbers</a></div>
    <div class="body"><div class="quote"><br />mov eax,-5<br /><br />why it is -5 and not 11111111111111111111111111111100 b &lt;===Very huge number. <br /><br />if i load -5 or 11111111111111111111111111111100 b how the program  know what i wont to have in eax.<br /><br />how can i make  |-5| = 5  if i do not know that ^:eek: </div><br />There is no short answer but I give you some hints to<br />understand this your problem and many others simular to<br />this.<br />(In details I'm going to discuss it in &quot;Position numeric system for lowlevel programmers&quot;)<br />Keep in mind that<br />1. Any numeric format exist not just a rules how to represent value in this<br />format but also by rules how this representation is used in math operations.<br />For example if you studied in scool how to divide or multiply numbers in<br />decimal numeric system using just pen and paper you learnt those algos<br />only for this system and can not apply them to make calculation with Romen <br />numeric system (format)<br />2. Doing math in computer you deal not only with value of operand, but<br />also in discretion of those values, in other words each operand has size<br />(particular number of digits (bits) it can have)<br />For better understanding the following info let's call it not &quot;size&quot; but<br />limits.<br />For example byte is limited by 0000 0000 to 1111 1111.<br />In any positioning numeric system base x (radix x)<br />number of digits can tell us<br />1. Number of values that can be represented in this number of digits<br />This number of values = redix in power of number of digits<br />for example in binary system radix = 2<br />number of digits in byte = 8<br />so that byte can have 2^8=256 different values (from 0 to 255)<br />2. Max value = (radix in power of number of digits)-1<br />in byte<br />2^8 - 1 = 255.<br /><br />Example: in 3 bit operand<br />number of values = 2^3=8<br />max number = 2^3-1=7<br /><br />Now important note to understand the whole thing of <br />negative number representaion in integers in computer:<br /><br />What if number of digits in result of operation exceed the upper <br />limit?<br />Let's say we add to bytes and result we write in a byte also:<br /> 1111 1111<br />  +<br /> 0000 0001<br />------------------<br />10000 0000<br /><br />Result has 9 digits but operant of result limited to 8 digits.<br />So it will have only lower 8 digits and they represent 0, not 10000 0000b<br /><br />Now we store this effect in our mind and go to next thing<br />important for our understanding:<br /><br />If we have 7 bit operand the number of values in can represent = 2^7 = 128<br />If 8 bit operand number of values = 2^8 = 256.<br /><br />Suppose we need to devide all values in 8 bit operand in two groups, each group having<br />the same number of values.<br />2^8=256/2 + 256/2 = 128 + 128 = 2^7+2^7 = 2 (2^7)<br /><br /><br />You can see that if we need to represent only one of the group<br />we need just 7 bits cause number of values in each group = 2^7<br />But we have 2 groups and we also have one extra bit. <br />It can have only 2 values 1 or 0. That means that number of<br />values of bit is equal to numbers of our groups.<br />Let us use this extra bit to destinct whether value<br />belongs to group 1 or group 2.<br />We use upper bit in 8 bit operand for this destinction.<br />So values from 0 000 0000 to 0 111 1111 belong to first group<br />And those from 1 000 0000 to 1 111 1111 belong to second group.<br />As you can see both groups freely use low 7 bits and have that for<br />the same number of values.<br /><br />Now let's try to find a way to use first group (with upper bit = 0) as<br />positive numbers and second group (with upper bit = 1) as negative.<br />(0 this way is finding its place in positive numbers though it is<br />nor positive neither negative.)<br />Then we can call this upper bit (bit[7] in byte in zero based enumaration)<br />sign bit, and if this bit is =1 then we have negative number, if = 0 - positive.<br /><br />But its not enough just to separate 256 possible values by some rules -<br />those rules must allow up to find some algos to do math operations<br />and have right results.<br /><br />Now we close to end of this introduction, and possible understanding<br />of positive\negative int values representation in computers.<br />(So to called &quot;complimentary 2 code&quot;)<br /><br />Let's up recall two things<br />1. All 4 math operation can be represented as just one - addition<br />    a+b=a+b<br />    a-b =a+(-b)<br />    a*b=a+a+a.. b times or b+b+b... a times<br />    a/b=times of a-b untill reminder &lt; b = times a+(-b) untill reminder &lt; b<br /><br />So if we can find way how find corresponence between representation of positive x in first<br />group and negative x in second group so that result of addition will produce right result<br />we can use the system.<br />2. x + (-x) =0<br /><br />Now remember example when add 1111 1111 + 0000 0001 and get in used 8 bits<br />of result 0000 0000 ? Cause upper bit was out of size of our operand?<br /><br />Then if corresponding to positive 0000 0001 we assign as -1 1111 1111 we've got<br />the right answer for x+(-x)=0 in bits that is used in 8 bits operands.<br />Let's check this &quot;-1&quot; about addition of other positive values:<br />-1+2=1<br />1111 1111 + 0000 0010 = 1 | 0000 0001 (in meaningfull low 8 bits = 0000 0001 = 1)<br />-1+5=4<br />1111 1111 + 0000 0101 = 1 | 0000 0100 (in meaningfull low 8 bits = 0000 0100 = 4)<br /><br />So what binary number would be for -2? -120? etc.<br />We added to 0000 0001 number 1111 1111 and got 1 0000 0000.<br />So for any x from positive group (0000 0000 to 0111 1111) 0??? ????<br />as -x will serve binary number so that<br />0??? ???? + 1??? ???? = 1 0000 0000<br />For example positive 5 = 0000 0101<br />negative 5 = 1 0000 0000 - 0000 0101 = 11111011b<br />and low 8 bits in 1111 1011b+0000 0101 = 1|   0000 0000 = 0<br /><br />So that we can have in byte 128 values from -1 to -128 with sign bit.<br />And 128 values from 0 to 127 with sign bit = 0<br />In byte we don't have corresponding positive value for -128 as<br />well there is no - 0 too.<br /><br />As I said before in computers there is no such things as <br />add some value to othervalue<br />there are always add two values of SPECIFIED SIZE.<br /><br />What if our operand is 16 bits or 32 or xx.. bits?<br />The rule of format is the same.<br />All values of with high bit =1 are negative and high (let us now call it &quot;sign&quot;) bit = 0 are<br />positive.<br />And corresponding values are found the same way, the only difference<br />is that in 32bits operands sum of them equal lowest 33 bit value<br />in 16 bits = lowest 17bits value<br />For example in 32 bit -1 = 11111111 11111111 11111111 11111111b<br />in 16bits  11111111 1111111b<br />How comp knows size? :)<br />It is in opcode. Opcode always specifys size of operands in operations.<br />If you write push -5 it pushes dword FFFFFFFBh <br />if you write mov al,-5 it mov FBh in al 'cause al is 8 bits operand.<br /><br />Now if we use the same operator for both sign and unsign values<br />how we ensure right result? <br />FFh can be treated as -1 sign and 255 unsign byte value?<br /><br />That's is what CF,SF and OF flags for.<br />CF = 1 if bits in result is 1 more then operand size.<br />SF = 1 if highest (sign bit) in result is 1<br />OF treat SF as another carry flag and if CARRY FROM SF to CF &lt;&gt; to SF<br />it is set to 1. <br />If you need explonations why - I'll try to write examples to understand.<br /><br />Anyway I will post materials about the issue to the board in more details<br />and you can wait untill it happens.<br /><br />There are actually 3 very important things for lowlevel programming<br />that don't have good explonation in current asm books:<br />1. Operations in positioning numeric system in details<br />2. Understanding machine code specifics<br />3. Machine code algorithm in details.<br /><br />Most questions I read on the board would have never been asked<br />if somewere it were explained in details with examples and exersizes.<br />It usually was different in old books, but instead of expanding the practice<br />in good old books contemporary books mostly look like reference of<br />recepies books and don't teach understanding of the very important basics.<br /><br />I've decided to fill the gap, but I can not be sure for now that I'll be capable<br />to carry the task.</div>
    <div class="meta">Posted on 2002-11-30 08:30:48 by The Svin</div>
   </div>
   <div class="post" id="post-68280">
    <div class="subject"><a href="#post-68280">negative numbers</a></div>
    <div class="body">Nice explanation :grin:</div>
    <div class="meta">Posted on 2002-11-30 09:58:28 by roticv</div>
   </div>
   <div class="post" id="post-68458">
    <div class="subject"><a href="#post-68458">negative numbers</a></div>
    <div class="body">mov al,-5  &lt;=== for example but i can also dont know if it is -5 or sth else<br />mov ebx,eax<br /><br />                      ;ebx !=-5<br /><br /><br />What can i do with this problem if i do not know if the al was -5 or some positive number:confused:</div>
    <div class="meta">Posted on 2002-12-01 12:34:00 by drakoforma</div>
   </div>
   <div class="post" id="post-68461">
    <div class="subject"><a href="#post-68461">negative numbers</a></div>
    <div class="body"><div class="quote"><em>Originally posted by drakoforma</em><br />mov al,-5  &lt;=== for example but i can also dont know if it is -5 or sth else<br /><strong>movsx eax, al ; conversion to 32-bit signed!</strong><br />mov ebx,eax<br /><br />; ebx =-5</div></div>
    <div class="meta">Posted on 2002-12-01 12:45:53 by bitRAKE</div>
   </div>
   <div class="post" id="post-68490">
    <div class="subject"><a href="#post-68490">negative numbers</a></div>
    <div class="body"><div class="quote"><br />mov al,-5  &lt;=== for example but i can also dont know if it is -5 or sth else<br />mov ebx,eax<br /><br />                      ;ebx !=-5<br /><br /><br />What can i do with this problem if i do not know if the al was -5 or some positive number:confused: </div><br />I'm absolutly buffled by code you posted<br />and your questions :(<br />Where this code did come from?<br />Is it from your app or what?<br />al and eax have different operand size.<br />why if you need to add ebx and eax<br />you load -5 in al not in eax?<br />Anyway from your code there is absolutly<br />no way to predict what could be in eax after all<br />mov al,-5<br />equal to <br />mov al,0FBh<br />and after that we don't know what is in eax<br />if before mov al,0FBh we have in eax ???? ????h<br />then after mov al,0FBh we have in eax ???? ??FBh<br />but what is in upper 24 bits? - God knows.<br />Read my post again - I wrote several times there<br /> in computers there is no ABSOLUTE number representation<br />each number in particular format is formated for size of operand.<br />For 8 bit operand (al) it is FBh for 32 bit format it is FFFFFFFBh.<br />Rules are explained in my post.<br />I repeat - I wrote it several times and yet you are giving examples<br />were you load -5 in 8 bit operand and waiting that 32 bit register<br />that in addition to bits in al has also more 24 bits will magically<br />to be converted to something.<br />If you are going to use value in 8 bit operand now with 32 bit operand<br />you need to convert it to 32 bit operand first.<br />I'll give you the same stupid example.<br />eax is 32 bit and have 4 bytes as digits.<br /><br />Now let I have some number in deciamal -<br />I also as you in your example - have know idea what the<br />number is and what digits it has. So this number is ????<br />I put in last digit - 5. Guess what number is now?<br />???-5.<br />If you load in AL - 5 (FBh) and add it with 8(!!!!!!!!!!!!!!!!!!!!) bit operand<br />then you don't need to know anything, it will work correctly.<br />Numbers in computers represented depending on 3 things<br />1. Value<br />2. Format<br />3. Operand size.<br />Not only integer compliment code.<br />0.1 in float also formatted differently according to OPERAND SIZE.</div>
    <div class="meta">Posted on 2002-12-01 16:47:56 by The Svin</div>
   </div>
   <div class="post" id="post-68497">
    <div class="subject"><a href="#post-68497">negative numbers</a></div>
    <div class="body">Pretend al = some 8 bit signed number<br /><br /><pre><code>&#91;size=12&#93;movsx ebx, al&#91;/size&#93;</code></pre><br /><br />Now ebx = al, except ebx is a signed 32 bit version of it.</div>
    <div class="meta">Posted on 2002-12-01 17:44:23 by iblis</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=9238&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=9238&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="9238" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=9238&amp;page=2">&gt;</a><a href="../?id=9238&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>