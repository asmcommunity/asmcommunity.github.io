<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>unreliable directive .386 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28212" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28212">unreliable directive .386</a></p>
   <div class="post" id="post-199929">
    <div class="subject"><a href="#post-199929">unreliable directive .386</a></div>
    <div class="body">Try ".386" at the top of your source and then
put a 586-dependant instruction, such as
mov al,
in the code. MASM 6.14.8444 goes ahead and
assembles and links. The PE header says 14C
(386) in the "machine-required" field. Only
question left: will Windows try to run it on
a 386! Could someone test? I don't have a
386 handy.</div>
    <div class="meta">Posted on 2001-05-29 18:50:00 by Larry Hammick</div>
   </div>
   <div class="post" id="post-199930">
    <div class="subject"><a href="#post-199930">unreliable directive .386</a></div>
    <div class="body">Larry,

You should not have any trouble with the .386 direcive unless you
start using instructions and directives for later hardware.
<pre><code>
    mov al, 
</code></pre>
does not require later hardware.

From practice I have found that you can safely assume .486 on anything
that will run 32 bit windows and this allows you to use some of
the later instructions and ALIGN 16 if you need it.

To assemble MMX instructions which requires a P200 MMX or later,
you need to use the .MMX assembler directive. .XMM allows you to
build SIMD instruction code for a PIII or later.

Regards,

hutch@pbq.com.au</div>
    <div class="meta">Posted on 2001-05-29 19:59:00 by hutch--</div>
   </div>
   <div class="post" id="post-199931">
    <div class="subject"><a href="#post-199931">unreliable directive .386</a></div>
    <div class="body"><div class="quote">
Could someone test? I don't have a
386 handy.
</div>

Thats all i have to say.</div>
    <div class="meta">Posted on 2001-05-29 22:43:00 by George</div>
   </div>
   <div class="post" id="post-199932">
    <div class="subject"><a href="#post-199932">unreliable directive .386</a></div>
    <div class="body">Hutch MMX instructions were available on a P166 as well :P
My parents still have one!

Plus SSE are/will be available on Athlon4 (Palomino). We've got a demo dual Palomino here in the office, now thats a magnificent beast! (It runs cool too).

Nothing important obviously, its just I like to correct people who are better than me, it makes me feel big and clever.

Mirno</div>
    <div class="meta">Posted on 2001-05-30 04:57:00 by Mirno</div>
   </div>
   <div class="post" id="post-199933">
    <div class="subject"><a href="#post-199933">unreliable directive .386</a></div>
    <div class="body">I feel old. Sometimes I try to write for 8086
compatibility. I still have an obj which checks
for at least 386, and politely exits if the
chip isn't there.
Of course, my intention here is just to have
another laugh at Microsoft's expense. "MS MASM
assembles and links inconsistent source, MS
Windows tries to run it, and it crashes, har har."</div>
    <div class="meta">Posted on 2001-05-31 16:19:00 by Larry Hammick</div>
   </div>
  </div>
 </body>
</html>