<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Thread Information Block - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11081" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=11081">Thread Information Block</a></p>
   <div class="post" id="post-83513">
    <div class="subject"><a href="#post-83513">Thread Information Block</a></div>
    <div class="body">hi,<br />I'm trying to find out as much as i can about this interesting thing so far i have created these fasm structures. if anyone can help me either add to or correct these that would be great. also if anyone could point me to texts which cover this topic...i have already read matt pietreks text, but he seems to leave alot of info out but it's an otherwise great read.  <br />thanks<br /><pre><code><br />struc TIB_NT<br />&#123;<br />.pExcept	   dd ?;00<br />.pvStackUserTop    dd ?;04<br />.pvStackUserBase   dd ?;08<br />.SubSystemTib	   dd ?;0C<br />.FiberData	   dd ?;10<br />virtual at .FiberData<br />	.Version   dd ?;10<br />end virtual<br />.pvArbitrary	   dd ?;14<br />.ptibSelf	   dd ?;18<br />.Unknown1	   dd ?;1C<br />.processID	   dd ?;20<br />.threadID	   dd ?;24<br />.Unknown2	   dd ?;28<br />.pvTLSArray	   dd ?;2C<br />&#125;<br /><br /><br />struc TIB_9X<br />&#123;<br />.pExcept	  dd ?;00<br />.pvStackUserTop   dd ?;04<br />.pvStackUserBase  dd ?;08<br />.pvTDB		  dw ?;0C<br />.pvThunkSS	  dw ?;10<br />.pvArbitrary	  dd ?;14<br />.ptibSelf	  dd ?;18<br />.TIBFlags	  dw ?;1C<br />.Win16MutexCount  dw ?;20<br />.DebugContext	  dd ?;24<br />.pCurrentPriority dd ?;28<br />.pvQueue	  dd ?;2C<br />.pvTLSArray	  dd ?;30<br />.pProcess	  dd ?;34<br />&#125;<br /></code></pre></div>
    <div class="meta">Posted on 2003-02-24 13:43:47 by keyoke</div>
   </div>
   <div class="post" id="post-83571">
    <div class="subject"><a href="#post-83571">Thread Information Block</a></div>
    <div class="body">Hi<br /><br />I've got this one article on the TIB/TEB structure, the link used to be<br /><a target="_blank" href="http://wiki.forth.org.ru/ThreadEnvironmentBlock">http://wiki.forth.org.ru/ThreadEnvironmentBlock</a><br />but I doubt it works, so attached.<br /><br />Seems I also saved a thread from this board on the subject about a year ago (April 14th, 2002), search under General &gt; Main &gt; two questions post.  Author Arthur_Chen<br /><br />Kayaker</div>
    <div class="meta">Posted on 2003-02-24 21:21:19 by Kayaker</div>
   </div>
   <div class="post" id="post-83608">
    <div class="subject"><a href="#post-83608">Thread Information Block</a></div>
    <div class="body">There is no TIB_NT structure. There is NT_TIB structure which is the first part of TEB structure.<br /><br />TEB - Thread Environment Block<br />NT_TIB - Thread Information Block<br /><br />This definition is from masm32's windows.inc:<br /><pre><code>NT_TIB STRUCT<br />    ExceptionList dd    ?<br />    StackBase dd        ?<br />    StackLimit dd       ?<br />    SubSystemTib dd     ?<br />    union<br />        FiberData dd    ?<br />        Version dd      ?<br />    ends<br />    ArbitraryUserPointer dd ?<br />    Self dd ?<br />NT_TIB ENDS</code></pre><br />This definition is fron W2K DDK:<br /><pre><code>//<br />// Thread Environment Block &#40;and portable part of Thread Information Block&#41;<br />//<br /><br />//<br />//  NT_TIB - Thread Information Block - Portable part.<br />//<br />//      This is the subsystem portable part of the Thread Information Block.<br />//      It appears as the first part of the TEB for all threads which have<br />//      a user mode component.<br />//<br />//<br /><br />// begin_winnt<br /><br />typedef struct _NT_TIB &#123;<br />    struct _EXCEPTION_REGISTRATION_RECORD *ExceptionList;<br />    PVOID StackBase;<br />    PVOID StackLimit;<br />    PVOID SubSystemTib;<br />    union &#123;<br />        PVOID FiberData;<br />        ULONG Version;<br />    &#125;;<br />    PVOID ArbitraryUserPointer;<br />    struct _NT_TIB *Self;<br />&#125; NT_TIB;<br />typedef NT_TIB *PNT_TIB;</code></pre><br />This definition shows Kernel Debugger:<br /><pre><code>kd&gt; !kdex2x86.strct NT_TIB<br />Loaded kdex2x86 extension DLL<br />struct   _NT_TIB &#40;sizeof=28&#41;<br />+00 struct   _EXCEPTION_REGISTRATION_RECORD *ExceptionList<br />+04 void     *StackBase<br />+08 void     *StackLimit<br />+0c void     *SubSystemTib<br />+10 void     *FiberData<br />+10 uint32   Version<br />+14 void     *ArbitraryUserPointer<br />+18 struct   _NT_TIB *Self</code></pre><br />The TEB (Thread Environment Block) is completely undocumented.<br />Even in *.pdb from W2K i couldn't find anything.<br /><br />The definition below i've fetched from ntoskrnl.pdb file from XP DDK.<br /><br /><pre><code>struct _TEB {<br />  /*&lt;thisrel this+0x0&gt;*/ /*|0x1c|*/ struct _NT_TIB NtTib;<br />  /*&lt;thisrel this+0x1c&gt;*/ /*|0x4|*/ void* EnvironmentPointer;<br />  /*&lt;thisrel this+0x20&gt;*/ /*|0x8|*/ struct _CLIENT_ID ClientId;<br />  /*&lt;thisrel this+0x28&gt;*/ /*|0x4|*/ void* ActiveRpcHandle;<br />  /*&lt;thisrel this+0x2c&gt;*/ /*|0x4|*/ void* ThreadLocalStoragePointer;<br />  /*&lt;thisrel this+0x30&gt;*/ /*|0x4|*/ struct _PEB* ProcessEnvironmentBlock;<br />  /*&lt;thisrel this+0x34&gt;*/ /*|0x4|*/ unsigned long LastErrorValue;<br />  /*&lt;thisrel this+0x38&gt;*/ /*|0x4|*/ unsigned long CountOfOwnedCriticalSections;<br />  /*&lt;thisrel this+0x3c&gt;*/ /*|0x4|*/ void* CsrClientThread;<br />  /*&lt;thisrel this+0x40&gt;*/ /*|0x4|*/ void* Win32ThreadInfo;<br />  /*&lt;thisrel this+0x44&gt;*/ /*|0x68|*/ unsigned long User32Reserved[26];<br />  /*&lt;thisrel this+0xac&gt;*/ /*|0x14|*/ unsigned long UserReserved[5];<br />  /*&lt;thisrel this+0xc0&gt;*/ /*|0x4|*/ void* WOW32Reserved;<br />  /*&lt;thisrel this+0xc4&gt;*/ /*|0x4|*/ unsigned long CurrentLocale;<br />  /*&lt;thisrel this+0xc8&gt;*/ /*|0x4|*/ unsigned long FpSoftwareStatusRegister;<br />  /*&lt;thisrel this+0xcc&gt;*/ /*|0xd8|*/ void* SystemReserved1[54];<br />  /*&lt;thisrel this+0x1a4&gt;*/ /*|0x4|*/ long ExceptionCode;<br />  /*&lt;thisrel this+0x1a8&gt;*/ /*|0x14|*/ struct _ACTIVATION_CONTEXT_STACK ActivationContextStack;<br />  /*&lt;thisrel this+0x1bc&gt;*/ /*|0x18|*/ unsigned char SpareBytes1[24];<br />  /*&lt;thisrel this+0x1d4&gt;*/ /*|0x4e0|*/ struct _GDI_TEB_BATCH GdiTebBatch;<br />  /*&lt;thisrel this+0x6b4&gt;*/ /*|0x8|*/ struct _CLIENT_ID RealClientId;<br />  /*&lt;thisrel this+0x6bc&gt;*/ /*|0x4|*/ void* GdiCachedProcessHandle;<br />  /*&lt;thisrel this+0x6c0&gt;*/ /*|0x4|*/ unsigned long GdiClientPID;<br />  /*&lt;thisrel this+0x6c4&gt;*/ /*|0x4|*/ unsigned long GdiClientTID;<br />  /*&lt;thisrel this+0x6c8&gt;*/ /*|0x4|*/ void* GdiThreadLocalInfo;<br />  /*&lt;thisrel this+0x6cc&gt;*/ /*|0xf8|*/ unsigned long Win32ClientInfo[62];<br />  /*&lt;thisrel this+0x7c4&gt;*/ /*|0x3a4|*/ void* glDispatchTable[233];<br />  /*&lt;thisrel this+0xb68&gt;*/ /*|0x74|*/ unsigned long glReserved1[29];<br />  /*&lt;thisrel this+0xbdc&gt;*/ /*|0x4|*/ void* glReserved2;<br />  /*&lt;thisrel this+0xbe0&gt;*/ /*|0x4|*/ void* glSectionInfo;<br />  /*&lt;thisrel this+0xbe4&gt;*/ /*|0x4|*/ void* glSection;<br />  /*&lt;thisrel this+0xbe8&gt;*/ /*|0x4|*/ void* glTable;<br />  /*&lt;thisrel this+0xbec&gt;*/ /*|0x4|*/ void* glCurrentRC;<br />  /*&lt;thisrel this+0xbf0&gt;*/ /*|0x4|*/ void* glContext;<br />  /*&lt;thisrel this+0xbf4&gt;*/ /*|0x4|*/ unsigned long LastStatusValue;<br />  /*&lt;thisrel this+0xbf8&gt;*/ /*|0x8|*/ struct _UNICODE_STRING StaticUnicodeString;<br />  /*&lt;thisrel this+0xc00&gt;*/ /*|0x20a|*/ unsigned short StaticUnicodeBuffer[261];<br />  /*&lt;thisrel this+0xe0c&gt;*/ /*|0x4|*/ void* DeallocationStack;<br />  /*&lt;thisrel this+0xe10&gt;*/ /*|0x100|*/ void* TlsSlots[64];<br />  /*&lt;thisrel this+0xf10&gt;*/ /*|0x8|*/ struct _LIST_ENTRY TlsLinks;<br />  /*&lt;thisrel this+0xf18&gt;*/ /*|0x4|*/ void* Vdm;<br />  /*&lt;thisrel this+0xf1c&gt;*/ /*|0x4|*/ void* ReservedForNtRpc;<br />  /*&lt;thisrel this+0xf20&gt;*/ /*|0x8|*/ void* DbgSsReserved[2];<br />  /*&lt;thisrel this+0xf28&gt;*/ /*|0x4|*/ unsigned long HardErrorsAreDisabled;<br />  /*&lt;thisrel this+0xf2c&gt;*/ /*|0x40|*/ void* Instrumentation[16];<br />  /*&lt;thisrel this+0xf6c&gt;*/ /*|0x4|*/ void* WinSockData;<br />  /*&lt;thisrel this+0xf70&gt;*/ /*|0x4|*/ unsigned long GdiBatchCount;<br />  /*&lt;thisrel this+0xf74&gt;*/ /*|0x1|*/ unsigned char InDbgPrint;<br />  /*&lt;thisrel this+0xf75&gt;*/ /*|0x1|*/ unsigned char FreeStackOnTermination;<br />  /*&lt;thisrel this+0xf76&gt;*/ /*|0x1|*/ unsigned char HasFiberData;<br />  /*&lt;thisrel this+0xf77&gt;*/ /*|0x1|*/ unsigned char IdealProcessor;<br />  /*&lt;thisrel this+0xf78&gt;*/ /*|0x4|*/ unsigned long Spare3;<br />  /*&lt;thisrel this+0xf7c&gt;*/ /*|0x4|*/ void* ReservedForPerf;<br />  /*&lt;thisrel this+0xf80&gt;*/ /*|0x4|*/ void* ReservedForOle;<br />  /*&lt;thisrel this+0xf84&gt;*/ /*|0x4|*/ unsigned long WaitingOnLoaderLock;<br />  /*&lt;thisrel this+0xf88&gt;*/ /*|0xc|*/ struct _Wx86ThreadState Wx86Thread;<br />  /*&lt;thisrel this+0xf94&gt;*/ /*|0x4|*/ void** TlsExpansionSlots;<br />  /*&lt;thisrel this+0xf98&gt;*/ /*|0x4|*/ unsigned long ImpersonationLocale;<br />  /*&lt;thisrel this+0xf9c&gt;*/ /*|0x4|*/ unsigned long IsImpersonating;<br />  /*&lt;thisrel this+0xfa0&gt;*/ /*|0x4|*/ void* NlsCache;<br />  /*&lt;thisrel this+0xfa4&gt;*/ /*|0x4|*/ void* pShimData;<br />  /*&lt;thisrel this+0xfa8&gt;*/ /*|0x4|*/ unsigned long HeapVirtualAffinity;<br />  /*&lt;thisrel this+0xfac&gt;*/ /*|0x4|*/ void* CurrentTransactionHandle;<br />  /*&lt;thisrel this+0xfb0&gt;*/ /*|0x4|*/ struct _TEB_ACTIVE_FRAME* ActiveFrame;<br />};<br />// &lt;size 0xfb4&gt;<pre><code></div>
    <div class="meta">Posted on 2003-02-25 05:13:36 by Four-F</div>
   </div>
   <div class="post" id="post-83611">
    <div class="subject"><a href="#post-83611">thanks</a></div>
    <div class="body">shot for the help :)<br />this is the struc i have now after reading these...but the virtual's mite be wrong still but this is fasm specific so ill ask there<br /><pre><code><br />struc _TIB<br />&#123;<br />        .pExcept           dd ? ;00<br />        .pvStackUserTop    dd ? ;04<br />        .pvStackUserBase   dd ? ;08<br />        virtual at $    ;win95<br />                        .pvTDB            dw ?  ;0C<br />                        .pvThunkSS        dw ?  ;0E<br />                        .unknown          dd ?  ;10<br />        end virtual<br />        virtual at $    ;winnt<br />                        .SubSystemTib      dd ? ;0C<br />                        .FiberData         dd ? ;10<br />        end virtual<br />        .pvArbitrary       dd ?;14<br />        .ptibSelf          dd ?;18<br />        virtual at $    ;win95<br />                        .TIBFlags         dw ? ;1C<br />                        .Win16MutexCount  dw ? ;1E<br />                        .DebugContext     dd ? ;20<br />                        .pCurrentPriority dd ? ;24<br />                        .pvQueue          dd ? ;28<br />        end virtual<br />        virtual at $    ;winnt<br />                        .unknown1          dd ? ;1C<br />                        .processID         dd ? ;20<br />                        .threadID          dd ? ;24<br />                        .unknown2          dd ? ;28<br />        end virtual<br />        .pvTLSArray        dd ?;2C<br />        virtual at $<br />                .pProcess       dd ? ;30<br />        end virtual<br />&#125;      <br /><br /></code></pre></div>
    <div class="meta">Posted on 2003-02-25 05:43:41 by keyoke</div>
   </div>
   <div class="post" id="post-83648">
    <div class="subject"><a href="#post-83648">Thread Information Block</a></div>
    <div class="body">Never used fasm. Sorry. You'd better ask in fasm-specific forum on this board about virtual.</div>
    <div class="meta">Posted on 2003-02-25 08:28:26 by Four-F</div>
   </div>
   <div class="post" id="post-83688">
    <div class="subject"><a href="#post-83688">Thread Information Block</a></div>
    <div class="body">if any1 is interested this is my version of tib/teb structure it's fasm specific tho<br />thnx for the help guys :)<br /><pre><code><br />struc _TIB<br />&#123;<br />.pExcept	               dd ? ;00<br />.pvStackUserTop     dd ? ;04<br />.pvStackUserBase   dd ? ;08<br />virtual at $	;win95<br />.pvTDB		  dw ?	;0C<br />.pvThunkSS	  dw ?	;0E<br />.unknown	                  dd ?	;10<br />end virtual<br />virtual at $	;winnt<br />.SubSystemTib	   dd ? ;0C<br />.FiberData	   dd ? ;10<br />virtual at .FiberData<br />.Version        dd ? ;10<br />end virtual<br />end virtual<br />rd 2;reserve 2 double words<br />.pvArbitrary	   dd ?;14<br />.ptibSelf	                   dd ?;18<br />virtual at $	;win95<br />.TIBFlags	  dw ? ;1C<br />.Win16MutexCount  dw ? ;1E<br />.DebugContext	  dd ? ;20<br />.pCurrentPriority dd ? ;24<br />.pvQueue	  dd ? ;28<br />end virtual<br />virtual at $	;winnt<br />.unknown1	   dd ? ;1C<br />.processID	   dd ? ;20<br />.threadID	   dd ? ;24<br />.unknown2	   dd ? ;28<br />end virtual<br />rd 4 ;reserve 4 double words<br />.pvTLSArray	   dd ?;2C<br />virtual at $<br />.pProcess	dd ? ;30<br />end virtual<br />&#125;<br /></code></pre></div>
    <div class="meta">Posted on 2003-02-25 13:21:32 by keyoke</div>
   </div>
   <div class="post" id="post-83816">
    <div class="subject"><a href="#post-83816">Thread Information Block</a></div>
    <div class="body">Can't see any reason to change original field's names.</div>
    <div class="meta">Posted on 2003-02-26 05:14:21 by Four-F</div>
   </div>
   <div class="post" id="post-83833">
    <div class="subject"><a href="#post-83833">Thread Information Block</a></div>
    <div class="body">havent changed any field names i think used same naming convention as in matt pietrek's paper of teb</div>
    <div class="meta">Posted on 2003-02-26 06:42:11 by keyoke</div>
   </div>
   <div class="post" id="post-83838">
    <div class="subject"><a href="#post-83838">Thread Information Block</a></div>
    <div class="body">The only reason why Matt has named it so is the absence of oficial info.<br />This stuff is a bit out of date. It's better, IMHO, to follow Microsoft's names.</div>
    <div class="meta">Posted on 2003-02-26 06:59:24 by Four-F</div>
   </div>
   <div class="post" id="post-84098">
    <div class="subject"><a href="#post-84098">Thread Information Block</a></div>
    <div class="body">ok i will change em to ms way of doing it</div>
    <div class="meta">Posted on 2003-02-28 03:52:58 by keyoke</div>
   </div>
   <div class="post" id="post-84099">
    <div class="subject"><a href="#post-84099">Thread Information Block</a></div>
    <div class="body">ok here we go but i'm having trouble with the _EXCEPTION_REGISTRATION_RECORD structure .Exceptionlist is a pointer to this structure but i cant seem to get it rite in my code :(<br />is .Next pointing to a structure of itsel how would i implement this corretly and PEXCEPTION_ROUTINE wat is its value i looked the masm includes and found it to be just a dword is this correct?<br /><br /><pre><code><br />struct _EXCEPTION_REGISTRATION_RECORD<br />&#123; ;08<br />  .Next         _EXCEPTION_REGISTRATION_RECORD;  ;00<br />  .Handler      PEXCEPTION_ROUTINE;    ;04<br />&#125;   <br /></code></pre><br /><br />here is the tib struc with the different names but now it should have have more change.<br /><pre><code><br />struc _TIB<br />&#123;<br />        .ExceptionList   dd EXCEPTION_REGISTRATION_RECORD ;00<br />        .StackBase       dd ? ;04<br />        .StackLimit        dd ? ;08<br />        virtual at $    ;win95<br />                        .pvTDB            dw ?  ;0C<br />                        .pvThunkSS        dw ?  ;0E<br />                        .unknown          dd ?  ;10<br />        end virtual<br />        virtual at $    ;winnt<br />                        .SubSystemTib      dd ? ;0C<br />                        .FiberData         dd ? ;10<br />                        virtual at .FiberData<br />                                   .Version dd ? ;10<br />                        end virtual<br />        end virtual<br />                           rd 2<br />        .ArbitraryUserPointer dd ?;14<br />        .Self                 dd ?;18<br />        virtual at $    ;win95<br />                        .TIBFlags         dw ? ;1C<br />                        .Win16MutexCount  dw ? ;1E<br />                        .DebugContext     dd ? ;20<br />                        .pCurrentPriority dd ? ;24<br />                        .pvQueue          dd ? ;28<br />        end virtual<br />        virtual at $    ;winnt<br />                        .unknown1          dd ? ;1C<br />                        .processID         dd ? ;20<br />                        .threadID          dd ? ;24<br />                        .unknown2          dd ? ;28<br />        end virtual<br />                           rd 4<br />        .pvTLSArray        dd ?;2C<br />        virtual at $<br />                .pProcess       dd ? ;30<br />        end virtual<br />&#125;                            <br /></code></pre></div>
    <div class="meta">Posted on 2003-02-28 04:04:45 by keyoke</div>
   </div>
   <div class="post" id="post-84906">
    <div class="subject"><a href="#post-84906">Not even dword</a></div>
    <div class="body">You need to read Iczelion's and Hutch's tuts 28 thru 30 very carefully and there is another one in between, not sure of name but there are 4 debug tuts.</div>
    <div class="meta">Posted on 2003-03-04 03:33:25 by mrgone</div>
   </div>
   <div class="post" id="post-84912">
    <div class="subject"><a href="#post-84912">Thread Information Block</a></div>
    <div class="body">thanks mrgone ill have a look at them when get back</div>
    <div class="meta">Posted on 2003-03-04 04:32:57 by keyoke</div>
   </div>
   <div class="post" id="post-132844">
    <div class="subject"><a href="#post-132844">Thread Information Block</a></div>
    <div class="body">I know this is a old thread, but i've got some info who could be useful to someone searching. I've been poking around trying to figure out how Structured Exception Handling works and thus found this info;<br /><br /><pre><code><br />//==================================================<br />// File&#58; TIB.H<br />// Author&#58; Matt Pietrek<br />// From&#58; Microsoft Systems Journal &quot;Under the Hood&quot;, May 1996<br />//==================================================<br />#pragma pack&#40;1&#41;<br /><br />typedef struct _EXCEPTION_REGISTRATION_RECORD<br />&#123;<br />    struct _EXCEPTION_REGISTRATION_RECORD * pNext;<br />    FARPROC                                 pfnHandler;<br />&#125; EXCEPTION_REGISTRATION_RECORD, *PEXCEPTION_REGISTRATION_RECORD;<br /><br />typedef struct _TIB<br />&#123;<br />PEXCEPTION_REGISTRATION_RECORD pvExcept; // 00h Head of exception record list<br />PVOID   pvStackUserTop;     // 04h Top of user stack<br />PVOID   pvStackUserBase;    // 08h Base of user stack<br /><br />union                       // 0Ch &#40;NT/Win95 differences&#41;<br />&#123;<br />    struct  // Win95 fields<br />    &#123;<br />        WORD    pvTDB;         // 0Ch TDB<br />        WORD    pvThunkSS;     // 0Eh SS selector used for thunking to 16 bits<br />        DWORD   unknown1;      // 10h<br />    &#125; WIN95;<br /><br />    struct  // WinNT fields<br />    &#123;<br />        PVOID SubSystemTib;     // 0Ch<br />        ULONG FiberData;        // 10h<br />    &#125; WINNT;<br />&#125; TIB_UNION1;<br /><br />PVOID   pvArbitrary;        // 14h Available for application use<br />struct _tib *ptibSelf;      // 18h Linear address of TIB structure<br /><br />union                       // 1Ch &#40;NT/Win95 differences&#41;<br />&#123;<br />    struct  // Win95 fields<br />    &#123;<br />        WORD    TIBFlags;           // 1Ch<br />        WORD    Win16MutexCount;    // 1Eh<br />        DWORD   DebugContext;       // 20h<br />        DWORD   pCurrentPriority;   // 24h<br />        DWORD   pvQueue;            // 28h Message Queue selector<br />    &#125; WIN95;<br /><br />    struct  // WinNT fields<br />    &#123;<br />        DWORD unknown1;             // 1Ch<br />        DWORD processID;            // 20h<br />        DWORD threadID;             // 24h<br />        DWORD unknown2;             // 28h<br />    &#125; WINNT;<br />&#125; TIB_UNION2;<br /><br />PVOID*  pvTLSArray;         // 2Ch Thread Local Storage array<br /><br />union                       // 30h &#40;NT/Win95 differences&#41;<br />&#123;<br />    struct  // Win95 fields<br />    &#123;<br />        PVOID*  pProcess;     // 30h Pointer to owning process database<br />    &#125; WIN95;<br />&#125; TIB_UNION3;<br />    <br />&#125; TIB, *PTIB;<br />#pragma pack&#40;&#41;<br /></code></pre><br /><br />There's some more info on the fields in the article here; <a target="_blank" href="http://www.microsoft.com/msj/archive/S2CE.aspx">Under the Hood May 1996</a></div>
    <div class="meta">Posted on 2004-02-07 15:19:19 by Cuby</div>
   </div>
  </div>
 </body>
</html>