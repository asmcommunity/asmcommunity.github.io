<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How do you like your braces? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19688" />
  <link rel="prev" href="../?id=19688&amp;page=1" />  <link rel="next" href="../?id=19688&amp;page=3" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=19688">How do you like your braces?</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=19688&amp;page=1" style="">&laquo;</a><a href="../?id=19688&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="19688" /><input type="number" name="page" min="1" max="3" step="1" value="2" onchange="this.form.submit();" /><a href="../?id=19688&amp;page=3">&gt;</a><a href="../?id=19688&amp;page=3">&raquo;</a></form>   <div class="post" id="post-151445">
    <div class="subject"><a href="#post-151445">How do you like your braces?</a></div>
    <div class="body"><div class="quote">By the way, void main is just plain wrong. Don't use it.</div><br /><br />What's wrong with void main?<br /><br />Here is the assembly output of my code, plus I have the opportunity of using my own C run-time startup module eliminating all those regular initialization routines.<br /><pre><code><br />_TEXT	SEGMENT<br />_main	PROC NEAR<br /><br />; 7    &#58;   begin<br /><br />	push	esi<br /><br />; 8    &#58;     int i;<br />; 9    &#58;     for&#40;i=0;i&lt;5;++i&#41;<br /><br />	mov	esi, 5<br />$L772&#58;<br /><br />; 10   &#58;       begin<br />; 11   &#58;         printf&#40;&quot;begin&amp;end instead of braces &#58;&#41;\n&quot;&#41;;<br /><br />	push	OFFSET FLAT&#58;$SG775<br />	call	_printf<br />	add	esp, 4<br />	dec	esi<br />	jne	SHORT $L772<br />	pop	esi<br /><br />; 12   &#58;       end<br />; 13   &#58;   end<br /><br />	ret	0<br />_main	ENDP<br />_TEXT	ENDS<br /></code></pre></div>
    <div class="meta">Posted on 2004-10-18 14:57:57 by Vortex</div>
   </div>
   <div class="post" id="post-151446">
    <div class="subject"><a href="#post-151446">How do you like your braces?</a></div>
    <div class="body"><div class="quote">What's wrong with void main?</div><br />void main is illegal both in C and in C++. The fact that your compiler accepts the code is purely incidental. In C void main means &quot;undefined behaviour&quot;. In C++ void main means an &quot;ill-formed program&quot;. main is always supposed to return an int.<br /><br />Why is that?<br />Because when the program is run, main can be thought as being called like this:<br /><br /><pre><code>exit&#40;main&#40;&#41;&#41;;</code></pre><br />(Of course, arguments might also be passed.)</div>
    <div class="meta">Posted on 2004-10-18 15:13:45 by death</div>
   </div>
   <div class="post" id="post-151448">
    <div class="subject"><a href="#post-151448">How do you like your braces?</a></div>
    <div class="body">Thanks for the technical info.<br /><br />Still, it's possible to kick away &quot;exit(main());&quot; ( simplified C run-time startup module )</div>
    <div class="meta">Posted on 2004-10-18 15:25:11 by Vortex</div>
   </div>
   <div class="post" id="post-151449">
    <div class="subject"><a href="#post-151449">How do you like your braces?</a></div>
    <div class="body"><div class="quote">Still, it's possible to kick away &quot;exit(main());&quot; ( simplified C run-time startup module )</div><br />Not very portable is it? When you play with a high level language, I am of the opinion that you should play by the language rules, not break them.<br /><br />This was only a reason for your 'why'. It still doesn't mean void main is legal.<br /><br />Why would you want to use void main anyway?</div>
    <div class="meta">Posted on 2004-10-18 15:31:48 by death</div>
   </div>
   <div class="post" id="post-151451">
    <div class="subject"><a href="#post-151451">How do you like your braces?</a></div>
    <div class="body">Using your own C run-time startup module has nothing to do with portability if you are running on Windows platform:<br /><br />http://www.asmcommunity.net/board/viewtopic.php?t=19315<br /><br />You can use ExitProcess instead of exit, this technique is also used by Pelle's C compiler.<br /><br />I have no any problem with the variants of int main :)</div>
    <div class="meta">Posted on 2004-10-18 15:42:47 by Vortex</div>
   </div>
   <div class="post" id="post-151452">
    <div class="subject"><a href="#post-151452">How do you like your braces?</a></div>
    <div class="body"><div class="quote">Using your own C run-time startup module has nothing to do with portability if you are running on Windows platform</div><br /><br />That is incorrect. Since the compiler generates your program's code, it might need specialized startup initialization. It doesn't matter if you code for Windows platform or not.<br /><br />The C and C++ languages don't even allow you (the compiler user) to call main. When you're writing your own startup code, you're changing role to the compiler library writer. And this isn't portable when you change compilers/compiler versions.</div>
    <div class="meta">Posted on 2004-10-18 15:48:08 by death</div>
   </div>
   <div class="post" id="post-151453">
    <div class="subject"><a href="#post-151453">How do you like your braces?</a></div>
    <div class="body">:-D DAMN! When I read the title, I thought you were referring to the braces used to fix teeth alignment. I said to myself &quot;WTF is kind(a) kind(b) choices?&quot;<br /><br />I didn't read the body content.<br /><br /> :-D  :-D  :-D LOL!<br /><br />When I code in Java I apply  with lowercase letters on the first letter of the function name. Every other language I code in uses  with uppercase letters.<br /><br />I prefer B but I like A also. can I vote twice? LOL</div>
    <div class="meta">Posted on 2004-10-18 15:48:51 by arkane</div>
   </div>
   <div class="post" id="post-151454">
    <div class="subject"><a href="#post-151454">How do you like your braces?</a></div>
    <div class="body">Death,<br /><br />If you check my examples, you will see that they run with full success.<br />I am not the first person who coded special C run-time startup modules. You can check Jeremy Ibsen's startup module at:<br /><br /><u>WCRT v1.12 - Win32API CRT </u><br /><br />http://www.ibsensoftware.com/download.html<br /><br />Notice that my own module is coded in full asm.<br /><br />I don't pretend that my module will run with every C code but still it does the job to create tiny C executables.</div>
    <div class="meta">Posted on 2004-10-18 15:57:27 by Vortex</div>
   </div>
   <div class="post" id="post-151455">
    <div class="subject"><a href="#post-151455">How do you like your braces?</a></div>
    <div class="body">I assume you mean J?rgen Ibsen (Jibz) :)<br />In any case, I did not say your code is useless. I just said it's not as portable as you might think. Jibz writes his startup code for Visual C++. Your code might work with several compilers, yet, it won't work with every Windows compiler (or every C program, if you say).</div>
    <div class="meta">Posted on 2004-10-18 16:07:20 by death</div>
   </div>
   <div class="post" id="post-151456">
    <div class="subject"><a href="#post-151456">How do you like your braces?</a></div>
    <div class="body">My apologies, J?rgen Ibsen<br /><br />I am not worried with portability as my code works with the most popular compilers. As my own module doesn't satisfy always the portability rule,the portability doesn't mean everything like tiny C executables. :)</div>
    <div class="meta">Posted on 2004-10-18 16:11:49 by Vortex</div>
   </div>
   <div class="post" id="post-151457">
    <div class="subject"><a href="#post-151457">How do you like your braces?</a></div>
    <div class="body">Correction to self:<br /><div class="quote">The C and C++ languages don't even allow you (the compiler user) to call main.</div><br />Calling main in C is allowed.</div>
    <div class="meta">Posted on 2004-10-18 16:25:46 by death</div>
   </div>
   <div class="post" id="post-151458">
    <div class="subject"><a href="#post-151458">How do you like your braces?</a></div>
    <div class="body">void main() is by no means illegal. It is c-call, and of ALL cases I know, you need the return value JUST once - when making makefiles/batch files where execution can be cancelled due to error. I always use void main() coz hell I don't want to define the args. And when I want to return a value - I ExitProcess.  <br />btw in my ARM-elf postlinker, it's  <br />long main (long msg,long wParam,long lParam);   <br />lol  Only here I use arguments and return for main()    :-D <br /><br />I prefer the <strong>a)</strong>braces , but if the current function has more than 10 parameters, I use b. I hate wasting lines of code, because this makes harder to scroll the source.  And often put spaces like in &quot;x += 1;&quot;</div>
    <div class="meta">Posted on 2004-10-18 17:31:13 by Ultrano</div>
   </div>
   <div class="post" id="post-151460">
    <div class="subject"><a href="#post-151460">How do you like your braces?</a></div>
    <div class="body"><div class="quote">void main() is by no means illegal</div><br />Can you show me references to back up your claim?<br /><br /><div class="quote">I prefer the <strong>a)</strong>braces , but if the current function has more than 10 parameters, I use b.</div><br />If a function has more than 10 parameters, something is seriously wrong.</div>
    <div class="meta">Posted on 2004-10-18 17:41:41 by death</div>
   </div>
   <div class="post" id="post-151461">
    <div class="subject"><a href="#post-151461">How do you like your braces?</a></div>
    <div class="body">you're wrong and wrong<br />lol cmn dude what's with the atitude?<br />Ok, I spent a few seconds to show you<br />void main{<br />printf(&quot;yo, see?&quot;);<br />}<br /><br />now, disassembled it, the startup code does some initialization, then :<br />call 00401000 ; call main<br />add esp,0Ch ;  see ???<br /><br />and main() is:<br />push addr str1<br />call printf<br />pop ecx<br />ret<br /><br /><br />after that it preserves eax on stack, does<br />GetCurrentProcess, TerminateProcess with the preserved eax. Couldn't you do it on your own instead of jumping immediately ??????<br /><br />In a function with 10 parameters things are not wrong. This is ARM code I'm talking about, and I know my job pretty well :)<br />please next time count to 10 and try to understand others before you reply</div>
    <div class="meta">Posted on 2004-10-18 18:00:52 by Ultrano</div>
   </div>
   <div class="post" id="post-151462">
    <div class="subject"><a href="#post-151462">How do you like your braces?</a></div>
    <div class="body">You might want to read my first reply to Vortex. This is my last posting about this issue here.</div>
    <div class="meta">Posted on 2004-10-18 18:07:05 by death</div>
   </div>
   <div class="post" id="post-151464">
    <div class="subject"><a href="#post-151464">How do you like your braces?</a></div>
    <div class="body">yes I read that and I explained that actually you never need that value. Ok, it may be incidental, but if it weren't then we wouldn't be using void main(void). You are free to code whatever and however you want, so I chose the simpler declaration, that doesn't turn me down on coding the app even on the first line of code. And when I'm teaching some friends C coding, I don't want to tell them legends from the start. They'd better concentrate on the stuff that matters, like I do. :)<br />And - one'd better not jump to conclusions if one doesn't know the guts of the matter ;) . I used to do that a lot, but Palm coding is strict and limited, and thus taught me well.<br /><br />Ah, back on the topic - no matter how the braces are put, today at uni I learnt I need them lol. I used to hate them but HLL without it is damn boring and hard to read - we study algorithms first in pseudocode  :o and with my bad handwriting it's hard to tell lines and rows apart lol. Damn soccer for injuring my hand lol</div>
    <div class="meta">Posted on 2004-10-18 18:37:32 by Ultrano</div>
   </div>
   <div class="post" id="post-151485">
    <div class="subject"><a href="#post-151485">How do you like your braces?</a></div>
    <div class="body">If you're going to  use a non-standard entrypoint (ie, void return type in this example), simply don't call it main().</div>
    <div class="meta">Posted on 2004-10-19 02:47:51 by f0dder</div>
   </div>
   <div class="post" id="post-151486">
    <div class="subject"><a href="#post-151486">How do you like your braces?</a></div>
    <div class="body">I do not use neither <strong>kind (a)</strong> nor <strong>kind (b)</strong> in my code because none of assemblers known to me uses curly braces as block delimitator. In fact, a line starting with the closing brace or right parenthesis hurts my education.<br /><br />Though assembler programs tend to be slim and long, indentation helps to visualize vertical block structure of source. Human eye is able to quickly scan down the screen keeping the same distance from left edge. So I'm used to keep begin/end orders such as   PROC/ENDP, STRUC/ENDS, IF/ELSE/ENDIF on the same indent level. It is easier then to skip the entire block  on second pass of reading.<br />Similar indentation is useful in other constructs which need to maintain block structure - PUSH/POP, CLI/STI etc.<br /><br />So if I weren't asm programmer on asmcommunity board, I would vote <strong>kind (b)</strong>.</div>
    <div class="meta">Posted on 2004-10-19 05:10:23 by vit$oft</div>
   </div>
   <div class="post" id="post-151509">
    <div class="subject"><a href="#post-151509">How do you like your braces?</a></div>
    <div class="body"><div class="quote">If a function has more than 10 parameters, something is seriously wrong.</div><br /><br />Maybe you would like to look at this:<br /><pre><code><br />Oleaut32.lib<br /><br />_OleCreatePropertyFrame@44<br /><br />Ole32.lib<br /><br />_OleCreateFromFileEx@52<br />_OleCreateLinkFromDataEx@48<br />_OleCreateLinkToFileEx@48<br />_OleCreateEx@48<br /></code></pre><br /><br />All these functions have more than 10 parameters.</div>
    <div class="meta">Posted on 2004-10-19 12:56:26 by Vortex</div>
   </div>
   <div class="post" id="post-151513">
    <div class="subject"><a href="#post-151513">How do you like your braces?</a></div>
    <div class="body">Just because MS does it doesn't mean it's a good thing.</div>
    <div class="meta">Posted on 2004-10-19 13:04:54 by death</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=19688&amp;page=1" style="">&laquo;</a><a href="../?id=19688&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="19688" /><input type="number" name="page" min="1" max="3" step="1" value="2" onchange="this.form.submit();" /><a href="../?id=19688&amp;page=3">&gt;</a><a href="../?id=19688&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>