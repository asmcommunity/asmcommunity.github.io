<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Moving characters - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4759" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4759">Moving characters</a></p>
   <div class="post" id="post-33350">
    <div class="subject"><a href="#post-33350">Moving characters</a></div>
    <div class="body">I'm trying to write a function (for a project) that copies one string into another. I pretty much know how I'm going set it up, the only problem comes in when I try to move the character from the source string to the destination string. Below is what I have so far (I removed everything that doesn't have to do with the problem):<br /><br />		.386<br />		.MODEL		FLAT, C<br />		INCLUDE		S:\PatProj\STR_IO.INC<br />		INCLUDE		S:\PatProj\NUM_IO.INC<br /><br />		.DATA<br /><br />		.CODE<br />		PUBLIC		copy_string<br />copy_string:<br />		push		ebp<br />		mov		ebp, esp<br /><br />CSDest		EQU		DWORD PTR <br />CSSource	EQU		DWORD PTR <br />CSMaxLen	EQU		DWORD PTR <br /><br />		push		ebx<br />		push		edi<br />		push		esi<br /><br />		mov		ebx, 0 ; number moved<br />		mov		edi, CSDest<br />		mov		esi, CSSource<br />CSTopLoop:<br />		mov		al, BYTE PTR <br />		; if the below line is commented out, the<br />		; program will run fine, if it's not,<br />		; I get an error that says that the instruction<br />		; could not be written at a certain memory <br />		; location.<br />		; I know the above line works fine because<br />		; I have several test to see if it was doing<br />		; what it should be doing, but I<br />		; have no idea why the below line does<br />		; not work<br />		mov		BYTE PTR , al<br /><br />CSLoopExit:<br />		mov		eax, ebx<br />		pop		esi<br />		pop		edi<br />		pop		ebx<br />		pop		ebp<br /><br />		ret<br />		END<br /><br />Any help would be great. I'm using VC++ 6.0. And here's what the<br />C prototype looks like:<br /><br />unsigned long copy_string(char *dest_str, const char *src_str, unsigned long max_len);<br /><br />and how it's called:<br /><br />char *the_dest = &quot;&quot;;<br />char *the_source = &quot;heyman&quot;;<br />unsigned long the_len = 3;<br />unsigned long x;<br />x = copy_string(the_dest, the_source, the_len);<br /><br />Also, I can't use anything fancy, I can only use basic stuff (which is why it's character by character string copying).<br /><br />later</div>
    <div class="meta">Posted on 2002-04-13 15:14:07 by PAT or JK</div>
   </div>
   <div class="post" id="post-33355">
    <div class="subject"><a href="#post-33355">Moving characters</a></div>
    <div class="body">i think the problem is the_dest doesn't have any space allocated to it. try using &quot;char the_dest[128];&quot; or something instead.</div>
    <div class="meta">Posted on 2002-04-13 15:36:39 by Sloat</div>
   </div>
   <div class="post" id="post-33470">
    <div class="subject"><a href="#post-33470">thanks</a></div>
    <div class="body">Thanks,<br /><br />later</div>
    <div class="meta">Posted on 2002-04-14 15:36:11 by PAT or JK</div>
   </div>
  </div>
 </body>
</html>