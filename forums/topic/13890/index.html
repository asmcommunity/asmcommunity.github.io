<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>The new DDK is just going to He?? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13890" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=13890">The new DDK is just going to He??</a></p>
   <div class="post" id="post-107366">
    <div class="subject"><a href="#post-107366">The new DDK is just going to He??</a></div>
    <div class="body">All:<br /><br />This just arrived in my inbox and I thought that I would pass it on.  Just one more sign that M$ wants everything done their way:<br /><br /><br />Date:  16-Jun-03, Modified: 16-Jun-03 <br />From: Hector J. Rodriguez<br />To:    Driver Developers <br /><br /><br />Re: No More Embedded Assembler or x87 FP <br />           <br /><br /><br /> I hope you've started working on getting your drivers to run on Windows on the AMD64, like most of the world.  The DDK has had an AMD64 cross-compiler (runs on x86, targets AMD64) for quite a while.  If you're not already working on porting your drivers, you're missing an imortant opportunity: The AMD64 running 64-bit Windows will be the hottest desktop in town.<br /><br />While it's very obviously the future, I'll let the other boys here write the articles extolling the virtues of the AMD64 and 64-bit Windows.  I want to warn you about a more subtle issue: Embedded assembler code.<br /><br />The use of any embedded assembler language (using _asm) is not supported by the MS C compiler for the AMD64.  Yup, straight up, it refuses to compile it and gives you an error.<br /><br />You could move your assembler code to a subroutine, but the calling conventions for 64-bit code are all fastcall on Windows on the AMD64.  Not to mention that exception handling is done very differently.  And there's no support for x87 floating point, MMX, or 3dNow! instructions (for 64-bit code, like drivers).  So straight-out moving your code isn't a completely trivial exercise.<br /><br />The good news is that SSE/SSE2 instructions are natively supported and always context-switched.  So, a few SSE/SSE2 intrinsics can be substituted for any floating point code you might have (with better speed and accuracy, usually, too).<br /><br />(Hey... Before you tell your app weenie friends and get them all upset and whiny: Be sure you understand that the Windows-64 on the AMD64 supports all the above including _asm, x86, MMX, etc for 32-bit code compiled with the standard x86 32-bit compiler, even when running on a 64-bit operating system.  But drivers must be native 64-bit and that's the difference.)<br /><br />There'll be more articles about the AMD64 coming soon.  In the mean time, get rid of that embedded assembler.  And get to work on supporting Windows-64 on the AMD64.  Comprendes?<br /><br /><br />The link for the above article is:<br /><br /><a target="_blank" href="http://www.osronline.com/article.cfm?id=244">Re: No More Embedded Assembler or x87 FP</a></div>
    <div class="meta">Posted on 2003-06-17 10:20:28 by madprgmr</div>
   </div>
   <div class="post" id="post-107416">
    <div class="subject"><a href="#post-107416">The new DDK is just going to He??</a></div>
    <div class="body">Corporate insanity - ignore the propaganda.<br /><br /><div class="quote">(with better speed and accuracy, usually, too).</div>...and just plain lies, too.  The one remote case where there is better accuracy is where the FPU is in single percision mode verses SSE2 with double percision reals!  Not to mention the FPU could be faster in that remote case. :rolleyes:</div>
    <div class="meta">Posted on 2003-06-17 18:50:01 by bitRAKE</div>
   </div>
  </div>
 </body>
</html>