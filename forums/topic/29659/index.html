<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Help req: Finding the maximum number from an array - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29659" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29659">Help req: Finding the maximum number from an array</a></p>
   <div class="post" id="post-209437">
    <div class="subject"><a href="#post-209437">Help req: Finding the maximum number from an array</a></div>
    <div class="body">Hello,<br /><br />I have to write an assembly language program that finds out maximum number from an array of ten numbers.<br /><br />I using nasm, i want this program to be checked, if someone could help. <br /><br /><pre><code><br /><br /><br />mov bx,2<br />mov dx,<br /><br />jmp start<br /><br /><br />Array: <br />2,8,6,1,7,4,1,14,5,9<br /><br />max:<br /> dw 0<br /><br />Maximum:<br />mov dx,<br /><br />Loop:<br />cmp bx,20<br />add bx,2<br /><br />start:<br />cmp ,dx<br />jnbe Maximum<br />cmp bx,20<br />jnae Loop<br /><br /><br />mov ax,0x4c00<br />int 0x21<br /></code></pre></div>
    <div class="meta">Posted on 2009-11-01 05:44:52 by Emerald</div>
   </div>
   <div class="post" id="post-209438">
    <div class="subject"><a href="#post-209438">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">Checked:<pre><code>Emerald.nasm:10: error: label or instruction expected at start of line</code></pre></div>
    <div class="meta">Posted on 2009-11-01 05:49:18 by baldr</div>
   </div>
   <div class="post" id="post-209439">
    <div class="subject"><a href="#post-209439">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">Can you point out where i am wrong?</div>
    <div class="meta">Posted on 2009-11-01 06:19:42 by Emerald</div>
   </div>
   <div class="post" id="post-209444">
    <div class="subject"><a href="#post-209444">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body"><div class="quote"><br />Can you point out where i am wrong?<br /></div><br /><br /><strong>Array</strong> is a label, but you didn&#039;t specify any data type for the subsequent elements.<br /><br />Take a look at how you declared the <strong>max</strong> &quot;variable&quot; in your code, and go from there.</div>
    <div class="meta">Posted on 2009-11-01 10:19:25 by SpooK</div>
   </div>
   <div class="post" id="post-209486">
    <div class="subject"><a href="#post-209486">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">I have again written code for finding the maximum number out oan array of 10 numbers. I have highlighted the lines with error in syntax. Kindly correct<br /><br /> <pre><code><br /><br /><br /><br />jmp start<br /><br /><br />Array:<br />dw 2,8,6,1,7,4,1,14,5,9<br /><br />noAction:<br />mov ax,0x4c00<br />int 0x21<br /><br /><br /><span style="font-family:Verdana">Loop:</span><br />cmp bx,10<br />ja increment<br />jb noAction<br /><br />increment:<br />add bx,1<br /><br />Maximum:<br />cmp dx,<br />ja SetMax<br /><span style="font-family:Verdana">jbe Loop</span><br /><br /><br />SetMax:<br />mov dx,<br /><span style="font-family:Verdana">jmp Loop</span><br />return<br /><br />start:<br />mov bx,0<br />mov dx,<br />call Maximum<br /><br /><br />mov ax,0x4c00<br />int 0x21<br /></code></pre><br /><br />the algorithm i have used is as follows<br /><br /><pre><code><br />function Maximum(Array){<br />max=Array[0]<br />for(i=1;i&lt;10;i++){<br />if(array&gt;max)<br />{<br />max=Array;<br />}<br />return max<br />}<br /></code></pre></div>
    <div class="meta">Posted on 2009-11-04 12:27:57 by Emerald</div>
   </div>
   <div class="post" id="post-209487">
    <div class="subject"><a href="#post-209487">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">Sorry the above code could not show the error lines, i will comment those lines again<br /><br /><pre><code><br /><br /><br />jmp start<br /><br /><br />Array:<br />dw 2,8,6,1,7,4,1,14,5,9<br /><br />noAction:<br />mov ax,0x4c00<br />int 0x21<br /><br /><br />Loop:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Error<br />cmp bx,10<br />ja increment<br />jb noAction<br /><br />increment:<br />add bx,1<br /><br />Maximum:<br />cmp dx,<br />ja SetMax<br />jbe Loop&nbsp; ;Error<br /><br /><br />SetMax:<br />mov dx,<br />jmp Loop&nbsp;  ;Error<br />return<br /><br />start:<br />mov bx,0<br />mov dx,<br />call Maximum<br /><br /><br />mov ax,0x4c00<br />int 0x21<br /></code></pre><br /><br />All the errors are syntax errors. Kindly correct them.</div>
    <div class="meta">Posted on 2009-11-04 12:37:32 by Emerald</div>
   </div>
   <div class="post" id="post-209489">
    <div class="subject"><a href="#post-209489">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">LOOP is an x86 instruction, therefore you cannot use it as a label.</div>
    <div class="meta">Posted on 2009-11-04 14:50:40 by SpooK</div>
   </div>
   <div class="post" id="post-209490">
    <div class="subject"><a href="#post-209490">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">Furthermore, &quot;return&quot; is not an x86 instruction! Nasm is treating it as a label (may or may not give you a warning, depending on Nasm version). Doesn&#039;t get executed, in any case.<br /><br />Intel syntax (Nasm syntax, more or less) has the operands in &quot;reverse&quot; order (depending on how you look at it). This can be confusing...<br /><br />&quot;mov ax, bx&quot; moves bx into ax, not ax into bx. So, if you&#039;ve got:<br /><br />cmp ax, bx<br />ja foo<br /><br />Does it jump if ax is &quot;above&quot;, or bx? Answer: if ax is &quot;above&quot;. You get this right when you&#039;re comparing for &quot;max&quot;, but not when you&#039;re comparing bx.<br /><br />How large are the items in your array? So how much do you want to add to bx to get to the next one?<br /><br />Keep plugging, you&#039;re getting there!<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2009-11-04 15:43:02 by fbkotler</div>
   </div>
   <div class="post" id="post-209498">
    <div class="subject"><a href="#post-209498">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body"><div class="quote"><br />Does it jump if ax is &quot;above&quot;, or bx? Answer: if ax is &quot;above&quot;. You get this right when you&#039;re comparing for &quot;max&quot;, but not when you&#039;re comparing bx.<br /></div><br /><br />Are you sure about this ? because in <br />cmp ax,bx<br />ja Loop1<br />.....our teacher told us that, the loop will execute if bx is above ax.&nbsp; Secondly you said that i have done the comparison correctly while comparing for max and its wrong when comparing bx. I re-looked at it and found that i have used the same logic in both cases. <br /><br />I have deleted return from my subroutine, because we know that with &#039;call&#039; , return is not obligatory. Also i have replaced the &#039;Loop&#039; with &#039;loop1&#039; Now the program gets compiled easily, but when i run it in debugger, there is no change in the registers after executing the program step by step. The registers remain at the same values thoroughout the program.<br /><br />I even reversed the &#039;ja&#039; in bx comparison as you mentioned, but <strong>still debugger shows no change in registers.</strong> I am so confused about this. Kindly help!</div>
    <div class="meta">Posted on 2009-11-05 16:28:54 by Emerald</div>
   </div>
   <div class="post" id="post-209499">
    <div class="subject"><a href="#post-209499">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">I stand corrected - you do use the same logic after the &quot;cmp&quot; in both places. Sorry &#039;bout that.<br /><br />As to which is right... we can &quot;look it up&quot; or &quot;ask the expert&quot;... I prefer &quot;do the experiment&quot;. Write yourself some &quot;junk code&quot;, assemble it, and run it in the debugger. Or write it so it outputs some result...<br /><br />org 100h<br /><br />&nbsp; mov ax, 1<br />&nbsp; mov bx, 2<br />&nbsp; cmp ax, bx<br />&nbsp; ja did_jump<br /><br />&nbsp; mov al, &#039;N&#039;<br />&nbsp; int 29h<br />&nbsp; jmp exit<br /><br />did_jump:<br />&nbsp; mov al, &#039;Y&#039;<br />&nbsp; int 29h<br /><br />exit:<br />&nbsp; ret<br /><br />Fiddle with the numbers, and with the condition code - try &quot;jb&quot;, &quot;jna&quot;, &quot;jc&quot;... Might as well try &quot;jg&quot; and &quot;jl&quot;, too (these treat the numbers as signed... so 0FFFFh is &quot;less&quot; than 1). You might learn something - probably want to RTFM, too - some things are hard to determine by &quot;trial and error&quot;...<br /><br />I have no explanation why the registers don&#039;t change in the debugger. Lessee, we:<br /><br />jmp start<br /><br />That should change ip, but no other register. Then, at &quot;start:&quot;...<br /><br />mov bx,0<br /><br />bx was probably already zero, so this may not do anything obvious.<br /><br />mov dx,<br /><br />That should make dx 2... if it wasn&#039;t already...<br /><br />call Maximum<br /><br />Besides changing ip, this should change sp - &quot;call&quot; saves the return address on the stack. It&#039;s true that &quot;with &#039;call&#039; , return is not obligatory&quot;, but it&#039;s a pretty good idea to keep &quot;call&quot;s and &quot;ret&quot;s matched... unless you have something &quot;tricky&quot; in mind.<br /><br />The &quot;junk code&quot; above ends with &quot;ret&quot;, even though there&#039;s no &quot;call&quot;. The reason this works is because, when dos loads a .com file, it pushes a (word) zero on the stack. &quot;ret&quot; fetches it&#039;s address to return to from the stack, so we go to cs:0... where we will find &quot;cd 20&quot; - int 20h - in the &quot;program segment prefix&quot; (PSP) which dos puts there. I probably shouldn&#039;t have showed you that. The int 21h/4Ch you&#039;re using is &quot;better&quot;.<br /><br />I probably shouldn&#039;t have showed you int 29h, either. It&#039;s documented as &quot;internal&quot;. We&#039;re probably not &quot;supposed&quot; to use it. But it&#039;s simple, and it works...<br /><br />Try your code in a debugger again. If the registers really don&#039;t change, &quot;something&#039;s wrong&quot;! What will we do if there&#039;s a bug in the debugger??? Hopefully, you just need a little experience learning how to use it. If you&#039;re using DEBUG, there&#039;s a &quot;smarter&quot; debugger from David Lindauer - GRDB. Latest version I&#039;ve got (I think David&#039;s run out of time to work on it)...<br /><br />http://home.myfairpoint.net/fbkotler/grdb194.zip<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2009-11-05 17:54:23 by fbkotler</div>
   </div>
   <div class="post" id="post-209500">
    <div class="subject"><a href="#post-209500">Re: Help req: Finding the maximum number from an array</a></div>
    <div class="body">Correction:<br /><br />http://home.myfairpoint.net/fbkotler/grdbdl94.zip<br /><br />It&#039;s a really nice debugger...<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2009-11-05 18:06:45 by fbkotler</div>
   </div>
  </div>
 </body>
</html>