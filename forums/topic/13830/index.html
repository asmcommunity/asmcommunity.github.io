<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>What is FS used for ? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13830" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13830">What is FS used for ?</a></p>
   <div class="post" id="post-106969">
    <div class="subject"><a href="#post-106969">What is FS used for ?</a></div>
    <div class="body">Sometimes I see code like<br />mov eax, fs:dword ptr[150h] or simular, what is the fs for?<br /><br />And how do you calculate right addresses? I mean eg:<br />jmp dword ptr  (after the first line), how is that 250 calculated and of course how is the relation to FS ?</div>
    <div class="meta">Posted on 2003-06-13 08:56:59 by SFP</div>
   </div>
   <div class="post" id="post-106990">
    <div class="subject"><a href="#post-106990">What is FS used for ?</a></div>
    <div class="body">In Win32 programming the FS (and GS) register is assumed to Error and used for structured exception handling. Addressing in Win32 is FLAT, that means that there are no segements to deal with at all, the actual address in eip is where the instruction pointer is (well sort of - it is after all protected mode).</div>
    <div class="meta">Posted on 2003-06-13 12:00:47 by donkey</div>
   </div>
   <div class="post" id="post-107004">
    <div class="subject"><a href="#post-107004">What is FS used for ?</a></div>
    <div class="body">Windows sets FS to point to a segment which contains information about the thread when executing a Windows application. GS will point to the TDB of the program in Windows 95/98/Me. When executing system code, FS will point to a segment which only contains an exception frame address, and GS will be a flat segment. FS:[150h] must be an error, the segment is not that big.</div>
    <div class="meta">Posted on 2003-06-13 14:24:49 by Sephiroth3</div>
   </div>
   <div class="post" id="post-107328">
    <div class="subject"><a href="#post-107328">What is FS used for ?</a></div>
    <div class="body">Where can i find information about how windows 9x uses FS: register?<br /><br />Greets.<br /><br />pd: yes, i've tryed Google.</div>
    <div class="meta">Posted on 2003-06-17 00:34:44 by r00t</div>
   </div>
   <div class="post" id="post-107331">
    <div class="subject"><a href="#post-107331">What is FS used for ?</a></div>
    <div class="body">You can google for SEH or structured exception handling, I used to have some demos around but they're archived somewhere in a badly organized stack of cdroms. I'll see what I can find.</div>
    <div class="meta">Posted on 2003-06-17 01:19:49 by donkey</div>
   </div>
   <div class="post" id="post-107398">
    <div class="subject"><a href="#post-107398">What is FS used for ?</a></div>
    <div class="body"><div class="quote"><br />GS will point to the TDB of the program in Windows 95/98/Me. </div>Actually, in Win95 original edition, on program launch, GS is set to 0, an invalid selector. There are some APIs that use GS as a temporary segment register.</div>
    <div class="meta">Posted on 2003-06-17 14:47:14 by tenkey</div>
   </div>
   <div class="post" id="post-107407">
    <div class="subject"><a href="#post-107407">What is FS used for ?</a></div>
    <div class="body">Whoops... I guess I should have tested it more carefully. I was just interrupting Explorer at a random time and found it pointing to the TDB, and it was very late at night...</div>
    <div class="meta">Posted on 2003-06-17 16:23:49 by Sephiroth3</div>
   </div>
   <div class="post" id="post-107418">
    <div class="subject"><a href="#post-107418">What is FS used for ?</a></div>
    <div class="body"><a target="_blank" href="http://www.asmcommunity.net/board/showthread.php?threadid=11220">FS register help</a></div>
    <div class="meta">Posted on 2003-06-17 19:01:24 by Four-F</div>
   </div>
   <div class="post" id="post-107480">
    <div class="subject"><a href="#post-107480">What is FS used for ?</a></div>
    <div class="body"><div class="quote"><br />Where can i find information about how windows 9x uses FS: register?</div><br /><br /><a target="_blank" href="http://elicz.cjb.net/">Hello, Coder!</a></div>
    <div class="meta">Posted on 2003-06-18 11:40:28 by MazeGen</div>
   </div>
  </div>
 </body>
</html>