<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>wpa.hhf -update - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15887" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=15887">wpa.hhf -update</a></p>
   <div class="post" id="post-123150">
    <div class="subject"><a href="#post-123150">wpa.hhf -update</a></div>
    <div class="body">The wpa.hhf bundled with the latest version of hla is not up to date.  I think the CD version may be up to date, but I do not have it to say for sure.<br /><br />Those who do not have the CD version may wish to update manually.  To update, open the wpa.hhf into a text editor.<br /><br />1&gt;There is a missing semicolon at the end of this line:  (bug?)<br /><br />w.DrawText( _hdcOut_, _lpString_, _nCount_, _lpRect_, _uFormat_ )<br /><br />2&gt; TabbedTextOut keyword is missing, to add, copy and paste the following keyword between #TextOut and #GetCurrentPositionEx.<br /><br /><br />	  #keyword TabbedTextOut(_x_, _y_, _string_, _len_, _tCount_, _tabs_, _offset_);<br /><br />		w.TabbedTextOut( _hdcOut_, _x_, _y_, _string_, _len_, _tCount_, _tabs_, _offset_);<br /><br /><br />Make sure the variable _hdcOut_ matches the variable in the BeginPaint macro.</div>
    <div class="meta">Posted on 2003-11-01 12:48:03 by Kain</div>
   </div>
   <div class="post" id="post-123183">
    <div class="subject"><a href="#post-123183">Re: wpa.hhf -update</a></div>
    <div class="body"><div class="quote"><em>Originally posted by Kain </em><br />The wpa.hhf bundled with the latest version of hla is not up to date.  I think the CD version may be up to date, but I do not have it to say for sure.<br /><br />Those who do not have the CD version may wish to update manually.  To update, open the wpa.hhf into a text editor.<br /><br />1&gt;There is a missing semicolon at the end of this line:  (bug?)<br /><br />w.DrawText( _hdcOut_, _lpString_, _nCount_, _lpRect_, _uFormat_ )<br /><br /></div><br /><br />Well, technically it isn't really needed because the DrawText macro invocation usually has a semicolon<br />after it. But for consistency's sake it should be there.<br /><br /><br /><div class="quote"><br />2&gt; TabbedTextOut keyword is missing, to add, copy and paste the following keyword between #TextOut and #GetCurrentPositionEx.<br /><br /><br />	  #keyword TabbedTextOut(_x_, _y_, _string_, _len_, _tCount_, _tabs_, _offset_);<br /><br />		w.TabbedTextOut( _hdcOut_, _x_, _y_, _string_, _len_, _tCount_, _tabs_, _offset_);<br /><br /><br />Make sure the variable _hdcOut_ matches the variable in the BeginPaint macro. </div><br /><br />I've added that now, thanks.<br />Actually, there are a lot of GDI macros still missing. I'm adding them as I work on the book.<br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2003-11-02 01:31:29 by rhyde</div>
   </div>
   <div class="post" id="post-123229">
    <div class="subject"><a href="#post-123229">wpa.hhf -update</a></div>
    <div class="body">&gt;&gt;I've added that now, thanks.<br />Actually, there are a lot of GDI macros still missing. I'm adding them as I work on the book.<br /><br /><br />I understand it can be a daunting task, especially with your work-load.<br /><br /><br />Question: If we write in hla, can be boast that our programs are written in assembly?<br /><br />From what I have read so far, hla has many features similar to JAVA combined with the power of assembly.<br /><br />I can say that I've learned a lot more about machine architecture after starting to read your books.  Thanks for making them available for those on a ... limited budget.</div>
    <div class="meta">Posted on 2003-11-02 13:43:31 by Kain</div>
   </div>
   <div class="post" id="post-123248">
    <div class="subject"><a href="#post-123248">wpa.hhf -update</a></div>
    <div class="body"><div class="quote"> <br /><br />Question: If we write in hla, can be boast that our programs are written in assembly?<br /></div> <br /><br />I don't see why not. HLA is an assembler at its core with a lot of HLL extensions just like masm but HLA takes it further.  I am going to post some HLA code orginally posted by someone from the alt.lang.asm newsgroup to demonstrate that HLA can be used to write real assembly code.  :) <br /><br /><pre><code> <br /><br />unit Example;<br /><br />   // switch off HLA's stack frame stuff...<br />   //<br />   // and, yes, using &quot;unit&quot; and these two<br />   // lines below is all that's needed to<br />   // switch it _ALL_ off for the entire length<br />   // of the source file...and, yes, you've<br />   // got to ask yourself why everyone makes<br />   // such a fuss about HLA's generation when<br />   // it's so easily switched off...<br />   //<br />   ?@noframe   &#58;= true;<br />   ?@nodisplay &#58;= true;<br /><br />   // like &quot;public main&quot; in other assemblers...making the<br />   // entry point visible &#40;but, also, using the HLA thing<br />   // of being able to use an &quot;alias&quot; inside the file,<br />   // different to its real &quot;outside&quot; name, as seen by the<br />   // linker &#58;&#41;...<br />   //<br />   procedure Main; @external&#40;&quot;_HLAMain&quot;&#41;;<br /><br />   // this is our &quot;extern&quot; section for defining links to<br />   // the Windows API used...would be a bunch of &quot;extern&quot;<br />   // or &quot;proto&quot; statements in some other assembler &#58;&#41;<br />   //<br />   static<br /><br />      GetModuleHandleA&#58;    procedure;<br />@external&#40;&quot;__imp__GetModuleHandleA@4&quot;&#41;;<br />      LoadCursorA&#58;         procedure;<br />@external&#40;&quot;__imp__LoadCursorA@8&quot;&#41;;<br />      RegisterClassExA&#58;    procedure;<br />@external&#40;&quot;__imp__RegisterClassExA@4&quot;&#41;;<br />      CreateWindowExA&#58;     procedure;<br />@external&#40;&quot;__imp__CreateWindowExA@48&quot;&#41;;<br />      DestroyWindow&#58;       procedure;<br />@external&#40;&quot;__imp__DestroyWindow@4&quot;&#41;;<br />      ShowWindow&#58;          procedure;<br />@external&#40;&quot;__imp__ShowWindow@8&quot;&#41;;<br />      UpdateWindow&#58;        procedure;<br />@external&#40;&quot;__imp__UpdateWindow@4&quot;&#41;;<br />      PeekMessageA&#58;        procedure;<br />@external&#40;&quot;__imp__PeekMessageA@20&quot;&#41;;<br />      GetMessageA&#58;         procedure;<br />@external&#40;&quot;__imp__GetMessageA@16&quot;&#41;;<br />      TranslateMessage&#58;    procedure;<br />@external&#40;&quot;__imp__TranslateMessage@4&quot;&#41;;<br />      DispatchMessageA&#58;    procedure;<br />@external&#40;&quot;__imp__DispatchMessageA@4&quot;&#41;;<br />      WaitMessage&#58;         procedure;<br />@external&#40;&quot;__imp__WaitMessage@0&quot;&#41;;<br />      ExitProcess&#58;         procedure;<br />@external&#40;&quot;__imp__ExitProcess@4&quot;&#41;;<br />      DefWindowProcA&#58;      procedure;<br />@external&#40;&quot;__imp__DefWindowProcA@16&quot;&#41;;<br />      PostQuitMessage&#58;     procedure;<br />@external&#40;&quot;__imp__PostQuitMessage@4&quot;&#41;;<br />      CreateRoundRectRgn&#58;  procedure;<br />@external&#40;&quot;__imp__CreateRoundRectRgn@24&quot;&#41;;<br />      SetWindowRgn&#58;        procedure;<br />@external&#40;&quot;__imp__SetWindowRgn@12&quot;&#41;;<br />      GetWindowDC&#58;         procedure;<br />@external&#40;&quot;__imp__GetWindowDC@4&quot;&#41;;<br />      ReleaseDC&#58;           procedure; @external&#40;&quot;__imp__ReleaseDC@8&quot;&#41;;<br /><br />   endstatic;<br /><br />   // Constant section; basically, everything in this section<br />   // is just an &quot;EQU&quot; for all Windows constants used...<br />   //<br />   const<br /><br />      FALSE                         &#58;= $00000000;<br />      TRUE                          &#58;= $00000001;<br /><br />      IDC_ARROW                     &#58;= $00007F00;<br /><br />      COLOR_3DFACE                  &#58;= $0000000F;<br /><br />      WS_OVERLAPPED                 &#58;= $00000000;<br />      WS_CAPTION                    &#58;= $00C00000;<br />      WS_SYSMENU                    &#58;= $00080000;<br />      WS_MINIMIZEBOX                &#58;= $00020000;<br /><br />      WS_OVERLAPPEDWINDOW           &#58;= WS_OVERLAPPED | WS_CAPTION |<br />                                       WS_SYSMENU | WS_MINIMIZEBOX;<br /><br />      CW_USEDEFAULT                 &#58;= $80000000;<br />      HWND_DESKTOP                  &#58;= $00000000;<br /><br />      SW_SHOWNORMAL                 &#58;= $00000001;<br /><br />      PM_NOREMOVE                   &#58;= $00000000;<br /><br />      WM_CREATE                     &#58;= $00000001;<br />      WM_DESTROY                    &#58;= $00000002;<br />      WM_PAINT                      &#58;= $0000000F;<br />      WM_QUIT                       &#58;= $00000012;<br />      WM_ERASEBKGND                 &#58;= $00000014;<br />      WM_NCCREATE                   &#58;= $00000081;<br />      WM_NCDESTROY                  &#58;= $00000082;<br />      WM_NCCALCSIZE                 &#58;= $00000083;<br />      WM_NCHITTEST                  &#58;= $00000084;<br />      WM_NCPAINT                    &#58;= $00000085;<br />      WM_NCACTIVATE                 &#58;= $00000086;<br />      WM_NCMOUSEMOVE                &#58;= $000000A0;<br /><br />      WVR_VALIDRECTS                &#58;= $00000400;<br /><br />      HTCAPTION            &#58;= 2;<br /><br />      WindowWidth          &#58;= 480;<br />      WindowHeight         &#58;= 320;<br /><br />   endconst;<br /><br />   // Actual code; Don't be fooled by &quot;procedure Main&quot; as<br />   // _nothing_ is generated for the procedure but what<br />   // you specifically see in the code...in this context,<br />   // the &quot;procedure&quot; is actually acting like a code section<br />   // wrapper only &#40;you know, &quot;_text segment&quot; / &quot;_text ends&quot; ;&#41;...<br />   //<br />   // Note, there are no other sections because the program's<br />   // initialised data is delibrately thrown into the code<br />   // section and the stack alone provides us writeable data<br />   // &#40;although, there's NO use of EBP in the code so following<br />   // the stack is no fun...in fact, I might indeed have messed<br />   // up counting those bytes or something...anyway, if I have,<br />   // it's not in any &quot;fatal&quot; way that stops it running ;&#41;...<br />   //<br />   procedure Main;<br />   begin Main;<br /><br />      sub   &#40;48, esp&#41;;<br /><br />      cld   &#40;&#41;;<br />      mov   &#40;&amp;MainWndClass, esi&#41;;<br />      mov   &#40;esp, edi&#41;;<br />      mov   &#40;12, ecx&#41;;<br />      rep.movsd&#40;&#41;;<br /><br />      pushd &#40;0&#41;;<br />      call  &#40;GetModuleHandleA&#41;;<br />      mov   &#40;eax, ebx&#41;;<br />      mov   &#40;ebx, &#91; esp + 20 &#93;&#41;;<br /><br />      pushd &#40;IDC_ARROW&#41;;<br />      pushd &#40;0&#41;;<br />      call  &#40;LoadCursorA&#41;;<br />      mov   &#40;eax, &#91; esp + 28 &#93;&#41;;<br /><br />      pushd &#40;esp&#41;;<br />      call  &#40;RegisterClassExA&#41;;<br />      add   &#40;48, esp&#41;;<br />      cmp   &#40;eax, 0&#41;;<br />      je    Terminate;<br /><br />      pushd &#40;0&#41;;<br />      pushd &#40;ebx&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;HWND_DESKTOP&#41;;<br />      pushd &#40;WindowHeight&#41;;<br />      pushd &#40;WindowWidth&#41;;<br />      pushd &#40;CW_USEDEFAULT&#41;;<br />      pushd &#40;CW_USEDEFAULT&#41;;<br />      pushd &#40;WS_OVERLAPPEDWINDOW&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;&amp;ClassName&#41;;<br />      pushd &#40;0&#41;;<br />      call  &#40;CreateWindowExA&#41;;<br />      cmp   &#40;eax, 0&#41;;<br />      je    Terminate;<br />      mov   &#40;eax, ebx&#41;;<br /><br />      pushd &#40;SW_SHOWNORMAL&#41;;<br />      pushd &#40;ebx&#41;;<br />      call  &#40;ShowWindow&#41;;<br /><br />      pushd &#40;ebx&#41;;<br />      call  &#40;UpdateWindow&#41;;<br /><br />      sub   &#40;28, esp&#41;;<br />   MsgLoop&#58;<br />      pushd &#40;PM_NOREMOVE&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;0&#41;;<br />      lea   &#40;ebx, &#91; esp + 16 &#93;&#41;;<br />      pushd &#40;ebx&#41;;<br />      call  &#40;PeekMessageA&#41;;<br />      cmp   &#40;eax, 0&#41;;<br />      je    NoMessage;<br /><br />      pushd &#40;0&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;ebx&#41;;<br />      call  &#40;GetMessageA&#41;;<br />      cmp   &#40;eax, 0&#41;;<br />      je    ExitProgram;<br /><br />      pushd &#40;ebx&#41;;<br />      call  &#40;TranslateMessage&#41;;<br /><br />      pushd &#40;ebx&#41;;<br />      call  &#40;DispatchMessageA&#41;;<br /><br />   NoMessage&#58;<br /><br />      call  &#40;WaitMessage&#41;;<br /><br />      jmp   MsgLoop;<br /><br />   ExitProgram&#58;<br />      mov   &#40;&#91; esp + 8 &#93;, eax&#41;;<br />      add   &#40;28, esp&#41;;<br /><br />   Terminate&#58;<br />      pushd &#40;eax&#41;;<br />      call  &#40;ExitProcess&#41;;<br /><br />   align&#40;4&#41;;<br /><br />   WndProc&#58;<br />      mov   &#40;&amp;MsgTable, edx&#41;;<br />      sub   &#40;8, edx&#41;;<br /><br />   NextMsg&#58;<br />      add   &#40;8, edx&#41;;<br />      mov   &#40;&#91; edx &#93;, eax&#41;;<br /><br />      cmp   &#40;eax, 0&#41;;<br />      je    DefProcessing;<br /><br />      cmp   &#40;&#91; esp + 8 &#93;, eax&#41;;<br />      jne   NextMsg;<br /><br />      jmp   &#40;&#91; edx + 4 &#93;&#41;;<br /><br />   DefProcessing&#58;<br />      pushd &#40;&#91; esp + 16 &#93;&#41;;<br />      pushd &#40;&#91; esp + 16 &#93;&#41;;<br />      pushd &#40;&#91; esp + 16 &#93;&#41;;<br />      pushd &#40;&#91; esp + 16 &#93;&#41;;<br />      call  &#40;DefWindowProcA&#41;;<br /><br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   CreateProc&#58;<br />      xor   &#40;eax, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   DestroyProc&#58;<br />      pushd &#40;0&#41;;<br />      call  &#40;PostQuitMessage&#41;;<br /><br />      xor   &#40;eax, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   PaintProc&#58;<br />      xor   &#40;eax, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   NcCreateProc&#58;<br /><br />      pushd &#40;24&#41;;<br />      pushd &#40;24&#41;;<br />      pushd &#40;WindowHeight&#41;;<br />      pushd &#40;WindowWidth&#41;;<br />      pushd &#40;0&#41;;<br />      pushd &#40;0&#41;;<br />      call  &#40;CreateRoundRectRgn&#41;;<br /><br />      pushd &#40;FALSE&#41;;<br />      pushd &#40;eax&#41;;<br />      pushd &#40;&#91; esp + 12 &#93;&#41;;<br />      call  &#40;SetWindowRgn&#41;;<br /><br />      mov   &#40;TRUE, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   NcDestroyProc&#58;<br />      xor   &#40;eax, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   NcCalcSizeProc&#58;<br />      cmp   &#40;&#40;type dword &#91; esp + 12 &#93;&#41;, FALSE&#41;;<br />      je    NoValidRect;<br /><br />      mov   &#40;&#91; esp + 16 &#93;, ebx&#41;;<br /><br />      mov   &#40;&#91; ebx &#93;, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 16 &#93;&#41;;<br />      add   &#40;8, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 32 &#93;&#41;;<br /><br />      mov   &#40;&#91; ebx + 4 &#93;, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 20 &#93;&#41;;<br />      add   &#40;24, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 36 &#93;&#41;;<br /><br />      mov   &#40;&#91; ebx + 8 &#93;, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 24 &#93;&#41;;<br />      sub   &#40;16, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 40 &#93;&#41;;<br /><br />      mov   &#40;&#91; ebx + 12 &#93;, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 28 &#93;&#41;;<br />      sub   &#40;32, eax&#41;;<br />      mov   &#40;eax, &#91; ebx + 44 &#93;&#41;;<br /><br />      mov   &#40;WVR_VALIDRECTS, eax&#41;;<br />      jmp   EndOfNcCalcSizeProc;<br /><br />   NoValidRect&#58;<br />      xor   &#40;eax, eax&#41;;<br /><br />   EndOfNcCalcSizeProc&#58;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   NcHitTestProc&#58;<br />      mov   &#40;HTCAPTION, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   NcPaintProc&#58;<br />      xor   &#40;eax, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   align &#40;4&#41;;<br /><br />   NcActivateProc&#58;<br />      xor   &#40;eax, eax&#41;;<br />      ret   &#40;16&#41;;<br /><br />   // *** Data ***<br />   // &#40;Read-only data, as we're still in the code section&#41;<br /><br />   align &#40;4&#41;;<br /><br />   MainWndClass&#58;<br />      dword       48;<br />      dword       NULL;<br />      dword       &amp;WndProc;<br />      dword       NULL;<br />      dword       NULL;<br />      dword       NULL;<br />      dword       NULL;<br />      dword       NULL;<br />      dword       COLOR_3DFACE + 1;<br />      dword       NULL;<br />      dword       &amp;ClassName;<br />      dword       NULL;<br /><br />   MsgTable&#58;<br />      dword       WM_CREATE,     &amp;CreateProc;<br />      dword       WM_DESTROY,    &amp;DestroyProc;<br />      dword       WM_PAINT,      &amp;PaintProc;<br />      dword       WM_NCCREATE,   &amp;NcCreateProc;<br />      dword       WM_NCDESTROY,  &amp;NcDestroyProc;<br />      dword       WM_NCCALCSIZE, &amp;NcCalcSizeProc;<br />      dword       WM_NCHITTEST,  &amp;NcHitTestProc;<br />      dword       WM_NCPAINT,    &amp;NcPaintProc;<br />   EndOfMsgTable&#58;<br />      dword       WM_NCACTIVATE, &amp;NcActivateProc;<br /><br />   ClassName&#58;     byte  &quot;Example&quot;, 0;<br /><br />   end Main;<br /><br />end Example;<br /><br /><br /></code></pre></div>
    <div class="meta">Posted on 2003-11-02 15:33:49 by Odyssey</div>
   </div>
   <div class="post" id="post-123279">
    <div class="subject"><a href="#post-123279">wpa.hhf -update</a></div>
    <div class="body">Wow.  That blew away any doubts I had about hla.<br /><br />I have been interested in assembly for just over a week now and I must have power-downloaded every free assembler available, visited forums and such.  Doing so of course, I ran into some people who do not consider hla a 'true assembler.'<br /><br />I should have known better... today while browsing the FASM forum, I read a post by someone who said FASM is not a true assembler.  I guess you just cannot please some people.<br /><br />Now I'll go play around with that code you provided.</div>
    <div class="meta">Posted on 2003-11-02 21:01:14 by Kain</div>
   </div>
   <div class="post" id="post-123358">
    <div class="subject"><a href="#post-123358">wpa.hhf -update</a></div>
    <div class="body"><div class="quote"><br /> <br /><br />I don't see why not. HLA is an assembler at its core with a lot of HLL extensions just like masm but HLA takes it further.  I am going to post some HLA code orginally posted by someone from the alt.lang.asm newsgroup to demonstrate that HLA can be used to write real assembly code.  :) <br /><br /><br /><br /> </div><br /><br />That looks like something Beth would post :-)<br />I never saw the original post... Thanks for reposting it here.<br /><br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2003-11-03 14:23:06 by rhyde</div>
   </div>
   <div class="post" id="post-123370">
    <div class="subject"><a href="#post-123370">wpa.hhf -update</a></div>
    <div class="body"><div class="quote"> <br />That looks like something Beth would post :-)<br />I never saw the original post... Thanks for reposting it here.<br /></div> <br /><br />Yes it was posted by Beth but I don't remember which thread it was though.</div>
    <div class="meta">Posted on 2003-11-03 19:58:55 by Odyssey</div>
   </div>
   <div class="post" id="post-124694">
    <div class="subject"><a href="#post-124694">wpa.hhf -update</a></div>
    <div class="body"><div class="quote"><br />Wow.  That blew away any doubts I had about hla.<br /><br />I should have known better... today while browsing the FASM forum, I read a post by someone who  </div><br /><br />Amusing. Even Rene (Betov) calls FASM a true assembler.<br />Guess they must have been upset because it automatically optimizes displacements for you.<br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2003-11-18 14:45:08 by rhyde</div>
   </div>
  </div>
 </body>
</html>