<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>one question about iczelion`s tutorials - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21520" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21520">one question about iczelion`s tutorials</a></p>
   <div class="post" id="post-162521">
    <div class="subject"><a href="#post-162521">one question about iczelion`s tutorials</a></div>
    <div class="body">i am studying Win32Asm ,i have read the tutorial about child window controls that icezelion wrote.i have one question about the codes he wrote.<br /><br /><br /><br /><br />WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM <br />&nbsp; &nbsp; .IF uMsg==WM_DESTROY <br />&nbsp; &nbsp; &nbsp; &nbsp; invoke PostQuitMessage,NULL <br />&nbsp; &nbsp; .ELSEIF uMsg==WM_CREATE <br />&nbsp; &nbsp; &nbsp; &nbsp; invoke CreateWindowEx,WS_EX_CLIENTEDGE, ADDR EditClassName,NULL,\ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WS_CHILD or WS_VISIBLE or WS_BORDER or ES_LEFT or\ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ES_AUTOHSCROLL,\ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 50,35,200,25,hWnd,8,hInstance,NULL <br />&nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; hwndEdit,eax <br />&nbsp; &nbsp; &nbsp; &nbsp; invoke SetFocus, hwndEdit <br />&nbsp; &nbsp; &nbsp; &nbsp; invoke CreateWindowEx,NULL, ADDR ButtonClassName,ADDR ButtonText,\ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; WS_CHILD or WS_VISIBLE or BS_DEFPUSHBUTTON,\ <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 75,70,140,25,hWnd,ButtonID,hInstance,NULL <br />&nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; hwndButton,eax <br />&nbsp; &nbsp; .ELSEIF uMsg==WM_COMMAND <br />&nbsp; &nbsp; &nbsp; &nbsp; mov eax,wParam <br />&nbsp; &nbsp; &nbsp; &nbsp; .IF lParam==0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .IF ax==IDM_HELLO <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke SetWindowText,hwndEdit,ADDR TestString <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .ELSEIF ax==IDM_CLEAR <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke SetWindowText,hwndEdit,NULL <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .ELSEIF&nbsp; ax==IDM_GETTEXT <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke GetWindowText,hwndEdit,ADDR buffer,512 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .ELSE <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke DestroyWindow,hWnd <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .ENDIF <br />&nbsp; &nbsp; &nbsp; &nbsp; .ELSE <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .IF ax==ButtonID <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; shr eax,16 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .IF ax==BN_CLICKED <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .ENDIF <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .ENDIF <br />&nbsp; &nbsp; &nbsp; &nbsp; .ENDIF <br />&nbsp; &nbsp; .ELSE <br />&nbsp; &nbsp; &nbsp; &nbsp; invoke DefWindowProc,hWnd,uMsg,wParam,lParam <br />&nbsp; &nbsp; &nbsp; &nbsp; ret <br />&nbsp; &nbsp; .ENDIF <br />&nbsp; &nbsp;  xor&nbsp; &nbsp; eax,eax <br />&nbsp; &nbsp; ret <br />WndProc endp <br /><br /><br /><br />Who can tell me, what does the &quot;mov&nbsp; hwndButton,eax &quot;&nbsp; make sense?&nbsp; i deleted this code,and the program run correctly as i did it before.</div>
    <div class="meta">Posted on 2005-07-27 14:05:22 by Abuseyourdna</div>
   </div>
   <div class="post" id="post-162522">
    <div class="subject"><a href="#post-162522">Re: one question about iczelion`s tutorials</a></div>
    <div class="body">If you don&#39;t use that handle, then it&#39;s useless.</div>
    <div class="meta">Posted on 2005-07-27 14:27:33 by ti_mo_n</div>
   </div>
   <div class="post" id="post-162529">
    <div class="subject"><a href="#post-162529">Re: one question about iczelion`s tutorials</a></div>
    <div class="body">Doesn&#39;t hurt saving it though :)</div>
    <div class="meta">Posted on 2005-07-27 17:06:49 by JimmyClif</div>
   </div>
   <div class="post" id="post-162530">
    <div class="subject"><a href="#post-162530">Re: one question about iczelion`s tutorials</a></div>
    <div class="body">It hurts the performance XD :lol:</div>
    <div class="meta">Posted on 2005-07-27 18:27:05 by ti_mo_n</div>
   </div>
   <div class="post" id="post-162534">
    <div class="subject"><a href="#post-162534">Re: one question about iczelion`s tutorials</a></div>
    <div class="body">I&#39;m guessing Abuseyourdna doesn&#39;t understand what the hwndButton variable is. So real quick, CreateWindowEx returns<br />a &quot;handle&quot; when it&#39;s called. Return values are, as far as you should be conserned right now, always returned in the EAX<br />register. That example stores the handle by moving data from EAX and copying it into hwndButton. The reason this is<br />done is for later reference to the child window (control). Say for example, you wish to hide the button later on in your<br />program. This can be done by inserting:<br /><br />invoke ShowWindow,hwndButton,SW_HIDE<br /><br />This keeps you from having to call GetDlgItem each time you want to reference the control&#39;s handle. In that example,<br />you will notice there is nothing else using hwndButton. So if you remove it, it doesn&#39;t hurt the execution of the program,<br />only decreases the size of the executable by about 4 bytes.<br /><br />Regards,<br />Bryant Keller<br /></div>
    <div class="meta">Posted on 2005-07-27 22:15:12 by Synfire</div>
   </div>
   <div class="post" id="post-162536">
    <div class="subject"><a href="#post-162536">Re: one question about iczelion`s tutorials</a></div>
    <div class="body"><div class="quote">only decreases the size of the executable by about 4 bytes.</div><br />Actually it decreases the code block&#39;s size by 4 bytes, which will decrease executable&#39;s size in VERY RARE occassions ;) Something like [100/BLOCK_ALIGNMENT] % chance for that, if I&#39;m not wrong (it&#39;s 5:43AM already :P ).<br /><br />Good Night :)</div>
    <div class="meta">Posted on 2005-07-27 22:46:09 by ti_mo_n</div>
   </div>
   <div class="post" id="post-162541">
    <div class="subject"><a href="#post-162541">Re: one question about iczelion`s tutorials</a></div>
    <div class="body">thx for all your help.</div>
    <div class="meta">Posted on 2005-07-28 03:59:54 by Abuseyourdna</div>
   </div>
  </div>
 </body>
</html>