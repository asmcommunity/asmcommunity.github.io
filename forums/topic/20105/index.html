<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>using IN and OUT - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20105" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20105">using IN and OUT</a></p>
   <div class="post" id="post-154042">
    <div class="subject"><a href="#post-154042">using IN and OUT</a></div>
    <div class="body">how do you use IN  and OUT??<br /><br />im interested in port 3f8 (serial port)?</div>
    <div class="meta">Posted on 2004-12-12 17:24:00 by Retsim_X</div>
   </div>
   <div class="post" id="post-154043">
    <div class="subject"><a href="#post-154043">using IN and OUT</a></div>
    <div class="body">Retsim_X,<br /><br />Those two instructions are not available to you in normal 32 bit protected mode Windows. You can either use them from 16 bit DOS code or write an OS specific device driver.</div>
    <div class="meta">Posted on 2004-12-12 17:39:00 by hutch--</div>
   </div>
   <div class="post" id="post-154044">
    <div class="subject"><a href="#post-154044">using IN and OUT</a></div>
    <div class="body">Retsim_X,<br /><br />If you are required to use Windows, you should at least try the code we suggested to you:<br /><br />CreateFile<br />ReadFile<br />WriteFile<br /><br />They work, and can probably do everything you need to do.  If you try and have questions, you will find help!  Here, or at the MASM32 Forum.<br /><br />Try it!  It works and does not require special drivers or using restricted opcodes.<br /><br />farrier</div>
    <div class="meta">Posted on 2004-12-12 17:59:27 by farrier</div>
   </div>
   <div class="post" id="post-154060">
    <div class="subject"><a href="#post-154060">using IN and OUT</a></div>
    <div class="body">i spent 3 an a half hours mucking around with the instructions an got them to work UNDER WINDOWS PROGRAMMED IN MASM32 DLGAPP, i can read all the ports in my old toshiba 486DX2 (it takes like 70s to do a assemble and link) :lol: <br /><br />hutch are you sure ya cant get them to work in win???<br />i wrote a windowless key logger too. it reads the keybuf port 60h FINE<br /><br />mind you i got some bsd's (blue screen of death) when working with the dma ports, some vmdvxd???</div>
    <div class="meta">Posted on 2004-12-13 03:17:40 by Retsim_X</div>
   </div>
   <div class="post" id="post-154061">
    <div class="subject"><a href="#post-154061">using IN and OUT</a></div>
    <div class="body">You're on windows 9x then, which allows you to do a lot of dirty things. Port I/O == nonworking application under NT.<br /><br />If you want to deal with the serial port, you really should use the win32 API for it, as it'll work on both 9x and NT.<br /><br />If you insist on direct port I/O there's a couple of ways to do it under NT - writing your own driver, using opcode's KMD, etc... http://www.asmcommunity.net/board/viewtopic.php?t=18859</div>
    <div class="meta">Posted on 2004-12-13 03:22:18 by f0dder</div>
   </div>
   <div class="post" id="post-154063">
    <div class="subject"><a href="#post-154063">using IN and OUT</a></div>
    <div class="body">Retsim_X,<br /><br />Early OEM versions of win95 allowed you to still write to some ports directly as they were early hybrids from DOS but later win9x version did not and any of the NT/2k/XP version never did allow direct port access.<br /><br />Without writing a device driver, Farrier's suggestion is probably the best way to go and its reliable across different windows versions.</div>
    <div class="meta">Posted on 2004-12-13 04:11:08 by hutch--</div>
   </div>
   <div class="post" id="post-154074">
    <div class="subject"><a href="#post-154074">using IN and OUT</a></div>
    <div class="body"><div class="quote">Retsim_X,<br /><br />If you are required to use Windows, you should at least try the code we suggested to you:<br /><br />CreateFile<br />ReadFile<br />WriteFile<br /><br />They work, and can probably do everything you need to do.  If you try and have questions, you will find help!  Here, or at the MASM32 Forum.<br /><br />Try it!  It works and does not require special drivers or using restricted opcodes.<br /><br />farrier</div><br /><br />do you have a link on how to use this api's for serial communication?</div>
    <div class="meta">Posted on 2004-12-13 09:29:49 by Scorpie</div>
   </div>
   <div class="post" id="post-154079">
    <div class="subject"><a href="#post-154079">using IN and OUT</a></div>
    <div class="body">It is all in the msdn...</div>
    <div class="meta">Posted on 2004-12-13 11:47:39 by roticv</div>
   </div>
   <div class="post" id="post-154080">
    <div class="subject"><a href="#post-154080">using IN and OUT</a></div>
    <div class="body">Look up Platform SDK: Device I/O (located under Windows Development -&gt; Windows Base Services -&gt; Device I/O). Quoting the overview:<br /><br /><div class="quote"><br />A process uses the CreateFile function to open a handle to a communications resource. For example, specifying COM1 opens a handle to a serial port, and LPT1 opens a handle to a parallel port.<br /></div><br /><br />If you want a quick entrance point, look up <strong>SetupComm</strong>.</div>
    <div class="meta">Posted on 2004-12-13 12:12:21 by f0dder</div>
   </div>
   <div class="post" id="post-154092">
    <div class="subject"><a href="#post-154092">using IN and OUT</a></div>
    <div class="body">i got a xp desktop computer and i just tryed running my progie on it and it works FINE <br /><br />i dont understand how it cant work</div>
    <div class="meta">Posted on 2004-12-13 16:27:29 by Retsim_X</div>
   </div>
   <div class="post" id="post-154093">
    <div class="subject"><a href="#post-154093">using IN and OUT</a></div>
    <div class="body">You're using IN and OUT in a win32 (and not dos) application and it works without errors on XP? That sounds strange... could you mail the exe to me? (use `f0dder AT yahoo DOT com')</div>
    <div class="meta">Posted on 2004-12-13 16:31:50 by f0dder</div>
   </div>
   <div class="post" id="post-154095">
    <div class="subject"><a href="#post-154095">using IN and OUT</a></div>
    <div class="body">f0dder <br /><br />i just sent ya email<br /><br />tell us if the attachment is buggered</div>
    <div class="meta">Posted on 2004-12-13 17:13:36 by Retsim_X</div>
   </div>
   <div class="post" id="post-154150">
    <div class="subject"><a href="#post-154150">using IN and OUT</a></div>
    <div class="body">I don't see how this could work on any NT-based OS... tested it on my box (XP SP2 professional, from administrative account), and as expected I get a program error when I try reading ports (tried 60, 64 and 3f8).</div>
    <div class="meta">Posted on 2004-12-14 10:41:48 by f0dder</div>
   </div>
   <div class="post" id="post-154172">
    <div class="subject"><a href="#post-154172">using IN and OUT</a></div>
    <div class="body">I wrote it to write some singals from unkown mchips connecting it to pport to dump them in file for further analysis.<br />You just need to change ReadPort proc in portsio.asm file to whatever in out with ports you want, and change in givio.bat source:<br /><pre><code><br />			; I/O access to 379h,37Ah ports<br />			mov ecx, pIopm<br />		         mov eax,379h<br />			btr dword ptr &#91;ecx&#93;,eax<br />			inc eax ;37Ah<br />			btr dword ptr &#91;ecx&#93;,eax<br /></code></pre><br /><br />to ports numbers you want.<br />It mostly based on F-Four example drivers.<br />Four-F wrote great tuts and unic KMD kit.<br />I'd recommend you obtain it and learn.<br /><br /><br />Hmmm... I wanted to attach source but I don't see how to do it : /<br />Has &quot;attach file&quot; service gone forever, or I just can not see it?</div>
    <div class="meta">Posted on 2004-12-14 19:11:11 by The Svin</div>
   </div>
   <div class="post" id="post-154174">
    <div class="subject"><a href="#post-154174">using IN and OUT</a></div>
    <div class="body">Svin, uploads have been disabled due to security issues (hacked board) .</div>
    <div class="meta">Posted on 2004-12-14 20:19:35 by f0dder</div>
   </div>
  </div>
 </body>
</html>