<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>File Cache - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9451" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=9451">File Cache</a></p>
   <div class="post" id="post-69915">
    <div class="subject"><a href="#post-69915">File Cache</a></div>
    <div class="body">Hello everybody,<br />  got a quick scenario that I would like input on. I want to write a small web server (like the cinchy server, nothing too fancy) and one of the features I would like to have is a file cache. That is, say 4 MB (arbitrary) that I would use to copy the most frequently downloaded files to and serving them from memory instead of disk all the time.<br /><br />  There are two options which I am considering:<br /><br />  1) VirtualAlloc a buffer, ReadFile to this buffer and keep track of all the files in the buffer in a table (along with file sizes and frequency of access)<br />  2) MapViewOfFile for each file I decide to load so that each file can have it's own address in memory. Track the pointer and handles for the file mapping as well as frequency of use.<br /><br />I would like to know which people think is faster (for file load times) and easier to maintain. Other things I will have to consider is when files are altered on disk and how memory is paged to disk<br /><br />As usual, any and all input is appreciated.<br /><br />Thanks<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-12-08 19:53:52 by chorus</div>
   </div>
   <div class="post" id="post-69997">
    <div class="subject"><a href="#post-69997">File Cache</a></div>
    <div class="body">not a good argument, but...<br />I would prefer the Alloc and ReadFile version. Very high level API functions, like file mappings often have a lot small drawbacks.<br />At first everything seem to be much easier, but later you will trap into one of the problems. Also if you need to make sometimes<br />later a modification or extension, lower level based solutions are much more flexible.</div>
    <div class="meta">Posted on 2002-12-09 04:32:27 by beaster</div>
   </div>
  </div>
 </body>
</html>