<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>adding a right click popup menu in a button - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20953" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20953">adding a right click popup menu in a button</a></p>
   <div class="post" id="post-158989">
    <div class="subject"><a href="#post-158989">adding a right click popup menu in a button</a></div>
    <div class="body">How do I make a button respond to a right click event? Whenever I right click on any part of a window of my prog, it shows the popup menu I created but when I right click on the button, it doesn&#39;t show. Any ideas how?<br /><br /> :D<br /><br />-- audioman</div>
    <div class="meta">Posted on 2005-04-14 07:03:52 by audioman</div>
   </div>
   <div class="post" id="post-158991">
    <div class="subject"><a href="#post-158991">Re: adding a right click popup menu in a button</a></div>
    <div class="body">Use SetWindowLong on the Button with the GWL_WNDPROC and pipe it&#39;s messages through another WindowProc where you catch the WM_RBUTTONDOWN message and show your PopupMenu.<br /><br />Check out Iczelions Tut about subclassing : http://win32assembly.online.fr/tut20.html</div>
    <div class="meta">Posted on 2005-04-14 07:24:49 by JimmyClif</div>
   </div>
   <div class="post" id="post-158996">
    <div class="subject"><a href="#post-158996">Re: adding a right click popup menu in a button</a></div>
    <div class="body">Hmm.. ok. Here&#39;s the problem now: Whenever i make a subclass of the button, it doesn&#39;t respond to the mouse events.<br />here&#39;s what i did: (pseudo code)<br /><pre><code><br />New Proc part:<br /><br />if msg = WM_RBUTTONDOWN<br />&nbsp;  show popmenu<br />else<br />&nbsp; invoke CallWindowProcA<br />endif<br /><br /></code></pre><br /><br />It doesn&#39;t respond to any mouse clicks, when i click on it, it doesn&#39;t push the button.. but when i dont subclass it, it works..<br /><br />--audioman<br /></div>
    <div class="meta">Posted on 2005-04-14 09:29:38 by audioman</div>
   </div>
   <div class="post" id="post-158997">
    <div class="subject"><a href="#post-158997">Re: adding a right click popup menu in a button</a></div>
    <div class="body">Attached code works.. <br /><br /> Added WM_COMMAND handler for both Menu &amp; Button as previous code had a little error </div>
    <div class="meta">Posted on 2005-04-14 09:48:29 by JimmyClif</div>
   </div>
   <div class="post" id="post-159024">
    <div class="subject"><a href="#post-159024">Re: adding a right click popup menu in a button</a></div>
    <div class="body">Your code works when I put it in a new file but when I applied it to my program, it still doesnt work. I think it doesn&#39;t work because of the mousehook.. any ideas?<br /><br />EDIT: Just tested it again, I removed the mousehook code, it still doesn&#39;t work. So, it musn&#39;t be the mousehook.<br />EDIT2: I got it now. The problem I included a pushad/popad in the new Procedure.<br /><br />Thanks for your help!<br /><br /> :D<br /><br />--audioman</div>
    <div class="meta">Posted on 2005-04-14 20:06:23 by audioman</div>
   </div>
   <div class="post" id="post-159026">
    <div class="subject"><a href="#post-159026">Re: adding a right click popup menu in a button</a></div>
    <div class="body">You&#39;re welcome.</div>
    <div class="meta">Posted on 2005-04-14 20:28:52 by JimmyClif</div>
   </div>
  </div>
 </body>
</html>