<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Subtraction - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4918" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4918">Subtraction</a></p>
   <div class="post" id="post-34480">
    <div class="subject"><a href="#post-34480">Subtraction</a></div>
    <div class="body">Could someone please tell me if you can Subtract a number using standard Reg. EAX and so on with ASM code.<br /><br />Example:<br /><br />Buffer1 has the number 1000 in it<br />Buffer2 is empty<br /><br />I just need to Subtract 200 from 1000 so i can put the balance of 800 in buffer2<br /><br />mov eax, Buffer1<br />mov edx, Buffer2<br />I have no idea!!!<br /><br />This is new to me and i have not seen Subtraction other that subing byte.  If it is possible can someone show an example or direct me to a Post that done it already.<br /><br />Will very much apreaciate it...</div>
    <div class="meta">Posted on 2002-04-22 14:24:26 by cmax</div>
   </div>
   <div class="post" id="post-34484">
    <div class="subject"><a href="#post-34484">Subtraction</a></div>
    <div class="body">:)<br />mov eax,Buffer1<br />sub eax,200<br />mov Buffer2,eax<br /><br />I assume that data in Buffers is DWORD size.<br />If it is word - replace eax with ax<br />if it is bytes replace eax with al</div>
    <div class="meta">Posted on 2002-04-22 14:39:54 by The Svin</div>
   </div>
   <div class="post" id="post-34485">
    <div class="subject"><a href="#post-34485">Subtraction</a></div>
    <div class="body">Are these ascii numbers?</div>
    <div class="meta">Posted on 2002-04-22 14:41:35 by bdjames</div>
   </div>
   <div class="post" id="post-34488">
    <div class="subject"><a href="#post-34488">Subtraction</a></div>
    <div class="body">No, After you have subbed you must convert dword value to ascii with something like:<br />invoke dwtoa, buffer2, addr buffer2<br />This is in masm32.inc adn masm32.lib.....Then buffer2 will have an ascii value. To sub ascii values they must first be converted to DWORD or something with:<br />invoke atodw,ADDR buffer2<br />Do you see? I had trouble to when I first started playing with asm. Everything is very manual.</div>
    <div class="meta">Posted on 2002-04-22 14:49:51 by emonk</div>
   </div>
   <div class="post" id="post-34502">
    <div class="subject"><a href="#post-34502">Subtraction</a></div>
    <div class="body"><div class="quote">Everything is very manual.</div><br /><br />That is the spirit of ASM!!! ;)</div>
    <div class="meta">Posted on 2002-04-22 16:02:53 by CodeLover</div>
   </div>
   <div class="post" id="post-34532">
    <div class="subject"><a href="#post-34532">Subtraction</a></div>
    <div class="body">The Svin<br /><br />Believe me. I wanted to mension you or bitRake Name but i know that you guys expect by Law for us to study HARD &amp; seriouly first.  So i backed down.  I uses to read your opt Wars tell sleep, but i just said it will kick in one day...And you know you when someone disturb Marvick, NaN or flonder we might mess up a Master Piece.I know what to do first.  There some preety heavy hitter questing now and they are not afraid.  I should be <strong>talking</strong> code and i hope it don't stop, but I am just proud of all  the work you guy have done for us all of this time. I got a LONg Lissssst. And i <strong>have</strong> learned a lot behind it. No more love letter. <br /><br />I got an handle on it now...Thanks to these words..Thats all i need to know but should have known :)<br /><br />CodeLover,  you are correct, specially when we make masm itself do for Windows what we want it to do.  The Right Way, the Coders Way...It want be long...</div>
    <div class="meta">Posted on 2002-04-22 17:51:34 by cmax</div>
   </div>
   <div class="post" id="post-34710">
    <div class="subject"><a href="#post-34710">I Could not Get it to work</a></div>
    <div class="body">I tried but i can get it to work.  I useing numbers that is all ready in BYTE size Buffer and want to put the sum in the Sum_Buffer1.  <br /><br />Could you help me out with this. I tried with DWORD Buffers but i know im not doing something right, all i get is #@K%. I would really like to know how to do it with DWORD and BYTE Buffers.  But i prefer BYTE Buffers.<br /><br />.data<br /><br />Sub1      db      '1000',0<br />Sub2      db      '2000',0<br /><br />.data?<br /><br />Sum_Buffer1      BYTE 5 dup(?)<br />Sum_Buffer2      BYTE 5 dup(?)<br /><br />.code<br /> Main:<br /><br /><br />mov eax, offset Sub1 <br />sub eax,200 <br />mov Sum_Buffer1, eax <br /><br />invoke    MessageBoxA, 0, offset Sum_Buffer1, 0, 0<br /><br />invoke    ExitProcess,0<br /><br />                end     Main</div>
    <div class="meta">Posted on 2002-04-23 18:30:25 by cmax</div>
   </div>
   <div class="post" id="post-34712">
    <div class="subject"><a href="#post-34712">Subtraction</a></div>
    <div class="body">First, realize that numbers come in several formats.<br /><br />Second, know that the processor works with numbers in binary form.<br /><br />Third, know that the assembler will save something like this:<br />buffer1  dd 1000<br /><br />in binary form.<br /><br />Fourth, know that the assembler will save something like this:<br />buffer1 db '1000'<br /><br />in ASCII form.<br /><br />Therefore:<br />Convert ascii form to binary using MASM32Lib's atodw.<br /><br />Have fun.<br /><br />If you don't have MASM32Lib.... Just post and you can learn how to make atodw yourself!</div>
    <div class="meta">Posted on 2002-04-23 18:48:40 by AmkG</div>
   </div>
   <div class="post" id="post-34716">
    <div class="subject"><a href="#post-34716">Thanks AmkG,</a></div>
    <div class="body">What do you think about this.... The above is just to give an idea of what i am trying to do...Edvidently it was not the kind of example to present.<br /><br />In my program I reading real numbers into a buffer at runtime.....1000 is in  a BYTE BUFFER...I use the message box to make sure it is there. so I am dealing with straight-up numbers and i want to click a button to subtract 200 from 1000 to get 800 in real number from in a seprate BYTE buffer.  It seem to me that it can be done easly, but i just don't know how to do it...</div>
    <div class="meta">Posted on 2002-04-23 19:06:39 by cmax</div>
   </div>
   <div class="post" id="post-34720">
    <div class="subject"><a href="#post-34720">Subtraction</a></div>
    <div class="body">cmax,<br /><pre><code><br />...<br />include masm32.inc<br />includelib masm32.lib<br />.data<br />Num1 dd 1000<br />.data?<br />Balance dd ?<br />SymbolicNumber db 12 dup &#40;?&#41;<br />.code<br />	mov eax,Num1<br />	sub eax,200<br />	mov eax,Balance<br />;dwtoa - convert number to decimal symbolic represantation<br />;params&#58; number, addr buffer for numeric symbolic string<br />	invoke dwtoa,eax,offset SymbolicNumber<br />	invoke MessageBox,0,offset offset SymbolicNumber,0,0<br />	call ExitProcess<br /><br /></code></pre></div>
    <div class="meta">Posted on 2002-04-23 19:11:01 by The Svin</div>
   </div>
   <div class="post" id="post-34739">
    <div class="subject"><a href="#post-34739">Subtraction</a></div>
    <div class="body">Svin, I used it and it only returned the number 0... So i put all the stuff under one file and it still returned the number 0 ... So i change stuff around a lot and it still returned 0... What do you think is missing.<br /><br />.386<br />.model flat,stdcall<br />option casemap:none<br />WinMain proto :DWORD,:DWORD,:DWORD,:SWORD<br /><br /><br />      include \masm32\include\windows.inc<br />      include \masm32\include\user32.inc<br />      include \masm32\include\kernel32.inc<br />      include \masm32\include\gdi32.inc<br />      include \masm32\include\masm32.inc<br /><br />      includelib \masm32\lib\user32.lib<br />      includelib \masm32\lib\kernel32.lib<br />      includelib \masm32\lib\gdi32.lib<br />      includelib \masm32\lib\masm32.lib<br /><br /><br />wsprintfA PROTO C :DWORD,:VARARG<br />wsprintf equ &lt;wsprintfA&gt;<br /><br /><br /><br />.data<br />Num1 dd 1000<br />;;;;Num1  db           &quot;1000&quot;,0<br /><br />s_FormatText1  db           &quot;%lu&quot;,0<br /><br />.data?<br />Balance dd ?<br />SymbolicNumber db 128 dup (?)<br /><br />   .code<br /><br />start:<br /><br />	mov eax,Num1<br />	sub eax,200<br />	mov eax, Balance<br /><br />          invoke wsprintf,offset SymbolicNumber, offset s_FormatText1,eax<br /><br />	invoke MessageBox,0, offset SymbolicNumber,0,0<br />	call ExitProcess<br />end start</div>
    <div class="meta">Posted on 2002-04-23 20:13:11 by cmax</div>
   </div>
   <div class="post" id="post-34748">
    <div class="subject"><a href="#post-34748">Subtraction</a></div>
    <div class="body"><div class="quote"><br />mov eax,Num1 <br />sub eax,200 <br /><strong>mov eax, Balance</strong><br /></div><br />You throw away your calculated number right after the calculation...<br />sleep more, take less drugs before programming ;)</div>
    <div class="meta">Posted on 2002-04-23 20:48:23 by f0dder</div>
   </div>
   <div class="post" id="post-34751">
    <div class="subject"><a href="#post-34751">Subtraction</a></div>
    <div class="body">PS:<br /><br />I need this to work on a 386 or 486 thats why i was afraid of floats but if it work on those basic machines I can deal with it. Anything that can make it work I Will be Happy...<br /><br />Thanks again</div>
    <div class="meta">Posted on 2002-04-23 20:54:16 by cmax</div>
   </div>
   <div class="post" id="post-34754">
    <div class="subject"><a href="#post-34754">Subtraction</a></div>
    <div class="body">floats wont work on a 386sx unless there's math emu software<br />running, but I doubt you'll find a 386 running windows. 486's<br />are capable of doing it (though it's not too much fun), and I doubt<br />you'll find a 486 without a coprocessor. But using floats for something<br />as simple as this would be making your task harder than it is.<br /><br />You just have to understand the difference between a &quot;number<br />in memory&quot; (as in a number your machine understands and can<br />operate on), and ASCII (or whatever other) representations of<br />this number. A string like &quot;1000&quot; is ASCII, and there's just no way<br />for your machine to directly work with this as a number. The ASCII<br />sequence &quot;1000&quot; would be seen by your computer as the number<br />0x30303031, which is clearly not what you want ;).</div>
    <div class="meta">Posted on 2002-04-23 21:04:07 by f0dder</div>
   </div>
   <div class="post" id="post-34780">
    <div class="subject"><a href="#post-34780">Subtraction</a></div>
    <div class="body"><div class="quote">Svin, I used it and it only returned the number 0... </div> <br />It is my fault  - I exchange number of params :)<br />f0dder's right it is needed to be<br />mov Balance,eax<br /><br />Do it this way<br /><pre><code><br />...<br />include masm32.inc<br />includelib masm32.lib<br />.data<br />Num1 dd 1000<br />.data?<br />Balance dd ?<br />SymbolicNumber db 12 dup &#40;?&#41;<br />.code<br />	mov eax,Num1<br />	sub eax,200<br />	mov Balance,eax<br />;dwtoa - convert number to decimal symbolic represantation<br />;params&#58; number, addr buffer for numeric symbolic string<br />	invoke dwtoa,eax,offset SymbolicNumber<br />	invoke MessageBox,0,offset offset SymbolicNumber,0,0<br />	call ExitProcess<br /><br /></code></pre></div>
    <div class="meta">Posted on 2002-04-24 00:07:06 by The Svin</div>
   </div>
   <div class="post" id="post-34813">
    <div class="subject"><a href="#post-34813">It Works!!!</a></div>
    <div class="body">But i could never be suprize.  I played with it all night.  Now i understand much more than i ever knew about DWORDS and BYTE.  You will never hear me  crying anymore about Windows.  There always a work around with ASM.   This explain it ALL... I hope you know you and many others here are <strong>GOD Gift to the World.</strong> <br /><br />Thank You</div>
    <div class="meta">Posted on 2002-04-24 06:25:06 by cmax</div>
   </div>
  </div>
 </body>
</html>