<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>More MOV encoding q's... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19182" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19182">More MOV encoding q's...</a></p>
   <div class="post" id="post-148307">
    <div class="subject"><a href="#post-148307">More MOV encoding q's...</a></div>
    <div class="body">Hey all.<br /><br />After a long hiatus I've come back to my assembler, and am (still) encoding MOV :)<br /><br />I'm up to the last section though, and after this I am sure encoding becomes much quicker (once I've got the hang of effective addressing, and I think I have!).<br /><br />My question: the Intel x86 manual says this:<br /><div class="quote">C7 /0	MOV r/m32,imm32	Move imm32 to r/m32</div><br />So, why isn't this type of instruction possible?<br /><pre><code><br />mov &#91;esp+ecx*2&#93;, 0FFh<br />mov &#91;esp+ecx*2&#93;, eax ; Assembles just fine.<br /></code></pre>MASM says &quot;invalid operands&quot; when I try to assemble it. But doesn't it fit the manual's description?<br /><br />Thanks.</div>
    <div class="meta">Posted on 2004-08-18 14:44:49 by </div>
   </div>
   <div class="post" id="post-148308">
    <div class="subject"><a href="#post-148308">More MOV encoding q's...</a></div>
    <div class="body">Should be:<br />mov <strong>byte ptr</strong> , 0FFh<br /><br />The problem is not in the encoding but in the syntax MASM expects you to use. :)</div>
    <div class="meta">Posted on 2004-08-18 14:47:28 by QvasiModo</div>
   </div>
   <div class="post" id="post-148310">
    <div class="subject"><a href="#post-148310">More MOV encoding q's...</a></div>
    <div class="body">It's also ambiguous.<br /><br />Which does it mean?<br /><br />mov byte ptr ,0ffh<br />mov word ptr ,0ffh<br />mov dword ptr ,0ffh<br /><br />They are all valid.</div>
    <div class="meta">Posted on 2004-08-18 14:54:34 by tenkey</div>
   </div>
   <div class="post" id="post-148311">
    <div class="subject"><a href="#post-148311">More MOV encoding q's...</a></div>
    <div class="body">Lol.. thanks. A simple oversight of course :)<br /><br />tenkey: What would be the difference between the types in terms of encoding? The ModR/M byte would hold a different R/M field (DispByte or DispDWord)?</div>
    <div class="meta">Posted on 2004-08-18 14:55:47 by </div>
   </div>
   <div class="post" id="post-148313">
    <div class="subject"><a href="#post-148313">More MOV encoding q's...</a></div>
    <div class="body">Nevermind, a little inspection of disassembled MASM reveals all. Aw man, just when I thought it was getting easy - now I have to look at prefix bytes.. :)</div>
    <div class="meta">Posted on 2004-08-18 15:03:00 by </div>
   </div>
   <div class="post" id="post-148356">
    <div class="subject"><a href="#post-148356">More MOV encoding q's...</a></div>
    <div class="body">i can also recommend using hiew while dealing with assembling opcodes and such (or another tool that allows you to assemble instructions quickly). you can check and compare things very fast in this way.</div>
    <div class="meta">Posted on 2004-08-19 03:39:42 by Mbee</div>
   </div>
  </div>
 </body>
</html>