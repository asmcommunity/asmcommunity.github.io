<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Weird Math - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15360" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=15360">Weird Math</a></p>
   <div class="post" id="post-119357">
    <div class="subject"><a href="#post-119357">Weird Math</a></div>
    <div class="body">Hello im working on debugging a program that has a weird error and i think it might be compiler error..<br /><br /><pre><code><br />&#58;004280CA 8B4114                  mov eax, dword ptr &#91;ecx+14&#93;<br />&#58;004280CD 0FAF450C                imul eax, dword ptr &#91;ebp+0C&#93;<br />&#58;004280D1 99                      cdq<br />&#58;004280D2 F77D10                  idiv &#91;ebp+10&#93;<br /></code></pre><br /><br />what this code is doing is calculating what part of a PCX file to display on the screen<br /><br />From what I understand is that when you do IMUL with two operand it no longer does signed multiplication...<br /><br />So why would the progra then convert a non signed value into a QWORD then use signed idiv <br /><br />also at the IDIV this is were the error happens... <br /><br />my question is if i remove the CDQ and change the idiv to div should it no longer error.. becuase when i removed it fully it stopper erroring but didnt now show the correct image section on the screen..</div>
    <div class="meta">Posted on 2003-09-25 03:53:06 by devilsclaw</div>
   </div>
   <div class="post" id="post-119358">
    <div class="subject"><a href="#post-119358">Re: Weird Math</a></div>
    <div class="body"><div class="quote"><br />From what I understand is that when you do IMUL with two operand it no longer does signed multiplication...</div><br /><br />No, this is not true. When you use imul with 2 or 3 operands it can produce only 32 bit result (signed) and can be overflowed. Maybe this is the problem with your application. IDIV dosn't behave this way. When you change idiv with div the result will be different.</div>
    <div class="meta">Posted on 2003-09-25 03:58:45 by JohnFound</div>
   </div>
   <div class="post" id="post-119365">
    <div class="subject"><a href="#post-119365">Weird Math</a></div>
    <div class="body">i decided to test my idea out and the idiv and the div visually show the right thing...<br /><br />so i think they were using IMUL on none signed and then converted a non signed to a QWORD then idiv<br /><br />this would have cleared the edx which i had to do to make it work but it seems thats all they used it for..</div>
    <div class="meta">Posted on 2003-09-25 04:13:50 by devilsclaw</div>
   </div>
  </div>
 </body>
</html>