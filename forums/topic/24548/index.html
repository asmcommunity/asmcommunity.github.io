<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Console Calculator - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=24548" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=24548">Console Calculator</a></p>
   <div class="post" id="post-179291">
    <div class="subject"><a href="#post-179291">Console Calculator</a></div>
    <div class="body"><pre><code>program ConCalculator;<br /><br />#include(&quot;stdlib.hhf&quot;);<br /><br />static<br /><br />	LabelPointer:dword := &amp;Start; // Pointer to the &#39;Start&#39; label.<br /><br />begin ConCalculator;<br />	<br />	Start: // Label for the start of the program.<br />	<br />	stdout.put(&quot;Console Calculator&quot;, nl, nl); // Print out text.<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	GetValOne: // Label for next function that gets first value from user input.<br />	<br />	stdin.readLn(); // Let the user give their input.<br />	<br />	stdin.geti32(); // Store a 32bit integer in EAX.<br />	<br />	push(eax); // Store the value of EAX on the stack.<br />	<br />	xor(eax,eax); // Clear EAX of any data.<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	GetOperation: // Label for next function that gets a mathematical operation from user input.<br />	<br />	stdin.readLn(); // Let the user give their input.<br />	<br />	stdin.getc(); // Store a character in AX.<br />	<br />	mov(ax,bx); // Move the operation data from AX into BX.<br />	<br />	xor(ax,ax); // Clear EAX of any data.<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	GetValTwo: // Label for next function that gets second value from user input.<br />	<br />	stdin.readLn(); // Let the user give their input.<br />	<br />	stdin.geti32(); // Store a 32bit integer in EAX.<br />	<br />	mov(eax,ecx); // Move the second value into ECX.<br />	<br />	xor(eax,eax); // Clear EAX of any data.<br />	<br />	pop(eax); // Get first value off stack and back into EAX.<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	if(bx = &#39;*&#39;) then // Check if the operator was for multiplication.<br />	<br />		stdout.puti32(eax); // Print out the first value.<br />		stdout.put(&quot;*&quot;); // Print out symbol for multiplication.<br />		stdout.puti32(ecx); // Print out the second value.<br />		stdout.put(&quot;=&quot;); // Print out the equal sign.<br />		<br />		mul(ecx); // Do the multiplication. (EAX * ECX)<br />		<br />		stdout.puti32(eax); // Print out the product.<br />		<br />	endif;<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	if(bx = &#39;/&#39;) then // Check if the operator was for division. To Do: Fix integer overflow error.<br />	<br />		div(cl,ax); // Do the division. (AX / CL)<br />		<br />		stdout.puti8(al); // Print out the quotient.<br />		<br />		if(ah != 0) then // Check if AH contains anything.<br />		<br />		stdout.put(&#39;.&#39;); // Print out the decimal.<br />		<br />		stdout.puti8(ah);&nbsp; // Print out the remainder.<br />		<br />		endif;<br /><br />	endif;<br /><br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />		<br />	if(bx = &#39;+&#39;) then // Check if the operator was for addition.<br />	<br />		add(ecx, eax); // Do the addition. (ECX + EAX)<br />		<br />		stdout.puti32(eax); // Print out the sum.<br /><br />	endif;<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	if(bx = &#39;-&#39;) then // Check if the operator was for subtraction.<br />	<br />		sub(ecx,eax); // Do the subtraction. (ECX - EAX)<br />		<br />		stdout.puti32(eax); // Print out the difference.<br /><br />	endif;<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	if(bx = &#39;^&#39;) then // To Do<br />		<br />		// To Do<br />		<br />	endif;<br />	<br />	/////////////////////////////////////////////////////////////////////////////////////////////////<br />	<br />	LoopCheck:<br />	<br />	stdin.readLn(); // Let the user give their input.<br />	<br />	stdin.getc(); // Store a character in AX.<br />	<br />	if(ax = &#39;c&#39;) then // Check if the character was &#39;c&#39;.<br />	<br />		jmp(LabelPointer); // Jump back to the beginning and run the program again.<br />	<br />	endif;<br />	<br />	<br />end ConCalculator;</code></pre><br /><br />Here&#39;s a small console calculator I&#39;ve been working on. Nothing big, just though I&#39;d share it. Still have to fix a lot of things and add support for multiple operations. (Also, yes, I comment everything. No matter how trivial it may be. ;))<br /><br />- Steve</div>
    <div class="meta">Posted on 2006-04-08 00:19:43 by ~Steve~</div>
   </div>
  </div>
 </body>
</html>