<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Skeleton for WIN32 asm routine - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4657" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4657">Skeleton for WIN32 asm routine</a></p>
   <div class="post" id="post-32710">
    <div class="subject"><a href="#post-32710">Skeleton for WIN32 asm routine</a></div>
    <div class="body">I need an example/skeleton for ASM32 routine for WIN32. I need to add some functions in C written in asm that comply with WIN32. <br />I don't know how to pass/retrieve params from asm routines.<br /><br />Anybody?</div>
    <div class="meta">Posted on 2002-04-07 10:05:05 by DIGITALMECHINIC</div>
   </div>
   <div class="post" id="post-32736">
    <div class="subject"><a href="#post-32736">Skeleton for WIN32 asm routine</a></div>
    <div class="body">As long as the calling convention of the assembly function is fully compatable with any of those supported by the C compiler you use to call it then it should be trivial.<br /><br />The standard calling convention in windows 32bit programming is the STDCALL convention (whose details should be dealt with by MASM, but particulars can be read from many locations and a quick <a target="_blank" href="http://www.google.com">search</a> should get you more information than I can tell you).<br /><br />You could also define external variables using the <em>extern</em> keyword.<br /><br />This covers the passing of data to the assembly routine, as for return data, this is passed in the <strong>eax</strong> register, or a pointer to it is contained within <strong>eax</strong> when appropriate.<br /><br />The only other way to modify program data from within a function is to do so via pointers to that data, in which case the format of the data must be known as the (default) type checking in assembly programming is much weaker.<br /><br />If you post an attempt, we could correct you, but considering there are so many options available to you as a programmer it is difficult to answer such a broad ranging question.<br />One solution will not necessarily provide you with an answer that satisfies your problem.<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-04-07 13:46:52 by Mirno</div>
   </div>
   <div class="post" id="post-32737">
    <div class="subject"><a href="#post-32737">Have you?</a></div>
    <div class="body">Please read Iczelion's Tutorials they explain such matters in great details, much better than i am able to do :)<br /><br />Basically most Win32 API use STDCALL  convention but wsprintf function is the notably exception that uses C Calling conventions<br /><br />you can use API functions like this:<br /><br />for MASM:<br />invoke MyAPIfunctionName,param1,param2,param3 ....<br /><br />or for TASM:<br />call  MyAPIfunctionName,param1,param2,param3 ....<br /><br />you get API function Names and parameters count/names from any standard API help or even better the MSDN</div>
    <div class="meta">Posted on 2002-04-07 13:47:48 by BogdanOntanu</div>
   </div>
  </div>
 </body>
</html>