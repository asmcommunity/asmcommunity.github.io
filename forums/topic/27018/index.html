<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>how to code a waterdrop effect in Win32asm - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27018" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27018">how to code a waterdrop effect in Win32asm</a></p>
   <div class="post" id="post-194196">
    <div class="subject"><a href="#post-194196">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">i've seen many sources on how to code one in DOS.
but none how to code one in win32asm.

what's the best way to do this? i want to have the water drop effects on a DC. should i use setpixel(v) and getpixel to get this done? any ideas?</div>
    <div class="meta">Posted on 2001-02-25 07:32:00 by Threepwood</div>
   </div>
   <div class="post" id="post-194197">
    <div class="subject"><a href="#post-194197">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">NO
DO NOT USE SetPixelV...its too much slow...

Do it like this:
make the effect into an system memory array
get the pixels from a DC bitmap into an array
apply the effect on top of the pixels
write the pixels back to the DC

Alternatively you can use DirectDraw to directly modify pixels on a system memory surface...like i did in my RTS Game Intro screen</div>
    <div class="meta">Posted on 2001-02-25 12:02:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-194198">
    <div class="subject"><a href="#post-194198">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">hi
BogdanOntanu:

u said u wrote
RTS Game Intro screen

can u give me the source for using the direct draw??? 
if u can please send it to my email</div>
    <div class="meta">Posted on 2001-02-25 12:47:00 by eko</div>
   </div>
   <div class="post" id="post-194199">
    <div class="subject"><a href="#post-194199">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">Seems alot of people are using the pixel plotting functions.
Way to slow, use Getbitmapbits and SetBimapbits functions to
manipulate the data, then Bitblt it to the window.

If Using DirectDraw then learn GetlockedArray Method.

Look at the other post DirectDraw for a wealth of websites
to get started.:)</div>
    <div class="meta">Posted on 2001-02-25 15:07:00 by JDog</div>
   </div>
   <div class="post" id="post-194200">
    <div class="subject"><a href="#post-194200">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">Hi eko

Nope i cant give you the source code...its too much combined with the game code itself...getin it out...will be a pain in the ass...

But i will write some demo/tutorials about fire/watter routines that will be open source and free of course (others have asked it)...so please be patient and wait a little...

If you cant wait,..well i dont think that converting the old DOS style examples on the HORNET archive can be very difficult...

Just DONT go for new DX8 Methods they are ...so slow...also..

Just get a IDirectDrawSurface4 or so interface (DX6 or DX7 are still there inside DX8 :) ) and use the Lock() and Unlock() methods to get a pointer to that pixels...

PS..take care at lPitch...and..and...yeah...make them SYSTEM MEMORY surfaces ...NO VIDEO Memory...because reads from VIDEO MEMORY are damn slow (100x slower :( even now i wonder why...)

also take some time to tweak the parameters...fire and watter routines change looks a lot on parameters :D


the rest should be a "piece of cake"</div>
    <div class="meta">Posted on 2001-02-25 17:31:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-194201">
    <div class="subject"><a href="#post-194201">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">Hello Treepwood (Guybrush, is that you? :D ),

returning from LeChuck to ASM and programming I have to say that I am the "owner" of a raindrop source. It is written in Delphi *yack* and uses DirectX 6 (I think) but if you are good in ASM and know Delphi (or TP, as Delphi is based on/developed from TP) then you will be able to translate it.

Download

Normally I don't link directly to files on my server but now I think that it is okay.

HTH

Stefan</div>
    <div class="meta">Posted on 2001-02-25 18:48:00 by Stefan Krause</div>
   </div>
   <div class="post" id="post-194202">
    <div class="subject"><a href="#post-194202">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">yes, after i defeated LeChuck i wanted to be a win32asm coder :D

thanks for your source, i think it can help me alot.

i'm also looking forward for BogdanOntanu's demo/source/tuts about fire/water effect..

thanks for the replies mateys :)</div>
    <div class="meta">Posted on 2001-02-25 20:40:00 by Threepwood</div>
   </div>
   <div class="post" id="post-194203">
    <div class="subject"><a href="#post-194203">how to code a waterdrop effect in Win32asm</a></div>
    <div class="body">Go and download the winpool.asm file from Bizarre Creations at:

http://bizarrecreations.webjump.com

It contains MMX-optimized code to implement good old water-drops effect!!</div>
    <div class="meta">Posted on 2001-02-27 06:25:00 by Tiago Sanches</div>
   </div>
  </div>
 </body>
</html>