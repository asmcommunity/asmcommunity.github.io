<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Mpeg - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=1170" />
    <link rel="next" href="../?id=1170&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=1170">Mpeg</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=1170&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=1170&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="1170" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=1170&amp;page=2">&gt;</a><a href="../?id=1170&amp;page=2">&raquo;</a></form>   <div class="post" id="post-7688">
    <div class="subject"><a href="#post-7688">Mpeg</a></div>
    <div class="body">Hi,<br /><br />this is not a question. I simply want to show (to whom interested in) my pure assembly MPEG1/MPEG2/VOB Player without any DirectX, MCI, ActiveX and other shit. Just parse, decode and play <br /><br />My wish: if you want to waste some time with playing MPEGs just do it and tell me if you find it usefull. Any comments highly appreciated.<br /><br />Tnanxs in advance<br /><br />Bye Miracle <br />(maybe a good topic for the crusades ;-)</div>
    <div class="meta">Posted on 2001-09-21 11:14:51 by miracle</div>
   </div>
   <div class="post" id="post-7693">
    <div class="subject"><a href="#post-7693">Mpeg</a></div>
    <div class="body">Pretty cool I must say, but you shouldn't use peekmessage, but instead getmessage and a timerproc so you don't waste so much CPU time, but that's just my opinion.</div>
    <div class="meta">Posted on 2001-09-21 14:58:40 by Kenny</div>
   </div>
   <div class="post" id="post-7771">
    <div class="subject"><a href="#post-7771">Mpeg</a></div>
    <div class="body">i must agree with kenny , it is pertty cool. but it can br  cooler if you do it open source.  <br />or just keep working on that <br />(add some  functions)<br /><br /><br />bye<br /><br />eko</div>
    <div class="meta">Posted on 2001-09-22 14:02:02 by eko</div>
   </div>
   <div class="post" id="post-7778">
    <div class="subject"><a href="#post-7778">Mpeg</a></div>
    <div class="body">thats well good.<br />i was expecting no sound or dodgy framerate but thats great!!<br />keep up the good work!<br /><br />skud.</div>
    <div class="meta">Posted on 2001-09-22 17:07:43 by skud</div>
   </div>
   <div class="post" id="post-7790">
    <div class="subject"><a href="#post-7790">Mpeg</a></div>
    <div class="body">Since you said you use no ActiveX or anything, I was expecting crap. But its actually really cool. Its only missing the normal stuff (play, stop, etc)</div>
    <div class="meta">Posted on 2001-09-22 20:03:41 by ChimpFace9000</div>
   </div>
   <div class="post" id="post-7795">
    <div class="subject"><a href="#post-7795">Mpeg</a></div>
    <div class="body">Try to open multiple instances of this player vs. multiple instances of another?</div>
    <div class="meta">Posted on 2001-09-22 21:55:41 by bitRAKE</div>
   </div>
   <div class="post" id="post-7811">
    <div class="subject"><a href="#post-7811">Mpeg</a></div>
    <div class="body">Pretty impresive indeed, but i have to act as a critic for a moment.  I found it to be a bit choppy on a 800 AMD Durron with 256MB ram, and a 32Mb G-Force 2 card.   I think it has alot to do with the loop discussion earlier by Kenny.  As it was very periodic when it 'stalled' between frames.. (about every 3 seconds).  As well ending a MPEG hangs on the same frames, repeating them over and over, while playing the normal back ground music frames over and over.<br /><br /><br />I dont what to rub you the wrong way here.  I think this is quite impressive and a bit of a triumph for 32 ASM coding, but i thought i would give back constructive feedback as i have seen it.<br /><br />Keep up the good work..<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2001-09-23 02:04:16 by NaN</div>
   </div>
   <div class="post" id="post-7838">
    <div class="subject"><a href="#post-7838">Mpeg</a></div>
    <div class="body">Heh... no fullscreen, resizing is messed up (but not disabled), cpu<br />usage is 100%, and no playback controls. I think I'll stick with media<br />player (good old mplayer2.exe) for some time yet.<br /><br />But it looks pretty interesting, miracle. Keep working on it and it will<br />probably end up as something good (I supposed the 100% CPU<br />usage is because of PeekMessage vs. GetMessage).<br /><br />As for &quot;without any DirectX, MCI, ActiveX and other shit&quot;... well, it<br />would be nice to support DirectDraw so you can go fullscreen, and<br />take advantage of nice hardware features such as filtered stretching.</div>
    <div class="meta">Posted on 2001-09-23 10:46:37 by f0dder</div>
   </div>
   <div class="post" id="post-7847">
    <div class="subject"><a href="#post-7847">Mpeg</a></div>
    <div class="body">could you post the source? i wouldnt even have any idea where to start if i wanted to program something such as an mpeg player or a wav / mp3 whatever player.<br /><br />and i just noticed you said VOB player... arent they DVD's?<br /><br />skud.</div>
    <div class="meta">Posted on 2001-09-23 14:40:15 by skud</div>
   </div>
   <div class="post" id="post-7848">
    <div class="subject"><a href="#post-7848">Mpeg</a></div>
    <div class="body">You know, this could make a great tutorial.</div>
    <div class="meta">Posted on 2001-09-23 15:41:14 by ChimpFace9000</div>
   </div>
   <div class="post" id="post-7894">
    <div class="subject"><a href="#post-7894">Mpeg</a></div>
    <div class="body">Hi to all,<br /><br />thanxs for all that interestings comments.<br />Some things want to say now:<br /><br />Kenny (and others): The reason why I always consumpt (waste) 100% cpu time is that the timing for the video display process is far from good.<br />I tried many things. The actual solution is as the follows. I do timeGetTime(), pares stream, decode picture, display picture, add the frame delay to the time got formerly, if this process was faster than the frame rate I loop over timeGetTime() until the time is right to continue. Pretty ugly - I see. Maybe one of you have more ideas.<br /><br />eko: I am not that familar with OPEN Source. I dont have a problem to public the sources now, but I will use this code for an own  'closed' commercial project too. Is there a conflict with any licence term. Do I neeed my own one?<br /><br />f0dder: Yes, the DDraw version is already finished. IT's much faster because the gfx-card can do the YCbCr2RGB conversion. A fullscreen blit also is possible easily, but there are man restrictions (multiple of 32 in width etc.) I keep work on it.<br /><br />Skud: A VOB-file (from a DVD) is the same like a MPEG2 file except the sound (maybe AC3) is not stored as a regular sound stream. Normally as a private stream because AC3 or dolby sound is not from MPEG.<br /><br />NaN: Know this problem of playing the last frames in an endless loop. Will fix this soon.<br /><br />ChimpFace9000: I agree. Maybe the time will come:cool: <br /><br />Thanxs, Bye Miracle</div>
    <div class="meta">Posted on 2001-09-24 04:00:58 by miracle</div>
   </div>
   <div class="post" id="post-7901">
    <div class="subject"><a href="#post-7901">Mpeg</a></div>
    <div class="body">Miracle, there are a few ways to go OpenSource. You need to pick<br />one where other people don't take advantage of you and you work :).<br />The GNU GPL and LGPL licenses are probably the most widely known.<br />The GPL basically means that you, and anybody else, can use your<br />source for commercial work, *but*... everybody will have to supply<br />the full source code of their app. The LPGL is less restrictive, it would<br />eg allow the use of your mpeg decoding routines, and require anybody<br />who makes modifications to your routines to supply source, but the<br />rest of the app can be closed-source. Or at least that's how I understood<br />the licenses.<br /><br />There are other licenses available as well. You could try snooping<br />around on <a target="_blank" href="www.fsf.org">www.fsf.org</a> and <a target="_blank" href="www.opensource.org.">www.opensource.org.</a></div>
    <div class="meta">Posted on 2001-09-24 07:11:15 by f0dder</div>
   </div>
   <div class="post" id="post-7908">
    <div class="subject"><a href="#post-7908">Mpeg</a></div>
    <div class="body">Hi miracle, wonderful program. <br /><br />Regarding the loop, one quick and dirty fix is to stick an invoke Sleep,1 into that GetTickCount loop. You'd be surprised how helpful it would be.<br /><br />Second regarding the source. If you're going to make a comercial app then it would be safer to stay away from the liscences unless you fully understand them.<br /><br />What if you released the source but copyright it as yours and provide absolutly no premission for the source to be used by anyone, for any reason.<br /><br />That would give you come back if someone tried to rob it and screw you but it would also allow you also to turn a blind eye on genuine people here who just want to read the source to learn.<br /><br />P.S. If you made it work with DivX you have a real winner.</div>
    <div class="meta">Posted on 2001-09-24 07:59:24 by EÃ³in</div>
   </div>
   <div class="post" id="post-7911">
    <div class="subject"><a href="#post-7911">Mpeg</a></div>
    <div class="body">To make it work with DivX, it would probably be insane to use anything<br />but the codecs :). Otherwise, if you feel up to the task of an asm<br />implementation of DivX decoding... contact the DivX team and give<br />them a helping hand, and *everybody* will benefit :].</div>
    <div class="meta">Posted on 2001-09-24 08:08:53 by f0dder</div>
   </div>
   <div class="post" id="post-7912">
    <div class="subject"><a href="#post-7912">Mpeg</a></div>
    <div class="body">Hi, <br /><br />will test Sleep(1) and give feedback if it's exact enough.<br /><br />Regarding Open Source:<br />If anyone is interested in, send an email <br />to mailto:Info@dp4.de and I will send you <br />the sources.<br /><br />Bye Miracle</div>
    <div class="meta">Posted on 2001-09-24 08:27:54 by miracle</div>
   </div>
   <div class="post" id="post-7913">
    <div class="subject"><a href="#post-7913">Mpeg</a></div>
    <div class="body">Sleep is NOT very accurate. On 9x, I think it's precision is around 53ms.<br />A lot better on NT/2k, but still not enough. It's ok to make a thread<br />sleep a little, though.</div>
    <div class="meta">Posted on 2001-09-24 08:48:37 by f0dder</div>
   </div>
   <div class="post" id="post-7916">
    <div class="subject"><a href="#post-7916">Mpeg</a></div>
    <div class="body">Which is why once again Getmessage is better...<br /><br />I almost always use it and a timer now because I don't want 100% CPU usage on stuff I make :)</div>
    <div class="meta">Posted on 2001-09-24 11:18:15 by Kenny</div>
   </div>
   <div class="post" id="post-7954">
    <div class="subject"><a href="#post-7954">Mpeg</a></div>
    <div class="body">Very, very impressive!</div>
    <div class="meta">Posted on 2001-09-24 17:52:03 by comrade</div>
   </div>
   <div class="post" id="post-8009">
    <div class="subject"><a href="#post-8009">Mpeg</a></div>
    <div class="body">Kenny, the problem is that he needs to maintain a specific framerate. I wasn't aware that sleep is so inaccurate on win9x but I do know that timers are as well.<br /><br />You're limited to a max frame rate of about 18 which is grand if thats the most you'll need, but for this program I'm not sure it is.</div>
    <div class="meta">Posted on 2001-09-25 12:49:26 by EÃ³in</div>
   </div>
   <div class="post" id="post-8010">
    <div class="subject"><a href="#post-8010">Mpeg</a></div>
    <div class="body">I'm not sure it will help, but I have this idea that windows biases<br />&quot;processor usage&quot; *very* much on your message loop... after all,<br />it says a program is hung if it hasn't called GetMessage or PeekMessage<br />for some time.<br /><br />So, try setting up an additional thread for the timer work, this might<br />change how windows views the processor usage :). For syncing,<br />if necessary, use a critical section, as they are pretty efficient... when<br />a thread doesn't need to &quot;block&quot; on it (ie, the CS is not already &quot;taken&quot;),<br />the code paths are entirely user-space, unlike the various other<br />synchronization objects.</div>
    <div class="meta">Posted on 2001-09-25 12:59:19 by f0dder</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=1170&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=1170&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="1170" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=1170&amp;page=2">&gt;</a><a href="../?id=1170&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>