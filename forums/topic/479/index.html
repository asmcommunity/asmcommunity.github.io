<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Spasm users, a question or two please... And some other stuf - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=479" />
    <link rel="next" href="../?id=479&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=479">Spasm users, a question or two please... And some other stuf</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=479&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=479&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="479" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=479&amp;page=2">&gt;</a><a href="../?id=479&amp;page=2">&raquo;</a></form>   <div class="post" id="post-2813">
    <div class="subject"><a href="#post-2813">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">I've looked a betovs site, but couldn't find many example sources(didn't very hard either).  I seem to remember reading once that someone converted Icz's tuts to Spasm.  If so, a link please?<br /><br />I read that an include directive has not yet been implemented.  Can Spasm handle multi-file programming?  If so, does it do it better than MASM*.<br /><br />*I was asm_happy on the old board.  Due to my inability to get PUBLIC,EXTERN,EXTERNDEF working properly in MASM, I have ceased using assembly language, until I find an sensible alternative.<br /><br />I'm not sure if this is a crazy idea, but since assembly programmers like control, it would seem logical to make all data, proc's etc. available across all included files.  I don't think assembly people think about data-protection quite as much as C++ programers do.  Basically I'm saying make everything global.</div>
    <div class="meta">Posted on 2001-08-02 20:20:48 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-2815">
    <div class="subject"><a href="#post-2815">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">asm_happy,<br /><br />for info related to Spasm, you will have to ask Betov, he posts on this forum reasonably regularly so he should be able to answer your questions about it.<br /><br />MASM questions are another matter. There is no need to make everything global in MASM, it handles both LOCAL and GLOBAL data with no problems, it is fully multimodular in the way it works, it builds Microsoft format library modules with no problems at all.<br /><br />The syntax for EXTERNDEF is straight forward enough once you get used to it.<br /><br />pr2 equ &lt;typedef PROTO :DWORD,:DWORD&gt;<br /><br />externdef _imp__LoadIconA@8:PTR pr2   ; define function as external<br />LoadIcon equ &lt;_imp__LoadIconA@8&gt;      ; normalise the name<br /><br />Use &quot;invoke&quot; with the function name.<br /><br />If you have any further questions with MASM, ask in the forum, Betov should be able to help you with Spasm.<br /><br />Regards,<br /><br /><a href="mailto:hutch@pbq.com.au">hutch@pbq.com.au</a></div>
    <div class="meta">Posted on 2001-08-02 20:36:20 by hutch--</div>
   </div>
   <div class="post" id="post-2818">
    <div class="subject"><a href="#post-2818">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Scrolling down to the middle of the page you will find many examples in SpASM syntax.  Most of the downloads in the section titled 'downloads' are such examples as you seek. :)</div>
    <div class="meta">Posted on 2001-08-02 21:02:20 by bitRAKE</div>
   </div>
   <div class="post" id="post-2851">
    <div class="subject"><a href="#post-2851">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">As BitRake says.<br /><br />I recommand you, in order: Beginners.zip, TDwin32Tuts, Iczelion.zip.<br />Most of all, read the Manual and *please* forget what you have <br />learned with MASM.<br /><br />&quot;Include&quot; is no use in SpAsm. The Editor have particular features for<br />moving inside uge mono-files.<br /><br />For PUBLIC,EXTERN,EXTERNDEF and other red tape, SpAsm have none at<br />all and will never have any. These key words are usefull when<br />producing .obj. SpAsm outputs PEs (EXE, DLL, SCR).<br /><br />Data-protection is good for programmers groups. I have never seen <br />much reason to do this in Asm. Some Asm programmers do it (Iczelion <br />is in this opinion), because they want to avoid namings conflicts.<br />Naming conflicts can never happend in SpAsm because all symbols<br />have to be unique. If you double declare a symbol, you get an error<br />message, and, because of the building speed and friendly source error<br />pointing, this is really not a problem. Another point is that true<br />meaningless local Labels (A86 style) *can* be redefine as much as <br />wished. So you will not have to find so much names for short scope <br />local Labels.Pseudo Local symbols (TASM style) do also exist which <br />may help a lot, too, for this, when writing reusable Procs.<br /><br />For the programming style choice (this is to say for the choice of<br />what Macros set), you might begin with Base3B.exe. It is very close <br />to what you may have seen.<br /><br />And, i beg you, report bugs. I can't improve the beast without bugs<br />reports, because i do always the same things the same way, and most<br />bugs are seen when performing unregular actions. Any beginner will<br />be hundread times better than me for this ;)<br /><br />(V.3.01 released in the comming days).<br /><br /><br />betov.</div>
    <div class="meta">Posted on 2001-08-03 02:00:24 by Betov</div>
   </div>
   <div class="post" id="post-2871">
    <div class="subject"><a href="#post-2871">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Modular programming is possible with MASM. Here is an example with two modules. The first is the main module. The second modules defines a function that is called by the main module. The function simply display a message box &quot;In module 1&quot;. There is also a Makefile to compile the &quot;project&quot;.</div>
    <div class="meta">Posted on 2001-08-03 07:05:27 by Dr. Manhattan</div>
   </div>
   <div class="post" id="post-2884">
    <div class="subject"><a href="#post-2884">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Nobody was knowing this, Karim. Thanks a lot for the great<br />enlightement. If you have other such deep knowledge, do not<br />hesitate to make us know. I took a look at the sources, because<br />i couldn't believe it, and... found zero error inside. Really<br />good.<br /><br />Bye, thanks, betov.</div>
    <div class="meta">Posted on 2001-08-03 10:09:52 by Betov</div>
   </div>
   <div class="post" id="post-2927">
    <div class="subject"><a href="#post-2927">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Thanks for the replys from both sides.  EXTERN, PUBLIC, etc. are kinda legacy from when a large program was 20k lines and compileing the entire program on your 286 took awhile.  These days I would not worry about it until &gt;100k.  Compiling only the changed obj files and linking with the unchanged probaly saved some time back then. <br /><br /><br />All I really want is a way to program with multiple files(for my ease of use), but not have to tell the compiler/linker where every thing is(that is defined in another file).<br /><br /><br />karim, that for that code, seems to make things much simpler.  I will still check out Spasm.</div>
    <div class="meta">Posted on 2001-08-03 18:22:53 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-2934">
    <div class="subject"><a href="#post-2934">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">I don't get the EXTERN and EXTERNDEF things.<br /><br />I decided to try and recompile a assembly output listing of a C++ app today, and it's called &quot;Vertices&quot; and comes with the DirectX8 SDK.<br /><br />So anyways, I got the asm file from compiling with listing and then I got the listing.inc file from Vstudio dir, but when I try and compile with MASM, I get unresolved external errors. Can someone explain to me what the heck that means? I only wanted to just play arround with the program using asm, so when I port it, I will know what the heck I'm doing :)<br /><br />Thanks<br />Kenny</div>
    <div class="meta">Posted on 2001-08-03 21:09:34 by Kenny</div>
   </div>
   <div class="post" id="post-2935">
    <div class="subject"><a href="#post-2935">oops</a></div>
    <div class="body">I just looked though the Game Progamming forum, and got my questions answered, but I still don't get the EXTERN thing, and the topic from Hutch (the one about the new utility that uses externdef) just made things more confusing.<br /><br />If you can help at all, I'd apprecieate it.</div>
    <div class="meta">Posted on 2001-08-03 21:44:43 by Kenny</div>
   </div>
   <div class="post" id="post-2947">
    <div class="subject"><a href="#post-2947">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Kenny,<br /><br />Unresolved externals simply mean that the linker cannot find the functions you are calling in the libraries that are used. You could try the utility I posted on each library that it calls or use the l2inca.exe that comes with masm32 which will make the prototypes in a more conventional way.<br /><br />I don't know what shape a listing is in from a C compiler or whether it can be set up to build in MASM but I would be surprised if it will build properly without some drastic editing. The bare code may be OK but you have to get all of the equates it uses and the prototypes as well.<br /><br />Regards,<br /><br /><a href="mailto:hutch@pbq.com.au">hutch@pbq.com.au</a></div>
    <div class="meta">Posted on 2001-08-04 03:12:11 by hutch--</div>
   </div>
   <div class="post" id="post-2956">
    <div class="subject"><a href="#post-2956">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">CoffeeDrinker, I disagree with you :). Having all data public eveywhere<br />is a bad idea, imho. You might say that &quot;asm programmers want<br />control&quot;, but it's too easy to end up writing spaghetti code if all<br />your variables are public. At least this holds true for me. Whether<br />I'm writing in C, asm, or whatever other language.<br /><br />Probably *the* most important thing when programming a (larger)<br />application is to do design beforehand, and get the design right.<br />Modular programming is good and very important, but you have to<br />get the modules right... otherwise you risk ending up in a situation<br />where you have just made the job more complicated for yourself...<br />which is definitely not the idea of modular programming :).<br /><br /><br />Kenny, EXTERN in itself is pretty easy. What can be pretty annoying<br />is the various calling conventions and name decorations. Especially<br />C++ compilers like to decorate names *a lot*. The new externdef<br />tool from hutch is probably a little more complicated to understand, since it utilizes some knowledge of how imports are<br />done in the PE file format.</div>
    <div class="meta">Posted on 2001-08-04 06:03:29 by f0dder</div>
   </div>
   <div class="post" id="post-2973">
    <div class="subject"><a href="#post-2973">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">I am not going to start one more Holly war with this, and wish it<br />purely technical:<br /><br />There zero technical argument for Modular programming in Asm, as long<br />as we are not talking of developpement groups.<br /><br />The concept of reusable routines is out of any reality (out, -like<br />Bodgan said- of several small, simple and very basic things, like<br />searching for the length of a zero ended String, that we could as<br />well Copy/Paste or save in a DLL).<br /><br />Fodder, you are confusing, &quot;Structured programming&quot; and Modular<br />programming&quot;. There is no reason for what Module would prevent<br />from spagetti style and there is no reason for 'Non-Modular&quot; to<br />produce spagetti style.<br /><br />The simple terms of 'Public' or 'Private' symbols have no place<br />in Assembly programming because it simply have no reality at<br />Processor and Memory point of vue. The &quot;scope of symbols&quot;, when<br />this concept is used is is entirely bound to the use of a Linker<br />and the fact of using any Linker is an old left over from Dos time<br />that we should definitively forget.<br /><br />And, to end it, if one think that his routines are so great that<br />they should be saved somewhere so that the whoole world could<br />make use of them, we have DLL. If a programmer wants to build<br />a set of reusable routines that he can call at no cost in several<br />of his Applications, DLLs are perfect for this, and also *run* at<br />no cost with an Assembler like SpAsm who performs the Functions<br />calls in one single instruction.<br /><br /><br />Betov.</div>
    <div class="meta">Posted on 2001-08-04 09:40:00 by Betov</div>
   </div>
   <div class="post" id="post-2977">
    <div class="subject"><a href="#post-2977">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Betov, some code is too time sensitive to put in a DLL, even though<br />they are still reusable. As for only small bits of code being reusable,<br />I disagree. ZipFile handling code is not small. Generic pakfile (like<br />the stuff used in doom/quake/whatever) is smaller, but still not small.<br />These are just two examples of code that can be plugged right out<br />of one project into another, at least if they're done correctly. If I<br />were to implement this in DLLs, I would end up with a thousand<br />small DLLs. If I put it all into one big DLL, I would have one big DLL<br />to distribute with all my programs...<br /><br />I'm not confusing modular and structured programming. Perhaps<br />spasm makes modular programming superfluous with it's features<br />and all, but I still prefer splitting my source into modules. That way<br />I can quickly browse to the code I need with *any* editor.<br />And since I tend to reuse code, it's easier to just copy a &quot;module&quot;<br />to a new project than copy+pasting various source lines...<br /><br /><div class="quote"><br />The simple terms of 'Public' or 'Private' symbols have no place <br />in Assembly programming because it simply have no reality at <br />Processor and Memory point of vue. <br /></div><br /><br />There are so many things that have no meaning at processor level<br />but are still useful. A &quot;proc&quot; doesn't exist on processor level, but<br />people still seem to prefer using &quot;invoke&quot; and stack automation<br />compared to manual pushing and indexing via numbers relative to<br />esp or ebp.<br /><br />With modular programming, and proper use of public/private, you<br />make it impossible for one part of the code to call another part that<br />is really &quot;internal&quot; to another module. Perhaps this doesn't make<br />sense to you, but I've been involved in projects where this has been<br />pretty important. Where it has been important to be able to go back<br />and look at code after months, and still be able to easily work out<br />the program flow, figure out dependencies, etc. And this applies to<br />both group projects and single-man projects.</div>
    <div class="meta">Posted on 2001-08-04 10:13:27 by f0dder</div>
   </div>
   <div class="post" id="post-2984">
    <div class="subject"><a href="#post-2984">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Much interresting answer, Fodder. I see your point as a C programmer<br />using MASM as C-Side tool. All your arguments are typically from there.<br />Am i wrong?<br /><br /><br />Betov.</div>
    <div class="meta">Posted on 2001-08-04 11:31:53 by Betov</div>
   </div>
   <div class="post" id="post-2985">
    <div class="subject"><a href="#post-2985">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">You aren't wrong at all. I think it should hold true for just about any<br />C compiler... and it also holds true when I do pure asm code. *might*<br />be different under spasm, but... even with the features I've heard<br />people talk about (haven't look at spasm yet myself, sorry), I think<br />I'd still prefer module-splitting. Oh well, personal taste and all.</div>
    <div class="meta">Posted on 2001-08-04 12:03:40 by f0dder</div>
   </div>
   <div class="post" id="post-2989">
    <div class="subject"><a href="#post-2989">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">In this case, let us put aside the problems of Local / Global scope<br />(what would be difficult to fully debate here -because, for example,<br />of the solutions offered by what i call &quot;Local Symbols&quot;, and so...-).<br /><br />Can we look at it at the writting practice point of vue. What do you<br />think of this:<br /><br />I have plan for futur implementation of &quot;Pseudo-MultiFiles&quot; features<br />(i don't know how to really call this). SpAsm is really Mono-file<br />oriented and it will remain. But i could implement something to<br />allow the user to define &quot;chunks&quot; of code that would appear in the<br />Source Editor as different files managed by a Tab Control.<br /><br />The user would, for example, write something like <br /><br />&gt; .Source &quot;StringsRoutines&quot;<br /><br />and this chunck, down to next &quot;.Source&quot; Statement would be displayed<br />the same way as a separate file in a multifile Editor.<br /><br />Instead of having to paste the Routines Chunks (once saved on disk),<br />we would just have to run some  menu option opening a Load<br />File Box to import the wished .inc(s).<br /><br />Out of Code containement (that i will never implement unless i see <br />one day one reason for this), would this be closer to you usual way <br />of working?<br /><br /><br />Betov.</div>
    <div class="meta">Posted on 2001-08-04 13:51:04 by Betov</div>
   </div>
   <div class="post" id="post-2991">
    <div class="subject"><a href="#post-2991">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Ok quick reply...<br /><br />First off, I would have to agree with Betov in everything he says. For me LOCAL declarations are more confushing and annoying then they are anything else. I always get confused what local data is where and what is its value in that routine. Confusing to me. For global code, I can always make a messagebox that tells me the data of the code, and then I can look in my program to figure out why :)<br /><br />But that's not why I'm replying. I can't figure out how to make the EXTERN's referenced. I know some of them belong to various DLL's such as the Kernel32.dll and some DirectX stuff, but I don't understand how to get MASM to know what DLL that is.<br /><br />If I can do that, the code should compile perfect just outputed of the compiler. The listing files are included.</div>
    <div class="meta">Posted on 2001-08-04 17:28:11 by Kenny</div>
   </div>
   <div class="post" id="post-2993">
    <div class="subject"><a href="#post-2993">Hi</a></div>
    <div class="body">I have to say that betov is right :)<br /><br />Reusable code is bad...<br /><br />we have written one of the largest ASM application (our HE game)<br />getting close to 300.000 lines of code now...<br /><br />over the time our greatest enemy was:<br /><strong> 1.Copy and Paste errors</strong><br /><br />it was supposed to help us a lot, and in fact it did save us some typeing work, but the damage was much bigger...<br /><br />We have a memo here: ITS a COPY AND PASTE ERROR?<br /><br />BTW. i just wonder why any beginner and C oriented programmer are so much intrested into less typeing?<br />Unless they are considering this work (witch is bad) and not fun (which is good)<br /><br /><br />Our second enemy:<br /><strong> Modularization </strong><br />Because of &quot;organization&quot; we have a lots of &quot;modular&quot; files into diffrent folders. <br /><br />Each file does specific actions and deals with diffrent parts of our application....I thought its a good ideea at the moment (somehow i still belive it is...damn me ;) ) <br /><br /><strong>BUT</strong><br /><br />Now it is very hard to find one procedure in so many files and it takes us some time until we find ALL links between diffrent modules both physical and (worst) logical...<br /><br />For example: adding new levels and sublevels of interface buttons has become one of our nightmare ... because of multiple files and logical implications of such changes<br /><br />Betovs Spasm with its fast link to related procedures could be a magical tool for such problems (only i belive its not good enough yet) but i dont know if the logical ones can ever be solved ...<br /><br />I still have to see a tool to show ALL physical and logical libks between procedures and variables and files and...<br /><br />Now its ALL in our HEAD...think what will happen IF we where a huge team (more the 10 ppl like Micro$oft ) and we loose track of those objects, methods etc....GPFaults...so dont balme Micro$oft for this ...... is a programming style problem<br /><br />So you see Modularization, encapsulation, code reuse and this stuff are not necesary good....strange enough this is true esp for huge applications<br /><br />They work well for tiny applications....but leave you in need for the real huge ones ...<br /><br />And Fodder you are wrong again:<br /><br />There is a PROC at the hardware processor level: CALL/RET and Stack mechanism (they added ENTER and LEAVE there lately)<br /><br />&quot;invoke&quot; and such are just MACROs to make your life easy, but the mechanism is there allready and was there form the first micros like I8080 and Z80 :)<br /><br /><br />Besides we should stop those Crusades here and try to help ppl witch ask a Question and get confused by bigger answers then the question originally was<br /><br />As Huch said it one beginner can NOT expect a direct compile of asm generated from a C++ compiler to work seamless into MASM....<br /><br />It will not work because of constants, equates, #defines, header files (mostly), linker symbols and stuff like that...<br /><br />but the code will be relative OK, one can use it as a source for inspiration or a tip but not for a full ASM application ;) <br /><br />At least Not without some work...<br /><br />The C compiler/linker knows by default a lots of things, and it chooses NOT to tell you (the programmer) about them...efectively cutting your knowledge...<br /><br />Converting header files into asm include files can be a problem of its own (and not for beginners). To do that one must know C++ and ASM resonably well<br /><br />However this can be done ;)<br /><br />Once again i have to point it out that helpers like LOCALS. .IF .WHILE and such are a big problem for beginners and get them confused...<br /><br />Once you have written 1000 &quot;while style&quot; loops and &quot;ifs&quot; like:<br /><br />cmp eax,<br />jbe there<br /><br />one medium user will find the above helpers pretty handy and usefull but this comes AFTER one has the full knowledge of whats behind them</div>
    <div class="meta">Posted on 2001-08-04 18:38:55 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-3005">
    <div class="subject"><a href="#post-3005">Spasm users, a question or two please... And some other stuf</a></div>
    <div class="body">Reusable code != copy &amp; paste<br /><br />they did invent calls and dlls for a reason now :tongue:</div>
    <div class="meta">Posted on 2001-08-04 20:34:36 by Hiroshimator</div>
   </div>
   <div class="post" id="post-3010">
    <div class="subject"><a href="#post-3010">Yup</a></div>
    <div class="body">Yeah Hiro i know that<br /><br />C&amp;P != reuseable code<br /><br />but its a basic form of it ...the one that is bad if i might say ;) <br /><br />But hellas, not all code can be placed in a DLL or called with parameters because one will get into over parametrization of routines and loose speed because of that....<br /><br />in a huge application most of the routines do allmost the same thing but with slightly diffrent actions and on very diffrent data<br /><br />C&amp;P looked as the right solution then and is very tempting today ;) <br /><br />I mean we say/think : &quot;eh...it looks i have done this stuff before into that section of our code... i will just C&amp;P that routine here, modify it until it fits this new purpose and get by with less work, after all why should i rewrite it from scratch?&quot;...wrong so wrong..but so tempting also<br /><br />every problem has a simple,elegant and easy solution...that is also wrong ;)<br /><br />we sure use CALLs to procedures a lot (with register or temporary global parameters avoiding stack parameters if possible for speed) and played with functions in DLL also (for compiled sprites),  Macros come handy sometimes also...<br /><br />We just have to see the tools for huge applications (huge at code/algorithms level not filesize ;) ) be born...and i mean for every language not ASM only ;)<br /><br />Curently the best tool available is our Brain ... and the .lst file</div>
    <div class="meta">Posted on 2001-08-04 21:07:26 by BogdanOntanu</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=479&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=479&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="479" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=479&amp;page=2">&gt;</a><a href="../?id=479&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>