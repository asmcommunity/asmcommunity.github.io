<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>heap? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2396" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2396">heap?</a></p>
   <div class="post" id="post-15195">
    <div class="subject"><a href="#post-15195">heap?</a></div>
    <div class="body">Hi.<br />I have a small question about the heap.<br />In dos, the heap was the memory area between all defined segments of a program and the beginning (or end, however you wanna see it) of the stack, which is growing from top to bottom:<br />64 kbyte segment:<br />------------------------- FFFFh<br />stack                      |<br />heap                      |<br />program segments|<br />------------------------- 0h<br /><br />But what exactly is a heap in win9x? And why should i use a heap in win9x instead of Globalxxx or Virtualxxx functions? i don't understand the use of a heap in win9x. can someone explain this a little bit?<br /><br />thanks.</div>
    <div class="meta">Posted on 2001-12-17 06:51:16 by darester</div>
   </div>
   <div class="post" id="post-15200">
    <div class="subject"><a href="#post-15200">heap?</a></div>
    <div class="body">Hi !<br /><br />The Heap under WinXX is a memory area for local data and is a part of the process' address-space. So like in DOS you can alloc some memory space there for your local data - One of the differences between the dos-heap and Win9x/WinNt/Win2K/... - heap is that another process normaly can't access this heap.<br />The reason why the globalxxx and virtualxxx-functions should not be used anymore is that they exists only for Win3.x-compatibilty (and therefore for 16-bit-processes !)<br /><br /><br />Greetings, CALEB</div>
    <div class="meta">Posted on 2001-12-17 09:53:23 by Caleb</div>
   </div>
   <div class="post" id="post-15203">
    <div class="subject"><a href="#post-15203">heap?</a></div>
    <div class="body">thanks for your reply!<br />so - if i understood this correctly - there is actually no heap anymore in win9x in 32bit programs. i mean, if there were no 16bit porgrams, then there were no heap functions when they are only for 16bit programs. so 32bit programs don't have a heap and shouldn't use the heap functions. is this correct?</div>
    <div class="meta">Posted on 2001-12-17 11:10:10 by darester</div>
   </div>
   <div class="post" id="post-15224">
    <div class="subject"><a href="#post-15224">heap?</a></div>
    <div class="body">In general, a heap is any memory region where you're allowed to allocate and free &quot;loadable/writable&quot; memory in an arbitrary order. (Unlike stack memory which is last-in(allocated)-first-out(freed).)<br /><br />In Win32, the builtin heap must be managed with the API functions. Win32 complicates things a bit by saying you can have more than one heap per process.  In reality, all these little Heaps are part of the one big, builtin heap.<br /><br />So what is this builtin heap? Take your 4G process address space, then subtract the system region (upper 2G), the lower region (64K in NT/2000/XP, 1M in 9x), the loaded EXE and DLL files, and the reserved stack and data areas (defined in the PE headers). What's left is what's unused when you start the program -- the heap space.</div>
    <div class="meta">Posted on 2001-12-17 16:27:33 by tank</div>
   </div>
  </div>
 </body>
</html>