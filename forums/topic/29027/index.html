<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>3D window, screnn refresh injection - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29027" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29027">3D window, screnn refresh injection</a></p>
   <div class="post" id="post-205091">
    <div class="subject"><a href="#post-205091">3D window, screnn refresh injection</a></div>
    <div class="body">Hello all,<br /><br />im doing some kind of research about how to insert/inject a piece of my own code into a running 3D application...<br /><br />The ideia is to execute a piece of code, right after a 3D screen refresh completes...<br /><br />IE:<br />I have this 3d app running, i start my inject application that will load into memory, find my app address,<br />and then find the update routine/call, and then inject a piece of code, that will be executed right after the main call ends<br /><br />I dont know how to locate that call, and how to inject the code ( if that can be done... )<br /><br />Once i tried using the base Windows draw/write on screen without the injection ideia... it works.. but the draw keeps flashing because its not synchronized with the 3d application....<br /><br />Sounds strange, any idea would be great!<br /><br />Thanks!<br /><br />(sorry my english!)</div>
    <div class="meta">Posted on 2008-04-09 20:31:32 by GR33d</div>
   </div>
   <div class="post" id="post-205095">
    <div class="subject"><a href="#post-205095">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">I&#039;m afraid your question falls outside of what we can discuss on this forum.<br /><br />And I dunno if doing something like you&#039;re suggestion can be done automatically - most likely, you&#039;ll have to do some manual reverse engineering of the particular application you want to control, and that&#039;s certainly off-topic here.<br /><br />What is it you&#039;re trying to accomplish? Perhaps there&#039;s a simpler way that doesn&#039;t involve code injection and RE :)</div>
    <div class="meta">Posted on 2008-04-10 06:48:01 by f0dder</div>
   </div>
   <div class="post" id="post-205096">
    <div class="subject"><a href="#post-205096">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">For both OpenGL and D3D, its quite common practise to create one or more &#039;stub DLLs&#039; and place it/them in the same folder as the executable.<br />This is usually done for debugging purposes, and requires no particular reverse engineering.<br />For OGL, that gives you access to everything.<br />But for D3D, since most of the useful functions are implemented as interface methods and are not exposed to the export table, you&#039;re quite limited in what you can trap this way, however it&#039;s enough if you know a bit about COM.<br /></div>
    <div class="meta">Posted on 2008-04-10 23:38:41 by Homer</div>
   </div>
   <div class="post" id="post-205103">
    <div class="subject"><a href="#post-205103">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">Well, there are legitimate applications that do that sort of thing. I&#039;ve seen some people who created programs that would display extra info when playing MMORPGs by drawing directly to the game&#039;s screen.</div>
    <div class="meta">Posted on 2008-04-11 23:30:38 by Bobbias</div>
   </div>
   <div class="post" id="post-205111">
    <div class="subject"><a href="#post-205111">Re: 3D window, screnn refresh injection</a></div>
    <div class="body"><div class="quote"><br />Well, there are legitimate applications that do that sort of thing. I&#039;ve seen some people who created programs that would display extra info when playing MMORPGs by drawing directly to the game&#039;s screen.<br /></div>That probably isn&#039;t legitimate - while it might be in your country (through a &quot;reverse engineering for interoperability&quot; claim), the game EULA will very likely forbid this... especially fascistgames like World Of Warcraft.</div>
    <div class="meta">Posted on 2008-04-12 12:10:43 by f0dder</div>
   </div>
   <div class="post" id="post-205114">
    <div class="subject"><a href="#post-205114">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">Good point about the EULA. That might put a kink in that sort of thing. I&#039;m not sure how much actual reverse engineering that sort of thing really takes though, if you do it properly. If you were to use stub DLLs or some other process to insert that code without actually reverse engineering, you might be able to escape some of the more illegal aspects, though most EULAs do still forbid modification of the game, or any files distributed as part of the game.<br /><br />Of course, doing something like, say, integrating personal messages into a game like quike/doom/whatever by drawing onto the game&#039;s buffers would be a slightly better example of something like this being legal.<br /><br />Of course, I&#039;m not always the best person to ask for advice about whether you should do something like that or not, because I am extremely opposed to the control companies have over how you treat their software (though I am also opposed to cheating/botting etc.) Corporate America has too much control over our personal lives as it is :/</div>
    <div class="meta">Posted on 2008-04-12 16:10:39 by Bobbias</div>
   </div>
   <div class="post" id="post-205115">
    <div class="subject"><a href="#post-205115">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">Since I&#039;m from the Starcraft &quot;hacking&quot; scene...<br /><br />Game hacking is not illegal, it forfeits your eula to use the program. Since you still own the cd and the computer/hard drive it runs on, they really *can&#039;t* stop you from playing singleplayer/lan... They can keep you from using their end for multiplayer support (aka cd-key&#039;s being banned from meta servers ect..) They can&#039;t press charges though. Though this should be considered &quot;shady&quot; enough that it can&#039;t be discussed here. aka forms of automated debugging which could possibly involve virus writting being closed... oh well, not my forums, I&#039;ll abide by the rules ;) I appreciate the good information here :D<br /><br />For starcraft though... They have banned hundreds of thousands of cd-keys from battle.net for running these third party programs. Never the less, Starcraft 2 has many of these &quot;Hacks&quot; listed as features. And has been using the hacking community to solve many glitches and malicious hacks which completely ruin the game. Starcraft in the US is still here because of the hacking scene.<br /><br />For a legal addin look at XFire. But they do not edit the game, instead they just overlay their interface. Because of this non interaction with the game they can keep it legal, but even looking up in game names to chat to would cross the line to breaking the eula.</div>
    <div class="meta">Posted on 2008-04-12 23:07:54 by jakor</div>
   </div>
   <div class="post" id="post-205116">
    <div class="subject"><a href="#post-205116">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">All quite true, nice to see someone else who knows what&#039;s going on.<br /><br />Though it makes me sad that certain topics are very sketchy on here, I do understand why you guys don&#039;t like reverse engineering and such.<br /><br />I did think that breaking an EULA forfeit all rights to use the program at all. I thought that an EULA was a legally binding contract between the &quot;End User&quot; and the creator/publisher of the game which governed the user&#039;s rights on what they can and cannot do with the game, online, as well as offline. Take world of Warcraft for example. Many people have been banned for breaching the EULA even for trivial things, and banning someone from using WoW is essentially banning them from playing the game at all, without further modifying the fies to allow them to connect to private servers.<br /><br />But you do bring up the point of XFire, which is hard evidence (against my rather flimsy anecdotal evidence) that there is a program that inserts it&#039;s own graphics over the graphics of a game in a legal and non infringing way.</div>
    <div class="meta">Posted on 2008-04-12 23:23:03 by Bobbias</div>
   </div>
   <div class="post" id="post-205117">
    <div class="subject"><a href="#post-205117">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">It&#039;s unfortunate that certain topics can&#039;t be discussed here, but it&#039;s both to protect SpooK from legal trouble as well as not helping scriptkiddies do their mischief. I know, the scriptkiddies can get their info elsewhere, and that leaves people with (more or less? :)) legitimate RE-related stuff with less places to go. It sucks, but that&#039;s the way it is.<br /><br />How do a thing like xfire work? I doubt it modifies gamecode in any way, so it must be doable using an overlay surface or something?</div>
    <div class="meta">Posted on 2008-04-13 06:43:53 by f0dder</div>
   </div>
   <div class="post" id="post-205118">
    <div class="subject"><a href="#post-205118">Re: 3D window, screnn refresh injection</a></div>
    <div class="body"><div class="quote"><br />scriptkiddies<br /></div><br /><br />Actually, if anything, the people who actually write something malicious with help from places like this are beyond scriptkiddies, lol. Every real cracker has to start somewhere :/ A scriptkiddie would be someone using the program that that cracker created. (I refused to call those guys Hackers, because it degrades the name of something that is not inherently bad.)<br /><br />Anyway, I&#039;d like to know how XFire works as well, I think I&#039;ll do a little research/googling and see what I can come up with.</div>
    <div class="meta">Posted on 2008-04-13 10:22:39 by Bobbias</div>
   </div>
   <div class="post" id="post-205119">
    <div class="subject"><a href="#post-205119">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">Imho, it&#039;s exactly as illegal as using these 4 lines in your code:<br />HDC hDesktop = GetDC(0);<br />const char* str1 = &quot;The time now is 15:37h&quot;;<br />TextOut(hDesktop,10,10,str1,strlen(str1);<br />ReleaseDC(0,hDesktop);<br /><br />Or as illegal as the PrintScreen key. <br /><br />The OpenGL version - you provide a stub DLL with. The DX version - you also provide a stub, but it&#039;s much easier to make: You just need to copy a vTable, and patch the IDirect3DDevice9::EndScene. <br />Only if you look at what and when the game calls of that ID3DDevice object - it can be illegal, I think. </div>
    <div class="meta">Posted on 2008-04-13 11:30:23 by Ultrano</div>
   </div>
   <div class="post" id="post-205124">
    <div class="subject"><a href="#post-205124">Re: 3D window, screnn refresh injection</a></div>
    <div class="body"><div class="quote"><br />Or as illegal as the PrintScreen key. <br /></div><br />but if an demo 3dapp has PrintScreen key disabled, is it illegal to enable it?<br /></div>
    <div class="meta">Posted on 2008-04-14 01:57:52 by daydreamer</div>
   </div>
   <div class="post" id="post-205125">
    <div class="subject"><a href="#post-205125">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">If the author made it so (it&#039;s not default), then I guess it&#039;s something the author didn&#039;t want to be done :)</div>
    <div class="meta">Posted on 2008-04-14 02:32:46 by Ultrano</div>
   </div>
   <div class="post" id="post-205129">
    <div class="subject"><a href="#post-205129">Re: 3D window, screnn refresh injection</a></div>
    <div class="body">The thing is, it can&#039;t be illegal because ram is yours. And because ram changes so constantly you may make changes to ram and it will not constitute illegal action. You may use print screen to copy part of your ram, but selling it may be against your licensing agreement.</div>
    <div class="meta">Posted on 2008-04-14 12:18:28 by jakor</div>
   </div>
  </div>
 </body>
</html>