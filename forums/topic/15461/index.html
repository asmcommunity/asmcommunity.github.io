<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Can't post on the fasm forum-so here the post that should be - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15461" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=15461">Can't post on the fasm forum-so here the post that should be</a></p>
   <div class="post" id="post-120101">
    <div class="subject"><a href="#post-120101">Can't post on the fasm forum-so here the post that should be</a></div>
    <div class="body">(I got a few debug erros -- and some strange double^2 post)<br />Post:<br />Ok, I've gotten a few debug error oages whil trying to psot and delete double post in the &quot;Macro tutorials&quot; thread.<br />Here is the post which should be there (including the attachent):<br /><div class="quote">3) The 'forward', 'common', and 'reverse' - why they are required, and are there any other directives for macros? I'm really confused with this directives even though I've gone thru the manual. Pls explain a little.</div><br />3) Ok, you've read the manual, first: don't panic (;)), but let's take a look at the docs first: (It's not as much reading as it seems). Second: panic!!! :twisted: :lol:  ;)<br /><pre><code>If after the &quot;macro&quot; directive you enclose some group of arguments' names in<br />square brackets, it will allow giving more values for this group of arguments<br />when using that macroinstruction. Any more argument given after the last<br />argument of such group will begin the new group and will become the first<br />argument of it. That's why after closing the square bracket no more argument<br />names can follow. The contents of macroinstruction will be processed for each<br />such group of arguments separately. The simplest example is to enclose one<br />argument name in square brackets&#58;<br /><br />    macro stoschar &#91;char&#93;<br />     &#123;<br />        mov al,char<br />        stosb<br />     &#125;<br /><br />This macroinstruction accepts unlimited number of arguments, and each one<br />will be processed into these two instructions separately. For example<br />&quot;stoschar 1,2,3&quot; will be assembled as the following instructions&#58;<br /><br />    mov al,1<br />    stosb<br />    mov al,2<br />    stosb<br />    mov al,3<br />    stosb<br />......<br />  &quot;forward&quot;, &quot;reverse&quot; and &quot;common&quot; directives divide macroinstruction into<br />blocks, each one processed after the processing of previous is finished. They<br />differ in behavior only if macroinstruction allows multiple groups of<br />arguments. Block of instructions that follows &quot;forward&quot; directive is processed<br />for each group of arguments, from first to last - exactly like the default<br />block &#40;not preceded by any of these directives&#41;. Block that follows &quot;reverse&quot;<br />directive is processed for each group of argument in reverse order - from last<br />to first. Block that follows &quot;common&quot; directive is processed only once,<br />commonly for all groups of arguments. Local name defined in one of the blocks<br />is available in all the following blocks when processing the same group of<br />arguments as when it was defined, and when it is defined in common block it is<br />available in all the following blocks not depending on which group of<br />arguments is processed.</code></pre><br />The first macro showed is this:<br /><pre><code>macro stoschar &#91;char&#93;<br />&#123;<br />   mov al,char<br />   stosb<br />&#125;</code></pre><br />It could be written as:<br /><pre><code>macro stoschar &#91;char&#93;<br />&#123;<br />forward<br />   mov al,char<br />   stosb<br />&#125;</code></pre><br />what forward does is that <strong>for each argument in char</strong> (in the example  is three arguments: 1, 2 and 3) is perfomes the code untill either:<br />1) The macro end.<br />2) forward, reverse or common is encountered.<br />The revese does the same as forward, but it starts with the last argument in . <br /><pre><code><br />macro stoschar &#91;char&#93; &#123;<br />reverse<br />   mov al,char<br />   stosb<br />&#125;<br />stoschar 1,2,3<br />;above would be assembled as&#58;<br />    mov al,3<br />    stosb<br />    mov al,2<br />    stosb<br />    mov al,1<br />    stosb</code></pre><br /><br />common is only processed one, where as forward and common is processed for every argument in .<br /><br />Here is another example from the docs:<br /><pre><code>    macro stdcall proc,&#91;arg&#93;<br />     &#123;<br />      reverse push arg<br />      common call proc<br />     &#125;<br /><br />;can also be written as&#58;<br />    macro stdcall proc,&#91;arg&#93;  &#123;<br />      reverse<br />        push arg<br />      common<br />        call proc<br />     &#125;<br /><br />stdcall AnyProc, 1,2,3<br /></code></pre><br />What happens here is:<br /><strong>First</strong>, for every argument in  starting with the last argument do this:<br /> &quot;push arg&quot; (where arg is the &quot;current&quot; argument in , in the first &quot;pass&quot; in the macro arg will be 3, in the second &quot;pass&quot; arg will be 2, and in the last it will be 1).<br /><strong>Then</strong>, do this (once): &quot;call proc&quot; (where proc will be equal to AnyProc).<br /><br />So in short, &quot;stdcall AnyProc, 1,2,3&quot;  it will compile as:<br /><pre><code>push 3<br />push 2<br />push 1<br />call AnyProc</code></pre><br /><br />I attach an example file, it contains an example of the use of  but with one difference, take a look and see :)<br />(btw, compile the file with this command: &quot;fasm test.asm tmp.htm&quot; and open it in a web browser)</div>
    <div class="meta">Posted on 2003-09-30 10:29:40 by scientica</div>
   </div>
   <div class="post" id="post-120171">
    <div class="subject"><a href="#post-120171">Can't post on the fasm forum-so here the post that should be</a></div>
    <div class="body">Thanks scientica! I grabbed it from here:grin:</div>
    <div class="meta">Posted on 2003-09-30 23:36:06 by pentagenius</div>
   </div>
  </div>
 </body>
</html>