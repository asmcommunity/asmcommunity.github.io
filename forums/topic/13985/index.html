<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Abs(n) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13985" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13985">Abs(n)</a></p>
   <div class="post" id="post-108091">
    <div class="subject"><a href="#post-108091">Abs(n)</a></div>
    <div class="body">It is known algorithm to get ABS(N):<br />@@:	neg bVar<br />	js @@<br /><br />But must pay attention - if byte variable may be equal 80h (or 8000h, or 80000000h) this algo gives infinite cycle.</div>
    <div class="meta">Posted on 2003-06-24 06:56:09 by MikDay</div>
   </div>
   <div class="post" id="post-108104">
    <div class="subject"><a href="#post-108104">Abs(n)</a></div>
    <div class="body">IMHO, solutions to this problem are case specific due to there being no proper absolute value for the maximum negitive number.  So, I'm assuming you just want to get rid of the infinite loop and the value is okay for your work.<br /><br />NEG iVal<br /><br />...same as:<br /><br />DEC iVal<br />NOT iVal<br /><br />...same as:<br /><br />NOT iVal<br />INC iVal<br /><br />...therefor,<br /><br />mov eax, iVal<br />sar eax, 31<br />xor iVal, eax<br />sub iVal, eax<br /><br />...this is a conditional NEG based on high bit of iVal.</div>
    <div class="meta">Posted on 2003-06-24 09:20:15 by bitRAKE</div>
   </div>
   <div class="post" id="post-108119">
    <div class="subject"><a href="#post-108119">Abs(n)</a></div>
    <div class="body">&gt;= 686<pre><code>mov eax, iVal  ;iVal is ....<br /><br />mov ecx, eax<br />neg eax<br />cmovs eax, ecx</code></pre></div>
    <div class="meta">Posted on 2003-06-24 11:32:02 by arkane</div>
   </div>
  </div>
 </body>
</html>