<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>challange; sleep with out any api - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5241" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=5241">challange; sleep with out any api</a></p>
   <div class="post" id="post-37060">
    <div class="subject"><a href="#post-37060">challange; sleep with out any api</a></div>
    <div class="body">i want to sleep my program for 50ms using no api, and no more then 1%cpu on 766 intel p3</div>
    <div class="meta">Posted on 2002-05-07 20:24:49 by Qages</div>
   </div>
   <div class="post" id="post-37089">
    <div class="subject"><a href="#post-37089">c hallange sleep with out any api</a></div>
    <div class="body">When you sleep() all you're doing is reliquishing control to the operating system for x amount of time.  There's no way to do it without communicating with Windows in some way.</div>
    <div class="meta">Posted on 2002-05-07 22:45:27 by iblis</div>
   </div>
   <div class="post" id="post-37090">
    <div class="subject"><a href="#post-37090">c hallange sleep with out any api</a></div>
    <div class="body">only other lib im using us user32</div>
    <div class="meta">Posted on 2002-05-07 22:50:18 by Qages</div>
   </div>
   <div class="post" id="post-37098">
    <div class="subject"><a href="#post-37098">c hallange sleep with out any api</a></div>
    <div class="body">Im not about to dig up the facts, cause its not that interesting to me, but my suggestion would be to use the floating point processor 80x87 doing some crazy stuff, which will leave the 80x86 free for other stuff, but stall the process till the FPU is finished.<br /><br />NaN</div>
    <div class="meta">Posted on 2002-05-07 23:12:47 by NaN</div>
   </div>
   <div class="post" id="post-37163">
    <div class="subject"><a href="#post-37163">c hallange sleep with out any api</a></div>
    <div class="body">Why do it without the use of API? :confused: You have already linked to user32.dll, so obviously your app is not running before Windoze is fully loaded.....</div>
    <div class="meta">Posted on 2002-05-08 07:42:43 by sluggy</div>
   </div>
   <div class="post" id="post-37170">
    <div class="subject"><a href="#post-37170">c hallange sleep with out any api</a></div>
    <div class="body">I too am interested in a proper way to do this. The sleep API is not accurate enough for a lot of purposes and the windows system timer is also either inaccurate or in the case of multimedia timers to resource intensive.</div>
    <div class="meta">Posted on 2002-05-08 07:56:38 by emonk</div>
   </div>
   <div class="post" id="post-37180">
    <div class="subject"><a href="#post-37180">c hallange sleep with out any api</a></div>
    <div class="body">You could Hook the Message loop....and stop &quot;All&quot; Windows operations for a given number cycles....</div>
    <div class="meta">Posted on 2002-05-08 08:28:25 by Brad</div>
   </div>
   <div class="post" id="post-37211">
    <div class="subject"><a href="#post-37211">c hallange sleep with out any api</a></div>
    <div class="body">Unfortunately there's really no way to get &quot;accurate&quot; timings short of taking up 100% of the CPU resources.  The best thing you can do is Sleep() for x amount of time and adjust for the innaccuracy.<br /><br />Pseudocode:<pre><code>millisecs_to_sleep = 1000;<br />ms = millisecs_to_sleep;<br /><br />while&#40; true &#41;<br />&#123;<br />	tick = GetTickCount&#40;&#41; + millisecs_to_sleep;<br />	sleep&#40; ms &#41;;<br /><br />	DoStuffHere&#40;&#41;;<br /><br />	adjust = GetTickCount&#40;&#41; - tick;<br />	ms = millisecs_to_sleep - adjust;<br />&#125;</code></pre></div>
    <div class="meta">Posted on 2002-05-08 11:53:26 by iblis</div>
   </div>
  </div>
 </body>
</html>