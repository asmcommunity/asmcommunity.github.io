<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MSVC Asm vs My Asm - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9186" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=9186">MSVC Asm vs My Asm</a></p>
   <div class="post" id="post-67591">
    <div class="subject"><a href="#post-67591">MSVC Asm vs My Asm</a></div>
    <div class="body">Ok ... so I started coding some asm based on what i've read. Trust me I find myself lookup things more then actually typing. Anyway, what I did was write some C in MSVC ... just a simple array and loops and manipulating the array values. Nothing special. In debug mode ... MSVC asm code looks like the code I'm used too. <br /><br />However, when I do a build and look at the asm that MSVC generates...its completely different then what was in the disassembler. Granted its a release build ... but it even references things differently (ie dword ptr  is now lArray and some funky syntax)<br /><br />is this standard? or is this just MS taking their own crap and converting it?</div>
    <div class="meta">Posted on 2002-11-26 07:54:03 by JenisonWRX</div>
   </div>
   <div class="post" id="post-67594">
    <div class="subject"><a href="#post-67594">MSVC Asm vs My Asm</a></div>
    <div class="body">MSVC debug builds have built-in debug infos in them, so it is able to find the variable name and all...<br />But when you compile it as release, it does some serious code optimizations in terms of speed and code size and there is no longer debug info in this executable and only code machine can be found in it...<br /><br />dword ptr  is probably where your array is, as a function local variable.<br /><br />MS is doing things perfectly well here: seeing functions and variable names is just a feature because it is much simple when debugging, but that's all...</div>
    <div class="meta">Posted on 2002-11-26 08:31:15 by JCP</div>
   </div>
   <div class="post" id="post-67595">
    <div class="subject"><a href="#post-67595">MSVC Asm vs My Asm</a></div>
    <div class="body">Chances are the release code doesn't contain debug info (it bloats the exe, and can slow stuff down). So the code you are seeing is the <em>actual</em> code the compiler produces, not the beautified, easy to read, source code that you produced.<br /><br />If you produces some assembly code in masm and assemble using the following command line:<br />&lt;masm path&gt;\ml /c /coff /Fllist.lst /Sa /Sn &lt;source code&gt;.asm<br /><br />This will produce a list.lst file which shows pretty much what is <em>REALLY</em> going on with the assembler. How things like rets get expanded into ret 04, or ret nn depending on the number of arguments in the process it is returning from...<br />MASM hides things from you that you don't really need to worry about when programming. But once you've got a firm grip on the basics, you should really learn them too so you know what actually happens when you create a stack frame, and when you execute a call.<br /><br />Once you've learned all this stuff you can then put it to the back of your mind until you want to create some heinous, and bastardised hand crafted function.<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-11-26 08:32:27 by Mirno</div>
   </div>
  </div>
 </body>
</html>