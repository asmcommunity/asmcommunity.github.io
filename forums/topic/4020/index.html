<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Using Shl with bl as count - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4020" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=4020">Using Shl with bl as count</a></p>
   <div class="post" id="post-27437">
    <div class="subject"><a href="#post-27437">Using Shl with bl as count</a></div>
    <div class="body">I've tried to use the shift left command as 'shl eax, bl', but the MASM doesn't like that statement.  Am I doing something wrong or should I do something like I've done below.  This is a little different in that it's being called from Visual Basic with the CallWindowProc api call.<br /><br />Thanks - Jack<br /><br /><pre><code><br />.586<br />.model small<br />.code<br /><br />GetBitIn32bitNo PROC STDCALL USES ebx ecx edx a32bitNo&#58;dword, BitNo&#58;dword, long3&#58;dword, long4&#58;dword<br /><br />    mov eax,a32bitNo<br />    mov ebx,BitNo<br /><br />    ;shl eax, bl doesn't work - substitute for shift left to BitNo<br />    $label&#58;<br />	dec ebx<br />      jz exit  <br />      shr eax,1<br />	jmp $label<br /><br />  exit&#58;<br />    and eax,1<br /><br />    ret 16<br />GetBitIn32bitNo endp<br /><br />END<br /><br /></code></pre></div>
    <div class="meta">Posted on 2002-03-05 23:31:42 by JackRazz</div>
   </div>
   <div class="post" id="post-27439">
    <div class="subject"><a href="#post-27439">Using Shl with bl as count</a></div>
    <div class="body">I don't know what manual you learned assembly from, but mine<br />says the only allowed versions of that instruction are:<pre><code>SHL &#91;i&#93;reg&#91;/i&#93;/&#91;i&#93;mem&#91;/i&#93;, 1<br />SHL &#91;i&#93;reg&#91;/i&#93;/&#91;i&#93;mem&#91;/i&#93;, &#91;b&#93;CL&#91;/b&#93;<br />SHL &#91;i&#93;reg&#91;/i&#93;/&#91;i&#93;mem&#91;/i&#93;, &#91;i&#93;imm8&#91;/i&#93;</code></pre></div>
    <div class="meta">Posted on 2002-03-05 23:45:18 by bitRAKE</div>
   </div>
   <div class="post" id="post-27565">
    <div class="subject"><a href="#post-27565">Using Shl with bl as count</a></div>
    <div class="body">Thanks for the info.  I went back to the book and sure enough I mis-read the example.  I still have a lot to learn.<br /><br />Jack</div>
    <div class="meta">Posted on 2002-03-06 20:00:04 by JackRazz</div>
   </div>
  </div>
 </body>
</html>