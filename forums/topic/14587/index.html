<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Process Viewer - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14587" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14587">Process Viewer</a></p>
   <div class="post" id="post-112850">
    <div class="subject"><a href="#post-112850">Process Viewer</a></div>
    <div class="body">Im writing a little ProcessViewer for the console. I enumerate all processIDs and open each ID with OpenProcess for getting the name of the process. Open Process uses PROCESS_QUERY_INFORMATION or PROCESS_VM_READ for opening. My Problem is that with this way i can only read my processes, but not f.e. processes of SYSTEM. I know, that when im admin, i can get DEBUG_PRIVILEGES to open all processes. The taskmanager runs not as admin but it can show me all processes. Any idea? Do i need to request for a special privilege to read all processes as normal user?</div>
    <div class="meta">Posted on 2003-08-03 14:33:35 by belial</div>
   </div>
   <div class="post" id="post-112852">
    <div class="subject"><a href="#post-112852">Process Viewer</a></div>
    <div class="body">This thread might help you out:<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=14178">http://www.asmcommunity.net/board/index.php?topic=14178</a></div>
    <div class="meta">Posted on 2003-08-03 14:41:05 by Mecurius</div>
   </div>
   <div class="post" id="post-112903">
    <div class="subject"><a href="#post-112903">ToolHelp32 &amp; psapi.dll</a></div>
    <div class="body">Belial:<br /><br />use the ToolHelp32 windows api:<br /><a target="_blank" href="http://www.codeproject.com/threads/processes.asp">http://www.codeproject.com/threads/processes.asp</a><br /><br /><br />This api is not available in win NT, so you would need tha psapi.dll:<br /><a target="_blank" href="http://support.microsoft.com:80/support/kb/articles/q175/0/30.asp&amp;NoWebContent=1">http://support.microsoft.com:80/support/kb/articles/q175/0/30.asp&amp;NoWebContent=1</a></div>
    <div class="meta">Posted on 2003-08-03 23:41:25 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112905">
    <div class="subject"><a href="#post-112905">Process Viewer</a></div>
    <div class="body">Yeah, you have to load the psapi via LoadLibrary and GetProcAddress.If you use the lib files your app will fail to run on all versions of Win9x as it will attempt to load the psapi module at start up. This psapi is only necessary if you plan to make your app compatible with NT4 and lower, Win2K and XP both support the ToolHelp api as do all versions of 9x and ME.</div>
    <div class="meta">Posted on 2003-08-03 23:47:49 by donkey</div>
   </div>
   <div class="post" id="post-112941">
    <div class="subject"><a href="#post-112941">Process Viewer</a></div>
    <div class="body">The Processviewer is at the moment only for for winnt/2k/xp and i use already the psapi dll. I use EnumProcesses() for getting all ProcessIDs and then I open each ID in a loop with OpenProcess. After opening them successfully, I can use EnumProcessModules() and GetModuleBaseName() to get the name. But my problem is that i can only open my own processes with open process. I only want read access, but windows doesnt allow me to open a process which is own by the administrator or system. When i start the taskmanager, i see that it shows me the names of all processes. Why can it do that and my program not?</div>
    <div class="meta">Posted on 2003-08-04 06:57:48 by belial</div>
   </div>
  </div>
 </body>
</html>