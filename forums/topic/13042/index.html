<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>debugging own process - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13042" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13042">debugging own process</a></p>
   <div class="post" id="post-101252">
    <div class="subject"><a href="#post-101252">debugging own process</a></div>
    <div class="body">How can I debug my own process under Win9x using Microsoft Debug APIs? If I use GetCurrentProcessId and then pass it to DebugActiveProcess, it will fail, freezing the system. Does anybody knowf this is possible?</div>
    <div class="meta">Posted on 2003-05-05 04:31:25 by DZA</div>
   </div>
   <div class="post" id="post-101289">
    <div class="subject"><a href="#post-101289">Iczelion's Win32 Home Page</a></div>
    <div class="body">Tuts28 ,29 and 30 if your writing own debugger. That Olly Debug works pretty good to. I don't have link but should turn up if you search this site.</div>
    <div class="meta">Posted on 2003-05-05 10:18:20 by mrgone</div>
   </div>
   <div class="post" id="post-101296">
    <div class="subject"><a href="#post-101296">debugging own process</a></div>
    <div class="body">I'm not sure you can do this... perhaps spawn a copy of your main exe and debug that? I think it's the armadillo protection thingy that uses a technique similar to this. Unless your executable is compressed, this shouldn't be too much of a memory hit - the performance of running under debug might be something else though.</div>
    <div class="meta">Posted on 2003-05-05 10:32:48 by f0dder</div>
   </div>
   <div class="post" id="post-101782">
    <div class="subject"><a href="#post-101782">debugging own process</a></div>
    <div class="body">yep, Armadillo uses a separate debugger, I want to do something simillar but in my own process (I don't want a seh handler)</div>
    <div class="meta">Posted on 2003-05-07 09:03:49 by DZA</div>
   </div>
   <div class="post" id="post-101859">
    <div class="subject"><a href="#post-101859">debugging own process</a></div>
    <div class="body">I do not think you can debug your own process.  When a debugger is attached, all threads in the debugee process are suspended.  If all threads in your process are suspended you cannot call any of the debugger functions like WaitForDebugEvent.<br /><br />MSDN says the following:<br /><div class="quote"> The system suspends all threads in the process and sends the debugger events representing the current state of the process.</div></div>
    <div class="meta">Posted on 2003-05-07 17:31:38 by Mecurius</div>
   </div>
   <div class="post" id="post-101910">
    <div class="subject"><a href="#post-101910">You guys certainly sharp....</a></div>
    <div class="body">But if you are in control of your program than why can't you display regs in your own program? Just use display. Maybe I misunderstood original question. I thought he wanted a debbuger to check his program and I was telling him that Icz's tuts show you how to build a debug loop.</div>
    <div class="meta">Posted on 2003-05-08 00:01:25 by mrgone</div>
   </div>
   <div class="post" id="post-101968">
    <div class="subject"><a href="#post-101968">yep</a></div>
    <div class="body">Mercurius that explains why the program is suspended after calling DebugActiveProcess with his own pid. Prolly you are right</div>
    <div class="meta">Posted on 2003-05-08 06:06:05 by DZA</div>
   </div>
   <div class="post" id="post-102282">
    <div class="subject"><a href="#post-102282">debugging own process</a></div>
    <div class="body">If you have visual c++, get into it and set up the screen so you can see the disassembled<br />code, the registers &amp; memory<br />write a code snippet in your program to cause an exception ie<br />               mov  edx,0<br />               mov  ,edx<br />you will then enter the visual c++ debugger at the point of the exception (mov ,edx)note the address of the offending instruction &amp; set that address in the memory portion<br />of the debug display by placing the cursor over the appropriate address &amp; updating it, then<br />overwrite that instruction with 2 NOP'S 9090H.<br /><br />At that point you can single step trace (F11), the results of the trace will show up in the<br />register display, and the memory display (if you set the memory to the locations your<br />interested in)<br /><br />You can set a breakpoint by placing the cursor over the break location &amp; keying in F9, then<br />key in F5 and execution will proceed to the break point<br /><br />I hope this has been of some help, if you have any questions my E_Mail is <a href="mailto:junbobr@cs.com">junbobr@cs.com</a></div>
    <div class="meta">Posted on 2003-05-10 10:31:38 by bobr_bak</div>
   </div>
   <div class="post" id="post-102582">
    <div class="subject"><a href="#post-102582">debugging own process</a></div>
    <div class="body">I think the original idea was to have your own program act as a debugger for itself - not just to &quot;debug your own application&quot; :). Furthermore, for triggering an external debuger, &quot;int 3&quot; (db 0CCh) is better than causing a GPF.</div>
    <div class="meta">Posted on 2003-05-12 02:38:13 by f0dder</div>
   </div>
  </div>
 </body>
</html>