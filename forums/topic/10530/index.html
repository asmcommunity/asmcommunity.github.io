<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>KBDLLHOOKSTRUCT -&gt; FLAGS is always zero - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10530" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=10530">KBDLLHOOKSTRUCT -&gt; FLAGS is always zero</a></p>
   <div class="post" id="post-79223">
    <div class="subject"><a href="#post-79223">KBDLLHOOKSTRUCT -&gt; FLAGS is always zero</a></div>
    <div class="body">hello there!<br /><br />my lowlevel keyhook is working except for one thing: the .flags value of the kbdllhookstruct given by the lParam pointer always is zero!<br /><br />the struct is :<br />KBDLLHOOKSTRUCT struct<br />vkCode   dd ?<br />scanCode dd ?<br />flags    dd ?<br />.....<br />KB.. ends<br /><br /><br />and later im doing:<br /><br />assume edx: ptr kbdllhookstruct<br />.if .vkCode == VK_B<br />    mov ecx,.flags<br />    cmp ecx,0<br />    je DEATH    ;-&gt; it always jumps to death<br />.endif<br />assume edx: nothing<br /><br /><br /><br />Please help me, im stuck here for 2 days now, and google finds only c++ sites for which the flags value always is nonzero (i tried :)</div>
    <div class="meta">Posted on 2003-01-30 14:14:56 by LordHelmchen</div>
   </div>
   <div class="post" id="post-79310">
    <div class="subject"><a href="#post-79310">KBDLLHOOKSTRUCT -&gt; FLAGS is always zero</a></div>
    <div class="body">If i am not wrong,<br /><br /><pre><code><br />assume edx&#58; ptr kbdllhookstruct<br />;.if &#91;edx&#93;.vkCode == VK_B<br />cmp DWORD ptr &#91;edx&#93;.vkCode,WM_B<br />jne OUT<br />mov ecx,&#91;edx&#93;.flags<br />cmp ecx,0<br />je DEATH ;-&gt; it always jumps to death<br />;.endif<br />OUT&#58;<br />assume edx&#58; nothing<br /></code></pre></div>
    <div class="meta">Posted on 2003-01-31 07:36:33 by roticv</div>
   </div>
   <div class="post" id="post-79344">
    <div class="subject"><a href="#post-79344">KBDLLHOOKSTRUCT -&gt; FLAGS is always zero</a></div>
    <div class="body">thanks rolicv for your answer<br /><br /><br />nevermind this message :)</div>
    <div class="meta">Posted on 2003-01-31 14:57:20 by LordHelmchen</div>
   </div>
  </div>
 </body>
</html>