<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Does ASM Code for the I386 coded in linux work with windows? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30163" />
    <link rel="next" href="../?id=30163&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=30163">Does ASM Code for the I386 coded in linux work with windows?</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=30163&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=30163&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="30163" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=30163&amp;page=2">&gt;</a><a href="../?id=30163&amp;page=2">&raquo;</a></form>   <div class="post" id="post-212690">
    <div class="subject"><a href="#post-212690">Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">Hey all,<br />I recently came across a book called professional Assembly language programming by Richard Blum which teaches Assembly coding for the x86 platform from the ground up in linux. I dont object to installing linux so that doesnt bother me however is it possible that say once I code in GAS using AT&amp;T Syntax, will my code work on windows or will it be Linux specific?<br />Any help is appreciated.</div>
    <div class="meta">Posted on 2010-08-15 09:35:57 by v0rtex</div>
   </div>
   <div class="post" id="post-212691">
    <div class="subject"><a href="#post-212691">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">If you find a version of GNU toolchain (GCC, GAS, etc...) that is compiled for Windows, then you&#039;ll be find.<br /><br />Typical options are MinGW or Cygwin. Dev-C++ is a development package with a pretty decent IDE and MinGW all packaged as one. wxDev-C++ is a continuation of Dev-C++ as a different project. IMHO, grab wxDev-C++ and go at it.<br /><br />As for Linux, if you don&#039;t want to install it on a machine, you can download Virtual Box and install it (probably Ubuntu?) on there. There&#039;s also the option of something like coLinux/andLinux to run Windows and Linux side-by-side, so to speak. andLinux is based on coLinux and Ubuntu, so that might just be your most ideal option.</div>
    <div class="meta">Posted on 2010-08-15 10:04:18 by SpooK</div>
   </div>
   <div class="post" id="post-212692">
    <div class="subject"><a href="#post-212692">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">The syntax is only related to a particular assembler - the binary code it produces is the same.<br />The answer is yes, you can find Windows-based assemblers that use this syntax.<br /></div>
    <div class="meta">Posted on 2010-08-15 10:05:23 by Homer</div>
   </div>
   <div class="post" id="post-212694">
    <div class="subject"><a href="#post-212694">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><br />Of course, any Linux system calls you make within your code will have to be modified if you want that same code to port to Windows. You have quite a few options for writing portable code - Mingw, Cygnus, GTK, APR, NSPR, etc...</div>
    <div class="meta">Posted on 2010-08-15 10:11:59 by p1ranha</div>
   </div>
   <div class="post" id="post-212695">
    <div class="subject"><a href="#post-212695">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote"><br />The syntax is only related to a particular assembler - the binary code it produces is the same.<br />The answer is yes, you can find Windows-based assemblers that use this syntax.<br /></div><br /><div class="quote"><br />Of course, any Linux system calls you make within your code will have to be modified if you want that same code to port to Windows. <br /></div><br /><br />Okay so linux will be fine for everything except I would have to port system calls made in linux to be windows compatible (guessing using the user32.dll etc for windows), I believe that linux is the best option for me at the moment as this book seems rather informative and simplifies the process of learning assembly. I will dual-boot linux and windows so I can change between operating systems if needed, also just <strong>a side question: C++/ Java (with linux compatible IDE&#039;s) Im guessing will still function the same? is this correct or not?</strong></div>
    <div class="meta">Posted on 2010-08-15 10:34:49 by v0rtex</div>
   </div>
   <div class="post" id="post-212697">
    <div class="subject"><a href="#post-212697">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">You&#039;ll probably want to shoot for using the Standard C Library, even in assembly language, so that way your programs will (mostly) work in Windows and Linux.<br /><br />Java is platform-independent, so you should be good with that. C++ is implementation-dependent, so keep using GCC/GPP on both platforms and stick to cross-platform libraries and you&#039;ll be fine.</div>
    <div class="meta">Posted on 2010-08-15 10:42:10 by SpooK</div>
   </div>
   <div class="post" id="post-212709">
    <div class="subject"><a href="#post-212709">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">I wouldn&#039;t recommend learning at&amp;t syntax to anyone (unless you are a masochist).<br />And no it&#039;s not just reverse order and 1-8(?) more keystrokes per line...<br /></div>
    <div class="meta">Posted on 2010-08-15 16:02:50 by drizz</div>
   </div>
   <div class="post" id="post-212710">
    <div class="subject"><a href="#post-212710">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">Instead of dual-booting, run linux in a virtual machine from windwos - much less hassle.</div>
    <div class="meta">Posted on 2010-08-15 16:10:57 by f0dder</div>
   </div>
   <div class="post" id="post-212711">
    <div class="subject"><a href="#post-212711">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote"><br />I wouldn&#039;t recommend learning at&amp;t syntax to anyone (unless you are a masochist).<br />And no it&#039;s not just reverse order and 1-8(?) more keystrokes per line...<br /></div><br /><br />I would recommend learning anything that allows you to grow as a programmer, even if it isn&#039;t your cup of tea.</div>
    <div class="meta">Posted on 2010-08-15 17:45:44 by SpooK</div>
   </div>
   <div class="post" id="post-212715">
    <div class="subject"><a href="#post-212715">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote">I would recommend learning anything that allows you to grow as a programmer,...</div><br /><br />Right. I&#039;m writing assembly language applications since 25 years. I&#039;ve seen Zilog, Intel, Motorolla and SPARC machines and of course I could read and write programs for the IBM main frames. The AT&amp;T syntax isn&#039;t so bad and in some points it&#039;s more clear as the Intel or MS syntax. For example, you don&#039;t have to use the dword ptr, qword ptr etc. By the way, since gcc 3.3 the Intel syntax is also possible by using GAS.<br /><br />Gunther<br /> </div>
    <div class="meta">Posted on 2010-08-15 19:12:44 by Gunther</div>
   </div>
   <div class="post" id="post-212719">
    <div class="subject"><a href="#post-212719">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><em>... and now the epilogue</em> :)<br /><div class="quote"><br />And no it&#039;s not just reverse order and 1-8(?) more keystrokes per line...<br /></div><br />... It&#039;s type checking, I would recommend an assembler that has type checking.<br /><br />Reverse order - HLA has it, no problem if you get used to it.<br />More keystrokes per line - I see it as a some kind of intermediate format to intel syntax. <br />l % $ is there to help the compiler not you.<br /><br /><div class="quote">you don&#039;t have to use the dword ptr, qword ptr etc.</div> is directly related to type checking. &nbsp;in masm/jwasm you can write code that uses &quot;assume&quot; and never write a single &quot;type ptr&quot; as it is used when type is unknown or &nbsp;to override a type - type casting. Never used type casting in c++? &nbsp;;)<br /><br />My personal favorite is jwasm. And <strong>IMHO</strong> there wasn&#039;t as powerful assembler as jwasm for linux before.<br />I will stop here and not go further into how powerful macro language also makes a difference.<br /><br />To conclude, if need you <strong>things done</strong> you&#039;ll use what ever tool you have available. If you have a choice <strong>to learn</strong> it never hurts to hear other peoples opinions.<br /><br /><em>p.s. I agree with everything else said here, have tried andLinux and I think every win-to-lin user should too.</em><br /><hr /><br /><em>EDIT: If you need an alternative book look up: Sivarama P. Dandamudi - Guide to Assembly Language <br />Programming in Linux.</em></div>
    <div class="meta">Posted on 2010-08-15 22:25:15 by drizz</div>
   </div>
   <div class="post" id="post-212727">
    <div class="subject"><a href="#post-212727">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote">is directly related to type checking.&nbsp; in masm/jwasm you can write code that uses &quot;assume&quot; and never write a single &quot;type ptr&quot; as it is used when type is unknown or&nbsp; to override a type - type casting. Never used type casting in c++?</div><br /><br />Yes, type checking. Look: <strong>movl</strong> means, you&#039;re loading a long value into the full register width, while <strong>movw</strong> loads a word and <strong>movb</strong> loads a byte. The same with FPU code: <strong>flds</strong> loads a float, while <strong>fldl</strong> loads a double. Is that type checking, too?<br /><br />All together: which assembly language syntax to use has to do with the personal habit and it&#039;s a matter of taste, because the generated machine code is exactly the same. Moreover, it has some advanteges to be at home in both worlds.<br /><br />Gunther<br /></div>
    <div class="meta">Posted on 2010-08-16 07:00:46 by Gunther</div>
   </div>
   <div class="post" id="post-212728">
    <div class="subject"><a href="#post-212728">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">I know what it means and I accept gas for what it is a compiler that crunches code produced by other tools. There&#039;s really no reason to use GAS if you have <strong>NASM</strong> available for programming by a human. Years back you probably didn&#039;t have a choice as you now have.<br /><br /></div>
    <div class="meta">Posted on 2010-08-16 08:10:05 by drizz</div>
   </div>
   <div class="post" id="post-212729">
    <div class="subject"><a href="#post-212729">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">Not sure if this bit has been cleared up by the previous posts yet, but:<br />Most assemblers have their own syntax, and as such, they are incompatible with other assemblers.<br />There are assemblers that are only available for one or two platforms... For example, MASM and TASM only work under DOS or Windows.<br />If you want to have a cross-platform solution, you should avoid those.<br /><br />There are however also assemblers which are available on a wide variety of platforms. The GNU Assembler was mentioned, part of GCC, which is available for Windows, linux and tons of other OSes. This however uses the rather unique AT&amp;T syntax (although an intel syntax mode has been under development for a while now, so you could try that).<br />There are other options, with a more MASM/TASM-like syntax, such as FASM or NASM, which maintain the advantage that they work on both Windows and linux (and various other OSes).<br /><br />So, pick your assembler carefully :)</div>
    <div class="meta">Posted on 2010-08-16 08:12:59 by Scali</div>
   </div>
   <div class="post" id="post-212736">
    <div class="subject"><a href="#post-212736">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote">The GNU Assembler was mentioned, part of GCC, which is available for Windows, linux and tons of other OSes. This however uses the rather unique AT&amp;T syntax (although an intel syntax mode has been under development for a while now, so you could try that).</div><br /><br />Since gcc 3.3 and above, GAS &quot;understands&quot; the intel syntax. Here is a small example:<br /><br /><pre><code><br /><br />#include &lt;iostream&gt;<br />#include &lt;iomanip&gt;<br /><br />using namespace std;<br /><br />int round_to_near(double v);<br /><br />int main(int argc, char *argv&#91;])<br />{<br />&nbsp; double x = 84.723;						//value to round<br />&nbsp; int a,b;							//integer results<br />&nbsp; <br />&nbsp; //execution starts here<br />&nbsp; <br />&nbsp; a = round_to_near(x);						//round to nearest or even<br />&nbsp; b = (int)x;							//cast with truncation<br />&nbsp; cout &lt;&lt; &quot;Double value x&nbsp; &nbsp; &nbsp; &nbsp; = &quot; &lt;&lt; x &lt;&lt; endl <br />&nbsp; &nbsp; &nbsp;  &lt;&lt; &quot;Nearest int value a&nbsp;  = &quot; &lt;&lt; a &lt;&lt; endl<br />&nbsp; &nbsp; &nbsp;  &lt;&lt; &quot;Truncated int value b = &quot; &lt;&lt; b &lt;&lt; endl &lt;&lt; endl;<br /><br />&nbsp; return 0;							//back to OS<br />}<br /><br />/*<br />round_to_nearest<br />Task:		Round a float value to the nearest integer value.<br />Input:		 = float value<br />Output:		nearest integer value<br />*/<br />int round_to_near(double v)<br />{<br />&nbsp; __asm__ __volatile__(<br />&nbsp; &nbsp; &quot;.intel_syntax noprefix 			\n\t&quot;		//enable Intel syntax	<br />&nbsp; &nbsp; &quot;sub	esp,4 				\n\t&quot;		//data transfer<br />&nbsp; &nbsp; &quot;fld	qword ptr 		\n\t&quot;		//load v<br />&nbsp; &nbsp; &quot;fistp	dword ptr 			\n\t&quot;		//store with round to nearest<br />&nbsp; &nbsp; &quot;pop	eax				\n\t&quot;		//load function result<br />&nbsp; &nbsp; &quot;.att_syntax prefix 			\n\t&quot;		//switch back to AT&amp;T syntax for the rest<br />&nbsp; &nbsp; :<br />&nbsp; &nbsp; :&quot;g&quot;(v)<br />&nbsp; &nbsp; :<br />&nbsp; &nbsp; );<br />}<br /><br /></code></pre><br /><br />You can compile it under 32 bit Linux, BSD or Windows (with mingw) and the application will run on every old 386/387 tandem. But it doesn&#039;t compile under x86 based MacOS X. What&#039;s the reason for that? MacOS X is a BSD patch and Apple patched also the gcc by &quot;de-optimizing&quot; the intel syntax switch. Bad luck. One has to use AT&amp;T syntax under MacOS X and nothing else.<br /><br />Gunther<br /> </div>
    <div class="meta">Posted on 2010-08-16 14:15:39 by Gunther</div>
   </div>
   <div class="post" id="post-212737">
    <div class="subject"><a href="#post-212737">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote"><br />One has to use AT&amp;T syntax under MacOS X and nothing else.<br /></div><br /><br />Is this true when using LLVM, the eventual replacement for the GNU toolchain on Mac OS X?</div>
    <div class="meta">Posted on 2010-08-16 14:35:11 by SpooK</div>
   </div>
   <div class="post" id="post-212739">
    <div class="subject"><a href="#post-212739">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote">Is this true when using LLVM, the eventual replacement for the GNU toolchain on Mac OS X?</div><br /><br />I haven&#039;t used LLVM on MacOS X until now. It&#039;s definitely true for the Apple based GCC. By the migration of some applications to MacOS X, I had to re-write the inline assembly parts in AT&amp;T syntax.<br /><br />Gunther<br /> </div>
    <div class="meta">Posted on 2010-08-16 17:14:25 by Gunther</div>
   </div>
   <div class="post" id="post-212757">
    <div class="subject"><a href="#post-212757">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body">Stringified inline assembly .att_syntax for extra pleasure :twisted:<br /><br />Seriously, inline assembly be it icc, gcc, ms c++, delphi basm does not matter. For 1-10% asm within a project it does not matter what syntax it is. For 100% asm it does - IMHO.<br /><br />This being an assembly board I guess 100% asm is not a foreign term.<br /><br />What I would like to see in c++ is a powerful macro engine that most assemblers have. Text substitution&nbsp; FTW - NOT.<br /><br />But what do I know. Alles ist relativ. <br /></div>
    <div class="meta">Posted on 2010-08-17 10:07:05 by drizz</div>
   </div>
   <div class="post" id="post-212761">
    <div class="subject"><a href="#post-212761">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote">Stringified inline assembly .att_syntax for extra pleasure</div><br /><br />That has to do with the GCC design. It compiles always via assembly; so in any case GAS is involved as back end in the GNU tool chain. The inline code is simply passed into the foo.s file for GAS; you can check that with the -S switch. Do you know a better way to solve that problem?<br /><br /><div class="quote">What I would like to see in c++ is a powerful macro engine that most assemblers have. </div> <br /><br />That depends. I know, with macro features you can do magic things. There are a lot of ardent macro entusiasts. In most cases, these macro constructs are a bit like high level languages. So, why not use the more powerful high level language for that purposes? On the other hand, you can DEFINE your macros in C/C++ and the compiler will do the rest. <br /><br />But again, that&#039;s only my personal point of view. <br /><br /><div class="quote">Alles ist relativ.</div><br /><br />Yes and a matter of taste. All roads lead to Rome. <br /><br />Gunther<br /></div>
    <div class="meta">Posted on 2010-08-17 11:51:50 by Gunther</div>
   </div>
   <div class="post" id="post-212763">
    <div class="subject"><a href="#post-212763">Re: Does ASM Code for the I386 coded in linux work with windows?</a></div>
    <div class="body"><div class="quote">That has to do with the GCC design. It compiles always via assembly; so in any case GAS is involved as back end in the GNU tool chain. The inline code is simply passed into the foo.s file for GAS; you can check that with the -S switch.</div> I know I know :) <br /><br /><div class="quote">Do you know a better way to solve that problem?</div> External asm module? What assemblers are there for MacOSX? Nasm, yes?<br /><br /><div class="quote">That depends. I know, with macro features you can do magic things. There are a lot of ardent macro entusiasts. In most cases, these macro constructs are a bit like high level languages. So, why not use the more powerful high level language for that purposes? On the other hand, you can DEFINE your macros in C/C++ and the compiler will do the rest. <br /></div> I&#039;m glad you didn&#039;t suggest template meta programming :)<br /><br /><div class="quote">So, why not use the more powerful high level language for that purposes?</div><br />Do you know of any that can do this :<br /><pre><code>; This generates static data in compile time<br />; jwasm/masm <br />.data<br />align 16<br />CRC32Table label dword<br />i = 0<br />crc = i<br />WHILE i LT 256<br />	crc = i<br />	REPT 8<br />	 &nbsp; &nbsp;crc = (crc shr 1) xor (0EDB88320h * (crc and 1))<br />	ENDM<br />	DD crc<br />	i = i + 1<br />ENDM</code></pre> Please do not suggest external scripting it&#039;s not the same.<br /><br /></div>
    <div class="meta">Posted on 2010-08-17 12:38:41 by drizz</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=30163&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=30163&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="30163" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=30163&amp;page=2">&gt;</a><a href="../?id=30163&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>