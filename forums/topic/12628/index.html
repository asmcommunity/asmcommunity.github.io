<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Questions about PROTO/LOCAL - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12628" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=12628">Questions about PROTO/LOCAL</a></p>
   <div class="post" id="post-97707">
    <div class="subject"><a href="#post-97707">Questions about PROTO/LOCAL</a></div>
    <div class="body">Hello I want to declare a local data:<br />LOCAL ****:BYTE<br /><br />How its posible to declare it so ?: 190 DUP (0) ???<br />If there isn't a way how to it ?<br /><br />Thanks + Bye !</div>
    <div class="meta">Posted on 2003-04-18 08:57:00 by Forginforcer</div>
   </div>
   <div class="post" id="post-97710">
    <div class="subject"><a href="#post-97710">Questions about PROTO/LOCAL</a></div>
    <div class="body">LOCAL PathStr[190]:BYTE<br /><br />; you'll have to fill it with zeroes if you wish.</div>
    <div class="meta">Posted on 2003-04-18 09:06:51 by bitRAKE</div>
   </div>
   <div class="post" id="post-97715">
    <div class="subject"><a href="#post-97715">Questions about PROTO/LOCAL</a></div>
    <div class="body">Hi thanks for you quick response !<br /><br />What means you have to fill...if you wish ? - Isn't there a way do inizialisate it wich zeros ?<br /><br />How to declare a string while inizialsiasting ?<br /><br />By the way, its possible to make a variable du declaration ?<br /><br />guguck DB 150<br />guguckback DB  DUP(0)<br /><br />P.S. DUP exaclty means duplicate, doesn't ?<br /><br />PPS whats that ? h_u_h_u doesnt work anymore ! :eek: Whats about my beloved h_u_h_u ! :confused: :mad: :mad: :mad: :mad: :o :( :confused:</div>
    <div class="meta">Posted on 2003-04-18 09:17:35 by Forginforcer</div>
   </div>
   <div class="post" id="post-97717">
    <div class="subject"><a href="#post-97717">Questions about PROTO/LOCAL</a></div>
    <div class="body"><pre><code><br />myproc proc<br />LOCAL string&#91;64&#93;&#58;BYTE<br />mov ecx, 16<br />lea esi,<br />@@&#58;<br />mov DWORD PTR&#91;esi&#93;, 0<br />add esi,4<br />dec ecx<br />jnz @B<br />ret<br />myproc endp<br /></code></pre><br /><br />Warning the code takes time. Anyway, there is no need to make the string full of zeros, just terminate your string with a zero would be sufficient.</div>
    <div class="meta">Posted on 2003-04-18 09:23:21 by roticv</div>
   </div>
   <div class="post" id="post-97721">
    <div class="subject"><a href="#post-97721">Questions about PROTO/LOCAL</a></div>
    <div class="body">Hello @<br /><br />After inizialisation a BYTE as LOCAL, its possible to declare it as a 200Byte long string ? :confused:<br />But where I can gat the string, when i cant inizisialisate one ?<br /><br />Gr??eAlle PROTO <br />          LOCAL Gru?1:BYTE<br />          INVOKE lstrcpy, ADDR Gru?1, :confused: <br />[...]<br /><br />I dont know further</div>
    <div class="meta">Posted on 2003-04-18 09:30:57 by Forginforcer</div>
   </div>
   <div class="post" id="post-97722">
    <div class="subject"><a href="#post-97722">Questions about PROTO/LOCAL</a></div>
    <div class="body">No. You have to declare it as 200 bytes before you can use it. Go do some reading up on esp and stack.</div>
    <div class="meta">Posted on 2003-04-18 09:34:32 by roticv</div>
   </div>
   <div class="post" id="post-97725">
    <div class="subject"><a href="#post-97725">Questions about PROTO/LOCAL</a></div>
    <div class="body">Year but, how to declare it after iniziasiating, when I'm not allowed to declare a sting ?:confused: <br />Then I need to decare it in .data but i dont want to that.<br /><br />Deep Regards !</div>
    <div class="meta">Posted on 2003-04-18 09:42:45 by Forginforcer</div>
   </div>
   <div class="post" id="post-97769">
    <div class="subject"><a href="#post-97769">Questions about PROTO/LOCAL</a></div>
    <div class="body">String constants cannot be stored on the stack before the program starts.  (There is no space on the stack when the program starts.) You must copy it from global (.data) storage. Any HLL that allows string initialization in a local declaration must do this.<br /><br />I believe the masm32 package has macros for doing this.</div>
    <div class="meta">Posted on 2003-04-18 14:08:14 by tenkey</div>
   </div>
   <div class="post" id="post-97836">
    <div class="subject"><a href="#post-97836">Questions about PROTO/LOCAL</a></div>
    <div class="body">Red,<br /><br />Tenkey is right, what you are asking for is &quot;initialised&quot; data when you want memory on the stack filling with zeros and this can only be stored in the .DATA section.<br /><br />With a &quot;LOCAL&quot; value, the space is allocated on the stack and it is your responsibility to put what you need in it. A zero fill of memory is easy enough to do with &quot;REP STOSD&quot;.<br /><br />You can dynamically allocate zero filled memory with GlobalAlloc if you need larger amounts than you would normally do on the stack so you have enough options to get the job done that you want.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2003-04-18 22:19:56 by hutch--</div>
   </div>
   <div class="post" id="post-97937">
    <div class="subject"><a href="#post-97937">Questions about PROTO/LOCAL</a></div>
    <div class="body">THK hutch-- + <br />now I know, thats only possible to stoare data at .data / .data.<br /><br />Thanks again ! I learn much ! :cool: <br /><br />DeeP Regards !</div>
    <div class="meta">Posted on 2003-04-19 02:40:54 by Forginforcer</div>
   </div>
  </div>
 </body>
</html>