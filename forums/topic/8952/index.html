<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>GreyCode2Bin (MASM) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8952" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=8952">GreyCode2Bin (MASM)</a></p>
   <div class="post" id="post-65904">
    <div class="subject"><a href="#post-65904">GreyCode2Bin (MASM)</a></div>
    <div class="body">GreyCode2Bin PROC a_iNum:DWORD<br /> mov eax, a_iNum<br /> mov ecx, eax<br /><br /> REPEAT 31<br />  shr ecx, 1<br />  xor eax, ecx<br /> ENDM<br /><br />GreyCode2Bin ENDP<br /><br />-- -------<br /><br />A friend of mine came up with this algo.<br />I made an MMX version which takes about 27 cycles also but I don't remember how it was. I'll post it later.<br />BTW. Is there any use for grey codes at this time?</div>
    <div class="meta">Posted on 2002-11-15 08:21:01 by gliptic</div>
   </div>
   <div class="post" id="post-66017">
    <div class="subject"><a href="#post-66017">GreyCode2Bin (MASM)</a></div>
    <div class="body">Erm... what's a grey code?</div>
    <div class="meta">Posted on 2002-11-16 09:34:48 by iblis</div>
   </div>
   <div class="post" id="post-67700">
    <div class="subject"><a href="#post-67700">GreyCode2Bin (MASM)</a></div>
    <div class="body">In case you were not joking...<br /><br />greycode is a counting system where each sequential number changes by only one binary bit. This allows for error detection during &quot;counting&quot;, amongst other things.<br />It was common at one point in certain types of encoders used for things like positioning.</div>
    <div class="meta">Posted on 2002-11-27 01:46:41 by Homer</div>
   </div>
   <div class="post" id="post-69805">
    <div class="subject"><a href="#post-69805">GreyCode2Bin (MASM)</a></div>
    <div class="body">Opps, thinken drunken backwards.<br /><br />Kewl. I've wondered how to do that. Didn't realize that it was a modular function (in the mathmatical sense).<br /><br />&lt;begin snip&gt;<br />I hope you didn't spend to much time reinventing the wheel: <a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=7465">Bin2GreyCode -- In 3 lines of FAsm</a><br />&lt;end Snip&gt;<br />GreyCode is useful for tracking the direction of motion. Instead of checking x number of bits, you only need to check 2 bits. Thats how ball mice worked, and how the scroll wheel works.<br /><br />Grey Code is also used by allPossibleImages.</div>
    <div class="meta">Posted on 2002-12-08 03:03:00 by eet_1024</div>
   </div>
   <div class="post" id="post-69822">
    <div class="subject"><a href="#post-69822">GreyCode2Bin (MASM)</a></div>
    <div class="body">That's misleading - mice have generally used a variety of incremental rotary encoder, which has one, two or three &quot;channels&quot;...<br /><br />Most common is the two channel optical encoder, where we use a spoked wheel or other slotted wheel to break two beams of light.<br /><br />Either the channel optics or the encoder slots are offset by 50% of a slot.<br />This causes a situation where the two channels can have four possible values:<br /><br />A B<br />0 0<br />0 1<br />1 0<br />1 1<br /><br />In turn we can use this &quot;quadrature output&quot; to determine the direction and to identify miscounts. This is called quadrature decoding. I have a software version of it in another thread. You can buy a chip with 8 pins called a 7083 that can do the job very nicely, giving you a count up/count down output.<br />Better decoder ic's even have an onboard counter !!<br />This has nothing at all to do with gray code.<br />Again, this is called &quot;quadrature decoding&quot;.<br />It's a method of obtaining four counts per encoder cycle, verifyiung direction, and identifying miscount. It's also known as &quot;X4&quot; in digital electronic circles.</div>
    <div class="meta">Posted on 2002-12-08 07:04:13 by Homer</div>
   </div>
   <div class="post" id="post-70282">
    <div class="subject"><a href="#post-70282">GreyCode2Bin (MASM)</a></div>
    <div class="body">If you offset two sets of encoding slots by 50%, you get, depending on direction, the signal sequence<br /><br />0 0<br />0 1<br />1 1<br />1 0<br /><br />or<br /><br />0 0<br />1 0<br />1 1<br />0 1<br /><br />which are Gray code sequences.</div>
    <div class="meta">Posted on 2002-12-10 16:33:00 by tenkey</div>
   </div>
   <div class="post" id="post-70350">
    <div class="subject"><a href="#post-70350">GreyCode2Bin (MASM)</a></div>
    <div class="body">strictly speaking, I guess so, but since the definition of Gray Code is that the numbers alter by one bit per increment and we have only one &quot;other&quot; bit, really that's pretty cheesy.<br />Try adding a third channel, you will see that we actually have a simple binary count, whether it be forward or backward... greater than 2 channels shows that this is not Gray Code per se...<br />The type of encoder wheel used for industrial machinery and newer carnival rides is the &quot;absolute&quot; type of encoder which has one channel per bit of resolution of the encoder output, and quite often has 12 or more bits, and thus, 12 or more channels, and 12 or more tracks on the encoder wheel (rather than offsetting the channel pickups)...<br />Although I have NEVER seen Grey Code applied to an absolute encoder wheel, I should think it would have been the obvious choice for that application!!<br />Has anyone seen Grey Code applied to an absolute encoder wheel?<br /><br />Note on scroll wheel:<br />There's a weird sort of single-track 3-channel encoder which uses the Vernier Principle to produce a predictable output which is then decoded using usually a rom lookup table on a surface mount ic. Those are the ones used in the mouse scroll wheel (the mice with the wheel on the middle button)... that principle is also used in a kind of mechanical pump. They usually are not optical but use brushes and copper pads like some old dc electric motors...<br />Simply put, if there's 3 channels, thats an odd number, so the encoder wheel has an even number so that if the channel optics are offset by 120 degrees (radially equidistant) then the 3 channels will never be above the same relative point on the encoder at the same time.<br />Vernier measuring devices of all kinds rely on this principle... the idea being that we have two scales which just don't marry, our accuracy is enhanced by their dissimilarity when we compare them against one another.</div>
    <div class="meta">Posted on 2002-12-10 23:01:04 by Homer</div>
   </div>
   <div class="post" id="post-70567">
    <div class="subject"><a href="#post-70567">GreyCode2Bin (MASM)</a></div>
    <div class="body">I stand corrected...<br />both binary AND GrayCode versions of incremental AND absolute encoders exist.</div>
    <div class="meta">Posted on 2002-12-12 06:23:30 by Homer</div>
   </div>
  </div>
 </body>
</html>