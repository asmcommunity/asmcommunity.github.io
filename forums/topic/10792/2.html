<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Why VC code is faster than mine. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10792" />
  <link rel="prev" href="../?id=10792&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=10792">Why VC code is faster than mine.</a></p>
   <div class="post" id="post-81686">
    <div class="subject"><a href="#post-81686">Why VC code is faster than mine.</a></div>
    <div class="body"><pre><code>	movq	mm0, &lt;0000000100000002&gt; ; these constants can be loaded from registers<br />	movq	mm1, &lt;0000000100000001&gt; ; or created, in order not to polute the cache.<br />_1&#58;	movq	&#91;ecx+eax*8&#93;, mm0<br />	paddd	mm0, mm1<br />	inc	eax<br />	jne	_1</code></pre>The Intel compiler will actually produce this code if tricked into it.  I forget the trick, but it happened once - now it only produces garbage for this problem.  Maybe, it's the new version geared toward the P4?<br /><br />Ideally, you don't want to execute this code for large arrays (ie modify the algo acting on the array to produce these values before changing the array).  This is not alway possible, but should be in mind on such a small memory bound loop.</div>
    <div class="meta">Posted on 2003-02-13 22:10:24 by bitRAKE</div>
   </div>
  </div>
 </body>
</html>