<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Need help with filereading... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11555" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=11555">Need help with filereading...</a></p>
   <div class="post" id="post-87444">
    <div class="subject"><a href="#post-87444">Need help with filereading...</a></div>
    <div class="body">Hi, as you already know, Im not that good. And now I need a push to think again.<br />Via FILE_END I obtain to reach the end of a file. How its possible to get the last 20 characters behind the end ?<br />I know a little bit about using writeFile, but readfile with this complexness I not sure.<br /><br />:mad:</div>
    <div class="meta">Posted on 2003-03-16 15:27:57 by Forginforcer</div>
   </div>
   <div class="post" id="post-87461">
    <div class="subject"><a href="#post-87461">Need help with filereading...</a></div>
    <div class="body">Well this probably isn't the best way but it should work.<br /><br /><pre><code><br />invoke CreateFile, addr YourFile, GENERIC_READ,NULL,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL<br />mov hFile,eax<br />invoke SetFilePointer, hFile, 0,NULL,FILE_END<br />invoke ReadFile, hFile, addr JustRead, -20, OFFSET NumberOfBytesRead,NULL<br />;I think this answers your question<br /></code></pre></div>
    <div class="meta">Posted on 2003-03-16 16:21:43 by Homer</div>
   </div>
   <div class="post" id="post-87470">
    <div class="subject"><a href="#post-87470">Need help with filereading...</a></div>
    <div class="body"><div class="quote">invoke ReadFile, hFile, addr JustRead, -20, OFFSET NumberOfBytesRead,NULL</div><br />Using a negative value for bytesToRead? I don't think that's documented behaviour...<br />You could use this:<br /><pre><code>invoke SetFilePointer, &#91;hFile&#93;, -20, NULL, FILE_END</code></pre><br /><br />Thomas</div>
    <div class="meta">Posted on 2003-03-16 16:58:33 by Thomas</div>
   </div>
   <div class="post" id="post-87485">
    <div class="subject"><a href="#post-87485">Need help with filereading...</a></div>
    <div class="body">lol i'm sorry<br />thomas is right.<br /><br />i screwed up my first answer. doh!<br /><br />:stupid:</div>
    <div class="meta">Posted on 2003-03-16 18:56:49 by Homer</div>
   </div>
   <div class="post" id="post-87486">
    <div class="subject"><a href="#post-87486">Need help with filereading...</a></div>
    <div class="body"><div class="quote"><br />lol i'm sorry<br />thomas is right.<br /><br />i screwed up my first answer. doh! </div><br /><br />Yeah but Homer you'll never make the same mistake now. :)<br /><br />Donkey</div>
    <div class="meta">Posted on 2003-03-16 19:02:36 by donkey</div>
   </div>
   <div class="post" id="post-87495">
    <div class="subject"><a href="#post-87495">Need help with filereading...</a></div>
    <div class="body">lol and i'll never have the chance to.</div>
    <div class="meta">Posted on 2003-03-16 21:16:11 by Homer</div>
   </div>
   <div class="post" id="post-87613">
    <div class="subject"><a href="#post-87613">Need help with filereading...</a></div>
    <div class="body">Ah, thanks i got it !</div>
    <div class="meta">Posted on 2003-03-17 12:15:05 by Forginforcer</div>
   </div>
  </div>
 </body>
</html>