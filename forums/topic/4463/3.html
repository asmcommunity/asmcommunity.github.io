<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>adler32 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4463" />
  <link rel="prev" href="../?id=4463&amp;page=2" />  <link rel="next" href="../?id=4463&amp;page=4" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=4463">adler32</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=4463&amp;page=1" style="">&laquo;</a><a href="../?id=4463&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="4463" /><input type="number" name="page" min="1" max="4" step="1" value="3" onchange="this.form.submit();" /><a href="../?id=4463&amp;page=4">&gt;</a><a href="../?id=4463&amp;page=4">&raquo;</a></form>   <div class="post" id="post-31487">
    <div class="subject"><a href="#post-31487">adler32</a></div>
    <div class="body"><div class="quote"><br />i had already tried that and if i leave even *one* TESTPROC in (nico,bitRAKE,Thomas2,etc), i still get that app error.  thanks for all this time you're spending to help me :) </div>Strange?  Must be something else?</div>
    <div class="meta">Posted on 2002-03-29 13:37:15 by bitRAKE</div>
   </div>
   <div class="post" id="post-31488">
    <div class="subject"><a href="#post-31488">adler32</a></div>
    <div class="body"><div class="quote"><br />Strange?  Must be something else? </div><br /><br />thanks anyway :)  i'll try to recode the testing procedure.</div>
    <div class="meta">Posted on 2002-03-29 13:39:00 by jademtech</div>
   </div>
   <div class="post" id="post-31490">
    <div class="subject"><a href="#post-31490">adler32</a></div>
    <div class="body"><div class="quote"><br />thanks anyway :)  i'll try to recode the testing procedure.</div>It will be very interesting to see the performance characteristics of the algos on other processors.  Seeing as how you have a P1 &amp; P3 there... ;) Your welcome.</div>
    <div class="meta">Posted on 2002-03-29 13:53:10 by bitRAKE</div>
   </div>
   <div class="post" id="post-31492">
    <div class="subject"><a href="#post-31492">adler32</a></div>
    <div class="body"><div class="quote"><br />It will be very interesting to see the performance characteristics of the algos on other processors.  Seeing as how you have a P1 &amp; P3 there... ;) Your welcome. </div><br /><br />actually, i have the following processors in my house:<br />8086 (somewhere...)<br />286 (8MHz, i think) in a box<br />386 (several, all at 25 MHz) - plugged in<br />no 486s :(<br />P133<br />PPro150<br />P200MMX<br />PII300<br />P!!!667<br /><br />much variety :)<br /><br />oh... i also realised:  i was using a file that was too small...  it was over 2000000 bytes, but under 2MBs.  about to run the test... :)</div>
    <div class="meta">Posted on 2002-03-29 14:01:09 by jademtech</div>
   </div>
   <div class="post" id="post-31499">
    <div class="subject"><a href="#post-31499">speed test results:  P133,PPro,PII,PIII</a></div>
    <div class="body"><pre><code>P!!! 667MHz &#40;RAM&#58;128 MBs, Win2K&#41;<br />Nico		&#58;&#91;B584D210&#93;, 2443 ms &#91;100x2MB&#93;, 81.86 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 3746 ms &#91;100x2MB&#93;, 53.39 MB/s<br />BitRAKE2		&#58;&#91;B584D210&#93;, 3755 ms &#91;100x2MB&#93;, 53.26 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 3685 ms &#91;100x2MB&#93;, 54.27 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 3976 ms &#91;100x2MB&#93;, 50.30 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 4046 ms &#91;100x2MB&#93;, 49.43 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 2093 ms &#91;100x2MB&#93;, 95.55 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 1462 ms &#91;100x2MB&#93;, 136.79 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 1412 ms &#91;100x2MB&#93;, 141.64 MB/s<br /><br />Pent 133MHz	&#40;RAM&#58;48MBs, WinNT&#41;<br />Nico		&#58;&#91;B584D210&#93;, 10435 ms &#91;100x2MB&#93;, 19.16 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 20579 ms &#91;100x2MB&#93;, 9.71 MB/s<br />BitRAKE2		&#58;&#91;B584D210&#93;, 20550 ms &#91;100x2MB&#93;, 9.73 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 13289 ms &#91;100x2MB&#93;, 15.05 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 6129 ms &#91;100x2MB&#93;, 32.63 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 6088 ms &#91;100x2MB&#93;, 32.85 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 8763 ms &#91;100x2MB&#93;, 22.82 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 5388 ms &#91;100x2MB&#93;, 37.11 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 9543 ms &#91;100x2MB&#93;, 20.95 MB/s<br /><br />PII 300MHz	&#40;RAM&#58;128MBs, WinNT&#41;<br />Nico		&#58;&#91;B584D210&#93;, 10435 ms &#91;100x2MB&#93;, 44.09 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 20579 ms &#91;100x2MB&#93;, 26.07 MB/s<br />BitRAKE2		&#58;&#91;B584D210&#93;, 20550 ms &#91;100x2MB&#93;, 26.34 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 13289 ms &#91;100x2MB&#93;, 26.91 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 8192 ms &#91;100x2MB&#93;, 24.41 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 8192 ms &#91;100x2MB&#93;, 24.41 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 8763 ms &#91;100x2MB&#93;, 52.01 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 5388 ms &#91;100x2MB&#93;, 74.79 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 9543 ms &#91;100x2MB&#93;, 78.30 MB/s<br /><br />PPro 150MHz	&#40;RAM&#58;64MBs, Win95&#41;<br />Nico		&#58;&#91;B584D210&#93;, 14214 ms &#91;100x2MB&#93;, 14.07 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 27275 ms &#91;100x2MB&#93;, 7.33 MB/s<br />BitRAKE2		&#58;&#91;B584D210&#93;, 25229 ms &#91;100x2MB&#93;, 7.92 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 26381 ms &#91;100x2MB&#93;, 7.58 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 34196 ms &#91;100x2MB&#93;, 5.84 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 28674 ms &#91;100x2MB&#93;, 6.97 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 10204 ms &#91;100x2MB&#93;, 19.60 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 9078 ms &#91;100x2MB&#93;, 22.03 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 7745 ms &#91;100x2MB&#93;, 25.82 MB/s</code></pre>p.s. i hope you find this interesting :)</div>
    <div class="meta">Posted on 2002-03-29 14:31:26 by jademtech</div>
   </div>
   <div class="post" id="post-31505">
    <div class="subject"><a href="#post-31505">adler32</a></div>
    <div class="body">Yes I found something interesting:<br /><div class="quote"><br />Svin2		:<strong>, 8192 ms [100x2MB], 24.41 MB/s<br />Nico2		:<strong>, 8763 ms [100x2MB], 52.01 MB/s<br /></div><br />Very interesting math :)<br />According to it:<br />8192/8763=24.41/52.01</div>
    <div class="meta">Posted on 2002-03-29 15:23:22 by The Svin</div>
   </div>
   <div class="post" id="post-31506">
    <div class="subject"><a href="#post-31506">adler32</a></div>
    <div class="body"><div class="quote"><br />Yes I found something interesting:<br /><br />Very interesting math :)<br />According to it:<br />8192/8763=24.41/52.01 </div><br /><br />sorry... this was the correct line:<br />Nico2		:<strong>, 3845 ms [100x2MB], 52.01 MB/s<br /><br />(i copied it out of a message box into another file and re-transcribed again 'cuz i couldn't get it to output to console - and i copied and pasted the lines from the P133 table)</div>
    <div class="meta">Posted on 2002-03-29 15:33:04 by jademtech</div>
   </div>
   <div class="post" id="post-31507">
    <div class="subject"><a href="#post-31507">adler32</a></div>
    <div class="body">Do you have any test scripts? I guess there is no<br />practical way of doing 64/128 integer division?<br /><br />Have not tested it, but it may be useful:<br /><br /><span style="font-size:9px><br /><br />Adler32 proc alder:dword, buffer:dword, len:dword  <br />local end:dword                                    <br />                         mov                          edx, dword ptr <br />                         mov                          ebx, dword ptr <br />                         mov                          ecx, edx<br />                         mov                          eax, ebx                           <br />                         shr                          ecx, 16                            <br />                         add                          eax, dword ptr                <br />                         and                          ecx, 0FFFFh                        <br />                         mov                          dword ptr , eax                   <br />                         and                          edx, 0FFFFh                               <br />Loop:                    movzx                        eax, byte ptr                 <br />                         inc                          ebx                                <br />                         add                          edx, eax                           <br />                         jno                          @F                                 <br />                         sub                          edx, 65537*BASE                    <br />@@:                      add                          ecx, edx                           <br />                         jno                          @F                                 <br />                         sub                          ecx, 65537*BASE                    <br />@@:                      cmp                          ebx, dword ptr                <br />                         jbe                          Loop                               <br />                         jmp                          @F                                 <br />DivS2:                   sub                          ecx, BASE                          <br />@@:                      cmp                          ecx, BASE                          <br />                         jae                          DivS2                              <br />                         jmp                          @F                                 <br />DivS1:                   sub                          edx, BASE                          <br />@@:                      cmp                          edx, BASE                          <br />                         jae                          DivS1                              <br />                         shr                          ecx, 16                            <br />                         add                          ecx, edx                           <br />                         mov                          eax, ecx                           <br />                         ret                       </span></div>
    <div class="meta">Posted on 2002-03-29 15:35:28 by bdjames</div>
   </div>
   <div class="post" id="post-31510">
    <div class="subject"><a href="#post-31510">Thomas3AndSvinAndBitRake</a></div>
    <div class="body">Wow, it appears we work great together. :)<br />Thank you, <strong>jademtech</strong>.</div>
    <div class="meta">Posted on 2002-03-29 15:52:34 by bitRAKE</div>
   </div>
   <div class="post" id="post-31516">
    <div class="subject"><a href="#post-31516">adler32</a></div>
    <div class="body">Tests for PMMX200.<br />Svin2 and Thomas3AndSvin identical here (I don't know why we need test procs with bugs so I just replaced it)<br /><pre><code><br />eax = Nico                        &#58; &#91;A2EAC21F&#93;, 6630 ms &#91;100x2MB&#93;,   30.16 MB/s<br />eax = BitRAKE                     &#58; &#91;A2EAC21F&#93;, 13900 ms &#91;100x2MB&#93;,   14.38 MB/s<br />eax = BitRAKE2                    &#58; &#91;A2EAC21F&#93;, 13769 ms &#91;100x2MB&#93;,   14.52 MB/s<br />eax = Thomas2                     &#58; &#91;A2EAC21F&#93;, 6069 ms &#91;100x2MB&#93;,   32.95 MB/s<br />eax = Thomas3                     &#58; &#91;A2EAC21F&#93;, 3736 ms &#91;100x2MB&#93;,   53.53 MB/s<br />eax = Svin2                       &#58; &#91;A2EAC21F&#93;, 3214 ms &#91;100x2MB&#93;,   62.22 MB/s<br />eax = Nico2                       &#58; &#91;A2EAC21F&#93;, 5318 ms &#91;100x2MB&#93;,   37.60 MB/s<br />eax = Thomas3AndSvin              &#58; &#91;A2EAC21F&#93;, 3214 ms &#91;100x2MB&#93;,   62.22 MB/s<br />eax = Thomas3AndSvinAndBitRAKE    &#58; &#91;A2EAC21F&#93;, 5798 ms &#91;100x2MB&#93;,   34.49 MB/s<br /></code></pre><br />Some more comments on previous &quot;pentium&quot; tests.<br />movxz would work fine only from PPRO+<br />But ,bitRake, if I were you I would rearange instructions to<br />remove dependeces in main loop. It for sure increase speed I checked.<br />PPlain has very bad prediction algorithm it explains everything.</div>
    <div class="meta">Posted on 2002-03-29 17:02:12 by The Svin</div>
   </div>
   <div class="post" id="post-31523">
    <div class="subject"><a href="#post-31523">adler32</a></div>
    <div class="body"><div class="quote"><br />But ,bitRake, if I were you I would rearange instructions to<br />remove dependeces in main loop. It for sure increase speed I checked. PPlain has very bad prediction algorithm it explains everything.</div>Sorry, I don't understand - what dependeces?<br />What algo do you mean?<br />Thomas's &quot;bitRAKE2&quot; not equal bitRAKE's &quot;bitRAKE2&quot; :)</div>
    <div class="meta">Posted on 2002-03-29 17:26:38 by bitRAKE</div>
   </div>
   <div class="post" id="post-31524">
    <div class="subject"><a href="#post-31524">adler32</a></div>
    <div class="body"><span style="font-size:9px><br />bdjames proc uses ebx esi edi alder:dword, buffer:dword, len:dword <br />                         mov edx, dword ptr  <br />                         mov ebx, dword ptr  <br />                         mov ecx, edx  <br />                         shr ecx, 16 <br />                         mov esi, dword ptr  <br />                         and ecx, 0FFFFh <br />                         add ebx, esi<br />                         and edx, 0FFFFh <br />                         neg esi<br /><br />                         _Loop: mov eax, dword ptr <br />                         movzx edi, al<br />                         add edx, edi <br />                         jnc @F<br />                         add edx, 0F0000h<br />                         @@:add ecx, edx <br />                         jnc @F<br />                         add ecx, 0F0000h<br />                         @@:shr eax, 8 <br />                         movzx edi, al<br />                         add edx, edi <br />                         jnc @F<br />                         add edx, 0F0000h<br />                         @@:add ecx, edx <br />                         jnc @F<br />                         add ecx, 0F0000h<br />                         @@:shr eax, 8<br />                         movzx edi, al<br />                         add edx, edi <br />                         jnc @F<br />                         add edx, 0F0000h<br />                         @@:add ecx, edx <br />                         jnc @F<br />                         add ecx, 0F0000h<br />                         @@:shr eax, 8<br />                         movzx edi, al <br />                         add edx, edi <br />                         jnc @F<br />                         add edx, 0F0000h<br />                         @@:add ecx, edx <br />                         jnc @F<br />                         add ecx, 0F0000h<br />                         @@:add esi, 4<br />                         jne _Loop <br /><br />                         .data <br />                         Table dword 4293984256<br />                         dword 2146992128<br />                         dword 1073496064<br />                         dword 536748032<br />                         dword 268374016<br />                         dword 134187008<br />                         dword 67093504<br />                         dword 33546752<br />                         dword 16773376<br />                         dword 8386688<br />                         dword 4193344<br />                         dword 2096672<br />                         dword 1048336 <br />                         dword 524168<br />                         dword 262084 <br />                         dword 131042 <br />                         dword 65521<br /><br />                         .code <br />                         mov ebx, offset Table <br />                         _Mod:mov eax, <br />                         add ebx, 4 <br />                         cmp ecx, eax <br />                         jb @F <br />                         sub ecx, eax <br />                         @@:cmp edx, eax <br />                         jb @F <br />                         sub edx, eax <br />                         @@:cmp ebx, offset Table + 64 <br />                         jbe _Mod <br /><br />                         @@:shl ecx, 16 <br />                         add ecx, edx <br />                         mov eax, ecx <br />                         ret <br />                         bdjames endp <br /><br />   </span></div>
    <div class="meta">Posted on 2002-03-29 17:29:25 by bdjames</div>
   </div>
   <div class="post" id="post-31533">
    <div class="subject"><a href="#post-31533">adler32</a></div>
    <div class="body">Hi,Thomas<br />Please, check for me if my proc is correct and fast for you..<pre><code><br /><br />GetAdler proc   lpData&#58;DWORD, DataSize&#58;DWORD<br />	 push	ebp<br />	 push   ebx<br />	 push   esi	 		   <br />	 xor    edx, edx<br />         mov    ebx, 0FFFF000Fh<br />	 mov    ebp, DataSize<br />	 lea    eax, &#91;edx+1+ebx&#93;<br />	 mov    esi, ebx	 <br />AdLoop&#58;<br />	 cmp    edx, ebp	<br />	 je	Ad_2<br />         movzx  ecx, byte ptr &#91;lpData+edx&#93;<br />	 add    eax, ecx<br />	 jc 	Ad_1	<br />	 lea	ecx, &#91;eax+0FFF1h&#93;<br />	 inc	edx<br />	 add    ebx, ecx<br />	 jnc	AdLoop<br />	 add    ebx, esi<br />	 jmp    AdLoop<br />Ad_1&#58;<br />	 add    ebx, eax<br />	 inc	edx 	<br />	 lea	eax, &#91;eax+esi&#93;<br />	 jnc    AdLoop<br />	 add    ebx, esi <br />	 jmp    AdLoop<br />Ad_2&#58;<br />	 sub	ebx, esi<br />	 sub	eax, esi 	<br />	 shl    ebx, 16<br />	 pop	esi <br />    	 add    eax, ebx<br />	 pop	ebx<br />	 pop	ebp	 	<br />	 ret<br />GetAdler endp</code></pre></div>
    <div class="meta">Posted on 2002-03-29 18:17:24 by buliaNaza</div>
   </div>
   <div class="post" id="post-31550">
    <div class="subject"><a href="#post-31550">adler32</a></div>
    <div class="body"><strong>Thomas</strong>, a typo in your code above executes <strong>bitRAKE</strong> algo twice and <strong>bitRAKE2</strong> doesn't get executed.<pre><code>Nico                     &#58;&#91;038217AA&#93;, 1262 ms &#91;100x2MB&#93;, 158.47 MB/s<br />bitRAKE                  &#58;&#91;038217AA&#93;, 1603 ms &#91;100x2MB&#93;, 124.76 MB/s<br />bitRAKE2                 &#58;&#91;038217AA&#93;,  721 ms &#91;100x2MB&#93;, 277.39 MB/s<br />Thomas2                  &#58;&#91;038217AA&#93;, 1462 ms &#91;100x2MB&#93;, 136.79 MB/s<br />Thomas3                  &#58;&#91;038217AA&#93;,  711 ms &#91;100x2MB&#93;, 281.29 MB/s<br />Nico2                    &#58;&#91;038217AA&#93;, 1302 ms &#91;100x2MB&#93;, 153.60 MB/s<br />Thomas3AndSvin &#40;Svin2&#41;   &#58;&#91;038217AA&#93;,  711 ms &#91;100x2MB&#93;, 281.29 MB/s<br />Thomas3AndSvinAndBitRAKE &#58;&#91;038217AA&#93;,  671 ms &#91;100x2MB&#93;, 298.06 MB/s<br />BitRAKE3                 &#58;&#91;038217AA&#93;,  230 ms &#91;100x2MB&#93;, 869.56 MB/s<br />buliaNaza                &#58;&#91;038217AA&#93;, 1843 ms &#91;100x2MB&#93;, 108.51 MB/s<br />bdjames2                 &#58;&#91;0000259C&#93;, 1643 ms &#91;100x2MB&#93;, 121.72 MB/s<br />bitRAKE4                 &#58;&#91;038217AA&#93;,  671 ms &#91;100x2MB&#93;, 298.06 MB/s</code></pre>This is the best of 10 runs of each algo on 1.333Ghz TB DDR.<br />bitRAKE4 is bitRAKE3 without the prefetch.<br /><br /><strong>buliaNaza</strong>, I had to change this '<em>movzx  ecx, byte ptr </em>' line to '<em>movzx  ecx, byte ptr </em>' because it wouldn't work otherwise (lpData is a pointer, not the data).<br /><br /><strong>bdjames</strong>, didn't work right?<br /><br /><strong>Notes</strong>: DIV is fast enough on Athlon to make Svin2 = Thomas3.  bitRAKE2 is slower than Thomas3, yet combined together Thomas3AndSvinAndBitRAKE is faster than all three.</div>
    <div class="meta">Posted on 2002-03-29 20:09:12 by bitRAKE</div>
   </div>
   <div class="post" id="post-31555">
    <div class="subject"><a href="#post-31555">adler32</a></div>
    <div class="body">Same post as above, from myself, but with BitRAKE3 executed on the PPro,PII,and P!!! (no PPlain).  i might dig out my P200MMX some time to run it.  There is a considerable difference between BitRAKE3 and the other speeds on the PPro.  i wonder why that is.<br /><pre><code>P!!! 667MHz &#40;RAM&#58;128 MBs, Win2K&#41;<br />Nico		&#58;&#91;B584D210&#93;, 2443 ms &#91;100x2MB&#93;, 81.86 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 3746 ms &#91;100x2MB&#93;, 53.39 MB/s<br />BitRAKE2	&#58;&#91;B584D210&#93;, 3755 ms &#91;100x2MB&#93;, 53.26 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 3685 ms &#91;100x2MB&#93;, 54.27 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 3976 ms &#91;100x2MB&#93;, 50.30 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 4046 ms &#91;100x2MB&#93;, 49.43 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 2093 ms &#91;100x2MB&#93;, 95.55 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 1462 ms &#91;100x2MB&#93;, 136.79 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 1412 ms &#91;100x2MB&#93;, 141.64 MB/s<br />BitRAKE3	&#58;&#91;B584D210&#93;, 1402 ms &#91;100x2MB&#93;, 142.65 MB/s<br /><br />PII 300MHz	&#40;RAM&#58;128MBs, WinNT&#41;<br />Nico		&#58;&#91;B584D210&#93;, 10435 ms &#91;100x2MB&#93;, 44.09 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 20579 ms &#91;100x2MB&#93;, 26.07 MB/s<br />BitRAKE2	&#58;&#91;B584D210&#93;, 20550 ms &#91;100x2MB&#93;, 26.34 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 13289 ms &#91;100x2MB&#93;, 26.91 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 8192 ms &#91;100x2MB&#93;, 24.41 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 8192 ms &#91;100x2MB&#93;, 24.41 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 3845 ms &#91;100x2MB&#93;, 52.01 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 5388 ms &#91;100x2MB&#93;, 74.79 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 9543 ms &#91;100x2MB&#93;, 78.30 MB/s<br />BitRAKE3	&#58;&#91;B584D210&#93;, 2663 ms &#91;100x2MB&#93;, 75.10 MB/s<br /><br />PPro 150MHz	&#40;RAM&#58;64MBs, Win95&#41;<br />Nico		&#58;&#91;B584D210&#93;, 14214 ms &#91;100x2MB&#93;, 14.07 MB/s<br />BitRAKE		&#58;&#91;B584D210&#93;, 27275 ms &#91;100x2MB&#93;, 7.33 MB/s<br />BitRAKE2	&#58;&#91;B584D210&#93;, 25229 ms &#91;100x2MB&#93;, 7.92 MB/s<br />Thomas2		&#58;&#91;B584D210&#93;, 26381 ms &#91;100x2MB&#93;, 7.58 MB/s<br />Thomas3		&#58;&#91;B584D210&#93;, 34196 ms &#91;100x2MB&#93;, 5.84 MB/s<br />Svin2		&#58;&#91;B584D210&#93;, 28674 ms &#91;100x2MB&#93;, 6.97 MB/s<br />Nico2		&#58;&#91;B584D210&#93;, 10204 ms &#91;100x2MB&#93;, 19.60 MB/s<br />Thomas3AndSvin	&#58;&#91;B584D210&#93;, 9078 ms &#91;100x2MB&#93;, 22.03 MB/s<br />Thomas3AndSvinAndBitRake	&#58;&#91;B584D210&#93;, 7745 ms &#91;100x2MB&#93;, 25.82 MB/s<br />BitRAKE3	&#58;&#91;B584D210&#93;, 6002 ms &#91;100x2MB&#93;, 33.32 MB/s</code></pre></div>
    <div class="meta">Posted on 2002-03-29 21:27:04 by jademtech</div>
   </div>
   <div class="post" id="post-31556">
    <div class="subject"><a href="#post-31556">adler32</a></div>
    <div class="body"><pre><code>PII 300MHz	&#40;RAM&#58;128MBs, WinNT&#41;<br />Thomas3AndSvinAndBitRake &#58;&#91;B584D210&#93;, 9543 ms &#91;100x2MB&#93;, 78.30 MB/s<br />BitRAKE3	&#58;&#91;B584D210&#93;, 2663 ms &#91;100x2MB&#93;, 75.10 MB/s</code></pre>These figures look wrong. :)<br /><br />Thanks, <strong>jademtech</strong> - I was curious if the prefetch instructions would hender/improve performance on any other the other processors.</div>
    <div class="meta">Posted on 2002-03-29 21:37:17 by bitRAKE</div>
   </div>
   <div class="post" id="post-31558">
    <div class="subject"><a href="#post-31558">adler32</a></div>
    <div class="body">2554 ms... sorry.  in case there are any more typos, here are the original datasets i collected for P!! and PPro<br /><br />PPro<br />14214:14.07<br />27275:7.33<br />25229:7.92<br />26381:7.58<br />34196:5.84<br />28676:6.97<br />10204:19.60<br />9078:22.03<br />7745:25.82<br />6002:33.32<br /><br />PII<br />4536:44.09<br />7671:26.07<br />7591:26.34<br />7431:26.91<br />8192:24.41<br />8192:24.41<br />3845:52.01<br />2674:74.79<br />2554:78.30<br />2663:75.10</div>
    <div class="meta">Posted on 2002-03-29 21:44:51 by jademtech</div>
   </div>
   <div class="post" id="post-31562">
    <div class="subject"><a href="#post-31562">adler32</a></div>
    <div class="body"><div class="quote"><br />There is a considerable difference between BitRAKE3 and the other speeds on the PPro.  i wonder why that is.<br /></div>Prefetch is a beautiful thing and the PPro supports it. :)</div>
    <div class="meta">Posted on 2002-03-29 22:03:01 by bitRAKE</div>
   </div>
   <div class="post" id="post-31585">
    <div class="subject"><a href="#post-31585">adler32</a></div>
    <div class="body">Options?:<br /><br />A word-based lookup table   adl(lookup+ebx)<br /><br /><span style="font-size:9px><br />hybrid proc uses ebx esi edi alder:dword, buffer:dword, len:dword <br />                         mov edx, dword ptr  <br />                         mov ebx, dword ptr  <br />                         mov ecx, edx <br />                         shr ecx, 16 <br />                         mov esi, dword ptr  <br />                         and ecx, 0FFFFh <br />                         add ebx, esi <br />                         and edx, 0FFFFh <br />                         neg esi<br /><br />                         _Loop: movzx eax, byte ptr <br />                         add edx, eax<br />                         movzx eax, byte ptr <br />                         add ecx, edx <br />                         add edx, eax<br />                         movzx eax, byte ptr <br />                         add ecx, edx<br />                         add edx, eax<br />                         movzx eax, byte ptr <br />                         add ecx, edx<br />                         add edx, eax<br />                         add esi, 4<br />                         add ecx, edx<br />                         test esi, 11111111111b ;&lt;-----------<br />                         jne _Loop<br />                         mov edi, offset Table <br />                         _Mod:mov eax, <br />                         add edi, 4 <br />                         cmp ecx, eax <br />                         jb @F <br />                         sub ecx, eax <br />                         @@:cmp edx, eax <br />                         jb @F <br />                         sub edx, eax <br />                         @@:cmp edi, offset Table + 64 <br />                         jbe _Mod<br />                         @@:test esi, esi<br />                         jne _Loop <br /><br />                         .data <br />                         Table dword 4293984256 <br />                         dword 2146992128 <br />                         dword 1073496064 <br />                         dword 536748032 <br />                         dword 268374016 <br />                         dword 134187008 <br />                         dword 67093504 <br />                         dword 33546752 <br />                         dword 16773376 <br />                         dword 8386688 <br />                         dword 4193344 <br />                         dword 2096672 <br />                         dword 1048336 <br />                         dword 524168 <br />                         dword 262084 <br />                         dword 131042 <br />                         dword 65521 <br /><br />                         .code <br />                         @@:shl ecx, 16 <br />                         add ecx, edx <br />                         mov eax, ecx <br />                         ret <br />                         hybrid endp<br /><br />eax = Nico                        : <strong>, 3655 ms [100x2MB],   54.71 MB/s<br />eax = BitRAKE                     : <strong>, 6409 ms [100x2MB],   31.20 MB/s<br />eax = BitRAKE2                    : <strong>, 6439 ms [100x2MB],   31.06 MB/s<br />eax = Thomas2                     : <strong>, 6269 ms [100x2MB],   31.90 MB/s<br />eax = Thomas3                     : <strong>, 6950 ms [100x2MB],   28.77 MB/s<br />eax = Svin2                       : [8DA7D97D], 6940 ms [100x2MB],   28.81 MB/s<br />eax = Nico2                       : <strong>, 3245 ms [100x2MB],   61.63 MB/s<br />eax = Thomas3AndSvin              : <strong>, 2143 ms [100x2MB],   93.32 MB/s<br />eax = Thomas3AndSvinAndBitRAKE    : <strong>, 1963 ms [100x2MB],  101.88 MB/s<br />eax = BitRAKE3                    : <strong>, 1783 ms [100x2MB],  112.17 MB/s<br />eax = bdjames                     : <strong>, 2032 ms [100x2MB],   98.42 MB/s<br />eax = base                         : <strong>, 50273 ms [100x2MB],    3.97 MB/s<br /><br /></span><br /><br />BitRake:<br /><br />Try my mod code and see if it helps your speed, <br />instead of div (very slow)!</div>
    <div class="meta">Posted on 2002-03-30 02:44:24 by bdjames</div>
   </div>
   <div class="post" id="post-31782">
    <div class="subject"><a href="#post-31782">adler32</a></div>
    <div class="body">Thomas, if I may, let me ask you again, adler proc must work only with 1mb aligned data or not?<br />I'm asking 'cause after multiple tests with real data (8 - 25 mb) if<br />the data unaligned by mb - defferent procs return defferent adlers.</div>
    <div class="meta">Posted on 2002-03-31 07:31:24 by The Svin</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=4463&amp;page=1" style="">&laquo;</a><a href="../?id=4463&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="4463" /><input type="number" name="page" min="1" max="4" step="1" value="3" onchange="this.form.submit();" /><a href="../?id=4463&amp;page=4">&gt;</a><a href="../?id=4463&amp;page=4">&raquo;</a></form>  </div>
 </body>
</html>