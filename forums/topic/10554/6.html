<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Opcode #7 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10554" />
  <link rel="prev" href="../?id=10554&amp;page=5" />  <link rel="next" href="../?id=10554&amp;page=7" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=10554">Opcode #7</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=10554&amp;page=1" style="">&laquo;</a><a href="../?id=10554&amp;page=5" style="">&lt;</a><input type="hidden" name="id" value="10554" /><input type="number" name="page" min="1" max="8" step="1" value="6" onchange="this.form.submit();" /><a href="../?id=10554&amp;page=7">&gt;</a><a href="../?id=10554&amp;page=8">&raquo;</a></form>   <div class="post" id="post-108766">
    <div class="subject"><a href="#post-108766">hi</a></div>
    <div class="body">Wizzra, are you gonna build a Compiler?, you can take my MASM source to made a compiler as a Picture ( or maybe modified whole thing ).</div>
    <div class="meta">Posted on 2003-06-30 08:18:16 by realvampire</div>
   </div>
   <div class="post" id="post-108780">
    <div class="subject"><a href="#post-108780">Opcode #7</a></div>
    <div class="body">realvampire hi,<br />i am coding a disassembler, and using The Svin's help, its going really nice,<br />not much left to do, just few weeks of non stop coding i may finish the engine and than i can continue coding the gui and mabye implementing a debuger.<br />this is for my final school prj in coolege.<br />many thnx for TheSvin! u should all appriciate his extremly good info on opcodes and the willing to help &amp; give info!<br />he is like MSDN for Opcode decoding for me :) :alright:</div>
    <div class="meta">Posted on 2003-06-30 09:31:03 by wizzra</div>
   </div>
   <div class="post" id="post-108791">
    <div class="subject"><a href="#post-108791">Opcode #7</a></div>
    <div class="body">Thank you, wizzra.<br />For those who read the tuts and understand about<br />reg codes a little macros for short typing.<br />it uses reg code instead of reg mnemonins and allows you<br />to numerous various pushs or pops in one short line<br /><pre><code><br />pushr macro r<br />	irpc n,r<br />	db &#40;50h or n&#41;<br />	endm<br />endm<br />popr macro r<br />	irpc n,r<br />	db &#40;58h or n&#41;<br />	endm<br />endm<br /></code></pre><br />for example you need<br /><pre><code><br />	push eax<br />	push eax<br />	push ecx<br />	push eax<br />	push edi<br /></code></pre><br />you now can just type a short line:<br /><br />	pushr 00107<br /><br />each character represents a code for a reg you want to push.<br />You may create such macros also for inc,dec,xchg (eax,reg)<br /><br />Of course it's much easier only for those who knows the codes.<br />But you know it, don't you? There are just 8 of them.</div>
    <div class="meta">Posted on 2003-06-30 10:48:26 by The Svin</div>
   </div>
   <div class="post" id="post-108793">
    <div class="subject"><a href="#post-108793">Opcode #7</a></div>
    <div class="body">Actually I would like to thank you, The Svin. Now I know the size of my code when coding with or without an assembler. :grin:<br /><br />Anyway is it possible for the shift family (sal, shl, shr, ror, rcr, rcl and so on) to have sib? I suppose it is possible right?</div>
    <div class="meta">Posted on 2003-06-30 11:06:20 by roticv</div>
   </div>
   <div class="post" id="post-108808">
    <div class="subject"><a href="#post-108808">Opcode #7</a></div>
    <div class="body">check this:<br /><br />D1 04 00?	?= rol dword ptr , 1?<br />D0 04 00?	?= rol byte ptr , 1?<br />D2 04 00?	?= rol byte ptr , cl?<br />C0 6C 5C 00 00? ?= shr byte ptr , 00?<br /><br />lala there is ur SIB :)<br /><br />if instruction can use mem than it can probably use SIB<br /><br />The Svin:<br />Nice macro there!, i also coded one &quot;PushR&quot; thread in the sourcecode&amp;algorithms section,<br />you can just type: pushr eax,ecx,edx / pushr eax / pushr edi,eax<br />urs is just smaller, by sending binary form :)</div>
    <div class="meta">Posted on 2003-06-30 12:11:07 by wizzra</div>
   </div>
   <div class="post" id="post-108823">
    <div class="subject"><a href="#post-108823">Opcode #7</a></div>
    <div class="body">SIB can be in any instruction wich allows to specify<br />operand in memory.<br />If it does - then modr/m is present, and if it present<br />then its field r/m can be extended to SIB.<br />SIB is an extention of r/m field.</div>
    <div class="meta">Posted on 2003-06-30 14:47:21 by The Svin</div>
   </div>
   <div class="post" id="post-109304">
    <div class="subject"><a href="#post-109304">Opcode #7</a></div>
    <div class="body">hi all......great work...keep it up......i thankez...gud work....good luck. :)</div>
    <div class="meta">Posted on 2003-07-05 06:47:55 by crappi</div>
   </div>
   <div class="post" id="post-109437">
    <div class="subject"><a href="#post-109437">Opcode #7</a></div>
    <div class="body">Hi The-Svin,<br />i am wonder about something,<br /><br />Opcodes:<br /><br />8FC0 - 8FC7 | pop &lt;reg&gt; : Valid instructions to execute.<br />8FC8 - 8FFF |  pop &lt;reg&gt; : seems they are Illigal Instructions to execute<br /><br />why would the second set wont be lligal ? they do pop &lt;reg&gt;...<br />could be the bit mixes  are so that the cpu wont allow it to execute ?<br /><br /><br />8FC8:<br />MemWord  10001111oo000mmm  8086  Pop a Word from the Stack  <br /><br />10001111 [10] [101] [000]<br /><br />is 101 the invalid part?</div>
    <div class="meta">Posted on 2003-07-06 11:28:30 by wizzra</div>
   </div>
   <div class="post" id="post-109441">
    <div class="subject"><a href="#post-109441">Opcode #7</a></div>
    <div class="body"><div class="quote">8F /0 POP r/m16 Pop top of stack into m16; increment stack pointer<br />8F /0 POP r/m32 Pop top of stack into m32; increment stack pointer</div><br />Yes you are correct. the 101 part should be 000 instead (Since there are no other opcodes with 8Fh).</div>
    <div class="meta">Posted on 2003-07-06 12:36:36 by roticv</div>
   </div>
   <div class="post" id="post-109446">
    <div class="subject"><a href="#post-109446">Opcode #7</a></div>
    <div class="body"><div class="quote">Since there are no other opcodes with 8Fh</div> <br />ofcourse there are more opcode with 8F, there are 6400 diffrent instructions with 8Fxxxx... (pop) alone :)<br />only the last ones are invalid</div>
    <div class="meta">Posted on 2003-07-06 13:33:44 by wizzra</div>
   </div>
   <div class="post" id="post-109475">
    <div class="subject"><a href="#post-109475">Opcode #7</a></div>
    <div class="body">..<br /><br />I mean ... that the for the modr/m the 1st reg have to be /0 if not the opcode would be invalid. Sure there would be 6400+ opcodes for pop if you include sib and so on. The last one is invalid cause the bit 3-5 have to be 0.</div>
    <div class="meta">Posted on 2003-07-06 17:58:03 by roticv</div>
   </div>
   <div class="post" id="post-109480">
    <div class="subject"><a href="#post-109480">Opcode #7</a></div>
    <div class="body">wizzra,<br />You must analyse code in bynary not in<br />hex. Fields are not always multiple by 4,<br />thus it's difficult to understand it in hex.<br />For example in your case 8F1X also invalid.<br />(by X I mean &quot;ANY&quot; hex digit)<br />There is format for pop opcode.<br /><pre><code><br />code block  modr/m block  &#91;possible sib and displacemnt&#93;<br /><br />10001111 +  mm 000 r/m  + &#40;xxxxxx.....&#41;<br /></code></pre><br /><br />Middle field of modr/m block (so to called &quot;reg or code field)<br />should have only zeroes.<br />Pop insruction has the only operand, thus<br />there is no need for middle field - any<br />operand can be specifyed in &quot;r/m&quot; field and<br />its extention - sib (if needed).<br />So roticv was right, but failed to explain his<br />point to you, cause you kept thinking about<br />your 8FC8 - 8FFF hex range. And his was saying<br />about 000 in middle bits field.<br />For example 8F10 is alsow invalid though it is <br />out of range of your 8FC8 - 8FFF.</div>
    <div class="meta">Posted on 2003-07-06 18:44:04 by The Svin</div>
   </div>
   <div class="post" id="post-109513">
    <div class="subject"><a href="#post-109513">Opcode #7</a></div>
    <div class="body">The Svin,<br />hi, i was refering for 0xC8-0xFF as an example for the pop &lt;reg&gt; only, i know there are sib..etc so i wasn't refering to them,<br />it is easier to understand why invalid instructions by examining the pop &lt;reg&gt; first than applying it to the modr/m ones.<br />so than i now know what the instruction must have 000 in reg1 to be valid.<br />thnx =) :alright:</div>
    <div class="meta">Posted on 2003-07-07 02:09:01 by wizzra</div>
   </div>
   <div class="post" id="post-111610">
    <div class="subject"><a href="#post-111610">Opcode #7</a></div>
    <div class="body">I found a bug in one app.<br />Or in mnemonic was as 0r.<br />It made impossiple to decode mnemonic<br />it test section with or correctly.<br />Here is a fix.</div>
    <div class="meta">Posted on 2003-07-23 14:16:34 by The Svin</div>
   </div>
   <div class="post" id="post-112080">
    <div class="subject"><a href="#post-112080">Opcode #7</a></div>
    <div class="body">you know, <br />we have been talking about opcodes decoding,  the way it has been encoded and a proper ways of decoding, it is all facinating here in the ring3 enviorment :D but we haven't really talked / understand  HOW CPU really does those jobs,<br />yeah he gets binary code block, but still, he sees 5v and 0v..how it really decodes it? how would it really perform an instruction based on electric pulses..it sounds facinating, though i am not a electronic man, microprocessors is really interesting .<br />so, is there a good way to explain the the cpu really does it?  or it is now more likely an 'go learn 5 years electronics and u will somehow understand?'<br />thnx :)</div>
    <div class="meta">Posted on 2003-07-27 16:53:13 by wizzra</div>
   </div>
   <div class="post" id="post-112131">
    <div class="subject"><a href="#post-112131">Opcode #7</a></div>
    <div class="body">People asked me for sources<br />Here is first</div>
    <div class="meta">Posted on 2003-07-28 03:16:22 by The Svin</div>
   </div>
   <div class="post" id="post-112132">
    <div class="subject"><a href="#post-112132">Opcode #7</a></div>
    <div class="body"><div class="quote">you know, <br />we have been talking about opcodes decoding, the way it has been encoded and a proper ways of decoding, it is all facinating here in the ring3 enviorment :D but we haven't really talked / understand  HOW CPU really does those jobs,<br />yeah he gets binary code block, but still, he sees 5v and 0v..how it really decodes it? how would it really perform an instruction based on electric pulses..it sounds facinating, though i am not a electronic man, microprocessors is really interesting .<br />so, is there a good way to explain the the cpu really does it?  or it is now more likely an 'go learn 5 years electronics and u will somehow understand?'<br />thnx </div> <br /><br />Gates.  It's all gates.  Lots and lots and <em>lots</em> of gates... no, not Bill :) <br /><br />If you really want to know:<br /><br /><a target="_blank" href="http://www.amazon.com/exec/obidos/tg/detail/-/0672210355/102-1846967-5263343?vi=glance">http://www.amazon.com/exec/obidos/tg/detail/-/0672210355/102-1846967-5263343?vi=glance</a><br /><br />Don Lancaster's TTL Cookbook is very readable, doesn't demand <em>transistor level</em> knowledge in order<br />to comprehend, and... well, far as I'm concerned, any coder would be that much further ahead, knowing<br />a little about digital electronics.  It's uhh... well, only logical.<br /><br />Came in real handy when I needed a particular function that my little programmable calculator was<br />mising.  It does have basic boolean functions, though, so:<br /><br />Not (Not (A and Not B) and Not (B and Not A))<br /><br />was just the ticket :) <br /><br />All joking aside (and, yes, I expect you to work the above equation :)  ), I highly recommend Don's<br />book.<br /><br />Jeff</div>
    <div class="meta">Posted on 2003-07-28 03:16:42 by jayte</div>
   </div>
   <div class="post" id="post-112186">
    <div class="subject"><a href="#post-112186">Opcode #7</a></div>
    <div class="body">@The Svin:  Thanks 4 the sources :alright: <br /><br />cya<br />CuTedEvil</div>
    <div class="meta">Posted on 2003-07-28 12:18:36 by CuTedEvil</div>
   </div>
   <div class="post" id="post-112642">
    <div class="subject"><a href="#post-112642">Opcode #7</a></div>
    <div class="body"><div class="quote">...Came in real handy when I needed a particular function that my little programmable calculator was<br />mising. It does have basic boolean functions, though, so:<br /><br />Not (Not (A and Not B) and Not (B and Not A))<br /><br />was just the ticket...<br /></div><br /><br />Ok then.  So, if we work this... something like:<br /><br />temp1 = Not (A and Not B)<br />temp2 = Not (B and Not A)<br />result = Not (temp1 and temp2)<br /><br />Which, if my calculator would've had the function, could be written much more simply as:<br /><br /><strong>xor A, B</strong><br /><br />Jeff</div>
    <div class="meta">Posted on 2003-08-01 01:43:10 by jayte</div>
   </div>
   <div class="post" id="post-113050">
    <div class="subject"><a href="#post-113050">Opcode #7</a></div>
    <div class="body">Modr/m in 16 bit mod logic.<br />Next educational app.<br />Artical will be included later.</div>
    <div class="meta">Posted on 2003-08-05 02:25:36 by The Svin</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=10554&amp;page=1" style="">&laquo;</a><a href="../?id=10554&amp;page=5" style="">&lt;</a><input type="hidden" name="id" value="10554" /><input type="number" name="page" min="1" max="8" step="1" value="6" onchange="this.form.submit();" /><a href="../?id=10554&amp;page=7">&gt;</a><a href="../?id=10554&amp;page=8">&raquo;</a></form>  </div>
 </body>
</html>