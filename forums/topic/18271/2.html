<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>WAN IP Address - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18271" />
  <link rel="prev" href="../?id=18271&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=18271">WAN IP Address</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=18271&amp;page=1" style="">&laquo;</a><a href="../?id=18271&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="18271" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-142007">
    <div class="subject"><a href="#post-142007">WAN IP Address</a></div>
    <div class="body">oh, by the way does this request need the router pass to be handled??</div>
    <div class="meta">Posted on 2004-05-24 12:56:21 by amr</div>
   </div>
   <div class="post" id="post-142011">
    <div class="subject"><a href="#post-142011">WAN IP Address</a></div>
    <div class="body">linksys BEFW11S4 V4<br />       and<br />NETGEAR MR814<br /> both no-go for wanipreq<br /><br /><br />you need to pass the user/pass parameters to the request</div>
    <div class="meta">Posted on 2004-05-24 14:07:10 by illwill</div>
   </div>
   <div class="post" id="post-142052">
    <div class="subject"><a href="#post-142052">WAN IP Address</a></div>
    <div class="body">How to send the router pass??<br />like this<br />wanipreq &lt;gateway ip&gt; &lt;username&gt; &lt;pass&gt;<br /><br />ex.: wanipreq 10.02.34.102 blah blahblah<br /><br />Is this right??<br /><br />Amr Turk</div>
    <div class="meta">Posted on 2004-05-25 03:40:05 by amr</div>
   </div>
   <div class="post" id="post-142148">
    <div class="subject"><a href="#post-142148">WAN IP Address</a></div>
    <div class="body">No, you should not have to send username/password to the router for UPNP to work.<br />As I said before UPNP is not implemented on all routers and on some routers only parts of it.</div>
    <div class="meta">Posted on 2004-05-26 01:55:54 by Hawk</div>
   </div>
   <div class="post" id="post-142152">
    <div class="subject"><a href="#post-142152">WAN IP Address</a></div>
    <div class="body">hi, I didn't send the pass and the user name as you see in the picture I have posted but it didn't work..................<br /><br />Thanks<br /><br />Amr</div>
    <div class="meta">Posted on 2004-05-26 04:28:06 by amr</div>
   </div>
   <div class="post" id="post-149824">
    <div class="subject"><a href="#post-149824">weee</a></div>
    <div class="body">Thank you, all of you.</div>
    <div class="meta">Posted on 2004-09-15 16:03:39 by Nokturnal</div>
   </div>
   <div class="post" id="post-154586">
    <div class="subject"><a href="#post-154586">WAN IP Address</a></div>
    <div class="body">GetWanIP proc uses esi edi ecx <br />		LOCAL szComputerName[128]:BYTE	<br />		LOCAL szCNameLen:DWORD<br />		;LOCAL wsadata:WSADATA<br />		LOCAL addWanIP:DWORD<br />		mov szCNameLen,sizeof szComputerName<br />		invoke GetComputerName,addr szComputerName,addr szCNameLen;????????				<br />		;invoke WSAStartup,101h,addr wsadata  ;function initiates use of WS2_32.DLL by a process.<br />		invoke gethostbyname,addr szComputerName; Windows always knows it's own IP address<br />		mov ebx,eax<br />		assume ebx:ptr hostent<br />		movzx ecx,.h_len <br />		dec ecx<br />		mov eax,.h_list<br />		assume ebx:nothing	<br />		mov ebx,eax				;????????? <br />		.while ecx&gt;0<br />		mov eax,ebx<br />		mov eax,		<br />		mov eax, <br />		push ecx<br />		invoke inet_ntoa,eax<br />		mov addWanIP,eax		<br />		;invoke MessageBox,hMainWnd,addWanIP,addr szComputerName,MB_OK<br />		;-------------------------------------------<br />		mov ecx,3<br />		lea edi,sz169<br />		mov esi,addWanIP<br />		repe cmpsb<br />		or ecx,0<br />		jnz noFind169<br />		jmp next    ;?169???<br />		noFind169:<br />		mov ecx,3<br />		lea edi,sz192<br />		mov esi,addWanIP<br />		repe cmpsb<br />		or ecx,0<br />		jnz FindWanIP<br />		jmp next<br />		FindWanIP:<br />		;invoke WSACleanup<br />		;invoke MessageBox,hMainWnd,addWanIP,addr szFind,MB_OK <br />		mov eax,addWanIP <br />		ret<br />		;-------------------------------------------<br />		next:<br />		add ebx,4	    <br />		pop ecx<br />		dec ecx<br />		.endw<br />		;invoke WSACleanup   <br />		xor eax,eax<br />		ret<br />GetWanIP endp</div>
    <div class="meta">Posted on 2004-12-22 03:56:42 by jndk</div>
   </div>
   <div class="post" id="post-154689">
    <div class="subject"><a href="#post-154689">WAN IP Address</a></div>
    <div class="body">You chose the same method as me... my code covers all the IANA private blocks :) <br /><br /><pre><code><br />;IANA private blocks<br />;     10.0.0.0        -   10.255.255.255  &#40;10/8 prefix&#41;<br />;     172.16.0.0      -   172.31.255.255  &#40;172.16/12 prefix&#41;<br />;     192.168.0.0     -   192.168.255.255 &#40;192.168/16 prefix&#41;<br /><br />IsPrivateBlockIP proc dwIP&#58;DWORD<br />bswap eax<br />.if eax&gt;=0A000000h &amp;&amp; dwIP&lt;=0AFFFFFFh              ;10.0.0.0 thru 10.255.255.255<br />    return TRUE<br />.elseif dwIP&gt;=0AC100000h &amp;&amp; dwIP&lt;=0AC1FFFFFh          ;172.16.0.0 thru 172.31.255.255<br />    return TRUE<br />.elseif dwIP&gt;=0C0A80000h &amp;&amp; dwIP&lt;=0C0A8FFFh        ;192.168.0.0 thru 192.168.255.255<br />    return TRUE<br />.endif<br />return FALSE<br />IsPrivateBlockIP endp<br /><br /><br />;This procedure enumerates local IP addresses<br />;Each IP is checked for whether it is PrivateBlock or Public.<br />;Return Values&#58;<br />;Success returns the first Public IP encountered<br />;Failure returns NULL &#40;machine has no Public IP&#41;<br /><br />GetMyIP PROC<br />local szbuf&#91;256&#93;&#58;BYTE<br />;    invoke lstrcpy,addr szbuf,CTEXT&#40;&quot;localhost&quot;&#41;<br />    mov szbuf&#40;0&#41;,0<br />    invoke gethostname, addr szbuf, sizeof szbuf            ;fetch local IP address<br />    .if eax==0<br />           invoke gethostbyname, addr szbuf<br />           .if eax!=0<br />                mov eax,&#91;eax&#93;.hostent.h_list     ;fetch ptr to null-terminated list of hostaddresses<br />                .while dword ptr&#91;eax&#93;!=0             ;For each hostaddress,<br />                   push eax                                        ;&#40;Store this during loop&#41;<br />                   mov eax,&#91;eax&#93;                                ;Fetch pointer to the ipaddress <br />                   mov ebx,dword ptr&#91;eax&#93;                 ;and then fetch the ipaddress<br />                   push eax<br />                   invoke IsPrivateBlockIP, ebx<br />                   pop ebx<br />                   .if eax==FALSE<br />                       return dword ptr&#91;ebx&#93;<br />                    .endif<br />@@&#58;            pop eax<br />                    add eax,4<br />                .endw<br />                return 0<br />            .endif<br />    .endif<br />return 0<br />GetMyIP ENDP<br /></code></pre></div>
    <div class="meta">Posted on 2004-12-24 06:35:11 by Homer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=18271&amp;page=1" style="">&laquo;</a><a href="../?id=18271&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="18271" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>