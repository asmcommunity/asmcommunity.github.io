<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Need very much help for loop and array... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29860" />
    <link rel="next" href="../?id=29860&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29860">Need very much help for loop and array...</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29860&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29860&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29860" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29860&amp;page=2">&gt;</a><a href="../?id=29860&amp;page=2">&raquo;</a></form>   <div class="post" id="post-210957">
    <div class="subject"><a href="#post-210957">Need very much help for loop and array...</a></div>
    <div class="body">Hello experties, I am a first year student in my university, and was given an assignment. I tried a bit and I am stucked 1/4 way. I am really noob in assembly language(I always got low marks especially in this subject).<br /><br />So please help me....<br /><br />Here is the question;<br /><img src="http://img532.imageshack.us/img532/6905/capturefr.png" /><br /><br />Here&#039;s the code I&#039;ve made so far, correct me too if i&#039;m wrong.<br /><br /><pre><code>include irvine32.inc<br /><br />.data<br />arrayA dword 10 DUP (0)<br />arrayB dword 100 DUP (0)<br /><br />str1 byte &quot;ArrayA Input : &quot;,0<br />str2 byte &quot;ArrayB Input Processing in 2 seconds... &quot;,0<br />str3 byte &quot;Array Processor Processing in 3 seconds... &quot;,0<br />str4 byte &quot; &lt;=&gt; &quot;,0<br />str5 byte &quot;Input Values : &quot;,0<br /><br />.code<br />main proc<br /><br />;=======================================================================<br /><br />;arrayA<br />mov ecx, lengthof arrayA<br />mov esi,0<br /><br />;LOOP 1<br />L1:<br />mov edx, offset str5<br />call writestring<br />call readdec<br />mov ,eax<br />add esi,4<br />loop L1<br /><br />mov edx, offset str1<br />call writestring<br /><br />mov ecx, lengthof arrayA<br />mov esi,0<br /><br />;LOOP 2<br />L2:<br />mov eax,<br />call writedec<br />add esi,4<br />loop L2<br /><br />call crlf<br />call crlf<br /><br />;=====================================================================<br /><br />;arrayB<br />mov edx, offset str2<br />call writestring<br />call crlf<br /><br />mov eax,2000<br />call delay<br /><br />mov ecx,lengthof arrayB<br />mov ecx,10<br /><br />;LOOP 3<br />L3:<br />mov eax,100<br />call randomrange<br />mov ,eax<br />call writedec<br />mov edx, offset str4<br />call writestring<br />call writehex<br />call crlf<br />Loop L3<br /><br />call crlf<br /><br />;======================================================================<br /><br />;Array Processor<br />mov edx, offset str3<br />call writestring<br />call crlf<br /><br />mov eax,3000<br />call delay<br /><br />call crlf<br /><br />;=====================================================================<br /><br />exit<br />main endp<br /><br />end main</code></pre><br /><br /><br />I am using Textpad 4 btw...<br /><br />Thanks!<br /></div>
    <div class="meta">Posted on 2010-03-11 04:16:27 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210961">
    <div class="subject"><a href="#post-210961">Re: Need very much help for loop and array...</a></div>
    <div class="body">Looks fine... Don&#039;t just start with the next to-do point but create the output page next. So that you can see if it truly takes the numbers as entered and generates them as wanted. <br /><br />Then implement the add functionality and add it to the output page and so on and so on.<br /></div>
    <div class="meta">Posted on 2010-03-11 05:24:48 by JimmyClif</div>
   </div>
   <div class="post" id="post-210962">
    <div class="subject"><a href="#post-210962">Re: Need very much help for loop and array...</a></div>
    <div class="body">Can you please give the example for the add functionality? That is the part where I got stuck actually, because I dont know how to start, just the ADD one is enough.<br /><br />Thank you.</div>
    <div class="meta">Posted on 2010-03-11 07:46:34 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210963">
    <div class="subject"><a href="#post-210963">Re: Need very much help for loop and array...</a></div>
    <div class="body">Here&#039;s my friend&#039;s code, it has some problems though, cuz the program will stop working.<br /><br /><pre><code>include irvine32.inc<br />.data<br /><br />arrayA sdword 0,0,0,0,0,0,0,0,0<br />arrayB sdword ?<br />sum sdword ?<br />str1 byte &quot;Enter integer:&quot;,0<br />str2 byte &quot;ArrayA content:&quot;,0<br />str3 byte &quot;ArrayB content:&quot;,0<br /><br />.code<br />main proc<br /><br />&nbsp;  ;enter arrayA<br />&nbsp;  mov ecx,lengthof arrayA<br />&nbsp;  mov esi,offset arrayA<br /> L1:<br />&nbsp;  mov edx,offset str1<br />&nbsp;  call writestring<br />&nbsp;  call readdec<br />&nbsp;  mov ,eax<br />&nbsp;  add esi,4<br />&nbsp; loop L1<br /><br />&nbsp; ;Display arrayA<br />&nbsp;  mov edx,offset str2<br />&nbsp;  call writestring<br />&nbsp;  call crlf<br /><br />&nbsp;  mov ecx,lengthof arrayA<br />&nbsp;  mov esi,offset arrayA<br /> L3:<br />&nbsp;  mov eax,<br />&nbsp; &nbsp; add esi,4<br />&nbsp;  call writeint<br />&nbsp;  call crlf<br />&nbsp;  call writehex<br />&nbsp;  call crlf<br /><br />&nbsp; loop L3<br />&nbsp; call crlf<br /> ;--------------------------------------------<br /> ;display arrayB in random range 0-99<br />&nbsp;  mov edx,offset str3<br />&nbsp;  call writestring<br />&nbsp;  call crlf<br /><br />&nbsp;  mov ecx,lengthof arrayA<br />&nbsp;  mov esi,offset arrayA<br /> L4:<br /><br />&nbsp;  mov eax,<br />&nbsp;  add esi,4<br />&nbsp;  call Randomize<br />&nbsp;  call randomRange<br />&nbsp;  mov arrayB,eax<br />&nbsp;  call writeint<br />&nbsp;  call crlf<br />&nbsp;  call writehex<br />&nbsp;  call crlf<br /><br /> loop L4<br /> call crlf<br /><br /> ;--------------------------------------------<br /> ;Display result<br /> ;Add<br /><br /> mov esi,0<br /> mov ecx,lengthof arrayA<br /> mov eax,arrayA<br />L5:<br />&nbsp; add eax,arrayB<br />&nbsp; call writeint<br />&nbsp; call crlf<br />&nbsp; call writehex<br />&nbsp; call crlf<br />&nbsp; jmp next<br />next:<br />&nbsp; add esi,8<br />&nbsp; loop L5<br />&nbsp; call crlf<br />&nbsp; call crlf<br /><br />exit<br /> main ENDP<br />END main</code></pre></div>
    <div class="meta">Posted on 2010-03-11 07:54:38 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210966">
    <div class="subject"><a href="#post-210966">Re: Need very much help for loop and array...</a></div>
    <div class="body">Sorry for the triple posting, I cannot seem to find the edit button.<br /><br />Actually, I dont really understand the part where it says, Array Processor is processing as follows : ADD, MUL, etc.... I dont know what does it want so that is why I dont know how to do it....<br /><br />Please explain and give example for that please...</div>
    <div class="meta">Posted on 2010-03-11 09:47:08 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210968">
    <div class="subject"><a href="#post-210968">Re: Need very much help for loop and array...</a></div>
    <div class="body">The tricky part of the &quot;array processing&quot; that I see is that it wants arrayA[1] added (etc.) to arrayB[0], and when we get to the end, arrayA[0] added to arrayB[9]. Have I got that right? (the print on your inclusion of the assignment is a little small for these tired old eyes) I think I&#039;d handle that by doing the first (or last) as a special case, and then looping 9 times instead of ten for the &quot;body&quot; of it.<br /><br />The example output page looks pretty fancy! Given that, I think I&#039;d put the results from each operation into a separate array...<br /><br /><pre><code><br />&nbsp; &nbsp; ...<br />&nbsp; &nbsp; xor esi, esi ; or &quot;mov esi, 0&quot;<br />&nbsp; &nbsp; mov ecx, 9 ; or lengthof ArrayA - 1 ?<br />add_loop:<br />&nbsp; &nbsp; mov eax, <br />&nbsp; &nbsp; add eax,&nbsp; <br />&nbsp; &nbsp; mov , eax<br />&nbsp; &nbsp; add esi, 4<br />&nbsp; &nbsp; loop add_loop<br /><br />; and do the last one...<br />&nbsp; &nbsp; mov eax, <br />&nbsp; &nbsp; add eax, <br />&nbsp; &nbsp; mov , eax<br />&nbsp; &nbsp; ; ret?<br /></code></pre><br /><br />That&#039;s untested, and probably wrong in details, but &quot;something like that&quot;. :)<br /><br />JimmyClif says your code looks alright, but I have a question. Why are the arrays different sizes? You have to load ecx, and then overwrite it with the &quot;correct&quot; value:<br /><br /><pre><code><br />mov ecx,lengthof arrayB<br />mov ecx,10<br /></code></pre><br /><br />That&#039;s a minor issue. Your friend&#039;s code has a much bigger problem in the same place! He allocates only 9 items for arrayA, and only 1 for arrayB!!! He&#039;s overrunning his buffer. That&#039;s why it stops running. I guess the lesson in this is &quot;first, allocate your buffers correctly!&quot;. The way you do it is okay, but they should really both (all?) be the same size. I&#039;d:<br /><br /><pre><code><br />%define ARRAY_SIZE 10 ; Nasm syntax... no &#039;%&#039; for Masm?<br />...<br />arrayA ARRAY_SIZE dup dd ?<br />...<br />mov ecx, ARRAY_SIZE ; or ARRAY_SIZE - 1<br />...<br /></code></pre><br /><br />That would make it easy if next week&#039;s assignment was &quot;okay, now do it with 20 items&quot;. I guess &quot;lengthof&quot; works for what you want (Nasm doesn&#039;t have it).<br /><br />Does that get you any closer?<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-03-11 14:45:32 by fbkotler</div>
   </div>
   <div class="post" id="post-210971">
    <div class="subject"><a href="#post-210971">Re: Need very much help for loop and array...</a></div>
    <div class="body">Frank, I did spot that error on his friends code while his had enough for both of them.<br /><br />I also started typing up the whole process of adding to A0 to B9 then looping 9 times but accidently (well, by habit) did the whole thing in dword size and scrapped it not to confuse Luffy ;)<br /><br />Also at the same time I re-thought that i would really like him to generate the output first before having him to add or mul but i didn&#039;t want to sound too &#039;teacher&#039;-y and decided to hold on my answer for awhile...<br /><br />Cheers :)</div>
    <div class="meta">Posted on 2010-03-11 15:18:34 by JimmyClif</div>
   </div>
   <div class="post" id="post-210972">
    <div class="subject"><a href="#post-210972">Re: Need very much help for loop and array...</a></div>
    <div class="body">I have some questions;<br /><br />1) Why for the &quot;add esi, <strong>4</strong>&quot;, we use &quot;<strong>4</strong>&quot;?<br /><br />2) <pre><code>mov ecx,lengthof arrayB<br />mov ecx,10</code></pre><br /><br />whats the &quot;correct&quot; value? :p cuz I&#039;ve been trying to put different value and it wont display 10 random values, as it will display something else.<br /><br />3) As for the code you gave, <br /><br /><pre><code>&nbsp; xor esi, esi ; or &quot;mov esi, 0&quot;<br />&nbsp; &nbsp; mov ecx, 9 ; or lengthof ArrayA - 1 ?<br />add_loop:<br />&nbsp; &nbsp; mov eax, <br />&nbsp; &nbsp; add eax,&nbsp; <br />&nbsp; &nbsp; mov , eax<br />&nbsp; &nbsp; add esi, 4<br />&nbsp; &nbsp; loop add_loop</code></pre><br /><br />this one gave the first value inserted on arrayA, <br /><br />and this one,<br /><br /><pre><code>&nbsp;  mov eax, <br />&nbsp; &nbsp; add eax, <br />&nbsp; &nbsp; mov , eax</code></pre><br /><br />gave the last value inserted on arrayA<br /><br />I cannot see where the ADD function takes place, and also how does the arrayA and arrayB related?<br /><br />I am very sorry for my lack of knowledge, may you teach me the correct method for it.<br /><br />Thank you very much.<br /><br /><br />Btw sorry for the small pic, Here&#039;s the big one;<br /><br /><img src="http://img411.imageshack.us/img411/3113/capture1ms.png" /><br /><br /><img src="http://img412.imageshack.us/img412/6596/capture2m.png" /><br /><br /><br /></div>
    <div class="meta">Posted on 2010-03-11 18:00:05 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210973">
    <div class="subject"><a href="#post-210973">Re: Need very much help for loop and array...</a></div>
    <div class="body">and another question, why is it my random values always produce the same number?<br /><br /><pre><code>;arrayB<br />mov edx, offset str2<br />call writestring<br />call crlf<br /><br />mov eax,2000<br />call delay<br /><br />mov ecx,lengthof arrayB<br />mov ecx,10<br /><br />;LOOP 3<br />L3:<br />mov eax,100<br />call randomrange<br />mov ,eax<br />call writedec<br />mov edx, offset str4<br />call writestring<br />call writehex<br />call crlf<br />Loop L3<br /><br />call crlf</code></pre><br /><br />it looks random but when i see it many times, it is the same number actually...<br /><br />EDIT : Sorry just saw that now there is an edit button.</div>
    <div class="meta">Posted on 2010-03-11 18:07:11 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210974">
    <div class="subject"><a href="#post-210974">Re: Need very much help for loop and array...</a></div>
    <div class="body"><div class="quote"><br />and another question, why is it my random values always produce the same number?<br /></div><br /><br />At a glance, your friend&#039;s code is doing something that yours does not prior to calling <em>randomrange</em>, and may be critical to the randomization functionality you are utilizing.<br /><br />Review your friend&#039;s code and tell us what you think the possibilities may be in ensuring that the random number generator works as designed.</div>
    <div class="meta">Posted on 2010-03-11 18:37:31 by SpooK</div>
   </div>
   <div class="post" id="post-210975">
    <div class="subject"><a href="#post-210975">Re: Need very much help for loop and array...</a></div>
    <div class="body"><pre><code>mov edx, offset str2<br />call writestring<br />call crlf<br /><br />mov eax,2000<br />call delay<br /><br />mov ecx,lengthof arrayA<br />mov esi,offset arrayA<br /><br /><br />;LOOP 3<br />L3:<br />mov eax,<br />add esi,4<br />call randomize<br />call randomrange<br />mov arrayB,eax<br />call writeint<br />mov edx, offset str4<br />call writestring<br />call writehex<br />call crlf<br />Loop L3<br /><br />call crlf</code></pre><br /><br />thats my new code, and yeah now i got the right random values, but it ranges 0-10 only. How do i make it randomize from 0-99? cuz whenever i&#039;m changing the codes it&#039;ll stop working.</div>
    <div class="meta">Posted on 2010-03-11 18:49:54 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210976">
    <div class="subject"><a href="#post-210976">Re: Need very much help for loop and array...</a></div>
    <div class="body"><div class="quote"><br />thats my new code, and yeah now i got the right random values, but it ranges 0-10 only. How do i make it randomize from 0-99? cuz whenever i&#039;m changing the codes it&#039;ll stop working.<br /></div><br /><br />Try this instead and see if it helps...<br /><br /><pre><code><br />call randomize<br />mov eax,<br />add esi,4<br />call randomrange<br /></code></pre></div>
    <div class="meta">Posted on 2010-03-11 20:39:22 by SpooK</div>
   </div>
   <div class="post" id="post-210979">
    <div class="subject"><a href="#post-210979">Re: Need very much help for loop and array...</a></div>
    <div class="body">Thanks for the &quot;big picture&quot;! :)<br /><br />Lots of questions... why &quot;4&quot; in &quot;add esi, 4&quot;.... I ASSumed that the size of the individual elements in the array was dwords - 4 bytes each, so we&#039;d need to add 4 to esi to get to the next one. JimmyClif suggests that this may not be correct. The assignment says &quot;values&quot;, which could be anything. They also refer to &quot;integer&quot;, which is a rather imprecise term, IMHO. When I was a lad, &quot;the integers&quot; were an infinite set of numbers, not just what would fit in... well, used to be 16 bits, then it was 32... I suppose it&#039;s 64 bits now... I still ASSume an &quot;item&quot; is 32 bits, I think, but if it isn&#039;t clear to you, ask for clarification. It makes a big difference!<br /><br />There&#039;s a different addressing mode... if we wanted esi to be 0, 1, 2,..., we could do:<br /><br /><pre><code><br />mov eax, <br /></code></pre><br /><br />Valid multipliers are 1 (if we don&#039;t say) - good for a byte array, 2 - good for a word array (another ambiguous term - I mean 16 bits, 2 bytes - but sometimes it means &quot;native machine word&quot; - 32 or 64 bits, these days - Jonathan Bartlett&#039;s &quot;PGU&quot; book uses &quot;word&quot; like this), 4 - good for dword arrays (or single-precision floats), and 8 - good for double-precision floats or other 64-bit values. You can&#039;t just stick any random number in there. You&#039;re probably better off with &quot;add esi, 4&quot;, but it&#039;s an alternative.<br /><br />Speaking of random numbers... your best bet there is to RTFM on Irvine&#039;s library routines. The &quot;usual&quot; setup is that there&#039;s a routine you call to initialize it - once, not every time. Then to get random numbers, call another routine repeatedly. This will actually give a sequence of numbers that repeats, but not until after a long, long time. It looks to me like Irvine&#039;s &quot;randomrange&quot; wants the &quot;range&quot; in eax. But look it up - don&#039;t ASSume.<br /><br /><div class="quote"><br />I cannot see where the ADD function takes place, and also how does the arrayA and arrayB related?<br /></div><br /><br />Mmmm, the add function takes place at the &quot;add&quot; instruction - the value from arrayA, in eax, has the value in arrayB added it it, and it&#039;s stored in a third array - which doesn&#039;t exist yet, I just made it up for the example. ArrayA and arrayB aren&#039;t really &quot;related&quot; - one is an array filled in by the user, the other is filled with random values. I think that&#039;s how it&#039;s supposed to go...<br /><br />The assignment mentions &quot;MUL/IMUL&quot;. I don&#039;t know what that means. Got to be one or the other, eh? Also, I just noticed, the assignment mentions ten values, but the example display screen only shows room for nine! I guess I&#039;m not the only one who sometimes has trouble making myself clear! :)<br /><br />Anyway, I agree with JimmyClif&#039;s suggestion to do it &quot;one piece at a time&quot;. First fill one array with values gotten from the user, and display it. Next fill the other array with &quot;random&quot; values, and display it. Until those two parts are working properly, adding them together is never going to work! I suppose that&#039;s obvious, but some people seem to think they can tweak it so the &quot;final result&quot; is correct, even though the &quot;parts&quot; aren&#039;t. Not likely! (Jeff Duntemann even called his book &quot;Step by Step&quot;!)<br /><br />So... keep steppin&#039;! :)<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-03-12 00:40:56 by fbkotler</div>
   </div>
   <div class="post" id="post-210983">
    <div class="subject"><a href="#post-210983">Re: Need very much help for loop and array...</a></div>
    <div class="body">My latest code. Have some error though. But this one is a complete one. and i dont know how to fix the error. and if its fixed, the program will stop working when excuted...Please help...<br /><br /><pre><code>include irvine32.inc<br /><br />.data<br />arrayA dword 10 DUP (0)<br />arrayB dword 10 DUP (0)<br />arrayADD dword 10 DUP(0)<br />arrayMUL dword 10 DUP(0)<br />arrayNEG dword 10 DUP(0)<br />arrayOR dword 10 DUP(0)<br />arrayXOR dword 10 DUP(0)<br /><br />str0 byte &quot; &quot;,0<br />str1 byte &quot;ArrayA Input : &quot;,0<br />str2 byte &quot;ArrayB Input Processing in 2 seconds... &quot;,0<br />str3 byte &quot;Array Processor Processing in 3 seconds... &quot;,0<br />str4 byte &quot; &lt;=&gt; &quot;,0<br />str5 byte &quot;Input Values : &quot;,0<br />str6 byte &quot;Displaying Results :&quot;,0<br />str7 byte &quot;ADD : &quot;,0<br />str8 byte &quot;MUL : &quot;,0<br />str9 byte &quot;NEG : &quot;,0<br />str10 byte &quot;OR : &quot;,0<br />str11 byte &quot;XOR : &quot;,0<br />str12 byte &quot;Array Processor Continue (y/n) : &quot;,0<br />str13 byte &quot;Array Processor Exit&quot;,0<br />str14 byte &quot;Thank You For Using The Program&quot;,0<br /><br />.code<br />main proc<br /><br />START:<br /><br />;=======================================================================<br /><br />;arrayA user input<br />mov ecx, lengthof arrayA<br />mov esi,0<br /><br />L1:<br />mov edx, offset str5<br />call writestring<br />call readint<br />mov ,eax<br />add esi,4<br />loop L1<br /><br />call crlf<br />call crlf<br /><br />;=====================================================================<br /><br />;arrayB randomize numbers<br />mov edx, offset str2<br />call writestring<br />call crlf<br />mov eax,2000<br />call delay<br /><br />mov ecx,lengthof arrayB<br />mov esi,0<br /><br />L3:<br />mov eax,100<br />call randomrange<br />mov arrayB,eax<br />add esi,4<br />Loop L3<br /><br /><br /><br />;======================================================================<br /><br />;Array Processor<br />mov edx, offset str3<br />call writestring<br />call crlf<br /><br />mov eax,3000<br />call delay<br /><br />call crlf<br /><br />;=====================================================================<br /><br />;ADD (ArrayA + ArrayB)<br />mov ecx, lengthof arrayA<br />mov esi, 0<br />mov edi, 4<br />mov eax, 0<br /><br />L5:<br />mov eax,arrayA<br />add eax,arrayB<br />mov eax,arrayADD<br />add esi,4<br />add edi,4<br />loop L5<br /><br />mov eax,arrayA[36]<br />mov eax,arrayB[0]<br />mov arrayADD[36],eax<br /><br />;=====================================================================<br /><br />;MUL (arrayA * arrayB)<br />L6:<br />mov eax, arrayA<br />cdq<br />mov ebx, arrayB<br />imul ebx<br />mov arrayMUL, eax<br />add esi, 4<br />add edi, 4<br />loop L6<br /><br />mov eax, arrayA[36]<br />cdq<br />mov&nbsp; ebx, arrayB[0]<br />imul ebx<br />mov arrayMUL[36], eax<br /><br />;====================================================================<br /><br />;NEG (arrayA - arrayB)<br /><br />mov ecx, lengthof arrayA - 1<br />mov esi, 0<br />mov eax, 0<br />L7:<br /> mov eax, arrayADD<br /> neg eax<br /> mov arrayNEG, eax<br /> add esi, 4<br />loop L7<br />mov eax, arrayADD[36]<br />neg eax<br />mov arrayNEG[36], eax<br /><br />;====================================================================<br /><br />;OR<br />mov ecx, lengthof arrayA - 1<br />mov esi, 0<br />mov edi, 4<br />mov eax, 0<br />L8:<br /> mov eax, arrayA<br /> or eax, arrayB<br /> mov arrayOR, eax<br /> add esi, 4<br /> add edi, 4<br />loop L8<br />mov eax, arrayA[36]<br />or eax, arrayB[0]<br />mov arrayOR[36], eax<br /><br />;====================================================================<br /><br />;XOR<br />mov ecx, lengthof arrayA - 1<br />mov esi, 0<br />mov eax, 0<br />L9:<br /> mov eax, arrayADD<br /> xor eax, eax<br /> mov arrayXOR, eax<br /> add esi, 4<br />loop L9<br />mov eax, arrayADD[36]<br />xor eax, eax<br />mov arrayXOR[36], eax<br /><br />;====================================================================<br /><br />;Displaying output<br /><br />;arrayA<br />mov ecx, lengthof arrayA<br />mov esi,0<br /><br />L2:<br />mov eax,<br />call writeint<br />mov edx, offset str4<br />call writestring<br />call writehex<br />call crlf<br />add esi,4<br />loop L2<br /><br />mov edx, offset str1<br />call writestring<br />call crlf<br /><br />;arrayB<br />mov ecx, lengthof arrayB<br />mov esi,0<br /><br />L4:<br />mov eax,<br />call writeint<br />mov edx, offset str4<br />call writestring<br />call writehex<br />call crlf<br />add esi,4<br />loop L4<br /><br />;results<br />mov edx, offset str6<br />call writestring<br />call crlf<br /><br />;display ADD<br />mov edx, offset str7<br />call writestring<br />call crlf<br />mov ecx, 10<br />mov esi, 0<br /><br />L10:<br /> mov eax, arrayADD<br /> call writeint<br /> add esi, 4<br /> mov edx, offset str0<br /> call writestring<br /> call writehex<br />loop L10<br /><br />call crlf<br /><br />;display MUL<br />mov edx, offset str8<br />call writestring<br />call crlf<br />mov ecx, 10<br />mov esi, 0<br /><br />L11:<br /> mov eax, arrayMUL<br /> call writeint<br /> add esi, 4<br /> mov edx, offset str0<br /> call writestring<br />loop L11<br /><br />call crlf<br /><br />;display NEG<br />mov edx, offset str9<br />call writestring<br />call crlf<br />mov ecx, 10<br />mov esi, 0<br /><br />L12:<br /> mov eax, arrayNEG<br /> call writeint<br /> add esi, 4<br /> mov edx, offset str0<br /> call writestring<br />loop L12<br /><br />call crlf<br /><br />;display OR<br />mov edx, offset str10<br />call writestring<br />call crlf<br />mov ecx, 10<br />mov esi, 0<br /><br />L13:<br /> mov eax, arrayOR<br /> call writeint<br /> add esi, 4<br /> mov edx, offset str0<br /> call writestring<br />loop L13<br /><br />call crlf<br /><br />;display XOR<br />mov edx, offset str11<br />call writestring<br />call crlf<br />mov ecx, 10<br />mov esi, 0<br />L14:<br /> mov eax, arrayXOR<br /> call writeint<br /> add esi, 4<br /> mov edx, offset str0<br /> call writestring<br />loop L14<br />call crlf<br /><br />;=====================================================================<br /><br />;Prompt the user if he/she wants to continue the program.<br />CHOOSE:<br />mov edx, offset str12<br />call writestring<br />call readchar<br />call writechar<br />call crlf<br />cmp al, &#039;y&#039;<br />je START<br />cmp al, &#039;n&#039;<br />je NEXT<br />jmp CHOOSE<br /><br />;Termination message:<br />NEXT:<br />mov edx, offset str13<br />call writestring<br />call crlf<br />mov edx, offset str14<br />call writestring<br />call crlf<br /><br />;=====================================================================<br /><br />exit<br />main endp<br /><br />end main</code></pre></div>
    <div class="meta">Posted on 2010-03-12 11:04:34 by LuffyPSP</div>
   </div>
   <div class="post" id="post-210984">
    <div class="subject"><a href="#post-210984">Re: Need very much help for loop and array...</a></div>
    <div class="body"><strong>LuffyPSP</strong>,<br /><br /><strong>L5:</strong> loop ends with <strong>ecx</strong> being equal to zero. Next <strong>loop</strong> instruction will branch to <strong>L6:</strong> for 2**32 times in a row before <strong>ecx</strong> becomes zero again.</div>
    <div class="meta">Posted on 2010-03-12 16:43:26 by baldr</div>
   </div>
   <div class="post" id="post-210985">
    <div class="subject"><a href="#post-210985">Re: Need very much help for loop and array...</a></div>
    <div class="body"><div class="quote"><br />i dont know how to fix the error. and if its fixed, the program will stop working when excuted...<br /></div><br /><br />No, no, no! When the error(s) are &quot;fixed&quot;, the program will work. If it still doesn&#039;t work, the error(s) aren&#039;t &quot;fixed&quot;!<br /><br />Besides the doozy Baldr spotted, I think I see a number of other errors. Mostly due to &quot;brain flatulence&quot; - you knew perfectly well what you wanted to do, you just screwed it up when you wrote it down! Reading over what you wrote may not help. I tend to &quot;read what I intended&quot; instead of what I wrote. Amazing, how blind we can be when we think we &quot;know&quot; what it says!<br /><br />The first error I see is in the randomization routine. Did you decide, after looking it up, that we don&#039;t need &quot;randomize&quot; first? That&#039;s not the error I mean. Look closely at where you&#039;re storing the random numbers! &quot;What&#039;s the add esi, 4 for?&quot; would be a good question here! :)<br /><br />Then, in your &quot;ADD&quot; routine, do you want to loop &quot;lengthof arrayA&quot;, or one less than that?<br /><br />In all of your &quot;processing&quot; routines, you&#039;re applying a &quot;forward offset of 4&quot; (can I call it that?) to arrayB. As I interpret the diagram in the assignment, the &quot;forward offset&quot; should be applied to arrayA, no? If I&#039;m right, you can fix this easily by starting with edi at 0 and esi at 4. You&#039;ll have to change the last &quot;odd case&quot;, too, probably.<br /><br />Note that:<br /><br /><pre><code><br />mov eax, arrayA<br /></code></pre><br /><br />instead of using the second register (edi) will also work. This is not a bug, just an alternative. Also &quot;not a bug&quot;, but a matter of &quot;style&quot;...<br /><br /><pre><code><br />mov eax, <br />mov eax, arrayA<br /></code></pre><br /><br />Both of these lines do exactly the same thing. Doesn&#039;t matter which you use, but it would probably be best to do it the same way every time. Nasm won&#039;t accept the second, so I prefer the first. Your best bet is to use the style your instructor prefers! (you have been paying attention in class, no?)<br /><br />Then we fall into the &quot;MUL&quot; routine. As Baldr observes, you don&#039;t reinitialize ecx. You might reasonably think that a &quot;loop&quot; with ecx=0 wouldn&#039;t execute at all, but &quot;loop&quot; decrements ecx before it decides whether to jump again, so it&#039;ll execute the whole 4G times. This will mess up your display! (and everything else) You probably want to do esi and edi, too. Nice use of &quot;cdq&quot;... but you really don&#039;t need it here - &quot;imul&quot; multiplies eax by... whatever... and puts the result in edx:eax. &quot;idiv&quot; needs &quot;cdq&quot;.<br /><br />Then the &quot;NEG&quot; routine. You correctly observe that we&#039;ve already got arrayA + arrayB in arrayADD, so don&#039;t need to &quot;add&quot; them again. Good optimization! But it means that we don&#039;t need the loop count to be &quot;-1&quot;, and do the last one separately. I don&#039;t think it hurts, just mentioning it...<br /><br />Then the &quot;XOR&quot; routine. This is seriously wrong, as I interpret the assignment. I think you&#039;re supposed to &quot;xor&quot; arrayA with ArrayB (according to the funny &quot;pattern&quot; in the diagram). You take a value from arrayADD and &quot;xor&quot; it with itself - which will result in zero, every time. Not the same as the &quot;NEG&quot; routine (as I understand it) - do it &quot;more like the other ones&quot;. Is there not supposed to be an &quot;OR&quot; routine, too? (if you don&#039;t know the difference between &quot;or&quot; and &quot;xor&quot;, this is a good time to learn)<br /><br />And... that&#039;s all the errors I see! &quot;How it looks&quot; will probably be the judge of whether the display is right. Of course, none of it&#039;s going to be right until you get arrayB initialized correctly. If you&#039;d done it like JimmyClif said, you&#039;d know that! :)<br /><br />Despite the few errors, you&#039;ve got a pretty good &quot;framework&quot; there, I think. Shouldn&#039;t take long to work the kinks out of it.<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-03-12 18:13:34 by fbkotler</div>
   </div>
   <div class="post" id="post-210992">
    <div class="subject"><a href="#post-210992">Re: Need very much help for loop and array...</a></div>
    <div class="body">This is my final code;<br /><br /><pre><code><br />;Section 02<br /><br />include irvine32.inc<br />.data<br /><br />arrayA sdword 10 DUP(0)<br />arrayB sdword 10 DUP(0)<br />arrayADD sdword 10 DUP(0)<br />arrayMUL sdword 10 DUP(0)<br />arrayNEG sdword 10 DUP(0)<br />arrayOR sdword 10 DUP(0)<br />arrayXOR sdword 10 DUP(0)<br /><br />strA byte &quot; &quot;,0<br />strB byte &quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Array Processor Input&quot;,0<br />strC byte &quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Array Processor Output&quot;,0<br />strD byte &quot; &lt;=&gt; &quot;,0<br /><br />str1 byte &quot;ArrayA Input: &quot;,0<br />str2 byte &quot;ArrayB Input Processing In 2 seconds ....&quot;,0<br />str3 byte &quot;Array Processor Processing In 3 seconds ....&quot;,0<br />str4 byte &quot;ArrayA Content: &quot;,0<br />str5 byte &quot;ArrayB Content: &quot;,0<br />str6 byte &quot;Display Result: &quot;,0<br />str7 byte &quot;ADD : &quot;,0<br />str8 byte &quot;MUL : &quot;,0<br />str9 byte &quot;NEG : &quot;,0<br />str10 byte &quot;OR : &quot;,0<br />str11 byte &quot;XOR : &quot;,0<br />str12 byte &quot;Array Processor Continue (y/n) : &quot;,0<br />str13 byte &quot;Array Processor Exit&quot;,0<br />str14 byte &quot;Thank You For Using The Program&quot;,0<br /><br />.code<br />main proc<br /><br /><br /><br /> START:<br />&nbsp; call clrscr<br /><br />&nbsp; mov eax, green + (black*16)<br />&nbsp; call settextcolor<br />&nbsp; mov edx,offset strB<br />&nbsp; call writestring<br />&nbsp; call crlf<br />&nbsp; call crlf<br /><br />&nbsp; mov eax, white + (black*16)<br />&nbsp; call settextcolor<br /><br />&nbsp; ;=======================================================<br /><br />&nbsp; ;ArrayA user input<br /><br />&nbsp; mov ecx, lengthof arrayA<br />&nbsp; mov esi, 0<br /><br />&nbsp; L1:<br />&nbsp;  mov edx, offset str1<br />&nbsp;  call writestring<br />&nbsp;  call readint<br />&nbsp;  mov arrayA, eax<br />&nbsp;  add esi, 4<br />&nbsp; loop L1<br /><br />&nbsp; call crlf<br /><br />;========================================================<br /><br />&nbsp; mov edx, offset str2<br />&nbsp; call writestring<br />&nbsp; call crlf<br />&nbsp; mov eax,2000<br />&nbsp; call delay<br /><br /><br />;=======================================================<br /><br /> ;arrayB randomize values from 0-99<br /><br />&nbsp;  mov ecx, lengthof arrayB<br />&nbsp;  mov esi, 0<br /><br />&nbsp;  L2:<br />&nbsp; &nbsp; mov eax, 100<br />&nbsp; &nbsp; call randomrange<br />&nbsp; &nbsp; mov arrayB, eax<br />&nbsp; &nbsp; add esi, 4<br />&nbsp;  loop L2<br /><br />;=======================================================<br /><br />&nbsp;  mov edx, offset str3<br />&nbsp;  call writestring<br />&nbsp;  call crlf<br /><br />&nbsp;  mov eax,3000<br />&nbsp;  call delay<br />&nbsp;  call crlf<br /><br /><br /><br />;=======================================================<br /><br /> ;Add<br /><br /> mov ecx, lengthof arrayA-1<br /> mov esi,0<br /> mov edi,4<br /> mov eax,0<br /><br /> L20:<br />&nbsp; mov eax,arrayA<br />&nbsp; add eax,arrayB<br />&nbsp; mov arrayADD,eax<br />&nbsp; add esi,4<br />&nbsp; add edi,4<br /> loop L20<br /><br /> mov eax,arrayA[0]<br /> add eax,arrayB[36]<br /> mov arrayADD[36],eax<br /><br /><br />;=======================================================<br /><br />;MUL<br /><br /> mov ecx,lengthof arrayA-1<br /> mov esi,0<br /> mov edi,4<br /> mov eax,0<br /> L30:<br /><br />&nbsp; mov eax,arrayB<br />&nbsp; cdq<br />&nbsp; mov ebx,arrayA<br />&nbsp; imul ebx<br />&nbsp; mov arrayMUL,eax<br />&nbsp; add esi,4<br />&nbsp; add edi,4<br /> loop L30<br /><br /> mov eax,arrayB[36]<br /> cdq<br /> mov ebx,arrayA[0]<br /> imul ebx<br /> mov arrayMUL[36],eax<br /><br />;=======================================================<br /><br /> ;NEG(arrayA+arrayB)<br /><br /> mov ecx,lengthof arrayA-1<br /> mov esi,0<br /> mov eax,0<br /> L40:<br /><br />&nbsp;  mov eax,arrayADD<br />&nbsp;  neg eax<br />&nbsp;  mov arrayNEG,eax<br />&nbsp;  add esi,4<br />&nbsp; loop L40<br /><br />&nbsp; mov eax,arrayADD[36]<br />&nbsp; neg eax<br />&nbsp; mov arrayNEG[36],eax<br /><br />;=======================================================<br /><br />;OR<br /><br /> mov ecx, lengthof arrayA - 1<br /> mov esi, 0<br /> mov edi, 4<br /> mov eax, 0<br /><br /> L50:<br />&nbsp; mov eax, arrayA<br />&nbsp; or eax, arrayB<br />&nbsp; mov arrayOR, eax<br />&nbsp; add esi, 4<br />&nbsp; add edi, 4<br /> loop L50<br /><br /> mov eax, arrayA[0]<br /> and eax, arrayB[36]<br /> mov arrayOR[36], eax<br /><br /><br /><br />;=======================================================<br /><br />;XOR<br /><br /> mov ecx, lengthof arrayA - 1<br />&nbsp; mov esi, 0<br />&nbsp; mov edi, 4<br />&nbsp; mov eax, 0<br /><br />&nbsp; L60:<br />&nbsp;  mov eax, arrayA<br />&nbsp;  xor eax, arrayB<br />&nbsp;  mov arrayXOR, eax<br />&nbsp;  add esi, 4<br />&nbsp;  add edi, 4<br />&nbsp; loop L60<br /><br />&nbsp; mov eax, arrayA[0]<br />&nbsp; and eax, arrayB[36]<br />&nbsp; mov arrayXOR[36], eax<br /><br /><br /><br /> ;========================================================<br /><br /> ;Array Processor Processing<br /><br /> mov eax, green + (black*16)<br /> call settextcolor<br /><br /> mov edx, offset strC<br /> call writestring<br /> call crlf<br /> call crlf<br /><br /> ;=======================================================<br /><br /> ;Display arrayA<br /><br /> mov eax, yellow + (black*16)<br /> call settextcolor<br /><br /> mov edx, offset str4<br /> call writestring<br /> call crlf<br /> call crlf<br /><br /> mov eax, white + (black*16)<br /> call settextcolor<br /><br /> mov ecx, lengthof arrayA<br /> mov esi, 0<br /><br /> L3:<br />&nbsp; mov eax, arrayA<br />&nbsp; call writeint<br />&nbsp; add esi, 4<br />&nbsp; mov edx, offset strD<br />&nbsp; call writestring<br />&nbsp; call writehex<br />&nbsp; call crlf<br />&nbsp; loop L3<br /><br />&nbsp; call crlf<br /><br /><br /> ;=========================================================<br /><br /> ;display arrayB<br /><br /> mov eax, yellow + (black*16)<br /> call settextcolor<br /><br />&nbsp; mov edx, offset str5<br />&nbsp; call writestring<br />&nbsp; call crlf<br />&nbsp; call crlf<br /><br />&nbsp; mov eax, white + (black*16)<br />&nbsp; call settextcolor<br /><br /><br />&nbsp; mov ecx, lengthof arrayB<br />&nbsp; mov esi, 0<br /><br />&nbsp; L5:<br />&nbsp;  mov eax, arrayB<br />&nbsp;  call writeint<br />&nbsp;  add esi, 4<br />&nbsp;  mov edx, offset strD<br />&nbsp;  call writestring<br />&nbsp;  call writehex<br />&nbsp;  call crlf<br />&nbsp; loop L5<br /><br />&nbsp; call crlf<br /><br />;=======================================================<br /><br />;display result<br /><br /> mov eax, magenta + (black*16)<br /> call settextcolor<br /><br /><br />mov edx, offset str6<br />call writestring<br />call crlf<br />call crlf<br /><br />;=======================================================<br /><br />;display ADD<br /><br />mov eax, yellow + (black*16)<br />call settextcolor<br /><br />mov edx,offset str7<br />call writestring<br />call crlf<br /><br /><br />mov eax, white + (black*16)<br />call settextcolor<br /><br />mov ecx,10<br />mov esi,0<br /><br />L7:<br /> mov eax,arrayADD<br /> call writeint<br /> add esi,4<br /> mov edx,offset strD<br /> call writestring<br /> call writehex<br /> call crlf<br /> loop L7<br /><br /> call crlf<br /><br />;=======================================================<br /><br />;display MUL<br /><br />mov eax, yellow + (black*16)<br />call settextcolor<br /><br />mov edx, offset str8<br />call writestring<br />call crlf<br /><br />mov eax, white + (black*16)<br />call settextcolor<br /><br />mov ecx,10<br />mov esi,0<br /><br />L9:<br /> mov eax,arrayMUL<br /> call writeint<br /> add esi,4<br /> mov edx, offset strD<br /> call writestring<br /> call writehex<br /> call crlf<br /> loop L9<br /><br /> call crlf<br /><br /><br />;=======================================================<br /><br />;display NEG<br /><br />mov eax, yellow + (black*16)<br />call settextcolor<br /><br />mov edx, offset str9<br />call writestring<br />call crlf<br /><br />mov eax, white + (black*16)<br />call settextcolor<br /><br />mov ecx, 10<br />mov esi, 0<br /><br />L11:<br /> mov eax, arrayNEG<br /> call writeint<br /> add esi, 4<br /> mov edx, offset strD<br /> call writestring<br /> call writehex<br /> call crlf<br />loop L11<br /><br />call crlf<br /><br />;=======================================================<br /><br />;display OR<br /><br />mov eax, yellow + (black*16)<br />call settextcolor<br /><br />mov edx, offset str10<br />call writestring<br />call crlf<br /><br />mov eax, white + (black*16)<br />call settextcolor<br /><br />mov ecx, 10<br />mov esi, 0<br /><br />L13:<br /> mov eax, arrayOR<br /> call writeint<br /> add esi, 4<br /> mov edx, offset strD<br /> call writestring<br /> call writehex<br /> call crlf<br />loop L13<br /><br />call crlf<br /><br /><br />;=======================================================<br /><br />;display XOR<br /><br />mov eax, yellow + (black*16)<br />call settextcolor<br /><br />mov edx, offset str11<br />call writestring<br />call crlf<br /><br />mov eax, white + (black*16)<br />call settextcolor<br /><br />mov ecx, 10<br />mov esi, 0<br /><br />L15:<br /> mov eax, arrayXOR<br /> call writeint<br /> add esi, 4<br /> mov edx, offset strD<br /> call writestring<br /> call writehex<br /> call crlf<br />loop L15<br /><br />call crlf<br /><br /><br />;===============================================================<br /><br />;Prompt the user if he/she wants to continue the program.<br /><br />CHOOSE:<br />mov edx, offset str12<br />call writestring<br />call readchar<br />call writechar<br />call crlf<br />cmp al, &#039;y&#039;<br />je START<br />cmp al, &#039;n&#039;<br />je NEXT<br />jmp CHOOSE<br /><br /><br />;Termination message:<br /><br />NEXT:<br />mov eax, red + (black*16)<br />call settextcolor<br />mov edx, offset str13<br />call writestring<br />call crlf<br />mov edx, offset str14<br />call writestring<br />call crlf<br />call crlf<br /><br />mov eax, white + (black*16)<br />call settextcolor<br /><br />exit<br />main endp<br />end main<br /></code></pre></div>
    <div class="meta">Posted on 2010-03-13 18:05:26 by LuffyPSP</div>
   </div>
   <div class="post" id="post-211006">
    <div class="subject"><a href="#post-211006">Re: Need very much help for loop and array...</a></div>
    <div class="body">Looks good. Does it work? Out of curiousity, what happens if the user enters &quot;xyz&quot; instead of a number?<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-03-14 10:08:26 by fbkotler</div>
   </div>
   <div class="post" id="post-211007">
    <div class="subject"><a href="#post-211007">Re: Need very much help for loop and array...</a></div>
    <div class="body">Yes it works. And I&#039;ve presented it to the lecturer, and he satisfied with it...:D<br /><br />If user input the xyz, it will appear as &quot;0&quot;...</div>
    <div class="meta">Posted on 2010-03-14 12:55:57 by LuffyPSP</div>
   </div>
   <div class="post" id="post-211012">
    <div class="subject"><a href="#post-211012">Re: Need very much help for loop and array...</a></div>
    <div class="body"><div class="quote"><br />Yes it works.<br /></div><br /><br />Good!<br /><br /><div class="quote"><br />And I&#039;ve presented it to the lecturer, and he satisfied with it...:D<br /></div><br /><br />Even better! :)<br /><br /><div class="quote"><br /><br />Okay. The reason I ask is that I&#039;ve helped people with a similar (simpler) assignment, using Dr. Carter&#039;s tut and software. He uses a call to scanf for the &quot;get a number from the keyboard&quot; chore, and scanf (IMHO) is mentally unbalanced. Enter &quot;xyz&quot;, and the program goes completely haywire! Multiple instances of &quot;You entered: (some large number)&quot;. It would completely trash your array! Not the student&#039;s fault, not Dr. Carter&#039;s fault - scanf is just &quot;brittle&quot;. We can do better, and I&#039;m glad Kip Irvine has!<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-03-14 18:20:03 by fbkotler</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29860&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29860&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29860" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29860&amp;page=2">&gt;</a><a href="../?id=29860&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>