<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>OOP framework progress - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8303" />
  <link rel="prev" href="../?id=8303&amp;page=2" />  <link rel="next" href="../?id=8303&amp;page=4" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=116">Windows</a> &raquo; <a href="../?id=8303">OOP framework progress</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=8303&amp;page=1" style="">&laquo;</a><a href="../?id=8303&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="8303" /><input type="number" name="page" min="1" max="4" step="1" value="3" onchange="this.form.submit();" /><a href="../?id=8303&amp;page=4">&gt;</a><a href="../?id=8303&amp;page=4">&raquo;</a></form>   <div class="post" id="post-63607">
    <div class="subject"><a href="#post-63607">OOP framework progress</a></div>
    <div class="body"><strong>bitRAKE</strong><br /><br />How are the examples going?<br /><br />Did you get my email?<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-10-26 18:32:16 by Maelstrom</div>
   </div>
   <div class="post" id="post-63647">
    <div class="subject"><a href="#post-63647">OOP framework progress</a></div>
    <div class="body">I just downloaded you package, and have a quick look over it... I have to say nice work!<br /><br />I havent tried anything out yet, but on a glance it looks good.. i will add more comments/thoughts when i get a chance to 'experince' it better ;)<br /><br />Keep up the good work!<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-10-26 22:57:50 by NaN</div>
   </div>
   <div class="post" id="post-63660">
    <div class="subject"><a href="#post-63660">OOP framework progress</a></div>
    <div class="body">Thanks <strong>NaN</strong><br /><br />I look forward to your comments.<br /><br />If you think the framework looks good, wait until you see the preprocessor :grin:<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-10-27 01:02:10 by Maelstrom</div>
   </div>
   <div class="post" id="post-64646">
    <div class="subject"><a href="#post-64646">OOP framework progress</a></div>
    <div class="body">I'm liking the look of this stuff - I've been defining custom objects using supporting linkedlist code, will there be any simple linking helper code?<br />I coded the linkedlist stuff as a helper for translating c++ examples back into masm... is this stuff going to be pd?</div>
    <div class="meta">Posted on 2002-11-05 00:48:58 by Homer</div>
   </div>
   <div class="post" id="post-64683">
    <div class="subject"><a href="#post-64683">OOP framework progress</a></div>
    <div class="body"><div class="quote">I'm liking the look of this stuff - I've been defining custom objects using supporting linkedlist code, will there be any simple linking helper code?</div><br /><br />I've already thought of creating some objects based on your linked list code but haven't gotten around to it yet.<br /><br />What do you mean by simple linking helper code?<br /><br /><div class="quote">I coded the linkedlist stuff as a helper for translating c++ examples back into masm... is this stuff going to be pd?</div><br /><br />pd?<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-11-05 06:16:20 by Maelstrom</div>
   </div>
   <div class="post" id="post-64770">
    <div class="subject"><a href="#post-64770">OOP framework progress</a></div>
    <div class="body">helper functions - for linking an unlinked object to another object for example<br />pd - public domain<br /><br />Some of the code in the LinkedList includefile is from Scronty.<br />Feel free to use anything or everything from the LinkedList code within your oop project provided that it is noncommercial, I'm sure Scronty would agree with that.</div>
    <div class="meta">Posted on 2002-11-05 21:35:10 by Homer</div>
   </div>
   <div class="post" id="post-64782">
    <div class="subject"><a href="#post-64782">OOP framework progress</a></div>
    <div class="body">What does .OBJECT mean?  What does it mean to add an object to a class?<br /><br /><br />Thanks,<br />_Shawn</div>
    <div class="meta">Posted on 2002-11-06 01:10:13 by _Shawn</div>
   </div>
   <div class="post" id="post-64795">
    <div class="subject"><a href="#post-64795">OOP framework progress</a></div>
    <div class="body">It might help to think of &quot;methods of a class&quot; as being similar to &quot;functions of a dll&quot;...  yeah yeah I know that's not at all accurate, but similarities exist.<br />That being said, should one of these &quot;methods&quot; refer to a particular &quot;object&quot;, then  the structure of that &quot;object&quot; needs to be defined.<br />Rather than redefine objects every time they need to be defined again, we can define a &quot;reference object&quot;, and then we can &quot;instance&quot; this any number of times with minimal resources.</div>
    <div class="meta">Posted on 2002-11-06 06:08:13 by Homer</div>
   </div>
   <div class="post" id="post-64798">
    <div class="subject"><a href="#post-64798">OOP framework progress</a></div>
    <div class="body"><strong>EvilHomer2k</strong><br /><br />I'm thick and it's time to go to bed ( currently 2:10 am ), I still don't follow about helper functions - an example?<br /><br />Yep the framework is public domain.<br /><br />Nice object analogy.<br /><br /><strong>_Shawn</strong><br /><br />The .OBJECT macro allows you to add objects, or object references to the class. Embedding objects is useful for static functionality, while object references are useful for dynamic functionality.<br /><br />Let's use a linked list node class as an example.<br /><br /><pre><code><br />.CLASS CLINKEDLISTNODE<br /><br />	.OBJECT lpNext, CLINKEDLISTNODE, PTR<br />	.OBJECT lpPrev, CLINKEDLISTNODE, PTR<br /><br />	.STATIC GetNext <br /><br />.ENDC<br /></code></pre><br /><br />lpNext and lpPrev are object pointers of type CLINKEDLISTNODE. Defining object pointers this way simply tells the framework how to access the data they reference.<br /><br />I'm I making sense or just babbling?<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-11-06 07:02:52 by Maelstrom</div>
   </div>
   <div class="post" id="post-64908">
    <div class="subject"><a href="#post-64908">OOP framework progress</a></div>
    <div class="body">some other example of object helper functions:<br />-search linkedlist hierarchy for first/all named child object(s)<br />-duplicate an object<br />-reparent an object to any other<br />-callback to return each instance of a type of object<br /><br />I guess I should have said &quot;object and associated resource management functions&quot; but it seemed a bit obtuse at the time.</div>
    <div class="meta">Posted on 2002-11-07 07:00:35 by Homer</div>
   </div>
   <div class="post" id="post-64985">
    <div class="subject"><a href="#post-64985">OOP framework progress</a></div>
    <div class="body">Hi <strong>EvilHomer2k</strong><br /><br />Aaaagh, now I see what you mean.<br /><br /><div class="quote">-search linkedlist hierarchy for first/all named child object(s)</div><br /><br />Wouldn't this exist as a method of the linked list class?<br /><br /><div class="quote">-duplicate an object</div><br /><br />I never thought of that.<br />I assume you mean create a copy of an object that already exists?<br />Out of interest, what uses are there for this?<br /><br /><div class="quote">-reparent an object to any other</div><br /><br />Isn't this restricted to linked lists, binary trees, etc.<br />Wouldn't this functionality be provided by the list or tree class?<br /><br /><div class="quote">-callback to return each instance of a type of object</div><br /><br />Now that's an interesting one.<br />This would require all objects to be tracked some how wouldn't it?<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-11-07 20:37:35 by Maelstrom</div>
   </div>
   <div class="post" id="post-65445">
    <div class="subject"><a href="#post-65445">OOP framework progress</a></div>
    <div class="body"><div class="quote">-callback to return each instance of a type of object<br /><br />Now that's an interesting one.<br />This would require all objects to be tracked some how wouldn't it?<br /></div><br /><br />Heh, its not to say its a bad idea... it would require an internal resorce tracking object.  The up side is if done properly, memory management/leaks could be avoided safely (even 'HDC' and such windows related leaks), with out the programmers concern.<br /><br />The down side, you now have a garbage collector... much like (dare i say it.... <em>java</em>)...<br /><br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-11-11 20:13:02 by NaN</div>
   </div>
   <div class="post" id="post-65454">
    <div class="subject"><a href="#post-65454">OOP framework progress</a></div>
    <div class="body">That is what I was getting at, automatic and intelligent resource management of objects, and automatic garbage collection (I suggest reference counting).<br />The outcome should emulate the C directives for instantiating and destroying referenced objects.<br />By example, at the moment the LinkedList code I worked on supports simplistic allocation and releasing, with minimal safety checks. It performs no auto garbage collection, leaving this to the application. This is not good. I was considering enshrining the current LinkedList code in a DLL along with some better management facilities, making it somewhat less flexible.<br />Yes, the Create() and Destroy() methods should be enshrined in the methods of each Class, but generic functions for duplicating existing objects etc probably should be available to all Classes, don't you agree?<br />Furthermore, as NaN pointed out, it would be lovely if the &quot;manager&quot; also maintained the reference database (whatever form it may take) such that it could perform the necessary auto garbage collection for us.<br /><br />Duplicating referenced objects is very common in gamecoding, and in many other areas of coding. Simply &quot;creating&quot; another object isn't always enough, especially if you want the duplicate object to inherit some or all of the attributes of its progenitor. If the object is a referenced object, the reference object describes the attribute set, but does not hold data unique to an instance of the object. We could code a function to copy the attributes of a given object, but it would be much better to provide a function which may duplicate any instanced object, and another suggestion here would be to provide for selective masking of the fields of the progenitor. Thus the function could cope with yet-to-be-defined object structures without the need to be recoded. The way I imagine the selection mask to operate would be to point to a &quot;dummy&quot; object, where any bits set to one would be copied, and any bits set to zero would be excluded, and also provide the sizeof the object (as I did in the improved LinkedList code to provide for unknown new objects).<br /><br />I am very enthusiastic about your project.<br />I am one who believes asm should grow and change, while always allowing for pure lowlevel opcodes. I am one who rides the fence. This project represents much more than a simple code module, it represents a breaching of languages, it is a bridge by which HLL coders may have an opportunity to see the light.<br />I encourage keen young amateurs to look at masm when choosing their next step forward, and mentor a dozen or so.. and this kind of project will be welcomed warmly by the community of coders on the edge of asm who are yet to make that leap because their foundation coding knowledge is based on virtual concepts which have no place beyond their compiler.<br /><br />Keep up the good work !!</div>
    <div class="meta">Posted on 2002-11-11 22:27:43 by Homer</div>
   </div>
   <div class="post" id="post-67997">
    <div class="subject"><a href="#post-67997">OOP framework progress</a></div>
    <div class="body">Umm, I don't really understand this framework completely:<br /><br />1. Does it create COM object DLLs/OCXs?<br />2. If so, what about idl, rgs, and other registration/registry files?<br />3. What about rasing events?<br />4. Are the COM objects created with this framework scriptable?<br /><br />I'd like to use this framework in my HTACOM app wizard<br />(that will allow us to create a Win32ASM COM project initially via point and click)</div>
    <div class="meta">Posted on 2002-11-28 18:58:08 by Xtreme</div>
   </div>
   <div class="post" id="post-68012">
    <div class="subject"><a href="#post-68012">OOP framework progress</a></div>
    <div class="body">As far as im aware (havent seen what Maelstrom been up to since his last post), his model is simple a low level OOP structure for assembly programming (much like the one Thomas and I worked on last year).<br /><br />Ie. Allocating memory from the heap and applying a structure of function pointers over them and calling the result an 'object'.  His is different in that he is writing a translation engine to take keywords and translate to ASM code (behind the scenes).  In ours we simple used macros (which was challenging to say the least ;) ). <br /><br />Im sure his framework will easily form wrappers around com objects, but it doesnt necessarily create com's.<br /><br />This is my understanding of his project, i could be 100% wrong here, but i dont think so... <br /><br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-11-28 21:42:01 by NaN</div>
   </div>
   <div class="post" id="post-68058">
    <div class="subject"><a href="#post-68058">OOP framework progress</a></div>
    <div class="body">Sorry about the lack of updates guys but I've been busy with the everyday chores of life.<br /><br />Your understanding is crystal clear <strong>NaN</strong>. I wanted the framework to be as low level as possible so people could do many different things with it. The original framework posted here uses macros, but as <strong>NaN</strong> stated I'm currently working on an object preprocessor to replace it. Due to time constraints lately I'm a bit behind with the project but I'll post here when its ready so watch this space! :)<br /><br />I was also interested by your post <strong>EvilHomer2k</strong> and will play around with it using the preprocessor.<br /><br />If anyones interested I can post some preprocessor info<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-11-29 02:21:11 by Maelstrom</div>
   </div>
   <div class="post" id="post-68071">
    <div class="subject"><a href="#post-68071">OOP framework progress</a></div>
    <div class="body"><div class="quote"><br />If anyones interested I can post some preprocessor info</div>Yup, post it.. it's always interesting stuff. :alright:</div>
    <div class="meta">Posted on 2002-11-29 04:08:19 by Maverick</div>
   </div>
   <div class="post" id="post-68178">
    <div class="subject"><a href="#post-68178">OOP framework progress</a></div>
    <div class="body">Thanks <strong>Maverick</strong>, always nice to see some interest :)<br /><br />The syntax is still in a state of flux so don't be surprised if it changes ;)<br /><br /><pre><code><br />#class CCLASS, &#91;base&#93;<br />&#123;<br />	_data dd ?<br /><br />	#object _blah &#91;*&#93; CBLAH<br /><br />	#static method &#91;C&#93; &#91;args&#93;<br /><br />	#virtual method &#91;*&#93; &#91;C&#93; &#91;args&#93;<br /><br />	#inline ; haven't worked these out yet!<br />	&#123;<br />		;  blah<br />	&#125;<br /><br />	#private<br /><br />	; private data and methods go here<br />&#125;<br /></code></pre><br /><br />The * means ptr ( object reference, pure virtual ) and C should be obvious. Anyone having C flashbacks yet :tongue: Arguments can be seperated by whitespace or comma's and you only have to specify C in the class definition, the proc will automatically generate correctly.<br /><br /><pre><code><br />#proc &#91;USES ebx edi esi&#93; CCLASS&#58;&#58;method, &#91;args&#93;<br />&#123;<br />	#ret<br />&#125;<br /></code></pre><br /><br />Object creation is controlled using these keywords<br /><br />#new - creates dynamic objects<br />#create - creates static objects<br />#local - creates objects on the stack ( these are automatically destroyed when the proc in which they where defined ends )<br />#construct - constructs an embedded object ( defined with #object )<br />#destroy - destroys an embedded object<br /><br />Object access is controlled using these keywords<br /><br />#this - set the this ptr<br />#superclass - invoke overloaded base method<br />#overload - overload a virtual method. ( used to change the method behaviour at runtime, has nothing to do with overloading methods thru inheritance )<br />#assume - assumes that a register accesses an object. ( similar to MASM syntax )<br />#set - sets and assumes a register accesses an object<br /><br />The #assume and #set keywords allow you to access objects passed to the method as well as global objects. These keywords require you to specify a name by which to access the object.<br /><br /><pre><code><br />	mov ebx, _lpFile<br />	#assume ebx, CFILE&#58;&#58;_lpFile ; access object as #_lpFile or #ebx<br /><br />	; or<br /><br />	#set ebx, CFILE&#58;&#58;_lpFile ; same as above<br /><br />	; we can now access the object<br /><br />	#ebx.method &#91;args&#93;<br />	#_lpFile.method &#91;args&#93;<br /><br />	mov eax, #ebx.data<br />	mov eax, #_lpFile.data<br /><br />	; #new, #create, and #local work the same way<br /><br />	#new ebx, CFILE&#58;&#58;_lpFile, &#91;args&#93; ; create a CFILE object and access it as #_lpFile or #ebx<br /></code></pre><br /><br />Accessing methods and data from the class whos method your currently in is done using #this<br /><br /><pre><code><br />	#this.method &#91;args&#93;<br /><br />	mov eax, #this.data<br /></code></pre><br /><br />I've left out a few but you get the idea.<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-11-29 19:33:30 by Maelstrom</div>
   </div>
   <div class="post" id="post-71886">
    <div class="subject"><a href="#post-71886">OOP framework progress</a></div>
    <div class="body">Hey all<br /><br />Long time without an update so I thought I had better post a few words.<br /><br />The new OOP preprocessor is progressing, albeit slowly, but I hope to have it done relatively soon.<br /><br />So give me your opinions for the following...<br /><br />1. What's the best place to store the virtual method ptrs, in the class structure or in a seperate vmt? What about speed concerns?<br />2. Would it be useful if the preprocessor could create or define COM objects?<br />3. When creating an object, who should be responsible for initializing the class data?<br />4. Is multiple inheritance required?<br /><br />Let me explain #3 a little. When I create an object I initialize it by copying a class template which nulls the data and initializes the virtual ptrs. The virtual ptrs should be initialized automatically but should the object data be initialized this way, or should the user be responsible for initializing it in the constructor?<br /><br />:alright:<br />Maelstrom</div>
    <div class="meta">Posted on 2002-12-19 23:55:29 by Maelstrom</div>
   </div>
   <div class="post" id="post-74446">
    <div class="subject"><a href="#post-74446">OOP framework progress</a></div>
    <div class="body">My test.asm only contains follow lines.<br /><pre><code><br />.586<br />.model		flat, stdcall<br />option		casemap&#58; none<br /><br />include class.inc<br /><br />.code<br />	start&#58;<br /><br />end start<br /></code></pre><br /><br />However when i compile the above assembly file, the following error occurs. Could anyone know what happen and where the error comes from?<br /><br /><br />Common.inc(64) : error A2008: syntax error : ARGC<br />Common.inc(66) : error A2012: PROC, MACRO, or macro repeat directive must precede LOCAL<br />Common.inc(74) : error A2170: directive must appear inside a macro<br />Common.inc(76) : fatal error A1008: unmatched macro nesting<br /><br />Make error(s) occured.</div>
    <div class="meta">Posted on 2003-01-05 09:05:29 by yoursguideline</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=8303&amp;page=1" style="">&laquo;</a><a href="../?id=8303&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="8303" /><input type="number" name="page" min="1" max="4" step="1" value="3" onchange="this.form.submit();" /><a href="../?id=8303&amp;page=4">&gt;</a><a href="../?id=8303&amp;page=4">&raquo;</a></form>  </div>
 </body>
</html>