<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>questions: how to compare memory using cmps and rep?? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18198" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18198">questions: how to compare memory using cmps and rep??</a></p>
   <div class="post" id="post-140775">
    <div class="subject"><a href="#post-140775">questions: how to compare memory using cmps and rep??</a></div>
    <div class="body">hello guys, <br />I'm writing a program, in which there 's a need to find a specific string in a block of memeory. And I would like to implement it in assembly. Here is how i do it:<br /><br />mov esi,StringAddress<br />mov edi,MemoryAddress<br />cld<br />mov ecx,LengthInByte<br />rep cmpsb   &lt;----------------error, can't compile here<br /><br />je @somewhere<br />jne @somewhereelse<br /><br />but the program can't be compiled successfully, the error message is:<br />error A2068: instrunction prefix not allowed<br /><br />what's the problem? i use &quot;rep movsb&quot; in other part of the program, there is no problem , why can't &quot;rep cmpsb&quot; work? <br /><br />Thank you for any advice~~<br />p.s. I'm using MASM</div>
    <div class="meta">Posted on 2004-05-03 09:46:07 by FredLiu</div>
   </div>
   <div class="post" id="post-140777">
    <div class="subject"><a href="#post-140777">questions: how to compare memory using cmps and rep??</a></div>
    <div class="body">use repe cmpsb or repne cmpsb instead</div>
    <div class="meta">Posted on 2004-05-03 09:48:18 by roticv</div>
   </div>
   <div class="post" id="post-140778">
    <div class="subject"><a href="#post-140778">questions: how to compare memory using cmps and rep??</a></div>
    <div class="body">wow~~<br />really quick reply~<br />thank you very much, now it compiles correctly!<br />by the way, why can't i use rep? what 's the difference?<br />(from some assembly tutorial, i saw them using rep with cmpsb)<br />thank you !</div>
    <div class="meta">Posted on 2004-05-03 09:50:44 by FredLiu</div>
   </div>
   <div class="post" id="post-140780">
    <div class="subject"><a href="#post-140780">questions: how to compare memory using cmps and rep??</a></div>
    <div class="body">By right, rep is a prefix to stosx, movsx,lodsx while repe is a prefix for cmpsx, scasx. However both rep and repe when turned to machine code are the same prefix, F3h. Just take it that masm is being fussy, but right in that sense.</div>
    <div class="meta">Posted on 2004-05-03 11:22:29 by roticv</div>
   </div>
  </div>
 </body>
</html>