<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>3-digit hex multiplication - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30241" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=30241">3-digit hex multiplication</a></p>
   <div class="post" id="post-213168">
    <div class="subject"><a href="#post-213168">3-digit hex multiplication</a></div>
    <div class="body">Hi! I need help for multiplication. We have to multiply 2 3-digit hex numbers. <br />I have made this last year but this one is a multiplication using 2-digit decimal numbers. <br />Hope you guys can help me with this one. :s<br /><br /><br /><pre><code>;<br />;2-digit MULTIPLICATION (in decimal)<br /><br />jmp start<br /><br />clrscr:<br /> &nbsp; &nbsp;mov ax,3<br /> &nbsp; &nbsp;int 10h<br /> &nbsp; &nbsp;ret<br />input_char:<br /> &nbsp; &nbsp;mov ah,1<br /> &nbsp; &nbsp;int 21h<br /> &nbsp; &nbsp;ret<br />print_char:<br /> &nbsp; &nbsp;mov ah,2<br /> &nbsp; &nbsp;int 21h<br /> &nbsp; &nbsp;ret<br />print_str:<br /> &nbsp; &nbsp;mov ah,9<br /> &nbsp; &nbsp;int 21h<br /> &nbsp; &nbsp;ret<br />check:<br /> &nbsp; &nbsp;cmp al,&#039;0&#039;<br /> &nbsp; &nbsp;jb mali<br /> &nbsp; &nbsp;cmp al,&#039;9&#039;<br /> &nbsp; &nbsp;ja mali<br /> &nbsp; &nbsp;ret<br />mali:<br /> &nbsp; &nbsp;lea dx,msg4<br /> &nbsp; &nbsp;call print_str<br /> &nbsp; &nbsp;jmp tapos<br /><br />start:<br /><br />call clrscr<br /><br />;input 1st number<br /> &nbsp; &nbsp;lea dx,msg1<br /> &nbsp; &nbsp;call print_str<br /><br /> &nbsp; &nbsp;call input_char<br /> &nbsp; &nbsp;call check<br /> &nbsp; &nbsp;sub al,30h<br /> &nbsp; &nbsp;mov bl,al<br /> &nbsp; &nbsp;mov al,10d<br /> &nbsp; &nbsp;mul bl<br /> &nbsp; &nbsp;push ax<br /> &nbsp; &nbsp;call input_char<br /> &nbsp; &nbsp;call check<br /> &nbsp; &nbsp;sub al,30h<br /> &nbsp; &nbsp;mov bl,al<br /> &nbsp; &nbsp;pop ax<br /> &nbsp; &nbsp;add al,bl<br /> &nbsp; &nbsp;push ax<br /><br />;input 2nd number<br /> &nbsp; &nbsp;lea dx,msg2<br /> &nbsp; &nbsp;call print_str<br /><br /> &nbsp; &nbsp;call input_char<br /> &nbsp; &nbsp;call check<br /> &nbsp; &nbsp;sub al,30h<br /> &nbsp; &nbsp;mov bl,al<br /> &nbsp; &nbsp;mov al,10d<br /> &nbsp; &nbsp;mul bl<br /> &nbsp; &nbsp;push ax<br /> &nbsp; &nbsp;call input_char<br /> &nbsp; &nbsp;call check<br /> &nbsp; &nbsp;sub al,30h<br /> &nbsp; &nbsp;mov bl,al<br /> &nbsp; &nbsp;pop ax<br /> &nbsp; &nbsp;add al,bl<br /> &nbsp; &nbsp;push ax<br /><br />pop ax<br />mov bl,al<br />pop ax<br />mul bx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;multiplication of the 2 numbers (stored in ax)<br /><br />mov cx,000ah<br /><br />div cx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;ones digit(remainder) in dl<br />push dx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;to stack<br />mov dl,00h &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;reset dl<br />div cx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;tens digit in dl<br />push dx &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;to stack<br />div cl &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;thousands digit in al / hundreds digit in ah<br />or ax,3030h &nbsp; &nbsp; &nbsp; &nbsp; ;convert to printable characters<br />push ax &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;to stack<br /><br />lea dx,msg3<br />call print_str<br /><br />;print thousands digit<br /> &nbsp; &nbsp;mov dl,al<br /> &nbsp; &nbsp;call print_char<br />;print hundreds digit<br /> &nbsp; &nbsp;pop ax<br /> &nbsp; &nbsp;mov dl,ah<br /> &nbsp; &nbsp;call print_char<br />;print tens digit<br /> &nbsp; &nbsp;pop dx<br /> &nbsp; &nbsp;or dl,30h<br /> &nbsp; &nbsp;call print_char<br />;print ones digit<br /> &nbsp; &nbsp;pop dx<br /> &nbsp; &nbsp;or dl,30h<br /> &nbsp; &nbsp;call print_char<br /><br />tapos:<br />int 20h<br /><br />msg1 db &quot;Enter 1st number[2-digit DECIMAL(00-99)]: $&quot;<br />msg2 db 0ah,0dh,&quot;Enter 2nd number[2-digit DECIMAL(00-99)]: $&quot;<br />msg3 db 0ah,0dh,&quot;Their PRODUCT is: $&quot;<br />msg4 db 0ah,0dh,&quot;Input is not in DECIMAL. Please try again.$&quot;<br /></code></pre></div>
    <div class="meta">Posted on 2010-09-16 11:47:36 by superdibi</div>
   </div>
   <div class="post" id="post-213188">
    <div class="subject"><a href="#post-213188">Re: 3-digit hex multiplication</a></div>
    <div class="body">Multiplying two numbers is going to be just the same, whether they&#039;re &quot;hex&quot; or &quot;decimal&quot; - these are just two ways to represent the number! What&#039;s going to need to change is the way you convert the characters the user inputs into a number. Start by thinking about your &quot;check&quot; routine. You&#039;re going to want to allow &#039;a&#039;..&#039;f&#039; or &#039;A&#039;..&#039;F&#039;, along with &#039;0&#039;..&#039;9&#039;.<br /><br />In your current code, when &quot;check&quot; returns (if it does), you subtract &#039;0&#039; (30h). Since you&#039;re going to want to subtract a different amount if it&#039;s a hex digit, you might want to incorporate this into a &quot;check_hex_and_convert&quot; routine, or something...<br /><br />Then you multiply by ten (if needed). To do hex, you&#039;d want to multiply by 16. This can more easily(?) be accomplished by shifting left 4 bits... You do the two digits &quot;in line&quot;, one after the other. You could do this with three digits, or maybe you&#039;d want to do it in a loop. Make sure you&#039;ve got a &quot;next digit&quot;, multiply (or shift) the &quot;result so far&quot;, and add (or &quot;or&quot;) in the new digit... repeat until done...<br /><br />Once you&#039;ve got the two numbers, multiply &quot;as usual&quot;. Now I suppose you&#039;ll want to print the result in hex, too(?). Same idea as above, only &quot;backwards&quot;. Instead of &quot;div&quot;, you can use &quot;rol reg, 4&quot; to get the &quot;first&quot; (or &quot;next&quot;) digit into a convenient position, Make a copy of it(!), and mask off the low bits with &quot;and reg, 0Fh&quot; - that&#039;s your digit, add &#039;0&#039;... if it&#039;s over &#039;9&#039;, add another 7 to get it into the &#039;A..&#039;F&#039; range. Easier than decimal, in a way, since we can get the digits in the right order to print &#039;em! :)<br /><br />Getting the number from the user is probably the &quot;hard part&quot;, since you need to check for both upper and lower case - or you could insist that the user stick to one case or the other. Or you could force the case yourself... really ought to make sure it&#039;s an &quot;alpha&quot; character, that *has* a case, but if it isn&#039;t, it&#039;s &quot;invalid&quot; anyway... &quot;and reg, 0DFh&quot; would force to upper...<br /><br />Give it a shot - get one part working before you attempt the next part. If/when you run into trouble, ask again! :)<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-09-20 07:18:34 by fbkotler</div>
   </div>
  </div>
 </body>
</html>