<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>floating random generator - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13865" />
    <link rel="next" href="../?id=13865&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13865">floating random generator</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=13865&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=13865&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="13865" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=13865&amp;page=2">&gt;</a><a href="../?id=13865&amp;page=2">&raquo;</a></form>   <div class="post" id="post-107187">
    <div class="subject"><a href="#post-107187">floating random generator</a></div>
    <div class="body">was looking for an asm floating random gen, range between 0.0 and 1.0.<br /><br />every link, sample is appreciated.<br /><br />THX  B7</div>
    <div class="meta">Posted on 2003-06-15 15:47:48 by Bit7</div>
   </div>
   <div class="post" id="post-107198">
    <div class="subject"><a href="#post-107198">floating random generator</a></div>
    <div class="body">;Dont take it too serious its my first time with floating points :P  ;<br /><br />call Your_random_func     ( range as below :P  &lt;0 , 10&gt; )<br />;return  eax E &lt;0b  , 0000000000000000000000000000001010b&gt;<br /><br /><br />and eax,0000000000000000000000000001111b<br />   or eax,0000101010000000000000000000000b<br /><br /><br /><br />mov IntoYourFavoriteFloatingPointVariable32bit,eax<br /><br /><br /><br /><br />;TO large amount of 000100101b i hope i did not fu**ed something</div>
    <div class="meta">Posted on 2003-06-15 17:22:57 by AceEmbler</div>
   </div>
   <div class="post" id="post-107201">
    <div class="subject"><a href="#post-107201">floating random generator</a></div>
    <div class="body"><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=11188&amp;highlight=random+twister">http://www.asmcommunity.net/board/index.php?topic=11188&amp;highlight=random+twister</a></div>
    <div class="meta">Posted on 2003-06-15 17:41:57 by bitRAKE</div>
   </div>
   <div class="post" id="post-107231">
    <div class="subject"><a href="#post-107231">floating random generator</a></div>
    <div class="body">thx ace, seems pretty nice soluition, to understand well what you'r doing  i'm gonna review what the floating bits mean..<br />thx bitrake, very useful link.<br /><br />B7</div>
    <div class="meta">Posted on 2003-06-16 01:50:52 by Bit7</div>
   </div>
   <div class="post" id="post-107280">
    <div class="subject"><a href="#post-107280">floating random generator</a></div>
    <div class="body">I just overdo with this line:<br /><br /><br />and eax,0000000000000000000000000001111b</div>
    <div class="meta">Posted on 2003-06-16 11:35:15 by AceEmbler</div>
   </div>
   <div class="post" id="post-107360">
    <div class="subject"><a href="#post-107360">floating random generator</a></div>
    <div class="body">Can u tell my why 24th digit of 32 bit floating point have to be 1 ????</div>
    <div class="meta">Posted on 2003-06-17 09:15:25 by AceEmbler</div>
   </div>
   <div class="post" id="post-107406">
    <div class="subject"><a href="#post-107406">floating random generator</a></div>
    <div class="body">REAL4's don't support denormalized floats, so bit 24 is implied though not present.  Having bit 24 implied gives an added bit of percision in the limited space of 32-bits.<br /><br />[1 sign bit][8 bit exponent] <strong>1.</strong> [23 bits fraction]<br /><br /><br />REAL10's do support denormalized floats.</div>
    <div class="meta">Posted on 2003-06-17 16:08:28 by bitRAKE</div>
   </div>
   <div class="post" id="post-107438">
    <div class="subject"><a href="#post-107438">floating random generator</a></div>
    <div class="body">still dont know why it's there for ??? Can u give it to me more straight ???</div>
    <div class="meta">Posted on 2003-06-18 01:34:46 by AceEmbler</div>
   </div>
   <div class="post" id="post-107466">
    <div class="subject"><a href="#post-107466">floating random generator</a></div>
    <div class="body">If the exponent is all 0s, but the fraction is non-zero (else it would be interpreted as zero), then the value is a denormalized number, which does not have an assumed leading 1 before the binary point. Thus, this represents a number (-1)s <em>x</em> 0.f <em>x</em> 2-126, where s is the sign bit and f is the fraction. For double precision, denormalized numbers are of the form (-1)s <em>x</em> 0.f <em>x</em> 2-1022. From this you can interpret zero as a special type of denormalized number.<br /><br /><a target="_blank" href="http://grouper.ieee.org/groups/754/">http://grouper.ieee.org/groups/754/</a> &lt;-- they did it - read why.<br /><br />Maybe I don't understand the question?  What bit 24 are you speaking of?</div>
    <div class="meta">Posted on 2003-06-18 07:17:00 by bitRAKE</div>
   </div>
   <div class="post" id="post-107467">
    <div class="subject"><a href="#post-107467">floating random generator</a></div>
    <div class="body">while you're talking about bit 24, i'm still trying to understand what decimal 1.0 correspond to single binary, and why.<br /><br />Can't find any good link to learn it.<br /><br /><br />B7</div>
    <div class="meta">Posted on 2003-06-18 07:18:36 by Bit7</div>
   </div>
   <div class="post" id="post-107468">
    <div class="subject"><a href="#post-107468">floating random generator</a></div>
    <div class="body">Here is a start:<br /><a target="_blank" href="http://research.microsoft.com/~hollasch/cgindex/coding/ieeefloat.html">http://research.microsoft.com/~hollasch/cgindex/coding/ieeefloat.html</a><br /><br />[+/-]  <strong>1.</strong> <br /><br />1.0 {decimal} = + 1.0 SHL 0 {binary}<br /><br />[+] [0+127] <strong>1.</strong> [0]<br /><br />0 01111111 00000000000000000000000<br /><br />*The bold part is implied (bit not present).<br /><br /><a target="_blank" href="http://www.intel.com/design/pentium/manuals/24319001.pdf">Intel Manual Volume One</a> is where I learned from.<br /><br />The notation is analogous to scientific notation in base ten.<br /><br />1.5643 x 10^-4<br /><br />...but in binary...<br /><br />1.01010001 x 2^-13<br /><br />1.{fraction} x 2^{exp}<br /><br />The <strong>exp</strong>onent basically results in a shift of the binary bits - left for positive and right for negitive.  The length of the fraction determines the accuracy of the number.</div>
    <div class="meta">Posted on 2003-06-18 07:45:50 by bitRAKE</div>
   </div>
   <div class="post" id="post-107505">
    <div class="subject"><a href="#post-107505">floating random generator</a></div>
    <div class="body">many tanks for the links Rake ! :)<br /><br />Seems good links but sincerly, i didn't understand very much the concept, maybe my technical-english is not so good, maths was not my strong at school :) maybe my head is too hard.<br /><br />I didn't yet understand, if for 1.0 the 1 is skipped, what's the binary for 0.0 and 0.5 ?<br /><br />B7</div>
    <div class="meta">Posted on 2003-06-18 15:51:34 by Bit7</div>
   </div>
   <div class="post" id="post-107509">
    <div class="subject"><a href="#post-107509">floating random generator</a></div>
    <div class="body"><div class="quote"><br />I didn't yet understand, if for 1.0 the 1 is skipped, what's the binary for 0.0 and 0.5 ?</div>Zero is zero, but can be negitive, too (80000000h) -- isn't there always an exception to rules - this is it. :grin:<br /><br />0.5 {decimal} = 0.1 {binary}<br /><br />So, we shift the number left by one to put the one bit out front - we have to do this because it is implied.<br /><br />0.5 {decimal} = 0.1 {binary} = + 1.0 x 2^-1<br /><br />[+] [-1+127] <strong>1.</strong> [0]<br /><br />0 01111110 00000000000000000000000<br /><br /><strong>Bit7</strong>, I'll keep converting numbers until you get it - no problem, take your time.  Give me a harder one to work through. ;)  Don't forget your debugger either - I would be nothing without it - thank you <strong>Olly</strong>!<br /><br />All binary numbers (except zero) can be represented as:<br /><br />+/- 1.{frac} x 2^{exp}<br /><br />[+/-] [127+exp] <strong>1.</strong> </div>
    <div class="meta">Posted on 2003-06-18 16:36:59 by bitRAKE</div>
   </div>
   <div class="post" id="post-107518">
    <div class="subject"><a href="#post-107518">floating random generator</a></div>
    <div class="body">for know, as workaround i've tought this easy random gen....<br /><br /><pre><code><br /><br />proc		AngeloFloatRandom<br /><br />		LOCAL	s_rf	 &#58;dword<br />		LOCAL	s_i1     &#58;dword	<br />		<br />		mov	&#91;s_i1&#93;, 10<br />		xor	ecx,ecx<br />		lea  	esi, &#91;g_rf1&#93;<br />@@GetNumber&#58;	mov	eax, &#91;g_seed&#93;<br />		ror	eax, 1<br />		mov	&#91;g_seed&#93;, eax<br />		and	eax, 1110b<br />		cmp	eax, 10<br />		jg	@@GetNumber<br />		mov	&#91;s_rf&#93;, eax<br />		<br />		ffree	st&#40;0&#41;<br />		fild	&#91;s_rf&#93;<br />		fidiv	&#91;s_i1&#93;<br />		fstp	&#91;dword ptr esi&#93;<br />		<br />		inc	ecx<br />		add	esi,4<br />		cmp	ecx,3<br />		jne	@@GetNumber<br />		<br />		ret	                                 <br /><br />endp		AngeloFloatRandom	<br /><br /></code></pre><br /><br /><br />This is my first sketch, generate 3 dufferents floatings seems work for now.<br />B7</div>
    <div class="meta">Posted on 2003-06-18 17:12:44 by Bit7</div>
   </div>
   <div class="post" id="post-107520">
    <div class="subject"><a href="#post-107520">floating random generator</a></div>
    <div class="body">@@GetNumber:	mov	eax, <br />		ror	eax, 1<br />		mov	, eax<br />		and	eax, 1110b<br />		cmp	eax, 10<br />		jg	@@GetNumber<br /><br /><br /><br /><br />Thats a LOL part.<br /><br />I would avoid loops in random generator proc<br /><br /><br />But maby i'm wrong and my post is LOL :tongue:</div>
    <div class="meta">Posted on 2003-06-18 17:35:56 by AceEmbler</div>
   </div>
   <div class="post" id="post-107528">
    <div class="subject"><a href="#post-107528">floating random generator</a></div>
    <div class="body">10 {decimal} = 1010.0 {binary} = + 1.010 x 2^3<br /><br />[+] [127+3] 1. [010]<br /><br />0 10000010 01000000000000000000000 = 41200000h<br /><br /><pre><code>proc		AngeloFloatRandom<br /><br />		LOCAL	s_rf	 &#58;dword<br />		LOCAL	s_i1     &#58;REAL4<br /><br />		mov	DWORD PTR &#91;s_i1&#93;, &#91;b&#93;41200000h&#91;/b&#93;<br />		xor	ecx,ecx<br />		lea  	esi, &#91;g_rf1&#93;<br />@@GetNumber&#58;	mov	eax, &#91;g_seed&#93;<br />		ror	eax, 1<br />		mov	&#91;g_seed&#93;, eax<br />		and	eax, 1110b<br />		cmp	eax, 10<br />		jg	@@GetNumber<br />		mov	&#91;s_rf&#93;, eax<br />		<br />		ffree	st&#40;0&#41;<br />		fild	&#91;s_rf&#93;<br />		&#91;b&#93;fdiv&#91;/b&#93;	&#91;s_i1&#93;<br />		fstp	&#91;dword ptr esi&#93;<br />		<br />		inc	ecx<br />		add	esi,4<br />		cmp	ecx,3<br />		jne	@@GetNumber<br />		<br />		ret	                                 <br /><br />endp		AngeloFloatRandom</code></pre>:) Faster to work directly with floats.</div>
    <div class="meta">Posted on 2003-06-18 18:28:36 by bitRAKE</div>
   </div>
   <div class="post" id="post-107552">
    <div class="subject"><a href="#post-107552">floating random generator</a></div>
    <div class="body">many thanks again bitrake,<br /><br />Ace, you're agree, that was just a test if it was warking :) Now i will get sure my random is &lt; 10 so no loop will be necessary.<br />I will also give more precision to my 0.xxx number, i will get from the seed a decimal 1XXX number and then i will divide for 1000. <br /><br />This until i will understand floating ... :)</div>
    <div class="meta">Posted on 2003-06-19 01:39:13 by Bit7</div>
   </div>
   <div class="post" id="post-107591">
    <div class="subject"><a href="#post-107591">floating random generator</a></div>
    <div class="body">1000 {decimal} = 1111101000.0 {binary} = + 1.111101000 x 2^9<br /><br />[+] [127+9] 1. [111101000]<br /><br />0 10001000 11110100000000000000000 = 447A0000h</div>
    <div class="meta">Posted on 2003-06-19 09:06:10 by bitRAKE</div>
   </div>
   <div class="post" id="post-107654">
    <div class="subject"><a href="#post-107654">floating random generator</a></div>
    <div class="body">I looked at the question in a different way.  I made a bloated program do the work with a lot of extra steps.</div>
    <div class="meta">Posted on 2003-06-19 18:46:53 by roaknog</div>
   </div>
   <div class="post" id="post-107807">
    <div class="subject"><a href="#post-107807">floating random generator</a></div>
    <div class="body">Thanks roak, it's very useful, but i want to understand the conversion....<br /><br /><br />Hey Professor Bitrake, Let's correct my first test......<br /><br /><br /><br />+0     could be<br /><br />+   127    0 <br />1 01111111 000000000000000000000000<br /><br />-------------------------------------- <br />+0.232 could be<br /><br />+   127-1  232<br />1 01111110 111010000000000000000000<br /><br />--------------------------------------    <br />+1.54  could be<br /><br />+   127    154   (1 is implied)<br />1 01111111 001101000000000000000000<br /><br />--------------------------------------<br />+2.473 could be<br /><br />+   127    2473  (1 is implied)<br />1 01111111 001101010010000000000000<br /><br />-------------------------------------- <br />+7854.23<br /><br />+  127+12  7854.23 (1 is implied)<br />1 00001100 111010101110101110000000</div>
    <div class="meta">Posted on 2003-06-21 09:16:31 by Bit7</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=13865&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=13865&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="13865" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=13865&amp;page=2">&gt;</a><a href="../?id=13865&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>