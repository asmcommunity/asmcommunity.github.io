<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>flat assembler interface for VCPI - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12282" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=12282">flat assembler interface for VCPI</a></p>
   <div class="post" id="post-94406">
    <div class="subject"><a href="#post-94406">flat assembler interface for VCPI</a></div>
    <div class="body">Hi Guys,<br />I've modified fasm's dos interface so that it can be run on VCPI environment.<br />This is tested on both QEMM and EMM386 and it works fine to me. Since there's<br />about 300 lines of code to kick fasm to ring-0 pm so  it run faster than wdosx and doesnt cause memory leak from EMS pool like wdosx (bug?)<br /><br />Happy coding</div>
    <div class="meta">Posted on 2003-04-08 14:26:52 by quiveror</div>
   </div>
   <div class="post" id="post-94431">
    <div class="subject"><a href="#post-94431">flat assembler interface for VCPI</a></div>
    <div class="body">how many run fasm under raw and vcpi? genuine question out of curiosity, not mocking.<br /><br />and it possible to feel any speed increase from ring0 vs. ring3, even on old hardware? (old defines as &quot;around 200 mhz&quot;).</div>
    <div class="meta">Posted on 2003-04-08 15:11:07 by f0dder</div>
   </div>
   <div class="post" id="post-94440">
    <div class="subject"><a href="#post-94440">flat assembler interface for VCPI</a></div>
    <div class="body">Nice work, and even before I have released the guide to fasm's interface... :alright: <br />About the speed: on the older machines the fastest version is the unREAL one (this is the fully 32-bit real mode, while FRM - which fasm uses normally - only enables 32-bit addresing), but I haven't made this version official because I'm still not sure if it runs correctly on all machines. If anyone wants to try it, the needed interface files are in the attachment.</div>
    <div class="meta">Posted on 2003-04-08 16:05:01 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-94442">
    <div class="subject"><a href="#post-94442">flat assembler interface for VCPI</a></div>
    <div class="body">but is it noticeable, privalov? and by how much? how low (machine-spec wise) do you have to go before you can tell a difference between ring0 and ring3 (both running under dos)?</div>
    <div class="meta">Posted on 2003-04-08 16:10:31 by f0dder</div>
   </div>
   <div class="post" id="post-94444">
    <div class="subject"><a href="#post-94444">flat assembler interface for VCPI</a></div>
    <div class="body">Well, I haven't tested the difference between ring0 and ring3, but on old machines real mode is noticeable faster than protected mode when executing 16-bit code, altough is a bit slower when executing 32-bit code - because of 66h and 67h prefixes. unREAL mode executes pure 32-bit code (without the slowing-down prefixes) in the real mode environment and therefore is the fastest one. Probably ring0 without paging will have the speed similar to real mode and ring3 with paging will be noticeably slower; but it all applies only to old machines (386-486, early Pentiums), on the new ones there's no slow-down because of protected mode mechanism (but there's still slow-down because of prefixes).<br />In my tests on Pentium 66 machine unREAL version was about 1.5 times faster than FRM version. I've heard that on 386 this factor is even better.</div>
    <div class="meta">Posted on 2003-04-08 16:16:08 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-94450">
    <div class="subject"><a href="#post-94450">flat assembler interface for VCPI</a></div>
    <div class="body">0x66 and 0x67 are evil imo :) - I always though flat+unreal+voodoo+(etc) referred to the same mode, though (that is, 16bit mode with extensions allowing 32bit register access etc).<br /><br />hm, pure 32bit code in real-mode environment... this sounds somewhat interesting!<br /><br />What about ring3 w/o paging compared to ring0 w/o paging? I don't think the ring difference will make a noticeable difference, even on old hardware? (I suspected paging might, but only on &quot;quite old&quot; hardware).<br /><br />This stuff might not be of immediate use to me, but interesting it is nonetheless. And if I start messing with some of the abandoned 486 machines here, it might even come in useful :)<br /><br />Btw, the &quot;voodoo modes&quot; are somewhat quirky sometimes. I don't think there's any hw-specific problems (perhaps with very queer non-intel CPUs, though I doubt it) - main problems are with weird drivers etc. But then you have the choice of raw pm, vcpi, dpmi, whatever.</div>
    <div class="meta">Posted on 2003-04-08 16:31:41 by f0dder</div>
   </div>
  </div>
 </body>
</html>