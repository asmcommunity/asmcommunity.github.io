<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>From VxD to KMD - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13689" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13689">From VxD to KMD</a></p>
   <div class="post" id="post-106059">
    <div class="subject"><a href="#post-106059">From VxD to KMD</a></div>
    <div class="body">Hello,<br /><br />I am literally burning out my whole brain around writing a ring0 keyboard hook procedure under W2K, XP.<br />I studied the example provided in the ntddk, there is a source called kbfiltr.c but I was not able to fully understand this. Yes, I am not a genius, I recognize my limitations but NT operating systems are full of very poorly documented data structures, functions and so on...a tutorial, which I expected to find in ntddk, doesn't exist. You are left alone with a lot of abstraction layers, with a lot of concepts that HIDE the real problems.<br /><br />To install a keyboard hook is not so complicated, it cannot be so. I installed hooks under DOS, and from boot sector programs without O.S. Ok, is good that there are all those structures, those &quot;legal ways&quot; to do things....but I am not running a multiprocessor machine, I've only one USER, me, the Administrator...I don't want to deal with all this complexity (voluntarily increased by undocumentation).<br /><br />So, I propose this VxD that, in a legal way, install this hook under W98 systems.<br />I thank Iczelion for his precious tutorials and other people that showed me how to do this....<br /><br />I hope that someone who has just done a similar hook under NT would share his/her source. I think the hook is realized writing the address of hooking function into CONNECT_DATA.ClassService structure...<br /><br />Thank you,<br /><br />fooCoder</div>
    <div class="meta">Posted on 2003-06-05 05:50:08 by fooCoder</div>
   </div>
   <div class="post" id="post-106387">
    <div class="subject"><a href="#post-106387">From VxD to KMD</a></div>
    <div class="body">Greetings fooCoder, You might want to check out this link<br /><a target="_blank" href="http://www.sysinternals.com/ntw2k/utilities.shtml">www.sysinternals.com/ntw2k/utilities.shtml</a> <br /><br />Download the Ctrl2Cap V2.0 kernel-mode driver package.</div>
    <div class="meta">Posted on 2003-06-08 13:01:06 by Poimander</div>
   </div>
   <div class="post" id="post-106394">
    <div class="subject"><a href="#post-106394">From VxD to KMD</a></div>
    <div class="body">&quot;NT operating systems are full of very poorly documented data structures, functions and so on...&quot;<br /><br />Try<br /><a target="_blank" href="http://elicz.cjb.net/">http://elicz.cjb.net/</a></div>
    <div class="meta">Posted on 2003-06-08 14:31:01 by MazeGen</div>
   </div>
   <div class="post" id="post-106627">
    <div class="subject"><a href="#post-106627">Thank you guys!</a></div>
    <div class="body">Thank you for support, Poimander and MazeGen .<br /><br />I will carefully study that C source code and try to transform it in asm. When I finish, I will post the results.<br /><br />Regards,<br /><br />fooCoder</div>
    <div class="meta">Posted on 2003-06-10 06:44:06 by fooCoder</div>
   </div>
  </div>
 </body>
</html>