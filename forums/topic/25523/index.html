<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Menu in a dialog box help - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25523" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25523">Menu in a dialog box help</a></p>
   <div class="post" id="post-186475">
    <div class="subject"><a href="#post-186475">Menu in a dialog box help</a></div>
    <div class="body">Hello:<br /><br />I am having troubles getting my menu to work. I have a menu in my resource file. I am using a dialog box as a main window. The main dialog box calls a second dialog box. I only want my menu to work on the second dialog box.<br /><br />If I do this:<br />mov		wc.lpszMenuName,IDM_MENU<br /><br />The menu appears on both dialog boxes. Shazbot!<br /><br />If I do this:<br />mov		wc.lpszMenuName,0<br />The menu does not appear on either dialog box. So far so good.<br /><br />Now if I try this on the second dialog box: (in the WM_INITDIALOG area)<br />invoke LoadMenu,hInstance,IDM_MENU<br />invoke SetMenu,hWin,eax<br /><br />The menu does not appear on the second dialog box where I need it. Can anyone tell me WTF?<br /><br />I have searched quit a bit and found many references to:<br />invoke LoadMenu,hInstance,IDM_MENU<br />invoke SetMenu,hWin,eax<br /><br />But cant make it work. How I do dis?<br /><br />Thanks in advance.<br /><br />SS<br /><br /><br /></div>
    <div class="meta">Posted on 2006-11-09 22:43:07 by SideSwipe</div>
   </div>
   <div class="post" id="post-186481">
    <div class="subject"><a href="#post-186481">Re: Menu in a dialog box help</a></div>
    <div class="body">The lines LoadMenu and SetMenu should work in your case. Are you sure that both hInstance &amp; hWin are having the expected values?<br /><br />Can you post/attach the code you are using? </div>
    <div class="meta">Posted on 2006-11-10 06:55:51 by JimmyClif</div>
   </div>
   <div class="post" id="post-186483">
    <div class="subject"><a href="#post-186483">Re: Menu in a dialog box help</a></div>
    <div class="body">Hello JimmyClif and All:<br /><br />I managed to get my menu working by changing the template I was using with RadAsm. <br /><br />Instead of using dialog as main template that has a WinMain Proc and all of the wc.lpszMenuName,IDM_MENU stuff. <br /><br />I used the Dialog as App template and now it works with LoadMenu/SetMenu. It was a weird problem, I discovered that not only did the menu not show up on the second dialog box, none of the controls and buttons worked either. It didnt seem to matter which dialog box I invoked first, the controls on the second dialog box would not work. I dunno what I was doing wrong there, took about four hours to get it working again!<br /><br />Anyway, thanks for your offer of help!<br /><br />SS<br /></div>
    <div class="meta">Posted on 2006-11-10 10:25:05 by SideSwipe</div>
   </div>
  </div>
 </body>
</html>