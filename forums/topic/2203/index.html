<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Strangest ListView problem ever! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2203" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2203">Strangest ListView problem ever!</a></p>
   <div class="post" id="post-13915">
    <div class="subject"><a href="#post-13915">Strangest ListView problem ever!</a></div>
    <div class="body">Hi everyone. <br />   I know long time no see, but i have been busy :)<br /><br />I am facing a strange problem with ListView control. I do InsertItem but the string is not shown in the listview??? Even when i do GetItemCount on the ListView after adding the item , it correctly shows me 1, but the string is still not shown? I am posting the code here. Sorry for it being in C, but i believe noone should have problems understanding it.<br /><br /><pre><code>DWORD dwStyle=WS_POPUP|WS_DLGFRAME | LVS_REPORT | LVS_NOCOLUMNHEADER | LVS_SINGLESEL |<br />LVS_SHAREIMAGELISTS | LVS_SHOWSELALWAYS |LVS_SORTASCENDING|WS_VISIBLE;<br /><br />//creates the window			<br />m_cdhWnd = CreateWindow&#40; WC_LISTVIEW, NULL, dwStyle,<br />rect.left, rect.top,rect.right-rect.left, rect.bottom-rect.top, <br />m_hWndEdit, NULL, m_pApp-&gt;GetHINSTANCE&#40;&#41;, NULL &#41;;<br /><br />ASSERT&#40;IsWindow&#40;m_cdhWnd&#41;&#41;;<br /><br />LV_ITEM lvi =&#123;0&#125;;<br /><br />lvi.mask=LVIF_TEXT;<br />lvi.pszText=&quot;teststring&quot;;<br />ListView_InsertItem&#40;m_cdhWnd, &amp;lvi&#41;;<br /><br />ListView_SetColumnWidth&#40;m_cdhWnd,0,LVSCW_AUTOSIZE &#41;;<br />int i = ListView_GetItemCount&#40;m_cdhWnd&#41;;</code></pre></div>
    <div class="meta">Posted on 2001-12-04 04:42:30 by MovingFulcrum</div>
   </div>
   <div class="post" id="post-13922">
    <div class="subject"><a href="#post-13922">Strangest ListView problem ever!</a></div>
    <div class="body">Although you used LVS_NOCOLUMNHEADER in the listview style, you still need to have at least one column. It will not show that column, but it is required to show items.<br /><br />Thomas</div>
    <div class="meta">Posted on 2001-12-04 06:05:02 by Thomas</div>
   </div>
   <div class="post" id="post-13927">
    <div class="subject"><a href="#post-13927">Strangest ListView problem ever!</a></div>
    <div class="body">Thanks a lot Thomas. And silly, silly me. I had been sitting on that for hours, checked each and every window style and almost each line of code concerning it. Next time i will try to be more careful:) <br /><br />Hiro,if you feel you can delete this post. Way too silly to stay here:) <br /><br />Btw, Thomas, That wizard of yours looks pretty angry;)</div>
    <div class="meta">Posted on 2001-12-04 09:30:14 by MovingFulcrum</div>
   </div>
   <div class="post" id="post-13931">
    <div class="subject"><a href="#post-13931">Strangest ListView problem ever!</a></div>
    <div class="body">It's not too silly MF... if people knew how to search, a post like this<br />could keep the same question from being asked twice =).</div>
    <div class="meta">Posted on 2001-12-04 10:22:47 by f0dder</div>
   </div>
  </div>
 </body>
</html>