<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Graphics programming, oldskool style - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30761" />
    <link rel="next" href="../?id=30761&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=30761">Graphics programming, oldskool style</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=30761&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=30761&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="30761" /><input type="number" name="page" min="1" max="5" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=30761&amp;page=2">&gt;</a><a href="../?id=30761&amp;page=5">&raquo;</a></form>   <div class="post" id="post-215404">
    <div class="subject"><a href="#post-215404">Graphics programming, oldskool style</a></div>
    <div class="body">I&#039;ve spent the past few days exploring some early CGA, EGA and VGA programming. The stuff I missed out on, since I didn&#039;t start programming graphics on PC until late in the VGA era.<br />Up to now, I only knew CGA and EGA from the games I&#039;ve played. And although I&#039;ve done some VGA, I had never used the legendary mode X until now.<br /><br />Anyway, I wrote a blog about some of my findings, also includes some links to useful documents if anyone wants to try for themselves:<br />http://scalibq.wordpress.com/2011/11/23/just-keeping-it-real-old-skool-style/</div>
    <div class="meta">Posted on 2011-11-24 02:41:11 by Scali</div>
   </div>
   <div class="post" id="post-215422">
    <div class="subject"><a href="#post-215422">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Here&#039;s a quick preview:<br />http://www.youtube.com/watch?v=kto_SgMma7w<br />Rotating cube with flatshading in EGA mode.</div>
    <div class="meta">Posted on 2011-11-27 19:00:47 by Scali</div>
   </div>
   <div class="post" id="post-215425">
    <div class="subject"><a href="#post-215425">Re: Graphics programming, oldskool style</a></div>
    <div class="body">And here are some binaries: http://bohemiq.scali.eu.org/OLDSKOOL.zip<br />They are 16-bit DOS binaries, compiled for 8088 with no FPU.<br />They should work in Dosbox (although you might have to increase the cycle count to get them running nicely. For some reason they run fine from the Turbo C++ IDE, but much slower when running standalone).</div>
    <div class="meta">Posted on 2011-11-28 05:50:43 by Scali</div>
   </div>
   <div class="post" id="post-215446">
    <div class="subject"><a href="#post-215446">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Part 2 of my blog is up:<br />http://scalibq.wordpress.com/2011/11/29/just-keeping-it-real-part-2/<br /><br />This time I wrap up the CGA/EGA/VGA stuff, and start on the Amiga.<br />Part 3 will cover actual polygons being rendered with Amiga hardware.</div>
    <div class="meta">Posted on 2011-11-29 12:53:26 by Scali</div>
   </div>
   <div class="post" id="post-215469">
    <div class="subject"><a href="#post-215469">Re: Graphics programming, oldskool style</a></div>
    <div class="body">First attempt at a hardware-rendered polygon on Amiga was horrible:<br />http://www.youtube.com/watch?v=ArriSvIwaS4<br />All sorts of filling errors, because the boundary lines were not plotted accurately enough.<br /><br />After a lot of tweaking I arrived at this, seems okay now:<br />http://www.youtube.com/watch?v=3Qb5mdGkt-o</div>
    <div class="meta">Posted on 2011-12-01 10:45:55 by Scali</div>
   </div>
   <div class="post" id="post-215472">
    <div class="subject"><a href="#post-215472">Re: Graphics programming, oldskool style</a></div>
    <div class="body">man ur crazy, digging around in the dirt when u know they dont let us near the iron anymore! but i applaud ur lunacy!<br />On another topic, did u ever get around to documenting ur model file format? I&#039;m currently writing a maya export plugin and I could use a breath of fresh air!<br /></div>
    <div class="meta">Posted on 2011-12-02 02:27:45 by Homer</div>
   </div>
   <div class="post" id="post-215476">
    <div class="subject"><a href="#post-215476">Re: Graphics programming, oldskool style</a></div>
    <div class="body"><div class="quote"><br />man ur crazy, digging around in the dirt when u know they dont let us near the iron anymore! but i applaud ur lunacy!</div><br /><br />I suppose I didn&#039;t do enough of that as a child :)<br /><br /><div class="quote"><br />On another topic, did u ever get around to documenting ur model file format? I&#039;m currently writing a maya export plugin and I could use a breath of fresh air!<br /></div><br /><br />Yes, there is a README.txt included with the BHM stuff on sourceforge, which describes the different chunks that are used in the format:<br />http://bhmfileformat.svn.sourceforge.net/viewvc/bhmfileformat/trunk/BHM3DSample/README.txt?revision=54&amp;view=markup<br /><br />The animated claw model is also included in .bhm format, so you could use that as a reference.<br />Aside from that, you can look at the code of the included 3dsmax exporter to see how the file is built up when exporting it... and of course the sample OpenGL application to see how the file is being imported.<br /><br />A Maya plugin would be a nice addition. So I am happy to support the development, and if possible, I would like to include it in the project when it is done.</div>
    <div class="meta">Posted on 2011-12-02 04:48:06 by Scali</div>
   </div>
   <div class="post" id="post-215485">
    <div class="subject"><a href="#post-215485">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Now I can create my own 3D graphic rendering system. Its been 5 years Im studying it. But never understand it, even with help lots of people. Im so dumb, and I always agitated as ussual. But cant help, that is my learning style. In the end, I understand everything. Always what I need to know.</div>
    <div class="meta">Posted on 2011-12-03 04:40:25 by Farabi</div>
   </div>
   <div class="post" id="post-215489">
    <div class="subject"><a href="#post-215489">Re: Graphics programming, oldskool style</a></div>
    <div class="body">I&#039;m getting there now:<br />http://www.youtube.com/watch?v=lhV4rJi54Mo<br /><br />Polygons are rendering, to multiple bitplanes (and yay, it&#039;s a real convex poly renderer, not just a triangle renderer). Rotation and perspective projection applied as well.<br />The fun part is that it&#039;s 99% blitter code so far. Truly hardware-accelerated.<br /><br />I just need to add some finishing touches, such as double-buffering, backface culling, and perhaps flatshading. Oh, and I need to make a full cube out of it, not just 2 planes :)<br /><br />Edit: deleted the old video. Updated with a new video with double-buffering.</div>
    <div class="meta">Posted on 2011-12-03 18:52:59 by Scali</div>
   </div>
   <div class="post" id="post-215491">
    <div class="subject"><a href="#post-215491">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Not to hijack this thread, but I have to say, I&#039;m incredibly impressed by your musical abilities.&nbsp; Your Randy Rhodes Tribute was awesome and I love your guitar sound 8)</div>
    <div class="meta">Posted on 2011-12-03 21:05:02 by p1ranha</div>
   </div>
   <div class="post" id="post-215494">
    <div class="subject"><a href="#post-215494">Re: Graphics programming, oldskool style</a></div>
    <div class="body"><div class="quote"><br />Not to hijack this thread, but I have to say, I&#039;m incredibly impressed by your musical abilities.&nbsp; Your Randy Rhodes Tribute was awesome and I love your guitar sound 8)<br /></div><br /><br />Are you talking to me or to scali? If it is to me, which guitar sound of me did you heard?</div>
    <div class="meta">Posted on 2011-12-04 05:22:09 by Farabi</div>
   </div>
   <div class="post" id="post-215495">
    <div class="subject"><a href="#post-215495">Re: Graphics programming, oldskool style</a></div>
    <div class="body"><div class="quote"><br />Not to hijack this thread, but I have to say, I&#039;m incredibly impressed by your musical abilities.&nbsp; Your Randy Rhodes Tribute was awesome and I love your guitar sound 8)<br /></div><br /><br />Thanks!</div>
    <div class="meta">Posted on 2011-12-04 07:28:23 by Scali</div>
   </div>
   <div class="post" id="post-215496">
    <div class="subject"><a href="#post-215496">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Blog part 3 is now up:<br />http://scalibq.wordpress.com/2011/12/04/just-keeping-it-real-part-3/</div>
    <div class="meta">Posted on 2011-12-04 10:20:58 by Scali</div>
   </div>
   <div class="post" id="post-215498">
    <div class="subject"><a href="#post-215498">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Anyway, with only 256-color, a nice photograph of a leaf looks real, but with our current tech of 24-bit colors, we unable to mimick such a thing. We are far too primitive than we should, compared to nature. We had not understand yet how did something we see flat on our eyes but in fact is a diversall.<br /><br />Anyway scali, that was an amazing demo.<br /><br /><br /><br />O scali, youre a master of graphic arts. AMAZING.</div>
    <div class="meta">Posted on 2011-12-05 00:17:30 by Farabi</div>
   </div>
   <div class="post" id="post-215578">
    <div class="subject"><a href="#post-215578">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Thanks (but let&#039;s not get carried away here :) ).<br />And by the way, I may look into colour reduction for images soon... I&#039;ve had this idea for years, but never bothered to implement it (much like the oldskool routines here).<br /><br />Anyway, I have refined my VGA poly routine somewhat:<br />http://www.youtube.com/watch?v=WTezSDP95Ps<br /><br />The first version could only handle triangles. I have now extended it to a proper polygon routine, which can handle convex polygons with any amount of vertices (just as the Amiga routine). This was an interesting problem... I might explain a bit more about it in the next blog entry. It seems that it is a bit of a &#039;forgotten art&#039;, since modern GPUs and modeling software works exclusively with triangles. I myself used to just write triangle rasterizers as well. However, in this specific case, being able to render other types of n-gons allows you to exploit the extra fillrate in mode X a lot better.<br /><br />I have also improved the palette somewhat, to make the shading come out better.<br />And I found a remarkable amount of small bugs... Because as you know: working code is not bugfree code. There were some bugs in how the lighting and backface culling were performed.<br /><br />I still need to backport this new polygon code to the CGA and EGA versions... And I still need to fix some final bugs in the Amiga version (and I want to give it the same blue-ish palette and rotations, so that it will look as similar to the VGA version as possible).<br />And I may look into porting my old 486 DirectDraw renderer back to DOS, so that it will work in dosbox. I still have it on my server: http://bohemiq.scali.eu.org/486compo.exe<br />However, it doesn&#039;t work anymore, since 320x200 videomodes are no longer supported.<br />If I port the code back to a DOS extender environment, it will work once again.<br />It is one generation newer than this routine, basically: instead of flatshading and cubes, you get texture mapping and donuts.</div>
    <div class="meta">Posted on 2011-12-12 15:57:26 by Scali</div>
   </div>
   <div class="post" id="post-215581">
    <div class="subject"><a href="#post-215581">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Right... Another update.<br />I have backported the poly routine to CGA and EGA as well... Didn&#039;t bother to put up YouTube movies of them, but the binaries are updated here:<br />http://bohemiq.scali.eu.org/OLDSKOOL.zip<br /><br />There is a bug in dosbox which makes the EGA version look worse than it really is. The palette in dosbox is broken, and has only 16 unique colours, which are repeated 4 times for the total 64-colour EGA palette. The result is that instead of 11 shades of blue, you only get about 4. I&#039;ve made a simple fix for the dosbox code, but I haven&#039;t been able to build a version that can make screenshots or videos, so I guess I&#039;ll have to wait for the next release of dosbox.<br /><br />I have also found the bug in my Amiga code, and I could finish the cube there as well.<br />It now looks pretty much the same as the VGA one, just slightly higher resolution (it&#039;s PAL, so 320x256):<br />http://www.youtube.com/watch?v=8U4ea0WKAhA<br /><br />Anyway, I&#039;ve also backported my old 486 donut to DOS. I used Japheth&#039;s HX DOS extender for that: http://www.japheth.de/HX.html<br />It supports DirectDraw emulation, but I didn&#039;t use that. My old build uses a lot of old Visual C runtime DLLs, and I couldn&#039;t get it to work as-is. When I tried to rebuild the code with static libs, I noticed that ddraw.lib isn&#039;t part of the DirectX SDK anymore.<br />So I figured I might as well rewrite the code for real DOS with direct VGA code.<br />And now it works once again, in dosbox:<br />http://www.youtube.com/watch?v=xE9iifKXvY4<br /><br />You can download the DOS version here: http://bohemiq.scali.eu.org/486compo.zip</div>
    <div class="meta">Posted on 2011-12-13 12:54:51 by Scali</div>
   </div>
   <div class="post" id="post-215583">
    <div class="subject"><a href="#post-215583">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Part 4 is now up:<br />http://scalibq.wordpress.com/2011/12/13/just-keeping-it-real-part-4/</div>
    <div class="meta">Posted on 2011-12-13 17:24:22 by Scali</div>
   </div>
   <div class="post" id="post-215590">
    <div class="subject"><a href="#post-215590">Re: Graphics programming, oldskool style</a></div>
    <div class="body">Another update, this time from the magical world of EGA, and why you cannot use all 64 palette colours in 320x200 (and how to hack around that):<br />http://scalibq.wordpress.com/2011/12/17/just-keeping-it-real-part-4-5/</div>
    <div class="meta">Posted on 2011-12-17 13:53:09 by Scali</div>
   </div>
   <div class="post" id="post-215597">
    <div class="subject"><a href="#post-215597">Re: Graphics programming, oldskool style</a></div>
    <div class="body">And another update... which follows from the earlier one about how the VGA palette can be used in the 16-colour EGA mode:<br />http://scalibq.wordpress.com/2011/12/21/just-keeping-it-real-part-4-6/<br /><br />As it turns out, THIS is the secret to F29 Retaliator and Crystal Dream I/II&#039;s mega performance.</div>
    <div class="meta">Posted on 2011-12-21 12:51:30 by Scali</div>
   </div>
   <div class="post" id="post-215633">
    <div class="subject"><a href="#post-215633">Re: Graphics programming, oldskool style</a></div>
    <div class="body">And another update... exploring a few ways to make the polygon filler subpixel-correct:<br />http://scalibq.wordpress.com/2011/12/28/just-keeping-it-real-part-5/<br />Conclusion is that the 486-renderer had the most efficient approach anyway, even for more low-end machines. Just a 16.16 fixedpoint iterator is clean and efficient. So much for the Bresenham experiment.<br />Also an experiment on the Amiga&#039;s hardware blitter... It seems that it *might* be possible to get it subpixel-corrected as well, but the proof-of-concept is not 100% yet.</div>
    <div class="meta">Posted on 2011-12-28 17:15:53 by Scali</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=30761&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=30761&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="30761" /><input type="number" name="page" min="1" max="5" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=30761&amp;page=2">&gt;</a><a href="../?id=30761&amp;page=5">&raquo;</a></form>  </div>
 </body>
</html>