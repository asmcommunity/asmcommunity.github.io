<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>3D Engine and related developments - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29617" />
  <link rel="prev" href="../?id=29617&amp;page=6" />  <link rel="next" href="../?id=29617&amp;page=8" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=29617">3D Engine and related developments</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29617&amp;page=1" style="">&laquo;</a><a href="../?id=29617&amp;page=6" style="">&lt;</a><input type="hidden" name="id" value="29617" /><input type="number" name="page" min="1" max="11" step="1" value="7" onchange="this.form.submit();" /><a href="../?id=29617&amp;page=8">&gt;</a><a href="../?id=29617&amp;page=11">&raquo;</a></form>   <div class="post" id="post-210740">
    <div class="subject"><a href="#post-210740">Re: 3D Engine and related developments</a></div>
    <div class="body">Wow, sounds like overkill, but hey it works, thats what matters.<br /><br /></div>
    <div class="meta">Posted on 2010-02-11 05:25:06 by Homer</div>
   </div>
   <div class="post" id="post-210741">
    <div class="subject"><a href="#post-210741">Re: 3D Engine and related developments</a></div>
    <div class="body"><div class="quote">Probably the same problem.<br />Here&#039;s a quick fix:<br />Go to the Data directory, and open hlsl_shader.vsh.<br />Look for the following structure:<br /><pre><code>struct VS_OUTPUT<br />{<br />	float4 Position	: SV_Position;	// vertex position <br />	float3 Diffuse	: COLOR0;		// diffuse lightvector<br />	float3 Normal	: NORMAL;		// vertex normal<br />	float3 Specular	: TEXCOORD0;	// specular lightvector<br />	float3 Distance	: TEXCOORD1;	// distance vector to light in worldspace, for attenuation<br />	float Attenuate	: TEXCOORD2;	// per-vertex distance scalar<br />	float2 Texcrd	: TEXCOORD3;	// Texture coordinates<br />};</code></pre><br /><br />Now I think two possible solutions will work, but I only tried the first:<br />1) Replace COLOR0 with TEXCOORD0, and increase all the following TEXCOORDn by one (so TEXCOORD0 -&gt; TEXCOORD1, etc).<br />Then open hlsl_shader.psh and do the same.<br />Or:<br />2) Replace &#039;float3 Diffuse&#039; with &#039;float4 Diffuse&#039;. Then open hlsl_shader.psh and replace &#039;half3 Diffuse&#039; with &#039;half4 Diffuse&#039;.<br /></div><br />It didnt work, im posting the results of both and what i changed<br /><br />1) the claw is now vissible but its white<br /><img src="http://img683.imageshack.us/img683/7319/3dengine.jpg" /><br /><br />hlsl_shader.vsh<pre><code><br />struct VS_OUTPUT<br />{<br />	float4 Position	: POSITION;		// vertex position <br />	float3 Diffuse	: TEXCOORD0;		// diffuse lightvector<br />	float3 Normal	: TEXCOORD1;	// vertex normal<br />	float3 Specular	: TEXCOORD2;	// specular lightvector<br />	float3 Distance	: TEXCOORD3;	// distance vector to light in worldspace, for attenuation<br />	float Attenuate	: TEXCOORD4;	// per-vertex distance scalar<br />	float2 Texcrd	: TEXCOORD5;	// Texture coordinates<br />};<br /></code></pre><br /><br />2) crashes the program, after pressing ok in the settings window<br /><pre><code>AppName: engine32.bin	 AppVer: 0.0.0.0	 ModName: engine32d3d9.dll<br />ModVer: 0.0.0.0	 Offset: 000080be</code></pre><br /><br />hlsl_shader.vsh<pre><code>struct VS_OUTPUT<br />{<br />	float4 Position	: POSITION;		// vertex position <br />	float4 Diffuse	: COLOR0;		// diffuse lightvector<br />	float3 Normal	: TEXCOORD0;	// vertex normal<br />	float3 Specular	: TEXCOORD1;	// specular lightvector<br />	float3 Distance	: TEXCOORD2;	// distance vector to light in worldspace, for attenuation<br />	float Attenuate	: TEXCOORD3;	// per-vertex distance scalar<br />	float2 Texcrd	: TEXCOORD4;	// Texture coordinates<br />};<br /></code></pre><br /><br />hlsl_shader.psh<pre><code>struct VS_OUTPUT<br />{<br />	half4 Position	: POSITION;		// vertex position <br />	half4 Diffuse	: COLOR0;		// diffuse lightvector<br />	half3 Normal	: TEXCOORD0;	// vertex normal<br />	half3 Specular	: TEXCOORD1;	// specular lightvector<br />	half3 Distance	: TEXCOORD2;	// distance vector to light in worldspace, for attenuation<br />	half Attenuate	: TEXCOORD3;	// per-vertex distance scalar<br />	half2 Texcrd	: TEXCOORD4;	// Texture coordinates<br />};<br /><br /><br />half4 main( in VS_OUTPUT v ) : SV_Target<br />{<br />	half4 Diffuse = v.Diffuse*2.0 - 1.0;<br />	half3 Specular = quicknrm(v.Specular);<br />	half3 Normal = //tex2D( tex, v.Texcrd )*2.0 - 1.0;/*normalize(v.Normal);*/<br />					quicknrm(v.Normal);<br />	<br />	//half spec /*: register(r4)*/ = tex1D( power, saturate(dot(Specular, Normal)) );<br />	half spec = pow( saturate(dot(Specular, Normal)), 16 );<br /><br />	half4 color = ambient + (diffuse*saturate(dot(Diffuse, Normal)) + spec*specular)*v.Attenuate;<br />	<br />	return color*tex2D( tex, v.Texcrd );<br />}<br /></code></pre></div>
    <div class="meta">Posted on 2010-02-11 05:29:33 by Azura</div>
   </div>
   <div class="post" id="post-210742">
    <div class="subject"><a href="#post-210742">Re: 3D Engine and related developments</a></div>
    <div class="body"><div class="quote"><br />Wow, sounds like overkill, but hey it works, thats what matters.</div><br /><br />I moved as much of the processing as possible into the vertexshaders.<br />You could use less interpolated values, but then you&#039;d have to do a lot more math in the pixelshaders, making the whole thing slower.<br />And these shaders were originally written for SM1.x (which they can still be compiled to, under D3D9), where vertexshaders were considerably more powerful than pixelshaders anyway, so doing it in a pixelshader was not an option. You had neither the precision nor the instructioncount.</div>
    <div class="meta">Posted on 2010-02-11 05:43:43 by Scali</div>
   </div>
   <div class="post" id="post-210743">
    <div class="subject"><a href="#post-210743">Re: 3D Engine and related developments</a></div>
    <div class="body"><div class="quote"><br />It didnt work, im posting the results of both and what i changed<br /><br />1) the claw is now vissible but its white<br /><img src="http://img683.imageshack.us/img683/7319/3dengine.jpg" /><br /></div><br /><br />For 1), did you change the VS_OUTPUT struct in both hlsl_shader.vsh and hlsl_shader.psh? (They need to match). I couldn&#039;t quite make this out from your post.<br />In case you did, then I&#039;m not sure what is wrong.<br />By the way, you shouldn&#039;t need to change the NORMAL flag, I think.<br />The correct struct should be:<br /><pre><code>struct VS_OUTPUT<br />{<br />	float4 Position	: SV_Position;	// vertex position <br />	float3 Diffuse	: TEXCOORD0;	// diffuse lightvector<br />	float3 Normal	: NORMAL;		// vertex normal<br />	float3 Specular	: TEXCOORD1;	// specular lightvector<br />	float3 Distance	: TEXCOORD2;	// distance vector to light in worldspace, for attenuation<br />	float Attenuate	: TEXCOORD3;	// per-vertex distance scalar<br />	float2 Texcrd	: TEXCOORD4;	// Texture coordinates<br />};</code></pre><br /><br />And its equivalent in hlsl_shader.psh:<br /><pre><code>struct VS_OUTPUT<br />{<br />	half4 Position	: SV_Position;	// vertex position <br />	half3 Diffuse	: TEXCOORD0;	// diffuse lightvector<br />	half3 Normal	: NORMAL;		// vertex normal<br />	half3 Specular	: TEXCOORD1;	// specular lightvector<br />	half3 Distance	: TEXCOORD2;	// distance vector to light in worldspace, for attenuation<br />	half Attenuate	: TEXCOORD3;	// per-vertex distance scalar<br />	half2 Texcrd	: TEXCOORD4;	// Texture coordinates<br />};</code></pre><br /><br />Edit: Checking the shaders I ran on the Q35... I actually DID replace the NORMAL flag with TEXCOORD aswell, so it&#039;s the same as what you posted.</div>
    <div class="meta">Posted on 2010-02-11 05:52:25 by Scali</div>
   </div>
   <div class="post" id="post-210744">
    <div class="subject"><a href="#post-210744">Re: 3D Engine and related developments</a></div>
    <div class="body">i guess i missed to say that i use the engine you posted on page 7, the one from 20100205, which was the last one i found posted<br />in there the NORMAL flag was declared that way<br /><br />it works now when changing both hlsl_shader.vsh and hlsl_shader.psh to:<br /><pre><code><br />struct VS_OUTPUT<br />{<br />	float4 Position	: POSITION;		// vertex position <br />	float3 Diffuse	: TEXCOORD0;		// diffuse lightvector<br />	float3 Normal	: TEXCOORD1;	// vertex normal<br />	float3 Specular	: TEXCOORD2;	// specular lightvector<br />	float3 Distance	: TEXCOORD3;	// distance vector to light in worldspace, for attenuation<br />	float Attenuate	: TEXCOORD4;	// per-vertex distance scalar<br />	float2 Texcrd	: TEXCOORD5;	// Texture coordinates<br />};<br /></code></pre><br /><pre><code>struct VS_OUTPUT<br />{<br />	half4 Position	: POSITION;		// vertex position <br />	half3 Diffuse	: TEXCOORD0;		// diffuse lightvector<br />	half3 Normal	: TEXCOORD1;	// vertex normal<br />	half3 Specular	: TEXCOORD2;	// specular lightvector<br />	half3 Distance	: TEXCOORD3;	// distance vector to light in worldspace, for attenuation<br />	half Attenuate	: TEXCOORD4;	// per-vertex distance scalar<br />	half2 Texcrd	: TEXCOORD5;	// Texture coordinates<br />};<br /></code></pre><br /><br />but it crashes when doing the changes you suggested<br /><br />edit: saw your edit, then i guess everything is the way it should now</div>
    <div class="meta">Posted on 2010-02-11 06:02:30 by Azura</div>
   </div>
   <div class="post" id="post-210745">
    <div class="subject"><a href="#post-210745">Re: 3D Engine and related developments</a></div>
    <div class="body"><div class="quote"><br />i guess i missed to say that i use the engine you posted on page 7, the one from 20100205, which was the last one i found posted<br />in there the NORMAL flag was declared that way</div><br /><br />Oh yea, could be. I&#039;m at work here, and only had the Engine20100204 on a memory stick here. Not sure what I changed exactly between those two versions.<br /><br /><div class="quote"><br />it works now when changing both hlsl_shader.vsh and hlsl_shader.psh</div><br /><br />Okay, that&#039;s good to know.<br />I guess the Intel IGP problems are now solved then :)<br />I&#039;ll have to remember to fix the shader code at home, so the next release will also come with the correct shader code out-of-the-box.</div>
    <div class="meta">Posted on 2010-02-11 06:10:12 by Scali</div>
   </div>
   <div class="post" id="post-210848">
    <div class="subject"><a href="#post-210848">Re: 3D Engine and related developments</a></div>
    <div class="body">I&#8217;ve done captures of our old Bohemiq demos in 720p quality, and put them on Youtube:<br /><a target="_blank" href="http://www.youtube.com/watch?v=kwl8-p-uFFY">Art Nouveau</a><br /><a target="_blank" href="http://www.youtube.com/watch?v=_jEzAOdYFQU">Croissant 9</a><br /><br />And some other stuff too:<br /><a target="_blank" href="http://www.youtube.com/watch?v=3myGIK-7d0E">Reflecting Spheres</a><br /><a target="_blank" href="http://www.youtube.com/watch?v=KZ_0sxAz2D8">Prosaic</a></div>
    <div class="meta">Posted on 2010-02-19 09:46:04 by Scali</div>
   </div>
   <div class="post" id="post-210866">
    <div class="subject"><a href="#post-210866">Re: 3D Engine and related developments</a></div>
    <div class="body"><div class="quote">What video card are you using, Homer?<br /></div><br /><br />I would still like an answer to this question...</div>
    <div class="meta">Posted on 2010-02-22 12:43:44 by Scali</div>
   </div>
   <div class="post" id="post-210868">
    <div class="subject"><a href="#post-210868">Re: 3D Engine and related developments</a></div>
    <div class="body">Just a 8800 (GTX) for now.</div>
    <div class="meta">Posted on 2010-02-22 15:58:46 by Homer</div>
   </div>
   <div class="post" id="post-210873">
    <div class="subject"><a href="#post-210873">Re: 3D Engine and related developments</a></div>
    <div class="body"><div class="quote"><br />Just a 8800 (GTX) for now.<br /></div><br /><br />Okay, thanks.<br />That rules out the possibility that the hanging on your system was related to the pixelformat aswell (that was probably an independent issue on the Intel Q35 chip). It must have been in the MFC initialization/deinitialization code for loading the extension DLLs. I hope that was solved in the later builds.</div>
    <div class="meta">Posted on 2010-02-23 09:52:34 by Scali</div>
   </div>
   <div class="post" id="post-211241">
    <div class="subject"><a href="#post-211241">Re: 3D Engine and related developments</a></div>
    <div class="body">I can&#039;t find exactly where I mentioned it, but I am quite sure that I mentioned somewhere that the D3D9 version of the engine was the fastest, despite the attempts to reduce the CPU overhead in the new D3D10/11 API and driver model.<br /><br />Well, while working on the OpenGL code, I also did some work on the D3D code, to clean it up a bit (the OpenGL code starts from a clean slate, so sometimes I think &#039;hey, this is cleaner than what I did in D3D, I&#039;ll change it there aswell&#039;).<br />And I discovered something: Suddenly I saw over 7000 fps in Windows 7, while running the D3D11 variation of the engine. Those are D3D9-like figures (and yes, D3D9 on XP).<br />So I verified with an earlier build, and indeed, the stuff that I built in February is running faster aswell now. So it&#039;s not the changes to my code that made the difference.<br /><br />It appears that the D3D10/11 drivers are now maturing, and the overhead is finally dropping below D3D9 in practice, which is the main reason why the API and driver model was redesigned in the first place.<br />I&#039;m also quite happy with the performance of my D3D11 code. In theory it has more overhead than the D3D10 version, since it has to manage more shaders and states (there are three new types of shaders: compute, hull and domain). But I don&#039;t see a performance difference with the D3D10 version. So the management code is pretty &#039;lightweight&#039;.<br /><br />So it seems that D3D11 on Windows 7 can now outperform D3D9 on Windows 7, and get pretty much the same framerates as D3D9 does in XP.<br />This is with my Radeon 5770 and Catalyst 10.3 though. I&#039;m not entirely sure where nVidia stands currently.</div>
    <div class="meta">Posted on 2010-04-06 03:15:59 by Scali</div>
   </div>
   <div class="post" id="post-211242">
    <div class="subject"><a href="#post-211242">Re: 3D Engine and related developments</a></div>
    <div class="body">On another note...<br /><br /><div class="quote"><br />One major difference is that D3D9 handles each shader constant individually, where D3D10/11 allow you to update an entire struct of data to the shader in one go.<br />That means the handle management in D3D9 needs to somehow be automated to look more like D3D10/11 from the outside. I guess I have to create my own fake &#039;ID3DBuffer&#039; object which stores the handles internally, so that it can update the struct with shader constants one member at a time.</div><br /><br />I still haven&#039;t come up with a solution to this one... It reared its ugly head again in OpenGL, since OpenGL uses a system similar to D3D9 (which has considerably more overhead than the new D3D10/11 way... and from what I&#039;ve seen, OpenGL 4.0 doesn&#039;t solve this... edit: Indeed, OpenGL 4.0 doesn&#039;t solve this, because they solved it in OpenGL 3.1 already, by introducing ARB_Uniform_Buffer_Object.. which ofcourse doesn&#039;t work on my Intel driver, blah).<br /><br />The problem is basically that D3D9/OpenGL view each constant as an independent entity in the shader.<br />You query the compiled shader for each constant by its name.<br />So eg if you have this in your shader:<br />float4x4 myMatrix;<br />float3 myVector;<br /><br />You would do something like this to access it (pseudocode):<br />Matrix myMatrix;<br />Vector myVector;<br />myMatrixHandle = GetConstantHandle(&quot;myMatrix&quot;);<br />SetConstantMatrix4x4(myMatrixHandle, myMatrix);<br />myVectorHandle = GetConstantHandle(&quot;myVector&quot;);<br />SetConstantFloat3(myVectorHandle, myVector);<br /><br />So in order to set all the constants in a shader, you need to know all the names of the variables as they are defined in the shader source, and you need to know their types, in order to select the proper setter-function.<br /><br />In D3D10/11 by contrast it works something like this...<br />In the shader you can define constant buffers which contain a number of constants, more or less like a struct:<br />cbuffer<br />{<br />float4x4 myMatrix;<br />float3 myVector;<br />}<br /><br />Then in your application code, you do something like this:<br />struct<br />{<br />Matrix myMatrix;<br />Vector myVector;<br />} MyStruct;<br /><br />MyStruct* pMyStruct = ConstantBuffer-&gt;Map();<br />pMyStruct-&gt;myMatrix = myMatrix;<br />pMyStruct-&gt;myVector = myVector;<br />ConstantBuffer-&gt;Unmap();<br /><br />Now how would one unify this elegantly? What I would like is an automated simulation of Map()/Unmap() for D3D9/OpenGL. Going the other way around would just make the code less efficient on D3D10/11 and you&#039;d still have the same clumsy way of accessing shader variables that I never liked to begin with.<br />What I&#039;d like to do is just fill the struct, then somehow iterate through its members automatically, and use their names and types to access the shader variables.<br />But I&#039;m not sure how you can do that.<br />I suppose I will need to do something similar to vertex declarations... where you use some macro functions to describe how a structure is built up.<br />Then in D3D10/11 you can just ignore the extra data, and only use the struct itself. And in D3D9/OpenGL you can use the extra data to get info on the variable name as a string, and its type.<br />I think I can&#039;t access the members by name directly, in that way... but I&#039;d have to use a byte-offset...<br />I can&#039;t really think of a way to &#039;connect&#039; them though... as in having the struct definition built automatically from the extended description. That&#039;s not what you do with vertex declarations either though... but perhaps there is a clever way to do it. Perhaps some kind of template with recursive subclassing? Adding one new member variable at every iteration?</div>
    <div class="meta">Posted on 2010-04-06 04:37:57 by Scali</div>
   </div>
   <div class="post" id="post-211276">
    <div class="subject"><a href="#post-211276">Re: 3D Engine and related developments</a></div>
    <div class="body">I&#039;ve made a first attempt at an automated struct-to-D3D9-constanttable setup, so that it would behave much like D3D10/11 do.<br />I took the input declaration syntax as an example, and made my own constant declaration stuff... Looks something like this:<br /><pre><code><br />struct PS_CONST_BUFFER<br />{<br />	D3DXCOLOR ambient;<br />	D3DXCOLOR diffuse;<br />	D3DXCOLOR specular;<br />};<br /><br />D3D_CONST_ELEMENT_DESC psDesc&#91;] = <br />	{<br />		{ &quot;ambient&quot;, 1, D3D_CONST_FORMAT_VECTOR, 0 },<br />		{ &quot;diffuse&quot;, 1, D3D_CONST_FORMAT_VECTOR, 16 },<br />		{ &quot;specular&quot;, 1, D3D_CONST_FORMAT_VECTOR, 32 },<br />	};<br /></code></pre><br /><br />The struct can now be shared between D3D9/10/11. D3D9 requires an additional description... I can just ignore that in D3D10/11, so I can use one codepath for all.<br />I then just create my own const buffer:<br /><pre><code><br />pPshConstBuffer = new ID3DConstBuffer( psDesc, _countof(psDesc), pPshConstTable, p3D-&gt;pD3DDevice );<br /></code></pre><br /><br />This will initialize itself by allocating a struct internally, and getting the handles to all constants named in the declaration.<br />You then use it exactly like you would in D3D10/11:<br /><pre><code><br />	PS_CONST_BUFFER* pPshConstData;<br />	p3D-&gt;Map( pPshConstBuffer, D3D_MAP_WRITE_DISCARD, (void**)&amp;pPshConstData);<br /><br />	// Set pixelshader constants<br />	...<br /><br />	p3D-&gt;Unmap(pPshConstBuffer);<br /></code></pre><br /><br />Map() will return a pointer to the internal structure.<br />Currently, I have the Unmap() function set the variables directly... but technically it shouldn&#039;t do anything yet, and there should be an additional call to set the constant buffers, like VSSetConstantBuffers() and PSSetConstantBuffers() in D3D10/11.<br /><br />At any rate, it makes the handling of shaders much more elegant. I don&#039;t need to track the handles to each variable manually anymore, and I don&#039;t need to worry about the datatypes either, as the correct setter function will be called automatically. The code is now simpler and more elegant, at virtually no performance cost, and only slightly less flexible than the original way (I don&#039;t support the pointer-functionality anymore, or transposing matrices).</div>
    <div class="meta">Posted on 2010-04-09 04:08:31 by Scali</div>
   </div>
   <div class="post" id="post-211300">
    <div class="subject"><a href="#post-211300">Re: 3D Engine and related developments</a></div>
    <div class="body">So, I was wondering what the nVidia drivers would do now (with the 197.13 drivers), seeing that the Radeon drivers got quite a boost in Windows 7 recently...<br />The biggest shock came when I ran the D3D9 binary in XP x64:<br /><img src="http://bohemiq.scali.eu.org/P4-D3D9-framerate.png" /><br /><br />I thought that nVidia&#039;s 8000 fps was about as good as it gets (with the 196.21 drivers), and I was happy to see my Radeon getting reasonably close with its ~7200 fps... But nVidia apparently found a bunch of optimizations aswell, and is now nearing the 9000 fps-mark.<br />Not to mention that this is on an old Pentium 4 HT machine, at 3.8 GHz, with a GeForce 9800GTX (yes, the original 65 nm one, not the GTX+, which is a 55 nm shrink). In theory both my Core2 Duo at 3 GHz and my Radeon 5770 (which is 40 nm) should be quite a bit faster.<br /><br />Windows 7 was not quite as much of a success though... It only got around 3000 fps there in D3D9 and D3D11. D3D10 was faster, around the 3700 fps mark... but a far cry from the figures in XP x64.<br />But I suppose this is where the age of the Pentium 4 shows (or it could be that this is a Windows 7 RC installation, not the RTM).</div>
    <div class="meta">Posted on 2010-04-11 12:21:16 by Scali</div>
   </div>
   <div class="post" id="post-211728">
    <div class="subject"><a href="#post-211728">Re: 3D Engine and related developments</a></div>
    <div class="body">I&#039;m playing around with some geometry shaders now.<br />The thing with using normalmaps is that you need the tangentspace matrix at every vertex (at least for skinned objects... for static objects you could create normalmaps in object space... but that means you have to use separate maps for all objects, tangentspace is more convenient).<br />This means that you need to have this stored in the geometry... or do a precalc of tangentspace while loading objects.<br /><br />So I had this idea... with a geometry shader I can access all three vertices of a triangle at the same time, and then calc the tangentspace matrix on-the-fly.<br />I could do this after skinning is performed, so I don&#039;t have to &#039;skin&#039; the tangentspace matrix. Might be more efficient. It would also mean I have to store less geometry data in videomemory.<br /><br />It&#039;s the first time I&#039;m actually using geometry shaders in this engine. I had added support from the moment I started converting the D3D9 code to D3D10, just adding geometry shader code for all vertex/pixelshader code that I was converting to D3D10. But I had never actually tried to compile and use a geometry shader to see if it works.<br />Well, it worked on the first try, so that&#039;s good :)<br />Hopefully the same goes for the other shaders that I&#039;ve added, but never tested so far (compute shader, hull shader, domain shader).</div>
    <div class="meta">Posted on 2010-05-16 05:22:39 by Scali</div>
   </div>
   <div class="post" id="post-211736">
    <div class="subject"><a href="#post-211736">Re: 3D Engine and related developments</a></div>
    <div class="body">Lol, I knew geometry shaders could cause a performance hit... but this Intel IGP is ridiculous... It&#039;s dropped from 100ish fps to 5 fps. Either the hardware support for geometry shaders is really poor, or the whole vertex processing pipeline is forced to software emulation. Oh well :)</div>
    <div class="meta">Posted on 2010-05-16 09:40:08 by Scali</div>
   </div>
   <div class="post" id="post-211986">
    <div class="subject"><a href="#post-211986">Re: 3D Engine and related developments</a></div>
    <div class="body">I think it&#039;s time to compile a new todo-list, to get some kind of focus back in this project...<br />Problem is currently that I&#039;m torn between D3D and OpenGL. Although my personal preference lies with D3D, the recent update to OpenGL 4.0 made the difference between the two a lot smaller again. Add OpenCL to that, and the differences become very small.<br />OpenGL has the platform independence going for it... which I am normally not interested in, but I have some plans which might make a Mac-version desirable. These plans are still in their infancy, so I won&#039;t disclose anything just yet.<br /><br />At any rate, some of the things I&#039;d like to work on:<br />- Finish the routine that calculates tangent space in the geometry shader stage.<br />- Implement state-of-the-art shadow mapping (the current shadowmapping is still based on the ancient hack that I made for my GF2, using the alphachannel of a texture as a pseudo depth texture... Yes, it&#039;s only 8 bits of precision, but it actually works remarkably well. Various Nintendo games also use this trick. I never bothered to update the code).<br />- Write a new exporter for a more up-to-date modeler (the current BHM exporter is for 3dsmax6).<br />- Work on the BigMesh code, possibly turning it into a library, which might be used by the new exporter.<br />- Do a remake of the Croissant 9 demo, making use of the new engine, with state-of-the-art lighting/shading/shadowing.<br />- Continue work on the code I started with the Prosaic demo, using spectrum analysis over the audio to drive various effect parameters in realtime.</div>
    <div class="meta">Posted on 2010-06-07 06:40:15 by Scali</div>
   </div>
   <div class="post" id="post-212063">
    <div class="subject"><a href="#post-212063">Re: 3D Engine and related developments</a></div>
    <div class="body">Hum, new June 2010 DirectX SDK is out: http://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=3021d52b-514e-41d3-ad02-438a3ba730ba<br /><br />One thing that caught my eye: they are dropping VS2005 support. That had a bit of a psychological impact on me... I&#039;m still supporting VS2005 in my opensource projects. And theoretically I still have some pre-DX9 code in VS2005.<br />But then I had to think rationally again... VS2005 is 5 years old... perhaps it&#039;s time to stop supporting it, and support only VS2008 and VS2010 instead.<br />Aside from that, it really doesn&#039;t impact me. Most of the pre-DX9 code is completely irrelevant, as it had been assimilated in the DX9 codebase anyway. The DX9 codebase was then assimilated into the new DX10/11 codebase, and that all works with VS2008. I haven&#039;t used VS2005 for DX9 code in quite a while.<br />As for the opensource projects, none of them use DX in the first place, so they aren&#039;t affected.<br /><br />So I guess I can just install this SDK. I just have think about moving to VS2010 before VS2008 support is dropped... but I probably still have about 3 years for that. I suppose my opensource projects could move to VS2010 Express, as they don&#039;t need MFC... except for the simple example program for CPUInfo, but I can rewrite that with .NET Winforms or something.</div>
    <div class="meta">Posted on 2010-06-14 04:26:20 by Scali</div>
   </div>
   <div class="post" id="post-212068">
    <div class="subject"><a href="#post-212068">Re: 3D Engine and related developments</a></div>
    <div class="body">I am lucky enough to have access to all MS software for free. VS2010 IDE is much cleaner and faster and a bit better organized than 2008 (esp. VC#), but aside from that I didn&#039;t notice any big differences. Still, I recommend you to switch to 2010 if you can - it&#039;s somewhat nice to use and will be supported for at least 5 years from now ^^<br /><br />And thanks for the hint about DXSDK!</div>
    <div class="meta">Posted on 2010-06-14 16:46:34 by ti_mo_n</div>
   </div>
   <div class="post" id="post-212071">
    <div class="subject"><a href="#post-212071">Re: 3D Engine and related developments</a></div>
    <div class="body">Yea, I know... I use VS2010 at work. For large C# projects it&#039;s much faster and more stable than VS2008. I&#039;ll have to ask if it&#039;s okay to use a home copy aswell. We all have an MSDN account, but I&#039;m not sure about the exact licensing terms.<br />I&#039;ve tried VS2010 Express at home. Works okay, but I have the problem that I rely on some MFC code, which Express doesn&#039;t support. It doesn&#039;t support x64 either, which would be a shame.<br />I suppose theoretically I could convert my MFC code to .NET WinForms. That way it will be &#039;VS Express&#039;-compliant. I suppose x64 support for VS Express will be added at some point... Perhaps with Windows 8, where there will not be a 32-bit version of the OS, I believe.<br /><br />Edit: Btw, I am having trouble getting the June 2010 DX SDK installed on my laptop... it has a Dutch 32-bit version of Vista. Perhaps it has something to do with that. It aborts halfway, without any useful error message... it just says I have to try reinstalling later.<br />On my Win7 x64 machine it installed just fine.</div>
    <div class="meta">Posted on 2010-06-15 02:55:50 by Scali</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29617&amp;page=1" style="">&laquo;</a><a href="../?id=29617&amp;page=6" style="">&lt;</a><input type="hidden" name="id" value="29617" /><input type="number" name="page" min="1" max="11" step="1" value="7" onchange="this.form.submit();" /><a href="../?id=29617&amp;page=8">&gt;</a><a href="../?id=29617&amp;page=11">&raquo;</a></form>  </div>
 </body>
</html>