<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Jump to constant address in MASM, isn't it possible? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10801" />
  <link rel="prev" href="../?id=10801&amp;page=1" />  <link rel="next" href="../?id=10801&amp;page=3" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=10801">Jump to constant address in MASM, isn't it possible?</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=10801&amp;page=1" style="">&laquo;</a><a href="../?id=10801&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="10801" /><input type="number" name="page" min="1" max="3" step="1" value="2" onchange="this.form.submit();" /><a href="../?id=10801&amp;page=3">&gt;</a><a href="../?id=10801&amp;page=3">&raquo;</a></form>   <div class="post" id="post-81829">
    <div class="subject"><a href="#post-81829">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Ok, I've tried it now, and I got it to work!<br /><br />The problem was that the segment part of the address should be 01A7h, and not 0227h. So I guess that it is not the same on all Windows 9x systems after all.<br /><br />Also, it is possible to jump to any address, dword aligned or not, I checked.<br /><br />Thanks everyone!<br /><br />If I now could just find out how these segments really work in Windows, and I'd be all happy. Does anyone have a suggestion of a good place to acquire this kind of information (article or thread)? That would be really great anyway.<br /><br />Thanks!</div>
    <div class="meta">Posted on 2003-02-14 17:14:03 by dELTA</div>
   </div>
   <div class="post" id="post-81837">
    <div class="subject"><a href="#post-81837">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Well I'm even less familiar than you about segment's.  So i cant really say anything about the behaviour of CS for certain. but while i was watching it it never changed from 0x0008 on my windows xp system <br />however when I attempted to hardcode that value in the prog it still did not work, this is a question for ppl more experienced than myself<br />I would also love info on segments. any one know of a tut that explains the purpose and proper usage of segment registers?</div>
    <div class="meta">Posted on 2003-02-14 17:28:11 by dionysus</div>
   </div>
   <div class="post" id="post-82220">
    <div class="subject"><a href="#post-82220">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body"><div class="quote"><br />Ok, I've tried it now, and I got it to work!<br /><br />The problem was that the segment part of the address should be 01A7h, and not 0227h. So I guess that it is not the same on all Windows 9x systems after all.<br /><br />Also, it is possible to jump to any address, dword aligned or not, I checked.<br /><br />Thanks everyone!<br /><br />If I now could just find out how these segments really work in Windows, and I'd be all happy. Does anyone have a suggestion of a good place to acquire this kind of information (article or thread)? That would be really great anyway.<br /><br />Thanks! </div><br /><br />Hmm. Interestig. 98 and CS=01A7?<br />I saw hundreds 98s all had 0227.<br />Well, I'm glad you finally placed value in CS into jmp far<br />format.</div>
    <div class="meta">Posted on 2003-02-17 03:53:11 by The Svin</div>
   </div>
   <div class="post" id="post-82240">
    <div class="subject"><a href="#post-82240">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">dionysus,<br /><br />properly, segments do not figure in 32 bit flat memory model but as MASM in particular was designed back in the segmented architecture days of 16 bit DOS, there are still a few fudges that can be used where the old code segment and data segment technology lines up with a modern PE code SECTION and data SECTION.<br /><br />These are basically anachronisms left over in MASM for compatibility reasons, the PE standard does not use segments at all and the segments in a flat memory model OS like Windows are all set at the same start address.<br /><br />As far as learning the segmented arachitecture of ntel processors, the Intel manuals are the best I know of for this data. Even though this technology is rarely used these days, x86 processors have the capacity to run segments and from memory, they can even run 32 bit segments if you wrote the OS to do it.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2003-02-17 05:51:11 by hutch--</div>
   </div>
   <div class="post" id="post-82336">
    <div class="subject"><a href="#post-82336">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Could everybody here give me a favor:<br />Please: please, post what is your OS (if your OS is Win32 family) and what is in CS register of loaded user mode level Win32 app?</div>
    <div class="meta">Posted on 2003-02-17 16:04:40 by The Svin</div>
   </div>
   <div class="post" id="post-82356">
    <div class="subject"><a href="#post-82356">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">The Svin - having read your posts, I guess this is going to surprise you<br />I've got:<br /><br />Win95   016fh<br />Win98 SE   0167h<br /><br />Regards<br />eGo</div>
    <div class="meta">Posted on 2003-02-17 17:43:16 by eGo</div>
   </div>
   <div class="post" id="post-82358">
    <div class="subject"><a href="#post-82358">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Surprizing indeed :)<br />Thanx.<br />I'm waiting for the other's data.</div>
    <div class="meta">Posted on 2003-02-17 17:45:13 by The Svin</div>
   </div>
   <div class="post" id="post-82406">
    <div class="subject"><a href="#post-82406">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Win2k Professional, English (USA), under VC debugger 001Bh<br />Don't know if this is the same when not in the debugger. This particular system I'm using doesn't have MASM installed on it.</div>
    <div class="meta">Posted on 2003-02-18 02:40:04 by tenkey</div>
   </div>
   <div class="post" id="post-82457">
    <div class="subject"><a href="#post-82457">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Hello,<br /><br />On my NT 4.0 (fr), got cs = 001bh</div>
    <div class="meta">Posted on 2003-02-18 09:34:55 by etherlord</div>
   </div>
   <div class="post" id="post-82513">
    <div class="subject"><a href="#post-82513">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Windows XP Professional, English (USA), CS = 001Bh</div>
    <div class="meta">Posted on 2003-02-18 15:57:21 by tenkey</div>
   </div>
   <div class="post" id="post-82521">
    <div class="subject"><a href="#post-82521">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">I guess, all NT kernel based OSs have 01B as code segment selector, while 9x may differ from each others.</div>
    <div class="meta">Posted on 2003-02-18 16:34:04 by The Svin</div>
   </div>
   <div class="post" id="post-82542">
    <div class="subject"><a href="#post-82542">glad to comply?</a></div>
    <div class="body">Just not sure what to do. Just get the context of CS? Of what process?</div>
    <div class="meta">Posted on 2003-02-18 19:22:41 by mrgone</div>
   </div>
   <div class="post" id="post-82576">
    <div class="subject"><a href="#post-82576">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Load in debugger any user mode Win32 app.<br />And look up value in CS.<br />Then, please, post it here along with you OS name.</div>
    <div class="meta">Posted on 2003-02-19 04:15:51 by The Svin</div>
   </div>
   <div class="post" id="post-82579">
    <div class="subject"><a href="#post-82579">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">and what can we learn from this? don't use hardcoded stuff even though it might seem very unlikely that it will change.</div>
    <div class="meta">Posted on 2003-02-19 04:55:48 by f0dder</div>
   </div>
   <div class="post" id="post-82598">
    <div class="subject"><a href="#post-82598">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">From this we learn factual data.<br />Those who respect people (they converse to) leave a choise<br />to use the data and make conclusions to the people.<br />Such manners to talk fit to cusaders section not here, f00der.<br /><br />'Cause the first question here whom do you mean by &quot;We&quot;?<br />&quot;We&quot; are so different, f00der, and write such different code, for<br />such different purpose, machines, environment, conditions etc.<br /> so it looks like kinda disrespect to give &quot;universal&quot; advises for &quot;US&quot;.<br /><br />In opposite pure and precise technical data is interesting and informative<br />for low level coders. What they are going to do with that - is their business.<br /><br />The man asked qeustion - how he could use far jump opcode in his Win32 app.<br />We are trying to help him understand it and collecting data related to it.<br /><br />How your post  relates to it - I just can not see.<br />It fits to crusaders &quot; war for nothing&quot; talks.</div>
    <div class="meta">Posted on 2003-02-19 07:40:14 by The Svin</div>
   </div>
   <div class="post" id="post-82602">
    <div class="subject"><a href="#post-82602">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">win2K here: 001b</div>
    <div class="meta">Posted on 2003-02-19 08:01:42 by Hiroshimator</div>
   </div>
   <div class="post" id="post-82624">
    <div class="subject"><a href="#post-82624">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">Win2k AS cs=001bh<br />WinME cs=0187h</div>
    <div class="meta">Posted on 2003-02-19 10:14:58 by pelaillo</div>
   </div>
   <div class="post" id="post-82626">
    <div class="subject"><a href="#post-82626">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">win2k+sp3, cs=0x1b.<br /><br />don't get me wrong svin, doing absolute jumps like that is fine if you know<br />what you're doing... which I pretty much assume you are ;). but I've seen<br />hardcoded addresses in some &quot;production quality&quot; software. I've seen win32<br />apps doing direct port I/O. That is obviously _not_ a good thing.<br /><br />Same as not calling InitCommonControls. it works now, and might continue<br />working, but who knows if microsoft decides to make it actually do something?<br />Something required? Imho, if you want to do (consumer) win32 programming,<br />you should play by microsofts rules. Incompatible software is annoying.</div>
    <div class="meta">Posted on 2003-02-19 10:27:24 by f0dder</div>
   </div>
   <div class="post" id="post-82640">
    <div class="subject"><a href="#post-82640">CS=00000 0000 /Win2k Prof.</a></div>
    <div class="body">.elseif DBEvent.dwDebugEventCode==CREATE_PROCESS_DEBUG_EVENT <br />    invoke wsprintf, addr buffer, addr ProcessInfo, DBEvent.u.CreateProcessInfo.hFile, DBEvent.u.CreateProcessInfo.hProcess, DBEvent.u.CreateProcessInfo.hThread, DBEvent.u.CreateProcessInfo.lpBaseOfImage, DBEvent.u.CreateProcessInfo.lpStartAddress <br />    invoke MessageBox,0, addr buffer, addr AppName, MB_OK+MB_ICONINFORMATION <br /><br />    invoke SuspendThread,pi.hThread<br />    invoke GetThreadContext,pi.hThread, addr context<br />    push eax<br />    mov eax,context.regCs<br />    mov regXXX,eax<br />    call DisplayregXXX<br />    pop eax <br />    invoke ResumeThread,pi.hThread<br /><br />  This was the order I did it in and I got a &quot;0&quot; in CS.</div>
    <div class="meta">Posted on 2003-02-19 12:04:02 by mrgone</div>
   </div>
   <div class="post" id="post-82656">
    <div class="subject"><a href="#post-82656">Jump to constant address in MASM, isn't it possible?</a></div>
    <div class="body">I don't believe 0 is a valid selector.<br /><br />Assuming I understand what your DisplayregXXX does, what does the following produce?<br /><br /><pre><code>mov ax,cs            ; get current CS<br />and eax,0FFFFh       ; zero out high bits<br />mov regXXX,eax       ; store in argument variable<br />call DisplayregXXX   ; display result<br /></code></pre></div>
    <div class="meta">Posted on 2003-02-19 14:24:15 by tenkey</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=10801&amp;page=1" style="">&laquo;</a><a href="../?id=10801&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="10801" /><input type="number" name="page" min="1" max="3" step="1" value="2" onchange="this.form.submit();" /><a href="../?id=10801&amp;page=3">&gt;</a><a href="../?id=10801&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>