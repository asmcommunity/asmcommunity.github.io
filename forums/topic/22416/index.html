<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Window is created but no triangle/square is shwon - OpenGl - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22416" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=22416">Window is created but no triangle/square is shwon - OpenGl</a></p>
   <div class="post" id="post-168214">
    <div class="subject"><a href="#post-168214">Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">I&#39;m following <a target="_blank" href="http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=02">NeHe&#39;s second tutorial</a>, the window is created and everything runs fine, but no triangle or square is shown, here&#39;s my DrawGLScene function:<br /><br /><pre><code>DrawGLScene proc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;drawing proc<br />&nbsp; &nbsp; invoke glClear, GL_COLOR_BUFFER_BIT or GL_DEPTH_BUFFER_BIT ;clear screen and depth buffer<br />&nbsp; &nbsp; invoke glLoadIdentity&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;reset modelview matrix<br />&nbsp; &nbsp; invoke glTranslatef, _m1d5, 0, _m6<br />&nbsp; &nbsp; invoke glBegin, GL_TRIANGLES<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, 0, _1, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, _m1, _m1, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, _1, _m1, 0<br />&nbsp; &nbsp; invoke glEnd<br />&nbsp; &nbsp; invoke glTranslatef, _3, 0, 0<br />&nbsp; &nbsp; invoke glBegin, GL_QUADS<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, _m1, _1, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, _1, _1, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, _1, _m1, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke glVertex3f, _m1, _m1, 0<br />&nbsp; &nbsp; invoke glEnd<br />&nbsp; &nbsp; mov eax, TRUE<br />&nbsp; &nbsp; ret<br />DrawGLScene endp</code></pre><br /><br />These numbers with a _ preceding them are constants to replace the float numbers:<br /><br /><pre><code>_45d0	equ 40468000h ;45.0<br />_45d1&nbsp;  equ 0	<br />_01d0	equ 1069128089		 <br />_01d1&nbsp;  equ -1717986918 ;0.1<br />_100d0	equ 1079574528<br />_100d1&nbsp; equ 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;100.0<br />_1d0	equ 1072693248<br />_1d1&nbsp; &nbsp; equ 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;1.0<br />_05	&nbsp; &nbsp; equ 1056964608&nbsp; ; 0.5<br />_1	&nbsp; &nbsp; equ 1065353216&nbsp; ; 1.0<br />_m1	&nbsp; &nbsp; equ -1082130432 ;-1.0<br />_3	&nbsp; &nbsp; equ 1077936128&nbsp; ; 3.0<br />_m1d5&nbsp;  equ -1077936128 ;-1.5<br />_m6	&nbsp; &nbsp; equ -1061158912 ;-6.0</code></pre><br /><br />And here&#39;s my whole asm file, it&#39;s based on the <a target="_blank" href="http://nehe.gamedev.net/data/lessons/asm/lesson02.zip">ASM</a> and <a target="_blank" href="http://nehe.gamedev.net/data/lessons/masm/lesson02.zip">MASM</a> translations of this tutorial:<br /><br />Some of you might be wondering why am I making so topics on both DirectX and OpenGL, the reason of that is that I haven&#39;t decided yet wich one I&#39;ll be using from now on, I&#39;m still deciding :)</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1255" target="_blank">OpenGL2.Asm</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-11-24 19:44:49 by Lenin</div>
   </div>
   <div class="post" id="post-168230">
    <div class="subject"><a href="#post-168230">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body"><br />what&#39;s with winextra.def? Is this part of MASM32?<br /><br /></div>
    <div class="meta">Posted on 2005-11-25 06:30:57 by japheth</div>
   </div>
   <div class="post" id="post-168247">
    <div class="subject"><a href="#post-168247">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">Attached. This came along with masm translation of the tutorial...</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1258" target="_blank">winextra.txt</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-11-25 20:17:57 by Lenin</div>
   </div>
   <div class="post" id="post-168250">
    <div class="subject"><a href="#post-168250">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">It may be something with the camera (my blind guess). Write yourself a &#39;LookAtSceneCenter()&#39; function (using gluLookAt, for example).<br /><br /><br />BTW: there&#39;s a typo in the title</div>
    <div class="meta">Posted on 2005-11-25 21:29:58 by ti_mo_n</div>
   </div>
   <div class="post" id="post-168254">
    <div class="subject"><a href="#post-168254">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body"><br />in ReSizeGLScene ratio should be defined as REAL8 (or QWORD), not as DWORD<br /></div>
    <div class="meta">Posted on 2005-11-25 22:32:20 by japheth</div>
   </div>
   <div class="post" id="post-168274">
    <div class="subject"><a href="#post-168274">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body"><div class="quote"><br /><br />in ReSizeGLScene ratio should be defined as REAL8 (or QWORD), not as DWORD<br /><br /></div><br /><br />The program is working fine now! Thank you :)</div>
    <div class="meta">Posted on 2005-11-26 08:42:50 by Lenin</div>
   </div>
   <div class="post" id="post-168277">
    <div class="subject"><a href="#post-168277">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">I have one problem... As I already said I&#39;m using these decimal constants to replace the floating number, and it&#39;s working finely, as long as I have them. I would like to know how to get these constants, without having to look at the tutorial&#39;s translation, for numbers like -7.0f, etc.<br /><br />I already looked for float to dec converters in google without succes...</div>
    <div class="meta">Posted on 2005-11-26 13:43:37 by Lenin</div>
   </div>
   <div class="post" id="post-168280">
    <div class="subject"><a href="#post-168280">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body"><br />you could define them as variables instead of constants. Then there is no need for a conversion:<br /><br />_05d&nbsp;  REAL8 0.5<br /><br />but is is a bit &quot;slower&quot; of course ;-)<br /><br /></div>
    <div class="meta">Posted on 2005-11-26 14:51:26 by japheth</div>
   </div>
   <div class="post" id="post-168282">
    <div class="subject"><a href="#post-168282">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">Thanks :) Still I can&#39;t use it in any API, opcode...<br /><br /><pre><code>_m7 REAL8 -7.0<br />invoke glTranslatef, _1d5, 0, _m7</code></pre><br /><br />Gives me: <div class="quote">error A2114: INVOKE argument type mismatch : argument : 3</div><br /><br />I tried things like: mov eax, _m7 and push _m7 but they all give me errors...</div>
    <div class="meta">Posted on 2005-11-26 16:43:51 by Lenin</div>
   </div>
   <div class="post" id="post-168286">
    <div class="subject"><a href="#post-168286">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">Translatef requires &quot;REAL4&quot; (I guess that&#39;s the name. I&#39;ve only used TASM, where it&#39;s simply &#39;dd&#39; ).</div>
    <div class="meta">Posted on 2005-11-26 21:01:45 by ti_mo_n</div>
   </div>
   <div class="post" id="post-168301">
    <div class="subject"><a href="#post-168301">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">Perfect :) Thanks.</div>
    <div class="meta">Posted on 2005-11-27 11:57:31 by Lenin</div>
   </div>
   <div class="post" id="post-168334">
    <div class="subject"><a href="#post-168334">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">More problems... Now on tut 7.... Here I &#39;m loading an image of a crate and using it as a texture, everything is running smoothly except that the crate is... blue.&nbsp; :O</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1263" target="_blank">OpenGL.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-11-28 19:39:17 by Lenin</div>
   </div>
   <div class="post" id="post-168338">
    <div class="subject"><a href="#post-168338">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body"><br />try using GL_BGR_EXT instead of GL_RGB in glTextImage2D and glBuild2DMipmaps.<br /><br /><br /></div>
    <div class="meta">Posted on 2005-11-29 03:26:56 by japheth</div>
   </div>
   <div class="post" id="post-168357">
    <div class="subject"><a href="#post-168357">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">Thanks :)</div>
    <div class="meta">Posted on 2005-11-29 14:01:43 by Lenin</div>
   </div>
   <div class="post" id="post-168368">
    <div class="subject"><a href="#post-168368">Re: Window is created but no triangle/square is shwon - OpenGl</a></div>
    <div class="body">Remember to check whether the BGR extension is supported, or better write yourself a RGB-&gt;BGR converter (this way you&#39;ll get a bit independent :P ).<br /><br />Prefer using DXn texture format.</div>
    <div class="meta">Posted on 2005-11-29 23:15:49 by ti_mo_n</div>
   </div>
  </div>
 </body>
</html>