<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to write a member function of a class in asm? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10352" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=10352">How to write a member function of a class in asm?</a></p>
   <div class="post" id="post-77735">
    <div class="subject"><a href="#post-77735">How to write a member function of a class in asm?</a></div>
    <div class="body">1. How can the function get the &quot;this&quot; pointer?<br />2. What's the name of the CSomeClass::SomeFunc() in asm?</div>
    <div class="meta">Posted on 2003-01-22 07:40:27 by alphasun</div>
   </div>
   <div class="post" id="post-77743">
    <div class="subject"><a href="#post-77743">How to write a member function of a class in asm?</a></div>
    <div class="body">xxxSomeFunc( CSomeClass *_this){<br />;<br />}<br /><br />_this is always the first argument.</div>
    <div class="meta">Posted on 2003-01-22 08:28:08 by Ultrano</div>
   </div>
   <div class="post" id="post-77768">
    <div class="subject"><a href="#post-77768">How to write a member function of a class in asm?</a></div>
    <div class="body">What kind of classes? Classes in just asm? Linked to C++ (which compiler?)?<br /><br />Thomas</div>
    <div class="meta">Posted on 2003-01-22 10:11:02 by Thomas</div>
   </div>
   <div class="post" id="post-78052">
    <div class="subject"><a href="#post-78052">How to write a member function of a class in asm?</a></div>
    <div class="body">I have a C++ class, the compiler is Visual Studio's compiler, I want to write <br />some of the member functions of that class in asm.<br />Thanks for any reply.</div>
    <div class="meta">Posted on 2003-01-23 22:32:42 by alphasun</div>
   </div>
   <div class="post" id="post-78072">
    <div class="subject"><a href="#post-78072">How to write a member function of a class in asm?</a></div>
    <div class="body">well, <br />long CClass::Func(long param1){<br />long var1;<br />__asm{<br />mov eax,param1<br />mov ecx,4343<br />xor eax,ecx<br />ror eax,5<br />mov var1,eax<br />}<br />return var1;<br />}</div>
    <div class="meta">Posted on 2003-01-24 02:24:53 by Ultrano</div>
   </div>
   <div class="post" id="post-78073">
    <div class="subject"><a href="#post-78073">How to write a member function of a class in asm?</a></div>
    <div class="body">You are right, but if we use inline asm, we can't use macro assembly. Macro assembly is so useful, further more, too many inline asm codes are not easy to maintain.<br /><br />any reply is welcome</div>
    <div class="meta">Posted on 2003-01-24 03:02:49 by alphasun</div>
   </div>
   <div class="post" id="post-78077">
    <div class="subject"><a href="#post-78077">How to write a member function of a class in asm?</a></div>
    <div class="body">alphasun,<br /><br />first create your member as C++ dummy. Create a linker MAP file and find the name of the member how the C++ compiler has generated it. Now code this is ASM using that name (dont use the &quot;@xx&quot; suffix of the name) and delete the dummy member in your C++ source.</div>
    <div class="meta">Posted on 2003-01-24 03:19:13 by japheth</div>
   </div>
   <div class="post" id="post-78108">
    <div class="subject"><a href="#post-78108">How to write a member function of a class in asm?</a></div>
    <div class="body">:alright: <br />Good idea!<br />But when I wrote as following, I will get a function in .obj file named <strong>_?XXXXX@XXX@XXXqi</strong>,<br />pay attention to that prefix, an underline!!  Which language shall I choose to generate a correct name?<br /><br /><br />.model flat, c; which language shall I choose? <br />.code<br /><br />?XXXXX@XXX@XXXqi proc a:DWORD, b:DWORD<br />ret<br />?XXXXX@XXX@XXXqi endp<br /><br />end<br /><br />I tried that map file, I got this <strong>0001:0000e970       ?SomeFunc@CWaveView@@QAEXK@Z 0040f970 f   WaveView.obj</strong></div>
    <div class="meta">Posted on 2003-01-24 07:53:40 by alphasun</div>
   </div>
   <div class="post" id="post-78110">
    <div class="subject"><a href="#post-78110">dont use the &quot;@xx&quot; suffix of the name</a></div>
    <div class="body">dont use the &quot;@xx&quot; suffix of the name <br /><br />I am :stupid:  !@$!%#$%^$%^<br />Why do not use that suffix?<br />please</div>
    <div class="meta">Posted on 2003-01-24 07:58:50 by alphasun</div>
   </div>
   <div class="post" id="post-78130">
    <div class="subject"><a href="#post-78130">How to write a member function of a class in asm?</a></div>
    <div class="body">alphasun<br /><br />that suffix (and a &quot;_&quot; prefix) is from &quot;stdcall&quot; convention and will be added by MASM itself.</div>
    <div class="meta">Posted on 2003-01-24 11:31:18 by japheth</div>
   </div>
  </div>
 </body>
</html>