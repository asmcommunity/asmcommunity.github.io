<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>asm-DLL for use of SIMD in Delphi - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16544" />
  <link rel="prev" href="../?id=16544&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=16544">asm-DLL for use of SIMD in Delphi</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=16544&amp;page=1" style="">&laquo;</a><a href="../?id=16544&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="16544" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-130768">
    <div class="subject"><a href="#post-130768">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">Impossible. I've done my best but in this case the only way to have it aligned would be to copy it at an aligned location. Not sure this is the best thing to do to achieve high speed.</div>
    <div class="meta">Posted on 2004-01-16 07:14:54 by Chrishka</div>
   </div>
   <div class="post" id="post-130769">
    <div class="subject"><a href="#post-130769">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">Hrm... {$ALIGN} directive might help you? I dunno if it works only on records or if it can be used on data variables too, and whether you can specify alignment in the directive. Try a {$A8} ? The compiler really ought to have settings for default data alignment, at least all C++ compilers I know have - and I think Delphi does too, if you dig deep enough?</div>
    <div class="meta">Posted on 2004-01-16 07:17:38 by f0dder</div>
   </div>
   <div class="post" id="post-130772">
    <div class="subject"><a href="#post-130772">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">the data is already aligned, but the way the algorithm works will always create unaligned access to memory. I have an array of byte aligned by 16, but it's not read at +0, then +16, ect... it's read at +0, then +1, +2, etc...  in a loop, so as soon as the second iteration is executed, exception raises...</div>
    <div class="meta">Posted on 2004-01-16 07:33:11 by Chrishka</div>
   </div>
   <div class="post" id="post-130773">
    <div class="subject"><a href="#post-130773">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">Hm, sounds pretty bad... perhaps if you post some info on the algorithm, some of the clever heads here can help optimize it?</div>
    <div class="meta">Posted on 2004-01-16 07:37:56 by f0dder</div>
   </div>
   <div class="post" id="post-130774">
    <div class="subject"><a href="#post-130774">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">unfortunately I'm not allowed to do that</div>
    <div class="meta">Posted on 2004-01-16 07:49:49 by Chrishka</div>
   </div>
   <div class="post" id="post-130776">
    <div class="subject"><a href="#post-130776">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">Perhaps you can give a clue as to what the purpose of the code is?</div>
    <div class="meta">Posted on 2004-01-16 07:55:02 by f0dder</div>
   </div>
   <div class="post" id="post-130781">
    <div class="subject"><a href="#post-130781">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">the purpose is video compression, it's integer motion estimation that's bugging me. I've coded a SSE sum of absolute difference for 16x8 and 16x16 blocks, but integer motion estimation calls the SAD with x=0, x=1, etc... I thought it would do x=0, x=16... but it appears not.</div>
    <div class="meta">Posted on 2004-01-16 08:35:26 by Chrishka</div>
   </div>
   <div class="post" id="post-130782">
    <div class="subject"><a href="#post-130782">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">Perhaps there's some smart trick around this? Like computing ahead and returning subset results? I don't really have any clue how this stuff works, and I'm not that much of an algorithm guy anyway... but there's surely some clever heads around here that could shuffle out some tricks... perhaps start a new thread in main, with an algorithm description (as much as you're allowed to disclose) plus some of the problems you've ran into...</div>
    <div class="meta">Posted on 2004-01-16 08:43:37 by f0dder</div>
   </div>
   <div class="post" id="post-130786">
    <div class="subject"><a href="#post-130786">asm-DLL for use of SIMD in Delphi</a></div>
    <div class="body">ok, thanks a lot for helping me out</div>
    <div class="meta">Posted on 2004-01-16 09:18:12 by Chrishka</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=16544&amp;page=1" style="">&laquo;</a><a href="../?id=16544&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="16544" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>