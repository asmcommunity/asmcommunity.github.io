<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30735" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=30735">Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM</a></p>
   <div class="post" id="post-215329">
    <div class="subject"><a href="#post-215329">Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM</a></div>
    <div class="body">I will try to port source code from Randy Hyde&#039;s book &quot;The Art of Assembly Language&quot;, Windows 32-bit Edition to MASM source code in this topic. I think there are many good examples of code from this valuable book although the source code from this book use HLA&nbsp; :P.<br />I hope you could give me a hand here too!<br />Any contribution (comment, advice, optimization, fix, tip, source code etc.) is really appreciated&nbsp; :D.<br /><br />The electronic edition of &quot;The Art of Assembly Language Programming&quot;, Windows 32-bit Edition:<br />Art of Assembly Language Programming and HLA by Randall Hyde<br />http://homepage.mac.com/randyhyde/webster.cs.ucr.edu/www.artofasm.com/Windows/index.html</div>
    <div class="meta">Posted on 2011-11-08 14:51:35 by bolzano_1989</div>
   </div>
   <div class="post" id="post-215330">
    <div class="subject"><a href="#post-215330">Re: Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM</a></div>
    <div class="body">I will update the list of source code in this post.<br />List of Source Code<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=30735.msg215331#msg215331"><strong>HelloWorld, 1_01HelloWorld.hla =&gt; 1_01HelloWorld.asm</strong></a><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=30735.msg215332#msg215332"><strong>DemoVars, 1_02DemoVars.hla =&gt; 1_02DemoVars.asm</strong></a></div>
    <div class="meta">Posted on 2011-11-08 14:52:26 by bolzano_1989</div>
   </div>
   <div class="post" id="post-215331">
    <div class="subject"><a href="#post-215331">Re: Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM</a></div>
    <div class="body">1_01HelloWorld.hla<br /><pre><code>program HelloWorld;<br /> <br />#include( &quot;stdlib.hhf&quot; )<br /> <br />begin HelloWorld;<br /> <br /><br /> <br />	stdout.put( &quot;Hello, World of Assembly Language&quot;, nl );<br /> <br /><br /> <br />end HelloWorld;<br /></code></pre><br /><br />MASM:<br />1_01HelloWorld.asm<br /><pre><code>; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Build this with the &quot;Project&quot; menu using<br />;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;Console Assemble and Link&quot;<br /><br />; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />&nbsp; &nbsp; .486&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; create 32 bit code<br />&nbsp; &nbsp; .model flat, stdcall&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; 32 bit memory model<br />&nbsp; &nbsp; option casemap :none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; case sensitive<br /> <br />&nbsp; &nbsp; include \masm32\include\windows.inc&nbsp; &nbsp; &nbsp;; always first<br />&nbsp; &nbsp; include \masm32\macros\macros.asm&nbsp; &nbsp; &nbsp; &nbsp;; MASM support macros<br /><br />&nbsp; ; -----------------------------------------------------------------<br />&nbsp; ; include files that have MASM format prototypes for function calls<br />&nbsp; ; -----------------------------------------------------------------<br />&nbsp; &nbsp; include \masm32\include\masm32.inc<br />&nbsp; &nbsp; include \masm32\include\gdi32.inc<br />&nbsp; &nbsp; include \masm32\include\user32.inc<br />&nbsp; &nbsp; include \masm32\include\kernel32.inc<br /><br />&nbsp; ; ------------------------------------------------<br />&nbsp; ; Library files that have definitions for function<br />&nbsp; ; exports and tested reliable prebuilt code.<br />&nbsp; ; ------------------------------------------------<br />&nbsp; &nbsp; includelib \masm32\lib\masm32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\gdi32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\user32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\kernel32.lib<br /><br />&nbsp; &nbsp; .code&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Tell MASM where the code starts<br /><br />; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />start:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; The CODE entry point to the program<br /><br />&nbsp; &nbsp; print chr$(&quot;Hello, World of Assembly Language&quot;,13,10)<br />&nbsp; &nbsp; exit<br /><br />; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />end start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; Tell MASM where the program ends<br /></code></pre></div>
    <div class="meta">Posted on 2011-11-08 14:53:06 by bolzano_1989</div>
   </div>
   <div class="post" id="post-215332">
    <div class="subject"><a href="#post-215332">Re: Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM</a></div>
    <div class="body">1_02DemoVars.hla<br /><pre><code>Program DemoVars;<br />#include( &quot;stdlib.hhf&quot; );<br /><br />static<br />&nbsp; &nbsp; InitDemo:&nbsp; &nbsp; &nbsp;  int32 := 5;<br />&nbsp; &nbsp; NotInitialized: int32;<br /><br />begin DemoVars;<br /><br />&nbsp; &nbsp; // Display the value of the pre-initialized variable:<br /><br />&nbsp; &nbsp; stdout.put( &quot;InitDemo&#039;s value is &quot;, InitDemo, nl );<br /><br />&nbsp; &nbsp; // Input an integer value from the user and display that value:<br /><br />&nbsp; &nbsp; stdout.put( &quot;Enter an integer value: &quot; );<br />&nbsp; &nbsp; stdin.get( NotInitialized );<br />&nbsp; &nbsp; stdout.put( &quot;You entered: &quot;, NotInitialized, nl );<br /><br />end DemoVars;<br /></code></pre><br /><br />MASM: <br /><strong>Could you improve my code please&nbsp; :D ?<br /></strong>1_02DemoVars.asm<br /><pre><code>; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Build this with the &quot;Project&quot; menu using<br />;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &quot;Console Assemble and Link&quot;<br /><br />; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />&nbsp; &nbsp; .486&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; create 32 bit code<br />&nbsp; &nbsp; .model flat, stdcall&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; 32 bit memory model<br />&nbsp; &nbsp; option casemap :none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; case sensitive<br /> <br />&nbsp; &nbsp; include \masm32\include\windows.inc&nbsp; &nbsp;  ; always first<br />&nbsp; &nbsp; include \masm32\macros\macros.asm&nbsp; &nbsp; &nbsp;  ; MASM support macros<br /><br />&nbsp; ; -----------------------------------------------------------------<br />&nbsp; ; include files that have MASM format prototypes for function calls<br />&nbsp; ; -----------------------------------------------------------------<br />&nbsp; &nbsp; include \masm32\include\masm32.inc<br />&nbsp; &nbsp; include \masm32\include\gdi32.inc<br />&nbsp; &nbsp; include \masm32\include\user32.inc<br />&nbsp; &nbsp; include \masm32\include\kernel32.inc<br /><br />&nbsp; ; ------------------------------------------------<br />&nbsp; ; Library files that have definitions for function<br />&nbsp; ; exports and tested reliable prebuilt code.<br />&nbsp; ; ------------------------------------------------<br />&nbsp; &nbsp; includelib \masm32\lib\masm32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\gdi32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\user32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\kernel32.lib<br /><br />.data<br />&nbsp; InitDemo&nbsp; dd&nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; 32 bit value initialised to 5<br />&nbsp; <br />.data?<br />&nbsp; NotInitialized dd ?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Uninitialised single 32 bit space<br />&nbsp; str1 dd ?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; a string handle for the input data<br /><br />&nbsp; &nbsp; .code&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; Tell MASM where the code starts<br /><br />; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />start:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; The CODE entry point to the program<br /><br />&nbsp; &nbsp; print chr$(&quot;InitDemo&#039;s value is &quot;)<br />&nbsp; &nbsp; print str$(InitDemo)<br />&nbsp; &nbsp; print chr$(13,10)<br />&nbsp; &nbsp; mov str1, input(&quot;Enter an integer value: &quot;)<br />&nbsp; &nbsp; mov NotInitialized, sval(str1)&nbsp; &nbsp; &nbsp; &nbsp; ; convert the result to a signed integer<br />&nbsp; &nbsp; print chr$(&quot;You entered: &quot;)<br />&nbsp; &nbsp; print str$(NotInitialized)<br />&nbsp; &nbsp; print chr$(13,10)<br />&nbsp; &nbsp; exit<br /><br />; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««<br /><br />end start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; Tell MASM where the program ends<br /></code></pre></div>
    <div class="meta">Posted on 2011-11-08 14:53:58 by bolzano_1989</div>
   </div>
   <div class="post" id="post-215336">
    <div class="subject"><a href="#post-215336">Re: Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to MASM</a></div>
    <div class="body">Basically, the author Randy Hyde, tried to implement Object Oriented Asm using MASM BEFORE he wrote HLA - he found that MASM is quite limited (deficiencies in the macro engine, mainly) and decided to create a &quot;preprocessor&quot; that emits MASM-compliant sourcecode.<br /><br />Your goals are skewed.<br /><br />Historical note, after he failed and went his way, a guy called Byterider wrote a full MASM based object oriented language using MASM macro engine, found ways around many of its limits - at the time I was a fan of another guy who was doing similar work, but he politely asked me to leave it alone since he &quot;wanted to go commercial&quot; (what happened to him?) Well I became #2 developer of ObjAsm, because there was nowhere else to go, except HLA, at that time.. not that I don&#039;t think you are a legend Randy, you opened my eyes!<br /></div>
    <div class="meta">Posted on 2011-11-09 04:00:51 by Homer</div>
   </div>
   <div class="post" id="post-215338">
    <div class="subject"><a href="#post-215338">Re: Porting HLA code of The Art of Assembly Language, Windows 32-bit Edition to </a></div>
    <div class="body">I&#039;ll just mention that, the last I knew, there was a &quot;-source&quot; switch to HLA, which you needed to use if you wanted &quot;real&quot; source code instead of just a list of &quot;db&quot;s. I don&#039;t know if that would be any help or not. Good luck!<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2011-11-09 04:44:26 by fbkotler</div>
   </div>
  </div>
 </body>
</html>