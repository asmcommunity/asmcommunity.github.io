<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>lol - one last question... i promise ! :) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5153" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=5153">lol - one last question... i promise ! :)</a></p>
   <div class="post" id="post-36330">
    <div class="subject"><a href="#post-36330">lol - one last question... i promise ! :)</a></div>
    <div class="body">with your help, i managed to finnaly fix my stupid problems about the keys input...<br />now there is only one more thing :) lol !<br />since i have to hand over this work in 2 days (i managed to post pone it, luckily, very luckily) i got this one more problem to fix -<br /><br />all the keys, produce the same sound !<br />now, i know how this speaker activation works, and if someone here knows it - i would be happy to get some explanation about it, because no matter what experiments i do with it, each key sounds exactly the same.<br />the thing is, the program creates a square wave in volts (from 1 binary to 0 binary and back to 1 again) and the frequency of that wave determines the height of the sound.<br />now if i change the delay between the 'putting of a 1' and the 'putting of 0' it would change the frequency right ?<br />anyway, once a certain key is pressed, a certain delay value which represents the frequency, is put into bx, which afterwards goes to cx in the sound procedure itself (appears in code below).<br />here is the piece of code for the sound - anyone can help ?<br />if you noticed, the change is in the second least important bit, that is the one that goes 0 to 1 and back all the time.<br /><br />SOUND	proc			;start procedure SOUND<br />	mov delayer,100h  		;set length of sound<br />sound2:	mov al,4eh 		;store 4e in al (1001110 in binary)<br />                out 61h,al 		;move that value to adress 61h?<br />                mov cx,bx 		;sound frequency from bx to cx<br />wait1:      loop wait1 		;wait an amount of time<br />                mov al,04ch 		;store 4c in al (1001100 in binary) 	out 61h,al 		;move that value to adress 61h<br />	mov cx,1000h 		;move a delay value to cx<br />wait2:      loop wait2 		;wait a fixed amount of time<br />                dec delayer 		;decrease the length of sound<br />                jnz sound2 		;if not reached 0, jump to begin <br />	ret 			;return to main program<br />SOUND endp			;end procedure SOUND</div>
    <div class="meta">Posted on 2002-05-03 09:03:53 by flipmode</div>
   </div>
   <div class="post" id="post-36337">
    <div class="subject"><a href="#post-36337">lol - one last question... i promise ! :)</a></div>
    <div class="body">Looks to me like the decrease delayer code is placed wrong.  Might just be me however.  looks like from what im seeing is that this delayer would affect how long the sound is played and not affect the frequency one bit.  The frequency would be changed by setting different values to wait1 and wait2.<br /><br />Never mind.  I was reading it wrong LOL.</div>
    <div class="meta">Posted on 2002-05-03 09:29:11 by Graebel</div>
   </div>
   <div class="post" id="post-36339">
    <div class="subject"><a href="#post-36339">lol - one last question... i promise ! :)</a></div>
    <div class="body">mov cx,1000h ;move a delay value to cx <br /><br />Whats this for?  Shouldnt this be umm mov cx, bx again?</div>
    <div class="meta">Posted on 2002-05-03 09:33:20 by Graebel</div>
   </div>
   <div class="post" id="post-36351">
    <div class="subject"><a href="#post-36351">yeah!</a></div>
    <div class="body">&quot;mov cx,1000h ;move a delay value to cx <br /><br />Whats this for? Shouldnt this be umm mov cx, bx again?&quot;<br /><br />well, thats what my dumbass friend told me after i explained him my problem, he told me to switch the second 'mov cx,bx' to that<br /><br />i guess i shouldnt be listening to dumbasses <br /><br />HELP!</div>
    <div class="meta">Posted on 2002-05-03 10:25:31 by flipmode</div>
   </div>
   <div class="post" id="post-36384">
    <div class="subject"><a href="#post-36384">lol - one last question... i promise ! :)</a></div>
    <div class="body">does anyone out there have a clue what is the problem ?<br />if you dont know just reply with 'go to hell' or something :)<br />at least i will know that someone is READING this...<br /><br /><br />ARGH 24 hours left before i need to hand this over !<br />AY CARAMBA !</div>
    <div class="meta">Posted on 2002-05-03 13:47:59 by flipmode</div>
   </div>
   <div class="post" id="post-36741">
    <div class="subject"><a href="#post-36741">lol - one last question... i promise ! :)</a></div>
    <div class="body">If I remember correctly, you can actually ask the timer to do this stuff for you so the processor won't be stuck in a loop doing this itself.<br /><br />Forgot how to do it though, I'm gonna have to do some research in the really old books I have....</div>
    <div class="meta">Posted on 2002-05-05 21:59:39 by AmkG</div>
   </div>
  </div>
 </body>
</html>