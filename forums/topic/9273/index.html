<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Unicode Made EZ - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9273" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=116">Windows</a> &raquo; <a href="../?id=9273">Unicode Made EZ</a></p>
   <div class="post" id="post-68381">
    <div class="subject"><a href="#post-68381">Unicode Made EZ</a></div>
    <div class="body">Here is a Unicode Macro i wipped up, cause i just didnt like the other one ;)<br /><br />I like it, cause it has no limitations on size.  Here it is: <pre><code><br />;==============================================<br />; E-Z Unicode By NaN, 2002<br />;==============================================<br />UNICODE_TEXT TEXTEQU &lt;LABEL BYTE&gt;<br />LL macro btext<br />   LOCAL cnt, va, vb, LineText, data1<br />   LineText TEXTEQU &lt; dw &gt;<br />   va = 1<br />   vb = 1<br />   cnt equ @SizeStr&#40;&lt;btext&gt;&#41;+1<br />   WHILE va LT cnt<br />     if vb LT &#91;b&#93;&#91;COLOR=red&#93;20&#91;/COLOR&#93;&#91;/b&#93;<br />      data1 SUBSTR &lt;btext&gt;, va, 1<br />      LineText CATSTR LineText, &lt;'&gt;, data1, &lt;',&gt;<br />     else<br />      vb = 1<br />       LineText SUBSTR LineText, 1, @SizeStr&#40;%LineText&#41;-1<br />       &amp;LineText<br />       LineText TEXTEQU &lt; dw &gt;<br />       data1 SUBSTR &lt;btext&gt;, va, 1<br />       LineText CATSTR LineText, &lt;'&gt;, data1, &lt;',&gt;<br />     endif<br />     vb = vb + 1<br />     va = va + 1<br />   ENDM<br />     LineText SUBSTR LineText, 1, @SizeStr&#40;%LineText&#41;-1<br />     &amp;LineText      <br />endm</code></pre><br />It works like so, in your .data segment:<pre><code>   Data2 UNICODE_TEXT<br />      LL &lt;This is a Rather Long test to see how well my Unicode string encoder will work.  I blaber on&gt;<br />      LL &lt;with this string, but i really dont have anything more specific to say. Alalalalala..&gt;<br />      LL &lt;... and more and more text... hm... what shall i say... ah well, this is enough&gt;<br />      dw 0</code></pre><br />This will directly translate into:<pre><code><br />Data2 LABEL BYTE<br />dw 'T','h','i','s',' ','i','s',' ','a',' ','R','a','t','h','e','r',' ','L','o'<br />dw 'n','g',' ','t','e','s','t',' ','t','o',' ','s','e','e',' ','h','o','w',' '<br />dw 'w','e','l','l',' ','m','y',' ','U','n','i','c','o','d','e',' ','s','t','r'<br />dw 'i','n','g',' ','e','n','c','o','d','e','r',' ','w','i','l','l',' ','w','o'<br />dw 'r','k','.',' ',' ','I',' ','b','l','a','b','e','r',' ','o','n'<br />dw 'w','i','t','h',' ','t','h','i','s',' ','s','t','r','i','n','g',',',' ','b'<br />dw 'u','t',' ','i',' ','r','e','a','l','l','y',' ','d','o','n','t',' ','h','a'<br />dw 'v','e',' ','a','n','y','t','h','i','n','g',' ','m','o','r','e',' ','s','p'<br />dw 'e','c','i','f','i','c',' ','t','o',' ','s','a','y','.',' ','A','l','a','l'<br />dw 'a','l','a','l','a','l','a','.','.'<br />dw '.','.','.',' ','a','n','d',' ','m','o','r','e',' ','a','n','d',' ','m','o'<br />dw 'r','e',' ','t','e','x','t','.','.','.',' ','h','m','.','.','.',' ','w','h'<br />dw 'a','t',' ','s','h','a','l','l',' ','i',' ','s','a','y','.','.','.',' ','a'<br />dw 'h',' ','w','e','l','l',',',' ','t','h','i','s',' ','i','s',' ','e','n','o'<br />dw 'u','g','h'<br />dw 0</code></pre><br /><br />Just remember to use the 'UNICODE_TEXT' identifier on a separate line (as shown), and a 'dw 0' for the UNICODE null at the end of your text...<br /><br />BTW:  You can adjust the format width of each line by changing the line &quot;if vb LT 20&quot;.  There is presently 19 unicode chars per line, but this can be adjusted to probabaly 70 or so if you want to push to limits of the compiler... the number is highlighed in BOLD in the above listing for the macro source.<br /><br /><br />Simple enough to me, let me know what you think...<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-12-01 02:59:49 by NaN</div>
   </div>
   <div class="post" id="post-68399">
    <div class="subject"><a href="#post-68399">Unicode Made EZ</a></div>
    <div class="body">that's nice. thanks! :)</div>
    <div class="meta">Posted on 2002-12-01 04:32:00 by stryker</div>
   </div>
  </div>
 </body>
</html>