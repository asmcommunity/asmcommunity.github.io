<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>macro help - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21382" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21382">macro help</a></p>
   <div class="post" id="post-161596">
    <div class="subject"><a href="#post-161596">macro help</a></div>
    <div class="body">hello<br /><br />I am having trouble with a macro, could you guys tell why it is not working.<br />Its purpose is to align a string, and I am using it only in the data section.<br /><pre><code><br />STRING MACRO Args:VARARG<br />&nbsp; LOCAL Name<br />&nbsp; .Data<br />&nbsp; &nbsp; Align 4<br />&nbsp; &nbsp; Name db Args,0<br />&nbsp; Exitm &lt;Name&gt;<br />ENDM<br /></code></pre><br /><br />szClave gives me an error when I use &quot;=&quot; but if I change it to TEXTEQU it works.<br /><pre><code><br />.data<br />szMensaje = STRING (&quot;Ha ocurrido un error.&quot;)<br />szTitulo&nbsp; = STRING (&quot;Programa #1&quot;)<br />szClave&nbsp;  = STRING (01Bh,30h,03Ch,18h,27h,010h,28h)<br /></code></pre><br /><br />I have seen a similar macro that receives 2 parameters, I have change it to 1 for aesthetic reasons in my asm source :)<br />thank you<br /><br /></div>
    <div class="meta">Posted on 2005-06-29 19:49:10 by Chambao</div>
   </div>
   <div class="post" id="post-161604">
    <div class="subject"><a href="#post-161604">Re: macro help</a></div>
    <div class="body">Chambao,<br /><br />What is the error?? Why do you have a .Data directive in the MACRO if you only use it in the data section?? Does that MACRO <strong>really</strong> save you that much typing?? Ratch<br /><br /><pre><code><br /> Align 4<br />szTry BYTE 01Bh,30h,03Ch,18h,27h,010h,28h,0 <br /></code></pre><br /><br />instead of <br /><br /><pre><code><br />szClave? ?= STRING (01Bh,30h,03Ch,18h,27h,010h,28h)<br /></code></pre></div>
    <div class="meta">Posted on 2005-06-29 22:53:02 by Ratch</div>
   </div>
   <div class="post" id="post-161607">
    <div class="subject"><a href="#post-161607">Re: macro help</a></div>
    <div class="body">Hi Ratch<br /><br />the error is &quot;invalid instruction operands&quot; and the line of code where the error occurs is<br />xcall send, hSocket, offset szClave, sizeof szClave, 0<br /><br />xcall is a macro similar to invoke<br />well it doesn&#39;t save me that much typing, but i am a crazy being and i do not like to use 2 lines to declare a string becaus there are lots :oops:</div>
    <div class="meta">Posted on 2005-06-30 02:22:34 by Chambao</div>
   </div>
   <div class="post" id="post-161613">
    <div class="subject"><a href="#post-161613">Re: macro help</a></div>
    <div class="body">Chambao,<br />? ? How about posting a listing which includes the xcall MACRO definition and call, and the minimum amount of code to demonstrate the error.? Invoke is not a macro, by the way.? It is a built in MASM command.? Ratch</div>
    <div class="meta">Posted on 2005-06-30 10:51:42 by Ratch</div>
   </div>
  </div>
 </body>
</html>