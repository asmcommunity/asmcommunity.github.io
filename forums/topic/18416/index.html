<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>DX9 GameCoding with optional oop support - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18416" />
    <link rel="next" href="../?id=18416&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=18416">DX9 GameCoding with optional oop support</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=18416&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=18416&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="18416" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=18416&amp;page=2">&gt;</a><a href="../?id=18416&amp;page=3">&raquo;</a></form>   <div class="post" id="post-142669">
    <div class="subject"><a href="#post-142669">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Here's a small example showing that my ATC-based DX9 includes are working.<br />The example application creates itself a main window, then it creates an IDirect3D9 object, then calls IDirect3D9::CreateDevice to tell D3D that it should render to the window we created... in other words, basic D3D9 initialisation is performed. Nothing new or cool in this sourcecode, I'm hoping this posting will draw attention to my work with D3D9, possibly breathing new life into this tired looking forum... <br /><br />This source is a &quot;bare bones&quot; application model, unless I see more interest in the D3D9 stuff, I'm afraid I will discontinue work on the dependant classes (stuff like CD3DApplication framework).<br /><br />PS: Seems we don't have to package the msvcvr70.dll with our DX apps under DX9, my executable runs from the zip without a problem !!</div>
    <div class="meta">Posted on 2004-06-02 00:25:23 by Homer</div>
   </div>
   <div class="post" id="post-142671">
    <div class="subject"><a href="#post-142671">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Small update to sourcecode provided:<br />The attached source now performs basic Rending , and is polling the Device CooperativeLevel in preparation for dynamic unloading/reloading of device-dependant resources (we don't have any yet).</div>
    <div class="meta">Posted on 2004-06-02 00:57:53 by Homer</div>
   </div>
   <div class="post" id="post-142675">
    <div class="subject"><a href="#post-142675">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Please let me know if you have a problem compiling the provided sourcecode, I'd like to crush any build-time issues right now.<br />(I remember how many people had issues building under DX8 variants, we don't want to repeat that fiasco, do we?)</div>
    <div class="meta">Posted on 2004-06-02 01:32:17 by Homer</div>
   </div>
   <div class="post" id="post-142680">
    <div class="subject"><a href="#post-142680">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Another small addition to the posted example..<br />The source was cleaned up a little, some stuff moved around, support for the DX Helper Lib was added, in particular D3DXTexture functions are now available.<br />The example attempts to load a texture from a JPG file (successfully).<br /><br />NOTE:<br />Application size blows out from 4.5kb to 345kb ONLY due to the extra lib(s) linked by including the DXHelper lib</div>
    <div class="meta">Posted on 2004-06-02 02:32:08 by Homer</div>
   </div>
   <div class="post" id="post-142694">
    <div class="subject"><a href="#post-142694">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Its the helper lib that stopped any more attempts at DX9 for me.  I'll look at your source.<br /><br />I cannot see the image.  Geforce 2 card.  No failure warning.  DX9 SDK summer update.</div>
    <div class="meta">Posted on 2004-06-02 05:00:52 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-142698">
    <div class="subject"><a href="#post-142698">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Afternoon, EvilHomer2k.<br /><br />include \masm32\include\macros.inc<br />Not there. Should be:<br />include macros.inc<br /><br />include include\d3d9_homer.inc<br />Not there. Should be:<br />include d3d9_homer.inc<br /><br />Ditto for:<br />d3d9types.inc<br />and<br />d3dx9tex.inc<br /><br />Maybe a ReadMe.txt should be included to tell people what files are required (and where) and where any extra supplied files should go?<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2004-06-02 06:50:26 by Scronty</div>
   </div>
   <div class="post" id="post-142701">
    <div class="subject"><a href="#post-142701">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Yep, the zip I uploaded contains no file path information, my mistake, I'll watch that in future.<br />Aside from that, no problems?</div>
    <div class="meta">Posted on 2004-06-02 08:29:43 by Homer</div>
   </div>
   <div class="post" id="post-142705">
    <div class="subject"><a href="#post-142705">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Just added a little code to create a VB and fill it with some vertices (rhw, for textured quad demo), nothing renders .. but then, I've NEVER managed to get rhw vertices to render, so I'll rework it tomorrow. In the meantime, here is the latest code, can anyone see why my textured quad is not rending?</div>
    <div class="meta">Posted on 2004-06-02 10:47:44 by Homer</div>
   </div>
   <div class="post" id="post-142727">
    <div class="subject"><a href="#post-142727">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Afternoon, EvilHomer2k.<br /><br />This current file loads LoadMe.png while the supplied image is LoadMe.jpg .<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2004-06-02 18:08:29 by Scronty</div>
   </div>
   <div class="post" id="post-142745">
    <div class="subject"><a href="#post-142745">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Yep, I altered the filename and filetype because I wasn't sure if DX supported that format natively (it does).<br />Note that I am not using any transform matrices in this example.<br />I have been led to believe that we don't need to set a view matrix or projection matrix for a simple rhw quad - there's no perspective being applied.<br /><br />Is this assumption correct ?</div>
    <div class="meta">Posted on 2004-06-02 21:42:33 by Homer</div>
   </div>
   <div class="post" id="post-142748">
    <div class="subject"><a href="#post-142748">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Afternoon, EvilHomer2k.<br /><br />I've done a little tinkering and as far as I can tell you cannot use texture coordinates on xyzrhw vertices. This means that you'd have to create the view/world/projection matrices as well.<br /><br />Attached is the vertice example slightly adjusted so that it displays a simple triangle using xyzrhw. This is almost identical to the Vertices example in the DX9SDK.<br /><br />I also found an error for SetLight in one of your include files and corrected accordingly.<br /><br />If you want to get a few examples of using DX9 up-n-running quickly it might be an idea to just convert the DX8 examples I've already done (or I could do them if you'd prefer).<br /><br />Just as with the DX8 include files, we'd need quite a few examples to be able to find the errors in the include files.<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2004-06-02 23:15:13 by Scronty</div>
   </div>
   <div class="post" id="post-142750">
    <div class="subject"><a href="#post-142750">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Thanks for showing interest, I deliberately have avoided pasting wads of source from the DX8 includes in an effort to avoid the issues I'm sure are still lurking in those headers from the transition from 8.0 to 8.1, I simply refer back to them where suitable. If I hadn't bothered, I'd have missed a bunch of new equates, and I'm sure I'd have defined the interfaces incorrectly due to changes in function params.<br />I'll take a look at your posting now, just wanted to comment that my rhw rectangle is 2xrhw triangles, so I'm looking forward to seeing where I went wrong there... incidentally, I based that example on source provided at <a target="_blank" href="http://www.drunkenhyena.com/cgi-bin/view_article.pl?article=18,">http://www.drunkenhyena.com/cgi-bin/view_article.pl?article=18,</a> which contains NO references to a view matrix or anything like that - in fact, there's a dozen or so examples which lead up to usage of view and proj matrices... monkey see, monkey do.<br /><br />I've just evaluated the modifications you have made.<br />Out of curiosity, which IDE do you use?</div>
    <div class="meta">Posted on 2004-06-02 23:33:28 by Homer</div>
   </div>
   <div class="post" id="post-142754">
    <div class="subject"><a href="#post-142754">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Afternoon, EvilHomer2k.<br /><br />QEditor.<br /><br />However I've started playing around with subclassing a RichEdit control to allow decent selection of words by doubleclicking (i.e. doubleclicking on WM_SIZE in &quot;WM_SIZE == uMsg&quot; will select &quot;WM_SIZE&quot; - not &quot;WM&quot; or &quot;SIZE&lt;space&gt;&quot; ).<br /><br />/me downloading DH tutorial to see how he's done it<br /><br />Cheers,<br />Scronty<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2004-06-03 00:09:55 by Scronty</div>
   </div>
   <div class="post" id="post-142759">
    <div class="subject"><a href="#post-142759">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Afternoon, EvilHomer2k.<br /><br />Got it working.<br /><br />Download from:<br /><a target="_blank" href="http://www.scrontsoft.com/Axis_n_Allies/testing.zip">http://www.scrontsoft.com/Axis_n_Allies/testing.zip</a><br /><br />Dunno what was being done wrong beforehand :confused: .<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2004-06-03 02:06:43 by Scronty</div>
   </div>
   <div class="post" id="post-142942">
    <div class="subject"><a href="#post-142942">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Great, I'll check it out now :)<br />I was asking about ide because of the formatting of comments in your recent source.<br />Ultrano's &quot;tix&quot; ide uses &quot;marker comments&quot; like that which can be used within the ide to hide and unhide that codeblock... I use qeditor.</div>
    <div class="meta">Posted on 2004-06-05 21:07:34 by Homer</div>
   </div>
   <div class="post" id="post-142944">
    <div class="subject"><a href="#post-142944">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Odd, I can't see anything different ! Ah well, it's working :)</div>
    <div class="meta">Posted on 2004-06-05 21:28:24 by Homer</div>
   </div>
   <div class="post" id="post-142973">
    <div class="subject"><a href="#post-142973">DX9 GameCoding with optional oop support</a></div>
    <div class="body">In the attached example, I have wrapped the textured 2D quad functionality in a class I have called My2DPanel. It can be used to create any number of 2D panels on the screen, useful for all kinds of things, especially for fixed overlays rendered on top of whatever we add later... if you wanted to just write 2D stuff, you could use this as a sprite-blitting function, or in 3D, it could be adapted for BillBoarding.<br /><br />The class is an OOP class - we use the &quot;new&quot; macro to create new instances, so we'd create an instance for each 2D panel we wanted (I only create one here).<br />We save the returned &quot;class interface pointer&quot;, and use it to call the class's LoadTexture method, passing the instance pointer as &quot;pThis&quot;. LoadTexture loads the named texture and saves the texture's pointer within a data field of the current instance (pThis). Having loaded the texture, we set up a RECT structure with the screen coordinates we'd like for our Panel, and call the SetRect method, which sets up the VertexBuffer values.<br />From our main Render loop, we call the class's Render method, again passing the instance pointer as pThis, since that's the instance we'd like to Render.<br /><br />Changed image to jpg to evade board filesize limit.</div>
    <div class="meta">Posted on 2004-06-06 05:13:29 by Homer</div>
   </div>
   <div class="post" id="post-142974">
    <div class="subject"><a href="#post-142974">DX9 GameCoding with optional oop support</a></div>
    <div class="body"><div class="quote">I have been led to believe that we don't need to set a view matrix or projection matrix for a simple rhw quad - there's no perspective being applied.</div><br /><br />There is nothing applied, the vertices are fed to the rasterizer as-is.<br /><br /><div class="quote">I've done a little tinkering and as far as I can tell you cannot use texture coordinates on xyzrhw vertices</div><br /><br />You can, just create the proper struct and proper FVF format (or vertex declaration). You cannot use texture matrices though, afaik. Note that backface culling still works (this is done in screenspace by the hardware, not in objectspace as you would do in a software renderer). I created many filter routines this way, using multitexturing and fullscreen quads.</div>
    <div class="meta">Posted on 2004-06-06 05:20:53 by Scali</div>
   </div>
   <div class="post" id="post-142976">
    <div class="subject"><a href="#post-142976">DX9 GameCoding with optional oop support</a></div>
    <div class="body">Thanks Scali, I'm having more success, I was correct thinking the way I was thinking, Scronty fixed the render issue (I have no idea what was wrong - it looked identical to me), now I've reworked it in my previous posting with a supporting &quot;2d sprite blitting&quot; class.</div>
    <div class="meta">Posted on 2004-06-06 05:24:43 by Homer</div>
   </div>
   <div class="post" id="post-142978">
    <div class="subject"><a href="#post-142978">DX9 GameCoding with optional oop support</a></div>
    <div class="body">In the attached example, I have ripped off Siekmanski's code to produce a quick 3D Mesh example - note that since I have no ZBuffer, the Tiger looks a little odd.. I was in a hurry :)<br />Later I'll wrap that code in a Class as I did for 2DPanels, to make it easier to load , render, manipulate and unload any number of Meshes...<br /><br />Note that &quot;earth.jpg&quot; is not included in this zip, get it out of the previous zip I posted, I hit the board's filesize limit.</div>
    <div class="meta">Posted on 2004-06-06 06:56:13 by Homer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=18416&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=18416&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="18416" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=18416&amp;page=2">&gt;</a><a href="../?id=18416&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>