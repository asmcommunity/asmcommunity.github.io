<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Tutorial 35 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18894" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=17">Iczelion's Tutorials</a> &raquo; <a href="../?id=18894">Tutorial 35</a></p>
   <div class="post" id="post-146206">
    <div class="subject"><a href="#post-146206">Tutorial 35</a></div>
    <div class="body">I have been trying to recompile the source from this tutorial under the following conditions:<br />masm32 v8 (latest)<br />WinAsm Studio (build 21) close to latest :-P<br />Windows 2000 SP3<br /><br />The source compiles without error but when run, flashes the window.s for a brief moment and exits. The original included binary works ok. I'm making no changes to the source other than trying a few debugging windows to see whats up<br /><br />I've been trying to locate an un-preserved ebx, ebp, or edi but I'm really getting nowhere. Can someone point me in the right direction to getting this beast to re-assemble and run?</div>
    <div class="meta">Posted on 2004-07-16 11:50:06 by Cprompt</div>
   </div>
   <div class="post" id="post-146208">
    <div class="subject"><a href="#post-146208">Tutorial 35</a></div>
    <div class="body">Could you attach a zip file with the original executable and the one you have built?</div>
    <div class="meta">Posted on 2004-07-16 12:06:39 by f0dder</div>
   </div>
   <div class="post" id="post-146211">
    <div class="subject"><a href="#post-146211">Tutorial 35</a></div>
    <div class="body">Sure thing. Zip file should be attached here. I did not include the word.txt file though.<br /><br />Thanks for having a look!</div>
    <div class="meta">Posted on 2004-07-16 12:26:04 by Cprompt</div>
   </div>
   <div class="post" id="post-146215">
    <div class="subject"><a href="#post-146215">Tutorial 35</a></div>
    <div class="body">Hrm, I've compared the IDA disassembly results with windiff, and it appears that code and data are the same in both versions, but that imports and resource data is different. Furthermore, it seems that there's a crash occuring in the wndproc handler before calling ShowWindow, some time after the ShowWindow call, and that the crash is because of a stack problem (BUT! I just get the closing window, not a GPF errorbox).<br /><br />Hrm - I'll look a bit more at this.</div>
    <div class="meta">Posted on 2004-07-16 13:51:04 by f0dder</div>
   </div>
   <div class="post" id="post-146219">
    <div class="subject"><a href="#post-146219">Tutorial 35</a></div>
    <div class="body">OK. You are getting the same result as me. :-)<br /><br />I appreciate you looking at it and would be most interested in your findings.</div>
    <div class="meta">Posted on 2004-07-16 14:09:06 by Cprompt</div>
   </div>
   <div class="post" id="post-146220">
    <div class="subject"><a href="#post-146220">Tutorial 35</a></div>
    <div class="body">Okay, solved - it is indeed a stack problem. I looked at the makefile, and added &quot;/stack:2000000,2000000&quot; to the linker commandline, and now it works perfectly :)</div>
    <div class="meta">Posted on 2004-07-16 14:17:58 by f0dder</div>
   </div>
   <div class="post" id="post-146236">
    <div class="subject"><a href="#post-146236">Tutorial 35</a></div>
    <div class="body">Damn it. Should have seen that.<br /><br />Thanks so much for your efforts!</div>
    <div class="meta">Posted on 2004-07-16 22:10:52 by Cprompt</div>
   </div>
   <div class="post" id="post-146237">
    <div class="subject"><a href="#post-146237">Tutorial 35</a></div>
    <div class="body">The simplest errors can lead to hard to find bugs, as you're looking for everything but the simple :) - heck, I did disassembly, saved the listings, did windiff, and looked at the results - before I checked the makefile.<br />:stupid:</div>
    <div class="meta">Posted on 2004-07-16 22:30:55 by f0dder</div>
   </div>
   <div class="post" id="post-164488">
    <div class="subject"><a href="#post-164488">Re: Tutorial 35</a></div>
    <div class="body">Today I dowloaded this tut, and U have the same problem. The window flashes and that&#39;all.<br /><br />Il the make file there is the &quot;/stack:2000000,2000000&quot; and that does not resolve my problem.<br /><br />What is the solution ?<br /><br />Thanks</div>
    <div class="meta">Posted on 2005-09-12 14:51:33 by Grincheux</div>
   </div>
   <div class="post" id="post-164492">
    <div class="subject"><a href="#post-164492">Re: Tutorial 35</a></div>
    <div class="body">i just made this: got tut-&gt;convert to winasm project-&gt;build-&gt;run-&gt;flashing-&gt;add &quot;/STACK:2000000,2000000&quot; to the <strong>linker</strong> commandline-&gt;build again-&gt;run-&gt;ok :)<br /><br />post here your commandlines or wap/rap or other what you have so we can see what is wrong. regards!</div>
    <div class="meta">Posted on 2005-09-13 02:31:21 by Shoo</div>
   </div>
  </div>
 </body>
</html>