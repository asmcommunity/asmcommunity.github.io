<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Questions regarding ''Ethertype'' in winsocks - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28289" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28289">Questions regarding ''Ethertype'' in winsocks</a></p>
   <div class="post" id="post-200382">
    <div class="subject"><a href="#post-200382">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body">I'm curious if it is possible to create an ethertype packet using the winsocks api?  If that is not possible--how would I go about creating a raw ethernet packet at the software level (I do not have access to the nic's driver).  I need to create an 'ethertype' packet for configuring an external device on the network.  I haven't found much information and curious if anyone could help me out.

Thanks in advance 

Curtis Simonsen<u></div>
    <div class="meta">Posted on 2001-06-04 17:47:00 by Curtis Simonsen</div>
   </div>
   <div class="post" id="post-200383">
    <div class="subject"><a href="#post-200383">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body">With winsock 2.x, you can use various network protocols with winsock, not limited to IP anymore. However, if you want to work with raw socket, you need win2k: raw socket is only available under win2k.</div>
    <div class="meta">Posted on 2001-06-05 05:49:00 by Iczelion</div>
   </div>
   <div class="post" id="post-200384">
    <div class="subject"><a href="#post-200384">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body">Hi,

Icz, this is not really the truth, winpcap for example provides a virtual-NIC for using raw-packets.

http://netgroup-serv.polito.it/winpcap/

ciao</div>
    <div class="meta">Posted on 2001-06-05 18:51:00 by masta</div>
   </div>
   <div class="post" id="post-200385">
    <div class="subject"><a href="#post-200385">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body"><div class="quote">). I need to create an 'ethertype' packet for configuring
an external device on the network. I haven't found much information and curious if anyone could help me out.</div>

"Ethernet" defines the way in which hardware communicates
over the network with anoyher hardware device. As far as I know 
(plus the stack of books I checked), no commands can be sent 
with an ethernet frame by itself. 

What that means is there is another protocol that runs on top of
the Ethernet NIC driver. One or more of the following TCP/IP,
AppleTalk, IPX/SPX, NetBui, etc.

For example (abriged), I send a <request> to another computer from a software application such as Word. Word hands the request
to the OS, which hands it to TCP/IP, which breaks it into small
packets/pieces and adds a header. TCP/IP hands it to the NIC driver which adds an ethernet frame (header and CRC). It is then turned over to the hardware for transmission.

What is the device you are trying to communicate with?</div>
    <div class="meta">Posted on 2001-06-05 19:47:00 by SFinegan</div>
   </div>
   <div class="post" id="post-200386">
    <div class="subject"><a href="#post-200386">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body">If you look at the sample code that comes with both the NT and 98 DDKs, there is a sample packet driver, written in C, which it is possible to use to send anything onto the network, but to use it you need to install the extra driver.

Hope this is of use

Nick</div>
    <div class="meta">Posted on 2001-06-06 04:05:00 by Nick</div>
   </div>
   <div class="post" id="post-200387">
    <div class="subject"><a href="#post-200387">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body">SFinegan and the rest of the listening,

I do understand the "ethernet" protocol and the tcp/ip stack and how it works with software applications.  

Quote:
TCP/IP hands it to the NIC driver which adds an ethernet frame (header and CRC). It is then turned over to the hardware for transmission.

An "ethertype" packet is simply a ethernet packet with a bogus packet size in the ethernet header.  ethertypes are typically used for hardware packet filtering.  I work for a company who designed a product that uses existing power lines to network two or more computers.  The problem is that we are assuming our customers have an existing network card or customers can use the usb solution.  Either case I do not have access to a hardware driver.  In the usb scenario We are using the Microsoft binary solution--the infamous Remote Ndis drivers. One of the chips we are using is configurable through an ethertype packet (security, retrieving network stats, configuring the Mac address etc.  All the configuration information is stored in the ethernet header file. I can easily do this under Linux but I'm having a difficult time finding info creating such a packet in windows.  Any information would be greatly appreciated.  I have briefly searched through the ddk but haven't found any luck as of yet.  My company isn't very enthused about bundling wincap with our products or any other "packet driver" but we will do whatever is necessary.  I need my configuration program to work under 98/me/200/xp.  Any advice would be very helpful.

I am not familiar with Windows sockets--so please talk to me like you would a child--I assume a raw socket is used to send raw ethnet packets?? 

Thanks in advance!</div>
    <div class="meta">Posted on 2001-06-07 17:11:00 by Curtis Simonsen</div>
   </div>
   <div class="post" id="post-200388">
    <div class="subject"><a href="#post-200388">Questions regarding ''Ethertype'' in winsocks</a></div>
    <div class="body">I just want to say thanks to everyone that posted a reply. 
Take care and good luck to all of you.</div>
    <div class="meta">Posted on 2001-06-14 18:04:00 by Curtis Simonsen</div>
   </div>
  </div>
 </body>
</html>