<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Happy Thanks Giving - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16209" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=16209">Happy Thanks Giving</a></p>
   <div class="post" id="post-125762">
    <div class="subject"><a href="#post-125762">Happy Thanks Giving</a></div>
    <div class="body">I'm trying to intercept keystrokes in a simple editor. I can display the key that is until I set the focus (click) to the window. Then function no longer works until I click outside the window again?<br /><br />     invoke DefWindowProc,hWnd,uMsg,wParam,lParam<br />    .if uMsg==WM_KEYDOWN<br />    mov eax,wParam<br />    mov ebx,lParam<br />    mov regXXX,eax<br />    call DisplayregXXX<br />    invoke SendMessage,hwndEdit,WM_SETTEXT,0,key</div>
    <div class="meta">Posted on 2003-11-27 10:34:49 by mrgone</div>
   </div>
   <div class="post" id="post-125797">
    <div class="subject"><a href="#post-125797">Happy Thanks Giving</a></div>
    <div class="body">Hi, mrgone. :)<br />Well, if your window looses keyboard focus (i.e. you click on another window, do Alt-Tab, or whatever), it won't get any more keyboard messages, while the other window will. That's just the way the GUI is supposed to work.<br />If you want to catch keyboard messages for other windows in your app, you'll have to forward them. If you want messages belonging to other apps, you'll have to use a global keyboard hook.<br /><br /><a target="_blank" href="">http://www.asmcommunity.net/board/index.php?topic=14463</a> <br /><br />Hope that helps. ;)</div>
    <div class="meta">Posted on 2003-11-27 16:22:55 by QvasiModo</div>
   </div>
   <div class="post" id="post-125842">
    <div class="subject"><a href="#post-125842">Keyboard focus?</a></div>
    <div class="body">Hey Qvasi!  Actually I loose focus of keyboard inside my own window...lol. Let me check this link and see if there areany helpful hints.</div>
    <div class="meta">Posted on 2003-11-28 12:15:35 by mrgone</div>
   </div>
   <div class="post" id="post-125845">
    <div class="subject"><a href="#post-125845">Happy Thanks Giving</a></div>
    <div class="body">Your problem could be that your calling DefWindowProc first and then using eax, so what ever is in eax is being returned. You should either return the value in eax affter DefWindowproc has been called or zero (unless a specific message requires a different return value)</div>
    <div class="meta">Posted on 2003-11-28 12:23:18 by ENF</div>
   </div>
  </div>
 </body>
</html>