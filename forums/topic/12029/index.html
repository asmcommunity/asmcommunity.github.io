<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Multiple socket/threads server q - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12029" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=12029">Multiple socket/threads server q</a></p>
   <div class="post" id="post-92343">
    <div class="subject"><a href="#post-92343">Multiple socket/threads server q</a></div>
    <div class="body">I'm writing a multiple connection-server thingy .... And I'm wondering what the typical ways of communication between threads are.<br /><br />Right now I'm using a WSAWaitForMultipleEvents and PeekMessage loop: the first waits for events on a socket, and the second looks for messages posted to the thread itself. I'm using a timer on the first, but I'm wondering if this is best way to do it. Opinions wanted: would it be smarter to create another eventobject for communication between threads, and then wait for either one to get signaled?<br /><br />I was guessing that since this is probably a normal server issue, networking might be a good place to post it, even though it's not specifically networking related.<br /><br />Fake</div>
    <div class="meta">Posted on 2003-04-01 08:18:50 by Fake51</div>
   </div>
   <div class="post" id="post-92548">
    <div class="subject"><a href="#post-92548">Multiple socket/threads server q</a></div>
    <div class="body">I would use events to communicate with other threads (like you suggested). I assume you're using WSAEventSelect so events fit nicely in the model of your thread. You could also combine the event and the message queue (ie signal the event to indicate arrival of a message), that's more efficient than a timeout.<br /><br />Thomas</div>
    <div class="meta">Posted on 2003-04-02 07:43:10 by Thomas</div>
   </div>
   <div class="post" id="post-92591">
    <div class="subject"><a href="#post-92591">Multiple socket/threads server q</a></div>
    <div class="body">Yes, that's what I was thinking about, I just didn't bother creating another event for each thread, since I already had the thread id and could do a PostThreadMessage. But I guess I will change it now, seeing it will simplify my thread structure somewhat, and also make it more efficient.<br /><br />Cheers<br />Fake</div>
    <div class="meta">Posted on 2003-04-02 10:42:05 by Fake51</div>
   </div>
   <div class="post" id="post-93081">
    <div class="subject"><a href="#post-93081">Multiple socket/threads server q</a></div>
    <div class="body"><a target="_blank" href="http://www.asmcommunity.net/board/attachment.php?s=&amp;postid=76092">http://www.asmcommunity.net/board/attachment.php?s=&amp;postid=76092</a></div>
    <div class="meta">Posted on 2003-04-04 03:05:52 by IRBMe</div>
   </div>
  </div>
 </body>
</html>