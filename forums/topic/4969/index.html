<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>thread message queue - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4969" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4969">thread message queue</a></p>
   <div class="post" id="post-34894">
    <div class="subject"><a href="#post-34894">thread message queue</a></div>
    <div class="body">Hello<br />I am making program with no window, so i didnt registreted WNDCLASSEX and all that stuff about window<br /><br />but what i want is to recive a few messages directrly to main thread message  queue from my dll, <br />so AFAIK I need to send message from dll to exe using PostThreadMessage but this doesnt work, this function returns 0<br />i am not sure where is the problem becouse GetLastError after PostThreadMessage says operation is completed sucessfully<br /><br />anyway any help or source on this would be great<br />thanks</div>
    <div class="meta">Posted on 2002-04-24 16:16:21 by Mikky</div>
   </div>
   <div class="post" id="post-34987">
    <div class="subject"><a href="#post-34987">thread message queue</a></div>
    <div class="body">PSDK has the following to say about PostThreadMessage:<br /><div class="quote"><br />The function fails if the specified thread does not have a message queue. The system creates a thread's message queue when the thread makes its first call to one of the User or GDI functions. <br /></div><br />I assume that GetMessage would qualify as a User function (as it<br />is in user32.dll), but... dunno.<br /><br />If you just want to send data between threads, there are (imo) better<br />ways. You could set up a pipe, memory mapped files, or (easier<br />and better :)) some global data protected with a synchronization<br />object, like a critical section. Or event flagging if the thread only<br />has to run when there's input data.</div>
    <div class="meta">Posted on 2002-04-25 05:49:12 by f0dder</div>
   </div>
   <div class="post" id="post-35014">
    <div class="subject"><a href="#post-35014">thread message queue</a></div>
    <div class="body">yup in order to windows create my message queue on the beggining of the program I called MessageBox<br />buts not a problem<br /><br />i dont actually want to send/recive data between processes, but just a few messages that will notify my .exe program that somthing is happend in dll</div>
    <div class="meta">Posted on 2002-04-25 08:37:56 by Mikky</div>
   </div>
   <div class="post" id="post-35016">
    <div class="subject"><a href="#post-35016">thread message queue</a></div>
    <div class="body">Again.. event, CRITICAL_SECTION protected global var, or callback.<br />That's probably the easiest ways, but all of course depending on<br />your program architecture.</div>
    <div class="meta">Posted on 2002-04-25 08:42:45 by f0dder</div>
   </div>
  </div>
 </body>
</html>