<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>help me!!! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6979" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=6979">help me!!!</a></p>
   <div class="post" id="post-50498">
    <div class="subject"><a href="#post-50498">help me!!!</a></div>
    <div class="body">I'm a newbie in learning assembly language now. I'm using text The Art Of Assembly Language now.But I've met a big problem!!!<br />I can't assemble &amp; link the source file correctly.For example ,in chapter 5<br />,the Pgm5_1.asm file.I can't assemble it any way.<br />Please help me!!! Tell me why,and what should I do,please!!! :(</div>
    <div class="meta">Posted on 2002-07-28 00:44:09 by whitebird</div>
   </div>
   <div class="post" id="post-50500">
    <div class="subject"><a href="#post-50500">help me!!!</a></div>
    <div class="body">what errors do you get when assembling?</div>
    <div class="meta">Posted on 2002-07-28 01:19:02 by rkinasz</div>
   </div>
   <div class="post" id="post-50503">
    <div class="subject"><a href="#post-50503">The wrong is below</a></div>
    <div class="body">The wrong is this:<br />C:\WINDOWS&gt;cd ..\masm32<br /><br />C:\masm32&gt;ml shell.asm<br />Microsoft (R) Macro Assembler Version 6.14.8444<br />Copyright (C) Microsoft Corp 1981-1997.  All rights reserved.<br /><br /> Assembling: shell.asm<br />Microsoft (R) Incremental Linker Version 5.12.8078<br />Copyright (C) Microsoft Corp 1992-1998. All rights reserved.<br /><br />/z2<br />&quot;shell.obj&quot;<br />&quot;shell.exe&quot;<br />NUL<br />LINK : warning LNK4044: unrecognized option &quot;z2&quot;; ignored<br />LINK : error : Segment reference in fixup record<br />shell.obj : fatal error LNK1123: failure during conversion to COFF: file invalid<br /> or corrupt<br /><br />C:\masm32&gt;<br /><br /><br />The file is below:<br /><br /><br />dseg		segment	para public 'data'<br /><br />character   byte ?	<br />UnsignedIntVar   word	?<br />DblUnsignedVar		dword	?<br /><br />integer		typedef		sword<br />char		typedef		byte<br />FarPtr		typedef		dword<br /><br />J		integer ?<br />c1		char	?<br />PtrVar		FarPtr	?<br /><br />K		integer 4<br />c2		char   'A'<br />PtrVar2			FarPtr	L<br /><br />L		integer  0,1,2,3<br />c3		char		'A',0dh,0ah,0<br />PtrTb1		FarPtr		J,K,L<br /><br />string		byte		&quot;Hello world&quot;,0dh,0ah,0<br /><br /><br />dseg		ends<br /><br />cseg		segment	para public 'code'<br />		assume	cs:cseg, ds:dseg<br /><br />Main		proc<br />		mov	ax, dseg<br />		mov	ds, ax<br />		mov	es, ax<br />		<br />			lea		bx,L<br />			mov		ax,<br />			add		ax,2<br />			add		ax,4<br />			add		ax,6<br />			mul		K<br />			mov		J,ax<br /><br />			les		bx,PtrVar2<br />			mov		di,k<br />			mov		ax,es:<br /><br />			mov		c1,' '<br />			mov		al,c2<br />			mov		c3,al<br /><br /><br /><br /><br />Quit:		mov ah,4ch<br />			int	21h<br />Main		endp<br /><br />cseg		ends<br /><br />sseg		segment	para stack 'stack'<br />stk		byte	1024 dup (&quot;stack   &quot;)<br />sseg		ends<br /><br />zzzzzzseg	segment	para public 'zzzzzz'<br />LastBytes	byte	16 dup (?)<br />zzzzzzseg	ends<br />		end	Main</div>
    <div class="meta">Posted on 2002-07-28 02:01:48 by whitebird</div>
   </div>
   <div class="post" id="post-50505">
    <div class="subject"><a href="#post-50505">help me!!!</a></div>
    <div class="body">Art Of Assembly: 16bit dos code.<br />masm32 is geared for 32bit windows programs. You will have<br />to get a 16bit linker if you want to produce dos programs - and<br />you should ask yourself if you really want to do that.<br /><br />And you should not crosspost.</div>
    <div class="meta">Posted on 2002-07-28 02:33:58 by f0dder</div>
   </div>
   <div class="post" id="post-50509">
    <div class="subject"><a href="#post-50509">help me!!!</a></div>
    <div class="body">whitebird,<br /><br />f0dder is right, you need a 16 bit OMF linker to build 16 bit code, 32 bit MASM code is COFF.<br /><br />It can be downloaded at Iczelion's site or if you can find it, in the Microsoft site.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-07-28 03:20:32 by hutch--</div>
   </div>
   <div class="post" id="post-50529">
    <div class="subject"><a href="#post-50529">help me!!!</a></div>
    <div class="body">whitebird,<br />if you fire up your newsreader and point it towards the <a target="_blank" href="[u">news://microsoft.public.masm</u>]<u>news://microsoft.public.masm</u></a> group, then you will be able to talk with the author of AoA directly, as he frequents that group on a daily basis.</div>
    <div class="meta">Posted on 2002-07-28 07:45:10 by sluggy</div>
   </div>
  </div>
 </body>
</html>