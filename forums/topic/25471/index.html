<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Example of Direct3D9 used for 2D - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25471" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25471">Example of Direct3D9 used for 2D</a></p>
   <div class="post" id="post-186169">
    <div class="subject"><a href="#post-186169">Example of Direct3D9 used for 2D</a></div>
    <div class="body">I had problems with older versions of ID3DXSprite, and was angry at its newest version.. so I figured I needn&#39;t the d3dx9 tools.... And I figured it&#39;d be interesting to share the results<br /><br />Currently I&#39;ve tested it only on my crappy mobo-integrated GPU, and I haven&#39;t done benchmarks... but seems like it&#39;ll serve (me) well.. <br />I got tired of drawing+coding many sprites in several modes (normal, tinted, light-emitting) and fighting all limitations of DirectDraw.... Now just a xBltAddStretch, and it&#39;s all fine :)<br /><br />The textures are loaded in R5G6B5 or A8R8G8B8, and I&#39;m not sure if these are supported on all (non-extremely-obsolete.... ie GeForce2 or better) GPUs. <br />The size of the exe is because of the statically-linked bmp1, which is 140kB compressed... </div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2131" target="_blank">xDraw03.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-10-24 01:43:55 by Ultrano</div>
   </div>
   <div class="post" id="post-186180">
    <div class="subject"><a href="#post-186180">Re: Example of Direct3D9 used for 2D</a></div>
    <div class="body">Good stuff, if somewhat difficult to read :P<br />Was there any particular reason for choosing to use quads rather than pointsprites?<br /></div>
    <div class="meta">Posted on 2006-10-24 08:51:14 by Homer</div>
   </div>
   <div class="post" id="post-186181">
    <div class="subject"><a href="#post-186181">Re: Example of Direct3D9 used for 2D</a></div>
    <div class="body">Spritesheets, for example. I need that flexibility :) . <br /><br />Btw, I also moved to a mobo-integrated GPU.. (after my PC died.. had to give away a recently-bought R9600GE for the lack of AGP on the mobo...) And here DirectDraw isn&#39;t accelerated! While 3D is ... </div>
    <div class="meta">Posted on 2006-10-24 11:33:05 by Ultrano</div>
   </div>
   <div class="post" id="post-186184">
    <div class="subject"><a href="#post-186184">Re: Example of Direct3D9 used for 2D</a></div>
    <div class="body">I did a real-world benchmark of this engine... the results are outstanding! <br />A 1014x740 window, 32bpp, 6 spritesheets (ranging from 256x512 to 1024x256, most are in 565 format), first drawing large backgrounds, then 2500~3000 small xBlt() operations (and sometimes using xBltStretch) and several large xBltAddStretch() ractangles. Overdraw is around 60%, wasted switching between textures is around 10%. <br />Rendered at 25fps when passive, and up to 100fps when active (user drags a control with the mouse). <br /><br />Result: 0% cpu detected. <br />for a run of 2 minutes, total kernel-time is 240ms, total user-time is 40ms. 7400 context switches. <br />This on a Sempron3000+, 512MB DDR400, win2k, integrated Geforce6100. <br /><br /><br />Visual problems: lagging ~100ms when dragging around the window, but this can be the fault of the parent MDI client window&#39;s scrollbars...). But most other apps lag ~80ms when dragged here anyway.. <br /><br />Upgrading from my iDraw (DirectDraw) engine proved painless :&gt; , though I had to convert all bitmaps with magenta into 32bpp .tga . </div>
    <div class="meta">Posted on 2006-10-24 18:01:05 by Ultrano</div>
   </div>
   <div class="post" id="post-186186">
    <div class="subject"><a href="#post-186186">Re: Example of Direct3D9 used for 2D</a></div>
    <div class="body">Please could you upload your macro file.<br />Source code for pCall , UseMost and UseAll macros seems to be missing.<br /><br />It looks cool and i wanna play!&nbsp;  :)</div>
    <div class="meta">Posted on 2006-10-25 02:31:55 by Nice Eddie</div>
   </div>
   <div class="post" id="post-186193">
    <div class="subject"><a href="#post-186193">Re: Example of Direct3D9 used for 2D</a></div>
    <div class="body">These pCall, and stuff... starting to use them isn&#39;t just a &quot;copy/paste the macro and go&quot;. They&#39;re a part of my Base/BankSDK, and there you are forced to use the provided malloc/free macros, and change your coding style a bit (or maybe a lot). Imho it&#39;s all for good, since /me being the all-around-lazy-coder I&#39;ve been mastering and improving the art of &quot;typing less, getting more done&quot; for quite some time ^^. And I lose some cycles here and there (don&#39;t optimize completely), but it&#39;s for the sake of stability and sanity (what scares me the most is a 100,000-line project that just crashes inexplainably on someone&#39;s machine). <br /><br />Ah anyway, you can get the&nbsp; Bank/BaseSDK in www.ultranos.com/asm_old&nbsp; &quot;ATC2 + Bank.lib&quot; . &quot;ATC1+tutes&quot; there are a starter&#39;s guide. </div>
    <div class="meta">Posted on 2006-10-25 14:21:19 by Ultrano</div>
   </div>
  </div>
 </body>
</html>