<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Can I create both 16-bit and 32-bit application? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8387" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=8387">Can I create both 16-bit and 32-bit application?</a></p>
   <div class="post" id="post-61288">
    <div class="subject"><a href="#post-61288">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Can I create an application that starts under <br />Windows using GUI (32-bit) and under DOS as <br />16-bit console application? Now every 32-bit <br />app started under DOS writes: <br />&quot;This is a Win32 program.&quot;<br />How can I change it?<br /><br />Thanks to all, Mike</div>
    <div class="meta">Posted on 2002-10-11 03:56:08 by Mike</div>
   </div>
   <div class="post" id="post-61291">
    <div class="subject"><a href="#post-61291">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Mike,<br /><br />Yes, you can...<br />There is a part in any PE executables called the dos stub...<br />It is this dos stub that displays the &quot;This is a Win32 program.&quot; message...<br /><br />Have a look at FASM... it allows to specify a dos stub very easily... and IIRC, fasm itself uses this technique to run under dos and windows using the api...</div>
    <div class="meta">Posted on 2002-10-11 04:01:15 by JCP</div>
   </div>
   <div class="post" id="post-61301">
    <div class="subject"><a href="#post-61301">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Thank you, Radiosys. <br />But I do the same using Microsoft assembler and linker.<br />Mike</div>
    <div class="meta">Posted on 2002-10-11 06:00:08 by Mike</div>
   </div>
   <div class="post" id="post-61303">
    <div class="subject"><a href="#post-61303">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">That's example of using DOS stub.</div>
    <div class="meta">Posted on 2002-10-11 06:02:41 by Mike</div>
   </div>
   <div class="post" id="post-61306">
    <div class="subject"><a href="#post-61306">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">OR maybe you can try hand ediitng the dos stub :grin:</div>
    <div class="meta">Posted on 2002-10-11 06:33:47 by roticv</div>
   </div>
   <div class="post" id="post-61307">
    <div class="subject"><a href="#post-61307">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Yes, but you are limited in size unless to do tricky stuff... it is better to let the linker do its job imho...</div>
    <div class="meta">Posted on 2002-10-11 06:37:50 by JCP</div>
   </div>
   <div class="post" id="post-61310">
    <div class="subject"><a href="#post-61310">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">If the string you want to add is shorter than the standard windows message, then fill it with blanks. However if you want to add a longer string, you need to manually editing the offset etc and could be extremely troublesome.</div>
    <div class="meta">Posted on 2002-10-11 06:55:18 by roticv</div>
   </div>
   <div class="post" id="post-77011">
    <div class="subject"><a href="#post-77011">Hmmmm.....</a></div>
    <div class="body">This is Interesting....<br />I use RadAsm how to change the parameter. I saw a parameter /STUB:mkstub.exe, what it is do?. <br />First the prosessor read MZ and nothing happen, then CD 19 (or int 0x19) and then it is folowed with a string 'This Program cannot Run under DOS$'. I dont found any jmp instruction here.... (Let me know if you found it).:confused:<br />Is Windows Executing a 32-bit App after the '$' sign ?....<br />For Dos Program I using Emux8086.</div>
    <div class="meta">Posted on 2003-01-18 08:46:58 by realvampire</div>
   </div>
   <div class="post" id="post-77170">
    <div class="subject"><a href="#post-77170">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">&gt;/STUB:mkstub.exe, what it is do?<br />It's only one format; linker can make windows pe or com etc.<br /><br />&gt;I dont found any jmp instruction here...<br />You don't need jmp. When program works under Windows loader load windows pe,<br />otherwise under dos loading stub. There are two different programs in <br />one exe module. Please note that I use different linkers for making stub <br />and pe.<br /><br />&gt;For Dos Program I using Emux8086.<br />This dos program dont need emulator - it is 16-bit. But 32-bit dos program <br />with dos extender can works under dos and windows without any stubs.<br /><br />Mike</div>
    <div class="meta">Posted on 2003-01-19 08:24:00 by Mike</div>
   </div>
   <div class="post" id="post-77375">
    <div class="subject"><a href="#post-77375">I am Interested....</a></div>
    <div class="body"><div class="quote"><em>Originally posted by Mike </em><br />&gt;For Dos Program I using Emux8086.<br />This dos program dont need emulator - it is 16-bit. But 32-bit dos program <br />with dos extender can works under dos and windows without any stubs.<br /><br />Mike </div><br />Hmmm...<br />What is DOS extender, how to use it. Can anyone give me the Sample Code on Binary or Asm code?. I see that a Program 32-bit was Executed after PE sign, on my understanding is the loader mean The Emulator. <br />&quot;Give me some tutorial&quot;.</div>
    <div class="meta">Posted on 2003-01-20 08:46:26 by realvampire</div>
   </div>
   <div class="post" id="post-77382">
    <div class="subject"><a href="#post-77382">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">All DOS programs use small, medium, large or huge models and never flat. Why? DOS is 16-bit system. But if you add some dos extender you can execute 32-bit program with flat model under DOS. And under Windows too. You can see one example in attached file; DOS32 is name of DOS extender, you don't run it - simply start FREQ.EXE; without DOS32 you can't run it. Except all I recommend you to search in this forum for &quot;WDOSX&quot; - that's a name of another popular DOS extender and we discuss it approximately half year ago. <br /><br />Mike</div>
    <div class="meta">Posted on 2003-01-20 10:01:39 by Mike</div>
   </div>
   <div class="post" id="post-77390">
    <div class="subject"><a href="#post-77390">Wow...</a></div>
    <div class="body">Hmmmm....,<br />I have been see the code, I dont know what is port 0x43 and 0x40 used for. Hmmm...., it is use mode 0x13 ( psst...pssstt thats why it is fullscreen). NICE. I  Try to compile it with MASM but it is Crashes why?.  This code is for DOS but able to use 32-bit Register(this is strange... :confused: ). Where is the Detailed info MIKE? which website?. I should learn a lot more of DOS32 or DOS extender. :alright:</div>
    <div class="meta">Posted on 2003-01-20 11:32:26 by realvampire</div>
   </div>
   <div class="post" id="post-77391">
    <div class="subject"><a href="#post-77391">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">you can use 32bit registers even in 16bit real mode. memory addressing is &quot;somewhat&quot; different though... then of course there's voodoo/realflat/realbig/whatever_that_hack_has_been_called.</div>
    <div class="meta">Posted on 2003-01-20 11:35:04 by f0dder</div>
   </div>
   <div class="post" id="post-77550">
    <div class="subject"><a href="#post-77550">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Use &lt;tasm %1.asm&gt; and &lt;dlink %1&gt;.  Description below in attached file.<br /><br />Mike</div>
    <div class="meta">Posted on 2003-01-21 09:27:14 by Mike</div>
   </div>
   <div class="post" id="post-77555">
    <div class="subject"><a href="#post-77555">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Mike,<br /><br />Your attachment &quot;api.zip&quot; seems to be empty:it doesn't contain any file. :confused: <br /><br />Regards,<br /><br />Vortex</div>
    <div class="meta">Posted on 2003-01-21 09:46:56 by Vortex</div>
   </div>
   <div class="post" id="post-77564">
    <div class="subject"><a href="#post-77564">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Are you talking about &quot;unreal mode&quot; or the 0x66/0x67 hack :)</div>
    <div class="meta">Posted on 2003-01-21 10:57:18 by SpooK</div>
   </div>
   <div class="post" id="post-77767">
    <div class="subject"><a href="#post-77767">Can I create both 16-bit and 32-bit application?</a></div>
    <div class="body">Another copy of file.<br /><br />Mike</div>
    <div class="meta">Posted on 2003-01-22 10:11:01 by Mike</div>
   </div>
  </div>
 </body>
</html>