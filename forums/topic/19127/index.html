<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>RadAsm crash - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19127" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=42">RadASM</a> &raquo; <a href="../?id=19127">RadAsm crash</a></p>
   <div class="post" id="post-147877">
    <div class="subject"><a href="#post-147877">RadAsm crash</a></div>
    <div class="body">Module: RadASM (RadASM version 2.0.4.3)<br />Windows XP Service Pack 1<br />CPU: GenuineIntel Pentium 4 ~2.4GHz with MMX, SSE, SSE2<br />Physical memory: 1024 MB<br />Exception code: C0000005h (ACCESS_VIOLATION)<br /><br />eax=0001C543h ebx=00000000h ecx=00000023h<br />edx=00000001h esi=00200000h edi=001766CCh<br />ebp=0012F314h esp=0012F30Ch eip=00401239h<br /><br />CS=001Bh DS=0023h SS=0023h<br />ES=0023h FS=0038h GS=0<br />Flags: IF<br />Flags: IF<br />F001Bh DS=0023h SS=0023h<br />ES=0023h FS=0038h GS=0000h<br /><br />Stack:<br />00452B1A 001FFFDD 0012F33C 00401327<br />0000004D 00000000 001FFFDD 00000002<br />00453666 00000F0A 001FF010 00000198<br />0012F454 004031B6 0000004D 00000000<br /><br />---------------------------<br />last steps i remember:<br />i was editing the following line:<br /><br />call SystemParametersInfo, SPI_GETWORKAREA, edi, <br /><br />when i pressed last   ,     tooltip appeared showing arguments names for this function. i noticed that they're named diferrently than those in the SDK, so i opened radasm	asm folder and edited appropriate line in tasmApiCall.api (using notepad). i closed the notepad (saved changes), switched back to radasm, and pressed ALT+F4. radasm normally asked to write the changes in my project files. i pressed SPACE for each file (SPACE pressed the &quot;yes&quot; button). after saving last file radasm crashed with what you can see above. all files were saved properly before the crash (i checked them).</div>
    <div class="meta">Posted on 2004-08-11 00:23:57 by ti_mo_n</div>
   </div>
   <div class="post" id="post-147879">
    <div class="subject"><a href="#post-147879">RadAsm crash</a></div>
    <div class="body">Thanks for bug report.<br /><br />Did you download the lattest bugfix (2.0.4.3 Bugfix E)?<br />Maybe also check that the version of RAEdit is 1.0.5.7<br /><br />KetilO</div>
    <div class="meta">Posted on 2004-08-11 02:44:13 by KetilO</div>
   </div>
   <div class="post" id="post-147886">
    <div class="subject"><a href="#post-147886">Re: RadAsm crash</a></div>
    <div class="body">Hi KetilO,<br /><br /><div class="quote">Exception code: C0000005h (ACCESS_VIOLATION)<br />eax=0001C543h ebx=00000000h ecx=00000023h<br />edx=00000001h esi=00200000h edi=001766CCh<br />ebp=0012F314h esp=0012F30Ch eip=00401239h<br /><br />CS=001Bh DS=0023h SS=0023h<br />ES=0023h FS=0038h GS=0<br />Flags: IF<br />Flags: IF<br />F001Bh DS=0023h SS=0023h<br />ES=0023h FS=0038h GS=0000h<br /><br />Stack:<br />00452B1A 001FFFDD 0012F33C 00401327<br />0000004D 00000000 001FFFDD 00000002<br />00453666 00000F0A 001FF010 00000198<br />0012F454 004031B6 0000004D 00000000<br /></div><br /><br />How to know <strong>where</strong> is the bug or what's wrong in the program when someone send you the above information? Somebody send me the info like above about the C--IDE, I don't know how to use this info.<br />Thanks</div>
    <div class="meta">Posted on 2004-08-11 08:48:57 by QS_Ong</div>
   </div>
   <div class="post" id="post-147888">
    <div class="subject"><a href="#post-147888">RadAsm crash</a></div>
    <div class="body"><div class="quote"><br />Did you download the lattest bugfix (2.0.4.3 Bugfix E)?<br />Maybe also check that the version of RAEdit is 1.0.5.7</div><br /><br />1) no, i downloaded radasm on Aug 6th 2004 (i see that bugfix is available since Aug 08)<br />2) raedit is 1.0.5.7 (54_272 bytes)<br /><br />if you need any other info like project options etc. (the things i dont change frequently) just tell me :)<br /><br /><div class="quote"><em>Originally posted by QS_Ong</em><br /><strong>How to know where is the bug or what's wrong in the program when someone send you the above information? Somebody send me the info like above about the C--IDE, I don't know how to use this info.<br />Thanks</div><br /><br />well if you wrote something youself, then you should know which function raised an exception. as for  me - the most useful thing is EIP which shows me where the app crashed, register state, and the stac (which may show last parameters, or other stored info). i usually check if things are calculated properly up to this 'crash point', by trying to guess HOW the registers got the values they have now, and HOW stack is as it is :) the last useful info is memory dump from data sections, but unfortunately i didn't have one. as you can see there is also info about windows version, CPU, and physical memory, so the author can determine if it was windows-related bug rather than his/her own procedure.<br /><br />...at least that's what <strong>I</strong> get from such infos :P</div>
    <div class="meta">Posted on 2004-08-11 09:14:29 by ti_mo_n</div>
   </div>
   <div class="post" id="post-147900">
    <div class="subject"><a href="#post-147900">RadAsm crash</a></div>
    <div class="body">another crash :P<br /><br />Module name: RadASM (RadASM version 2.0.4.3)<br />Windows XP Service Pack. 1<br />Exception code: C0000005h (ACCESS_VIOLATION)<br />Instruction pointer: 00401239h<br /><br />eax=0001C543h ebx=00000000h ecx=00000023h<br />edx=00000001h esi=00204000h edi=001766CCh<br />ebp=0012EFC4h esp=0012EFBCh eip=00401239h<br /><br />CS=001Bh DS=0023h SS=0023h<br />ES=0023h FS=0038h GS=0Flags: IF<br />Flags: IF<br />F001Bh DS=0023h SS=0023h<br />ES=0023h FS=0038h GS=0000h<br /><br />Stack:<br />00452B1A 00203FDD 0012EFEC 00401327<br />0000004D 00000000 00203FDD 00000002<br />00453666 00000F0A 00203010 00000084<br />0012F104 004031B6 0000004D 00000000<br /><br />almost identical to the one above :P<br /><br />last steps:<br />i was editing &quot;LINK&quot; parameters, after &quot;APPLY&quot; radasm asked to restart the project. this time all files were saved, so it didnt ask to save. right after i pressed &quot;yes&quot; - stating that i want to reopen the project -- it crashed :P</div>
    <div class="meta">Posted on 2004-08-11 13:31:19 by ti_mo_n</div>
   </div>
   <div class="post" id="post-147901">
    <div class="subject"><a href="#post-147901">RadAsm crash</a></div>
    <div class="body">oh - i forgot to tell - this time i'm using LATEST radasm (downloaded today - aug 11th, 2004) :)</div>
    <div class="meta">Posted on 2004-08-11 13:33:30 by ti_mo_n</div>
   </div>
   <div class="post" id="post-147943">
    <div class="subject"><a href="#post-147943">RadAsm crash</a></div>
    <div class="body">Hi<br /><br />The bug happends when RadASM is building its wordlist. Most likely it is project dependant.<br /><br /><pre><code><br />AddWordToWordList proc uses esi edi,nType&#58;DWORD,nOwner&#58;DWORD,lpszStr&#58;DWORD,nParts&#58;DWORD<br /><br />	mov		eax,rpWordListPos<br />	add		eax,16384<br />	mov		edi,WordListSize<br />	.if eax&gt;edi<br />		add		edi,WRDMEM<br />		invoke GlobalAlloc,GMEM_MOVEABLE or GMEM_ZEROINIT,edi<br />		push	eax<br />		invoke GlobalLock,eax<br />		push	eax<br />		push	edi<br />		mov		esi,lpWordList<br />		mov		edi,eax<br />		mov		ecx,WordListSize<br />		shr		ecx,2<br />		rep movsd<br />		pop		edi<br />		invoke GlobalUnlock,hWordList<br />		invoke GlobalFree,hWordList<br />		pop		eax<br />		mov		lpWordList,eax<br />		pop		eax<br />		mov		hWordList,eax<br />		mov		WordListSize,edi<br />	.endif<br />	mov		edi,lpWordList<br />	add		edi,rpWordListPos<br />	xor		ecx,ecx<br />	mov		esi,lpszStr<br />	.if esi<br />		mov		edx,nParts<br />		.while edx<br />&#40;401239h&#41;		mov		al,&#91;esi&#93;<br />			.if al==0Dh || al==0Ah<br />				dec		esi<br />				xor		al,al<br />			.elseif al=='&#58;' &amp;&amp; nType=='S'<br />				mov		al,VK_TAB<br />			.endif<br />			mov		&#91;edi+ecx+sizeof	PROPERTIES&#93;,al<br />			.if !al<br />				dec		edx<br />			.endif<br />			inc		esi<br />			inc		ecx<br />		.endw<br />		mov		eax,nOwner<br />		mov		&#91;edi&#93;.PROPERTIES.Owner,eax<br />		mov		eax,nType<br />		mov		&#91;edi&#93;.PROPERTIES.nType,al<br />		mov		&#91;edi&#93;.PROPERTIES.nSize,ecx<br />		lea		edi,&#91;edi+ecx+sizeof	PROPERTIES&#93;<br />		mov		&#91;edi&#93;.PROPERTIES.nSize,0<br />		sub		edi,lpWordList<br />		mov		rpWordListPos,edi<br />		dec		ecx<br />	.endif<br />	mov		eax,ecx<br />	ret<br /><br />AddWordToWordList endp<br /><br /></code></pre> <br />Installing OllyDbg as a JIT debugger and disabeling RadASM's exception handler (FlipCase addin) will help<br />tracking the bug.<br /><br />KetilO</div>
    <div class="meta">Posted on 2004-08-12 04:11:18 by KetilO</div>
   </div>
   <div class="post" id="post-147962">
    <div class="subject"><a href="#post-147962">RadAsm crash</a></div>
    <div class="body">Hi KetilO,<br />Bugfix E crashes also when attempting to open a file already opened or something like that. I will try to reproduce the bug.<br /><br />Is it possible to have a question asking wheter you want the exceptions copied to clipboard or not?<br />(Last time I've lost clipboard data when an exception occurred)<br /><br />Thanks</div>
    <div class="meta">Posted on 2004-08-12 07:42:47 by pelaillo</div>
   </div>
   <div class="post" id="post-147983">
    <div class="subject"><a href="#post-147983">RadAsm crash</a></div>
    <div class="body">Hi QS_Ong,<br /><br />As you can see, <br />&lt;quote&gt;<br />Exception code: C0000005h (ACCESS_VIOLATION)<br />                              eax=0001C543h ebx=00000000h ecx=00000023h<br />                              edx=00000001h esi=00200000h edi=001766CCh<br />                              ebp=0012F314h esp=0012F30Ch eip=00401239h<br /><br />                              CS=001Bh DS=0023h SS=0023h<br />                              ES=0023h FS=0038h GS=0<br />                              Flags: IF<br />                              Flags: IF<br />                              F001Bh DS=0023h SS=0023h<br />                              ES=0023h FS=0038h GS=0000h<br /><br />                              Stack:<br />                              00452B1A 001FFFDD 0012F33C 00401327<br />                              0000004D 00000000 001FFFDD 00000002<br />                              00453666 00000F0A 001FF010 00000198<br />                              0012F454 004031B6 0000004D 00000000<br />&lt;/quote&gt;<br /><br />You need to debug the same executable with a debugger(say Olly).<br /><br />Where will you go?;<br /><br />Instruction pointer: 00401239h    &lt;- where the code crashes<br /><br />what happened?;<br /><br />ACCESS_VIOLATION    (most likely tried to write to a memory part which not initialized yet. Means address has lots of ??????????)<br /><br />What is the status of registers etc:?<br /><br />:) you have full of info. All registers, variables  on stack etc.<br /><br />Now think, what reported and what must be and WHY?<br /><br />then try to fix it. Not so easy especially if ti works well for you and/or u dont have same PC equipment and/or software. Pain in a..<br /><br />Good Luck</div>
    <div class="meta">Posted on 2004-08-12 16:41:09 by cakmak</div>
   </div>
   <div class="post" id="post-147991">
    <div class="subject"><a href="#post-147991">RadAsm crash</a></div>
    <div class="body">another crash occured while i was creating new project (exactly when i clicked &quot;finish&quot;), but i lost the clipboard data :/   i think it should be saved in some log file<br /><br />the only things i remember are that it was C0000005, and it was somewhere else than my last 2 crashes (addres ended with '7' ).</div>
    <div class="meta">Posted on 2004-08-12 18:22:00 by ti_mo_n</div>
   </div>
   <div class="post" id="post-147994">
    <div class="subject"><a href="#post-147994">another crash :P</a></div>
    <div class="body">another crash.<br /><br />from what i see - the only thing which connects these crashes is that they occur while i restart/close the project/radasm<br /><br />i attached full debug info (got it using ollydbg)</div>
    <div class="meta">Posted on 2004-08-12 19:16:45 by ti_mo_n</div>
   </div>
   <div class="post" id="post-148008">
    <div class="subject"><a href="#post-148008">RadAsm crash</a></div>
    <div class="body">Hi<br /><br />Sorry, did not help much. What I need is your ini files and your project. If your project is not something you will share, then you can e-mail it to me.<br /><br />KetilO</div>
    <div class="meta">Posted on 2004-08-13 02:38:08 by KetilO</div>
   </div>
   <div class="post" id="post-148036">
    <div class="subject"><a href="#post-148036">RadAsm crash</a></div>
    <div class="body">.ini and .api files (from radasm	asm folder)<br /><br />these are the only ones i changed<br /><br />if this won't help - i'll try to prepare my project for unclassifying :P</div>
    <div class="meta">Posted on 2004-08-13 11:53:27 by ti_mo_n</div>
   </div>
   <div class="post" id="post-148081">
    <div class="subject"><a href="#post-148081">RadAsm crash</a></div>
    <div class="body">Hi<br /><br />There is something wrong with your files (ini or api).<br />Try replacing them one by one until problem dissapears.<br /><br />KetilO</div>
    <div class="meta">Posted on 2004-08-14 08:24:35 by KetilO</div>
   </div>
  </div>
 </body>
</html>