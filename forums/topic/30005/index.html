<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Virtual-8086 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30005" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=30005">Virtual-8086</a></p>
   <div class="post" id="post-211807">
    <div class="subject"><a href="#post-211807">Virtual-8086</a></div>
    <div class="body">I wonder if anybody knows about effective address calculations in vm86. We know that we can execute 16 bits codes (real mode codes) in vm86.<br /><br />When using CS, DS, ES, SS,&nbsp; the numbers are multiplied by 16 and then are added to offset in real mode to make an effective=linear address while they are selectors in protected and have different meanings. <br /><br />The real mode code may consider some assumptions about address which may be incorrect being executed in vm86. How the real mode code is executed perfectly?&nbsp; </div>
    <div class="meta">Posted on 2010-05-22 22:11:17 by logicman112</div>
   </div>
   <div class="post" id="post-211811">
    <div class="subject"><a href="#post-211811">Re: Virtual-8086</a></div>
    <div class="body">I think the answer to that lies in &quot;virtual memory&quot;. The effective=linear address is calculated as segreg * 16 + offset, as if in real mode, but linear address != physical address. The address calculated by segreg * 16 + offset is further &quot;interpreted&quot; via page tables to discover the actual physical address (if the page is &quot;not present&quot;, we may need to &quot;page out&quot; some other memory to disk and reuse its physical address - we don&#039;t want this to happen!) My knowledge of the details of vm86 mode and paging is pretty shakey, but I think that&#039;s how &quot;protection&quot; is maintained in conjunction with a &quot;fake&quot; 16-bit addressing mode. Your book has details, no doubt. :)<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-05-23 00:04:35 by fbkotler</div>
   </div>
  </div>
 </body>
</html>