<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>ASM Program Help Needed [Simple HCF program] - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=24709" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=24709">ASM Program Help Needed [Simple HCF program]</a></p>
   <div class="post" id="post-180467">
    <div class="subject"><a href="#post-180467">ASM Program Help Needed [Simple HCF program]</a></div>
    <div class="body">Hi everyone!&nbsp; I&#39;m having a bit of difficulty with making a program for a class.&nbsp; <br />We have to use Euclid&#39;s algorithm for find the HCF (Highest Common Factor) for two multi-digit numbers.<br />The program has to prompt the user for the two inputs, then waits till the user presses enter to proceed.<br /><br />The code that I have is for 1-digit, and doesn&#39;t wait for an enter key.<br /><br /><br />Here is my code so far.<br /><br /><pre><code><br />.model small<br />.stack 200h<br />.data<br /> welcome db &#39;Henry&#39; 0842&#39;, 0Ah, 0Dh, &#39;Euclids Algorithm&#39;, 0Ah, 0Dh, &#39;$&#39;<br /> prompt2&nbsp; db 0Ah, 0Dh, &#39;Please type the first integer $&#39;<br /> prompt3&nbsp; db 0Ah, 0Dh, &#39;Please type the second integer $&#39;<br /> prompt4&nbsp; db 0Ah, 0Dh, &#39;The HCF is $&#39;<br /> goodbye&nbsp; db 0Ah, 0Dh, &#39;quiting now$&#39;<br />.code<br /> <br /> mov dx, @data<br /> mov ds, dx<br /> <br /> mov dx, offset welcome <br /> mov ah, 9d&nbsp; <br /> int 21h&nbsp;  <br /> <br /> ;begin algorithm by reading in two 1-digit integers<br /> ;print the prompt first, using BIOS code &#39;9d&#39;<br /> mov dx, offset prompt2<br /> mov ah, 9d<br /> int&nbsp; 21h<br /> <br /> ;now get the keystroke<br /> mov ah, 1d&nbsp; ;BIOS code for read a keystroke<br /> int 21h&nbsp; ;invoke BIOS, ASCII code will be in register &#39;al&#39; after this command<br /> ;save the keystroke in register &#39;cl&#39;<br /> ;after we get the integer value from the ASCII code<br /> ;by subtracting hex 30 from the ASCII code value<br /> sub al, 30h<br /> mov cl,al<br /> <br /> ;now read the second integer as above<br /> ;first print the prompt using BIOS code &#39;1d&#39;<br /> mov dx, offset prompt3 ;set the offset for DS::DX<br /> mov ah, 9d&nbsp; ;set BIOS code<br /> int 21h&nbsp; ;invoke BIOS<br /> <br /> mov ah, 1d&nbsp; ;BIOS code for read a keystroke<br /> int 21h&nbsp; ;invoke BIOS, ASCII code will be in register &#39;al&#39; after this command<br /> sub ah, 30h<br /> ; we now have two integers, actual values not ASCII codes, one in &#39;cl&#39; and the other in &#39;al&#39;<br /> <br /><br />repeat: <br /> cmp cl, al&nbsp; ;compare the two integers<br /> jz print_and_exit ;print the result and return control to operating system<br /> ;if here, the two numbers were **NOT** the same<br /> ;note that the flags are still set from the compare statement, but it&#39;s probably wise to do another<br /> ;one in case we change or edit the file.<br /> cmp cl, al<br /> jg greater ;test to see if cl &gt; al, and if it is, jump to label &#39;greater&#39;<br /> ;OK, so if we get to here, cl **must** be less than (&lt;) al<br /> sub al, cl&nbsp; ;diminish &#39;al&#39; by &#39;cl&#39;<br /> jmp repeat ;go round the loop until the variables become equal<br /> <br />greater:<br /> ;if we get here, it was shown that cl &gt; al, so diminish &#39;cl&#39;<br /> sub cl, al<br /> jmp repeat ;go round the loop until the variables become equal<br /> <br /><br />print_and_exit:<br /> ;there&#39;s only one way to get here and that&#39;s when the integers are equal<br /> ;so print and then we&#39;re done.<br /> <br /> ;first the prompt<br /> mov dx, offset prompt4<br /> mov ah, 9d ;BIOS code for print a string<br /> int 21h<br /> <br /> ;last, the actual result<br /> mov ah, 2d ;BIOS code for print to screen<br /> ;character&#39;s ASCII code must be in &#39;dl&#39; for this to work<br /> mov dl, cl ;starting to print &#39;cl&#39;s value<br /> add dl, 30h ;convert value to ASCII code<br /> int 21h<br /><br />mov dx, offset goodbye<br />mov ah, 9d<br />int 21h<br /> <br /> mov ah, 4ch ;BIOS code for exit/quit<br /> int&nbsp; 21h<br /> <br />end</code></pre><br /><br />My teacher gave me a hint<br /><div class="quote">When you have a multiple digit answer to the HCF algorithm, it is quite easy to extract and print the digits.&nbsp; Use DIV.&nbsp; Say your answer is 123.&nbsp; Divide by 100 and you&#39;ll get a quotient of 1 with remainder 23.&nbsp; That&#39;s your first digit.&nbsp; Take the 23 and divide by 10, you&#39;ll get a quotient of 2 remainder 3.&nbsp; That&#39;s your second and third digits extracted.&nbsp; Add 30 tpo convert to ASCII and print.</div><br /><br /><br />Can anyone lead me in the right direction?&nbsp; I&#39;ve looked in a few books but they are not really helping.&nbsp; <br />I&#39;m using TASM that runs in ms-dos from windows to compile and run this.<br /><br />Thanks a lot!</div>
    <div class="meta">Posted on 2006-05-06 21:55:07 by henry95</div>
   </div>
   <div class="post" id="post-180470">
    <div class="subject"><a href="#post-180470">Re: ASM Program Help Needed [Simple HCF program]</a></div>
    <div class="body">Well you can take a look at http://www.asmcommunity.net/board/index.php?topic=24594.0</div>
    <div class="meta">Posted on 2006-05-06 22:27:21 by roticv</div>
   </div>
  </div>
 </body>
</html>