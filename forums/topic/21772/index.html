<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MOUSEHOOKSTRUCT - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21772" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21772">MOUSEHOOKSTRUCT</a></p>
   <div class="post" id="post-164287">
    <div class="subject"><a href="#post-164287">MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,All<br /><br /><div class="quote">	MOUSEHOOKSTRUCT STRUCT<br />	&nbsp; pt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; POINT&nbsp; &nbsp; &nbsp; &lt;&gt;<br />	&nbsp; hwnd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DWORD&nbsp; &nbsp; &nbsp; ?<br />	&nbsp; wHitTestCode&nbsp; DWORD&nbsp; &nbsp; &nbsp; ?<br />	&nbsp; dwExtraInfo&nbsp;  DWORD&nbsp; &nbsp; &nbsp; ?<br />	MOUSEHOOKSTRUCT ENDS</div><br /><br />i&#39;v known use the MOUSEHOOKSTRUCT to get the mouse&#39;s x, y coordinates, but i don&#39;t know how get the mouse&#39;s LBUTTONDOWN,LBUTTONUP at same time.<br /><br />could you anybody help me?<br /><br />regards</div>
    <div class="meta">Posted on 2005-09-06 11:23:54 by dcskm4200</div>
   </div>
   <div class="post" id="post-164321">
    <div class="subject"><a href="#post-164321">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">dcskm4200,<br />&nbsp; &nbsp;  Look at WM_MOUSEMOVE.&nbsp; It gives cursor coordinates and mouse keys status at the same time. Same thing with WM_LBUTTONDOWN, WM_LBUTTONUP, and all the other mouse status key messages.&nbsp; Ratch</div>
    <div class="meta">Posted on 2005-09-06 23:41:28 by Ratch</div>
   </div>
   <div class="post" id="post-164322">
    <div class="subject"><a href="#post-164322">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,Ratch<br />Thanks you for response.<br /><br />if I use the WM_LBUTTONDOWN,WM_LBUTTONUP... I can&#39;t get any message when the mouse is outside the window. F-four gave us an example in KMD16, but the example can&#39;t work with USB port&#39;s Mouse.<br /><br />regards</div>
    <div class="meta">Posted on 2005-09-07 00:35:30 by dcskm4200</div>
   </div>
   <div class="post" id="post-164342">
    <div class="subject"><a href="#post-164342">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">dcskm4200,<br /><br />     You need to catch the rodent with the SetCapture API.  Then all messages from it will be sent to your thread regardless of where it wanders.  RWA</div>
    <div class="meta">Posted on 2005-09-07 10:55:46 by Ratch</div>
   </div>
   <div class="post" id="post-166047">
    <div class="subject"><a href="#post-166047">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,Ratch<br /><br />Thanks you for respose.<br /><br />i did&#39;t know how use the SetCapture.<br />plz help me.<br /><br />regards</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=965" target="_blank">m_2.rar</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-09-17 07:18:15 by dcskm4200</div>
   </div>
   <div class="post" id="post-166048">
    <div class="subject"><a href="#post-166048">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">dcskm4200,<br />&nbsp; &nbsp;  Easy to use.&nbsp; Look in the API documentation.&nbsp; Ratch</div>
    <div class="meta">Posted on 2005-09-17 07:37:03 by Ratch</div>
   </div>
   <div class="post" id="post-166049">
    <div class="subject"><a href="#post-166049">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">hello,Ratch<br /><br />it is easy to you, difficult to me. I&#39;v already read the SetCapture documentation. source code is there, Plz modify it.<br /><br />regards</div>
    <div class="meta">Posted on 2005-09-17 07:43:32 by dcskm4200</div>
   </div>
   <div class="post" id="post-166061">
    <div class="subject"><a href="#post-166061">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">dcskm4200,<br />     Enclosed is a ZIP file of a program from chapter 7 of Charles Petzold&#39;s book <u>Programming Windows</u>, 5th edition.  I converted it from its C source to MASM.  I included Petzold&#39;s C source and executable also.  Everything you need to build my MASM version is included.  Hold down the left mouse key and drag it around.  After releasing the button, you will see a black rectangle.  Notice that the mouse controls the rectangle even if the mouse if it is moved outside the client window.  You can comment out the lines of code line pertaining to mouse capture and release capture.  They are designated with a ########## in the comment field.  You will then notice that the rectangle does not move if the mouse is moved outside the client window.  Also notice the difference in size between the MASM version and the C version executable.  Ask if you have any questions.&nbsp; Ratch</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=966" target="_blank">BLOKOUT.ZIP</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-09-18 03:56:35 by Ratch</div>
   </div>
   <div class="post" id="post-166062">
    <div class="subject"><a href="#post-166062">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,Ratch<br /><br />thanks you very much.<br />This is the needness what i want.<br /><br />regards</div>
    <div class="meta">Posted on 2005-09-18 06:59:19 by dcskm4200</div>
   </div>
   <div class="post" id="post-166101">
    <div class="subject"><a href="#post-166101">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,Ratch<br /><br />I used two days for understanding your code. i&#39;m still mazing.<br />Hutch-- has written a code in attachment.<br /><br />question:<br />1. the window system can&#39;t react any action when mouse is outside the client window, Only the client exe can react some actions.<br />2. if the client exe read the mouse coordinates, the mouse coordinates should be read in the screen, no the client window.<br /><br />regards&nbsp;  <br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=969" target="_blank">t_3.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-09-19 08:51:01 by dcskm4200</div>
   </div>
   <div class="post" id="post-166102">
    <div class="subject"><a href="#post-166102">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">dcskm4200,<br />&nbsp; &nbsp;  What are your questions?&nbsp; Ratch</div>
    <div class="meta">Posted on 2005-09-19 09:29:18 by Ratch</div>
   </div>
   <div class="post" id="post-166114">
    <div class="subject"><a href="#post-166114">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,Ratch<br /><br />sorry for my poor English. I did not give you an accurate expression of my question. <br /><br />I want to write a simple code like as the professional windows screen capture utility( ACS Capture 2.0 )<br /><br />regards<br /></div>
    <div class="meta">Posted on 2005-09-20 01:24:50 by dcskm4200</div>
   </div>
   <div class="post" id="post-166120">
    <div class="subject"><a href="#post-166120">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body"><br /><br />&nbsp; &nbsp;  <div class="quote"><br />question:<br />1. the window system can&#39;t react any action when mouse is outside the client window, Only the client exe can react some actions.<br />2. if the client exe read the mouse coordinates, the mouse coordinates should be read in the screen, no the client window.<br /><br />sorry for my poor English. I did not give you an accurate expression of my question. <br />I want to write a simple code like as the professional windows screen capture utility( ACS Capture 2.0 )<br /><br /></div><br /><br />dcskm4200 ,<br />&nbsp; &nbsp;  What are your questions?&nbsp; I know nothing about the program you mentioned.&nbsp; Ratch</div>
    <div class="meta">Posted on 2005-09-20 10:24:39 by Ratch</div>
   </div>
   <div class="post" id="post-166122">
    <div class="subject"><a href="#post-166122">Re: MOUSEHOOKSTRUCT</a></div>
    <div class="body">Hello,Ratch<br /><br />1. <br />I hope your BLOKOUT.exe which can display the selected Rectangle&#39;s parameters ( Rct.left,Rct.top,Rct.right,Rct.bottom ) in the caption of BLOKOUT.exe, whether the mouse is any position. <br /><br />2. <br />while your BLOKOUT.exe is running, if the mouse is outside the client window, I hope the mouse do nothing besides it can select the Rectangle.<br /><br />the question is that BLOKOUT.exe can&#39;t do the thing which I hope. or How i modify the BLOKOUT.ASM to do the above thing?<br /><br />regards<br /></div>
    <div class="meta">Posted on 2005-09-20 11:08:21 by dcskm4200</div>
   </div>
  </div>
 </body>
</html>