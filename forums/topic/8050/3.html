<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Build the entire .exe manually??? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8050" />
  <link rel="prev" href="../?id=8050&amp;page=2" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=8050">Build the entire .exe manually???</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=8050&amp;page=1" style="">&laquo;</a><a href="../?id=8050&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="8050" /><input type="number" name="page" min="1" max="3" step="1" value="3" onchange="this.form.submit();" /></form>   <div class="post" id="post-102581">
    <div class="subject"><a href="#post-102581">Build the entire .exe manually???</a></div>
    <div class="body">If you really must use align, use /FILEALIGN and not /ALIGN . And before making statements about which OSes support these files and which don't, perhaps you should check your facts.</div>
    <div class="meta">Posted on 2003-05-12 02:34:35 by f0dder</div>
   </div>
   <div class="post" id="post-102608">
    <div class="subject"><a href="#post-102608">Build the entire .exe manually???</a></div>
    <div class="body">At the end of his PE tutorial, Luevelsmeyer writes:<br /><br /><em>Alas, this works on NT but didn't on windows 95. windows95 can't run<br />applications with a section alignment of 32 bytes, it needs an<br />alignment of 4 KB and, apparently, a file alignment of 512 bytes. So for<br />windows95 you'll have to insert a large number of 0-bytes (for padding)<br />and adjust the RVAs. Thanks go to D. Binette for testing on windows95.</em><br /><br />In his article on <a target="_blank" href="http://msdn.microsoft.com/msdnmag/issues/02/02/PE/default.aspx">http://msdn.microsoft.com/msdnmag/issues/02/02/PE/default.aspx</a> Matt Pietrek writes:<br /><br /><em>An interesting linker feature is the ability to merge sections. If two sections have similar, compatible attributes, they can usually be combined into a single section at link time. This is done via the linker /merge switch. For instance, the following linker option combines the .rdata and .text sections into a single section called .text:<br />/MERGE:.rdata=.text</em><br /><br />All things I've written was grabbed from the web!<br /><br />However I think you have reason when you say <em>If you really must use align, use /FILEALIGN and not /ALIGN</em></div>
    <div class="meta">Posted on 2003-05-12 06:28:01 by Benji</div>
   </div>
   <div class="post" id="post-102612">
    <div class="subject"><a href="#post-102612">Build the entire .exe manually???</a></div>
    <div class="body">LuevelMeyers stuff is old. NT4/win95. Do some tests on other NT and 9x flavours, you'll see.<br /><br />Merging works (though you should do careful testing if you merge resources). Also, if you merge code and data, your code section loses the nice read-only property.<br /><br /><div class="quote"><br />All things I've written was grabbed from the web!<br /></div><br />As if that guaranteed it's correctness ;)<br /><br />And yes, there's good reason for using /filealign instead of /align . Like, /align will cause relocation trouble with values &lt; 4096.</div>
    <div class="meta">Posted on 2003-05-12 07:27:53 by f0dder</div>
   </div>
   <div class="post" id="post-102617">
    <div class="subject"><a href="#post-102617">Build the entire .exe manually???</a></div>
    <div class="body">thank you!<br />btw, can you say me where can I find a good and recent :grin: PE tutorial? unfortunately all tutes I have are obsolete :-(<br /><br />PS: I thought (I hoped) that Luevelsmeyer and Pietrek were reliable :-) I will have to test all the programs on more operating systems :-S</div>
    <div class="meta">Posted on 2003-05-12 10:01:03 by Benji</div>
   </div>
   <div class="post" id="post-102703">
    <div class="subject"><a href="#post-102703">hi</a></div>
    <div class="body">I think We should first try to made a DOS exe first. It only 32-Byte Header, more easy to remember. I can build a COM file bare handed, and it working properly. But My exe generate exception on my windows &quot;Invalid Win32 blah2x...&quot; ( Honestly, the invalid message is &quot;Idiot Win32 Coder&quot; :Grin: I heard Hutch did the same thing too 5 Years ago :Grin:).</div>
    <div class="meta">Posted on 2003-05-12 22:13:01 by realvampire</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=8050&amp;page=1" style="">&laquo;</a><a href="../?id=8050&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="8050" /><input type="number" name="page" min="1" max="3" step="1" value="3" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>