<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>AGE v0.1 is now ready - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20106" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=20106">AGE v0.1 is now ready</a></p>
   <div class="post" id="post-154047">
    <div class="subject"><a href="#post-154047">AGE v0.1 is now ready</a></div>
    <div class="body">Hi all,<br /><br />AGE (Adventure Game Engine) v0.1 is now ready.<br /><br />I've banged out a lot of code today (because I'm headed out of town tomorrow<br />and won't be able to work on this for another week) and I've just uploaded<br />a new version of age.zip to Webster (http://webster.cs.ucr.edu/adv.zip)<br /><br />This version is actually complete enough that people can start producing<br />simple games with it, if they can figure out the code from the samples I've provided.<br />Indeed, I've initialized a simple nine-room maze with three objects you can pick<br />up and drop.  Active commands are:<br /><br />go {north, south, east, west}<br />get {knife, key, diamond}<br />drop {knife, key, diamond}<br />describe<br />inventory<br />score<br />hint<br />help<br />save<br />quit<br /><br />The parser is really trivial right now -- just the two-word commands<br />like the original adventure game (collosal cave). I'll update the parser<br />when I've got a little bit more of the scaffolding code filled in.<br /><br /><br />Here is the current verb list that the code supports:<br /><br />go<br />run<br />walk<br />move<br />climb<br />transport<br />rest<br />crawl<br />sit<br />stand<br />enter<br />inventory<br />look<br />examine<br />read<br />light<br />extinguish<br />fight<br />flee <br />use<br />get<br />drop<br />give<br />steal<br />throw<br />eat<br />buy<br />sell<br />trade<br />break<br />repair<br />turn<br />push<br />pull<br />open<br />close<br />talk<br />pray<br />search<br />describe<br />score<br />hint<br />help<br />save<br />quit<br /><br />There are &quot;verb_*&quot; routines for each one of these verbs.<br />Most of them are empty at this point (they never get called<br />because you have to attach a verb to a noun in order to<br />use that verb in the game and I've only attached<br />go, get, drop, describe, score, hint, help, save, and quit<br />to the nouns I've created.  Note that although you can &quot;save&quot;<br />a game, I've yet to write the methods to read the data back<br />in. That's a bit more complex and I'll have to deal with that<br />when I get back into town.<br /><br />The verbs are very easy to extend. Just add a string to a<br />header file (add this to the  verbStrs_c  string array constant)<br />and write a &quot;verb_&lt;your verb name&gt;&quot; procedure<br />and you're in business. HLA compile-time language code<br />automatically generates an enumerated type and a procedure<br />prototype for your new verb in the age.hhf header file.<br /><br />Adding nouns is not quite as automatic. Indeed, this is currently<br />a manual operation.  You'll need to edit the nounValues_t<br />enumerated data type in age.hhf, and call an appropriate<br />&lt;noun|physObj|possession|container|room|player&gt;.create<br />method to create the noun object in the initializeGame procedure.<br />You'll also want to call the specific initialization routine for that<br />particular class object in order to initialize all the fields of the<br />noun object you create. Finally, you need to attach any<br />verbs that act upon the noun to the noun object. The initializeGame<br />procedure contains several examples of this, so take a look<br />at that code.<br /><br />Here is the code, for example, that I use to initialize a &quot;knife&quot;<br />object in the game:<br /><br /> // Create and distribute some &quot;possessions&quot; that<br /> // the player can pick up and drop.<br /> //<br /> // Create knife and put it in room #2:<br /> <br /> possession.create( &quot;knife&quot; );        // This creates the knife object.<br /> mov( esi, knife );<br /> possessionESI.initPossession    // Possession-specific initialization for knife<br /> (<br />  &quot;knife&quot;,<br />  &quot;A sharp, shiny, knife&quot;,<br />  1.0,<br />  1.0<br /> );<br /> mov( n_knife, nounESI.nounValue );    // Unique value for this knife<br /><br />// Activate the get and drop verbs for the knife<br /><br /> mov( &amp;verb_get, nounESI.actions[ uns32( v_get )*4 ] );<br /> mov( &amp;verb_drop, nounESI.actions[ uns32( v_drop )*4 ] );<br /><br /> // Attach the knife to room #2:<br /> <br /> mov( room2, esi );<br /> mov( roomESI.contains, esi );<br /> mov( knife, eax );<br /> mov( possessionEAX.possessionObjNode, eax );<br /> (type objList ).append_last(  );  <br /><br />Using the code above as a template, you can create<br />any number of &quot;possession&quot; objects (possession objects<br />are those that a player, room, or other container object<br />can possess.<br /><br /><br />Here is the current object hierarchy:<br /><br />object -&gt; noun -&gt; physObj -&gt; possession<br />                              |<br />                              +&gt; container -&gt; room<br />                                         |<br />                                         +&gt; player<br /><br />objects are the basic objects in the system.<br />They have a name assocated with them, you can read or write<br />them, and do a few other primitive operations on them.<br /><br />nouns are things that can be used as the 'noun' portion of a command.<br />They are generally abstract objects (such as &quot;north&quot; or &quot;south&quot;)<br /><br />physObj object are concrete objects. These objects may be contained<br />within another (container) object, but if they appear in that container, they<br />are immoveable.<br /><br />possessions are concrete objects that can be possessed. That is,<br />their ownership can change and they can be moved around.<br />Generally, you use verbs like &quot;get&quot; and &quot;put&quot; to obtain or release<br />possessions.<br /><br />A container is an object that can hold other objects.<br /><br />A room is a special case of a container object. This object forms<br />the rooms in the game's maze.<br /><br />A player is another special kind of container object. This is the<br />person playing the game (you could have multiple players, btw).<br /><br /><br />All of the strings (hopefully) are in equates in a header file<br />or in the initializeGame procedure, so it should be real easy<br />to translate the text from English to another language.<br /><br />The current demo game doesn't have any scoring or logic<br />associated with it. I'll leave that up to industrious game<br />designers to worry about. However, it's quite easy to<br />extend the classes to maintain this information.<br /><br />To build AGE, download and unzip the file at<br />http://webster.cs.ucr.edu/adv.zip<br /><br />You will need HLA v1.73 and some form of make program.<br />I've built AGE under Windows, but it *should* build under Linux<br />as well (no special coding that I'm aware of). However, I've yet<br />to do a Linux build, so there may be a few minor gotchas here<br />or there.  Note that the source files contain cr/lf line endings.<br />Shouldn't be a problem with HLA, but you never know.<br /><br />If you unzip all of the files into a directory (say, &quot;AGE&quot;),<br />just CD into that directory and type &quot;make&quot;.<br />This should assemble the code just fine under Windows.<br />(Linux users *will* need to create a new make file that<br />is compatible with Linux -- the existing make file is definitely<br />a Windows job).<br /><br />Alternately, you could compile the whole project at once<br />by simply typing<br /><br />hla age ageobjs agesupport actions objlist<br /><br />from the command line (Windows or Linux).<br /><br />age.hla is the main program. This contains the<br />&quot;initializeGame&quot; procedure where you will build your game.<br /><br />ageobjs.hla contains the methods and procedures for all of the<br />classes in this game. There are a few empty routines in<br />this file you may want to fill in to extend the class' capabilities<br /><br />agesupport.hla is just a few utility routines.<br /><br />objlist.hla is another class methods/procedures file for the<br />list and objNode classes (used for lists of objects).<br /><br />The actions.hla file is where most of the work remains<br />to be done. This file contains verb procedures for all<br />the verbs that AGE supports. Most of these routines<br />are empty and you'll need to supply code to provide<br />whatever functionality you want for your game.<br /><br />Enjoy, I'll be back in a week and do some more work on it.<br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2004-12-12 20:30:16 by rhyde</div>
   </div>
  </div>
 </body>
</html>