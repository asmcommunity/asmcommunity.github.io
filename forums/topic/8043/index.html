<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>hitch's latest example in DX for MASM32 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8043" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=8043">hitch's latest example in DX for MASM32</a></p>
   <div class="post" id="post-58796">
    <div class="subject"><a href="#post-58796">hitch's latest example in DX for MASM32</a></div>
    <div class="body">hitch (the MASMED man) just sent me this really great demo of DirectDraw that works in win95b on DX7 in MASM32 for the example code but I did not want to hold it without it being shared around so I thought it better to post it now.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-09-20 01:07:03 by hutch--</div>
   </div>
   <div class="post" id="post-58812">
    <div class="subject"><a href="#post-58812">hitch's latest example in DX for MASM32</a></div>
    <div class="body">Cool, I'm trying to figure out DX7 support right now.  (Just what type is REFIID?)</div>
    <div class="meta">Posted on 2002-09-20 03:16:31 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-58817">
    <div class="subject"><a href="#post-58817">hitch's latest example in DX for MASM32</a></div>
    <div class="body">That's great....<br /><br />Works fine on WinXP too......</div>
    <div class="meta">Posted on 2002-09-20 03:37:11 by Fordy</div>
   </div>
   <div class="post" id="post-58826">
    <div class="subject"><a href="#post-58826">hitch's latest example in DX for MASM32</a></div>
    <div class="body">fine on NT4SP6 too ... great example !!<br /><br />cya<br />TBD</div>
    <div class="meta">Posted on 2002-09-20 04:36:49 by TBD</div>
   </div>
   <div class="post" id="post-58859">
    <div class="subject"><a href="#post-58859">hitch's latest example in DX for MASM32</a></div>
    <div class="body">I for the life of me can not get this to assemble:<br /><br /><pre><code><br />h&#58;\includes\DDrawConst.inc&#40;106&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDPIXELFORMAT<br />h&#58;\includes\DDrawConst.inc&#40;112&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDPIXELFORMAT<br />h&#58;\includes\DDrawConst.inc&#40;120&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDPIXELFORMAT<br />h&#58;\includes\DDrawConst.inc&#40;124&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDPIXELFORMAT<br />h&#58;\includes\DDrawConst.inc&#40;127&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDPIXELFORMAT<br />h&#58;\includes\DDrawConst.inc&#40;137&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;141&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;142&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;143&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;144&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;145&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;146&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;147&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;148&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;149&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDSURFACEDESC<br />h&#58;\includes\DDrawConst.inc&#40;197&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;200&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;202&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;206&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;207&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;208&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;210&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;213&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;215&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;223&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;224&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;225&#41; &#58; error A2163&#58; non-benign structure redefinition<br />&#58; incorrect initializers &#58; DDBLTFX<br />h&#58;\includes\DDrawConst.inc&#40;290&#41; &#58; error A2161&#58; non-benign structure redefinition<br />&#58; too few labels &#58; IDirectDrawSurfaceVtbl<br />h&#58;\includes\Animate.asm&#40;274&#41; &#58; error A2006&#58; undefined symbol &#58; SLock<br /> DDSINVOKE&#40;6&#41;&#58; Macro Called From<br />  h&#58;\includes\Animate.asm&#40;274&#41;&#58; Include File<br />h&#58;\includes\Animate.asm&#40;278&#41; &#58; error A2006&#58; undefined symbol &#58; SLock<br /> DDSINVOKE&#40;6&#41;&#58; Macro Called From<br />  h&#58;\includes\Animate.asm&#40;278&#41;&#58; Include File<br />h&#58;\includes\DDrawExeInit.asm&#40;4&#41; &#58; error A2006&#58; undefined symbol &#58; SLock<br /> DDSINVOKE&#40;6&#41;&#58; Macro Called From<br />  h&#58;\includes\DDrawExeInit.asm&#40;4&#41;&#58; Include File<br />h&#58;\includes\DDrawExeInit.asm&#40;145&#41; &#58; error A2006&#58; undefined symbol &#58; SLock<br /> DDSINVOKE&#40;6&#41;&#58; Macro Called From<br />  h&#58;\includes\DDrawExeInit.asm&#40;145&#41;&#58; Include File<br /></code></pre><br /><br />I've reworked all the paths so no file are missing and I'm using the same assembly lines:<br /><br /><pre><code><br />e&#58;\masm32\bin\ml.exe /c /coff h&#58;\DirectDraw.asm<br />e&#58;\masm32\bin\link.exe /SUBSYSTEM&#58;WINDOWS h&#58;\DirectDraw.obj<br /></code></pre><br /><br />Any ideas??   Heres where the errors are:(some of them)<br /><br /><pre><code><br />DDPIXELFORMAT		STRUC<br />dwSize			DWORD	?<br />dwFlags			DWORD	?<br />dwFourCC		DWORD	?<br />UNION<br />dwRGBBitCount		DWORD	?    ;&lt;here is the first error line106<br />dwYUVBitCount		DWORD	?<br />dwZBufferBitDepth	DWORD	?<br />dwAlphaBitDepth		DWORD	?<br />ENDS<br />UNION<br />dwRBitMask		DWORD	?    ;&lt;-then here<br />dwYBitMask		DWORD	?<br />ENDS<br />UNION<br />dwGBitMask		DWORD	?<br />dwUBitMask		DWORD	?<br />ENDS<br />UNION<br />dwBBitMask		DWORD	?   ;&lt;-then here<br />dwVBitMask		DWORD	?<br />ENDS<br />UNION<br />dwRGBAlphaBitMask	DWORD	?                   ;&lt;-then here<br />dwYUVAlphaBitMask	DWORD	?<br />ENDS<br />DDPIXELFORMAT		ENDS            ;&lt;-the last is here<br /></code></pre><br />Thats the errors for DDPIXELFORMAT, if the fix can be found, everything should work.<br /><br />Thanks.</div>
    <div class="meta">Posted on 2002-09-20 08:04:25 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-58877">
    <div class="subject"><a href="#post-58877">hitch's latest example in DX for MASM32</a></div>
    <div class="body">Still have not figured this out.<br /><br />I unzipped it into the MASM32 folder, but I still get errors?  <br />I have made no changes, not even to the paths.<br />I have gone back to the ml.exe that comes with MASM32<br />I get a different error in addition to the ones I already get:<br /><pre><code><br />includes\DDrawConst.inc&#40;105&#41; &#58; error A2187&#58; must use floating-point initializer<br />includes\DDrawConst.inc&#40;109&#41; &#58; error A2187&#58; must use floating-point initializer<br />includes\DDrawConst.inc&#40;111&#41; &#58; error A2187&#58; must use floating-point initializer<br />includes\DDrawConst.inc&#40;113&#41; &#58; error A2187&#58; must use floating-point initializer<br />includes\DDrawConst.inc&#40;115&#41; &#58; error A2187&#58; must use floating-point initializer<br />.<br />.<br /></code></pre><br />Before the, with the newer version of ML, the first error was on line 106.<br /><pre><code><br />DDPIXELFORMAT		STRUC<br />dwSize			DWORD	?<br />dwFlags			DWORD	?<br />dwFourCC		DWORD	?<br />UNION                 &lt;-----------------------------------------here is line 105 in the source   <br />dwRGBBitCount		DWORD	?<br />dwYUVBitCount		DWORD	?<br />dwZBufferBitDepth	DWORD	?<br />dwAlphaBitDepth		DWORD	?<br />ENDS<br />.<br />.<br />.<br /><pre><code><br /><br />Again, I have made no changes to the source of this latest attempt.<br /><br />Thanks.<br /><br /><br />Heres the error code:<br />must use floating point initializer<br /><br />ML Nonfatal Error A2187<br />A variable declared with the REAL4, REAL8, and REAL10 directives must be initialized with a floating-point number or a question mark (?).</div>
    <div class="meta">Posted on 2002-09-20 11:12:06 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-58878">
    <div class="subject"><a href="#post-58878">hitch's latest example in DX for MASM32</a></div>
    <div class="body">Ahhhh frick, just figued is out.  I had backedup the ddraw.inc that comes with MASM32 for the ddraw.inc that the macros were borrowed from.  <br /><br />So It works fine on W2K sp2.  ('cept for the video lines being all messed up)(I just played UT2003<strong>beta</strong>, so maybe that could be it.  Well, I'm happy that I can compile it.  Now I can have fun rebooting and debugging it if it still does not  work right :alright:<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />hrmmmm seems I must add window mode support first.....</div>
    <div class="meta">Posted on 2002-09-20 11:22:19 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-58882">
    <div class="subject"><a href="#post-58882">hitch's latest example in DX for MASM32</a></div>
    <div class="body">There must be something wrong with my Radeon Card drivers, this demo just won't display properly. Anyone have any ideas.</div>
    <div class="meta">Posted on 2002-09-20 12:15:52 by Eóin</div>
   </div>
   <div class="post" id="post-58896">
    <div class="subject"><a href="#post-58896">hitch's latest example in DX for MASM32</a></div>
    <div class="body">I think you have the same problem as me, but I use Geforce.  I'm dling the latest drivers.<br /><br />It looks like an alignment or pointer error.</div>
    <div class="meta">Posted on 2002-09-20 13:47:18 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-58956">
    <div class="subject"><a href="#post-58956">hitch's latest example in DX for MASM32</a></div>
    <div class="body">Thats it, I had the same problem with gges (is that his name?) latest demo when noone else did. His previous demos worked perfectly though when many other were having problems, very strange.</div>
    <div class="meta">Posted on 2002-09-20 21:59:30 by Eóin</div>
   </div>
   <div class="post" id="post-59527">
    <div class="subject"><a href="#post-59527">hmmm</a></div>
    <div class="body">hutch,<br /><br />Unexpected this is.<br />Never thought u would release it so soon :)<br /><br />For all directdraw freaks, i've included 10 examples in the lastest masmed preview (self-promoting).<br /><br />If they doesn't work on lastest gfx monsters, well... too bad i'm not using a recent graphic card anyway (s3 virge is my flavour).<br /><br />Cheers,<br /><br />H.</div>
    <div class="meta">Posted on 2002-09-25 04:17:42 by hitchhikr</div>
   </div>
   <div class="post" id="post-59529">
    <div class="subject"><a href="#post-59529">nothing related</a></div>
    <div class="body">And where is that sexy,tiny,dirty OpenGHell i sent to u mon ?<br /><br />H.</div>
    <div class="meta">Posted on 2002-09-25 05:11:33 by hitchhikr</div>
   </div>
   <div class="post" id="post-59699">
    <div class="subject"><a href="#post-59699">some tests</a></div>
    <div class="body">Hi again,<br /><br />For the interested ones, <br />i've tested my dd examples on:<br /><br />S3 Virge DX/GX:<br />Ford prefect! (developped on)<br /><br />Intel 82810:<br />Obtained 16 bits surface have different format<br />(maybe it is automagically switched to 24/32 bits or something coz screen is packed 1:2)<br /><br />Matrox Mystique:<br />Trashy colors on 16 bits surfaces (no red).<br /><br />Nvidia riva tnt2:<br />Trashy colors on 16 bits surfaces (no red).<br /><br />Sis 6326:<br />Trashy colors on 16 bits surfaces (no red).<br /><br />S3 Trio 64V2:<br />Trashy colors on 16 bits surfaces (no red).<br /><br />Sis 5598:<br />Trashy colors on 16 bits surfaces (no red).<br /><br />8 bits surfaces are working perfectly on these cards.<br /><br /><br />Cheers,<br /><br />hitchhikr.</div>
    <div class="meta">Posted on 2002-09-26 18:40:48 by hitchhikr</div>
   </div>
  </div>
 </body>
</html>