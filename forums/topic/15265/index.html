<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>waveIn &amp; waveOut simultanously -&gt; possible? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15265" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=15265">waveIn &amp; waveOut simultanously -&gt; possible?</a></p>
   <div class="post" id="post-118570">
    <div class="subject"><a href="#post-118570">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body">Hi,<br /><br />two friends and I are writing a small software, which has to track the voice via microfone, apply the FFT (Fast Fourier Transformation), apply some filters (noise reduction, vowel recognition ,...) and pass signals to a 3D Model in a 3D Engine, to let the model speak (audio and mimics).<br /><br />We are that far (if you can call it far), that we aqquire the microfone, read in the signals in realtime (nearly at least), apply the FFT in a first basic form, and show a graph on the screen. We use the waveIn-Functions of the winmm-library.<br /><br />However we are stuck at the audio output, because windows keeps telling us this:<br /><pre><code><br />997     0x03E5     Overlapped I/O operation is in progress <br /></code></pre><br /><br />We tried to use the waveOut-functions on the WAVE_MAPPER device. Opening the device (waveOutOpen(..) ) and preparing the header (waveOutPrepareHeader(..) ) does not rise any errors, but the writing (waveOutWrite(..) ) causes the error above.<br /><br />Does someone have any idea on how to get the output working with input still active?<br /><br />Regards, YaWNS<br /><br />P.S. Sorry for being absent for such a long time. :)</div>
    <div class="meta">Posted on 2003-09-18 08:33:05 by YaWNS</div>
   </div>
   <div class="post" id="post-118571">
    <div class="subject"><a href="#post-118571">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body"><strong>YaWNS:</strong> you can use DirectX for this task.<br />also i recommend <a target="_blank" href="http://www.un4seen.com">BASS</a> for this (you can check the examples<br />for more info).<br /><br />ps. i did the MASM conversion some time ago, it should be in the package</div>
    <div class="meta">Posted on 2003-09-18 08:48:33 by TBD</div>
   </div>
   <div class="post" id="post-118572">
    <div class="subject"><a href="#post-118572">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body">They will both work simultaneously if you have a full-duplex audio device.</div>
    <div class="meta">Posted on 2003-09-18 09:01:12 by comrade</div>
   </div>
   <div class="post" id="post-118574">
    <div class="subject"><a href="#post-118574">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body">Hi TBD,<br /><br />thanks for your answer. I already thought about using DirectX, but didn't actually look closer at it. I will do so in a moment ;)<br /><br />I know about BASS/fmod, but we are not supposed to use these libraries :(<br /><br /><br />@comrade:<br />Yeah, I read that in an article on the net, however our soundcards don't seem to support this. We have some VIA Wave (on-board soundcards) and one soundblaster live (from which I thought it would support full-duplex, but it doesn't seem so).<br /><br />We'll try DirectX :)<br /><br />Regards, YaWNS</div>
    <div class="meta">Posted on 2003-09-18 09:05:19 by YaWNS</div>
   </div>
   <div class="post" id="post-118575">
    <div class="subject"><a href="#post-118575">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body">Here is an old direct-sound example from my archive..</div>
    <div class="meta">Posted on 2003-09-18 09:13:08 by kamilh</div>
   </div>
   <div class="post" id="post-118576">
    <div class="subject"><a href="#post-118576">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body"><strong>YaWNS</strong> maybe you can fish some info from <a target="_blank" href="http://www.borg.com/~jglatt/tech/lowaud.htm">Low Level Digital Audio APi</a> <br /><br />SB Live is full-duplex, i think you must update your drivers and i think VIA's on board should be full-duplex too.<br /><br /><strong>kamilh:</strong> thanks for the nice example. if you have more dont be afraid to post them :grin:</div>
    <div class="meta">Posted on 2003-09-18 09:25:16 by TBD</div>
   </div>
   <div class="post" id="post-118577">
    <div class="subject"><a href="#post-118577">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body">Hi,<br /><br />thanks again for the link.<br /><br />We looked at the DirectX 9 SDK and found one program called FullDuplexFilter, which does exactly what we need. and it works on both types of soundcards, which leads us to the conclusion that we did something wrong ;) <br /><br />Regards, YaWNS</div>
    <div class="meta">Posted on 2003-09-18 09:54:58 by YaWNS</div>
   </div>
   <div class="post" id="post-121944">
    <div class="subject"><a href="#post-121944">waveIn &amp; waveOut simultanously -&gt; possible?</a></div>
    <div class="body">Hi,<br /><br />sorry, that I did not reply anymore.<br />We ditched DirectX and stepped back to waveIn and waveOut, rebuilding the whole thing from scratch, and this time it worked. We have no real conclusion, what went wrong last time :confused: <br /><br />We didn't want to use DirectX since we didn't have any way to get readaccess to the soundbuffer, which is necessary for us in order to apply custom filters.<br />Now, our project is growing fine and everything looks as if we will get it finished in time and even have enough time for our project documentation.<br /><br />Thanks again for all your helps.<br /><br />YaWNS</div>
    <div class="meta">Posted on 2003-10-21 05:39:22 by YaWNS</div>
   </div>
  </div>
 </body>
</html>