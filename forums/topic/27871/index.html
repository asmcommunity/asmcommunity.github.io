<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>ADDR  x OFFSET - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27871" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27871">ADDR  x OFFSET</a></p>
   <div class="post" id="post-198406">
    <div class="subject"><a href="#post-198406">ADDR  x OFFSET</a></div>
    <div class="body">Which is the difference between ADDR and OFFSET?
Thanks

Saigam</div>
    <div class="meta">Posted on 2001-05-01 17:08:00 by Saigam</div>
   </div>
   <div class="post" id="post-198407">
    <div class="subject"><a href="#post-198407">ADDR  x OFFSET</a></div>
    <div class="body">i pulled this from iczelions tutorial #2


The addr operator is used to pass the address of a label to the function. It's valid only in the context of invoke directive. You can't use it to assign the address of a label to a register/variable, for example. You can use offset instead of addr in the above example. However, there are some differences between the two: 

addr cannot handle forward reference while offset can. For example, if the label is defined somewhere further in the source code than the invoke line, addr will not work. 
invoke MessageBox,NULL, addr MsgBoxText,addr MsgBoxCaption,MB_OK 
...... 
MsgBoxCaption  db "Iczelion Tutorial No.2",0 
MsgBoxText       db "Win32 Assembly is Great!",0
MASM will report error. If you use offset instead of addr in the above code snippet, MASM will assemble it happily. 
addr can handle local variables while offset cannot. A local variable is only some reserved space in the stack. You will only know its address during runtime. offset is interpreted during assembly time by the assembler. So it's natural that offset won't work for local variables. addr is able to handle local variables because of the fact that the assembler checks first whether the variable referred to by addr is a global or local one. If it's a global variable, it puts the address of that variable into the object file. In this regard, it works like offset. If it's a local variable, it generates an instruction sequence like this before it actually calls the function: 
lea eax, LocalVar 
push eax

Since lea can determine the address of a label at runtime, this works fine.


smurf</div>
    <div class="meta">Posted on 2001-05-01 17:18:00 by smurf</div>
   </div>
   <div class="post" id="post-198408">
    <div class="subject"><a href="#post-198408">ADDR  x OFFSET</a></div>
    <div class="body">ADDR can handle forward references quite acceptably.

Well, it always has for me. Generally, masm is a N pass assembler (takes as many passes at it needs). It only balks at a few things it should get if it was truly N pass.</div>
    <div class="meta">Posted on 2001-05-02 00:28:00 by Ernie</div>
   </div>
   <div class="post" id="post-198409">
    <div class="subject"><a href="#post-198409">ADDR  x OFFSET</a></div>
    <div class="body">Thanks for smurf and Ernie!
Now I know wath addr and offset make...

And more two questions:
Wath is the maximun size of the AVATAR?
This is for I can draw my own AVATAR... :)

Because when I type it:
.data?
Test db 1000000 dup (?)
the assembler takes MANY TIME for compile???
Thanks

Saigam

This message was edited by Saigam, on 5/2/2001 11:21:10 AM</div>
    <div class="meta">Posted on 2001-05-02 11:19:00 by Saigam</div>
   </div>
   <div class="post" id="post-198410">
    <div class="subject"><a href="#post-198410">ADDR  x OFFSET</a></div>
    <div class="body">i don't know what do you mean by avatar, but looking at your code i can tell you you'd be better off using dynamically allocating memory for these amounts of undeclared data.
you can use any of the allocation functions (GlobalAlloc,VirtualAlloc,HeapAlloc) depending on your needs, and i'm certain it'll make the assembling time much shorter.</div>
    <div class="meta">Posted on 2001-05-02 16:56:00 by fresh</div>
   </div>
   <div class="post" id="post-198411">
    <div class="subject"><a href="#post-198411">ADDR  x OFFSET</a></div>
    <div class="body">I am using these functions for alloc memory...

And about AVATAR I want know the maximun WIDHT, HEIGHT and
the SIZE of the file for I can upload my AVATAR,
for example you use "Homer Simpson" photo...

Saigam</div>
    <div class="meta">Posted on 2001-05-02 21:48:00 by Saigam</div>
   </div>
   <div class="post" id="post-198412">
    <div class="subject"><a href="#post-198412">ADDR  x OFFSET</a></div>
    <div class="body">I've designed my own Avatar using Photoshop 3. The only limitation that I know of is that the image that you create must have a Width <= 102 pixels.</div>
    <div class="meta">Posted on 2001-05-02 23:09:00 by eeprom</div>
   </div>
   <div class="post" id="post-198413">
    <div class="subject"><a href="#post-198413">ADDR  x OFFSET</a></div>
    <div class="body">Right clicking on ol' Ernie reveals he is approximately 96 pixels wide, and 119 pixels high.. :D

I think thats a good size...
NaN</div>
    <div class="meta">Posted on 2001-05-02 23:12:00 by NaN</div>
   </div>
   <div class="post" id="post-198414">
    <div class="subject"><a href="#post-198414">ADDR  x OFFSET</a></div>
    <div class="body">Thanks!

I will start the drawing of my AVATAR!!!  :)

Saigam</div>
    <div class="meta">Posted on 2001-05-03 10:33:00 by Saigam</div>
   </div>
   <div class="post" id="post-198415">
    <div class="subject"><a href="#post-198415">ADDR  x OFFSET</a></div>
    <div class="body">try uploading a really big avatar. hiroshimator designed it so that if you upload too big of a avatar you will get an error saying its too big and then it will display the maximum height or width depending on what part of the avatar is too big.

smurf</div>
    <div class="meta">Posted on 2001-05-03 14:57:00 by smurf</div>
   </div>
   <div class="post" id="post-198416">
    <div class="subject"><a href="#post-198416">ADDR  x OFFSET</a></div>
    <div class="body">Good Idea.

Saigam</div>
    <div class="meta">Posted on 2001-05-03 15:29:00 by Saigam</div>
   </div>
  </div>
 </body>
</html>