<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Optimizing the code - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5262" />
  <link rel="prev" href="../?id=5262&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=5262">Optimizing the code</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=5262&amp;page=1" style="">&laquo;</a><a href="../?id=5262&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="5262" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-37439">
    <div class="subject"><a href="#post-37439">Optimizing the code</a></div>
    <div class="body">Afternoon, bitRake.<br /><br /><pre><code>shr eax, 16</code></pre> isn't it?:grin: <br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2002-05-09 18:11:47 by Scronty</div>
   </div>
   <div class="post" id="post-37535">
    <div class="subject"><a href="#post-37535">Optimizing the code</a></div>
    <div class="body"><strong>Scronty</strong>, yes.  Thanks, I was a little quick on my responses.</div>
    <div class="meta">Posted on 2002-05-10 07:13:35 by bitRAKE</div>
   </div>
   <div class="post" id="post-37575">
    <div class="subject"><a href="#post-37575">Optimizing the code</a></div>
    <div class="body">Could the following code be smaller and faster? <br />Thanks.<br /><br /><pre><code><br />GetLuminosity proc color&#58;COLORREF	; the algorithm is &#40;&#40;&#40;rgbMax+rgbMin&#41; * HLSMAX&#41; + RGBMAX &#41; / &#40;2*RGBMAX&#41;;<br />HLSMAX	equ 240<br />RGBMAX	equ 255<br />	mov edx, GetGValue&#40;color&#41;<br />	mov ecx, GetBValue&#40;color&#41;<br />	mov eax, GetRValue&#40;color&#41;<br />	max eax, &lt;ecx, edx&gt;			; the maximum value is returned to eax<br />	min ecx, &lt;eax, edx&gt;			; the minimum value is returned to ecx<br />	add eax, ecx				; rgbmax + rgbmin<br />	mov ecx, HLSMAX<br />	mul ecx<br />	add eax, RGBMAX				; we ignore the edx part since the the result is within 32 bits<br />	shr eax, 1<br />	xor edx,edx<br />	mov cx, RGBMAX<br />	div cx<br />ret<br />GetLuminosity endp<br /></code></pre></div>
    <div class="meta">Posted on 2002-05-10 10:11:45 by yoursguideline</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=5262&amp;page=1" style="">&laquo;</a><a href="../?id=5262&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="5262" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>