<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Not understanding the stack - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18344" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18344">Not understanding the stack</a></p>
   <div class="post" id="post-142132">
    <div class="subject"><a href="#post-142132">Not understanding the stack</a></div>
    <div class="body">I have downloaded some sample code from the internet and I am trying to understand it. The problem I have is I do not understand why the paramaters of the function are being loaded into the registers as DWORD PTR. Hope you can help.<br /><br />Liamo<br /><br /><br />                  ; double dasum(int n, const double * x, int incx)<br /><br /><br /><br />                push	ecx						<br />	push	esi						<br />	push	eax						<br />	mov	ecx, DWORD PTR 		<br />	mov	esi, DWORD PTR 		<br />	mov	eax, DWORD PTR </div>
    <div class="meta">Posted on 2004-05-25 17:45:45 by Liamo</div>
   </div>
   <div class="post" id="post-142133">
    <div class="subject"><a href="#post-142133">Not understanding the stack</a></div>
    <div class="body">&quot;push ecx&quot; is the same as:<br /><br />sub esp, 4<br />mov , ecx<br /><br />...the best way to see what is happening is to use a debugger that displays the stack - like OllyDbg.</div>
    <div class="meta">Posted on 2004-05-25 17:56:11 by bitRAKE</div>
   </div>
   <div class="post" id="post-142134">
    <div class="subject"><a href="#post-142134">Not understanding the stack</a></div>
    <div class="body">Bitrake<br />Thanks for taking the time to respond. I understand the push command however the part of the code I do not understand is<br /><br />        mov	ecx, DWORD PTR <br /><br />I understand that the return address oif the caller is pushed first and then the registers used in the code are pushed giving the value of 16 used in the square brackets. The part I find confusing is the DWORD PTR since we are dealing with a VALUE of n.<br /><br />Liamo</div>
    <div class="meta">Posted on 2004-05-25 18:30:15 by Liamo</div>
   </div>
   <div class="post" id="post-142137">
    <div class="subject"><a href="#post-142137">Not understanding the stack</a></div>
    <div class="body">ESP is an address (pointer) used to access memory.  DWORD PTR just means to use the pointer to access four bytes.  It is redundant in this case since ECX is 32 bit.  Imagine if we were storing an immediate value:<br /><br />mov , 1<br /><br />...here it is not so clear what should be put at the address .  Is it a byte, word, dword?  In this case we must explicitly state the size.  MASM doesn't always require DWORD PTR to be specified.</div>
    <div class="meta">Posted on 2004-05-25 18:58:39 by bitRAKE</div>
   </div>
  </div>
 </body>
</html>