<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>COFF2OMF &amp; NASM2TASM issues - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14123" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14123">COFF2OMF &amp; NASM2TASM issues</a></p>
   <div class="post" id="post-109155">
    <div class="subject"><a href="#post-109155">COFF2OMF &amp; NASM2TASM issues</a></div>
    <div class="body">hello<br />this is my first post here, and i have a trouble....<br /><br />I'm trying to compile a emulator that was written in MSVC++ and NASM, but i have Borland C++ Builder 5, and i have a problem while trying to link:<br /><br /><div class="quote"> 'F:\EMUS\GENESIS\SRC\VC\GENS.12\GENS\Z80.OBJ' contains invalid OMF record, type 0x4c (possibly COFF)</div> <br /><br />because i can't compile NASM .asm files with TASM, i've compiled with nasm and included the .obj sources to the project., but i got that damn error<br /><br />The COFF2OMF utility does not help me here, because it generates 512-byte-corrupted files.<br /><br />How i can convert NASM-to-TASM?, or, how i can convert .obj COFF-to-OMF without using that stupid coff2omf?<br /><br />BTW: i don't know very much assembler, i just want to compile that program<br /><br />Help!!!</div>
    <div class="meta">Posted on 2003-07-03 11:03:25 by tomman</div>
   </div>
   <div class="post" id="post-109174">
    <div class="subject"><a href="#post-109174">COFF2OMF &amp; NASM2TASM issues</a></div>
    <div class="body">You don't have to do that... Nasm will output an OMF file if you use the switch -f obj.</div>
    <div class="meta">Posted on 2003-07-03 13:21:35 by Sephiroth3</div>
   </div>
   <div class="post" id="post-109212">
    <div class="subject"><a href="#post-109212">COFF2OMF &amp; NASM2TASM issues</a></div>
    <div class="body">yes, i know that, but NASM OMF files are for DOS 16-bit, not for Windows, and Borland's linker reject it (it give another error).</div>
    <div class="meta">Posted on 2003-07-03 21:09:37 by tomman</div>
   </div>
   <div class="post" id="post-109244">
    <div class="subject"><a href="#post-109244">COFF2OMF &amp; NASM2TASM issues</a></div>
    <div class="body">Tomman,<br /><br />Don't give up my friend,have you tried the coff2omf tool developed by Digital Mars?<br /><br /><a target="_blank" href="ftp://ftp.digitalmars.com/Digital_Mars_C++/Patch/COFF2OMF.zip">ftp://ftp.digitalmars.com/Digital_Mars_C++/Patch/COFF2OMF.zip</a><br /><br />This tool is able to convert MS COFF obj files and import libs to OMF.<br /><br />You can read the documentation available from:<br /><br /><a target="_blank" href="http://www.digitalmars.com/ctg/ctg.html">http://www.digitalmars.com/ctg/ctg.html</a></div>
    <div class="meta">Posted on 2003-07-04 07:52:46 by Vortex</div>
   </div>
   <div class="post" id="post-109251">
    <div class="subject"><a href="#post-109251">COFF2OMF &amp; NASM2TASM issues</a></div>
    <div class="body">thanks, pal! :grin: <br />but this coff2omf does not worked with .lib (it crashes)<br /><br />well, don't worry, i founded the bcb ports for that libs (zlib and htmlhelp)<br />:alright:</div>
    <div class="meta">Posted on 2003-07-04 13:43:03 by tomman</div>
   </div>
   <div class="post" id="post-109252">
    <div class="subject"><a href="#post-109252">COFF2OMF &amp; NASM2TASM issues</a></div>
    <div class="body">Glad you found a solution. BTW you can use LIB.EXE to extract an OBJ file:<br /><br />LIB /EXTRACT:File.OBJ MyLib.LIB<br /><br />To get a list of valid OBJ files:<br /><br />LIB /LIST:OutFile.txt MyLib.LIB<br /><br />I had to extract the full ZLIB library as GoLink does not accept lib files, the extractable procedures are:<br /><br />adler32.obj<br />chkstk.obj<br />compress.obj<br />crc32.obj<br />deflate.obj<br />gvmat32.obj<br />gvmat32c.obj<br />gzio.obj<br />infblock.obj<br />infcodes.obj<br />inffast.obj<br />inflate.obj<br />inftrees.obj<br />infutil.obj<br />ioapi.obj<br />trees.obj<br />uncompr.obj<br />unzip.obj<br />zip.obj<br />zutil.obj<br />zlib.res</div>
    <div class="meta">Posted on 2003-07-04 13:46:25 by donkey</div>
   </div>
  </div>
 </body>
</html>