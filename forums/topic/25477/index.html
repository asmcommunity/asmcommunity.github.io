<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>BIOS/OS/NASM help - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25477" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25477">BIOS/OS/NASM help</a></p>
   <div class="post" id="post-186208">
    <div class="subject"><a href="#post-186208">BIOS/OS/NASM help</a></div>
    <div class="body">OK, Like every guy who thinks he knows how to code... I eventually got fed up with all the bells and whistles we have to go thru to open a simple file. Boot up the computer... log on... Wait for the gong (for you mac users) or the &quot;PC windup&quot; for everyone else. <br /><br />I have done a lot of programming on a lot of systems using many different languages. I am not an expert on any system. And when I get over my head I always ask the smart guys/gals.<br /><br />I have enough experience to know how to read, understand, and implement code, but most of the time when advanced coders get too far out there I gotta ask them to stop&nbsp; and use smaller words ;) . <br /><br />I use the parts of some systems and then throw away the rest. Mostly splices ( i prefer not to call it hacks --- bad connotation) Unix DB needs to talk to windows server and the end user is running mac os 9 Java VM in a IE browser.<br />Some of you are feeling my pain.&nbsp; <br /><br />I also do some really low level electronics projects e.g.&nbsp; soldering, capacitors, resistors, voltage regulators, IC&#39;s and breadboards.&nbsp; &lt;--- I&#39;m not good at that either. <br /><br />Here&#39;s what I know:<br />You car has a 12v DC Battery... The maximum amount of power a standard ATX MB expects is 12v DC.&nbsp; We plug our computers into the wall socket.. the power supply turns AC current to DC current and uses Buck converters to lower the voltage to accomodate the very low volatges that a Motherboard expects.&nbsp; I know there are dc step down converters for this... $60 retail!!!!<br /><br />I WANT TO GEEK OUT MY CAR!!!!!!!!<br /><br />Here&#39;s the problem:<br />1) Shutting down and opening up an O/S on an x86 is a pain in the &quot;caboose&quot;. Timewise and CPU cycle (Power) wise.<br /><br />2) 12v DC battery can&#39;t run an A/C ATX board and LCD 15&quot; monitor when the car is off. MB? maybe... if I can get rid of the HD. USB uses &lt; 1.5v. Mass Storage $30 for 512 MB... enough for an O/S.<br /><br />3) The majority of the constant juice for the MB is from the HD spinning, fans, and floppies, not to mention the processor.&nbsp; I need to eliminate all three if possible.&nbsp; <br /><br />4) A Pentium II is as fast a a processor I should be running (less juice). I only have 5 to &quot;waste&quot;<br /><br />5) I have a few MotherBoard that I&#39;m using they should be alll x86 compliant.<br /><br />6) I have virtually no money. So don&#39;t say buy this package... <br /><br /><u><strong>Here&#39;s how I expect it to work</strong>.&nbsp; </u><br />On wake up almost all old PC boards seach for IDE or Floppy.... The floppy uses juice, is only fat12, and is slow... the HD uses constant juice when powered up (very bad ).<br /><br />I want to have a bootloader program that sits on the first 512 of a floppy (system disk) that will boot strap the USB mass storage.<br /><br />The USB Mass Storage will conatin the O/S in Binary EXE, COM, or SYS files<br /><br />Heres the twist... I want the O/S to be able to shell another operating system.<br />2 USB&#39;s hooked to the system.&nbsp; One &quot;My Generic&quot; O/S, the other Linux, Mac, Be, FreeDos, etc..<br /><br />The O/S should support generic Soundcards (on board or not), Support SVGA, USB Mouse, keyboard and Storage, and run the Java Virtual Machine.&nbsp; The rest of the GUI will be Java (I Hope).<br /><br />Heres what I have done and tools I have:<br /><br />NASM compiler&nbsp; &amp; MS Debug <br />I have created my own boot loader but can&#39;t figure out how to get mouse support. I&#39;ve tried the interupt but I think I&#39;ve coded it wrong... The IBM book is MASM and my compiler is NSAM and the example in the book is a code snippet and not complete source.&nbsp; I changed the procs to conform to NASM by comparing the examples that compiled and ran without error. but i still get errors during compile.<br /><br />LEN_DATA&nbsp; EQU 14<br />XCOORD&nbsp; &nbsp; DW&nbsp; 0	<br />YCOORD&nbsp; &nbsp; DW&nbsp; 0<br />ASCVAL&nbsp; &nbsp; DW&nbsp; ?<br /><br />LABEL DISPDATA BYTE<br />XMSG	DB	&#39;x = &#39;<br />XASCII	DW	?<br />	DB	&#39; &#39;<br />YMSG	DB	&#39;x = &#39;<br />YASCII	DW	?<br />;++++++++++++++++++++++++++++++++++++<br />	.CODE<br />A10MAIN	;PROC	FAR<br />	MOV	AX,@data<br />	MOV 	DS,AX<br />	MOV 	ES,AX<br />	CALL 	Q10CLR&nbsp;  <br />	CALL 	B10INIT<br />	CMP 	AX,00<br />	JE 	A90<br />A20:	CALL&nbsp; 	C10PNTR<br />	CMP	BX,01<br />	JE	A80<br />	MOV	AX,XCOORD&nbsp; ; MOVE XCOORD TO AX<br />	CALL	D10CVRT&nbsp; ; MAKE IT ASCII<br />	MOV	AX, ASCVAL<br />	MOV	XASCII, AX<br />	MOV	AX,YCOORD<br />	CALL	D10CVRT&nbsp; <br />	MOV	AX, ASCVAL<br />	MOV	YASCII, AX<br />	CALL	E10DSP	<br />	JMP	A20<br />A80:	MOV	AX, 02	&nbsp;  ; HIDE POINTER<br />	INT	33H<br />A90:	CALL 	Q10CLR&nbsp;  ; CLEAR SCREEN<br />	MOV	AX, 4C00H&nbsp; ; END PROCESSING<br />	INT	21H<br />;A10MAIN	ENDP <br />; 				INIT MOUSE<br />; ++++++++++++++++++++++++++++++++++++++++<br />B10INIT	;PROC NEAR<br />	MOV	AX,00H ; INIT POINTER<br />	INT	33H<br />	CMP 	AX,00&nbsp; ; IS THE POINTER THERE? 00 MEANS NO<br />	JE	B90<br />	MOV	AX,01H ; SHOW POINTER<br />	INT	33H<br />B90:	RET<br />;ENDP B10INIT <br />; 		GET MOUSE POINTER LOCATION<br />; ++++++++++++++++++++++++++++++++++++++++<br /><br />C10PNTR ;PROC	NEAR<br />C20:	MOV	AX,03H		; GET POINTER LOCATION<br />	INT 	33H<br />	CMP	BX, 00000001B 	; LEFT BUTTON?<br />	JE	C90 		; YES THEN EXIT<br />	SHR	CX,03		; DIVIDE PIXEL<br />	SHR	DX,03		; COORD BY 8<br />	CMP	CX,XCOORD	; POINTER DIFFERENT?<br />	JNE	C30<br />	CMP	DX,YCOORD	<br />	JE 	C20		; NO? DO IT AGAIN<br />C30:	MOV	XCOORD,CX	; ELSE SAVE LOCATIONS<br />	MOV	YCOORD,DX<br />C90: 	RET<br />;ENDP C10PNTR <br />; 			&nbsp; &nbsp; CONVERT BINARY<br />; ++++++++++++++++++++++++++++++++++++++++<br />D10CVRT ;PROC	NEAR<br />	MOV	ASCVAL,2020H	; CLEAR ASCII FIELD<br />	MOV	CX,10		; SET DIVIDE FACTOR<br />	LEA	SI,ASCVAL+1	; LOAD ASCVAL ADDR<br />	CMP	AX,CX		; COMPARE TO 10<br />	JB	D20		; LOWER, BYPASS<br />	DIV	CL		; HIGHER, DIVIDE BY 10<br />	OR	AH,30H		; INSERT ASCII 3s<br />	MOV	,AH		; STORE IN RIGHTMOST BYTE<br />	DEC	SI<br />D20:	OR	AL,30H		; INSERT ASCII 3s<br />	MOV	,AL		; STORE IN LEFTMOST BYTE<br />	RET<br />;ENDP D10CVRT	<br />; 			&nbsp; &nbsp; &nbsp; DISPLAY X, Y<br />; ++++++++++++++++++++++++++++++++++++++++<br />E10DSP	;PROC	NEAR<br />	MOV	AX,1300H	; REQUEST DISPLAY<br />	MOV	BX,0031H	; PAGE ATTRIB<br />	LEA	BP,DISPDATA	; STRING ADDRESS<br />	MOV	CX,LEN_DATA	; NUM OF CHARS<br />	MOV	DX, 0020H	; SCREEN ROW:COLUMN<br />	INT	10H<br />	RET<br />;ENDP E10DSP	<br />;		&nbsp;  CLEAR SCREEN SET ATTRIB<br />; ++++++++++++++++++++++++++++++++++++++++<br />Q10CLR	;PROC	NEAR<br />	MOV	AX,0600H	; REQUEST CLEARSCREEN<br />	MOV	BH,30H		; COLOR<br />	MOV	CX,00		; FULL<br />	MOV 	DX, 184FH	; SCREEN<br />	INT	10H<br />	RET<br />;ENDP Q10CLR&nbsp; <br />;	END	A10MAIN<br /><br /><br />I have an HP USB System disk tool ( HP has a tool that will allow you to take any system disk floppy and copy the boot sector to a USB) I&#39;ve done this to my flash drive but the Motherboard Bios doesn&#39;t have a boot from USB option so I have to go to floppy first unless someone can tell me how to reprogram my BIOS?<br /><br />My goal is to be able to <br /><br />Turn on my car and a start typing reports that are saved on an external USB Thumb drive which I can take with me<br /><br />Listen to Mp3&#39;s off the same thumbdrive. <br /><br />And have a Graphical interface using keyboard, mouse, and sound. <br /><br /><br />Ok Experts where should I start?</div>
    <div class="meta">Posted on 2006-10-26 10:16:45 by Duh_Newbie</div>
   </div>
   <div class="post" id="post-186221">
    <div class="subject"><a href="#post-186221">Re: BIOS/OS/NASM help</a></div>
    <div class="body">You mean with all of the sharp minds on this site... none of you have any suggestions?</div>
    <div class="meta">Posted on 2006-10-28 09:44:07 by Duh_Newbie</div>
   </div>
   <div class="post" id="post-186225">
    <div class="subject"><a href="#post-186225">Re: BIOS/OS/NASM help</a></div>
    <div class="body">Since they don&#39;t fancy this topic, :<br />A thing called &quot;protected mode&quot;, 32-bit mode of the cpu, for instance :)<br />A thorough look at SolarOS and MenuetOS are a must. <br /><br />Maybe they don&#39;t fancy the topic, since you literally ask to be spoon-fed on OS design, for which there are Stickies right here with links to the materials. </div>
    <div class="meta">Posted on 2006-10-28 16:21:47 by Ultrano</div>
   </div>
   <div class="post" id="post-186232">
    <div class="subject"><a href="#post-186232">Re: BIOS/OS/NASM help</a></div>
    <div class="body">Which stickies are you refering to? I only need help with ASM mouse support... I&#39;m certain your first attempt was done with someone else&#39;s code... As has everyone here.<br /><br />The rest I can figure out on my own... that&#39;s how we used to do it... but if you&#39;re guarded about your ASM secrets I understand your paranoia. But if everyone acts as you.. where will you turn for help in the end? <br /><br /><br />Anyone have a helpful suggestion?<br /></div>
    <div class="meta">Posted on 2006-10-28 22:30:36 by Duh_Newbie</div>
   </div>
   <div class="post" id="post-186238">
    <div class="subject"><a href="#post-186238">Re: BIOS/OS/NASM help</a></div>
    <div class="body">rofl&nbsp;  no comment, dude, no comment.&nbsp; FYI, I never even started making anything OS-like in x86... so I don&#39;t even have &quot;secrets&quot; about this topic. But you&#39;re true... now that I sought for the stickies I mentioned, they&#39;re gone ... probably removed after one of the restructures of the board. </div>
    <div class="meta">Posted on 2006-10-29 06:55:11 by Ultrano</div>
   </div>
   <div class="post" id="post-186239">
    <div class="subject"><a href="#post-186239">Re: BIOS/OS/NASM help</a></div>
    <div class="body">Hi,<br /><br />I don&#39;t know which stickies you are referring to except maybe the one inside the <a target="_blank" href="http://www.asmcommunity.net/board/index.php?board=34.0">Operating System Development</a> board having a ton of links on many different aspects of OS design, but I don&#39;t know for sure if that will be of any help.<br /><br />If you find those threads that were supposed to be sticky please msg me or any of the board staff and we surely sticky them up again ;)<br /><br />Cheers,<br />Jimmy</div>
    <div class="meta">Posted on 2006-10-29 07:46:26 by JimmyClif</div>
   </div>
   <div class="post" id="post-186761">
    <div class="subject"><a href="#post-186761">Re: BIOS/OS/NASM help</a></div>
    <div class="body">some links that may help:<br /><br /><a target="_blank" href="http://www.osdever.net/documents.php?cat=0&amp;sort=1">http://www.osdever.net/documents.php?cat=0&amp;sort=1</a><br />(Also check the root of the domain, there maybe lots of useful things there)<br /><br /><a target="_blank" href="http://www.osdev.org/">http://www.osdev.org/</a><br /><br /><a target="_blank" href="http://www.osdev.org/osfaq2/">http://www.osdev.org/osfaq2/</a><br /><br />Another thing that you may want to consider is to develop the system by using an LFS (Linux From Scratch) approach or maybe trying to costumize the &quot;Damn Small Linux&quot; sources for your needs. Coding an OS from scratch needs lots of time. Indeed you&#39;ll learn such a lot of thing from it. However, very probably it will take a &quot;very&quot; long time to arrive to your goal. Customizing existing &quot;infrastructure&quot; may take you there faster than working on it from scratch&nbsp; ;) <br /><br />greetz,<br />Pinczakko</div>
    <div class="meta">Posted on 2006-11-27 23:11:59 by Pinczakko</div>
   </div>
  </div>
 </body>
</html>