<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Branch instructions in 64 bit mode - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30133" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=30133">Branch instructions in 64 bit mode</a></p>
   <div class="post" id="post-212524">
    <div class="subject"><a href="#post-212524">Branch instructions in 64 bit mode</a></div>
    <div class="body"><em><strong>In 64-bit mode, the operand size for all near branches (CALL, RET, JCC, JCXZ, JMP,<br />and LOOP) is forced to 64 bits</strong></em>. These instructions update the 64-bit RIP without the need for a REX operand-size prefix.<br />The following aspects of near branches are controlled <em><strong>by the effective operand size</strong></em>:<br />• Truncation of the size of the instruction pointer<br />• Size of a stack pop or push, due to a CALL or RET<br />• Size of a stack-pointer increment or decrement, due to a CALL or RET<br />• Indirect-branch operand size<br />-----------------------------------------------------------------------<br /><br />In one sentence it says the operand size of 64 bit branch instructions is 64 bits but then it talks about the effective operand size! Can effective operand size( in 64 bit mode) not<br />be 64 bits?<br /><br />What is the meaning of truncation of the instruction pointer in the above line of the Intel manual? </div>
    <div class="meta">Posted on 2010-08-03 02:58:50 by logicman112</div>
   </div>
   <div class="post" id="post-212962">
    <div class="subject"><a href="#post-212962">Re: Branch instructions in 64 bit mode</a></div>
    <div class="body"><div class="quote"><br />Can effective operand size( in 64 bit mode) not be 64 bits?<br /><br />What is the meaning of truncation of the instruction pointer in the above line of the Intel manual? <br /></div><br /><br />In 64-bit mode default operand size is 32 (with exceptions, as said). <strong>REX.W</strong> prefix promotes operand size to 64; there is no much sense for 32-bit <strong>call</strong>/<strong>ret</strong>/etc. in 64-bit code, hence for them default operand size is 64 (for example, 32-bit displacement in direct <strong>call</strong> is sign-extended before addition to <strong>rip</strong>).<br /><br />Truncation means <strong>ip</strong>/<strong>eip</strong>/<strong>rip</strong> usage.</div>
    <div class="meta">Posted on 2010-08-26 00:18:37 by baldr</div>
   </div>
  </div>
 </body>
</html>