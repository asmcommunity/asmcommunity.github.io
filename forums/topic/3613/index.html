<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MASM HLS with Floating Point? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3613" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3613">MASM HLS with Floating Point?</a></p>
   <div class="post" id="post-24092">
    <div class="subject"><a href="#post-24092">MASM HLS with Floating Point?</a></div>
    <div class="body">Hi all...<br /><br />Is it possible to use MASM's High Level Syntax (.IF nr1 &gt; nr2 ) to compare Floating Point data?<br /><br />I tried to do it with jumps and compares... but that's a real pain to do.<br /><br /><br />TIA,<br /><br />Locu</div>
    <div class="meta">Posted on 2002-02-13 06:20:12 by Locu</div>
   </div>
   <div class="post" id="post-24094">
    <div class="subject"><a href="#post-24094">MASM HLS with Floating Point?</a></div>
    <div class="body">1. No you can not<br />2. You can not it with cmp jcc either.<br />3. Why do you need to use machine language if couple<br />esiest machine opcode is real pain to you?<br />Use VB.</div>
    <div class="meta">Posted on 2002-02-13 08:01:20 by The Svin</div>
   </div>
   <div class="post" id="post-24103">
    <div class="subject"><a href="#post-24103">MASM HLS with Floating Point?</a></div>
    <div class="body">Huuuh....<br /><br />Correction... FCompares,fstsw ax, sahf,(je,ja,jb,etc).<br /><br />It's a pain to do because:<br />To convert a complex algorithm to asm this way, takes allot of time... and it isn't easy to make it readable for someone else.<br /><br />And if it's so weird to use MASM's HLS... why does allmost every piece of MASM-code that I've seen contain some HLS.<br /><br /><br /><br /><br /><br />BBye,<br /><br />Locu</div>
    <div class="meta">Posted on 2002-02-13 09:06:59 by Locu</div>
   </div>
   <div class="post" id="post-24106">
    <div class="subject"><a href="#post-24106">MASM HLS with Floating Point?</a></div>
    <div class="body">There are a set of macros on <strong>XCalibre's</strong><br />web site that handle all the details for you.<br /><br />Look here:<a target="_blank" href="http://scali.eu.org/~xcalibre/Computers/SourceVault.html">http://scali.eu.org/~xcalibre/Computers/SourceVault.html</a><br /><br />The readablity of ASM is based on your comprehesion level of the language coupled with the complexity of the code.</div>
    <div class="meta">Posted on 2002-02-13 10:02:48 by bitRAKE</div>
   </div>
   <div class="post" id="post-24108">
    <div class="subject"><a href="#post-24108">MASM HLS with Floating Point?</a></div>
    <div class="body">It's inderect comparesion.<br />As to what you've seen - it's clear that you've seen code of<br />those who can't create effective control blocks.<br />Those more than ones who can.<br />So it's sign of weekness and nothing more.<br />First you use HLL statment, then use tools wich writes code for<br />you etc.<br />My question was simple, why do you need write machine language if all you are trying to do is to avoid writing it?<br />Here is contradiction.<br />It's OKAY if somebody just can not do something yet - that's<br />how he comes to learn something.<br />But if you just do not want to learn how to handle machine code - why you use machine language?<br />You like how compilers do it for you for HLL staments?<br />It's OKAY.<br />I must say that masm one of the worst compilers from optimizing<br />HLL control code. Any VC could do better.<br />MASM for writing machine code, not for code generating from HLL.</div>
    <div class="meta">Posted on 2002-02-13 10:29:04 by The Svin</div>
   </div>
   <div class="post" id="post-24158">
    <div class="subject"><a href="#post-24158">MASM HLS with Floating Point?</a></div>
    <div class="body">The Svin,<br /><br />I didn't say that I didn't knew how to write the code to compare FP data... I said it was a pain to do it for complex algo's.<br /><br />And I'll bet that you can't produce a very complex FP-algortihm coded in plain ASM that is readable to a mathematician that has no ASM-knowledge.<br /><br /><br /><br />Greetings to ya all From the lowlands,<br /><br />Locu</div>
    <div class="meta">Posted on 2002-02-13 16:39:22 by Locu</div>
   </div>
   <div class="post" id="post-24164">
    <div class="subject"><a href="#post-24164">MASM HLS with Floating Point?</a></div>
    <div class="body">Afternoon, Locu.<br /><br />The only solution would be to create the macros yourself.<br />It'd be quite useful, though...<br /><pre><code><br />.FIF fpRoll &gt; fpHalfPI<br />    ; blah blah<br />.FELSE<br />    ; blah blah<br />.FENDIF<br /></code></pre><br /><br />cheers,<br />Scronty</div>
    <div class="meta">Posted on 2002-02-13 17:02:27 by Scronty</div>
   </div>
   <div class="post" id="post-24231">
    <div class="subject"><a href="#post-24231">MASM HLS with Floating Point?</a></div>
    <div class="body">Svin,<br /><br />You are right about the HLL statements : I actually avoid them as much I can (I conserve some of them for readability), but they are useful to understand the basics of some things in assembly... they can concentrate on some other code and not the boring one they will learn easier after some more experience (I don't speak specifically about Locu here)... what I say is the HLL statements can help the *beginner*... and once he's experienced enough... he can avoid them and code by comparison and branching i.e once he has gotten used to some other things in assembly...<br /><br />You are for sure an assembly purist and very experienced in this area but before a person can run, he has to learn how to walk...</div>
    <div class="meta">Posted on 2002-02-14 01:23:02 by JCP</div>
   </div>
   <div class="post" id="post-24237">
    <div class="subject"><a href="#post-24237">MASM HLS with Floating Point?</a></div>
    <div class="body"><em> didn't say that I didn't knew how to write the code to compare FP data... I said it was a pain to do it for complex algo's.</em> <br /><br />The Svins point here I believe is that theres little point using the HLL statements in a complex algo. They'll slow things down and defeat the purpose of using assembly<br /><br /><em>And I'll bet that you can't produce a very complex FP-algortihm coded in plain ASM that is readable to a mathematician that has no ASM-knowledge.</em><br /><br />I doubt you could code anything complex in asm which would be readable to someone who knows no assembly. But if you're going to destroy the speed of you algo just to make it readable, then why bother use asm at all. Badly written asm can be worse than a compiler.<br /><br />In fact what you've just said is equlivant to &quot;I bet you can't write an essay in plain English which is legible to someone who knows no English.&quot; :grin:<br /><br />If you want to make it legible use comments. :)</div>
    <div class="meta">Posted on 2002-02-14 02:44:25 by EÃ³in</div>
   </div>
   <div class="post" id="post-24241">
    <div class="subject"><a href="#post-24241">MASM HLS with Floating Point?</a></div>
    <div class="body"><div class="quote"><br />If you want to make it legible use comments. :) </div><br /><br />I thought this was so profound I thought it should be said again :)  I've very rarely seen code that has &quot;too many comments&quot;... <br /><br />If your willing to put time into the comments then there isn't any reason why someone shouldn't follow even the most complicated of algorithms...<br /><br />Also liked the analogy Eoin... :)<br /><br />Sliver</div>
    <div class="meta">Posted on 2002-02-14 03:18:34 by Sliver</div>
   </div>
   <div class="post" id="post-24307">
    <div class="subject"><a href="#post-24307">MASM HLS with Floating Point?</a></div>
    <div class="body">To Locu:<br />I haven't meant to hurt you filling, and if did - I'm sorry.<br />I'm sorry but I do not appolagize, 'cause my words were direct and honest and all I wished - to help you.<br />You don't want such a help - I can do nothing.<br />You may proceed your way to nowhere.<br />To Readiosys:<br />Learning basic opcode + JCC + Flags is right start point.<br />It is alphabet, if you don't know it - you know nothing.<br />You should start learning asm without input and output<br />but with debuger, creating simple constructions and observing<br />what happens in CPU.<br /><br />The other thing is that it is not your fault - all recent asm books<br />is another example of mass stupidity, description of flags and jcc<br />write the worst possible way.<br />Almost no step by step training of control block creation.<br />The result is many programmers treat HLL logic of block controling<br />as the only possible and the only existing.<br />What I see in many programms is not control blocks based on<br />machine logic but translation of HLL control blocks logic to machine<br />the worst possible way.<br /><br />A week of proper and concentrated training is enough to learn<br />basics of flags and JCC.<br />This training will reward you with clear understanding, selfconfidence and good results in your code every next day after<br />it. Getting better in will reflect ALL YOUR CODE.<br /><br />I say it again - IT IS ALPHABET!<br />2. Cmp and JCC is not the only way to make control block<br />3. Cmp and JCC produced by MASM with .IF .ELSE .WHILE are<br />the worst possible cmp jcc.<br /><br />4. For start to begin you need to know just 4 flags! ZF OF SF CF<br />Don't say me, please, that it is super hard job.<br /><br />JCCs needed to know as determination of value comp after<br />sub (cmp) just 9!<pre><code>CF=0 &amp; ZF=0		JA<br />			JNBE<br />---------------------------------------------<br />CF=0			JAE<br />			JNB<br />			JNC<br />---------------------------------------------<br />CF=1			JB<br />			JNAE<br />			JC<br />---------------------------------------------<br />CF=1 || ZF =1		JBE<br />			JNA<br />---------------------------------------------<br />ZF=1			JE<br />			JZ<br />---------------------------------------------<br />ZF=0 and SF=OF	JG<br />			JNLE<br />---------------------------------------------<br />SF&lt;&gt;OF			JNGE<br />			JL<br />---------------------------------------------<br />ZF=1 or SF&lt;&gt;OF		JLE<br />			JNG<br />---------------------------------------------<br />ZF=0			JNE<br />			JNZ<br />---------------------------------------------</code></pre><br />All this 9 JCC can be devided into 3 groups <br />for signed and unsigned and common (check if equal) you can firstly learn one group then next.<br /><br />4 Unsigned:<pre><code>CF=0 &amp; ZF=0		JA<br />			JNBE<br />---------------------------------------------<br />CF=0			JAE<br />			JNB<br />			JNC<br />---------------------------------------------<br />CF=1			JB<br />			JNAE<br />			JC<br />---------------------------------------------<br />CF=1 || ZF =1		JBE<br />			JNA<br />---------------------------------------------</code></pre><br />3 Signed:<pre><code>ZF=0 and SF=OF	JG<br />			JNLE<br />---------------------------------------------<br />SF&lt;&gt;OF			JNGE<br />			JL<br />---------------------------------------------<br />ZF=1 or SF&lt;&gt;OF	JLE<br />			JNG<br />---------------------------------------------</code></pre><br />and<br />2 Common:<pre><code>ZF=0			JNE<br />			JNZ<br />---------------------------------------------<br />ZF=1			JE<br />			JZ<br />---------------------------------------------</code></pre><br />Names just aliases.<br />Common group uses just one(!) FLAG ZF<br />'cause<br />IF a = b THEN a - b = 0<br />Unsigned group uses just two(!) FLAGS ZF and CF<br />'cause<br />IF a &lt; b then a - b &lt; 0 end if result is less then zero borrowing<br />happens to compelemet result and CF indicates it.<br /><br />  01h<br />- ---  &lt; 0<br />  02h <br />then machine comlement 01h to 101h and sets CF to report<br />abou it<br />so 01h - 02h = 101h - 02h = 0FFh and carry is set.<br /><br /> then <br /> cmp 1,2 ;cmp = sub sets CF cause there was borrowing<br /> cmp 2,2 ; sets ZF cause 2-2=0<br /> <br />jbe ; IF ZF (sub a - b was 0) or IF CF (sub a - b needed borrow to finish operation and it means that a was less then b)<br /><br />Shall I continue?<br />Was all the above superhard to understand?<br /><br />Agrhhh!<br />This edit window makes me crazy!<br />I aligned opcodes conditions and names of JCC into two columns -<br />why the names shifted two left!<br /><br />Locu! Can you teach me how to arrange two columns in this message editor?</div>
    <div class="meta">Posted on 2002-02-14 16:48:55 by The Svin</div>
   </div>
   <div class="post" id="post-24336">
    <div class="subject"><a href="#post-24336">MASM HLS with Floating Point?</a></div>
    <div class="body">wow Svin ... you sure are 3l33t!! :) <br />I mean ... only stupid, ignorant and hypocrites really use .IF.ELSE.ENDIF, or masm for that matter (hear that hutch?)<br />I mean, when avoiding them might translate in a couple of CPU cycles less ...<br />As the saying goes ... real man code in HEX<br /><br />Ok sorry, maybe it's a bit harsh. It's just that it's not a good morning today ;)<br /><br />Seriously, only one question, you are coding for a platform like Windows right? and the days of the 8086 are long gone. What is exactly the advantage of using jz,je etc instead of .IF.ENDIF in say the main window procedure to sort out the wmsg? I agree that is better to avoid HLS in algorithms where speed is critical, but otherwise I think is overshooting a bit. <br />It's called 80/20 ... focus on the 20% that gives you the 80% of results.<br /><br />Unless of course you have lots of spare time and really don't care about deadlines (please note that I write asm for hobby in the very little free time I have and not as a professional ... I would use something like C++ otherwise ... it's just a theoretical discussion on priorities here)<br /><br />If you really like super-efficient/tight/illegible code, why not code for a microcontroller instead of a modern day PC?<br /><br />But maybe it's just that I don't have the mindset of a computer programmer and can't understand the subtleties :) Guess that?s why I?m in a different business ;)<br /><br />This is just my 2cents.<br />Nothing personal.<br /><br />cheers<br />Randomizer</div>
    <div class="meta">Posted on 2002-02-15 03:19:14 by random</div>
   </div>
   <div class="post" id="post-24338">
    <div class="subject"><a href="#post-24338">MASM HLS with Floating Point?</a></div>
    <div class="body">Svin,<br /><br />I agree totally with you : jcc are not hard...<br /><br />The point is .IF macros instructions preserve source codes readability while the jcc makes the source look *dirty* are painful to (re)read and leads to the symptom better known under the name of &quot;spaghetti code&quot;.<br /><br />It can help beginners that are not used to it in the first time... not because jcc are that hard, but they preserve source readility and IMHO, it is important to understand his own program...<br /><br />I am not meaning that a program with jcc is impossible to read : I now code all my branching using them and no longer use the .IF... but the sources are messier and it can confuse the beginners...</div>
    <div class="meta">Posted on 2002-02-15 03:56:39 by JCP</div>
   </div>
   <div class="post" id="post-24355">
    <div class="subject"><a href="#post-24355">MASM HLS with Floating Point?</a></div>
    <div class="body"><div class="quote">What is exactly the advantage of using jz,je etc instead of .IF.ENDIF in say the main window procedure to sort out the wmsg? </div> <br />What is .ENDIF?<br />My machine has not such an opcode.<br />It's funny, I ask simple direct question and for for the second time<br />I'm reading answer on anything else but the question :)<br /><br />You think .IF .ELSEIF .ENDIF are better for you then even simple opcode?<br />It's OK. It is your choise.<br />You think that speed doesn't such a matter on modern PC?<br />It's OK - you free to think so, I have no wish to talk you out of it.<br />But it wasn't my question.<br /><br />The question was - if HLL is more convinient to you why do your<br />use machine language?<br />Be happy with your C++.<br /><div class="quote">(hear that hutch?) </div> <br />Barking for help? ;)<br />You make me sick.<br />We discussed it with Steve. And respect each other enough to<br />be honest, and exchange thoughts, proves and arguments.<br />So he is well awared of MHO.<br /><br />You see, for us the most interesting thing was topic itself,<br />for you as I see is more interesting that may be in my question<br />I somehow inderectly called you LAMER.<br />Or may be I tried to say that my dick was bigger.<br />Common, I'm beyond such childish problems.<br /><br />My message was clear and direct.<br />1. If you know machine, then use of opcodes is EASIER and more flexible than HLL statement.<br />2. Flags and JCC is very easy to learn if you learn it right way.<br />3. If you still don't agree with 1. and 2. then I, respecting YOUR<br />OPINION could only recommend you to keep your faith and proceed, according your princeples with HLL.<br /><br />BTW Hutch knows how to handle conrol blocks in mnemomics much better than with HLL.<br />I may give you a lot of examples when HLL statemets buffled him<br />and he wrote very funny code:) Wich almost never happened when he made algos in mnemonics only.<br /><br />The only use of it that it produce more easier anonimous labels.<br />@@: has to little ability in it. And the only problem in complex algos to create a lot of names for labels.</div>
    <div class="meta">Posted on 2002-02-15 05:43:18 by The Svin</div>
   </div>
  </div>
 </body>
</html>