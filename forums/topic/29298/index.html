<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>[MASM] Problem with If - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29298" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29298">[MASM] Problem with If</a></p>
   <div class="post" id="post-206922">
    <div class="subject"><a href="#post-206922">[MASM] Problem with If</a></div>
    <div class="body">Hi, I&#039;ve a problem with &quot;IF&quot; in MASM.<br /><br /><pre><code>&nbsp; &nbsp; &nbsp; &nbsp; .elseif eax==IDC_CHECK<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke Generate,hWnd<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke GetDlgItemText,hWnd,IDC_SERIAL,addr userSerial,40<br />&nbsp; &nbsp; (x)&nbsp; .if (userSerial==SerialBuffer )<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke SetDlgItemText,hWnd,IDC_NAME,addr SerialBuffer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  .endif</code></pre><br /><br />The variabales are declared like this:<br /><br /><pre><code>&nbsp;  1. NameBuffer&nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; 40 dup(?)<br />&nbsp;  2. SerialBuffer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  db&nbsp; &nbsp; &nbsp; 40 dup(?)<br />&nbsp;  3. SerialSection&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  db&nbsp; &nbsp; &nbsp; 32 dup(?)<br />&nbsp;  4. userSerial&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  db&nbsp; &nbsp; &nbsp; 40 dup(?)</code></pre><br /><br /><br />If you klick the Button &quot;IDC_Check&quot; you call the routine to calculate the serial.<br />The Serial is saved in &quot;SerialBuffer&quot;<br /><br />Last line from the routine:<br /><br /><pre><code>&nbsp; &nbsp; invoke lstrcat,addr SerialBuffer,addr SerialSection</code></pre><br /><br />I want to check if SerialBuffer is equal to userSerial.<br />If they are the same, the programm should write the serial into the field &quot;IDC_Name&quot;.<br /><br />But I always get an error.<br /><br />What is the problem?<br /><br /><br />Thanks.<br /><br /><br />PS: Sorry for my bad english, I&#039;m german ;)</div>
    <div class="meta">Posted on 2009-02-27 09:34:08 by Sy1ux</div>
   </div>
   <div class="post" id="post-206923">
    <div class="subject"><a href="#post-206923">Re: [MASM] Problem with If</a></div>
    <div class="body">You can&#039;t just compare the strings using &quot;.if (userSerial==SerialBuffer )&quot; - that isnt doing what you think.<br /><br />Use the lstrcmp or lstrcmpi functions to compare the strings, note for future reference that these api can lead to exploits of your application so they&#039;re not a long term solution, just a way to get your code working.</div>
    <div class="meta">Posted on 2009-02-27 10:07:35 by Homer</div>
   </div>
   <div class="post" id="post-206926">
    <div class="subject"><a href="#post-206926">Re: [MASM] Problem with If</a></div>
    <div class="body">Thank you Homer =)</div>
    <div class="meta">Posted on 2009-02-27 11:17:40 by Sy1ux</div>
   </div>
   <div class="post" id="post-206929">
    <div class="subject"><a href="#post-206929">Re: [MASM] Problem with If</a></div>
    <div class="body"><div class="quote">Use the lstrcmp or lstrcmpi functions to compare the strings, note for future reference that these api can lead to exploits of your application so they&#039;re not a long term solution, just a way to get your code working.<br /></div>Yeah Sy1ux, you gotta be careful no one exploits your keygen&nbsp; :mrgreen: :mrgreen: :mrgreen:<br /><br />sry, I had to :twisted:<br /></div>
    <div class="meta">Posted on 2009-02-27 22:36:23 by drizz</div>
   </div>
   <div class="post" id="post-206936">
    <div class="subject"><a href="#post-206936">Re: [MASM] Problem with If</a></div>
    <div class="body">Hey, I&#039;m an optimist, I&#039;m assuming he&#039;s writing his own serial verification control in a vain attempt to protect his own work from software piracy... hah&nbsp; :twisted:</div>
    <div class="meta">Posted on 2009-03-01 09:13:49 by Homer</div>
   </div>
  </div>
 </body>
</html>