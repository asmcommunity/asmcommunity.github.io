<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>PROC using ENTER instead of PUSH EBP/MOV EBP.ESP - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4858" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=4858">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></p>
   <div class="post" id="post-34083">
    <div class="subject"><a href="#post-34083">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body">hi,<br /><br />under masm, the PROC reserved word create a stack frame using PUSH EBP/ MOV EBP,ESP / SUB ESP<br /><br />there is any way to make PROC generate it using the ENTER instruction?<br /><br />ancev</div>
    <div class="meta">Posted on 2002-04-19 22:11:55 by ancev</div>
   </div>
   <div class="post" id="post-34085">
    <div class="subject"><a href="#post-34085">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body">Well use TASM? it looks to me like TASM uses ENTERD :)<br /><br />now i remember that MASM has something called EPILOGUS/PROLOGUE code? but i am not sure since i have not been using MASM a lot lately ...<br /><br /><br />like one of great C++ coders commented :<br /><pre><code><br /><br /> /* i could have done this real divide only once above the loop<br /> and place it in a temp variable but i think a 32 bit memory read <br />&#91;b&#93; is much slower &#91;/b&#93; than a FPU accelerated division */<br /><br /></code></pre><br /><br /><br />at least he say &quot; i think&quot; ... the same with me &quot;i remember&quot; :stupid:</div>
    <div class="meta">Posted on 2002-04-19 22:42:39 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-34086">
    <div class="subject"><a href="#post-34086">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body">Yes, create your own EPILOGUE/PROLOGUE macros:<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=2153">http://www.asmcommunity.net/board/index.php?topic=2153</a><br /><br />I have played with a version that allows up to 2MB of local<br />data on the stack, and the above link is for profiling PROCs.<br /><br />He he he...posted at same time as <strong>BogdanOntanu</strong>.</div>
    <div class="meta">Posted on 2002-04-19 22:42:54 by bitRAKE</div>
   </div>
   <div class="post" id="post-34092">
    <div class="subject"><a href="#post-34092">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body">BogdanOntanu,<br /><br />yeah, you're right... i am trying to give a chance to masm32, but is impossible. tasm and nasm are better. masm dont let me control te code.<br /><br />only good point that masm have are the includes.<br /><br />ancev<br /><br />ps: the irc help in #win32asm is really terrible :(<br /><br />pps: bitrake, thanks. was that i was searching :)</div>
    <div class="meta">Posted on 2002-04-20 00:21:52 by ancev</div>
   </div>
   <div class="post" id="post-34096">
    <div class="subject"><a href="#post-34096">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body">vecna,<br /><br />If you want to use the ENTER/LEAVE pair for a stack frame, I think you have to code it manually.<br /><br />It may be worth trying a macro to do it which can probably be made to work with STDCALL but it would be difficult with a C calling convention as you need to know the parameter size to clean up the end.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-04-20 02:05:16 by hutch--</div>
   </div>
   <div class="post" id="post-34156">
    <div class="subject"><a href="#post-34156">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body"><div class="quote"><br />ps: the irc help in #win32asm is really terrible :(</div>But the help here is good, no?<br /><br /><strong>Hutch</strong>, it is the RET instruction which corrects for the parameters pushed on the stack - not ENTER/LEAVE.  There should be no problem creating a macro for all calling conventions.  MASM gives the EPILOGUE macro the number of bytes pushed on the stack for the RET instruction to clean up, or not.  Using PROLOGUE/EPILOGUE macros doesn't effect the clean up after the invoke of a C PROC, it only effects code generation of the PROC.  Or, maybe I don't understand what your saying?</div>
    <div class="meta">Posted on 2002-04-20 14:30:38 by bitRAKE</div>
   </div>
   <div class="post" id="post-34273">
    <div class="subject"><a href="#post-34273">PROC using ENTER instead of PUSH EBP/MOV EBP.ESP</a></div>
    <div class="body">bitRAKE,<br /><br />here's excellent :)<br /><br />ancev</div>
    <div class="meta">Posted on 2002-04-21 10:30:55 by ancev</div>
   </div>
  </div>
 </body>
</html>