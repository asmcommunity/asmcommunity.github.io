<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Neomagic bank switching routine? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12129" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=12129">Neomagic bank switching routine?</a></p>
   <div class="post" id="post-93167">
    <div class="subject"><a href="#post-93167">Neomagic bank switching routine?</a></div>
    <div class="body">HI all,<br /><br />After a very long pause i have restarted work to  SOL OS.<br />Expect a new version with ATA HDD support soon.<br /><br />SOL OS requires VESA 2.0 and/or a valid LFB for GFX.<br /><br />I wanted to test it on my laptop also... but yufortunately my old Omnibook 800CT laptop uses a Neomagic MagiGraph 128PCI video card (because it has very little power consumption).<br /><br />It only has VESA 1.2, 800+Kb video RAM and no LFB available.<br /><br />I tried searching the web for a piece of code that will do bank switching for this kind of video card...but failed (damn i had found it a long time ago and lost it again)..<br /><br />SO if anybody here knowes how i could switch banks on such kind of video card?<br /><br />in ASM if possible but hey any C/C++ code or information will do...<br /><br />Thank you</div>
    <div class="meta">Posted on 2003-04-04 07:44:30 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-93172">
    <div class="subject"><a href="#post-93172">Neomagic bank switching routine?</a></div>
    <div class="body">Does it work on VMware now?<br /><br />That would be a great plus, because it would be a lot easier to test it then...<br /><br />It would be nice if you can test your newest version on the 4.x release candidate trial of VMware.</div>
    <div class="meta">Posted on 2003-04-04 08:25:06 by bazik</div>
   </div>
   <div class="post" id="post-93185">
    <div class="subject"><a href="#post-93185">Neomagic bank switching routine?</a></div>
    <div class="body">Get this source file of an older XFree release:<br /><br /> <a target="_blank" href="ftp://ftp.ntua.gr/pub/XFree86/3.3.6/source/X336src-1.tgz">ftp://ftp.ntua.gr/pub/XFree86/3.3.6/source/X336src-1.tgz</a><br /><br />Unpack it and search the tree for &quot;*bank.s&quot;<br /><br /><pre><code><br />/*<br /> * These are here the very lowlevel VGA bankswitching routines.<br /> * The segment to switch to is passed via %eax. Only %eax and %edx my be used<br /> * without saving the original contents.<br /> *<br /> * WHY ASSEMBLY LANGUAGE ???<br /> *<br /> * These routines must be callable by other assembly routines. But I don't<br /> * want to have the overhead of pushing and poping the normal stack-frame.<br /> */<br /></code></pre><br /><br />It also contains the file &quot;xc/programs/Xserver/hw/xfree86/vga256/drivers/neo/neo_bank.s&quot; which does what you asked for (bank switching for Neo Graphic Cards).<br /><br /><br />Hope that helps!</div>
    <div class="meta">Posted on 2003-04-04 09:03:06 by bazik</div>
   </div>
   <div class="post" id="post-93266">
    <div class="subject"><a href="#post-93266">Neomagic bank switching routine?</a></div>
    <div class="body">Hi,<br /><br />Thanks for the link i will try that<br /><br /><br />It can not work on WMVare because they do not support VESA 2.0 :P<br /><br />I think i will make a standard VGA video driver sometime in the future but until then... arghh messing with color planes will be fun ...<br /><br /><br />However it is quite &quot;safe&quot; to test it on any PC from a boot floppy ... i have tested it many times and never had any problems i could not solve via a reset. <br /><br />Things will not be that sure anymore when i start playing with ATA HDD drivers<br />Anyway it will be read-only for a long time<br /><br />No many improvements... because i just took a long pause.<br /><br />I have updated the site a little and will continue to do so</div>
    <div class="meta">Posted on 2003-04-04 14:59:50 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-93279">
    <div class="subject"><a href="#post-93279">Neomagic bank switching routine?</a></div>
    <div class="body">Hi <strong>Bogdan</strong>, you wrote:<br /><div class="quote">Things will not be that sure anymore when i start playing with ATA HDD drivers<br />Anyway it will be read-only for a long time</div>PIO or UDMA mode? Do you have docs on the latter? (is it pretty standard, or very chipset-dependent?)</div>
    <div class="meta">Posted on 2003-04-04 16:04:48 by Maverick</div>
   </div>
   <div class="post" id="post-93296">
    <div class="subject"><a href="#post-93296">Neomagic bank switching routine?</a></div>
    <div class="body"><div class="quote"><br />It can not work on WMVare because they do not support VESA 2.0 :P<br /></div><br /><br />It may work under the new VMWare 4.0, since they supposedly added an emulated VESA BIOS, although I haven't played around with it.<br /><br />----<br />Domain</div>
    <div class="meta">Posted on 2003-04-04 18:11:59 by Domain</div>
   </div>
   <div class="post" id="post-93303">
    <div class="subject"><a href="#post-93303">Neomagic bank switching routine?</a></div>
    <div class="body"><div class="quote"><br /><br /><br />It may work under the new VMWare 4.0, since they supposedly added an emulated VESA BIOS, although I haven't played around with it.<br /><br />----<br />Domain </div><br /><br />Thats why I asked to test with the newest Version.</div>
    <div class="meta">Posted on 2003-04-04 19:10:59 by bazik</div>
   </div>
   <div class="post" id="post-93370">
    <div class="subject"><a href="#post-93370">Neomagic bank switching routine?</a></div>
    <div class="body">Whoops,<br /><br />Sorry, i've been doing 18 hour days for the past two weeks, I guess its catching up on me :o <br /><br />-----<br />Domain</div>
    <div class="meta">Posted on 2003-04-04 22:51:28 by Domain</div>
   </div>
   <div class="post" id="post-94639">
    <div class="subject"><a href="#post-94639">Neomagic bank switching routine?</a></div>
    <div class="body">doesn't vesa1.2 have support for bankswitching? Or was that only added in 2.0?<br /><br />As for &quot;doesn't support LFB&quot;, it doesn't take very much code to emulate LFB on a bankswitched card when you have paging up and running.</div>
    <div class="meta">Posted on 2003-04-09 06:23:46 by f0dder</div>
   </div>
   <div class="post" id="post-94896">
    <div class="subject"><a href="#post-94896">Neomagic bank switching routine?</a></div>
    <div class="body">I said I was going to write some OPL (Fm synth code) for your OS, but I haven't got to it, you told me to have a standards (such as init, detect etc.) routine , but trust me my code will be next to garbage if I don't have some sort of guideline to follow!! Also it will use my SBI instrument loader (with alot of instruments on my drive), so some other clever programmer can probably write a MIDI driver.</div>
    <div class="meta">Posted on 2003-04-09 17:39:07 by x86asm</div>
   </div>
  </div>
 </body>
</html>