<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>New Version NAGOA - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11316" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=24">IDE usage &amp; development</a> &raquo; <a href="../?id=11316">New Version NAGOA</a></p>
   <div class="post" id="post-85432">
    <div class="subject"><a href="#post-85432">New Version NAGOA</a></div>
    <div class="body">;new version of nagoa.inc  no need more of sizef know is automatic !<br /><br />;<a target="_blank" href="http://194.65.3.199/win32asm/">http://194.65.3.199/win32asm/</a><br /><br />;here an example:<br />;============<br /><br />%include '\lab\vasm\inc\nagoa.inc'<br /><br /> <br /><br /><br /><br /><br />;declaring  here the function we made<br />;------------------------------------<br /><br />def WinMain<br />def WndProc<br /><br />..start:<br />	call GetModuleHandle, NULL<br />	var Instance, 4<br />	mov dword, eax<br />	call WinMain, , NULL, NULL, SW_SHOWDEFAULT<br />	call ExitProcess, eax<br /><br /><br />; the funct parameters and locals (stack)  used , are preceded by a point <br /> <br />funct WinMain, hInstanceARG, hPrevInstance, lpCmdLine, nCmdShow<br />        <br />        local  hwnd, 4,msg,MSG    ; var using the stack<br />        var wc, WNDCLASSEX      ;  data declared var<br />	<br />	<br />        mov dword, WNDCLASSEX_size<br />	mov dword, CS_VREDRAW | CS_HREDRAW<br />	mov dword,WinProc<br />	mov dword, NULL<br />	mov dword, NULL<br />	m2m dword,[.hInstanceARG]<br />	mov dword,COLOR_WINDOW+1<br />	mov dword, NULL<br />        var ClassName , &quot;Nagoa window&quot;,source          ;-----&gt;  string data declared <br />	mov dword, ClassName<br />	call LoadIconA, NULL, IDI_APPLICATION<br />	mov dword, eax<br />	mov dword, eax<br />	call LoadCursor, NULL, IDC_ARROW<br />	mov dword, eax<br />	call RegisterClassEx, wc<br />	call CreateWindowEx, NULL,ClassName, &quot;Aplication&quot;, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL,, NULL<br />	mov dword[.hwnd], eax<br />	call ShowWindow, [.hwnd], [.nCmdShow]<br />	call UpdateWindow, [.hwnd]<br /><br />.Messageloop<br />        lea eax,[.msg]   ; get the effective adress<br />        call GetMessageA,eax, NULL, 0, 0<br />        test eax, eax<br />	je .Fim<br />        cmp eax, -1<br />	je .erro<br />        lea eax,[.msg]<br />        call TranslateMessage,eax<br />        lea eax,[.msg]<br />	call DispatchMessageA,eax<br />        jmp .Messageloop<br /><br />.Fim<br />	mov eax, [.msg+MSG.wParam]<br />        return<br />.erro<br />endfunct<br /><br />funct WinProc, hWnd, uMsg, wParam, lParam<br /><br />local hdc, 4<br />local ps, PAINTSTRUCT<br />local hfont, 4<br /><br />;=============================================<br />	mov eax, dword[.uMsg]<br />	cmp eax, WM_PAINT<br />	JE .WM_PAINT<br />	cmp eax, WM_DESTROY<br />	je .WM_DESTROY<br />;=============================================<br />	call DefWindowProc, [.hWnd], [.uMsg], [.wParam],[.lParam]<br />	return<br />;=============================================<br />	.WM_DESTROY:<br />	call PostQuitMessage, 0<br />        return<br />;==============================================<br />	.WM_PAINT:<br />	lea eax, [.ps]<br />	call BeginPaint, [.hWnd], eax<br />	mov dword[.hdc], eax<br />	call CreateFont, 24,16,0,0,400,0,0,0,OEM_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_SCRIPT,&quot;script&quot;<br />	call SelectObject, [.hdc], eax<br />	mov dword[.hfont], eax<br />	RGB 200, 200, 60<br />	call SetBkColor, [.hdc],eax<br />	RGB 0, 10, 200<br />	call SetTextColor, eax<br />        call TextOut, [.hdc],0,0,&quot;Nasm Rocks&quot;, 11<br />	call SelectObject, [.hdc], [.hfont]<br />	lea eax, [.ps]<br />	call EndPaint, [.hWnd], eax<br />        return<br />;============================================<br />endfunct</div>
    <div class="meta">Posted on 2003-03-06 12:18:48 by Nguga</div>
   </div>
   <div class="post" id="post-86403">
    <div class="subject"><a href="#post-86403">hiya :)</a></div>
    <div class="body">Hi all!!!.<br /><br />for the people that dont  know what are saying (this is NASM), is a develop of a macro that i start for a &quot;simple&quot; questions (in the board from nasm site and nagoa site), also i start with the manipulation of local vars without the hardcoded versions and how to make them automatic and i continue to the develop for a macro for manipulate functions, ok this is a good version and loable i think :), also nguga added the no use of sizef that i use for tell how many size store for the locals vars, this is automatic now, but the only thing i find is you need declare all the local vars at the first time , then you can use normally, also with the use of sizef, you can declare a local var elsewhere inside a function or to called proc :) and no need be in the start of the funct ;) **<br /><br />later i will upload**** a know bug :), but can be handled ;), only put at the end ,source, or ,local, this is only for the values that pass a string (the error is: a unterminated/ or: to long/ string)<br /><br />also i need to say i am like a noob***, :) in this world of asm, but i think i can catch :) and this is done,.. whoaa!!! :D, also, i will add a feature for use the version modificated by nguga or use the sizef (only for declare locals elsewhere, more near from the place you gona use).<br /><br />also, i will add in the future a no generate the the stack frame, and i will see how to handle this vars from the esp :) i think :D<br /><br />Also thx for nguga (for test and suport)and fbkotler that answer my first post in help thx a lot, i learn good thx :).. a yea.. and the people that are out there  :D<br /><br />** i need to say you, you first need write in ahrdcore for later use a macro and know what is what is doing ;)<br />***for what i say.. yea i am, and i think if i can do, then you can learn too :D, is easy :D go :alright: <br />****in a little site i have (for free), now i am trying develop a good feel :) (sorry dudes, this site is gona be in espa?ol)<br />*****this is a extra: also you can know my name :) lol.. ooooo i am easy to find now in the world now :D.. i can't write my crazy ideas about some things.. and culture and world affairs.. and my affairs  lol.. nah... i can and i gonna do jeje ;)<br /><br />have a nice day.</div>
    <div class="meta">Posted on 2003-03-11 01:34:34 by rea</div>
   </div>
  </div>
 </body>
</html>