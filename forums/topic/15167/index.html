<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Beta Testing ML(Math Language). ML takes math and converts i - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15167" />
    <link rel="next" href="../?id=15167&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=22">Recruitment</a> &raquo; <a href="../?id=15167">Beta Testing ML(Math Language). ML takes math and converts i</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=15167&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=15167&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="15167" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=15167&amp;page=2">&gt;</a><a href="../?id=15167&amp;page=2">&raquo;</a></form>   <div class="post" id="post-117862">
    <div class="subject"><a href="#post-117862">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Hi, I have made a program in &quot;Visual Basic&quot;(VB Called) ML.<br /><br />ML stands for math language.<br />I made it cause I needed to make alot math rutines, and just to make something like:<br /><br />***<br /><br />B = 4<br />C = B * 4<br />A = B * 3 + C<br /><br />***<br /><br />would take 15 min or more.(For me.)<br />That would proberbly mean 4 hours constant work for me, just for these rutines and what about the future?<br /><br />So I have developed a program called ML(Math Language).<br />ML can take something like:<br /><br />***<br /><br />B = 4<br />C = B * 4<br />A = B * 3 + C<br /><br />***<br /><br />and convert it to assembly in less then a second.<br /><br />The program includes a reference to using the Math Language.<br /><br />If you want to create a byte contaning 4 bytes just do something like:<br /><br />***<br /><br />MyByte as (4)bytes<br /><br />***<br /><br /><br />If you want to set the value of it then use something like:<br /><br />***<br /><br />MyByte = 100<br /><br />***<br /><br />I would say pretty simple.<br /><br />Note that it only support 1, 2, 4, 6, 8, 10 byte types. Though if you try with a 3 byte type then it would be converted to 4.<br /><br />But there might be some errors, assembly errors, incorrect use of the registers, performance errors, or just not easy to use as language.<br /><br />If you've found a error please report it on this thread or on my email:http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=6234bc812276459eb27b9c3de33dbccc<br />I have compiled it on a Win2000 so it may not work for some OS.<br /><br />Imediate reporting of errors is very much appreciated.<br /><br />The zip file only contains a exe file.<br /><br />I might post the dll files, if needed, cause there is no need to waste space.<br /><br />JulianS</div>
    <div class="meta">Posted on 2003-09-12 11:49:05 by JulianS</div>
   </div>
   <div class="post" id="post-117870">
    <div class="subject"><a href="#post-117870">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">I went to test it with the following:<br /><pre><code><br />A as 4bytes<br />B as 4bytes<br /><br />A = A * 4<br />B = A * 9 + B<br /></code></pre><br /><br />Your program produced the following code:<br /><pre><code><br />LEA AX, A<br />MUL 4<br />LEA 4, DX&#58;AX<br />MOV A, 4<br />LEA AX, A<br />MUL 9<br />LEA 9, DX&#58;AX<br />ADD B, 9<br /></code></pre><br />I must say the output is definitely wrong. Firstly A is defined as 4bytes (dword) and thus the whole value cannot fit into ax. Secondly you cannot mul immediate. You cannot lea immediate, DX:AX. <br /><br />Anyway I think your code should output<br /><pre><code><br />mov eax, A<br />shl eax, 2<br />mov A, eax ;&lt;- Not really needed, but what the hell<br />mov ecx, B<br />lea ecx, &#91;eax*8+ecx&#93;<br />add ecx, eax<br />mov B, ecx<br /></code></pre><br />Sometimes muiltplications could be easily replaced by shifts and divides by shifts provided they are power of 2.<br /><br />Anyway I wish you all the best.</div>
    <div class="meta">Posted on 2003-09-12 12:28:01 by roticv</div>
   </div>
   <div class="post" id="post-117871">
    <div class="subject"><a href="#post-117871">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Okay I just realised that I made a mistake (did not really read the yellow box). Since immediates are not allowed, I changed the code to:<br /><pre><code><br />A as 4bytes<br />B as 4bytes<br />C as 4bytes<br /><br />A = B / C<br />A = A * B<br />B = A * A + B<br />C = B / A<br /></code></pre><br />Your program output the following:<br /><pre><code><br />MOV A, B<br />LEA AX, A<br />MUL B<br />LEA B, DX&#58;AX<br />MOV A, B<br />LEA AX, A<br />MUL A<br />LEA A, DX&#58;AX<br />ADD B, A<br /><br />MOV C, B<br /></code></pre><br />That means your documentation lied. dividision still not supported :grin:<br />Like I said just now, most of it applied. Anyway you should not be using lea AX, A but mov eax, A<br /><br />Okay, my hand convertion would be <br /><pre><code><br />mov eax, B<br />mov ecx, C<br />cdq<br />div ecx<br />mov A, eax ;not really needed, but what the hell<br />mov ecx, B<br />mul ecx<br />mov ebx, eax ; not that I wanted to use ebx<br />mul ebx<br />add eax, ecx<br />mov B, eax ;not really needed, but what the hell<br />xchg eax, ecx<br />div ecx<br />mov A, ecx<br /></code></pre></div>
    <div class="meta">Posted on 2003-09-12 12:41:21 by roticv</div>
   </div>
   <div class="post" id="post-117884">
    <div class="subject"><a href="#post-117884">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Hi, you made a mistake you should use &quot;()&quot; when making bytes.<br /><br />You said you tried:<br /><br />***<br /><br />A as 4bytes<br />B as 4bytes<br />C as 4bytes<br /><br />A = B / C<br />A = A * B<br />B = A * A + B<br />C = B / A<br /><br />***<br /><br />Thats wrong it should be:<br /><br />***<br /><br />A as (4)bytes<br />B as (4)bytes<br />C as (4)bytes<br /><br />A = B / C<br />A = A * B<br />B = A * A + B<br />C = B / A<br /><br />***<br /><br />Now that would have produced:<br /><br />***<br /><br />LOCAL A :DWORD<br />LOCAL B :DWORD<br />LOCAL C :DWORD<br /><br />MOV A, B<br />MOV EAX, B<br />MUL A<br />LEA A, EDX:EAX<br />MOV EAX, A<br />MUL B<br />LEA B, EDX:EAX<br />MOV A, B<br />MOV EAX, A<br />MUL A<br />LEA A, EDX:EAX<br />MOV EAX, A<br />MUL A<br />LEA A, EDX:EAX<br />ADD B, A<br /><br />MOV C, B<br /><br />***<br /><br />But you're right, something is wrong when dividing.<br />Anyway it would have used &quot;mov&quot; instead of &quot;lea&quot; if used the &quot;()&quot;.<br /><br /><br />Anyway I will try correction that error and then I will release a new version very soon.<br /><br />Julian.</div>
    <div class="meta">Posted on 2003-09-12 14:33:45 by JulianS</div>
   </div>
   <div class="post" id="post-117885">
    <div class="subject"><a href="#post-117885">Updated version supports division</a></div>
    <div class="body">Here is an updated version.<br />It supports division.<br />When you write:<br /><br />***<br /><br />A as (4)bytes<br />B as (4)bytes<br />C as (4)bytes<br /><br />A = B / C<br />A = A * B<br />B = A * A + B<br />C = B / A<br /><br /><br />***<br /><br />It makes:<br /><br />***<br /><br /><br />LOCAL A :DWORD<br />LOCAL B :DWORD<br />LOCAL C :DWORD<br /><br />MOV EAX, C<br />DIV B<br />LEA B, EDX:EAX<br />MOV EAX, B<br />DIV C<br />LEA C, EDX:EAX<br />MOV A, C<br />MOV EAX, B<br />MUL A<br />LEA A, EDX:EAX<br />MOV EAX, A<br />MUL B<br />LEA B, EDX:EAX<br />MOV A, B<br />MOV EAX, A<br />MUL A<br />LEA A, EDX:EAX<br />MOV EAX, A<br />MUL A<br />LEA A, EDX:EAX<br />ADD B, A<br /><br />MOV EAX, A<br />DIV B<br />LEA B, EDX:EAX<br />MOV EAX, B<br />DIV A<br />LEA A, EDX:EAX<br />MOV C, A<br /><br />***<br /><br />Ohh and you said something about &quot;shl&quot; what does that do?<br />Is it something I need to know?<br /><br />Thank roticv, your help is appreciated.</div>
    <div class="meta">Posted on 2003-09-12 14:45:09 by JulianS</div>
   </div>
   <div class="post" id="post-117899">
    <div class="subject"><a href="#post-117899">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Hi, JulianS. This is a very good work you are doing here :alright: <br />BTW, &quot;shl&quot; is one of the shift instructions, basically whan they do is multiply and divide by powers of 2 by simply &quot;shifing&quot; bits left and right (similar to adding zeroes to the right of a decimal number to simulate a multiply by a power of 10). Masm comes with an opcode reference, so you might want to read about this instructions:<br />shl<br />shr<br />sal<br />sar<br />rol<br />ror<br />rcl<br />rcr<br />...and I hope I'm not fogetting any.</div>
    <div class="meta">Posted on 2003-09-12 17:18:10 by QvasiModo</div>
   </div>
   <div class="post" id="post-117919">
    <div class="subject"><a href="#post-117919">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">sar = shr<br /><br />Okay, <br />1) LEA A, EDX:EAX is wrong since there is no such opcodes. <br />2) MOV C, A is wrong too since there is no such opcodes.<br />3) edx is not cleared when doing divison (ie cdq or xor edx, edx)<br />4) My hand conversion is still smaller and shorter. :grin: <br />5) Maybe your code should use more registers, since using registers rather than memory produce shorter opcodes (save more space.)</div>
    <div class="meta">Posted on 2003-09-12 23:27:40 by roticv</div>
   </div>
   <div class="post" id="post-117939">
    <div class="subject"><a href="#post-117939">Please give me something to work with. Thanks.</a></div>
    <div class="body">1. I have read in the help files that every time you divide the results will be in more bytes then the bytes you div?ded. So I have to use &quot;LEA&quot; for data conversion.<br />If that is wrong that please tell what I should use: &quot;LEA&quot; or &quot;MOV&quot; or &quot;Other&quot;.<br />But I had doubt about using &quot;EDX:EAX&quot;. Is using &quot;EDX:EAX&quot; right?<br /><br />2. &quot;MOV&quot; is a correct opcode from what I know. If you think that there's a better opcode then please tell what it is called and how to use it.<br /><br />3. Ups. I will clear edx when using it. But do I need to return it's old value back to it when it's done with calculating?<br /><br />4. Let's see how the program develops, cause I am sure I am gonna work on it another week or more.<br /><br />5. Well that's the hole point of this code. To save people from using math opcodes. And maybe also from using bytes. Anyway if you have an idea of how to use more opcodes then I will appreciate it if you tell me.<br /><br />Anyway as soon as you have answered these questions roticv I will have more to work with and I'll start making a new update.</div>
    <div class="meta">Posted on 2003-09-13 03:37:38 by JulianS</div>
   </div>
   <div class="post" id="post-117941">
    <div class="subject"><a href="#post-117941">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Maybe you can have an option on what registers that could be corrupted (ie used but not preserved). Just a suggestion<br /><br />1. Actually for multiplication, the results are in EDX:EAX. However since A, B and C are declared as dword, I do no see the point of storing the upper 32bit of the result. So simply store the value in eax. <br /><br />2. Technically you cannot move memory to memory in one opcode, but there are work arounds for it. The first method is to use stack. ie <strong>push A pop B</strong> or using a register such as <strong>mov eax, A mov B, eax</strong><br /><br />3. It depends sometiem the value of edx can be destroyed. For the rule of the C compiler. Windows api follows this logic too since it is coded in C if I am not wrong. Preserve ebx, edi, esi if you use them, edx, eax, ecx could be destroyed. <br /><br />4. Sometimes it is hard to code a program that can code better than a guru. Okay, firstly I doubt you would use xchg in your program, but of course it was because I did not want to rely too much on memory. Sometimes, there is no need for local variables because the registers take care of it.<br /><br />5. For maths the following opcode could be use:<br />lea ;very good for multiplications and addition and subtration and combintion of them<br />div/idiv<br />mul/imul<br />shr<br />shl/sar<br />and ; for % if the value is 2^x-1<br />add<br />sub<br />adc<br />sbb<br /><br />Maybe for some optimisations:<br />xchg<br /><br />Some notes, you can use shifts with cl. Maybe you can try adding some support for constant instead of pure variables. Sorry but I have yet to test out your other data type. But I doubt they would be used much, since the cpu is 32bit. Maybe you can try adding some support for brackets.</div>
    <div class="meta">Posted on 2003-09-13 04:00:15 by roticv</div>
   </div>
   <div class="post" id="post-117942">
    <div class="subject"><a href="#post-117942">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Okay I went to test with 2byte. Here's my code<br /><pre><code><br />A as &#40;4&#41;byte<br />B as &#40;2&#41;byte<br />C as &#40;4&#41;byte<br /><br />A = B<br />A = A - C * A<br /></code></pre><br />Generated masm code<br /><pre><code><br />MOV A, B<br />SUB C, A<br />LEA AX, C<br />MUL A<br />LEA A, DX&#58;AX<br /></code></pre><br />1. Okay the part abt opcode memory,memory does not exist still apply. There is no opcodes with 2 modrm. The most is just one modrm. So there is no such thing as <strong>mov A, B</strong> and <strong>sub C, A</strong>.<br /><br />2. B is 2byte ie a word variable. You cannot just <strong>mov eax, B mov A, eax</strong> but you need <strong>movzx eax, B mov A, eax</strong><br /><br />3. What I mentioned earlier still applies. <br /><br />Anyway your program seem to look more like a compiler to me. Good luck to the creation of your compiler.</div>
    <div class="meta">Posted on 2003-09-13 04:08:03 by roticv</div>
   </div>
   <div class="post" id="post-117943">
    <div class="subject"><a href="#post-117943">You made a mistake again.</a></div>
    <div class="body">This time you remember to use &quot;()&quot; but you forgot to say &quot;bytes&quot; instead of &quot;byte&quot;.<br /><br />Here is the real code you should have used:<br /><br />***<br /><br />A as (4)bytes<br />B as (2)bytes<br />C as (4)bytes<br /><br />A = B<br />A = A - C * A<br /><br /><br />***<br /><br />Now that would make:<br /><br />***<br /><br /><br />LOCAL A :DWORD<br />LOCAL B :WORD<br />LOCAL C :DWORD<br /><br />LEA A,  B<br />SUB C, A<br />MOV EAX, A<br />MUL C<br />LEA C, EDX:EAX<br />MOV EAX, C<br />MUL A<br />LEA A, EDX:EAX<br /><br />***<br /><br />So instead of using &quot;MOVZX&quot; I used &quot;LEA&quot;. <br />Is that wrong?:confused:<br /><br />About SUB?<br /><br />Well here's a quote from the opcodes help file:<br /><br />***<br /><br />SUB - Subtract<br />        Usage:  SUB     dest,src<br />        Modifies flags: AF CF OF PF SF ZF<br />        The source is subtracted from the destination and the result is<br />        stored in the destination.<br /><br />***<br /><br />According to this quote you have a destination and a source. The source is subtracted from the destination and stored in the destination.<br /><br />Very simple.<br /><br />Julian</div>
    <div class="meta">Posted on 2003-09-13 04:28:24 by JulianS</div>
   </div>
   <div class="post" id="post-117957">
    <div class="subject"><a href="#post-117957">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Let me quote another source<br /><pre><code><br />SUB ? Integer Subtraction <br />2C ib SUB AL,imm8 Subtract imm8 from AL<br />2D iw SUB AX,imm16 Subtract imm16 from AX<br />2D id SUB EAX,imm32 Subtract imm32 from EAX<br />80 /5 ib SUB r/m8,imm8 Subtract imm8 from r/m8<br />81 /5 iw SUB r/m16,imm16 Subtract imm16 from r/m16<br />81 /5 id SUB r/m32,imm32 Subtract imm32 from r/m32<br />83 /5 ib SUB r/m16,imm8 Subtract sign-extended imm8 from r/m16<br />83 /5 ib SUB r/m32,imm8 Subtract sign-extended imm8 from r/m32<br />28 /r SUB r/m8,r8 Subtract r8 from r/m8<br />29 /r SUB r/m16,r16 Subtract r16 from r/m16<br />29 /r SUB r/m32,r32 Subtract r32 from r/m32<br />2A /r SUB r8,r/m8 Subtract r/m8 from r8<br />2B /r SUB r16,r/m16 Subtract r/m16 from r16<br />2B /r SUB r32,r/m32 Subtract r/m32 from r32<br /></code></pre><br />You might wonder what is r/m32. Okay r/m32 is modrm. It is in the form of xx:xxx:xxx. The first 2upperbits tells the cpu how to treat what is in the lower 3bit. (ie to view it as a pointer or a register) So in short for any opcode that makes use of a full modrm, one *must* be a register, and the other can be a register or a pointer. So like I did mention so many times, there is no such opcodes that have both its destination and source as memory.<br /><br />lea is different from mov. Firstly it loads the address of the pointer (What is within the brackets) into the register. Technically your lea is used wrongly because the destination *must* be a register for lea. Seriously try compiling the output.<br /><br />PS. Did you ever tried compiling the output? There will be <strong>alot</strong> of errors.</div>
    <div class="meta">Posted on 2003-09-13 07:20:29 by roticv</div>
   </div>
   <div class="post" id="post-117966">
    <div class="subject"><a href="#post-117966">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body"><div class="quote"><br />Did you ever tried compiling the output? There will be <strong>alot</strong> of errors. </div><br />He's right. You should also try compiling his manual conversions and run them with a debugger, to see how they work step by step. This helps a lot understanding what's really going on, what values are in the registers at different places in the code, etc. Compare with the output your program is generating and you'll quickly see the differences.</div>
    <div class="meta">Posted on 2003-09-13 11:17:48 by QvasiModo</div>
   </div>
   <div class="post" id="post-117979">
    <div class="subject"><a href="#post-117979">Debugger? Where? Release tommorow</a></div>
    <div class="body">Sorry but I don't have a debugger.<br />I only have masm32.<br />Do you know any debugger?<br />If so then please tell where to download it.<br /><br />Anyway I will release a new version tommorow.<br />In that version I hope most errors has been solved.<br /><br /><br />Julian</div>
    <div class="meta">Posted on 2003-09-13 12:18:50 by JulianS</div>
   </div>
   <div class="post" id="post-117982">
    <div class="subject"><a href="#post-117982">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Quite interesting program you've got there JulianS. Thanks for sharing it :) <br /><br />OllyDbg is a free debugger:<br /><a target="_blank" href="http://home.t-online.de/home/Ollydbg/">http://home.t-online.de/home/Ollydbg/</a></div>
    <div class="meta">Posted on 2003-09-13 12:34:53 by Delight</div>
   </div>
   <div class="post" id="post-118235">
    <div class="subject"><a href="#post-118235">New Release!</a></div>
    <div class="body">Hi, new update. But sorry for being one day to late. (Connection problems etc......)<br /><br />Anyway the exe file has a new function.<br />A function that you can define your self.<br />The function let's you select the upcode that you want to convert bettwen data types with.<br />Anyway, from start it uses: &quot;MOVSD Des, Dat&quot; do you have any suggestions to what it should use from start?</div>
    <div class="meta">Posted on 2003-09-15 12:41:47 by JulianS</div>
   </div>
   <div class="post" id="post-118245">
    <div class="subject"><a href="#post-118245">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Interesting start.<br /><br />I will be very interested when it can handle the full BEDMAS ordering for an expression.  If it helps i wrote a parser using a binary tree to do something similar.<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=11026&amp;perpage=15&amp;highlight=Parser&amp;pagenumber=1">http://www.asmcommunity.net/board/index.php?topic=11026&amp;perpage=15&amp;highlight=Parser&amp;pagenumber=1</a><br /><br />Regards,<br />:NaN:</div>
    <div class="meta">Posted on 2003-09-15 16:50:01 by NaN</div>
   </div>
   <div class="post" id="post-118437">
    <div class="subject"><a href="#post-118437">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Hey NaN,<br /><br />I do think your program is very interseting. I think it is possible for you to add some support for basic algebra. Maybe it could even be grown into one that can help me differeniate/intergrate :grin: I will try to take a look into it when I have the time. For now, time is pretty short for me. :)<br /><br />Regards,<br />Victor</div>
    <div class="meta">Posted on 2003-09-17 08:38:42 by roticv</div>
   </div>
   <div class="post" id="post-118443">
    <div class="subject"><a href="#post-118443">Don't hurry to much nor to less</a></div>
    <div class="body">Victor what do you belive should be in the white box in ML?<br />You don't have to hurry but getting an answer before the day after tommorow would be nice.<br />Thanks.<br /><br />Julian</div>
    <div class="meta">Posted on 2003-09-17 09:41:37 by JulianS</div>
   </div>
   <div class="post" id="post-118452">
    <div class="subject"><a href="#post-118452">Beta Testing ML(Math Language). ML takes math and converts i</a></div>
    <div class="body">Is movsd used as a macro? If I remmeber correctly movsd is for stringopcodes, so perhaps change it to movd and define the marco movd as<br /><pre><code><br />movd MACRO Var1, Var2<br />	push     Var2<br />	pop     Var1<br />ENDM<br /></code></pre><br />Okay when I use<br /><pre><code><br />A as &#40;4&#41;bytes<br />B as &#40;2&#41;bytes<br />C as &#40;4&#41;bytes<br />D as &#40;2&#41;bytes<br /><br />A = B<br />A = C * D - A / B<br />D = A</code></pre><br />I get an intersting error. Yippy I crashed VB.. hahaha<br /><br /><pre><code><br />---------------------------<br />ML<br />---------------------------<br />Run-time error '13'&#58;<br /><br />Type mismatch<br />---------------------------<br />OK   <br />---------------------------<br /></code></pre><br />However looking at the generated code, there are still many errors. I would suggest that you remove support for byte and words, as it would make your job much easier. Also very seldom people use byte or word nowadays. (Remember that we are now using a 32-bit cpu :) )<br />Okay VB crashing is getting irritating. The next test code I put together failed badly.<br /><pre><code><br />A as &#40;4&#41;bytes <br />B as &#40;4&#41;bytes<br />C as &#40;4&#41;bytes<br /><br />A = B<br />A = C - A<br />B = C / A<br />C = B + A</code></pre><br />If I remove the declaration, it just work fine. mhmm that's weird I must say. Now let me touch on the generated output<br /><pre><code><br />MOV A, B<br />SUB A, C<br /><br />MOVSD AX, C<br /><br />DIV A<br />MOVSD DX&#58;AX, A<br /><br />MOV B, A<br />ADD A, B<br />MOV C, A<br /></code></pre><br />1) For <strong>A = B</strong> the generated code is <strong>mov A, B</strong> which is wrong. Perhaps you add the marco above and output it as <strong>movd A, B</strong><br />2) For <strong>A = C - A</strong>, the generated code is <strong>sub C, A</strong> which is wrong. You need to add <strong>mov eax, A</strong> then <strong>sub C, eax</strong>. Perhaps you can use some marcos too (again.. hehe...). I have created one for you. <br /><pre><code>subd MACRO Var1, Var2<br />	mov     eax, Var2<br />	sub     Var1, eax<br />ENDM</code></pre><br />Use it like <strong>subd C, A</strong><br /><br />One more thing, you need to check where it is stored. For example if the input is <strong>A = C - B</strong> You need to change it by adding (the most crude code I could think of)<br /><pre><code><br />movd A, C<br />subd C, B<br /></code></pre><br />Or perhaps you can create yet another marco. But now I am too lazy to code one more :tongue:<br />3) Now for <strong>B = C / A</strong>. The output code is wrong I must say. Ah I some butched code<br /><pre><code><br />mov eax, C<br />cdq<br />div A<br />mov B, eax<br /></code></pre><br />Maybe you can also derive a marco for it. haha<br />4) For <strong>C = B + A</strong>, you can do what I said for sub. Perhaps even coding another marco. Just make sure you do not produce code like <strong>movd C, C</strong> or something like that.<br /><br />Since I missed testing out multiplication, I code more test code.<br /><pre><code>A = B * C</code></pre><br />Generated code:<br /><pre><code><br />MOVSD AX, B<br /><br />MUL C<br />MOVSD DX&#58;AX, C<br /><br />MOV A, C</code></pre><br />Ah it is wrong. Perhaps you can change the output such that it looks like the following:<br /><pre><code><br />mov eax, B<br />imul eax, C<br />mov A, eax<br /></code></pre><br />Or something like that.<br /><br />I am tired, but I think it is better that you work on the basic operations first. The more advance stuffs will have to come later as you need do what NaNdid, create a good parser. Creating a good parser is hard work imo. Okay I think I should stop here. Long post indeed. :)<br /><br />Regards,<br />Victor</div>
    <div class="meta">Posted on 2003-09-17 11:05:40 by roticv</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=15167&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=15167&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="15167" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=15167&amp;page=2">&gt;</a><a href="../?id=15167&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>