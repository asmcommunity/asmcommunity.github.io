<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>int 21h - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2043" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2043">int 21h</a></p>
   <div class="post" id="post-12995">
    <div class="subject"><a href="#post-12995">int 21h</a></div>
    <div class="body">.386<br />.model flat,stdcall<br />option casemap:none<br />.data<br />.data?<br />.code<br /><br />start:<br /><br />    mov AX, 4C00h ; (Exit code)<br />    int 21h	<br /><br />end start<br /><br />; -----------------------<br /><br />I try to used some Interruptions under Masm, but it's not work.<br />What isn't right in this little code.</div>
    <div class="meta">Posted on 2001-11-25 14:24:38 by Morgatte</div>
   </div>
   <div class="post" id="post-13003">
    <div class="subject"><a href="#post-13003">int 21h</a></div>
    <div class="body">Morgatte,<br /><br />DOS interrupts are not used in 32 bit code and in most instances, you will get a GP fault if you try and use them.<br /><br /><br />Put the following include files at the top of your code,<br /><pre><code><br />      include \masm32\include\windows.inc<br />      include \masm32\include\user32.inc<br />      include \masm32\include\kernel32.inc<br /><br />      includelib \masm32\lib\user32.lib<br />      includelib \masm32\lib\kernel32.lib<br /></code></pre><br />Replace the interrupt code in your example with the windows API,<br /><br />invoke ExitProcess,0<br /><br />and it should build OK.<br /><br />The include files are part of MASM32.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2001-11-25 15:42:59 by hutch--</div>
   </div>
   <div class="post" id="post-13007">
    <div class="subject"><a href="#post-13007">int 21h</a></div>
    <div class="body">DOS and 16bit code, RIP.</div>
    <div class="meta">Posted on 2001-11-25 15:49:59 by f0dder</div>
   </div>
   <div class="post" id="post-13011">
    <div class="subject"><a href="#post-13011">int 21h</a></div>
    <div class="body">f0dder,<br /><br />isn't &quot;RIP&quot; MAC terminology for rasterised image processing ?<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2001-11-25 16:38:31 by hutch--</div>
   </div>
   <div class="post" id="post-13013">
    <div class="subject"><a href="#post-13013">int 21h</a></div>
    <div class="body">Dunno, but it's &quot;rest in peace&quot;... or, in the case of 16bit/dos, &quot;rest in pieces&quot; ;)</div>
    <div class="meta">Posted on 2001-11-25 16:45:27 by f0dder</div>
   </div>
   <div class="post" id="post-13062">
    <div class="subject"><a href="#post-13062">int 21h</a></div>
    <div class="body">Ok, but we can't reroute an interruption under Win32, so ?<br />TSRs exist under Win32, don't there ?</div>
    <div class="meta">Posted on 2001-11-26 06:22:31 by Morgatte</div>
   </div>
   <div class="post" id="post-13069">
    <div class="subject"><a href="#post-13069">int 21h</a></div>
    <div class="body">Morgatte, windows is a quite different world than DOS. You don't<br />&quot;TSR&quot;, you just refrain from terminating your app =).</div>
    <div class="meta">Posted on 2001-11-26 06:55:01 by f0dder</div>
   </div>
   <div class="post" id="post-13085">
    <div class="subject"><a href="#post-13085">int 21h</a></div>
    <div class="body">Hi Morgatte,<br />You come back ! That makes a long time !<br /><br />--&gt; T'es revenu ! Ca fait un bail !<br /><br />Another French man.</div>
    <div class="meta">Posted on 2001-11-26 09:24:39 by Vom-bonjour:-()</div>
   </div>
  </div>
 </body>
</html>