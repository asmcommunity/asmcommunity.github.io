<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>eax, edx or something... Need help from somebody who has kno - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14892" />
    <link rel="next" href="../?id=14892&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=17">Iczelion's Tutorials</a> &raquo; <a href="../?id=14892">eax, edx or something... Need help from somebody who has kno</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=14892&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14892&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14892" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14892&amp;page=2">&gt;</a><a href="../?id=14892&amp;page=2">&raquo;</a></form>   <div class="post" id="post-115582">
    <div class="subject"><a href="#post-115582">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">Look I am a newbie.<br />I have readed every tutorial until 7.<br />I have trouble with Tutorial 6: Keyboard Input.<br />I understand the tutorial completly, but for any tutorial I come by I make an example in this case I took this code:<br /><br />***<br /><br />.386 <br />.model flat,stdcall <br />option casemap:none <br />WinMain proto :DWORD,:DWORD,:DWORD,:DWORD <br /><br />include \masm32\include\windows.inc <br />include \masm32\include\user32.inc <br />include \masm32\include\kernel32.inc <br />include \masm32\include\gdi32.inc <br />includelib \masm32\lib\user32.lib <br />includelib \masm32\lib\kernel32.lib <br />includelib \masm32\lib\gdi32.lib <br /><br />.data <br />ClassName db &quot;SimpleWinClass&quot;,0 <br />AppName  db &quot;Our First Window&quot;,0 <br />char WPARAM 20h                         ; the character the program receives from keyboard <br /><br />.data? <br />hInstance HINSTANCE ? <br />CommandLine LPSTR ? <br /><br />.code <br />start: <br />    invoke GetModuleHandle, NULL <br />    mov    hInstance,eax <br />    invoke GetCommandLine<br />    mov CommandLine,eax<br />    invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT <br />    invoke ExitProcess,eax <br /><br />WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD <br />    LOCAL wc:WNDCLASSEX <br />    LOCAL msg:MSG <br />    LOCAL hwnd:HWND <br />    mov   wc.cbSize,SIZEOF WNDCLASSEX <br />    mov   wc.style, CS_HREDRAW or CS_VREDRAW <br />    mov   wc.lpfnWndProc, OFFSET WndProc <br />    mov   wc.cbClsExtra,NULL <br />    mov   wc.cbWndExtra,NULL <br />    push  hInst <br />    pop   wc.hInstance <br />    mov   wc.hbrBackground,COLOR_WINDOW+1 <br />    mov   wc.lpszMenuName,NULL <br />    mov   wc.lpszClassName,OFFSET ClassName <br />    invoke LoadIcon,NULL,IDI_APPLICATION <br />    mov   wc.hIcon,eax <br />    mov   wc.hIconSm,eax <br />    invoke LoadCursor,NULL,IDC_ARROW <br />    mov   wc.hCursor,eax <br />    invoke RegisterClassEx, addr wc <br />    invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\ <br />           WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\ <br />           CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\ <br />           hInst,NULL <br />    mov   hwnd,eax <br />    invoke ShowWindow, hwnd,SW_SHOWNORMAL <br />    invoke UpdateWindow, hwnd <br />    .WHILE TRUE <br />                invoke GetMessage, ADDR msg,NULL,0,0 <br />                .BREAK .IF (!eax) <br />                invoke TranslateMessage, ADDR msg <br />                invoke DispatchMessage, ADDR msg <br />        .ENDW <br />    mov     eax,msg.wParam <br />    ret <br />WinMain endp <br /><br />WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM <br />    LOCAL hdc:HDC <br />    LOCAL ps:PAINTSTRUCT <br /><br />    .IF uMsg==WM_DESTROY <br />        invoke PostQuitMessage,NULL <br />    .ELSEIF uMsg==WM_CHAR <br />        push wParam <br />        pop  char <br />        invoke InvalidateRect, hWnd,NULL,TRUE <br />    .ELSEIF uMsg==WM_PAINT <br />        invoke BeginPaint,hWnd, ADDR ps <br />        mov    hdc,eax <br />        invoke TextOut,hdc,0,0,ADDR char,1 <br />        invoke EndPaint,hWnd, ADDR ps <br />    .ELSE <br />        invoke DefWindowProc,hWnd,uMsg,wParam,lParam <br />        ret <br />    .ENDIF <br />    xor    eax,eax <br />    ret <br />WndProc endp <br />end start <br /><br />***<br /><br />If you take the code and assemble it you will see that only one character can be showen at the time.<br />I wanted to change this to show more then one character, though only on one line, so I tried to make a register count how many letters there where.<br />The technique of this is that where the old characters was the screen would not be updated, only where the new character where(It's saves alot of time to do it this way and it should be easy. But it is not easy. Anyway it woulden't allow to change old characters.).<br />So if there was 12 characters a register would contain a number like 96(&quot;12*8&quot;, 8 is length of each character). Then it would just paint a new character a new place(using the number from the register (96) ) until there where no more space.<br /><br />Diden't work.<br /><br />:(<br /><br />Why? <br /><br />Well: I am newbie!<br />and: I suck when it comes to registers!<br /><br />Why is that?<br /><br />Well:I suck to registers cause the register tutorials are so booooooooooring. Lucky and unfortunatly for me the tutorials by Iczelion (that I like very much, indeed) did not cover registers that much. <br /><br />My questions:<br /><br />So what do I do?<br />Is my own code at line &quot;79&quot; right(Diden't work that well) ?<br /><br />***<br /><br />    .ELSEIF uMsg==WM_PAINT <br />        invoke BeginPaint,hWnd, ADDR ps <br />        mov    hdc,eax <br />        add     edx, 8<br />        invoke TextOut,hdc,edx,0,ADDR char,1 <br />        invoke EndPaint,hWnd, ADDR ps <br />    .ELSE <br /><br />***<br /><br />That code is placed instead of:<br /><br />***<br /><br />    .ELSEIF uMsg==WM_PAINT <br />        invoke BeginPaint,hWnd, ADDR ps <br />        mov    hdc,eax <br />        invoke TextOut,hdc,0,0,ADDR char,1 <br />        invoke EndPaint,hWnd, ADDR ps <br />    .ELSE <br /><br />***<br /><br />I mean what's wrong?<br />Is it the register type?<br />Is there another way to do this?<br /><br />Does Iczelion in any tutorial cover registers specially?<br /><br />:confused:<br /><br />Julian<br /><br /><br />Here is a fact:<br />###<br />Once again a newbie needs help.<br />Finally when the newbie has got helped several times he is ready to help.<br />Then the circle is complete.<br />###</div>
    <div class="meta">Posted on 2003-08-26 12:58:15 by JulianS</div>
   </div>
   <div class="post" id="post-115718">
    <div class="subject"><a href="#post-115718">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">My sugestion is use a space in the data section, some like numberOfChars dd 0 and use it instead of the register.<br /><br /><br />About the registers some are trashed and others no (be calls to the api, and sure by your own procedures, functions, or whatever you call them, the api functions have a standar of what save and what i can trash, for your procedures you choice too what to trash and what to save ), you can read this at tut 1 I think or 2 in case that you dont have the answer there.<br /><br />Hope that help.<br /><br />Nice day.</div>
    <div class="meta">Posted on 2003-08-27 08:17:02 by rea</div>
   </div>
   <div class="post" id="post-115728">
    <div class="subject"><a href="#post-115728">Please show me how you would do it?</a></div>
    <div class="body">Could you please show me how you would do it?<br /><br />and what's a &quot;dd&quot; type?<br />I have only heard of db and dw, noting more.<br />Could you please give me a list of variable types?<br /><br />Thank you.<br /><br /><br />Julian<br /><br />Here is a fact that is very likely to be wrong<br />###<br />If variables and registers are stored in memory, then this is wrong:<br /><br />Variables + registers = Memory<br /><br />But even though, this is right:<br /><br />Memory = Variables + Registers<br /><br />That's cause registers and variables does not make memory, but memory makes them.<br />###</div>
    <div class="meta">Posted on 2003-08-27 08:40:44 by JulianS</div>
   </div>
   <div class="post" id="post-115731">
    <div class="subject"><a href="#post-115731">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">dd = declare dword, dw = declare word, db = declare byte and so on<br /><br />When you call a function, most likely your edx/ecx/eax will be corrupted (you cannot take your chances), so if you want to use unmodified registers use ebx/edi/esi. However if you are the callback function, remember to preserve ebx/esi/edi because sometimes windows's code uses them, and if you corrupt the values in it.... <br /><br /><div class="quote">If variables and registers are stored in memory, then this is wrong:<br /><br />Variables + registers = Memory<br /><br />But even though, this is right:<br /><br />Memory = Variables + Registers<br /><br />That's cause registers and variables does not make memory, but memory makes them.<br /></div><br />I don't think you are correct. Registers can be access as both a data type or as a pointer to an address. Variables (ie global variables) are part of memory and local variables are part of the stack (which is also memory). So Memory != variables + registers. It all depends on how is the opcode used. When square brackets are present, it means that the data type is memory (except for lea).</div>
    <div class="meta">Posted on 2003-08-27 09:04:49 by roticv</div>
   </div>
   <div class="post" id="post-115733">
    <div class="subject"><a href="#post-115733">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">Than you very much for helping out.<br /><br /><br /><div class="quote"><br />dd = declare dword, dw = declare word, db = declare byte and so on<br />I don't think you are correct. Registers can be access as both a data type or as a pointer to an address. Variables (ie global variables) are part of memory and local variables are part of the stack (which is also memory). So Memory != variables + registers. It all depends on how is the opcode used. When square brackets are present, it means that the data type is memory (except for lea). </div><br /><br />You could actually say:<br /><br />.If OpCode = RightOpCode then<br />Memory = Variables<br />.EndIF<br /><br />Right?<br /><br />:-)</div>
    <div class="meta">Posted on 2003-08-27 09:08:46 by JulianS</div>
   </div>
   <div class="post" id="post-115734">
    <div class="subject"><a href="#post-115734">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">I mean something else<br /><br /><pre><code><br />.data?<br />temp dd ?<br />.code<br />...<br />mov eax, offset temp<br />mov ebx, &#91;eax&#93;<br /></code></pre><br />is the same as<br /><pre><code><br />mov ebx, temp<br /></code></pre><br />Of course masm isn't technically correct. Fasm is more &quot;correct&quot; on this issue of square bracket = memory. Bah! I think I am making you more confused. Sorry for any confusion caused.</div>
    <div class="meta">Posted on 2003-08-27 09:12:40 by roticv</div>
   </div>
   <div class="post" id="post-115737">
    <div class="subject"><a href="#post-115737">Take a look at my code</a></div>
    <div class="body">Okay. Roticv would you please take a look at my code, and see what's wrong?<br /><br />***<br /><br />.386 <br />.model flat,stdcall <br />option casemap:none <br />WinMain proto :DWORD,:DWORD,:DWORD,:DWORD <br /><br />include \masm32\include\windows.inc <br />include \masm32\include\user32.inc <br />include \masm32\include\kernel32.inc <br />include \masm32\include\gdi32.inc <br />includelib \masm32\lib\user32.lib <br />includelib \masm32\lib\kernel32.lib <br />includelib \masm32\lib\gdi32.lib <br /><br />.data <br />ClassName db &quot;SimpleWinClass&quot;,0 <br />AppName  db &quot;Our First Window&quot;,0 <br />char WPARAM 20h                         ; the character the program receives from keyboard <br />numberOfChars dd 0<br /><br />.data? <br />hInstance HINSTANCE ? <br />CommandLine LPSTR ? <br /><br />.code <br />start: <br />    invoke GetModuleHandle, NULL <br />    mov    hInstance,eax <br />    invoke GetCommandLine<br />    mov CommandLine,eax<br />    invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT <br />    invoke ExitProcess,eax <br /><br />WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD <br />    LOCAL wc:WNDCLASSEX <br />    LOCAL msg:MSG <br />    LOCAL hwnd:HWND <br />    mov   wc.cbSize,SIZEOF WNDCLASSEX <br />    mov   wc.style, CS_HREDRAW or CS_VREDRAW <br />    mov   wc.lpfnWndProc, OFFSET WndProc <br />    mov   wc.cbClsExtra,NULL <br />    mov   wc.cbWndExtra,NULL <br />    push  hInst <br />    pop   wc.hInstance <br />    mov   wc.hbrBackground,COLOR_WINDOW+1 <br />    mov   wc.lpszMenuName,NULL <br />    mov   wc.lpszClassName,OFFSET ClassName <br />    invoke LoadIcon,NULL,IDI_APPLICATION <br />    mov   wc.hIcon,eax <br />    mov   wc.hIconSm,eax <br />    invoke LoadCursor,NULL,IDC_ARROW <br />    mov   wc.hCursor,eax <br />    invoke RegisterClassEx, addr wc <br />    invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\ <br />           WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\ <br />           CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\ <br />           hInst,NULL <br />    mov   hwnd,eax <br />    invoke ShowWindow, hwnd,SW_SHOWNORMAL <br />    invoke UpdateWindow, hwnd <br />    .WHILE TRUE <br />                invoke GetMessage, ADDR msg,NULL,0,0 <br />                .BREAK .IF (!eax) <br />                invoke TranslateMessage, ADDR msg <br />                invoke DispatchMessage, ADDR msg <br />        .ENDW <br />    mov     eax,msg.wParam <br />    ret <br />WinMain endp <br /><br />WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM <br />    LOCAL hdc:HDC <br />    LOCAL ps:PAINTSTRUCT <br /><br />    .IF uMsg==WM_DESTROY <br />        invoke PostQuitMessage,NULL <br />    .ELSEIF uMsg==WM_CHAR <br />        push wParam <br />        pop  char <br />        invoke InvalidateRect, hWnd,NULL,TRUE <br />    .ELSEIF uMsg==WM_PAINT <br />        invoke BeginPaint,hWnd, ADDR ps <br />        mov    hdc,eax <br />        add    numberOfChars , 8<br />        invoke TextOut,hdc,numberOfChars ,0,ADDR char,1 <br />        invoke EndPaint,hWnd, ADDR ps <br />    .ELSE <br />        invoke DefWindowProc,hWnd,uMsg,wParam,lParam <br />        ret <br />    .ENDIF <br />    xor    eax,eax <br />    ret <br />WndProc endp <br />end start <br />  <br />***<br /><br />I belive that the wrong thing is the: &quot;invoke InvalidateRect, hWnd,NULL,TRUE&quot; ?t deletes the old text so I would actually need the program to remember all the text.<br />How can I make a variable put more text (words) on it?`<br />I mean if the varibale contains &quot;H&quot; then it would get the character &quot;I&quot; and make it &quot;HI&quot;.<br />How could this be possible?<br /><br />Sorry for having almost no knowglede of string manipulation.<br /><br />Julian<br /><br />Here is a true fact<br />###<br />Somebody will see this.<br />If this is a lie nobody knows.<br />###</div>
    <div class="meta">Posted on 2003-08-27 09:21:00 by JulianS</div>
   </div>
   <div class="post" id="post-115741">
    <div class="subject"><a href="#post-115741">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">I think you need to make some modifications.<br /><br /><pre><code><br />.data<br />char db 64 dup &#40;0&#41;<br />.code<br />...<br />.ELSEIF uMsg==WM_CHAR <br />mov edx, wparam<br />mov ecx, offset char<br />@@&#58;<br />cmp byte ptr&#91;ecx&#93;,0<br />lea ecx, &#91;ecx+1&#93;<br />jnz @B<br />mov &#91;ecx&#93;, dl<br />invoke InvalidateRect, hWnd,NULL,TRUE <br />...<br /></code></pre><br />If I am not wrong. Actually I do not think that string manipulation is difficult once you get the hang of it. Oh yes also change &quot;add numberOfChars , 8&quot; to &quot;add numberOfChars,1 &quot;.</div>
    <div class="meta">Posted on 2003-08-27 09:30:03 by roticv</div>
   </div>
   <div class="post" id="post-115749">
    <div class="subject"><a href="#post-115749">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body"><div class="quote"><br />I think you need to make some modifications.<br /><br /><pre><code><br />.data<br />char db 64 dup &#40;0&#41;<br />.code<br />...<br />.ELSEIF uMsg==WM_CHAR <br />mov edx, wparam<br />mov ecx, offset char<br />@@&#58;<br />cmp byte ptr&#91;ecx&#93;,0<br />lea ecx, &#91;ecx+1&#93;<br />jnz @B<br />mov &#91;ecx&#93;, dl<br />invoke InvalidateRect, hWnd,NULL,TRUE <br />...<br /></code></pre><br />If I am not wrong. Actually I do not think that string manipulation is difficult once you get the hang of it. Oh yes also change &quot;add numberOfChars , 8&quot; to &quot;add numberOfChars,1 &quot;. </div><br /><br />If you have tried it you will get a error about &quot;wparam&quot;.<br />I belive you never created a variable named that.<br />Why is that?<br />But anyway what would you use it for?<br /><br />When I tried to remove the variable nothing appeared on the screen.<br />Should you not make a loop or something?<br /><br />Your help is very good.<br />Thank you.</div>
    <div class="meta">Posted on 2003-08-27 09:43:32 by JulianS</div>
   </div>
   <div class="post" id="post-115754">
    <div class="subject"><a href="#post-115754">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">My mistake. It should be wParam instead. :grin: <br /><br />Okay let me explain the basics of the loop. Your code is like keep adding a character to a buffer (in this case the variable name is char). The loop scans for the null-terminator (Using The Svin's fiction point logic). Since the low byte of wParam is the character you need to add, the mov , dl copies the character to the buffer. I did not copy a null to the string as I had defined the buffer to be full of zeros.</div>
    <div class="meta">Posted on 2003-08-27 09:49:50 by roticv</div>
   </div>
   <div class="post" id="post-115759">
    <div class="subject"><a href="#post-115759">No error and No text.</a></div>
    <div class="body">Sorry to mention it but still does not work.<br />No errors but either no text.<br />I change some settings for: &quot;invoke TextOut,hdc, numberOfChars ,1,ADDR char, 1&quot; and then I discovered that you might make a jump function that simply jumps until it meets 0(Null). <br />Could you show me how this is done?<br />Here is the code again fully manipulated:<br /><br />***<br /><br />.386 <br />.model flat,stdcall <br />option casemap:none <br />WinMain proto :DWORD,:DWORD,:DWORD,:DWORD <br /><br />include \masm32\include\windows.inc <br />include \masm32\include\user32.inc <br />include \masm32\include\kernel32.inc <br />include \masm32\include\gdi32.inc <br />includelib \masm32\lib\user32.lib <br />includelib \masm32\lib\kernel32.lib <br />includelib \masm32\lib\gdi32.lib <br /><br />.data <br />char db 64 dup (0)<br />ClassName db &quot;SimpleWinClass&quot;,0 <br />AppName  db &quot;Our First Window&quot;,0 <br />numberOfChars dd 0<br /><br />.data? <br />hInstance HINSTANCE ? <br />CommandLine LPSTR ? <br /><br />.code <br />start: <br />    invoke GetModuleHandle, NULL <br />    mov    hInstance,eax <br />    invoke GetCommandLine<br />    mov CommandLine,eax<br />    invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT <br />    invoke ExitProcess,eax <br /><br />WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD <br />    LOCAL wc:WNDCLASSEX <br />    LOCAL msg:MSG <br />    LOCAL hwnd:HWND <br />    mov   wc.cbSize,SIZEOF WNDCLASSEX <br />    mov   wc.style, CS_HREDRAW or CS_VREDRAW <br />    mov   wc.lpfnWndProc, OFFSET WndProc <br />    mov   wc.cbClsExtra,NULL <br />    mov   wc.cbWndExtra,NULL <br />    push  hInst <br />    pop   wc.hInstance <br />    mov   wc.hbrBackground,COLOR_WINDOW+1 <br />    mov   wc.lpszMenuName,NULL <br />    mov   wc.lpszClassName,OFFSET ClassName <br />    invoke LoadIcon,NULL,IDI_APPLICATION <br />    mov   wc.hIcon,eax <br />    mov   wc.hIconSm,eax <br />    invoke LoadCursor,NULL,IDC_ARROW <br />    mov   wc.hCursor,eax <br />    invoke RegisterClassEx, addr wc <br />    invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\ <br />           WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\ <br />           CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\ <br />           hInst,NULL <br />    mov   hwnd,eax <br />    invoke ShowWindow, hwnd,SW_SHOWNORMAL <br />    invoke UpdateWindow, hwnd <br />    .WHILE TRUE <br />                invoke GetMessage, ADDR msg,NULL,0,0 <br />                .BREAK .IF (!eax) <br />                invoke TranslateMessage, ADDR msg <br />                invoke DispatchMessage, ADDR msg <br />        .ENDW <br />    mov     eax,msg.wParam <br />    ret <br />WinMain endp <br /><br />WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM <br />    LOCAL hdc:HDC <br />    LOCAL ps:PAINTSTRUCT <br /><br />    .IF uMsg==WM_DESTROY <br />        invoke PostQuitMessage,NULL <br />    .ELSEIF uMsg==WM_CHAR <br />        mov edx, wParam<br />        mov ecx, offset char<br />        @@:<br />        cmp byte ptr,0<br />        lea ecx, <br />        jnz @B<br />        mov , dl<br />        invoke InvalidateRect, hWnd,NULL,TRUE <br />    .ELSEIF uMsg==WM_PAINT <br />        invoke BeginPaint,hWnd, ADDR ps <br />        mov    hdc,eax <br />        add    numberOfChars, 8<br />        invoke TextOut,hdc, numberOfChars ,1,ADDR char, 1<br />        invoke EndPaint,hWnd, ADDR ps <br />        <br />    .ELSE <br />        invoke DefWindowProc,hWnd,uMsg,wParam,lParam <br />        ret <br />    .ENDIF <br />    xor    eax,eax <br />    ret <br />WndProc endp <br />end start<br /><br />***<br /><br />A very true fact indeed<br />###<br />Hope you answer will be the last one, cause I am running low on facts.<br />###</div>
    <div class="meta">Posted on 2003-08-27 10:00:59 by JulianS</div>
   </div>
   <div class="post" id="post-115760">
    <div class="subject"><a href="#post-115760">Try the code and provide me with a tutorial.</a></div>
    <div class="body">Ohh, and please try the code you want to give me, to see if it is right or wrong.<br />And do you know any string manipulation tutorial?<br />That could really be usefull.<br />Thanks alot for you efforts in helping me.</div>
    <div class="meta">Posted on 2003-08-27 10:03:41 by JulianS</div>
   </div>
   <div class="post" id="post-115765">
    <div class="subject"><a href="#post-115765">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">I forgot about one crucial part of the loop. I forgot to dec ecx. :grin:<br /><br /><pre><code><br />.386 <br />.model flat,stdcall <br />option casemap&#58;none <br />WinMain proto &#58;DWORD,&#58;DWORD,&#58;DWORD,&#58;DWORD <br /><br />include \masm32\include\windows.inc <br />include \masm32\include\user32.inc <br />include \masm32\include\kernel32.inc <br />include \masm32\include\gdi32.inc <br />includelib \masm32\lib\user32.lib <br />includelib \masm32\lib\kernel32.lib <br />includelib \masm32\lib\gdi32.lib <br /><br />.data <br />char db 64 dup &#40;0&#41;<br />ClassName db &quot;SimpleWinClass&quot;,0 <br />AppName db &quot;Our First Window&quot;,0 <br />numberOfChars dd 0<br /><br />.data? <br />hInstance HINSTANCE ? <br />CommandLine LPSTR ? <br /><br />.code <br />start&#58; <br />invoke GetModuleHandle, NULL <br />mov hInstance,eax <br />invoke GetCommandLine<br />mov CommandLine,eax<br />invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT <br />invoke ExitProcess,eax <br /><br />WinMain proc hInst&#58;HINSTANCE,hPrevInst&#58;HINSTANCE,CmdLine&#58;LPSTR,<br />CmdShow&#58;DWORD <br />LOCAL wc&#58;WNDCLASSEX <br />LOCAL msg&#58;MSG <br />LOCAL hwnd&#58;HWND <br />mov wc.cbSize,SIZEOF WNDCLASSEX <br />mov wc.style, CS_HREDRAW or CS_VREDRAW <br />mov wc.lpfnWndProc, OFFSET WndProc <br />mov wc.cbClsExtra,NULL <br />mov wc.cbWndExtra,NULL <br />push hInst <br />pop wc.hInstance <br />mov wc.hbrBackground,COLOR_WINDOW+1 <br />mov wc.lpszMenuName,NULL <br />mov wc.lpszClassName,OFFSET ClassName <br />invoke LoadIcon,NULL,IDI_APPLICATION <br />mov wc.hIcon,eax <br />mov wc.hIconSm,eax <br />invoke LoadCursor,NULL,IDC_ARROW <br />mov wc.hCursor,eax <br />invoke RegisterClassEx, addr wc <br />invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\ <br />WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\ <br />CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\ <br />hInst,NULL <br />mov hwnd,eax <br />invoke ShowWindow, hwnd,SW_SHOWNORMAL <br />invoke UpdateWindow, hwnd <br />.WHILE TRUE <br />invoke GetMessage, ADDR msg,NULL,0,0 <br />.BREAK .IF &#40;!eax&#41; <br />invoke TranslateMessage, ADDR msg <br />invoke DispatchMessage, ADDR msg <br />.ENDW <br />mov eax,msg.wParam <br />ret <br />WinMain endp <br /><br />WndProc proc hWnd&#58;HWND, uMsg&#58;UINT, wParam&#58;WPARAM, lParam&#58;LPARAM <br />LOCAL hdc&#58;HDC <br />LOCAL ps&#58;PAINTSTRUCT <br /><br />.IF uMsg==WM_DESTROY <br />invoke PostQuitMessage,NULL <br />.ELSEIF uMsg==WM_CHAR <br />mov edx, wParam<br />mov ecx, offset char<br />@@&#58;<br />cmp byte ptr&#91;ecx&#93;,0<br />lea ecx, &#91;ecx+1&#93;<br />jnz @B<br />dec ecx<br />mov &#91;ecx&#93;, dl<br />inc numberOfChars<br />invoke InvalidateRect, hWnd,NULL,TRUE <br />.ELSEIF uMsg==WM_PAINT <br />invoke BeginPaint,hWnd, ADDR ps <br />mov hdc,eax <br />invoke TextOut,hdc, 0 ,1,ADDR char, numberOfChars<br />invoke EndPaint,hWnd, ADDR ps <br /><br />.ELSE <br />invoke DefWindowProc,hWnd,uMsg,wParam,lParam <br />ret <br />.ENDIF <br />xor eax,eax <br />ret <br />WndProc endp <br />end start<br /></code></pre><br />I tested it. It works (did some fooling around with the debugger). I do know some string manipulation tutorials but of course all you need to know is that strings are access via pointers. That's all, unless you want to learn the *slow*  string opcodes. The other important fact is that strings usually are null-terminated, meaning ends with 0.</div>
    <div class="meta">Posted on 2003-08-27 10:20:34 by roticv</div>
   </div>
   <div class="post" id="post-115770">
    <div class="subject"><a href="#post-115770">Still errors.</a></div>
    <div class="body">There are still error.<br />I managed to get ride of some but not all.<br />Try looking at the picture I have got from my screen while assembling</div>
    <div class="meta">Posted on 2003-08-27 10:40:48 by JulianS</div>
   </div>
   <div class="post" id="post-115771">
    <div class="subject"><a href="#post-115771">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">You can search the board for string tutorial, maybe you will find some that are the same and maybe say tha are from other autor, i dont know what is the original... ;). Also I think you have the masm32 package, if i am not wrong the is included some .hlp files, you can find them usefull, and this are very compact maybe dont procide much information I think is the suficient information to start with.<br /><br /><br /><br />Also you need see that the 'limit' is 64 char to be hold :D, is only for you whatch that ;).<br /><br />char db 64 dup (0)<br /><br /><br />Nice day.<br /><br />&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;---EdiT<br /><br />I dont see nothing?????? in the atached file?????????</div>
    <div class="meta">Posted on 2003-08-27 10:42:08 by rea</div>
   </div>
   <div class="post" id="post-115774">
    <div class="subject"><a href="#post-115774">Still waiting.</a></div>
    <div class="body">Thank you hgb for your reply but I am still waiting from roticv's reply cause his code contains some errors.<br /><br />Anyhelp would be appreciated.<br /><br />Thanks for all roticv.</div>
    <div class="meta">Posted on 2003-08-27 10:49:40 by JulianS</div>
   </div>
   <div class="post" id="post-115776">
    <div class="subject"><a href="#post-115776">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">Hey JulianS,<br /><br />What error do you speak of? Care to explain to me? Your bitmap seemed to contain nothing, unless there is  a need for me to change specs :)</div>
    <div class="meta">Posted on 2003-08-27 10:52:25 by roticv</div>
   </div>
   <div class="post" id="post-115795">
    <div class="subject"><a href="#post-115795">Errors</a></div>
    <div class="body">Here are the errors:<br /><br />%%%<br /><br />&lt;33&gt; Error A2111: conflicting parameter definition<br />&lt;35&gt; Error A2008: Syntax Error : dword<br />&lt;36&gt; Error A2012: PROC, MACRO, or macro repeat directive must preced LOCAL<br />&lt;37&gt; Error A2012: PROC, MACRO, or macro repeat directive must preced LOCAL<br />&lt;38&gt; Error A2012: PROC, MACRO, or macro repeat directive must preced LOCAL<br />&lt;54&gt; Error A2006: undefined symbol : wc<br />&lt;54&gt; Error A2114: INVOKE argument type mismatch : argument : 10<br />&lt;55&gt; Error A2137: too few arguments to INVOKE<br /><br />%%%<br /><br />and that is just some of them.<br /><br />Maybe I will need to update my compiler.<br />I will make a try.<br /><br />Julian</div>
    <div class="meta">Posted on 2003-08-27 12:19:38 by JulianS</div>
   </div>
   <div class="post" id="post-115808">
    <div class="subject"><a href="#post-115808">Give a man a code and he has a program Learn him to program</a></div>
    <div class="body">Sorry the code worked perfectly well. Though you gotta change some things, cause of this forum. Some lines where like:<br /><br />***<br /><br />INVOKE Something argument, argument, ar /<br />gument / argument<br /><br />***<br /><br />Or something.<br />Thats why the errors came.<br />Anyway thanks. <br />But can you also show me how to delete old characters?<br />And could you please explain the loop in deepth.<br /><br />Fact<br />###<br />I am a noob. (I am sure many people would agree on that.)<br />###</div>
    <div class="meta">Posted on 2003-08-27 13:59:26 by JulianS</div>
   </div>
   <div class="post" id="post-115928">
    <div class="subject"><a href="#post-115928">eax, edx or something... Need help from somebody who has kno</a></div>
    <div class="body">*shake my head*<br /><br />Change the code to<br /> made some mistake with my coding.<br /><pre><code><br />...<br />.ELSEIF uMsg==WM_CHAR <br />mov edx, wParam<br />mov ecx, offset char<br />@@&#58;<br />cmp byte ptr&#91;ecx&#93;,0<br />lea ecx, &#91;ecx+1&#93;<br />jnz @B<br />dec ecx<br />.if edx == 08h<br />mov byte ptr&#91;ecx-1&#93;,0<br />dec numberOfChars<br />.elseif<br />mov &#91;ecx&#93;, dl<br />inc numberOfChars<br />.endif<br />...<br /></code></pre><br />08h = backspace, so if backspace is pressed, instead of the usual copying of the byte in edx, you copy over 0 to cut the string shorter by one charcter. Oh well, at least it works.</div>
    <div class="meta">Posted on 2003-08-28 06:52:02 by roticv</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=14892&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14892&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14892" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14892&amp;page=2">&gt;</a><a href="../?id=14892&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>