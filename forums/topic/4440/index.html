<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How i can upload or download file with winsock by client and - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4440" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=4440">How i can upload or download file with winsock by client and</a></p>
   <div class="post" id="post-30907">
    <div class="subject"><a href="#post-30907">How i can upload or download file with winsock by client and</a></div>
    <div class="body">Hi ,This is my first message.<br />i have two program, client and server ,i want to know how i can tranfer file between client and server?<br />i write a program that send 4Kb pack to servera and when server read (recive) it then send a message to client that send next pack ,but this way is slow and do not work properly.<br /><br />        Thanks.<br />        Hamed</div>
    <div class="meta">Posted on 2002-03-26 00:17:34 by hamed_hhz</div>
   </div>
   <div class="post" id="post-30912">
    <div class="subject"><a href="#post-30912">How i can upload or download file with winsock by client and</a></div>
    <div class="body">Random posted a client server app not too long ago which is pretty straightforward.  It sends a 100M file from a server to client and then reports the speed.  I get &gt; 1M/s with it.</div>
    <div class="meta">Posted on 2002-03-26 01:19:00 by grv575</div>
   </div>
   <div class="post" id="post-30923">
    <div class="subject"><a href="#post-30923">How i can upload or download file with winsock by client and</a></div>
    <div class="body">&gt; 5MB/s<br /><br />Anyway, I see you check if there was a socket<br />error or if done(0), do you also need to check if<br />you got the whole packet or is this not done at<br />the socket level?<br /><br />Something was bothering me when I started working<br />on this: How should we properly handle receiving/<br />sending such large files? When I watch programs <br />like mirc download large files, there is not a <br />large file dump at the end of the transfer. Do <br />they save as they go, how?</div>
    <div class="meta">Posted on 2002-03-26 02:35:10 by bdjames</div>
   </div>
   <div class="post" id="post-30931">
    <div class="subject"><a href="#post-30931">How i can upload or download file with winsock by client and</a></div>
    <div class="body">The size of the data you receive can be of any size, but you don't have to worry about packets. Packets are at winsock level, you have nothing to do with packets. <br />You will get the data in pieces depending on the line speed. For local network you may get a lot of data at one time, but for the internet it will be much less. Just specify how many bytes you can handle at most, feed this to recv and it will give you those bytes. Bytes that didn't fit in the buffer are just saved for a later call. Download managers probaly read their buffers full, write that buffer to the end of the file, and read the next buffer.<br /><br />Here's some more info on the packets:<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=2536">http://www.asmcommunity.net/board/index.php?topic=2536</a><br /><br />Thomas</div>
    <div class="meta">Posted on 2002-03-26 02:58:35 by Thomas</div>
   </div>
   <div class="post" id="post-30971">
    <div class="subject"><a href="#post-30971">How i can upload or download file with winsock by client and</a></div>
    <div class="body">thanks<br />but  pack is mine pack that i defined, and it's a structure :<br /><br />PACKSTRUCT  STRUCT  DWORD<br />    cmd         dd  ?        ;Command  (UPLOAD)<br />    scmd        dd  ?        ;Sub Command (CREATEFILE or WRITEFILE)<br />    Param1      dd  ?        ;any things  (file size,...)<br />    Param2      dd  ?<br />    Param3      dd  ?<br />    Param4      dd  ?<br />    bSize       dd  ?<br />    Buff        db  4*1024 dup(?)<br />PACKSTRUCT  ENDS</div>
    <div class="meta">Posted on 2002-03-26 07:30:44 by hamed_hhz</div>
   </div>
   <div class="post" id="post-30972">
    <div class="subject"><a href="#post-30972">How i can upload or download file with winsock by client and</a></div>
    <div class="body">hamed_hhz: be aware that it's very unlikely that your packet will be received in one call. It can be cut into pieces in every possible way so you'll have to buffer it until you received a full package.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-03-26 07:33:50 by Thomas</div>
   </div>
  </div>
 </body>
</html>