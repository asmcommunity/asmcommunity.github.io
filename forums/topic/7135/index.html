<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>windows xpproblem - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7135" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=7135">windows xpproblem</a></p>
   <div class="post" id="post-51612">
    <div class="subject"><a href="#post-51612">windows xpproblem</a></div>
    <div class="body">The program that I am having problems with runs fairly well in windows<br />98 2nd ed.<br />I tried it on a machine with windows XP and my problems started.<br />The background screen is blue. I then want to put a small yellow<br />rectangle on the screen and then load black and white bitmaps<br />into the yellow rectangle. <br />The Yellow Rectangle Doesn't Apprear at all.<br />Would someone be so kind as to point me where to start looking<br />for the problem?<br /><br />Many Thanks,<br />JPS</div>
    <div class="meta">Posted on 2002-08-04 08:52:12 by shankle</div>
   </div>
   <div class="post" id="post-51622">
    <div class="subject"><a href="#post-51622">windows xpproblem</a></div>
    <div class="body">Start looking in the routine which displays the rectangle :grin: <br /><br />You have to check the return value of functions where you assume they suceed. You may have been doing something which due to a quirk in Win98se it woriked, but that quirk may not be present in XP. Or XP may be bugged, but if you're drawing those rectangle with regular gdi calls then thats unlikly.<br /><br />Post some of the offending code here.</div>
    <div class="meta">Posted on 2002-08-04 12:17:27 by Eóin</div>
   </div>
   <div class="post" id="post-51638">
    <div class="subject"><a href="#post-51638">Windows XP Problem</a></div>
    <div class="body">This is in reply to Eoin's request for problem code samples.</div>
    <div class="meta">Posted on 2002-08-04 15:30:00 by shankle</div>
   </div>
   <div class="post" id="post-51653">
    <div class="subject"><a href="#post-51653">windows xpproblem</a></div>
    <div class="body">Adding CS_OWNDC to the window class stlye solves most problems associated with GetDC. If it's not there you can never know for how long the Dc returned will remain valid.<br /><br />In the DoAllSeven Proc the bitmaps most likly stopped displaying because the added GetDC scrambled edx which you later use in the BitBlt. This is always something to look out for :) <br /><br /><em>&quot;It seems there are an awful lot of calls to GETDC or does that make any difference.&quot;</em> It onlys makes a difference if you don't have the CS_OWNDC style. When you do put in the style you'll only ever need one call to GetDc at the start, then save that in a global variable and and use it everywhere. Then only one call to ReleaseDC at the end.</div>
    <div class="meta">Posted on 2002-08-04 16:57:52 by Eóin</div>
   </div>
  </div>
 </body>
</html>