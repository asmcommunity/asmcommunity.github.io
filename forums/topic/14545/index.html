<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>lstrcmp help - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14545" />
    <link rel="next" href="../?id=14545&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14545">lstrcmp help</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=14545&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14545&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14545" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14545&amp;page=2">&gt;</a><a href="../?id=14545&amp;page=2">&raquo;</a></form>   <div class="post" id="post-112472">
    <div class="subject"><a href="#post-112472">lstrcmp help</a></div>
    <div class="body">hi, im trying to put some protection into my program<br />and i want to write something using the lstrcmp api<br />what i want is to have someone enter their name, and based on their name a key is created<br />and only if the key created for the name is entered with the name will the login work... do you know what i mean?<br /><br />sofar ive tried this... im newb so dunno if im even doing a damn thing correctly :(<br /><br /><pre><code><br />.if wParam == IDC_CHECK<br />    invoke lstrcmp,hName,hKey<br />     .if hKey != 100<br />        invoke MessageBoxEx,hWin,ADDR Text,ADDR Cap,NULL,MB_OK<br />     .else<br />        invoke ExitProcess,0<br />.endif<br /></code></pre> <br /><br />there is really nothing there, cuz i dont know how to do it, all i was looking for in that was to have the user enter 100 into the key box, then if successful exitprocess .. if not successfull then invoke the message box<br />thats all i was trying for with the code right there.. but i wanna know how to have the key be based on whats entered into the name edit control...  could anyone tell me what im supposed to be doing??<br /><br />thankyou</div>
    <div class="meta">Posted on 2003-07-30 18:41:51 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112473">
    <div class="subject"><a href="#post-112473">lstrcmp help</a></div>
    <div class="body">This probably will not help you, but here is a couple <br />of things that crossed my mind while reading your post.<br /><br />This is a topic all by itself, Protection Scheme &amp; Serial Generation.<br />Mark off using api for the final compare, it servely weakends the protection.<br /><br />Ok , protection scheme masters, any recommendation on algos and subversive code for  sTonER_DeVIOUS.<br /><br /><strong> sTonER_DeVIOUS </strong> beware this topic could span volumes of information :)<br /><br />RobotBob</div>
    <div class="meta">Posted on 2003-07-30 18:58:46 by RobotBob</div>
   </div>
   <div class="post" id="post-112474">
    <div class="subject"><a href="#post-112474">lstrcmp help</a></div>
    <div class="body">thats what im hoping for... :)</div>
    <div class="meta">Posted on 2003-07-30 19:01:00 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112476">
    <div class="subject"><a href="#post-112476">lstrcmp help</a></div>
    <div class="body">try using RSA (if you can figure it out)...<br /><br />P.S. Post In Devious forums about this bro... I can help ya there ;)</div>
    <div class="meta">Posted on 2003-07-30 19:45:33 by resistance_is_futile</div>
   </div>
   <div class="post" id="post-112478">
    <div class="subject"><a href="#post-112478">lstrcmp help</a></div>
    <div class="body">ahh.. im lost, i was hoping just to get alot of peoples opinions on how to do this... i guess i could post in devious as well, but i would still appriciate some help from people here :)</div>
    <div class="meta">Posted on 2003-07-30 19:48:23 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112479">
    <div class="subject"><a href="#post-112479">lstrcmp help</a></div>
    <div class="body">You will get a lot of confusing answers here...Like using encryption and such like that....not saying that the answers are bad but they are just confusing for new people. But thats mostly what people recommend is encrypting the program then using keys to decrypt it if the keys are right...but in order to generate something from the name entered, you have to convert it to something (hex, dword, etc.) then go through each letter in the name and add,subtract,mul, etc. to it or however u want to then save the finished value for a key (this is a simple method of protection and will easily be cracked :mad: ). Then compare the two (I recommend using cmp instead of lstrcmp or any other api. Use as much asm as possible) and so on..</div>
    <div class="meta">Posted on 2003-07-30 19:56:08 by resistance_is_futile</div>
   </div>
   <div class="post" id="post-112480">
    <div class="subject"><a href="#post-112480">lstrcmp help</a></div>
    <div class="body">If everyone post ALL soulutions no one will be protected.  If they want to crack you all they have to do is come here to see what is new... Like turning on a TV set we told it all.<br /><br /><strong>But we all do need some place to start.</strong> at lease with the basic things that every cracker\hacker knows, even common user.  So still sometimes i ask &quot;Why not us&quot;.<br /><br /><strong>&quot;Mark off using api for the final compare&quot;</strong> <br />Now that is a basic...<br /><br />I also would think for Protection i would at lease start to do things manually. You find it all over the place in the masm32 M32lib.<br />  <br />My goal is to find or get d**e close to building a REAL api hook in 100% assembler.  c c++ can be founded anywhere.<br /><br />If you use the api call lstrcmp im sure it can get attack quicker that if you do it manually (no call outside of your process).  Hope someone can shed some light on this too.<br /><br /><br />mov esi, offset aBuffer1 <br />mov edi, offset aBuffer2 <br />Loop: <br />mov al,  <br />mov ah,  <br />inc esi <br />inc edi <br />cmp al, ah <br />jne _notfound<br />cmp al, 0<br />jne Loop<br /><br />If founded will be here<br /><br />_notfound:</div>
    <div class="meta">Posted on 2003-07-30 19:57:32 by cmax</div>
   </div>
   <div class="post" id="post-112482">
    <div class="subject"><a href="#post-112482">lstrcmp help</a></div>
    <div class="body"><div class="quote">You will get a lot of confusing answers here...Like using encryption and such like that....not saying that the answers are bad but they are just confusing for new people</div> <br /><br />Well I hope its not that bad, since the goal here is to help begginers.<br /><br />If you are wanting super simple I could write it real quick, super simple is right in my department. :grin: <br />Need mind numbing algos, lingo roticv and the Svin are the men for that task.<br /><br />RobotBob</div>
    <div class="meta">Posted on 2003-07-30 20:05:10 by RobotBob</div>
   </div>
   <div class="post" id="post-112483">
    <div class="subject"><a href="#post-112483">lstrcmp help</a></div>
    <div class="body">i dont mind if it is complicated or not, i just want something that would be difficult to be broken.</div>
    <div class="meta">Posted on 2003-07-30 20:08:34 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112484">
    <div class="subject"><a href="#post-112484">lstrcmp help</a></div>
    <div class="body">Here in lies the problem:<br /><br />&quot;would be difficult to be broken&quot;<br /><br />The difficulty level of the scheme is measure by the skill of the attacker.<br /><br />So to stop the average user, easy. ( and at least a dead listing of the exe doesn't give<br />the magic secret away :) )<br /><br />Stop the casaul programmer, moderate.<br />Stop the seasoned pro, nearly impossible. (if not impossible)<br /><br />RobotBob</div>
    <div class="meta">Posted on 2003-07-30 20:16:27 by RobotBob</div>
   </div>
   <div class="post" id="post-112485">
    <div class="subject"><a href="#post-112485">lstrcmp help</a></div>
    <div class="body">true, but all code is meant to be broken eh... i would just like to be able to code something that would be nearly impossible to guess.. but ofcourse would be possible to break with the appropriate tools.. i could always do a hardcoded key, and just have it be the same, but all im looking for is a dynamic key, that changes with what the user inputs... any help?</div>
    <div class="meta">Posted on 2003-07-30 20:19:21 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112486">
    <div class="subject"><a href="#post-112486">lstrcmp help</a></div>
    <div class="body"><div class="quote">but in order to generate something from the name entered, you have to convert it to something (hex, dword, etc.) then go through each letter in the name and add,subtract,mul, etc. to it or however u want to then save the finished value for a key (this is a simple method of protection and will easily be cra.cked  ).</div> <br /><br />This would work for your use, since the calls and the rountines could be made tedious and vague enough to <br />quickly bore the casual programmer. Easily cra.cked, yes , but mainly by those experienced. You could make the hunt a 'wild-goose' chase enough to thwart the average guy.<br /><br />ideas...<br /><br />by what method would you generate the internal key used in the maths?<br />I do have an example, however i cannot post it since it violates the board rules.<br /><br />Anyone else? I search through my stuff and see if I have anything that will help you.<br />The quick and dirty method I was refering to its the one RIF made reference in his quote.<br /><br />RobotBob</div>
    <div class="meta">Posted on 2003-07-30 20:40:58 by RobotBob</div>
   </div>
   <div class="post" id="post-112490">
    <div class="subject"><a href="#post-112490">lstrcmp help</a></div>
    <div class="body">me</div>
    <div class="meta">Posted on 2003-07-30 21:07:52 by cmax</div>
   </div>
   <div class="post" id="post-112491">
    <div class="subject"><a href="#post-112491">lstrcmp help</a></div>
    <div class="body">I never said it was bad but when it comes to trying a GOOD protection scheme, it can be complicated (complicated answers, help, etc.). Don't get me wrong, this board is more than an excellent source of information but when it comes to protection schemes, things can get a little complicated.</div>
    <div class="meta">Posted on 2003-07-30 21:36:19 by resistance_is_futile</div>
   </div>
   <div class="post" id="post-112497">
    <div class="subject"><a href="#post-112497">lstrcmp help</a></div>
    <div class="body">OK word of warning, this is very simplistic.<br />I didn't add code for dialog and what not, but I believe you'll get the idea.<br /><br />The key generation needs to be more complex, but you'll get the idea.<br /><br /><pre><code><br />; ##############################<br /><br />    .486<br />    .model flat, stdcall<br />    option casemap &#58;none   ; case sensitive<br /><br />; ##############################<br /><br />    include \masm32\include\windows.inc<br />    include \masm32\include\user32.inc<br />    include \masm32\include\kernel32.inc<br /><br />    include \masm32\include\masm32.inc<br />    include \masm32\include\debug.inc<br /><br />    includelib \masm32\lib\user32.lib<br />    includelib \masm32\lib\kernel32.lib<br />    includelib \masm32\lib\masm32.lib<br />    includelib \masm32\lib\debug.lib<br />    <br />    .data<br />    NameBuffer db &quot;Joe Schmoe the User&quot;,0<br />    .data? <br />    Results  dd ?<br />    <br />    LameGenKey PROTO<br />    DummyProc PROTO<br /><br />; ##############################<br />    .code<br />    <br />start&#58;<br /><br />    ; Get the username, and then call the keygen<br />    ; code.<br />    jmp DummyProc<br />    <br />    ; then you could get the 'key' and compare it<br />    ; to the Results and decide whether they suceeded <br />    ; or not.<br />        <br />    invoke ExitProcess,0<br />    <br />; #################################<br /><br />LameGenKey proc<br />	; It doesn get lamer than this &#58;&#41;<br />	; I add up all the ascii values to get<br />	; my serial. But seriously all serial<br />	; creations are just complex version of this.<br />	; Or am I wrong?<br />	mov esi, OFFSET NameBuffer<br />@@&#58;<br />	mov al, BYTE PTR &#91;esi&#93;<br />	add BYTE PTR &#91;Results&#93;,al<br />	inc esi<br />	test al,al<br />	jnz @B<br />	<br />	PrintHex Results<br />    ret   <br />LameGenKey endp<br /><br />DummyProc proc<br />	<br />  ; Do nonsense garbage here to bore the 'l337 guy' &#58;&#41;<br />  jmp LameGenKey<br />  ret<br /><br />DummyProc endp<br /><br />; ##################################<br />end start<br /></code></pre><br /><br /><br />Please don't judge me by this :), but you get the idea.<br />Generate a serial,while confusing the hell out of the .cr.4.kr and find a nice<br />confusing place to compare it. Maybe place the rountine in many places so if one<br />gets hex'd he'll need to find the 10 others lol.<br />Or self healing code that prevents that nop nop nop nonsense :)<br /><br />EDIT: I used 'you'll get the idea.' three times, my brain is pudding.<br /><br />Anyway<br /><br />RobotBob</div>
    <div class="meta">Posted on 2003-07-30 22:34:23 by RobotBob</div>
   </div>
   <div class="post" id="post-112574">
    <div class="subject"><a href="#post-112574">lstrcmp help</a></div>
    <div class="body">alright, makes sense, ima try that out.. thnx</div>
    <div class="meta">Posted on 2003-07-31 13:32:59 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112665">
    <div class="subject"><a href="#post-112665">lstrcmp help</a></div>
    <div class="body">Do you want to be evil?<br /><br />If so do the following:<br />1. Encrypt the crucial code with the key<br />2. Have the key validating somewhere in the code<br />3. If the stringcompare is correct (DO NOT STORE YOUR OWN KEY in your exe, use some hash or what so ever)<br />4. Decrypt with the key, else ExitProcess.<br /><br />Place some seh handling to prevent unintended crashing.<br /><br />PS Add some smc code + anti debug like<br /><br /><pre><code><br />jmp @F<br />db 8Fh, 77h, 8Dh, 97h<br />@@&#58;<br />...<br /></code></pre></div>
    <div class="meta">Posted on 2003-08-01 07:10:49 by roticv</div>
   </div>
   <div class="post" id="post-112695">
    <div class="subject"><a href="#post-112695">lstrcmp help</a></div>
    <div class="body">wooop.  that went completely over my head :)</div>
    <div class="meta">Posted on 2003-08-01 14:08:54 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112732">
    <div class="subject"><a href="#post-112732">lstrcmp help</a></div>
    <div class="body">ok.  i have decided im not experience enough just yet to learn that stuff.<br />lets try to concieve a new approach<br /><br />i need IDC_NAME to equal &quot;Name&quot; &lt;-- as set in the .inc file<br />i need IDC_KEY to equal &quot;1234567890&quot; &lt;-- as set in the .inc file<br /><br />i have a button labeled IDC_CHECK, and when the button is clicked<br />i want it to run code that will check wether or not &quot;Name&quot; and &quot;1234567890&quot;<br />were entered into IDC_NAME and IDC_KEY<br /><br />i dont know if this will be simple or not, but if you could please help it would be appriciated :) thank you</div>
    <div class="meta">Posted on 2003-08-01 22:13:17 by sTonER_DeVIOUS</div>
   </div>
   <div class="post" id="post-112733">
    <div class="subject"><a href="#post-112733">lstrcmp help</a></div>
    <div class="body">That would be easy. I'll make you an example if you want.<br />However my simple keygen approach would prevent dead listing of the exe to<br />find your '1234...'.<br /><br />I can give you an example of both. if needed.</div>
    <div class="meta">Posted on 2003-08-01 22:21:20 by RobotBob</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=14545&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14545&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14545" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14545&amp;page=2">&gt;</a><a href="../?id=14545&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>