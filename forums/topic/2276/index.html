<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>need help on conventional memory reading .... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2276" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2276">need help on conventional memory reading ....</a></p>
   <div class="post" id="post-14352">
    <div class="subject"><a href="#post-14352">need help on conventional memory reading ....</a></div>
    <div class="body"><pre><code><br /><br />hi to everyone,<br /><br />sorry for the obsolete argument not really asm32 related,<br />i need a little help to read a conventional memory address from a win16bit <br />dll procedure&#58;<br /><br />1. i  do           call GlobalDosAlloc,TheSize<br /><br />2. in eax i get    00002ECF   <br /><br />The high word is the selector to the block, <br />and the low word the DOS real mode segment. <br />The offset of this block is always zero. <br /> <br />In this 16bit protected mode envoroment, <br />how can now read from this conventional memory address ?<br /><br />I've already try&#58;  <br />------------------  <br />fs=0000, esi=00002ECF    mov al, byte ptr fs&#58;&#91;esi&#93;  protection fault<br />fs=0000, esi=2ECF0000    mov al, byte ptr fs&#58;&#91;esi&#93;  protection fault<br />fs=0000, esi=00000000    mov al, byte ptr fs&#58;&#91;esi&#93;  protection fault<br /><br />fs=2ECF, esi=00000000    mov al, byte ptr fs&#58;&#91;esi&#93;  <br />   works but i think i'm reading a wromg adress.<br /><br /></code></pre><br /><br />If some help ....   THANKS :)</div>
    <div class="meta">Posted on 2001-12-08 11:32:02 by Bit7</div>
   </div>
   <div class="post" id="post-14367">
    <div class="subject"><a href="#post-14367">need help on conventional memory reading ....</a></div>
    <div class="body">I haven't really done win16 programming, so this is just a bunch of<br />guesses :). Are you sure EAX is used for returning values, and not DX:AX?<br />0000 is definitely not a valid selector, and 2ECF sounds pretty high... not an impossible value I think, but it doesn't sound *right*.</div>
    <div class="meta">Posted on 2001-12-08 17:32:21 by f0dder</div>
   </div>
   <div class="post" id="post-14396">
    <div class="subject"><a href="#post-14396">need help on conventional memory reading ....</a></div>
    <div class="body">f0dder,<br /><br />you're magic !<br /><br />After many days of trying, i see that the RESULT that all C source exaple indicates is NOT in eax !<br />I've found an asm example using GlobalDosAlloc: it shows<br /><br />CALL    GlobalDosAlloc<br />MOV     Segment,DX<br />MOV     Selector,AX<br /><br /><br />Whit your help i will probably finish my project:<br />Reading MBR from w95 in a quite easy way. <br />This has obviously already be done but i want do it in asm. After finished i will publish the code.<br /><br />Thanks again.</div>
    <div class="meta">Posted on 2001-12-09 04:32:45 by Bit7</div>
   </div>
  </div>
 </body>
</html>