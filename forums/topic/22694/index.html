<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>push macros for MASM - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22694" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22694">push macros for MASM</a></p>
   <div class="post" id="post-170060">
    <div class="subject"><a href="#post-170060">push macros for MASM</a></div>
    <div class="body">Hi friends,<br /><br />Here is a set of macros simulating the <span class="mono">push</span> statement with extended capabilities :<br /><br /><pre><code>push2 MACRO args:VARARG<br />&nbsp;  FOR p,&lt;args&gt;<br />&nbsp; &nbsp; &nbsp; push p<br />&nbsp;  ENDM<br />ENDM<br /><br />pop2 MACRO args:VARARG<br />&nbsp;  FOR p,&lt;args&gt;<br />&nbsp; &nbsp; &nbsp; pop p<br />&nbsp;  ENDM<br />ENDM<br /><br />pushREV MACRO p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20<br /><br />&nbsp;  FOR arg,&lt;p20,p19,p18,p17,p16,p15,p14,p13,p12,p11,p10,p9,p8,p7,p6,p5,p4,p3,p2,p1&gt;<br /><br />&nbsp; &nbsp; &nbsp; IFNB &lt;arg&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp;  push arg<br />&nbsp; &nbsp; &nbsp; ENDIF<br />&nbsp; &nbsp; &nbsp; <br />&nbsp;  ENDM<br /><br />ENDM</code></pre><br /><br />Examples :<br /><span class="mono">push2 eax,ebx,ecx,edx</span> outputs the sequence :<br /><br /><pre><code>push eax<br />push ebx<br />push ecx<br />push edx<br /><br /></code></pre><span class="mono">pushREV eax,ebx,ecx,edx</span> passes the parameters in reverse order simulating the <span class="mono">STDCALL</span> or <span class="mono">C</span> parameter passing convention :<br /><br /><pre><code>push edx<br />push ecx<br />push ebx<br />push eax<br /></code></pre><br />Another example :<br /><pre><code>pushREV eax,OFFSET DlgName,NULL,OFFSET DlgProc,NULL</code></pre></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1418" target="_blank">pushmacros.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-02-19 06:55:35 by Vortex</div>
   </div>
   <div class="post" id="post-170064">
    <div class="subject"><a href="#post-170064">Re: push macros for MASM</a></div>
    <div class="body"><br />&nbsp; &nbsp;  See http://www.masmforum.com/simple/index.php?topic=3962.0 . Ratch</div>
    <div class="meta">Posted on 2006-02-19 10:14:11 by Ratch</div>
   </div>
  </div>
 </body>
</html>