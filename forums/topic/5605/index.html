<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Next Generation 3D Engine - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5605" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=5605">Next Generation 3D Engine</a></p>
   <div class="post" id="post-39930">
    <div class="subject"><a href="#post-39930">Next Generation 3D Engine</a></div>
    <div class="body">Ok I am well into designing a hybrid 3d engine based on a combination of portals and dx meshes.<br />The way it works is to assume that we have a 3d world built from &quot;sectormeshes&quot; in which I am encoding the &quot;portal surfaces&quot; by using a custom Material to identify them within the mesh. Each sector of the world is thus kept as a separate X-file, with the Level File being a list of which sector meshes to load, a linked list describing the portal links between them, and for each sector, a further list of regular objects (also xfiles) to be loaded, and their initial rotations/scaling factors relative to the sector they appear in. I have recently been getting some flak about not using BSP to encode the individual sectors instead of keeping them as intact DX meshes. I have been planning to implement all of this under Retained Mode and that is just one reason why I haven't used BSP so far.<br />I am looking for feedback and input.<br />What would YOU like to see in a 3d engine?<br /><br />:alright:</div>
    <div class="meta">Posted on 2002-05-25 10:38:16 by Homer</div>
   </div>
   <div class="post" id="post-40815">
    <div class="subject"><a href="#post-40815">Next Generation 3D Engine</a></div>
    <div class="body">I guess the mere mention of ASM sends them packing in hoardes.<br />Depressing response to this thread considering the topic.<br />Nevertheless, I shall continue to design and code this monster, and I am writing a tutorial as I go.<br />In fact, some sketches and notes are available if you look for my link on the links page at <a target="_blank" href="http://www.s-a-l-l-y.com">Sally's Site</a>  (look for Evil Homer's AI Engine, the first page has a link to the Game Engine near the top)<br /><br />Have a nice day.</div>
    <div class="meta">Posted on 2002-05-31 10:57:02 by Homer</div>
   </div>
   <div class="post" id="post-40830">
    <div class="subject"><a href="#post-40830">Next Generation 3D Engine</a></div>
    <div class="body">I'd like to see a games engine using NURBS instead of polygons. :grin:</div>
    <div class="meta">Posted on 2002-05-31 12:47:24 by bitRAKE</div>
   </div>
   <div class="post" id="post-40913">
    <div class="subject"><a href="#post-40913">Next Generation 3D Engine</a></div>
    <div class="body">No, sorry. Too expensive in terms of cpu time.<br />Not possible until curves are better supported in hardware,<br />or cpu clocks are a lot faster.<br /><br />I'm concentrating on making more of what IS possible under software, which is more flexible control through hierarchical structures of the hardware-acceleratable primitives encoded within them.</div>
    <div class="meta">Posted on 2002-06-01 04:56:58 by Homer</div>
   </div>
   <div class="post" id="post-40939">
    <div class="subject"><a href="#post-40939">Next Generation 3D Engine</a></div>
    <div class="body">Will there be any collision detection involve?<br /><br />If so building a BSP for each sector (if there are complex enough that is), could pay up in the long run. <br /><br />That is unless you want modifiable geometry. (like when a misile hits a wall and you can see the hole on it afterwar). In that case you could use a mini octree for the rooms(or another structure).<br /><br />Level of detail could be a good feature for static meshes in the room. (that way a user with better hardware could have better detail). If there are no outside levels, this could be done one time at the beginning of the program, you could use an algorithm aproach or build each level of detail and then load the correct one.<br /><br />Realtime shadows (if running on hardware aceleration) have become sort of standard this days, but that will depend on the level of realism the art of a level have.<br /><br />Maybe NURBS could not be done realtime, just maybe, but you could always precalculate the polygons to send to the card based on user settings.<br /><br />Also, try to make the engine as modular an scalable as possible. (But please, dont try to get so OOP to make the engine slow.). One feature you sould look for is hardware accelerated pixel and vertex shaders. But its implementation should be completely optional (unless you are writing for XBox, in that case they should be in).</div>
    <div class="meta">Posted on 2002-06-01 09:35:06 by dxantos</div>
   </div>
   <div class="post" id="post-40948">
    <div class="subject"><a href="#post-40948">Next Generation 3D Engine</a></div>
    <div class="body">There will most definitely be collision-detection involved.<br />Most impostant will be detecting collision with Portal Surfaces, because that means something is leaving this sector (and going through the portal).<br />As for BSP, the whole point of portaling is that we have reduced the World Surface polygon count down to a mere handful of surfaces (excluding instanced objects,characters and particles).<br />Collision-detection against World Surfaces is now very cheap, in fact, it's cheaper than if we had to walk a BSP tree !!<br />Anyway, if people insist on using the Portal feature incorrectly, ie, not assigning enough portal surfaces causing large polygon counts in sectors, then I can always add BSP later on.<br />For now, the whole concept of this is to avoid walking down the same paths as those who went before us.<br />I wish to encourage those with a coding background who would like to get into gamecoding by writing a similar document to Chris Hobbs' Tetris example, but for 3d, and for dx8.</div>
    <div class="meta">Posted on 2002-06-01 11:05:54 by Homer</div>
   </div>
   <div class="post" id="post-40960">
    <div class="subject"><a href="#post-40960">Next Generation 3D Engine</a></div>
    <div class="body">I have tough of writing an article for using Win32 assembly with OpenGL. But I really don't know if people would be interested since there is already much C/C++ information on the subject.<br /><br />Also dont know if the article should be very basic (Nehe style tutorial), or more advanced (NVIDIA style ones). <br /><br />;---------------------------------------------------------------------------------<br />I have one question for the engine, I had a similar idea of using materials for identifiying portals, but got the problem that placing the portals required too much dicipline on part on the artist. So instead we opted to divide the buildings in rooms with portal polygons at their entrances and windows. The room themselves are bsp based. <br /><br />;---------------------------------------------------------------------------------<br />Some tough on engine designs<br /><br />One of the best features an engine could have is seamless integration between inside and outside areas (as you may know portals are ideal for interior scenes, but a bit lacking for exterior ones. (altough when used in conjunction with an exterior engine or module, havegood results). The ultimate seamless should be if the player could be on space, go to earth, go to island, go to building on island, and go to room on building on a seamless fashion. So clearly there is room for algorithms that have not yet been tough of.<br /><br />There is some tough on realtime prodedure generated terrain, building, plants , world generation. In the game area, this give the oportunity on vast worlds. This is possible (with the exception of the plants) in todays hardware, altough not as straight forward as using meshes.<br /><br />Any new engine should try to take advantage as much possible of the shader hardware in the newer video cards. So its design should acomodate for them as well as hardware T&amp;L.</div>
    <div class="meta">Posted on 2002-06-01 12:33:53 by dxantos</div>
   </div>
   <div class="post" id="post-40972">
    <div class="subject"><a href="#post-40972">Next Generation 3D Engine</a></div>
    <div class="body">I am applying my matrices using a vertex blender to perform tweening between animation frames (nonlinear keyframing) and currently am applying four layers of matrices to the animated models, so it scales well.<br />I wasn't intending on using the engine for outdoor scenes, but if I do decide to go to full hack and code indoor/outdoor, it will switch to progressive meshes and steer clear of BSP. I mean really, BSP is not much use either when it comes to empty space,it's more suited to a quadtree or octree engine, don't you agree?<br />They're best at dealing with empty spaces,  the only drawback to portal engines being clear line of sight through nested portals.<br />This could be avoided during design, restricting the view to large empty sectors to its sibling sectors.<br />I don't think quake3's use of PVS (potentially visible sets) is very much different to saying &quot;A node in a BSP now is a sector in a portal engine, what surfaces can we see in this sector?&quot;<br />I think it's just a tad redundant. They're encoding all the potentially visible surfaces from each Node within that Node. Why do we need a BSP in the traditional sense if we think about a portal engine in BSP terms, as being a tree-structure containing PVS information? That's what I'm saying.<br />Why do we NEED to keep a BSP, if we can determine the PVS for the Node we're in without being concerned about &quot;some&quot; overdraw? Remember, the whole point of BSP is to figure out what NOT to draw without having to process the entire world. It's nothing more than a method of Subdividing Space. It's beauty lies in it's system of keeping the Order of surfaces in the world, to avoid z-sorting, which was the classical method of VSD (Visible Surface Determination). That beauty comes at a price. The great drawback of BSP (realtime manipulation) can be conquered, I am certain, without having to resort to old z-sorts or scary nested octree or quadtree systems. I do agree completely that Portals won't handle Outdoor scenes on their own.<br />Dirty Notes are at <a target="_blank" href="http://s-a-l-l-y.com/WhyBother.html">This Link</a> <br />You may be interested to learn that I am not only using materials to encode portals, I am also using them to tag bodyparts within the skinned models. They contain hidden surfaces which are exposed as parts are &quot;hacked off&quot;, we simply don't rend those materials, and we copy those vertices into an instanced object so it can fall to the ground... the demo game I am creating with the engine is an online multiplayer Last Man Standing game where you may steal and use bodyparts (cannibalistic robots) but I do include some humans which are good for target practise.<br />Entire skinned models can be instanced as particle arrays for blowing them up, even though the model is loaded and stored as a single skinned mesh, simply because we assume that the vertices of a bodypart are identifiable by the material of the surfaces which make it up.</div>
    <div class="meta">Posted on 2002-06-01 14:50:31 by Homer</div>
   </div>
   <div class="post" id="post-42050">
    <div class="subject"><a href="#post-42050">Next Generation 3D Engine</a></div>
    <div class="body">I would LUV Environment/Chrome mapping. They are so cool and I can just sit down and look at them for days! It astonishes me that game developers don't use it that much and its pretty quick too. I'm making a 3D engine too so that my friends and I can make a small game and I can reuse it by just adding new features. I don't see why Environment mapping cant be implemented its not that expensive in terms of CPU time. BTW I have an AMD Athlon 900Mhz and I want to see ur 3D engine so don't do something TOO computationally expensive.</div>
    <div class="meta">Posted on 2002-06-08 20:25:10 by x86asm</div>
   </div>
   <div class="post" id="post-42122">
    <div class="subject"><a href="#post-42122">Next Generation 3D Engine</a></div>
    <div class="body">As you are probably aware, environmental mapping is akin to raytracing in its resolution demands and calculus.<br />I perform a kind of environmental mapping in my projection and clipping to a portal surface, but as for realtime environmental mapping, that's certainly a worthy consideration... it can be faked to a degree, if we think about it ... we need to project the mirror surface along its normal, and figure out where its vertices intersect textured world surfaces, then we need to split our surface according to any splits in the world surfaces within our projected surface, and finally, copy and/or calculate texture coordinates for the split-up and projected mirror surface.<br />Sounds like a lot, but I think it could be handled nicely enough.<br />I'll add that one to my to-do list, and keep brainstorming it.<br /><br />In the meantime, I am reviewing my whole notion of portals and sectors, and am considering going oldschool in my mapping of the world, by keeping the 3d map as a 2d tilemap of 3d objects which each have an object ID and a height field. Each object would itself be a sector, and rooms would no longer be considered sectors per se. The initial cull would be performed on the 2d tilemap in a similar fashion to many 3d arcade games, which &quot;chop out&quot; a section of the world around the player before manipulating it to suit the view. It would lend itself to a very simple 3d raised block contruction for the world editor which would make it childsplay to create new worlds.<br />Simple ideas are often the best.</div>
    <div class="meta">Posted on 2002-06-09 07:51:32 by Homer</div>
   </div>
   <div class="post" id="post-42166">
    <div class="subject"><a href="#post-42166">Next Generation 3D Engine</a></div>
    <div class="body">I've heard of ray tracing b4 but havent actually used it. It seems to me Environment/Chrome mapping is a fancy form of multitexturing (see whats so cool about multitexturing). Also you could do some pixel shading if possible to fake Enviro/Chrome mapping! I'm coding a 3D engine also and since u r so knowledgeable will you mind if I come to you for help? Oh ya please dont make the engine too intensive on the FPU...I onl;y have an Athlon 900Mhz :(</div>
    <div class="meta">Posted on 2002-06-09 13:15:58 by x86asm</div>
   </div>
   <div class="post" id="post-42211">
    <div class="subject"><a href="#post-42211">Next Generation 3D Engine</a></div>
    <div class="body">for exterior Quad/Octree is a good choice. And combining them with portals could give you both interior/exterior. That way you will render the exterior only when you are on it or when there is a visible portal that is visible to it. And the inverse is also true, draw the inside from the outside if there is a portal pointing to it. <br /><br />I do use very small bsp for objects when I need translucency on them. That way I can do back to front drawing without needing to sort the polys every frame. (altough newer hardware have techniques for sort independent translucency using shaders that could make this unecesary).</div>
    <div class="meta">Posted on 2002-06-09 17:30:29 by dxantos</div>
   </div>
   <div class="post" id="post-42423">
    <div class="subject"><a href="#post-42423">Next Generation 3D Engine</a></div>
    <div class="body">I'll take that as a vote of confidence !! :alright: <br /><br />Progress has slowed as I am becoming bogged in the physics engine (never was so good at physics :tongue:)<br />I'm trying to implement the kind of physics we saw once apon a time in THRUST ... multiple objects whose physics affect one another in a chain... you may have seen this if you ever played HITMAN and tried dragging a dead body around.<br /><br />At the same time, I am working on the particle engine, which itself is much more relaxing for me as it boils down to little more than a self-managing linked list...familiar territory :)<br /><br />I could be lazy and import someone else's physics engine, but I would derive no satisfaction from it, learn anything or be in a fit position to write a tutorial on the subject.<br /><br />I am determined to create physics that are both fast to implement as well as having the &quot;right feel&quot;.</div>
    <div class="meta">Posted on 2002-06-10 13:53:05 by Homer</div>
   </div>
   <div class="post" id="post-46697">
    <div class="subject"><a href="#post-46697">Next Generation 3D Engine</a></div>
    <div class="body">Ok guys, the proverbial expletive has hit the spinny thing.<br /><br />Due to popular demand for outdoor support,<br />the Portal Engine has been scrapped in favor of<br />one which better handles large, open scenes.<br />My initial reaction was to brush up on OSP implementations.<br />While doing this something occured to me which I haven't been able to dismiss: in a world where space is divided into equal cubic subdivisions, empty space is ALWAYS mapped into your tree.<br />Even if this means a Node with all children=NULL.<br /><br />You might be thinking - SO? And now I get to the point:<br /><br />What we have described in OSP is nothing more than<br />your venerable old 2D Tile based map (aka arcade games) with an added 3rd dimension, stored in a linked-list (Tree).<br /><br />Why not just base the map on a 3d cubic array?<br />Our array contains values which SYMBOLIZE a cluster of 3d geometry. This technique was used recently in the Tony Hawke skateboarding games in combination with elliptical collision detection. <br /><br />I have completely redesigned the runtime and file formats for world maps as a result of this decision, but everything else can stay, so it's no big loss, just some time wasted.</div>
    <div class="meta">Posted on 2002-07-08 10:37:50 by Homer</div>
   </div>
   <div class="post" id="post-46723">
    <div class="subject"><a href="#post-46723">Next Generation 3D Engine</a></div>
    <div class="body">Just one question EvilHomer2k<br />Will my Athlon 900Mhz handle it? Its a Socket A T-Bird</div>
    <div class="meta">Posted on 2002-07-08 14:25:54 by x86asm</div>
   </div>
   <div class="post" id="post-47686">
    <div class="subject"><a href="#post-47686">Next Generation 3D Engine</a></div>
    <div class="body">Most definitely!<br />I am coding this on a 333 with ATI Rage2 :tongue: <br />Testing is carried out on a variety of machines and graphic cards.<br />I hope to be able to create intuitive display options by querying the hardware, but that's not my concern at the moment.</div>
    <div class="meta">Posted on 2002-07-15 09:47:25 by Homer</div>
   </div>
  </div>
 </body>
</html>