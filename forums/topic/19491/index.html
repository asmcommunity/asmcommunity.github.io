<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>pls help us with our school project :) ASAP!! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19491" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=19491">pls help us with our school project :) ASAP!!</a></p>
   <div class="post" id="post-150173">
    <div class="subject"><a href="#post-150173">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">it got no erros but when we run it .. its only a black screen :P<br /><br />		.model	small<br />		.stack	100h<br />		.286                                  ;for port/string insturctions<br /><br /> MaxStar    Equ 600d<br /> RomSeg     Equ 0f000h                        ;needed for Random numbers<br /> VgaSeg     Equ 0a000h                        ;vga screen segament<br /> LineWidth  Equ 320d<br /> LineHeight Equ 200d<br /><br />		.data<br />attrib	DB	?<br />row	DB	?<br />col	DB	?<br />create  DB      '     ###   ###  ####  #### #### #   #    '<br />        DB      '    #     #   # #   # #    #    ##  #    '<br />        DB      '     ###  #     ####  ###  ###  # # #    '<br />        DB      '        # #   # #  #  #    #    #  ##    '<br />	DB	'     ###   ###  #   # #### #### #   #    '<br />	DB	'                  SAVER                  '<br />        DB      '                                         '<br />        DB      '                   by                    '<br />        DB      '           PAUL ANTHONY BIRUNG           '<br />        DB      '              LEA SANTURTIO              '<br />        DB      '             LARY BALOFINOS              '<br />        DB      '                                         '<br />        DB      41 DUP(0dbh)<br />        DB      0dbh,'                                       ',0dbh<br />        DB      0dbh,'           * SCREEN SAVER *            ',0dbh<br />        DB      0dbh,'                                       ',0dbh<br />        DB      0dbh,'           1) PAUL BIRUNG              ',0dbh<br />        DB      0dbh,'           2) STARS                    ',0dbh<br />        DB      0dbh,'                                       ',0dbh<br />        DB      0dbh,'           &lt;ESC&gt; to exit               ',0dbh<br />        DB      0dbh,'                                       ',0dbh<br />        DB      41 DUP(0dbh)<br />choice	DB      '  Enter your choice ==&gt; $'  <br /><br /> Stars   DD MaxStar dup(?)                  ;Star buffer:X(word)+Y(byte)+<br />                                              ; Color(b)=Double Word(4 bytes)<br /><br />   Palette DB 15,15,15,25,25,25,40,40,40,60,60,60<br /><br />name1   DB      ' ######   #####  #     # #         ######  ### ######  #     # ##    #   ####  ',13,10<br />        DB      ' #     # #     # #     # #         #     #  #  #     # #     # ##    #  #    # ',13,10<br />        DB      ' #     # #     # #     # #         #     #  #  #     # #     # # #   # #       ',13,10<br />        DB      ' ######  ####### #     # #         ######   #  ######  #     # #  #  # #  #### ',13,10<br />        DB      ' #       #     # #     # #         #     #  #  #    #  #     # #   # # #     # ',13,10<br />        DB      ' #       #     # #     # #         #     #  #  #     # #     # #    ##  #    # ',13,10<br />        DB      ' #       #     #  #####  #######   ######  ### #     #  #####  #    ##   ####  ',13,10,'$'<br />.386<br />	.code<br />Smain	proc	near<br />	mov 	ax,	@data<br />	mov 	ds,	ax<br />	MOV	ES,AX<br />lp1:		<br />	MOV     attrib, 02h<br />        CALL    clear <br />        CALL    output      <br />        CALL    inpt<br />	CMP	al,	31h<br />	JE	s1<br />	CMP	al,	32h<br />	JE	s2<br />	CMP	al,	1bh<br />	JE	EXT<br />	JNE	lp1<br />s1:	<br />	CALL	ssaver1<br />	JMP	EXT<br />s2:	CALL	ssaver2	<br />EXT:	<br />	call	clear<br />	mov 	ah,	4ch<br />	int	21h	<br />Smain	endp<br />ssaver1	PROC	NEAR<br />	PUSHA<br />	mov 	attrib,	12h<br />	call 	clear<br />	mov	row,	00<br />	mov 	col,	00<br />	call	set<br />	call 	disply<br />	mov	cx,	100<br />again:<br />	inc attrib<br />	call	delay<br />	call	clear<br />	inc 	row<br />	cmp	row,17<br />	JNE	ss1<br />	mov	row,00<br />ss1:	call	set<br />	call	disply<br />	call	delay<br />	dec	cx<br />	cmp	cx,	0<br />	jne	again<br />	POPA<br />	RET<br />ssaver1	ENDP<br />ssaver2	PROC	NEAR<br />PUSHA<br />jmp    entry<br /><br />StarBuffer Proc                               ;Initialize Star Data(X,Y,Color)<br /><br />           mov         cx,MaxStar             ;initialize counter(CX)<br />           mov         ax,RomSeg<br />           mov         ds,ax<br />           xor         si,si                  ;DS:SI points to ROM<br />           mov         di,offset Stars        ;ES:DI points to Star buffer<br /><br />      Fill:lodsw                              ;Load word from ROM(DS:SI)<br />           mov         bx,LineWidth<br />           xor         dx,dx<br />           div         bx<br />           mov         ax,dx                  ;ax=ax mod 320(X coordinate)<br />           stosw                              ;store ax to star buffer(ES:DI)<br />           lodsw                              ;load another word from ROM<br />           mov         bx,LineHeight<br />           xor         dx,dx<br />           div         bx<br />           mov         ax,dx                  ;ax=ax mod 200(Y coordinate)<br />           stosb                              ;store byte(ES:DI)<br /><br />           lodsb                              ;load byte from ROM<br />           and         al,3<br />           inc         al                     ;al=al mod 4+1<br />           stosb                              ;store byte(ES:DI)<br />           Loop        Fill                   ;decrease CX(Counter)<br />           Ret                                ;Return<br />StarBuffer EndP<br /><br />PlotStar   Proc                               ;Plot pixel(dx=X,al=Y,ah=Color)<br /><br />           push        ax                     ;save AX<br />           push        dx                     ;save DX<br />           xor         ah,ah<br />           mov         bx,LineWidth<br />           mul         bx<br />           pop         dx                     ;restore DX<br />           add         ax,dx                  ;ax=X+Y*320<br />           mov         bx,ax<br /><br />           mov         ax,VgaSeg<br />           mov         es,ax                  ;ES points to vga screen<br />           pop         ax                     ;restore AX<br />           mov         es:,ah             ;Plot pixel<br />           Ret<br />PlotStar   EndP<br /><br />DrawStars  Proc                               ;Move all stars<br /><br />           mov         cx,MaxStar             ;our Counter(CX)<br />           mov         si,offset Stars        ;SI points at &quot;Stars&quot;<br /><br />  StarLoop:lodsw                              ;Load word from &quot;Stars&quot;<br />           mov         dx,ax<br />           lodsw<br />           xor         ah,ah                  ;Set AH(color) to zero<br />           call        PlotStar               ;do Plot Pixel<br /><br />           sub         si,4                   ;2*lodsw=adds to si 4(2 words)<br />           lodsw<br />           mov         dx,ax<br />           lodsw<br /><br />           mov         bx,ax<br />           shr         ax,8                   ;shift right 8 ax times(al=ah)<br />           add         dx,ax                  ;add dx(X),color<br />           cmp         dx,LineWidth           ;range checking<br />           jnae        Continue               ;jump NOT above or equel<br />           xor         dx,dx                  ;DX(X)=0<br />  Continue:sub         si,4<br />           mov         ,dx              ;store new values<br />           mov         ,bx<br />           mov         ax,bx<br />           call        PlotStar               ;do Plot Pixel<br />           add         si,4                   ;next star data<br />           loop        StarLoop               ;decrease counter(CX)<br />           Ret<br />DrawStars  EndP<br /><br />Sync       Proc                               ;Vertical screen Sync<br /><br />           mov         dx,3dah                ;vga input data port<br />        @v:in          al,dx<br />           test        al,00001000b           ;like logical AND<br />           jz          @v                     ;repeat until the 3rd bit is<br />           mov         dx,3dah                ;on.<br />        @z:in          al,dx<br />           test        al,00001000b<br />           jnz         @z                     ;repeat until the 3rd bit is<br />           Ret                                ;off.<br />Sync       EndP<br /><br />Entry:                                        ;Main prog start's here<br /><br />           call        StarBuffer             ;Initialize stars<br />           mov         ax,@data<br />           mov         ds,ax                  ;DS points at Data segament<br /><br />           mov         ax,13h<br />           int         10h                    ;mode 320x200x256<br /><br />           mov         dx,03c8h               ;palette sequencer port(03c8h)<br />           mov         al,1<br />           out         dx,al                  ;assign value to port<br />           inc         dx                     ;palette data port(03c9h)<br />           mov         si,offset Palette<br />           mov         cx,4*3                 ;assign palette to port 03c9h<br />           rep         outsb<br /><br />      Main:call        DrawStars              ;main loop:<br />           call        Sync<br />           mov         ah,1<br />           int         16h                    ;check if keypressed<br />           jz          Main                   ;if not repeat loop<br /><br />           mov         ah,0ch                 ;flush keyboard buffer<br />           int         21h<br />           mov         ax,3<br />           int         10h                    ;mode 80x25x16<br />POPA<br />	RET<br />ssaver2	ENDP<br />output   PROC    NEAR<br />        PUSHA<br />        <br />        MOV     ax,     1300h<br />        LEA     bp,     create<br />        MOVZX   bx,     attrib<br />        MOV     cx,     41<br />        MOV     dh,     0<br />        MOV     dl,     19 <br />A10:<br />        INT     10h<br />        ADD     bp,     41<br />        INC     dh<br />        CMP     dh,     22<br />        JNE     A10<br />	<br />	MOV	row,	24<br />        CALL    set<br />        LEA     dx,     choice<br />        MOV     ah,     9<br />        INT     21h<br />        <br />        POPA<br />        RET<br />output  ENDP<br />disply	PROC	NEAR<br />	pusha<br />	mov ah,9<br />	lea dx, name1<br />	int 21h<br />	popa<br />	RET<br />disply	ENDP<br />delay	PROC	NEAR<br />	PUSHA<br />	MOV 	dx,	80h<br />T1:	MOV	cx,	0ffffh<br />T2:	dec	cx<br />	JNZ	T2<br />	DEC	dx<br />	JNZ	T1<br />	POPA<br />	RET<br />delay	ENDP<br />inpt    PROC    NEAR<br />	MOV     ah,     1<br />        INT     21h<br />	RET<br />inpt    ENDP<br />set	PROC	NEAR<br />	PUSHA<br />	mov 	ah, 	02<br />	mov 	bh, 	00<br />	mov 	dh, 	row<br />	mov 	dl,	col <br />	INT	10h<br />	POPA<br />	RET<br />set	ENDP<br />clear proc near<br />      	pusha<br />	mov ax, 0600h<br />	mov bh,attrib<br />	mov cx,0000h<br />	mov dx,184fh<br />	int 10h<br />	popa<br />	ret<br />clear endp<br />end</div>
    <div class="meta">Posted on 2004-09-22 06:52:20 by kraven</div>
   </div>
   <div class="post" id="post-150189">
    <div class="subject"><a href="#post-150189">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">1. don't expect that anyone is going to read such a huge block of code<br />2. this isn't win32asm at all<br />3. you appear to have no clue what you are doing</div>
    <div class="meta">Posted on 2004-09-22 10:50:28 by lifewire</div>
   </div>
   <div class="post" id="post-150199">
    <div class="subject"><a href="#post-150199">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">At least put some text formatting, it's painful to read as it is. Use the &quot;Code&quot; button to preserve the formatting when editing your post. :)</div>
    <div class="meta">Posted on 2004-09-22 14:56:27 by QvasiModo</div>
   </div>
   <div class="post" id="post-150209">
    <div class="subject"><a href="#post-150209">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">The problem is in your output function. When the BIOS returns, the registers won't have the same value. You have to set them again. My BIOS changes AX, CX and DX. I don't know if other BIOSes change other registers.</div>
    <div class="meta">Posted on 2004-09-22 16:02:31 by Sephiroth3</div>
   </div>
   <div class="post" id="post-150212">
    <div class="subject"><a href="#post-150212">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">Here's more info on interrupts:<br />http://www.ctyme.com/rbrown.htm</div>
    <div class="meta">Posted on 2004-09-22 16:42:23 by QvasiModo</div>
   </div>
   <div class="post" id="post-150218">
    <div class="subject"><a href="#post-150218">pls help us with our school project :) ASAP!!</a></div>
    <div class="body"><div class="quote">1. don't expect that anyone is going to read such a huge block of code<br />2. this isn't win32asm at all<br />3. you appear to have no clue what you are doing</div><br /><br />  One of the reasons that people post on these boards is so that they can learn more about assembler.  Everyone starts assembler without knowing very much.  Insulting them when they are just beginning doesn't help.</div>
    <div class="meta">Posted on 2004-09-22 17:59:14 by mark_larson</div>
   </div>
   <div class="post" id="post-150238">
    <div class="subject"><a href="#post-150238">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">people on these boards aren't here to do other's homeworks. that code looks like code that he either 1.) stole from somewhere entirely, ot 2.) product of patchwork - and thus lacking any understanding for it.</div>
    <div class="meta">Posted on 2004-09-22 22:44:44 by Drocon</div>
   </div>
   <div class="post" id="post-150266">
    <div class="subject"><a href="#post-150266">pls help us with our school project :) ASAP!!</a></div>
    <div class="body"><div class="quote">people on these boards aren't here to do other's homeworks. that code looks like code that he either 1.) stole from somewhere entirely, ot 2.) product of patchwork - and thus lacking any understanding for it.</div><br /><br />  If people on the boards aren't here to do other people's homework then why did people reply with help?  The truth is *YOU* aren't here to do someone elses homework, don't speak for other people.  So instead of popping in here and mouthing off, let people who want to help help.  We can't help promote the assembler community if people keep getting their hands chopped off when they ask for help.  If you don't want to help the guy, then simply don't respond.<br /><br /><br />1) Stolen?  Hardly.  Did you even try and read the code line for line? or did you just skim it?  It's quite obviously not stolen. It looks like someone who does not know much about assembler trying to write code.  Which if he's taking a class in assembler makes sense.<br /><br />2) patchwork?  The professor probably provided bits and pieces or at least a starting point to do the assignment.  That's pretty common as well in assignments from school.</div>
    <div class="meta">Posted on 2004-09-23 10:39:31 by mark_larson</div>
   </div>
   <div class="post" id="post-150271">
    <div class="subject"><a href="#post-150271">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">the major problem i had with this thread is that it is something like: here is my code, i have no clue where the bug is, please find it.<br /><br />imho a ridiculus question, because of several reasons:<br /><br />1. usually you don't write a total program, run and discover that it doesn't work at all. normally one writes such stuff bit by bit. especially when (like you suggest) you are learning something new. so first switch to a graphic mode, draw some pixels, make the pixels move, make stars.<br /><br />2. like i stated before: it is not very likely is going to read such a huge block of code and will then say: the bug is there and there. unless you are some machine or other non-human being.<br /><br />i felt that this code was stolen indeed, to quickly gather some creditpoints without doing much work. also, on my school and university the teachers / proffesors who were leading projects were always very helpful when you had a good question.</div>
    <div class="meta">Posted on 2004-09-23 12:20:44 by lifewire</div>
   </div>
   <div class="post" id="post-150293">
    <div class="subject"><a href="#post-150293">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">Guys don't let this become a silly flame, mark espically come on, its a bit hypocritical to tell someone to simply not post if they don't want help when your own posts offer no help. I'm not saying that the circumstances or motivations are the same but your only dragging things further off topic.<br /><br />The fact is in most cases when someone posts like this and no one responds then they repost bits like &quot;So no one knows?&quot; or &quot;Why won't anyone answer?&quot; eventually they leave probably to never come back. Sometimes they get abusive even.<br /><br />So I see it as no real porblem that lifewire or Drocon said what they did, in fact its a good thing because at least now kraven as some idea why he/shes not getting help.<br /><br />Anyway, while this is perhaps being a bit moderatorish of me I want noone to post anymore on this debate, I want only posts which address the origional question, if they don't come then kraven sorry, but the reasons why have been made pretty clear.<br /><br />Anyone who can't let the issue go then fight it out in The Crusades or away from the board :)</div>
    <div class="meta">Posted on 2004-09-23 18:03:21 by Eóin</div>
   </div>
   <div class="post" id="post-150342">
    <div class="subject"><a href="#post-150342">:(</a></div>
    <div class="body">i just need someone who can figure out what the error is.. pls help <br />heres the execution file and .asm file<br /><a target="_blank" href="http://www.geocities.com/luap10ph/PAUL.zip">http://www.geocities.com/luap10ph/PAUL.zip</a><br /><a target="_blank" href="http://www.geocities.com/luap10ph/paul.asm">http://www.geocities.com/luap10ph/paul.asm</a></div>
    <div class="meta">Posted on 2004-09-24 10:33:09 by kraven</div>
   </div>
   <div class="post" id="post-150362">
    <div class="subject"><a href="#post-150362">pls help us with our school project :) ASAP!!</a></div>
    <div class="body">There are several errors here. As I said, the registers will have changed after you call BIOS in your Output function. And you have to put &quot;end Smain&quot; at the end, and not just &quot;end&quot;, to indicate where the program starts. And then you're referring to some data in the code segment through DS, which points to your data segment. You have to move the data into the data segment.</div>
    <div class="meta">Posted on 2004-09-24 11:37:53 by Sephiroth3</div>
   </div>
  </div>
 </body>
</html>