<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Floats, Doubles and libc -- need help! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11335" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=11335">Floats, Doubles and libc -- need help!</a></p>
   <div class="post" id="post-85592">
    <div class="subject"><a href="#post-85592">Floats, Doubles and libc -- need help!</a></div>
    <div class="body">Hey all...<br /><br />I'm trying to implement floating point numbers and reals in a library I'm writing but I'm having a bit of difficulty (UNIX platform)... What I am trying to do is create a structure in memory which stores 64 bit numbers (integers or floats) and I don't have any good resources to read on how to do this in assembler... I use and need to be able to use libc calls such as printf(), and have everything work with them but I can't even get a very simple example to work:<br /><br /><pre><code><br />dbl  dq   12032.34f<br />msg db  &quot;%f&quot;,0xA,0<br />ccall printf, msg, dbl<br /><br />I always get this as output:<br /><br />0.000000<br /><br />Can anyone explain why? I would think that FASM would be storing the float in a proper format, but am I missing something? <br /><br />John</div>
    <div class="meta">Posted on 2003-03-07 08:45:34 by coogle</div>
   </div>
   <div class="post" id="post-85596">
    <div class="subject"><a href="#post-85596">Floats, Doubles and libc -- need help!</a></div>
    <div class="body">Try ccall printf, msg, dword ,dword </div>
    <div class="meta">Posted on 2003-03-07 08:51:43 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-85598">
    <div class="subject"><a href="#post-85598">Floats, Doubles and libc -- need help!</a></div>
    <div class="body">Coogle,<br /><br />You can check this example:<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/showthread.php?s=&amp;postid=71184.msg71184">http://www.asmcommunity.net/board/showthread.php?s=&amp;postid=71184.msg71184</a><br /><br />Regards,<br /><br />Vortex</div>
    <div class="meta">Posted on 2003-03-07 09:07:13 by Vortex</div>
   </div>
   <div class="post" id="post-85614">
    <div class="subject"><a href="#post-85614">Floats, Doubles and libc -- need help!</a></div>
    <div class="body">Am I correct in my understanding that the reason why I need to provide two parameters in this form is to pass 64 bits (qword)? i.e. <br /><br />printf, msg, HI dword, LO dword<br /><br />or is there another reason? Also, does this process also work for 64 bit integers (doubles)?<br /><br /><br />ccall printf, msg, dword ,dword <br /><br />John</div>
    <div class="meta">Posted on 2003-03-07 12:32:45 by coogle</div>
   </div>
  </div>
 </body>
</html>