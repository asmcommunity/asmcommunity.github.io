<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>SEH with Nasm - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9858" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=9858">SEH with Nasm</a></p>
   <div class="post" id="post-73416">
    <div class="subject"><a href="#post-73416">SEH with Nasm</a></div>
    <div class="body">I'm relatively new to asm and wanted to code a programm using SEH. But it was very hard to find some SEH-examples for Nasm :(<br />Finaly I found a nice example for Tasm and translated it to nasm. If anyone is interested: Here it is<br /><br /><br />EXTERN MessageBoxA<br />EXTERN ExitProcess<br /><br />SECTION DATA USE32 CLASS=DATA<br />msg 	db &quot;*!Error!*&quot;,0<br /><br />SECTION CODE USE32 CLASS=CODE<br />..start:<br /><br />mov 	eax, EXCEPTIONHANDLER          <br />push	eax                           <br />push 	dword                         <br />mov	, esp                    <br />;===================<br />                         <br />sub 	eax, eax                               ;preparing for error<br />mov 	dword , 'ZMEP'             ;ERROR  =&gt; now we jump to EXCEPTIONHANDLER<br />          <br />;===================                                 <br />jmp 	RESTORESEH                        ;if there was no Error we jump to  RESTORESEH                                      <br /><br /><br />EXCEPTIONHANDLER:                         <br />mov 	esp,             <br />;===================<br />push	dword 0                                ;this code is executed if there was an error<br />push	dword msg<br />push 	dword msg<br />push	dword 0<br />call 	MessageBoxA<br />;===================      <br />                              <br />RESTORESEH:                               <br />pop	dword                       <br />add 	ESP, 4                         <br /><br />ende:<br />push 	dword 0<br />call 	ExitProcess</div>
    <div class="meta">Posted on 2002-12-30 07:59:44 by bugtrap</div>
   </div>
   <div class="post" id="post-73471">
    <div class="subject"><a href="#post-73471">SEH with Nasm</a></div>
    <div class="body">Great work! I am sure it will be useful to majority of NASM users here (I am sure there are some...).</div>
    <div class="meta">Posted on 2002-12-30 11:30:54 by comrade</div>
   </div>
  </div>
 </body>
</html>