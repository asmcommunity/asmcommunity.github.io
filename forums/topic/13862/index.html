<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Tut12: Global functions vs Virtual functions - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13862" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13862">Tut12: Global functions vs Virtual functions</a></p>
   <div class="post" id="post-107155">
    <div class="subject"><a href="#post-107155">Tut12: Global functions vs Virtual functions</a></div>
    <div class="body">Iczelion's Tut 12 is about memory management and uses functions like GlobalAlloc, GlobalFree<br />But Microsoft says <br /><div class="quote"><br />The GlobalAlloc function allocates the specified number of bytes from the heap. Windows memory management does not provide a separate local heap and global heap. <br /><br /><strong>Note:</strong>  The global functions are slower than other memory management functions and do not provide as many features. Therefore, new applications should use the heap functions. However, the global functions are still used with DDE, the clipboard functions, and OLE data objects. <br /><br /></div><br />Why does he still teach GlobalAlloc instead for VirtualAlloc?</div>
    <div class="meta">Posted on 2003-06-15 04:56:06 by greenant</div>
   </div>
   <div class="post" id="post-107197">
    <div class="subject"><a href="#post-107197">Tut12: Global functions vs Virtual functions</a></div>
    <div class="body">VirtualAlloc has a lot of options (parameters), and allocates large blocks of memory.<br /><br />If you are allocating and deallocating <strong>often</strong>, then you get better memory usage and speed using the other Alloc functions.  The speed comes from reducing the number of context switches to and from system context. With VirtualAlloc, <strong>every time</strong> you allocate or deallocate memory, you get this performance drop from context switches.<br /><br />I suggest using HeapAlloc instead of GlobalAlloc.<br />The primary differences are that you need to specify a heap handle, and there's no confusion about whether &quot;locking&quot; is required or not. When your program starts, there is already one heap handle available - use GetProcessHeap to get it.</div>
    <div class="meta">Posted on 2003-06-15 17:14:08 by tenkey</div>
   </div>
   <div class="post" id="post-107233">
    <div class="subject"><a href="#post-107233">Tut12: Global functions vs Virtual functions</a></div>
    <div class="body">I agree<br /><br /><div class="quote"><br /><strong>Windows Me/98/95:</strong>  The heap managers are designed for memory blocks smaller than four megabytes. If you expect your memory blocks to be larger than one or two megabytes, you can avoid significant performance degradation by using the VirtualAlloc or VirtualAllocEx function instead.<br /></div><br /><br />We can choose between Heap functions and Virtual functions but avoid Global (or Local) funcions</div>
    <div class="meta">Posted on 2003-06-16 01:56:35 by greenant</div>
   </div>
  </div>
 </body>
</html>