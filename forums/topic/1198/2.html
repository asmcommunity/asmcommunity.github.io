<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>DirectX8-Examples - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=1198" />
  <link rel="prev" href="../?id=1198&amp;page=1" />  <link rel="next" href="../?id=1198&amp;page=3" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=1198">DirectX8-Examples</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=1198&amp;page=1" style="">&laquo;</a><a href="../?id=1198&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="1198" /><input type="number" name="page" min="1" max="4" step="1" value="2" onchange="this.form.submit();" /><a href="../?id=1198&amp;page=3">&gt;</a><a href="../?id=1198&amp;page=4">&raquo;</a></form>   <div class="post" id="post-11040">
    <div class="subject"><a href="#post-11040">DirectX8-Examples</a></div>
    <div class="body">Afternoon, All.<br /><br />I've attached a *Vertex Shader* example. To re-assemble it, you may need the updated *d3d8types.inc* file (<a target="_blank" href="http://scrontsoft.cjb.net/">Here</a>).<br /><br />There's still a problem with switching the *ZBuffer* on. I'll post an update once I've figured out how to solve it.<br /><br />It's almost identical to the *matrices* Tut, except for the replacement for the Shader code.<br /><br />Cheers,<br />Scronty<br /><br />&lt;edit&gt;<br />I've fixed the ZBuffer problem. I wasn't clearing it. Call me a Newbie ;P !<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2001-11-03 04:46:34 by Scronty</div>
   </div>
   <div class="post" id="post-11059">
    <div class="subject"><a href="#post-11059">DirectX8-Examples</a></div>
    <div class="body">dang, pretty good. I didn't even know DX had that capability :)<br /><br />BTW, I figured out those grid things, and also a new way to have an entire grid -without- garbage vertexes. I'll post the code in a few days...</div>
    <div class="meta">Posted on 2001-11-03 09:14:17 by Kenny</div>
   </div>
   <div class="post" id="post-11075">
    <div class="subject"><a href="#post-11075">DirectX8-Examples</a></div>
    <div class="body">Look at all the pretty colors.  Great work <strong>Scronty</strong>.<br /><br />I still can't get <strong>Caleb</strong>'s demo working. :(  Must be the GeForce3?</div>
    <div class="meta">Posted on 2001-11-03 13:19:20 by bitRAKE</div>
   </div>
   <div class="post" id="post-11103">
    <div class="subject"><a href="#post-11103">DirectX8-Examples</a></div>
    <div class="body"><strong>Hello BitRake</strong> - I'm sorry to hear that it won't work until now ... but I don't believe that's a gForce3-problem :confused: .<br /><br />If there are any more people having problems to run this intro, please let me know ! (Well I'm in examination now until march 2002 :( , so please do not expect fast responses)<br /><br /><br /><strong>Hello Scronty !</strong><br /><br />Could you expand your vertex-shader-example using much more vertices ? This example works even without any hardware-vertex-shader (well, DirectX emulates this feature if it is not implemented in hardware, I know that) but it will be nice to see how fast this (emulation) is !<br /><br /><br /><br /><strong>Hello to all together !</strong> I need some help ...<br /><br />I have this problem: Many games / intros and at least also my intro will start only a few times in a Win2k-session. After that DirectX fails to initialize completely or (like Max Payne) there will no blitting to screen anymore and I have to reboot ! What's going wrong :confused:  ?<br /><br /><br />Greetings, Caleb</div>
    <div class="meta">Posted on 2001-11-03 17:24:37 by Caleb</div>
   </div>
   <div class="post" id="post-11133">
    <div class="subject"><a href="#post-11133">DirectX8-Examples</a></div>
    <div class="body"><strong>Caleb</strong>, I must have had an old version - D/L a fresh copy off your page and all is good!  Very cool spinning star field - if I put my face close enough to the monitor screen, I feel like I'm floating. :)</div>
    <div class="meta">Posted on 2001-11-04 10:42:54 by bitRAKE</div>
   </div>
   <div class="post" id="post-11150">
    <div class="subject"><a href="#post-11150">DirectX8-Examples</a></div>
    <div class="body"><div class="quote"><em>Originally posted by Scronty </em><br /><br />It's almost identical to the *matrices* Tut, except for the replacement for the Shader code.<br /><br />Cheers,<br />Scronty<br /></div><br /><br />Hi Scronty!<br /><br />Just a silly newbie question:<br /><br />&quot;Why would you want to do this anyway?  I've looked at the code and don't see that much to gain.  However, I only understand streams to a small extent. <br /><br />I've read what you have in the 'd3d8types.inc' and what microsoft says about them in the help file, but I'm not sure of their benefits (since couldn't you do this before streams anyway)?<br /><br />Well, that's it... back to my still defunct landscape generation... I think I have alot more to understand...<br /><br />-=Sliver=-<br /><br />ps. <a target="_blank" href="http://www.dx8g.com">http://www.dx8g.com</a> --didn't seem to work..</div>
    <div class="meta">Posted on 2001-11-04 16:49:47 by Sliver</div>
   </div>
   <div class="post" id="post-11159">
    <div class="subject"><a href="#post-11159">DirectX8-Examples</a></div>
    <div class="body">Afternoon, Sliver.<br /><br />If <a target="_blank" href="www.dx8g.com">www.dx8g.com</a> isn't working, try:<br /><a target="_blank" href="http://homepage.dtn.ntl.com/anthony.mcmahon/dx/">http://homepage.dtn.ntl.com/anthony.mcmahon/dx/</a> .<br /><br /><br />The *Vertex Shader* is exactly that - an example.<br />It's probably as basic as you can get. All it does, is replace the *SetTransform*s.<br /><br />The idea is to show how to get the *Vertex Shaders* working.<br /><br />Most of the modern pretty (uh, I mean *special*) effects in games nowadays, use *Vertex Shaders* and *Pixel Shaders*. They're usually kept inside their own separate file, which is loaded at runtime.<br /><br />They're also used to do *Vertex Blending*, i.e. seamless animation :).<br /><br />Look under &quot;Advanced Topics in DirectX Graphics&quot; in the P/SDK. Or visit nVidias' site for more info on what you can use them for.<br /><br />Anyhoo. That proggy was only the first example. I'm currently working on another, however I don't know how long it'll take. (bl**dy dolphins). M$ C++ is a real mess.<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2001-11-04 23:45:31 by Scronty</div>
   </div>
   <div class="post" id="post-11184">
    <div class="subject"><a href="#post-11184">DirectX8-Examples</a></div>
    <div class="body">Check this out...<br /><br />I took your code Scronty and changed it a bit... Makes pretty pictures...<br /><br />What it does is this: Takes a 8bit greyscale raw image file and makes a heightmap off of it. The image file can be any size, but must be a square (1x1 - 65536x65536 pixels). The only bug in the program is if it can't find &quot;heightmap.raw&quot; then it crashes</div>
    <div class="meta">Posted on 2001-11-05 12:37:33 by Kenny</div>
   </div>
   <div class="post" id="post-11542">
    <div class="subject"><a href="#post-11542">DirectX8-Examples</a></div>
    <div class="body"><div class="quote">Anyhoo. That proggy was only the first example. I'm currently working on another, however I don't know how long it'll take. (bl**dy dolphins). M$ C++ is a real mess.<br /><br />Cheers,<br /><strong>Scronty </div><br /><br />Hey Scronty and everybody...<br /><br />Need help in converting C++ to asm... I'm working on a drawindexprimitive example, but I need to convert this part of the c++ code to asm<br /><br /><pre><code><br />int FLAG_SIZE = 50<br />FlagVertices = new CUSTOMVERTEX &#91; NUM_FLAG_VERTICIES&#93;;<br /><br />for &#40;int ix = 0; ix &lt; FLAG_SIZE+1; ix++&#41;<br />     for &#40;int iy = 0; iy &lt; FLAG_SIZE+1; iy++&#41;<br />     &#123;<br />       FLOAT tu = ix/&#40;FLOAT&#41;FLAG_SIZE<br />       FLOAT tv = iy/&#40;FLOAT&#41;FLAG_SIZE<br /><br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.x = &#40;float&#41; &#40;ix-FLAG_SIZE/2&#41;;<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.y = 3*&#40;cos&#40;iy&#41;/3&#41;+cos&#40;ix/3&#41;<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.z = iy -FLAG_SIZE/2<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.nx = 0.0<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.ny = 1.0<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.nz = 0.0<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.tu = &#40;float&#41;tu*4<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.tv = &#40;float&#41;tv*4      <br /><br />      &#125;;<br /></code></pre><br /><br />Now I can really do the 2 for loops... not a problem... I can also do the complex equations... what I don't know is how to advance the loop<br /><br />for example<br /><br />push esi<br />ASSUME esi:PTR CUSTOMVERTEX<br />mov eax, offset FlagVertices<br />mov esi, eax<br /><br />mov ecx, 0<br /><br />;do for loop<br />@OuterLoop:<br /> push ecx<br />@InnerLoop:<br />push ecx<br /><br />; do stuff here<br />;filling customvertex<br /><br />;now advance loop...<br />;????<br /><br />The problem is that the code skips around alot<br />0<br />51<br />102<br />153<br />204<br />....<br />then in adds to ix so now it is <br />1<br />52<br />103<br />154<br />205<br /><br />how do you account for it...<br />Should I reset the pointer back to the original after the complete of each pass?<br /><br />Someone please help me out....</div>
    <div class="meta">Posted on 2001-11-09 23:55:56 by Sliver</div>
   </div>
   <div class="post" id="post-11545">
    <div class="subject"><a href="#post-11545">DirectX8-Examples</a></div>
    <div class="body">The way I do my loops which works fine for me is like this:<br /><br />push ecx | mov ecx 0<br />L1: | push ecx | mov ecx 0<br />  L2: | push ecx<br />    ...<br />  pop ecx | inc ecx | cmp ecx xxx | jb L2&lt; <br />pop ecx | inc ecx | cmp ecx xxx | jb L1&lt;<br />pop ecx</div>
    <div class="meta">Posted on 2001-11-10 01:25:49 by Kenny</div>
   </div>
   <div class="post" id="post-11546">
    <div class="subject"><a href="#post-11546">DirectX8-Examples</a></div>
    <div class="body">And in MASM:<pre><code>LOOPSIZE EQU 50<br /><br />	mov ecx,LOOPSIZE<br />L1&#58;	push ecx<br /><br />	mov ecx,LOOPSIZE<br />L2&#58; ;&#40;do some stuff here...&#41;<br />	dec ecx<br />	jne L2 ;use jns if you'd like to loop with ecx=0<br /><br />	pop ecx<br />	dec ecx<br />	jne L1 ;use jns if you'd like to loop with ecx=0</code></pre></div>
    <div class="meta">Posted on 2001-11-10 01:40:27 by bitRAKE</div>
   </div>
   <div class="post" id="post-11547">
    <div class="subject"><a href="#post-11547">DirectX8-Examples</a></div>
    <div class="body">You have a problem with the wonderful world of SpAsm? :grin:<br /><br />Hey, good code :) I forgot inc/dec modified the flags... *sigh* it's late...</div>
    <div class="meta">Posted on 2001-11-10 01:48:19 by Kenny</div>
   </div>
   <div class="post" id="post-11550">
    <div class="subject"><a href="#post-11550">DirectX8-Examples</a></div>
    <div class="body">No problem, just like to speak to a larger audience. ;)<br /><br />I like SpAsm. :alright:<br /><br />It's <u>all</u> ASM :)</div>
    <div class="meta">Posted on 2001-11-10 02:24:57 by bitRAKE</div>
   </div>
   <div class="post" id="post-11582">
    <div class="subject"><a href="#post-11582">DirectX8-Examples</a></div>
    <div class="body"><pre><code><br />int FLAG_SIZE = 50<br />FlagVertices = new CUSTOMVERTEX &#91; NUM_FLAG_VERTICIES&#93;;<br /><br />for &#40;int ix = 0; ix &lt; FLAG_SIZE+1; ix++&#41;<br />     for &#40;int iy = 0; iy &lt; FLAG_SIZE+1; iy++&#41;<br />     &#123;<br />       FLOAT tu = ix/&#40;FLOAT&#41;FLAG_SIZE<br />       FLOAT tv = iy/&#40;FLOAT&#41;FLAG_SIZE<br /><br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.x = &#40;float&#41; &#40;ix-FLAG_SIZE/2&#41;;<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.y = 3*&#40;cos&#40;iy&#41;/3&#41;+cos&#40;ix/3&#41;<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.z = iy -FLAG_SIZE/2<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.nx = 0.0<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.ny = 1.0<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.nz = 0.0<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.tu = &#40;float&#41;tu*4<br />       FlagVertices&#91;ix+iy*&#40;FLAG_SIZE+1&#41;&#93;.tv = &#40;float&#41;tv*4      <br /><br />      &#125;;<br /></code></pre><br /><br />Ok, maybe I wasn't clear... I *didn't* want to know how to do a for loop<br /><br />The problem with the code is:<br />FlagVertices<br /><br />at ix = 0 and iy = 0 the FlagVertices[] would be equivalent to<br />FlagVertices[0]<br />at ix = 0 and iy = 1 the FlagVertices[] would be<br />FlagVertices[51]<br />at ix = 0 and iy = 2 the FlagVertices[] would be<br />FlagVertices[102]<br /><br />after the first iteration of the loop the iy resets and the loop adds 1 to ix, SO:<br /><br />at ix = 1 and iy = 0 the FlagVertices[] would be equivalent to<br />FlagVertices[1]<br />at ix = 1 and iy = 1 the FlagVertices[] would be<br />FlagVertices[52]<br />at ix = 1 and iy = 2 the FlagVertices[] would be<br />FlagVertices[103]<br /><br />Do you see the patern?<br /><br />Your loop fills up the code like this:<br /><br />going across -&gt; then shifts down<br /><br />[0][0]<br />[0][0][0][0][0]<br />[0][0][0][0][0]<br /><br />the c++ loop I described fills it up by going down and then shifting across<br />[0][0][0]<br />[0][0][0]<br />[0][0][0][0]<br />[0][0][0][0]<br /><br />You can hopefully see why this loop is difficult to write:<br /><br />So in conclusion I need to know how to advance the *pointer* to FlagVertices as in<br /><br /><pre><code><br />mov eax, iy<br />mov edx, FLAG_SIZE +1<br />imul eax, edx<br />mov edx, size CUSTOMVERTEX<br />imul eax, edx<br />add esi, eax<br /></code></pre><br /><br />or something like that... I'd appreciate any detailed responses on this issue (since I'm trying the best I can to convey the problem)<br /><br />-=Sliver=-</div>
    <div class="meta">Posted on 2001-11-10 16:09:55 by Sliver</div>
   </div>
   <div class="post" id="post-11593">
    <div class="subject"><a href="#post-11593">DirectX8-Examples</a></div>
    <div class="body">Oh, that's all :)<pre><code>LOOPSIZE EQU 50<br />; for inner loop<br />iy EQU &lt;ecx&gt;<br />ix EQU &lt;&#91;esp&#93;&gt;<br /><br />	mov ecx,LOOPSIZE<br />L1&#58;	push ecx<br /><br />	mov ecx,LOOPSIZE<br />L2&#58;	mov eax,LOOPSIZE + 1<br />	mul iy ; trashes edx, of course<br />	add eax,ix<br />; now we have the index in eax ;&#41;<br />; have to multiple it by the array item size<br />	mov edx,sizeof CUSTOMVERTEX<br />	mul edx<br />	mov ebx,eax<br /><br />	ASSUME esi&#58;PTR CUSTOMVERTEX<br /><br />	mov &#91;esi + ebx&#93;.x,eax<br /><br />	mov &#91;esi + ebx&#93;.y,eax<br /><br />	mov &#91;esi + ebx&#93;.z,eax<br /><br />	mov &#91;esi + ebx&#93;.nx,0.0<br /><br />	mov &#91;esi + ebx&#93;.ny,1.0<br /><br />	mov &#91;esi + ebx&#93;.nz,0.0<br /><br />	mov &#91;esi + ebx&#93;.tu,eax<br /><br />	mov &#91;esi + ebx&#93;.tv,eax<br /><br />	ASSUME esi&#58;nothing<br /><br />	dec ecx<br />	jns L2<br /><br />	pop ecx<br />	dec ecx<br />	jns L1</code></pre>Maybe I'm wrong, but I don't see anything in that algorithm that requires you to transverse the array in a specific way.  My loop code didn't assign any relivance to the values - it's a square array - just swap the values!  What is the problem?</div>
    <div class="meta">Posted on 2001-11-10 18:49:52 by bitRAKE</div>
   </div>
   <div class="post" id="post-11646">
    <div class="subject"><a href="#post-11646">DirectX8-Examples</a></div>
    <div class="body">I should say right off that I appreciate your help and time in this matter :) But I have 2 questions about it...<br /><br /><pre><code>LOOPSIZE EQU 50<br />; for inner loop<br />iy EQU &lt;ecx&gt;<br />ix EQU &lt;&#91;esp&#93;&gt;<br /></code></pre><br /><br />I've never seen this done before... Why do you do he 2 equ's with ix and iy if you don't seem to use them... and what would this be doing anyway... (again I've never seen this done)<br /><br /><pre><code><br />	ASSUME esi&#58;PTR CUSTOMVERTEX<br /><br />	mov &#91;esi + ebx&#93;.x,eax<br /></code></pre><br /><br />Could this have been done by storing the number in just esi like:<br /><br /><pre><code><br />; now we have the index in eax <br />; have to multiple it by the array item size<br />	mov edx,sizeof CUSTOMVERTEX<br />	mul edx<br />	mov esi,eax<br /><br />	ASSUME esi&#58;PTR CUSTOMVERTEX<br /><br />	mov &#91;esi&#93;.x,eax<br /></code></pre><br /><br />Or is their something special about this?<br /><br />Thanks again bitRAKE and KEnny :)<br /><br />-=Sliver=-<br /><br />----EDIT----<br />Another problem arose... :(<br />I really thought you could do this:<br /><br /><pre><code><br />push esi<br />ASSUME esi&#58;PTR WORD<br />mov eax, OFFSET FlagIndices<br />mov esi, eax<br /><br />mov ecx, 0<br />@OuterLoop1&#58;<br />	push ecx<br /><br />	mov ecx, 0<br />	@InnerLoop1&#58;<br />		push ecx<br /><br />		;FlagIndices&#91;i++&#93; = &#40;ix+0&#41; + &#40;iy+1&#41; * &#40;FLAG_SIZE+1&#41;<br />		fld ix<br />		fld iy<br />		fld1<br />		fadd<br />		fld FLAG_SIZEplusONE<br />		fmul<br />		fadd<br />		fstp &#91;esi&#93;.WORD ; error here<br />		add esi, size WORD<br /><br /></code></pre><br /><br />Now I know WORD isn't a struct, but I just thought it would work... don't know why... can someone please give me a good way to change this code so I can skip through and store the code in the offset FlagIndices?<br /><br />Thanks</div>
    <div class="meta">Posted on 2001-11-11 15:53:46 by Sliver</div>
   </div>
   <div class="post" id="post-11672">
    <div class="subject"><a href="#post-11672">DirectX8-Examples</a></div>
    <div class="body"><strong>Silver</strong>, I do use those EQU - look again, please.  They are only used for easy reading of the conversion, or to easily confuse the naive. ;)  I put the array index into EBX to make things easier later on, and to keep ESI constant thoughout the algorithm - this hopefully reduces coding errors.  Ignore the moves in the center of the code I posted - you will be getting the values off the FPU stack (ie. fld .x is more likely what you'll be coding).<br /><br />Does the FPU allow you to load/store WORDs?  I don't think there is a REAL2? ;)  I don't understand what your trying to do?  Definitely, don't name a structure element 'WORD'.<pre><code>MySTRUC STRUCT<br />    WORD dd ? ; this is bad<br />MySTRUC STRUCT</code></pre><strong>ASSUME esi:PTR WORD</strong> is usage similar as <strong>mov ax, WORD PTR </strong>, I don't think this is what you mean.  ASSUME produces no code, but assigns a type to a register.  Please, attach some code and we will solve your problem.</div>
    <div class="meta">Posted on 2001-11-11 20:40:03 by bitRAKE</div>
   </div>
   <div class="post" id="post-11674">
    <div class="subject"><a href="#post-11674">DirectX8-Examples</a></div>
    <div class="body"><div class="quote"><em>Originally posted by bitRAKE </em><br />Please, attach some code and we will solve your problem. </div><br /><br />Please excuse my naive nature... I'm C++ oriented and asm still <br />tends to be somewhat hard for me to wrap my mind around...<br /><br />Ask and ye shall recieve... here is most of the C++ code that I'm<br />trying to port... (it's not very long in C++ as you can see)<br /><br />----EDIT----<br /><br />See below for all the code plus and example of what it's supposed to do</div>
    <div class="meta">Posted on 2001-11-11 21:15:40 by Sliver</div>
   </div>
   <div class="post" id="post-11683">
    <div class="subject"><a href="#post-11683">Example that doesn't work</a></div>
    <div class="body">I've decided to post all the codes + the C++ coding example I'm converting (with application to see what it will eventually do)... It won't compile due to my errors in code and an include problem with &quot;SetIndices&quot;<br /><br />I also found that I screwed up and am not updating the &quot;ix&quot; and &quot;iy&quot; variables in my code (which BitRAKE did successfully)... If anyone wants to mess around with the code too :) be my guest the only requirement is that the finish product must be posted as a learning example....<br /><br />Ok back to work...<br /><br />Sliver</div>
    <div class="meta">Posted on 2001-11-11 22:10:27 by Sliver</div>
   </div>
   <div class="post" id="post-11684">
    <div class="subject"><a href="#post-11684">DirectX8-Examples</a></div>
    <div class="body">Yeap, you wanted WORD. ;)<br /><br />You don't need to use the FPU for the FlagIndices loops - they are all integers.  In fact an optimized solution would do both loops in parallel, but forget than until the codes working.<pre><code>;	for&#40;WORD i=0, ix=0; ix&lt;FLAG_SIZE; ix++ &#41;<br />;	for&#40;WORD iy=0; iy&lt;FLAG_SIZE; iy++ &#41;<br />;	&#123;<br />;		FlagIndices&#91;i++&#93; = &#40;ix+0&#41; + &#40;iy+1&#41;*&#40;FLAG_SIZE+1&#41;;<br />;		FlagIndices&#91;i++&#93; = &#40;ix+0&#41; + &#40;iy+0&#41;*&#40;FLAG_SIZE+1&#41;;<br />;		FlagIndices&#91;i++&#93; = &#40;ix+1&#41; + &#40;iy+0&#41;*&#40;FLAG_SIZE+1&#41;;<br />;		FlagIndices&#91;i++&#93; = &#40;ix+0&#41; + &#40;iy+1&#41;*&#40;FLAG_SIZE+1&#41;;<br />;		FlagIndices&#91;i++&#93; = &#40;ix+1&#41; + &#40;iy+0&#41;*&#40;FLAG_SIZE+1&#41;;<br />;		FlagIndices&#91;i++&#93; = &#40;ix+1&#41; + &#40;iy+1&#41;*&#40;FLAG_SIZE+1&#41;;<br />;	&#125;;<br /><br />FLAG_SIZE EQU 50<br /><br />; for inner loop<br />iy EQU &lt;ecx&gt;<br />ix EQU &lt;&#91;esp&#93;&gt;<br /><br />	lea edi,FlagIndices<br />	mov ecx,FLAG_SIZE<br />L1&#58;	push ecx<br /><br />	mov ecx,FLAG_SIZE<br />L2&#58;	mov eax,FLAG_SIZE<br />	mul iy ; this value is used through loop<br />	; line 1<br />	add eax,iy<br />	stosw<br />	; line 2<br />	sub eax,iy<br />	stosw<br />	; line 3<br />	add eax,ix<br />	stosw<br />	; line 4<br />	sub eax,ix<br />	add eax,iy<br />	stosw<br />	; line 5<br />	add eax,ix<br />	sub eax,iy<br />	stosw<br />	; line 6<br />	add eax,iy<br />	stosw<br /><br />	dec ecx<br />	jns L2<br /><br />	pop ecx<br />	dec ecx<br />	jns L1</code></pre>This solution is by no mean optimal, but I think it works. ;)  I think an optimized version would be a little bigger textwise than the C/C++ version.  I want to see what VS.NET came up with for this? brb...even this is far better than what VS.NET came up with - I'm very disappointed. I think VC++ gets confused with the WORDs, too. :)<br /><br /><strong>Edit:</strong> Opps, but it's fixed now - I think. ;)</div>
    <div class="meta">Posted on 2001-11-11 22:41:09 by bitRAKE</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=1198&amp;page=1" style="">&laquo;</a><a href="../?id=1198&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="1198" /><input type="number" name="page" min="1" max="4" step="1" value="2" onchange="this.form.submit();" /><a href="../?id=1198&amp;page=3">&gt;</a><a href="../?id=1198&amp;page=4">&raquo;</a></form>  </div>
 </body>
</html>