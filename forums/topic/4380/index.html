<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Masm32 problems - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4380" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4380">Masm32 problems</a></p>
   <div class="post" id="post-30370">
    <div class="subject"><a href="#post-30370">Masm32 problems</a></div>
    <div class="body">Hi,<br /><br />I'm trying to compile a simple programmes but Masm gives the following errors - <br /><br />'unrecognized option &quot;z2&quot;; ignored'<br />'unrecognized option &quot;r&quot;; ignored' <br /><br />( I didn't enter any options into the comand line. )<br /><br />'cannot open input file Shell.exe' <br /><br />OR <br /><br />'failure during conversion to coff file invalid or corrupt'<br /><br />Here's an example prog...<br /><br />------------------<br /><br />TheStack SEGMENT STACK<br />	DB 64 DUP ('STACK')<br />TheStack ENDS<br /><br /><br />TheData SEGMENT<br />TheData ENDS<br /><br />TheProg SEGMENT<br />	assume CS:TheProg, DS:TheData<br /><br />Main PROC<br /><br />Start:<br /><br />mov ah, 4ch<br />mov al, 0<br />int 21h<br /><br />Main ENDP<br /><br />TheProg ENDS<br /><br />------------<br /><br />Pretty simple huh?<br /><br />Any ideas would be appreciated.<br /><br />S.</div>
    <div class="meta">Posted on 2002-03-22 15:47:25 by Station</div>
   </div>
   <div class="post" id="post-30373">
    <div class="subject"><a href="#post-30373">Masm32 problems</a></div>
    <div class="body">Station,<br /><br />Apart from you are trying to build DOS code, it would be useful to tell us what command lines you are using with both ML.EXE and LINK.EXE.<br /><br />Note that the version of LINK with MASM32 will not build DOS code, you need the older OMF linker to do that. It is available on Iczelion's site or the Microsoft site if you can find it.<br /><br />For 32 bit assembly, you use the command line,<br /><br />drv:\path\ml /c /coff yourfile.asm<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-22 16:40:23 by hutch--</div>
   </div>
   <div class="post" id="post-30375">
    <div class="subject"><a href="#post-30375">Masm32 problems</a></div>
    <div class="body">Thanks for your reply.<br /><br />Originally I was using MASM which comes with 98DDK. I then downloaded MASM32 but its a similar story.<br /><br />Also, I've tried compiling Iczelion's MessageBox example and its the same again.<br /><br />Its been a while since I used MASM but I don't remember this kind of nonsense before. <br /><br />At the command line I simply entered - ml shell.asm . This used to work so I presume the system has gotten in a pickle.<br /><br />Why would it be reporting unknown options when I didn't enter any?<br /><br />Thanks again,<br /><br />S.</div>
    <div class="meta">Posted on 2002-03-22 16:59:52 by Station</div>
   </div>
   <div class="post" id="post-30378">
    <div class="subject"><a href="#post-30378">Masm32 problems</a></div>
    <div class="body">Station,<br /><br />Have a look at the basic file structure that is used in MASM32 if its 32 bit assembler that you want to write. There is a code wizard that will generate working templates for you so you can have a look at how they work.<br /><br />See the minimum memory model and processor type at the top of the file, check out the batch files in the BIN dir that build the 32 bit files and you will be close to the pace of how they are built.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-22 17:13:39 by hutch--</div>
   </div>
   <div class="post" id="post-30384">
    <div class="subject"><a href="#post-30384">Masm32 problems</a></div>
    <div class="body">Thanks again for your response.<br /><br />If you're up for it, could you type in the smallest possible program you can and I'll see if it compiles on my system?<br /><br />Thanks,<br /><br />S</div>
    <div class="meta">Posted on 2002-03-22 18:06:13 by Station</div>
   </div>
   <div class="post" id="post-30385">
    <div class="subject"><a href="#post-30385">Masm32 problems</a></div>
    <div class="body">Check your environment variables, you can have &quot;default&quot; options specified using the environment.<br />Try &quot;echo %ml%&quot; or &quot;echo %masm%&quot;.<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-03-22 18:07:40 by Mirno</div>
   </div>
   <div class="post" id="post-30391">
    <div class="subject"><a href="#post-30391">Masm32 problems</a></div>
    <div class="body">Cool. its working now.<br /><br />Masm32 compiles and links Win32 programmes and the old Linker from Iczelion's links DOS progs.<br /><br />However, I'm left feeling baffled as to why the linker that I got with the 98DDK stopped working. I must have gotten mixed up somewhere...</div>
    <div class="meta">Posted on 2002-03-22 19:45:03 by Station</div>
   </div>
  </div>
 </body>
</html>