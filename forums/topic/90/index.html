<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>drag and drop - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=90" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=90">drag and drop</a></p>
   <div class="post" id="post-2767">
    <div class="subject"><a href="#post-2767">drag and drop</a></div>
    <div class="body">I'd like a tutorial on how to drag and drop. Something like<br />the Solitaire game in windows 98. But with one additional<br />condition. Variable Source and variable destination.<br /><br />Thanks,<br />JPS</div>
    <div class="meta">Posted on 2001-08-02 12:12:25 by shankle</div>
   </div>
   <div class="post" id="post-2773">
    <div class="subject"><a href="#post-2773">GDI Tutorial</a></div>
    <div class="body">Hmm, what do you mean by drag and drop? If you mean dragging and dropping files then theres an example of that in the Example3 subfolder of masm32.<br /><br />If however you mean something completely differnt, namely something like whats in Solitaire then be slighty more specific about what you mean when you say <em>&quot;Variable Source and variable destination&quot;</em>.<br /><br />Do you just want to be able to click on an object an move it somewhere else inside the window? If so thats not too hard.</div>
    <div class="meta">Posted on 2001-08-02 12:40:06 by Eóin</div>
   </div>
   <div class="post" id="post-2877">
    <div class="subject"><a href="#post-2877">drag and drop</a></div>
    <div class="body">Thanks for the reply.<br /><br />Yes I want to pick up (for instance the letter A in a small square)<br />from anywhere on the screen and move it to somewhere alse<br />on the screen.<br />The example in MASM32 doesn't  quite do this.</div>
    <div class="meta">Posted on 2001-08-03 08:14:07 by shankle</div>
   </div>
   <div class="post" id="post-2946">
    <div class="subject"><a href="#post-2946">GDI Tutorial</a></div>
    <div class="body">Ok, there no point writing a tutorial on something like that simply because theres a couple of ways of doing it and each one has its own merits depending on the situation.<br /><br />Instead why don't you describe to me what you want to do and I'll show you the solution I think best fits your problem. I can even code it for you, I don't mind.</div>
    <div class="meta">Posted on 2001-08-04 03:05:14 by Eóin</div>
   </div>
   <div class="post" id="post-2965">
    <div class="subject"><a href="#post-2965">drag and drop</a></div>
    <div class="body">thanks for your offer to help.<br /><br />First I've looked in Hutches Windows inc for what I thought<br />were drag and drop API's. Couldn't find any.<br /><br />Let's say The Letter A is in a square of 30 by 30 pixels at<br />position 100 by 100. It's a bitmap. I want to move it to <br />400 by 400. I want to to reinstate at 100 by 100 whatever<br />was there before I placed the bitmap at that position.<br />The position at 100 by 100 is a holding area.<br /><br />Using Hutches MASM32 and windows 98.<br />Assembler is not my problem but windows APIs are.<br /><br />Thanks</div>
    <div class="meta">Posted on 2001-08-04 09:09:18 by shankle</div>
   </div>
   <div class="post" id="post-2982">
    <div class="subject"><a href="#post-2982">GDI Tutorial</a></div>
    <div class="body">Zadkiel,<br /><br />I think shankle means like a deck of cards, one on top of the<br />other. Drag the top one off showing the one beneath. I know<br />how to drag something around a window simply by erasing<br />getting the current mouse position then repainting the object.<br /><br />I?d like to know myself how you?d accomplish shankle?s needs.<br /><br />I assume you would load 52 bitmaps and use an indexing method<br />of some kind to keep track of the bitmaps handle and position in<br />the deck.<br /><br /><br />That might make an interesting tut. :)</div>
    <div class="meta">Posted on 2001-08-04 11:03:30 by bcraven</div>
   </div>
   <div class="post" id="post-2983">
    <div class="subject"><a href="#post-2983">GDI Tutorial</a></div>
    <div class="body">Sure I'll write one for that method, see how it turns out.</div>
    <div class="meta">Posted on 2001-08-04 11:20:32 by Eóin</div>
   </div>
   <div class="post" id="post-3035">
    <div class="subject"><a href="#post-3035">i've something for ya</a></div>
    <div class="body">perhaps i've a program that could be interesting for you. it has something to do with drag &amp; drop, but have a look at it yourself.<br />my homepage: <a target="_blank" href="http://noperator.cjb.net">www.noperator.cjb.net</a> <br />just click on win32asm, and choose &quot;Color mixing&quot;. <br /><br />tell me if you like it.<br /><br />NOP-erator</div>
    <div class="meta">Posted on 2001-08-05 03:11:42 by NOP-erator</div>
   </div>
   <div class="post" id="post-3046">
    <div class="subject"><a href="#post-3046">GDI Tutorial</a></div>
    <div class="body">[-alloces-], I love the site, its so easy to navigate and I ove the full description of each program.<br /><br />I was going to use a backbuffer as well. I'll still finish what I ws doing seen as yours is specially written for 3 and I felt shankle would need a more addaptable drag and drop program.<br /><br />I love your programs though I culd seem to get the electric filed lines one to work. the screen stayed blank.<br /><br />And shankle, hopefully I'll have that ready for tonight.</div>
    <div class="meta">Posted on 2001-08-05 06:56:11 by Eóin</div>
   </div>
   <div class="post" id="post-3048">
    <div class="subject"><a href="#post-3048">thanks</a></div>
    <div class="body">thank you <strong>very</strong> much Zadkiel. sorry that this Electrical field program doesn't work on your system, but what OS are you running on? <br />i know that there are problems with NT, and so will be with win 2000. <br /><br />NOP-erator</div>
    <div class="meta">Posted on 2001-08-05 07:41:53 by NOP-erator</div>
   </div>
   <div class="post" id="post-3097">
    <div class="subject"><a href="#post-3097">GDI Tutorial</a></div>
    <div class="body">What a strange little tutorial this turned out to be. I started it with some ideas on different methods and I was sort of annoyed that I'd have to chose one and implement it without the benifit of hindsight to know which one was the best. <br /><br />Well as it happend the most difficult thing was screen flicker and I ended up merging every idea I had into one program just to eliminate that. <br /><br />I tell you windows isn't designed for graphics. Another thing about this is its lenght which means I'm never happy that I explained the important aspects of it well enough so I'd appreciate feedback.<br /><br />And NOP-erator, looking back at my post I must congradulate you on translating my spelling, how I typed culd istead of couldn't I don't know. <br /><br />But regarding the electric filed program, I'm using win98. everything else seemed to run ok but that didn't, maybe its my computer though. If I get a chance I'll look at the source and see if anything pops out at me.</div>
    <div class="meta">Posted on 2001-08-05 18:36:11 by Eóin</div>
   </div>
   <div class="post" id="post-3105">
    <div class="subject"><a href="#post-3105">dgdptut.zip</a></div>
    <div class="body">Hi Zadkiel,<br /><br />Thank you very much for your time and effort with my <br />Drag and Drop problem. Your program does just what<br />I need to do. Pick up a bitmap restoring what was underneth<br />before and placing it anywhere on the screen.<br /><br />I guess my problem was I thought I had to use a lot of<br />Windows DODRAG etc. to keep it compatible with Windows.<br />Obviously I was wrong.<br /><br />Shankle</div>
    <div class="meta">Posted on 2001-08-05 20:09:54 by shankle</div>
   </div>
   <div class="post" id="post-3118">
    <div class="subject"><a href="#post-3118">good work</a></div>
    <div class="body">hi Zadkiel,<br />you've done very good work! :alright:  I just looked over the source, and it seems that you've solved that better than me! I'm gonna read your tutorial about that later. <br />But one thing disturbs me: when you drag the bitmap, the mouse pointer is always in the center of it. perhaps you can have a look at my program again and change that. when you drag my bitmaps, the mouse pointer stays where it is.<br /><br />NOP-erator</div>
    <div class="meta">Posted on 2001-08-06 03:50:06 by NOP-erator</div>
   </div>
   <div class="post" id="post-3120">
    <div class="subject"><a href="#post-3120">GDI Tutorial</a></div>
    <div class="body">Thats not a bug, thats a feature ;) . By default onbjects would be dragged by the top left corner, since obviously this would look terrible I simply added code to move the object back and up a bit so that it would drag by its center.<br /><br />To maintain the position of the mouse relative to the object as your program does you'd simply need two more variables eg dX and dY. When the object is first clicked set dX to ObjectLeft-MouseX and set X to MouseX+dX. Keep resetting X to MouseX+dX as the object is moved and it should work. Dont forget to repeat this Y also.</div>
    <div class="meta">Posted on 2001-08-06 04:35:39 by Eóin</div>
   </div>
   <div class="post" id="post-3124">
    <div class="subject"><a href="#post-3124">GDI Tutorial</a></div>
    <div class="body">Actually the above suggestion clearly isn't tested, not least because I suggested dx as a variable name.<br /><br />Instead following the <br /><br />mov X,eax<br />mov Y,ecx <br /><br />in the LBUTTONDOWN message put<br /><br />sub eax,edi<br />sub ecx,esi<br />mov Xd,eax<br />mov Yd,ecx<br /> <br /><br />And then in both the MOUSEMOVE and LBUTTONUP messages replace <br /><br />	mov ebx,plObj<br />mov eax,(DgDpObj ptr ).r.right<br />shr eax,1<br />movsx edi,lpLow<br />sub edi,eax<br />mov eax,(DgDpObj ptr ).r.bottom<br />shr eax,1<br />movsx esi,lpHigh<br />sub esi,eax <br /><br />With this <br /><br />movsx edi,lpLow<br />movsx esi,lpHigh<br />add edi,Xd<br />add esi,Yd<br /><br />mov ebx,plObj <br /><br />I hope thats correct.</div>
    <div class="meta">Posted on 2001-08-06 05:02:03 by Eóin</div>
   </div>
   <div class="post" id="post-3132">
    <div class="subject"><a href="#post-3132">GDI Tutorial</a></div>
    <div class="body">Zadkiel,<br /><br />Wow, great job you've done on the drag and drop tutorial.<br />Its easy to follow and understand, very creatively coded.<br />You have a knack for making it all look simple. This old DOS<br />programmer envies your knowledge of graphics programming<br />in Windows. Its certainly a totally different environment to<br />program in then what I grew up with. This old programmers<br />learning the ins and outs of Windows coding though thanks<br />to young guys such as yourself. Keep up the good work!:alright:<br /><br />I'll be keeping my eye out for more tuts!:grin:</div>
    <div class="meta">Posted on 2001-08-06 08:24:58 by bcraven</div>
   </div>
  </div>
 </body>
</html>