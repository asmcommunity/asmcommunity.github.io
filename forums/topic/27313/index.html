<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MMX opcodes - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27313" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27313">MMX opcodes</a></p>
   <div class="post" id="post-195609">
    <div class="subject"><a href="#post-195609">MMX opcodes</a></div>
    <div class="body">How can I use the MMX opcodes in MASM32?

Whenever I try to use one, masm tells me I can't use these with the selected processor. I'm using the .386 directive, but I've also tried .586 and even .686, but nothing worked. What is the correct directive for MMX processors? I couldn't find this in the doc.

Please help me, I need this stuff to work!
Many thanks in advance,
Clemens Hofreither

This message was edited by Hiroshimator, on 3/20/2001 2:31:59 PM</div>
    <div class="meta">Posted on 2001-03-20 13:04:00 by Clemens Hofreither</div>
   </div>
   <div class="post" id="post-195610">
    <div class="subject"><a href="#post-195610">MMX opcodes</a></div>
    <div class="body">Are you placing  '.mmx' at the beginning of your code? 

That should do it.</div>
    <div class="meta">Posted on 2001-03-20 13:57:00 by ChrisH</div>
   </div>
   <div class="post" id="post-195611">
    <div class="subject"><a href="#post-195611">MMX opcodes</a></div>
    <div class="body">Ya im kinda currious about MMX as well, i know of some commands and how to use them, but i never came across how to check and see if a CPU is MMX compatable.  Is this a simple proceedure??

NaN</div>
    <div class="meta">Posted on 2001-03-20 15:14:00 by NaN</div>
   </div>
   <div class="post" id="post-195612">
    <div class="subject"><a href="#post-195612">MMX opcodes</a></div>
    <div class="body">one of the original (the second) visual assembler project had a default project which did exactly that with NASM... check to see if the processor was MMX compatible.  I don't have it here at work but I have it at home... I can send you the source to do that if you need later tonight... I'll post it here unless someone else does first.

_Shawn</div>
    <div class="meta">Posted on 2001-03-20 15:32:00 by _Shawn</div>
   </div>
   <div class="post" id="post-195613">
    <div class="subject"><a href="#post-195613">MMX opcodes</a></div>
    <div class="body">The technical data for the original question is contained in the
readme.txt file for the MASM 6.14 patch. As ChrisH pointed out,
adding .MMX tells the assembler to use MMX instructions.
<pre><code>
MMX instructions,
    .586
    .MMX

3DNow instructions
    .586
    .K3D

SIMD instructions
    .686
    .XMM
</code></pre>

Regards,

hutch@pbq.com.au</div>
    <div class="meta">Posted on 2001-03-20 15:45:00 by hutch--</div>
   </div>
   <div class="post" id="post-195614">
    <div class="subject"><a href="#post-195614">MMX opcodes</a></div>
    <div class="body">Shawn, 

  Yes, i would be interested, if you could post that it would be great.  Or e-mail me is you wish...

NaN

This message was edited by NaN, on 3/20/2001 10:38:40 PM</div>
    <div class="meta">Posted on 2001-03-20 21:38:00 by NaN</div>
   </div>
   <div class="post" id="post-195615">
    <div class="subject"><a href="#post-195615">MMX opcodes</a></div>
    <div class="body">Okay, I have the source for checking if your CPU supports MMX or not.  I forgot who the credits go to, but they are listed in the file with his email.  It requires a large MMX include which has many macros for dealing with it... also, I checked Intels site today about identifying the CPU and what it supports and this source actual puts it to very good use, tho Intel didn't have sample source...

MMX.ZIP

Questions?  Ask


Thanks,
_Shawn

This message was edited by Shawn Bullock, on 3/20/2001 11:12:58 PM</div>
    <div class="meta">Posted on 2001-03-20 22:10:00 by _Shawn</div>
   </div>
   <div class="post" id="post-195616">
    <div class="subject"><a href="#post-195616">MMX opcodes</a></div>
    <div class="body">heres how to detect if a cpu surports mmx:

<pre><code>
mov eax,1 ;Set eax to the index of the information we want to look up
cpuid     ;Execute the cpuid instruction
.IF (edx & 23) ;EDX contains heaps of info. Bit 23 is MMX bit.
    ;MMX is surported
.ELSE
    ;MMX not surported
.ENDIF
</code></pre>
If you want to know how this all works, because this method can tell you much more info about the current PC, lookup the CPUID instruction in Intels Opcode document (My version is 24319101.pdf).


This message was edited by George, on 3/21/2001 12:57:41 AM</div>
    <div class="meta">Posted on 2001-03-20 23:56:00 by George</div>
   </div>
   <div class="post" id="post-195617">
    <div class="subject"><a href="#post-195617">MMX opcodes</a></div>
    <div class="body">Thank you very much, this is quite handy information to have.. :)

NaN</div>
    <div class="meta">Posted on 2001-03-21 00:07:00 by NaN</div>
   </div>
   <div class="post" id="post-195618">
    <div class="subject"><a href="#post-195618">MMX opcodes</a></div>
    <div class="body">Thanks, I also got it to work now!
I've already written a very nice little benchmarking program to compare normal bytewise operations to MMX ops using RDTSC...</div>
    <div class="meta">Posted on 2001-03-21 14:14:00 by Clemens Hofreither</div>
   </div>
  </div>
 </body>
</html>