<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>COCOMAC Package - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29884" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29884">COCOMAC Package</a></p>
   <div class="post" id="post-211110">
    <div class="subject"><a href="#post-211110">COCOMAC Package</a></div>
    <div class="body">Hi!, <br /><br />I&#039;m looking for the cocomac package by Four-F. I would like to know where can i download it.<br /><br />Thanks in advanced, <br />NCR</div>
    <div class="meta">Posted on 2010-03-24 12:45:40 by NCR</div>
   </div>
   <div class="post" id="post-211113">
    <div class="subject"><a href="#post-211113">Re: COCOMAC Package</a></div>
    <div class="body">I searched the web<br /><br /><pre><code><br />;;::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />;;<br />;;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Common Control Macro Library<br />;;<br />;;::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br />;;<br />;;&nbsp; &nbsp; &nbsp; cocomac.mac for 32 bit MASM v1.3 (April 2003)<br />;;<br />;;&nbsp; &nbsp; &nbsp; This file contains the essential macros for Common Control Macro Library<br />;;<br />;;&nbsp; &nbsp; &nbsp; This include file is written and maintained by Four-F (four-f@mail.ru)<br />;;<br />;;::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br /><br />$IsMem MACRO Operand:REQ<br />	IF (OPATTR (Operand)) AND 00000010y<br />		;; Is a memory variable or has a relocatable data label<br />		EXITM &lt;-1&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;; True<br />	ELSE<br />		EXITM &lt;0&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;; False<br />	ENDIF<br />ENDM<br /><br />$IsImm MACRO Operand:REQ<br />	IF (OPATTR (Operand)) AND 00000100y<br />		;; Is an immediate value<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;-1&gt;<br />&nbsp; &nbsp; ELSE<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;0&gt;<br />&nbsp; &nbsp; ENDIF<br />ENDM<br /><br />$IsReg MACRO Operand:REQ<br />	IF (OPATTR (Operand)) AND 00010000y<br />		;; Is a register value<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;-1&gt;<br />&nbsp; &nbsp; ELSE<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;0&gt;<br />&nbsp; &nbsp; ENDIF<br />ENDM<br /><br />$IsStack MACRO Operand:REQ<br />	IF (OPATTR (Operand)) AND 01000000y<br />		;; relative to SS<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;-1&gt;<br />&nbsp; &nbsp; ELSE<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;0&gt;<br />&nbsp; &nbsp; ENDIF<br />ENDM<br /><br />$IsAddr MACRO Operand:REQ<br />local a<br />	a = 0<br /><br />	IF @SizeStr(&lt;Operand&gt;) GT 5		<br />		IFIDNI &lt;addr &gt;, @SubStr(&lt;Operand&gt;, 1 , 5)<br />			a = 1<br />		ENDIF<br />	ENDIF<br /><br />	IF a<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;-1&gt;<br />&nbsp; &nbsp; ELSE<br />&nbsp; &nbsp; &nbsp; &nbsp; EXITM &lt;0&gt;<br />&nbsp; &nbsp; ENDIF<br />ENDM<br /><br />;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br /><br />$MAKEDWORD MACRO a:REQ, b:REQ<br /><br />;; v 1.0<br />;; Four-F 2001<br />;; four-f@mail.ru<br /><br />;; a | (b &lt;&lt; 16)<br />local wreg, line<br /><br />	IF $IsImm(a) AND $IsImm(b)<br />		EXITM &lt;(a AND 0FFFFh) OR (b SHL 16)&gt;<br />	ELSE<br />		IF $IsImm(a)<br />			IF (TYPE b) EQ 4				; ? DWORD<br />				IFDIFI &lt;b&gt;, &lt;eax&gt;<br />					mov eax, b<br />				ENDIF<br />				shl eax, 16<br />				IF a<br />					or eax, (a AND 0FFFFh)<br />				ENDIF<br />			ELSEIF (TYPE b) EQ 2			; ? WORD<br />				IFDIFI &lt;b&gt;, &lt;ax&gt;<br />					mov ax, b<br />				ENDIF<br />				shl eax, 16<br />				IF a<br />					or eax, (a AND 0FFFFh)<br />				ENDIF<br />			ELSE<br />				line TEXTEQU %@Line<br />				% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;b not supported. Should be WORD or DWORD.;;&#039;<br />				.ERR<br />			ENDIF<br />		ELSEIF $IsReg(a)<br />			IF $IsImm(b)<br />				IF (TYPE a) EQ 4				; ? DWORD<br />					IFDIFI &lt;a&gt;, &lt;eax&gt;<br />						mov eax, a<br />					ENDIF<br />					and eax, 0FFFFh<br />					IF b<br />						or eax, (b SHL 16)<br />					ENDIF<br />				ELSEIF (TYPE a) EQ 2			; ? WORD<br />					IFDIFI &lt;a&gt;, &lt;ax&gt;<br />						mov ax, a<br />					ENDIF<br />					and eax, 0FFFFh<br />					IF b<br />						or eax, (b SHL 16)<br />					ENDIF<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;a not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR<br />				ENDIF<br />			ELSEIF $IsReg(b)<br />				IFIDNI &lt;a&gt;, &lt;eax&gt;<br />					line TEXTEQU %@Line<br />					.ERR<br />					% ECHO @FileCur(line) : ERROR! Register value overwritten by $MAKEDWORD macro.<br />				ENDIF<br />				IF (TYPE b) EQ 4				; ? DWORD<br />					IFDIFI &lt;b&gt;, &lt;eax&gt;<br />						mov eax, b<br />					ENDIF<br />				ELSEIF (TYPE b) EQ 2			; ? WORD<br />					IFDIFI &lt;b&gt;, &lt;ax&gt;<br />						mov ax, b<br />					ENDIF<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;b not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR<br />				ENDIF<br />				shl eax, 16<br />				IF (TYPE a) EQ 4				; ? DWORD<br />					wreg SUBSTR &lt;a&gt;, 2<br />					or ax, wreg<br />				ELSEIF (TYPE a) EQ 2				; ? WORD<br />					or ax, a<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;a not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR				<br />				ENDIF<br />			ELSE<br />				IF (TYPE a) EQ 4				; ? DWORD<br />					IFDIFI &lt;a&gt;, &lt;eax&gt;<br />						IF (TYPE b) EQ 4				; ? DWORD<br />							mov eax, b<br />						ELSEIF (TYPE b) EQ 2				; ? WORD<br />							mov ax, b<br />						ELSE<br />							line TEXTEQU %@Line<br />							% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;b not supported. Should be WORD or DWORD.;;&#039;<br />							.ERR						<br />						ENDIF<br />						shl eax, 16<br />						wreg SUBSTR &lt;a&gt;, 2<br />						or ax, wreg<br />					ELSE<br />						mov eax, a<br />						shl eax, 16<br />						or ax, word ptr b<br />						ror eax, 16<br />					ENDIF<br />				ELSEIF (TYPE a) EQ 2			; ? WORD<br />					IFDIFI &lt;a&gt;, &lt;ax&gt;<br />						IF (TYPE b) EQ 4				; ? DWORD<br />							mov eax, b<br />						ELSEIF (TYPE b) EQ 2				; ? WORD<br />							mov ax, b<br />						ELSE<br />							line TEXTEQU %@Line<br />							% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;b not supported. Should be WORD or DWORD.;;&#039;<br />							.ERR						<br />						ENDIF<br />						shl eax, 16<br />						;wreg SUBSTR &lt;a&gt;, 2<br />						;or ax, wreg<br />						or ax, a<br />					ELSE<br />						mov ax, a<br />						shl eax, 16<br />						or ax, word ptr b<br />						ror eax, 16<br />					ENDIF				<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;a not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR<br />				ENDIF<br /><br />			ENDIF<br />		ELSE<br />			IF $IsImm(b)<br />				IF (TYPE a) EQ 4			; ? DWORD<br />					mov eax, a<br />				ELSEIF (TYPE a) EQ 2		; ? WORD<br />					mov ax, a<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;a not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR				<br />				ENDIF<br />				and eax, 0FFFFh<br />				IF b<br />					or eax, (b SHL 16)<br />				ENDIF<br />			ELSEIF $IsReg(b)<br />				IF (TYPE b) EQ 4			; ? DWORD<br />					IFDIFI &lt;b&gt;, &lt;eax&gt;<br />						mov eax, b<br />					ENDIF<br />				ELSEIF (TYPE b) EQ 2		; ? WORD<br />					IFDIFI &lt;b&gt;, &lt;ax&gt;<br />						mov ax, b<br />					ENDIF<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;b not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR				<br />				ENDIF<br />				shl eax, 16<br />				or ax, word ptr a<br />			ELSE<br />				IF (TYPE b) EQ 4			; ? DWORD<br />					mov eax, b<br />				ELSEIF (TYPE b) EQ 2		; ? WORD<br />					mov ax, b<br />				ELSE<br />					line TEXTEQU %@Line<br />					% ECHO @FileCur(line) : $MAKEDWORD macro ERROR! Type of &amp;b not supported. Should be WORD or DWORD.;;&#039;<br />					.ERR				<br />				ENDIF<br />				shl eax, 16<br />				or ax, word ptr a<br />			ENDIF<br />		ENDIF<br />	ENDIF<br />	EXITM &lt;eax&gt;<br />ENDM<br /><br />;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br /><br />$INDEXTOSTATEIMAGEMASK MACRO i:REQ<br />	IF $IsImm(i)<br />		EXITM &lt;(i SHL 12)&gt;<br />	ELSE<br />		IFDIFI &lt;i&gt;, &lt;eax&gt;<br />			mov eax, i<br />		ENDIF<br />		shl eax, 12<br />		EXITM &lt;eax&gt;<br />	ENDIF<br />ENDM<br /><br />;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::<br /></code></pre><br /><br />I believe it&#039;s part of the KMDKit.</div>
    <div class="meta">Posted on 2010-03-24 20:04:06 by JimmyClif</div>
   </div>
   <div class="post" id="post-211114">
    <div class="subject"><a href="#post-211114">Re: COCOMAC Package</a></div>
    <div class="body">thanks jimmyclif!</div>
    <div class="meta">Posted on 2010-03-25 06:31:53 by NCR</div>
   </div>
  </div>
 </body>
</html>