<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>making PE with as litle sections as possible... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3648" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3648">making PE with as litle sections as possible...</a></p>
   <div class="post" id="post-24343">
    <div class="subject"><a href="#post-24343">making PE with as litle sections as possible...</a></div>
    <div class="body">Hi,<br />i'm thinking about %subj%...<br />what if i have no resources in my app, don't want to have section where all imports reside(can't remember name...), i will get all import myself, don't want any data seg, probably wins won't let me not to have data section, i want to have only text section i.e code section, what about that ?is that possible....? still haven't tried this at home :-(, will try some time :-) really :-)</div>
    <div class="meta">Posted on 2002-02-15 04:29:03 by me8</div>
   </div>
   <div class="post" id="post-24347">
    <div class="subject"><a href="#post-24347">making PE with as litle sections as possible...</a></div>
    <div class="body">Your problem is that PE files are a specification and for an operating system to load one, it needs to conform to that standard. The minimum PE file that runs on the range of windows versions has one section that has the MZ and PE header plus section data, and the other is a merged collection of others.<br /><br />Two sections is 1024 bytes and it does not have much in it. The various &quot;PE&quot; files that get smaller with things like miniature MZ headers do not run on all versions.<br /><br />Good Luck.<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-02-15 04:47:14 by hutch--</div>
   </div>
   <div class="post" id="post-24348">
    <div class="subject"><a href="#post-24348">making PE with as litle sections as possible...</a></div>
    <div class="body">sure why not... you can throw everything you need in<br />the code section but you have to mark it writable and<br />readable with the linker options, i'm not sure, i think<br />it was like /SECTION:.text,rw ... but why do you want<br />to exclude the import section? i think you meant the<br />ressource sec... you can get rid of your imports, too<br />(but you need atleast ONE entry for nt compatiblity)<br />this msg-board is FULL of informations... just do a <br />search...</div>
    <div class="meta">Posted on 2002-02-15 04:51:03 by mob</div>
   </div>
   <div class="post" id="post-24353">
    <div class="subject"><a href="#post-24353">making PE with as litle sections as possible...</a></div>
    <div class="body"><pre><code>.586<br />.MMX<br />.K3D<br />.XMM<br />OPTION CASEMAP&#58;NONE,LANGUAGE&#58;STDCALL,DOTNAME<br /><br />; Set Default Segment order and options<br />_TEXT SEGMENT READONLY PAGE PUBLIC USE32 'CODE'<br />_TEXT ENDS<br />CONST SEGMENT READONLY PUBLIC USE32 'CONST'<br />CONST ENDS<br />_DATA SEGMENT PUBLIC USE32 'DATA'<br />_DATA ENDS<br />_BSS SEGMENT PUBLIC USE32 'BSS'<br />_BSS ENDS<br />	ASSUME CS&#58; FLAT, DS&#58;FLAT, SS&#58;FLAT, ES&#58;FLAT</code></pre>Why bother with all the linker settings?  Code it like you want it.</div>
    <div class="meta">Posted on 2002-02-15 05:33:21 by bitRAKE</div>
   </div>
   <div class="post" id="post-24357">
    <div class="subject"><a href="#post-24357">making PE with as litle sections as possible...</a></div>
    <div class="body">Ricky,<br /><br />But what do you end up with if you build something this way ?<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-02-15 05:48:20 by hutch--</div>
   </div>
   <div class="post" id="post-24363">
    <div class="subject"><a href="#post-24363">making PE with as litle sections as possible...</a></div>
    <div class="body"><div class="quote">Ricky, <br /><br />But what do you end up with if you build something this way ? <br /><br />Regards, </div> <br /><br />A ragdoll :)<br /><br />Latigo</div>
    <div class="meta">Posted on 2002-02-15 07:56:53 by latigo</div>
   </div>
   <div class="post" id="post-24493">
    <div class="subject"><a href="#post-24493">making PE with as litle sections as possible...</a></div>
    <div class="body">Don't forget that 1 section apps only run under 9x. If you really dig that though, FAsm can create those without the use of a linker.  Look at the Beer.exe example.</div>
    <div class="meta">Posted on 2002-02-16 04:41:18 by eet_1024</div>
   </div>
   <div class="post" id="post-24510">
    <div class="subject"><a href="#post-24510">making PE with as litle sections as possible...</a></div>
    <div class="body">1section apps run fine under win2k as well. And I can't see any<br />reason why they should fail anywhere, as long as the pe header<br />and section table information is 100% correct.<br /><br />There might or might not be problems with resources... but that's<br />a different story. Resources are tricky stuff ;).</div>
    <div class="meta">Posted on 2002-02-16 06:36:59 by f0dder</div>
   </div>
  </div>
 </body>
</html>