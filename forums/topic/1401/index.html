<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Help Icze Tut 3... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=1401" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=1401">Help Icze Tut 3...</a></p>
   <div class="post" id="post-8991">
    <div class="subject"><a href="#post-8991">Help Icze Tut 3...</a></div>
    <div class="body">Can someone explain this code from Iczelion's Tut3...<br /><br />mov wc.cbSize,SIZEOF WNDCLASSEX <br />mov wc.style, CS_HREDRAW or CS_VREDRAW <br />mov wc.lpfnWndProc, OFFSET WndProc <br />mov wc.cbClsExtra,NULL <br />mov wc.cbWndExtra,NULL <br />push hInstance <br />pop wc.hInstance <br />mov wc.hbrBackground,COLOR_WINDOW+1 <br />mov wc.lpszMenuName,NULL <br />mov wc.lpszClassName,OFFSET ClassName <br />invoke LoadIcon,NULL,IDI_APPLICATION <br />mov wc.hIcon,eax <br />mov wc.hIconSm,eax <br />invoke LoadCursor,NULL,IDC_ARROW <br />mov wc.hCursor,eax <br />invoke RegisterClassEx, addr wc <br /><br />Please bear with me... I haven't programmed anything in years, and I am NOT an ASM GuRu, and DEFINATELY don't understand much of this windows stuff. I'm an old DOS programmer.  :(<br /><br />Ok,Correct me if I'm wrong here... The 'mov' statements use the 'C' calling convention, meaning that the rvalue is placed in the lvalue... Right? And, just the opposite with the 'invoke' statements... Using the PASCAL calling convention, the lvalue is placed into the rvalue... Right?<br /><br />What is 'wc' in the wc.style, wc.lpfnWndProc, etc..? WindowsClass? What is 'cb' in cbSize, cbClsExtra, etc..? What is the 'lpsz' in lpszClassName ? LongPointerSize? What is 'lpfn' in lpfnWndProc? LongPointerFunction? How about 'mov wc.hIcon,eax'&lt;?&gt;'WindowsClass.HandleIcon'??? ... And, is this putting the  or the $address contained in the eax register into the STRUCT/VAR wc.hIcon? Maybe it doesn't matter, but, would help me to understand just what the abbreviations is for.<br /><br />What does ' mov wc.hbrBackground,COLOR_WINDOW+1 ' do? Increment some default window color code? Turn something on/off (BOOL)? What is the 'hbr' for?<br /><br />Icze: Your tuts are very informative, but they don't take into account the lack of familiarity of a new ASM programmer (wanna-be). I can code like a beaver if I am familiar with the syntax, and the ide. :)<br /><br />Any information would be appreciated!<br /><br />Thank you,<br />Scott_G</div>
    <div class="meta">Posted on 2001-10-08 22:04:13 by n0nuf</div>
   </div>
   <div class="post" id="post-8994">
    <div class="subject"><a href="#post-8994">Help Icze Tut 3...</a></div>
    <div class="body">Looks like somebody needs Petzold and the Intel Docs here!<br />:)<br />Hi there n0nuf, i'll try to shed some light...<br /><br />1) The MOV does not use any 'calling convention'. Basically because it's not calling anything. The MOV instruction copies  from the source operand to the destination operand. Example: MOV EAX,5. That will put a 5 inside the EAX register.<br /><br />2) INVOKE is a MASM32 macro to avoid PUSHing individual parameters and then CALLing the API or function you need to call.<br />Instead INVOKE let's you write the call in a more 'high level' (and clear and less error prone and more tidy) fashion.<br /><br />(little) Example:<br /><br />--------------<br />PUSH 0<br />CALL ExitProcess<br /><br />INVOKE ExitProcess,0<br />-------------<br /><br />Windows uses the STDCALL calling convention. This is a snippet from one of Iczelion's tutorials:<br /><br /><div class="quote">STDCALL is the hybrid of C and PASCAL convention. It passes parameter from right to left but the callee is responsible for stack balancing after the call.Win32 platform use STDCALL exclusively. Except in one case: wsprintf(). You must use C calling convention with wsprintf(). </div> <br /><br /><br /><br />3) wc is a structure. A structure is a very tidy way of treating data. Such facility is provided by the compiler or (in this case) assembler . It's yet another 'commodity' that provides us programmers a very nifty to read and or write bytes.<br />In this case we're talking about a WNDCLASSEX stucture. Which is needed by the RegisterClassEx API. How to know this? well, i assume you have the Win32API Reference (win32.hlp), an essential tool in the arsenal of the win32 coder, which describes all (or most of it) of the Win32Api.<br /><br /><br />4) 'What is 'cb' in cbSize'<br />CB stands for 'Count Bytes' . AFAIK (and correct me here F0dder or any other) this is part of the famous 'Hungarian Notation', which was invented by the legendary Hungary Coder Charles Simoy' during his stay in Redmond.<br />(Very) Basically the hungarian notation prefixes all the variable names with an identification nmemonic.. So 'iMyValue' would be an <br />Integer, 'lpMyPtr' would be a Long Pointer and so on. Google around for a second or two to find a complete reference to the mentioned notation.Ah..LPSZ Stands for: Long pointer to a 'String Zero terminated'. or better said a 'zero terminated String'.<br /><br /><br />5) COLOR_WINDOW is a constant value. This one and many others can be found in 'windows.inc' inside the 'include' sub-dir of the MASM32 directory. Suppose that COLOR_WINDOW's value is 5. Then 'mov wc.hbrBackground,COLOR_WINDOW+1 ' would move a 6 to the 'hbrBackground' member of the wc structure. easy :) ah..HBR is a BRush Handle.<br /><br />Don't be scared for the wealth of information. Just stick to Iczelion's tutorials and the usual books on x86 asm. I learned the x86 basics with 'Peter Norton's 8088 asm book'  (thanks magicmac!!!!!) but any (any of the classic ones) PDF out there will make it. <br /><br />I'd also recommend -= buying =- Charles Petzold's 'Programming Windows' for it's the best Windows coding introductory book ever printed. Petzold is a gifted teacher who will show you the ins and outs of the Win32Api and you'll learn it all in no time (if you are a geek like most of us here :) )<br /><br />Well..i know i skipped a couple of your questions..but worry not, cos other members are typing their answers right now :)<br />Happy coding !<br />Just keep asking if you got doubts, but do read the Intel docs and Petzold's material :)<br /><br />Bye !!!!!!<br /><br /><br />Latigo</div>
    <div class="meta">Posted on 2001-10-08 23:02:29 by latigo</div>
   </div>
   <div class="post" id="post-9000">
    <div class="subject"><a href="#post-9000">Great Teacher !!</a></div>
    <div class="body">Hey Larigals, thanks a lot for that big answer !!! :)<br />It gave me some light also ... :)<br />Madafaca, you know the History !! :)<br /><br /><br /> cu on Wednesday (if madafaca Yoshquele gimme a break)...<br /><br /><br /><br />                                           -Your madafaca Friend. :)</div>
    <div class="meta">Posted on 2001-10-08 23:52:38 by magicmac</div>
   </div>
   <div class="post" id="post-9002">
    <div class="subject"><a href="#post-9002">Help Icze Tut 3...</a></div>
    <div class="body">nOnuf,<br /><br />I'm in a similar predicament being an old coder waking to modern Win32asm and I'd like to suggest visiting Iczelion's site:<br /><br /><a target="_blank" href="http://win32asm.rxsp.com/">http://win32asm.rxsp.com/</a><br /><br />There's lots of well-documented source there to learn from, and be sure to get the Win32 API reference Helpfile on the download page which will answer most all your questions as to syntax and what different structure elements there are.<br /><br />And welcome to Win32asm :alright:</div>
    <div class="meta">Posted on 2001-10-09 00:41:42 by gscundiff</div>
   </div>
   <div class="post" id="post-9017">
    <div class="subject"><a href="#post-9017">Help Icze Tut 3...</a></div>
    <div class="body">hehe...i'm a lighter..<br />See you on Wednesday if that boss of yours drops the leash...hehehe<br />Leave my friend alone you cos he's no slave !!!!!<br />Chiao<br /><br /><br />LatexX</div>
    <div class="meta">Posted on 2001-10-09 08:54:50 by latigo</div>
   </div>
  </div>
 </body>
</html>