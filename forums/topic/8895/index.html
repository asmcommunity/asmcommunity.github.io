<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>sorry i know that it must has been ask lots of times but how - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8895" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=8895">sorry i know that it must has been ask lots of times but how</a></p>
   <div class="post" id="post-65377">
    <div class="subject"><a href="#post-65377">sorry i know that it must has been ask lots of times but how</a></div>
    <div class="body">how can i count the processor cycles used to do some code</div>
    <div class="meta">Posted on 2002-11-11 08:42:10 by Thor0Asgard</div>
   </div>
   <div class="post" id="post-65386">
    <div class="subject"><a href="#post-65386">sorry i know that it must has been ask lots of times but how</a></div>
    <div class="body">Do you known Agner fog's Pentium optimization article? It contains accurate code to benchmark pieces of code, but you must run it on real mode, so you must go to DOS.<br /><br /><a target="_blank" href="http://www.agner.org/assem/">http://www.agner.org/assem/</a><br /><a target="_blank" href="http://www.agner.org/assem/testp.zip">http://www.agner.org/assem/testp.zip</a> - This is the code you need, actually it seems to be separated from the article, maybe it's in the article too...</div>
    <div class="meta">Posted on 2002-11-11 09:34:52 by Knightmare</div>
   </div>
   <div class="post" id="post-65396">
    <div class="subject"><a href="#post-65396">sorry i know that it must has been ask lots of times but how</a></div>
    <div class="body">Look for the detail of the RDTSC intruction.<br /><br />A good documentation is the number II volume of Intel Programmer's Guide. They also have good texts talking about it on their site.</div>
    <div class="meta">Posted on 2002-11-11 12:36:23 by amcd</div>
   </div>
   <div class="post" id="post-65406">
    <div class="subject"><a href="#post-65406">they said that th RDTSC put the time into EDX:EAX</a></div>
    <div class="body">the time format is MSR what is MSR time format ?<br />do i have to put the rdtsc instruction<br />store the time in vars<br />do my code<br />rdtsc<br />and sub the time with the backed time into my vars<br />and then has the time between the 2 rdtsc ?</div>
    <div class="meta">Posted on 2002-11-11 14:36:12 by Thor0Asgard</div>
   </div>
   <div class="post" id="post-65465">
    <div class="subject"><a href="#post-65465">sorry i know that it must has been ask lots of times but how</a></div>
    <div class="body">Thor,<br /><br />You should use the board search option: some people posted useful macros to deal with RDTSC, it can be a good example.<br /><br />If you only need to benchmark, you can also use the GetTickCount() API function... it returns millisecons in eax, so it is a bit less precise, but easier to use, and in a relatively long loop, the variation is ridiculous between two executions of the same code is ridiculous.</div>
    <div class="meta">Posted on 2002-11-12 00:58:52 by JCP</div>
   </div>
   <div class="post" id="post-65493">
    <div class="subject"><a href="#post-65493">sorry i know that it must has been ask lots of times but how</a></div>
    <div class="body">IIRC, GetTickCount API returns the no. of milliseconds since the  system booted.</div>
    <div class="meta">Posted on 2002-11-12 05:58:15 by roticv</div>
   </div>
   <div class="post" id="post-65508">
    <div class="subject"><a href="#post-65508">sorry i know that it must has been ask lots of times but how</a></div>
    <div class="body">Yes, but if you save the value of the first call and substract it of the value of the second call to it, you will have the time in ms spent during the two different calls...</div>
    <div class="meta">Posted on 2002-11-12 08:19:11 by JCP</div>
   </div>
  </div>
 </body>
</html>