<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How can I prevent a window from lossing focus? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28590" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28590">How can I prevent a window from lossing focus?</a></p>
   <div class="post" id="post-202151">
    <div class="subject"><a href="#post-202151">How can I prevent a window from lossing focus?</a></div>
    <div class="body">--------------------------------------------------------------------------------
Hello, here is my problem:
Im making a 3D application using the openGL API.
On some drivers leaving the textures in memory work fine. On others when comming back with ALT-TAB everyting stills work fine, except for the fact than instead of having textures everything is WHITE, thus the textures are not saved in some drivers after an ALT-TAB.
To prevent this problem and to make room for other applications I release all the textures when I get the ALT-TAB occurs and reload them when the focus is gain. This seem to work fine except that it takes some time to decompress and reload the textures. I dont mind this when the user uses ALT-TAB or when it presses CTRL-ALT-DELETE, but, its very anoying when a program as ICQ or yahoo messanger, steals the focus. I wish to give the user the option of not switching in this situations. 
Basically the question is: What are the ways to prevent the window from loosing focus?</div>
    <div class="meta">Posted on 2001-07-01 16:17:00 by dxantos</div>
   </div>
   <div class="post" id="post-202152">
    <div class="subject"><a href="#post-202152">How can I prevent a window from lossing focus?</a></div>
    <div class="body">DirectDraw maybe...i belive you can use DirectDraw to setup a full screen OpenGL window...

But i confess : this kinda problems that OpenGL has with Windows makes me use DirectX...its much better integrated/supported with Windows ;)

and the problem is not from the drivers ;) its a standard mode of operation for video boards... depends on how many RAM the videoboard has and how many textures you have loaded into it...

only system memory based textures are preserved ... the rest are discarded because video board needs them for WIndows GDI screen or DirectX Aplications

You must RELOAD all textures and restore all surfaces (eh restore surfaces only in D3D ;) )
on Alt+Tab. 

One method of making this fast is to load them as bitmaps into system memory and keep the handles (Hbmp) for each of them...

then just GDI blit them back (dont reload them from HDD)</div>
    <div class="meta">Posted on 2001-07-01 17:38:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-202153">
    <div class="subject"><a href="#post-202153">How can I prevent a window from lossing focus?</a></div>
    <div class="body">thank you!</div>
    <div class="meta">Posted on 2001-07-02 11:40:00 by dxantos</div>
   </div>
   <div class="post" id="post-202154">
    <div class="subject"><a href="#post-202154">How can I prevent a window from lossing focus?</a></div>
    <div class="body">A window is notified just before it loses focus, you could try forcing the Window TOPMOST with SetWindowLong and after the other Window has done its thing to SetWindowLong with NOTTOPMOST plus something to restore the focus</div>
    <div class="meta">Posted on 2001-07-02 14:50:00 by Chris</div>
   </div>
  </div>
 </body>
</html>