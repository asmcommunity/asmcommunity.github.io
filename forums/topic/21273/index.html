<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>position of popup menu - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21273" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21273">position of popup menu</a></p>
   <div class="post" id="post-160949">
    <div class="subject"><a href="#post-160949">position of popup menu</a></div>
    <div class="body">Hello everybody,<br /><br />I made a toolbar button that creates a popup menu when clicked.? I use GetCursorPos api to position menu.? Now however I want menu to line up with button so I tried this code:<br /><pre><code>? ? ? ? ? ? invoke SendMessage,hToolBar,TB_GETRECT,309,ADDR rect<br />			mov ecx,rect.bottom<br />			mov eax,rect.right<br /><br />? ? ? ? ? ? invoke TrackPopupMenuEx,hFolderListMenu,TPM_RIGHTALIGN or\<br />? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? TPM_BOTTOMALIGN or TPM_RIGHTBUTTON,\<br />? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? eax,ecx,hWndManager,NULL</code></pre><br /><br />This places the popup menu in lower left screen.? Any suggestions much appreciated.<br /><br />best regards,<br /><br />czDrillard</div>
    <div class="meta">Posted on 2005-06-09 09:15:45 by czDrillard</div>
   </div>
   <div class="post" id="post-160954">
    <div class="subject"><a href="#post-160954">Re: position of popup menu</a></div>
    <div class="body">that function returns caret position, not mouse pointer. you should better get coordinates of pressed toolbar button and calculate, where you want place popup relatively to it.<br /><br />regards!</div>
    <div class="meta">Posted on 2005-06-09 09:41:53 by Shoo</div>
   </div>
   <div class="post" id="post-160979">
    <div class="subject"><a href="#post-160979">Re: position of popup menu</a></div>
    <div class="body">Thanks Shoo for your answer.&nbsp; I&#39;m sending message,&nbsp; <strong>TB_GETRECT</strong> with button id.&nbsp; This should give me toolbar button coordinates as you suggested.&nbsp; However not working, button ends in lower left screen.&nbsp; How else to get toolbar button coordinates?<br /><br />best regards,<br /><br />czDrillard</div>
    <div class="meta">Posted on 2005-06-10 08:37:54 by czDrillard</div>
   </div>
  </div>
 </body>
</html>