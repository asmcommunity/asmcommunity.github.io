<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Fpulib 1.0 updates - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9717" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=9717">Fpulib 1.0 updates</a></p>
   <div class="post" id="post-72145">
    <div class="subject"><a href="#post-72145">Fpulib 1.0 updates</a></div>
    <div class="body">This thread is intended to post &quot;patches&quot; to the Fpulib package as soon as errors are reported and corrected. I also asked the administrator to replace the entire package with the modifications. <br /><br />For those who may already have downloaded it previously, only the modified files will be available here, without the need to download the whole thing every time.<br /><br /><br />One small error has already been reported in one of the library modules. Although the result may rarely have been affected, the error also had the potential of contaminating some registers.<br /><br />The opportunity was also taken to complete the comments in the source code of the module.<br /><br />The attached FpulibX1.zip file contains the updated Fpu.lib and the modified FpuFLtoA.asm files only. Simply overwrite your existing ones with the new ones.<br /><br />Raymond</div>
    <div class="meta">Posted on 2002-12-21 20:43:33 by Raymond</div>
   </div>
   <div class="post" id="post-72147">
    <div class="subject"><a href="#post-72147">Fpulib 1.0 updates</a></div>
    <div class="body">Somehow, the promised .zip file did not seem to get attached to my previous post.<br /><br />It should now be here.</div>
    <div class="meta">Posted on 2002-12-21 20:51:13 by Raymond</div>
   </div>
   <div class="post" id="post-72352">
    <div class="subject"><a href="#post-72352">Fpulib 1.0 updates</a></div>
    <div class="body">I should check mail more often :)</div>
    <div class="meta">Posted on 2002-12-23 14:57:00 by Hiroshimator</div>
   </div>
   <div class="post" id="post-99463">
    <div class="subject"><a href="#post-99463">Fpulib 1.0 updates</a></div>
    <div class="body">An almost unnoticeable flaw was noticed in the FpuFLtoA function: the last digit was not rounded.<br /><br />This has now been corrected and the opportunity was taken to add another option in the function.<br /><br />Since the number of decimals specified was only taking the least significant byte of the DWORD passed as a parameter, the second byte can now be used to specify the position of the decimal point with the regular decimal format, spaces being used to pad the front end of the null-terminated string result. (The high word of the parameter is not used and ignored.)<br /><br />(Note that the decimal point is always the 3rd character with the scientific notation and the new option will not apply to it).<br /><br />(Note also that such formatting can line up decimal points only if you use a monospace font for display or printing.)<br /><br />The new option allows up to 17 digits to be specified before the decimal point. This caters to the sign and the maximum of 16 digits to be returned by the function in the result.<br /><br />Also, if an error is detected by the function, the null-terminated word ERROR will now be written to the specified result buffer. The program can still use its own error messaging when an error is reported by EAX, or send this output directly to the user.<br /><br />The Help file has been updated to reflect these changes.<br /><br />For those of you who already have the Fpu.lib package included in MASM32v8, or have downloaded a previous version from this site, the attached Fpulib11x.zip only contains the source code file of the FpuFLtoA function, the compiled library file (Fpu.lib) and the Help file (Fpulib.hlp). Simply unzip and replace the existing files with the new ones.<br /><br />For those who may not already have the library, the attached Fpulib11.zip contains the source code for all the functions, the .lib file, the .inc file and the extensive .hlp file.<br /><br />Enjoy<br /><br />Raymond</div>
    <div class="meta">Posted on 2003-04-25 22:32:33 by Raymond</div>
   </div>
   <div class="post" id="post-99467">
    <div class="subject"><a href="#post-99467">Fpulib 1.0 updates</a></div>
    <div class="body">Can't seem to attach two files to the same message.<br /><br />Here's the fpulib11.zip<br /><br />Raymond</div>
    <div class="meta">Posted on 2003-04-25 22:38:04 by Raymond</div>
   </div>
   <div class="post" id="post-99495">
    <div class="subject"><a href="#post-99495">Fpulib 1.0 updates</a></div>
    <div class="body">Ray,<br /><br />Thanks for posting this upgrade, I know from the feedback that the FP package has been very popular with many people so keeping it up to date with the rounding improvement will just make it better.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2003-04-26 03:55:57 by hutch--</div>
   </div>
   <div class="post" id="post-111906">
    <div class="subject"><a href="#post-111906">Fpulib 1.0 updates</a></div>
    <div class="body">A minor flaw has been noticed in the FpuFLtoA function: the leading 1 was not displayed when a value slightly less than an integral power of 10 is rounded to that power of 10. This has now been corrected.<br /><br />For those of you who already have the Fpu.lib package included in MASM32v8, or have downloaded a previous version from this site, the attached Fpulib12x.zip only contains the source code file of the FpuFLtoA function and the compiled library file (Fpu.lib). Simply unzip and replace the existing files with the new ones.<br /><br />For those who may not already have the library, the attached Fpulib12.zip in the very next posting (can't attach 2 files in the same posting) contains the source code for all the functions, the .lib file, the .inc file and the extensive .hlp file.<br /><br />BTW the FloatToStr procedure of the masm32.lib in the MASM32 package seems to have a similar flaw.<br /><br />Enjoy<br /><br />Raymond</div>
    <div class="meta">Posted on 2003-07-25 19:11:04 by Raymond</div>
   </div>
   <div class="post" id="post-111907">
    <div class="subject"><a href="#post-111907">Fpulib 1.0 updates</a></div>
    <div class="body">Attached is the full Fpulib package promised in the previous posting.<br /><br />Raymond</div>
    <div class="meta">Posted on 2003-07-25 19:13:48 by Raymond</div>
   </div>
  </div>
 </body>
</html>