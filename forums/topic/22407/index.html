<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Reloc warnings - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22407" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22407">Reloc warnings</a></p>
   <div class="post" id="post-168156">
    <div class="subject"><a href="#post-168156">Reloc warnings</a></div>
    <div class="body">Hi all<br /><br />I&#39;m new to this forum and new to asm programming in general.<br /><br />I am using nasm and alink to compile and link some code.<br /><br />The linker is coming up with the following warnings:<br /><br />Loading file testwindow.obj<br />matched Externs<br />matched ComDefs<br />Generating PE file testwindow.exe<br />Relocs 0:Warning 32 bit offset in 16 bit field<br />Relocs 2:Warning 32 bit offset in 16 bit field<br />Relocs 4:Warning 32 bit offset in 16 bit field<br />Relocs 12:Warning 32 bit offset in 16 bit field<br />Relocs 13:Warning 32 bit offset in 16 bit field<br />Relocs 26:Warning 32 bit offset in 16 bit field<br />Relocs 32:Warning 32 bit offset in 16 bit field<br />Warning, no entry point specified<br /><br />When I run the executable I get an error message, &quot;Exception privileged instruction&quot; which I assume is as a result of these warnings.<br /><br />I understand what the warnings mean, but how do I find what they relate to?&nbsp; (i.e. where in the code)<br /><br />Hoping you can help a n00b.<br /><br />Wongdai<br /></div>
    <div class="meta">Posted on 2005-11-23 00:27:49 by WongDai</div>
   </div>
   <div class="post" id="post-168159">
    <div class="subject"><a href="#post-168159">Re: Reloc warnings</a></div>
    <div class="body">Hi WongDai,<br /><br />Welcome on board.<br /><br />I suggest you the MS linker supplied with Hutch&#39;s masm32 package, it&#39;s designed to use with ml.exe and MS C/C++ compilers. Also, MS link creates smaller executables compared to Alink.<br /><br />Masm32 download sites :<br /><br />http://www.masm32.com/masmdl.htm</div>
    <div class="meta">Posted on 2005-11-23 04:59:03 by Vortex</div>
   </div>
   <div class="post" id="post-168166">
    <div class="subject"><a href="#post-168166">Re: Reloc warnings</a></div>
    <div class="body">WongDai, could you attach your .asm file and post the nasm and alink commandlines you use to produce the exe?<br /><br />Using MS link.exe (or the free polink from PellesC, http://smorgasbordet.com/pellesc ) is a better choice than alink, since it hasn&#39;t been updated for ages and has a couple of bugs and limitations.<br /></div>
    <div class="meta">Posted on 2005-11-23 06:56:58 by f0dder</div>
   </div>
   <div class="post" id="post-168170">
    <div class="subject"><a href="#post-168170">Re: Reloc warnings</a></div>
    <div class="body"><div class="quote"><br />Welcome on board.<br /></div><br /><br />Thanks!<br /><br /><div class="quote"><br />I suggest you the MS linker supplied with Hutch&#39;s masm32 package, it&#39;s designed to use with ml.exe and MS C/C++ compilers. Also, MS link creates smaller executables compared to Alink.<br /><br />Masm32 download sites :<br /><br />http://www.masm32.com/masmdl.htm<br /></div><br /><br />OK, I&#39;ve done that.&nbsp; It will take me some time to figure out which switches to use.<br /><br />I tried just running lnk.bat against the obj file, but got some inscrutable error messages.<br /><br />Will do some research.<br /><br />Wongdai<br /></div>
    <div class="meta">Posted on 2005-11-23 18:50:37 by WongDai</div>
   </div>
   <div class="post" id="post-168172">
    <div class="subject"><a href="#post-168172">Re: Reloc warnings</a></div>
    <div class="body"><div class="quote"><br />WongDai, could you attach your .asm file and post the nasm and alink commandlines you use to produce the exe?<br /></div><br /><br />OK.&nbsp; The .asm file is not mine btw.&nbsp; I got if from somewhere but it didn&#39;t compile properly so I have made some changes to get it past nmakew.exe&nbsp; <br /><br />I don&#39;t think my changes are what is causing the issue however.&nbsp; The command lines I am using are:<br />nasmw -fobj testwindow.asm<br />alink -c -oPE&nbsp; -subsys gui testwindow<br /><br />As I said this is a learning experience for me, so am keen to understand the problem rather than just resolve it.<br /><br />Thanks for your help<br /><br />Wongdai<br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1252" target="_blank">testwindow.asm</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-11-23 18:59:23 by WongDai</div>
   </div>
   <div class="post" id="post-168173">
    <div class="subject"><a href="#post-168173">Re: Reloc warnings</a></div>
    <div class="body">WongDai,<br /><br />try using nasm -f coff or nasm -f win32<br /><br />ancev<br /></div>
    <div class="meta">Posted on 2005-11-23 21:22:05 by ancev</div>
   </div>
   <div class="post" id="post-168175">
    <div class="subject"><a href="#post-168175">Re: Reloc warnings</a></div>
    <div class="body"><div class="quote"><br />WongDai,<br /><br />try using nasm -f coff or nasm -f win32<br /><br />ancev<br /><br /></div><br /><br />Thanks. Well I did that, and initially it nasmw borked badly on the IMPORT statements.&nbsp; So, I removed these and it compiled fine.&nbsp; <br /><br />Linking was a different story however. Both alink and/or link complained about unresolved external references.<br /><br />I wish I could get past this external reference thing and just get on with learning winasm!<br /><br />I researched all day to work out how to get external references working with Link and Nasm, but I have not had any joy.&nbsp; Decorated names, different names in dll, I tried them all but no luck.<br /><br />Any ideas?<br /><br />Wongdai<br /></div>
    <div class="meta">Posted on 2005-11-24 00:38:27 by WongDai</div>
   </div>
   <div class="post" id="post-168218">
    <div class="subject"><a href="#post-168218">Re: Reloc warnings</a></div>
    <div class="body">Hi<br /><br />Should I just give up with nasm and move to masm instead?&nbsp; It seems to be better supported.<br /><br />Is the whole compilinng/linking/external reference thing easier with masm?<br /><br />Wongdai<br /></div>
    <div class="meta">Posted on 2005-11-24 20:46:32 by WongDai</div>
   </div>
   <div class="post" id="post-168221">
    <div class="subject"><a href="#post-168221">Re: Reloc warnings</a></div>
    <div class="body"><div class="quote">Should I just give up with nasm and move to masm instead?&nbsp; It seems to be better supported.</div><br />Yes :) You should move to Masm. It has a huge tecnical support.<br /><br /><div class="quote">Is the whole compilinng/linking/external reference thing easier with masm?</div><br />Absolutely.</div>
    <div class="meta">Posted on 2005-11-25 00:32:14 by Vortex</div>
   </div>
  </div>
 </body>
</html>