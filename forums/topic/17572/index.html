<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>APISPY (beta) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17572" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17572">APISPY (beta)</a></p>
   <div class="post" id="post-135936">
    <div class="subject"><a href="#post-135936">APISPY (beta)</a></div>
    <div class="body">hi,<br /><br />i was playing a bit with masm32, and my code snippets ended forming a api spy program.<br /><br />run dbgview.exe(from <a target="_blank" href="www.sysinternals.com">www.sysinternals.com</a>), then execute apispy.exe &lt;pid&gt; (use the included ps.exe to get the pid), and all api usage should be logged in dbgview.exe window.<br /><br />as the program is very verbose, i recommend using the 'filter' option in dbgview.exe. it should run in w9x and w2k/xp<br /><br />main problem should be the ugly way i use to separate system dlls from non-system dlls in w2k/xp.<br /><br />ancev<br /><br />ps: in next version, i want add api parameter loggin. while i can easily output things like user32!MessageBoxA(0,0044140h,0044040h,9,0) (using a tool to extract the info from masm32?s .inc files), i cant do user32!MessageBoxA(0,&quot;blah&quot;,&quot;blah1&quot;,9,0), as i dont have how know what :DWORDs are ptrs. any suggestion? parsing c .h files instead of masm32 .incs?<br /><br />&lt;attachment deleted - see next posts&gt;</div>
    <div class="meta">Posted on 2004-03-14 20:09:15 by ancev</div>
   </div>
   <div class="post" id="post-135938">
    <div class="subject"><a href="#post-135938">APISPY (beta)</a></div>
    <div class="body">Should have an option for parsing the api function params from either masm or c/c++ headers, making the application useful to more people :)</div>
    <div class="meta">Posted on 2004-03-14 21:47:13 by Homer</div>
   </div>
   <div class="post" id="post-135941">
    <div class="subject"><a href="#post-135941">APISPY (beta)</a></div>
    <div class="body">EvilHomer2k,<br /><br />the problem, as i said, is that masm inc files are too simple (dont differ different DWORD types), and c/c++ are too complex :grin: <br /><br />ancev</div>
    <div class="meta">Posted on 2004-03-14 22:01:01 by ancev</div>
   </div>
   <div class="post" id="post-136028">
    <div class="subject"><a href="#post-136028">APISPY (beta)</a></div>
    <div class="body">re,<br /><br />following evilhomer2k advice, i improved the apispy program. now it output the parameters from the api logged.<br /><br />a new commandline option was added, so nao you can execute apispy.exe &lt;pid&gt; &lt;base&gt;, to hook only APIs from that module. left it blank to hook all.<br /><br />the gendat.asm parse the .inc files from masm32, that must be in same directory, and generate a compressed database, that apispy.exe use.<br /><br />ancev</div>
    <div class="meta">Posted on 2004-03-15 16:29:45 by ancev</div>
   </div>
   <div class="post" id="post-136029">
    <div class="subject"><a href="#post-136029">APISPY (beta)</a></div>
    <div class="body">re,<br /><br />pre-compiled, to the lazy ones... :cool: <br /><br />ancev</div>
    <div class="meta">Posted on 2004-03-15 16:30:43 by ancev</div>
   </div>
   <div class="post" id="post-136048">
    <div class="subject"><a href="#post-136048">APISPY (beta)</a></div>
    <div class="body">vecna,<br /><br />These look good and everything built first time with no problems at all.<br /><br />Compliments :alright: <br />http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=2f46ed9f24413347f14439b64bdc03fd</div>
    <div class="meta">Posted on 2004-03-15 21:29:43 by hutch--</div>
   </div>
  </div>
 </body>
</html>