<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>TASM String - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29801" />
    <link rel="next" href="../?id=29801&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29801">TASM String</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29801&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29801&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29801" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29801&amp;page=2">&gt;</a><a href="../?id=29801&amp;page=2">&raquo;</a></form>   <div class="post" id="post-210493">
    <div class="subject"><a href="#post-210493">TASM String</a></div>
    <div class="body">HI, Im new to assembly programming.<br /><br />i know how to enter character and print it, but i dont know how to input string?<br /><br />can anyone help me? :sad:</div>
    <div class="meta">Posted on 2010-01-29 18:15:03 by exzibi23</div>
   </div>
   <div class="post" id="post-210495">
    <div class="subject"><a href="#post-210495">Re: TASM String</a></div>
    <div class="body">Loop the chars into a buffer, terminate the string and display it.<br /><br />Special Agent Oso: &quot;Three special steps, that&#039;s all you need. Three special steps, and you&#039;ll succeed.&quot; :)</div>
    <div class="meta">Posted on 2010-01-29 18:40:22 by JimmyClif</div>
   </div>
   <div class="post" id="post-210498">
    <div class="subject"><a href="#post-210498">Re: TASM String</a></div>
    <div class="body">can you show me how?<br /><br />pls?</div>
    <div class="meta">Posted on 2010-01-29 19:24:23 by exzibi23</div>
   </div>
   <div class="post" id="post-210500">
    <div class="subject"><a href="#post-210500">Re: TASM String</a></div>
    <div class="body">nope... you&#039;ll need to show a little effort here... <br /><br />show your working code so far _then_ add a buffer to it and drop the char (which you have in al) in the buffer.<br /><br />then we&#039;ll go step by step :)</div>
    <div class="meta">Posted on 2010-01-29 20:45:53 by JimmyClif</div>
   </div>
   <div class="post" id="post-210501">
    <div class="subject"><a href="#post-210501">Re: TASM String</a></div>
    <div class="body">JimmyClif left out an important step. Do not overfow the buffer!!!<br /><br />If you&#039;re entering a character at a time and adding it to a buffer, you&#039;ll need to think about this. Your OS may provide a string input function, which will probably ask for &quot;maximum to input&quot;, which will help with this - just don&#039;t ask for more than you provide room for in the buffer! If you&#039;re entering a single character sucessfully, I have a pretty good idea which OS that is. Surprisingly (I find it surprising), entering a single character in Linux (and Windows?) is harder than entering a string!<br /><br />To be sure, why don&#039;t you show us how you do a single character? Maybe write comments on how you think you&#039;d put it in a buffer, and move on to put the next one in the next position in the buffer (don&#039;t overflow it!). How will you know when the user is done? Where will you check for that? Do you want that character in the string? Don&#039;t forget to terminate the string, as JimmyClif points out! Or... it might be useful to return (this is gonna be a subroutine, right?) the number of characters entered...<br /><br />Writing the comments first can help a lot.<br /><br />Or you could look for an OS-provided routine...<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-01-30 00:06:54 by fbkotler</div>
   </div>
   <div class="post" id="post-210502">
    <div class="subject"><a href="#post-210502">Re: TASM String</a></div>
    <div class="body">.model small<br />.stack<br />.data<br />msg1 db &quot;Input Name: $&quot;,13,10<br />fname db 50 dup(?)<br /><br />.code<br /><br />main proc<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax, @data<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx, offset msg1<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,9<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; loop1:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bl,0dh<br />&nbsp; &nbsp; &nbsp; &nbsp; mov cx,0<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,1<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp al,bl<br />&nbsp; &nbsp; &nbsp; &nbsp; je done<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ,al<br />&nbsp; &nbsp; &nbsp; &nbsp; loop loop1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; done:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax,@data<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx,offset fname<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax,seg fname<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,9<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,4ch<br />&nbsp; &nbsp; &nbsp; &nbsp; mov al,0<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />main endp<br />end main<br /><br />Here is whaat ive done.. and i got error.. <br /></div>
    <div class="meta">Posted on 2010-01-30 02:24:51 by exzibi23</div>
   </div>
   <div class="post" id="post-210505">
    <div class="subject"><a href="#post-210505">Re: TASM String</a></div>
    <div class="body">Let&#039;s examine the loop part:<br /><br /><pre><code><br />loop1:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bl,0dh<br />&nbsp; &nbsp; &nbsp; &nbsp; mov cx,0<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,1<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp al,bl<br />&nbsp; &nbsp; &nbsp; &nbsp; je done<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ,al<br />&nbsp; &nbsp; &nbsp; &nbsp; loop loop1<br /></code></pre><br /><br />Have a seat and read a minute over this page: <a target="_blank" href="http://library.thinkquest.org/22447/asmloops.html">Asmloops</a>. Ignoring the spelling mistakes I believe whoever wrote it had a you in mind. ;)<br /><br />Set up cx with the amount of maximum iterations you&#039;d like it to loop before the loop starts. <br /><br />Also you write the char over and over into the same spot in your buffer. Before you enter the loop put your buffer into ds:di (mov di, offset buffer), write al into  and inc the di after every letter.<br /><br />After you get out of the loop, write one last char into  ... the terminator and display it.<br /><br /><hr /><br /><br /><div class="quote">Or you could look for an OS-provided routine...</div><br /><br />totally :)</div>
    <div class="meta">Posted on 2010-01-30 09:18:33 by JimmyClif</div>
   </div>
   <div class="post" id="post-210509">
    <div class="subject"><a href="#post-210509">Re: TASM String</a></div>
    <div class="body">You might want to mention what error you got, exzibi23. As JimmyClif mentions, you&#039;ve got problems with the &quot;loop&quot; section. Nice reference to &quot;asmloops&quot;! They don&#039;t mention explicitly what happens if cx=0. Loop doesn&#039;t execute at all? Nope! Since the &quot;loop&quot; instruction decrements cx first, and then checks for zero, it&#039;ll execute the whole 64k times. By setting cx to zero - or any value - inside the loop, you&#039;ve guaranteed an &quot;infinite loop&quot;. But since you&#039;ve got an exit from the loop, that should actually work okay, even if it isn&#039;t &quot;right&quot;. Putting every character you get into the first byte in the &quot;fname&quot; buffer is a problem! You want to increment di!<br /><br />At the beginning of your program, you do &quot;mov ax, @data&quot;/&quot;mov ds, ax&quot; to set ds to your data segment. Correct. Later, you reset ds again. This shouldn&#039;t hurt, but since &quot;fname&quot; is in your data segment, you shouldn&#039;t need to.<br /><br />There&#039;s a neat instruction, &quot;stosb&quot;. which will store al in  and increment di all in one go, but there&#039;s a catch. &quot;stosb&quot; puts al in es:, not ds:. If, back at the beginning of your program when you had &quot;@data&quot; in ax, you did &quot;mov es, ax&quot; as well as the &quot;mov ds, ax&quot;, you would be able to use this instruction. No great advantage to it - it&#039;s short (1 byte), and used to be fast in the olden days. Now, it&#039;s faster to do &quot;mov , al&quot;/&quot;inc di&quot;... probably even faster to do &quot;add di, 1&quot;... In 32-bit code, this segmented folderol is gone - I don&#039;t think anyone misses it! :)<br /><br />If your error is simply that it&#039;s not printing anything, the &quot;inc di&quot; should fix it. If you&#039;re hanging forever in the input loop... you must not be checking the exit condition properly. Is &quot;0Dh&quot; correct for dos? In Linux, I&#039;d look for &quot;0Ah&quot; when the victim... I mean &quot;user&quot; hits enter. I forget how dos does it, and I&#039;m too lazy to check. :)<br /><br />Really a pretty good job, for a &quot;first draft&quot;. You&#039;ll have it working soon, I predict.<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-01-30 15:05:35 by fbkotler</div>
   </div>
   <div class="post" id="post-210513">
    <div class="subject"><a href="#post-210513">Re: TASM String</a></div>
    <div class="body"><div class="quote">Nice reference to &quot;asmloops&quot;!</div><br /><br />Oh, if you had my sources ;) The jealousy !!!</div>
    <div class="meta">Posted on 2010-01-30 21:34:00 by JimmyClif</div>
   </div>
   <div class="post" id="post-210514">
    <div class="subject"><a href="#post-210514">Re: TASM String</a></div>
    <div class="body">sorry for my mistakes.. im just a beginner in assembly.. thanks for those who answer.. :)<br /><br />check out my code.. my question is, how can i print it?<br /><br />.model small<br />.stack<br />.data<br />msg1 db &quot;Input Name: $&quot;,13,10<br />fname db 50 dup(?)<br /><br />.code<br /><br />main proc<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax, @data<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx, offset msg1<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,9<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov di,offset fname<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; loop1:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bl,0dh<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,1<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp al,bl<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ,al<br />&nbsp; &nbsp; &nbsp; &nbsp; inc di<br />&nbsp; &nbsp; &nbsp; &nbsp; je done<br />&nbsp; &nbsp; &nbsp; &nbsp; jmp loop1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; done:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax,@data<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx,offset fname<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax,seg fname<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,9<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,4ch<br />&nbsp; &nbsp; &nbsp; &nbsp; mov al,0<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />main endp<br />end main<br /><br /><br />i remove the loop loop1..<br /><br />i replace it with jmp loop1.. if the user hits enter, it will terminate.. :)</div>
    <div class="meta">Posted on 2010-01-30 23:32:35 by exzibi23</div>
   </div>
   <div class="post" id="post-210517">
    <div class="subject"><a href="#post-210517">Re: TASM String</a></div>
    <div class="body">Here&#039;s my REVISED CODE.. it has no error.. after i press ENTER, it should PRINT the Name.. but nothing is printed..<br /><br />Here is my Code..<br /><br /><div class="quote">.model small<br />.stack<br />.data<br />msg1 db &quot;Input Name:&quot;,13,10,&#039;$&#039;<br />msg2 db &quot;My Name is:&quot;,13,10,&#039;$&#039;<br />fname db 50 dup(?)<br /><br />.code<br /><br />main proc<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ax, @data<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ds,ax<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx, offset msg1<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,9<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov cx,2<br />&nbsp; &nbsp; &nbsp; &nbsp; mov di,0<br />&nbsp; &nbsp; &nbsp; &nbsp; mov di, offset fname<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; loop1:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,01h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,0dh<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; je done<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ,al<br />&nbsp; &nbsp; &nbsp; &nbsp; inc di<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; jmp loop1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; done:<br />&nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx,offset msg2<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,09h<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,4ch<br />&nbsp; &nbsp; &nbsp; &nbsp; mov al,0<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />main endp<br />end main<br /></div><br /><br />and i want to know why should I use<br /><br /><div class="quote">mov di,0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov di, offset fname</div><br /><br /><div class="quote">mov ,al</div><br /><br />what&#039;s the purpose of DI? i dont want just to copy the codes from you, and then I use it. NO!. I want to understand WHY and HOW&#039;s that happen.. So please.. Teach me.. Thanks..</div>
    <div class="meta">Posted on 2010-01-31 08:15:30 by exzibi23</div>
   </div>
   <div class="post" id="post-210520">
    <div class="subject"><a href="#post-210520">Re: TASM String</a></div>
    <div class="body">The names of the registers have meanings.<br /><br />The ones with &#039;x&#039; are the regular registers:<br />ax - Accumulator<br />bx - Base<br />cx - Counter<br />dx - Data<br /><br />The &#039;i&#039; stands for Index register:<br />si - Source index<br />di - Destination index<br /><br />The &#039;p&#039; stands for Pointer register:<br />bp - Base pointer<br />sp - Stack pointer<br /><br />For various instructions, you cannot choose all the operands. For example, lodsw will always use the si register as the source address, and always load into ax. And stosw will always store ax to the destination address in di.<br />Therefore it is common to use di when storing data.<br /><br />As for the mov di, 0, I think that&#039;s just a mistake. It has no meaning when di is overwritten with offset fname in the next line.</div>
    <div class="meta">Posted on 2010-01-31 08:41:22 by Scali</div>
   </div>
   <div class="post" id="post-210521">
    <div class="subject"><a href="#post-210521">Re: TASM String</a></div>
    <div class="body"><strong>exzibi23</strong>,<br /><br />You wrote code for output of &quot;Input Name:&quot; and program does it.<br />You wrote code for input of <strong>fname</strong> and program does it.<br />You wrote code for output of &quot;My Name is:&quot; and program does it.<br />You didn&#039;t write code for output of <strong>fname</strong> and program doesn&#039;t output it.<br /><br />Clean up your code, add some comments and you&#039;ll see.</div>
    <div class="meta">Posted on 2010-01-31 09:19:32 by baldr</div>
   </div>
   <div class="post" id="post-210524">
    <div class="subject"><a href="#post-210524">Re: TASM String</a></div>
    <div class="body">Yeah! Told you to write comments! :)<br /><br />Go back to what JimmyClif told you in the first place:<br /><br />&quot;Loop the chars into a buffer, terminate the string and display it.&quot;<br /><br />Which part have you left out?<br /><br />Here&#039;s your latest(?) main loop...<br /><br />You can call this label anything, but if you use a &quot;meaningful name&quot; it&#039;ll make your code easier to read. Say &quot;what it&#039;s for&quot;...<br /><br />&nbsp; &nbsp; get_next_char:<br />;&nbsp; &nbsp; &nbsp; &nbsp; loop1:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,01h ; &quot;get character&quot; subfunction of int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,0dh ; character to watch for to end input<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,al&nbsp; ; is user finished yet?<br /><br />Now you&#039;ve got a litttle problem. You havent &quot;got&quot; the character yet! You need to do the int 21h before you can compare the character to carriage-return... or store it. Incidentally, you don&#039;t have to put 0Dh in a register to do the comparison - &quot;cmp al, 0Dh&quot; would work...<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; je done<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ,al ; store the character in our buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; inc di&nbsp; ; advance to next location in the buffer<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h&nbsp; ; call dos - this wants to be done earlier!<br /><br />;&nbsp; &nbsp; &nbsp; &nbsp; jmp loop1<br />&nbsp; &nbsp; jmp get_next_char ; see, it&#039;s all commented! :)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; done:<br /><br />You might even want to call this &quot;done_getting_input:&quot;, but &quot;done:&quot; is pretty clear. Now you need to terminate the string. Zero is a commonly used terminator, but int 21h/9 expects a $-terminated string (this is unusual - you won&#039;t see it in other OSen... or even elsewhere in dos!). I&#039;m not sue I&#039;ve got Tasm syntax right, but I think:<br /><br />&nbsp; &nbsp; mov byte ptr , &#039;$&#039; ; terminate the string<br /><br />; print &quot;my name is&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; mov dx,offset msg2<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,09h<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />; uh, was there something else you wanted to do here? :) :) :)<br /><br />; exit the program<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,4ch<br />&nbsp; &nbsp; &nbsp; &nbsp; mov al,0<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br /><br />Now at this point, the user can enter as much as he likes, and possibly overflow the buffer. Professionals do this. Every new version of (unnamed OS) that comes out has got new &quot;exploits&quot; in it. Often, buffer overruns. Amateurs should not do this!!!<br /><br />If you were to go back to &quot;loop&quot; instead of &quot;jmp&quot;, and load cx with a value *before* the top of you loop, that would prevent it. When you think about what value you want to have in cx before your loop, don&#039;t forget that we need one more byte for the &#039;$&#039;!!! Get it working first, if you want, but think about this! If you develop better habits than the &quot;professionals&quot; have got, the world will thank you! (except antivirus vendors) Sorry to be obsessive about this, but it really bugs me that they keep doin&#039; it - year after year, decade after decade. It isn&#039;t as if this is a newly discovered problem!<br /><br />Okay, okay, I&#039;ll calm down... To add a little to what Scali said about &quot;why di?&quot;... The rules for addressing in 16-bit code are quite restrictive: an (optional) offset, plus an (optional) index register (si, di), plus an (optional) base register (bx, bp). That&#039;s it! In 32-bit code, you can do stuff like &nbsp; - you&#039;ll love it!<br /><br />Further information about addressing: all x86 addresses involve a segment and an offset. In 32-bit code, the rules are different (we can usually ignore segment registers - whew!) - the segment register value (a &quot;selector&quot;) is an index into an array of &quot;descriptors&quot;. In 16-bit code, the value in the segment register is multiplied by 16 (shifted left by four) and added to the offset, to find the &quot;linear address&quot;. (this is neccessary because a 16-bit register can only hold up to 65535, and that isn&#039;t enough memory for HLL programmers :)<br /><br />The cs register is used to determine where our code can be found. Usually, ds is used to locate our data - but sometimes es. As you might expect, ss is used for the stack. This default behavior can be overwritten. For example, bp is a &quot;base register&quot;, but unlike&nbsp; bx, si, and di, it defaults to using ss. &quot;mov , al&quot; would be a legal way to store our character, but it would go in the stack segment instead of the data segment where we want it. &quot;mov ds:&quot; would work.<br /><br />Anyway... ya gotta print your string before it&#039;ll print. :) This is what makes assembly... not &quot;hard&quot;, but &quot;tedious&quot;. You&#039;ve got to tell the CPU every... single... thing! They&#039;re just not good at figuring out what we want.<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-01-31 12:37:48 by fbkotler</div>
   </div>
   <div class="post" id="post-210528">
    <div class="subject"><a href="#post-210528">Re: TASM String</a></div>
    <div class="body">Yeeeepeeee! Thanks for thos who help me.. :)<br /><br />my program is now working.. <br /><br /><div class="quote">.model small<br />.stack<br />.data<br />msg1 db &quot;Input Name:$&quot;<br />msg2 db &quot;My Name is:$&quot;<br />crlf db 13,10,&#039;$&#039;<br />fname db 50<br /><br />.code<br /><br />main proc<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ax, @data<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ds,ax<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov dx, offset msg1<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ah,9<br /> &nbsp; &nbsp; &nbsp; &nbsp;int 21h<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov di, offset fname<br /><br /> &nbsp; &nbsp;loop1:<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ah,01h &nbsp;;Get Character<br /> &nbsp; &nbsp; &nbsp; &nbsp;int 21h &nbsp; &nbsp; ; Call Interrupt, Subfunction 1<br /> <br /> &nbsp; &nbsp; &nbsp; &nbsp;cmp al,0dh &nbsp;;Compare if Enter is press<br /> &nbsp; &nbsp; &nbsp; &nbsp;je done &nbsp; &nbsp; ;Goto done if Enter is Press<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ,al ;store character<br /> &nbsp; &nbsp; &nbsp; &nbsp;inc di &nbsp; &nbsp; &nbsp;;increase di<br /> &nbsp; &nbsp;jmp loop1<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;done:<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov byte ptr ,&#039;$&#039; ;terminate fname with &#039;$&#039;<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov dx, offset crlf<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ah,09h<br /> &nbsp; &nbsp; &nbsp; &nbsp;int 21h<br /> &nbsp; <br /> &nbsp; &nbsp; &nbsp; &nbsp;mov dx,offset msg2<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ah,09h<br /> &nbsp; &nbsp; &nbsp; &nbsp;int 21h<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov dx,offset fname<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ah,09h<br /> &nbsp; &nbsp; &nbsp; &nbsp;int 21h<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ah,4ch<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov al,0<br /> &nbsp; &nbsp; &nbsp; &nbsp;int 21h<br /><br />main endp<br />end main<br /></div><br /><br />Thanks a lot..&nbsp; By the Way, what assembler do you use? Im using TASM..</div>
    <div class="meta">Posted on 2010-01-31 17:31:54 by exzibi23</div>
   </div>
   <div class="post" id="post-210529">
    <div class="subject"><a href="#post-210529">Re: TASM String</a></div>
    <div class="body">Yeah... says that in the subject. :) Nasm, here.<br /><br />Good job! (but you still allow a buffer overrun)<br /><br />Now that you&#039;ve figured out what&#039;s involved, take a look at int 21h/0Ah...<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-01-31 18:01:50 by fbkotler</div>
   </div>
   <div class="post" id="post-210530">
    <div class="subject"><a href="#post-210530">Re: TASM String</a></div>
    <div class="body"><strong>exzibi23</strong>,<br /><br /><strong>fname db 50 dup(?)</strong> somehow mutates into <strong>fname db 50</strong>, thus your buffer for name is 1 byte in length. Definitely buffer overrun. Reorder <strong>db</strong>s as shown and you&#039;ll see what happens:<br /><pre><code><br />msg1 db &quot;Input Name:$&quot;<br />fname db 50<br />msg2 db &quot;My Name is:$&quot;<br />crlf db 13,10,&#039;$&#039;<br /></code></pre></div>
    <div class="meta">Posted on 2010-01-31 18:54:45 by baldr</div>
   </div>
   <div class="post" id="post-210532">
    <div class="subject"><a href="#post-210532">Re: TASM String</a></div>
    <div class="body">Whoa! Good catch baldr! I didn&#039;t notice that. Do you understand the difference, exzibi23? Important, so check it out!<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-02-01 01:58:54 by fbkotler</div>
   </div>
   <div class="post" id="post-210533">
    <div class="subject"><a href="#post-210533">Re: TASM String</a></div>
    <div class="body">I dont get it.. Is <strong>fname db 50</strong> differ from <strong>fname db 50 dup(?)</strong>??<br /><br />and whats the purpose of reordering them? I mean, its all the same.. :sad:</div>
    <div class="meta">Posted on 2010-02-01 03:12:46 by exzibi23</div>
   </div>
   <div class="post" id="post-210535">
    <div class="subject"><a href="#post-210535">Re: TASM String</a></div>
    <div class="body"><strong>exzibi23</strong>,<br /><br /><strong>fname db 50</strong> reserves only one byte. Next one belongs to <strong>msg2</strong> if reordered, or to uninitialized memory that follows <strong>fname</strong>. In your case it belongs to 4-byte padding of data segment, then stack segment (TASM specific), so no harm is done, yet.</div>
    <div class="meta">Posted on 2010-02-01 03:53:33 by baldr</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29801&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29801&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29801" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29801&amp;page=2">&gt;</a><a href="../?id=29801&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>