<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Decimal ascii  to hex code - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20327" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=20327">Decimal ascii  to hex code</a></p>
   <div class="post" id="post-155533">
    <div class="subject"><a href="#post-155533">Decimal ascii  to hex code</a></div>
    <div class="body">I don't completely understand how to convert for dec to hex. but i need to write some code to do that. Where can I find a good tutorial that would explain it VERY clearly. <br /><br />Thanks</div>
    <div class="meta">Posted on 2005-01-10 18:24:14 by ptr_08_2004</div>
   </div>
   <div class="post" id="post-155546">
    <div class="subject"><a href="#post-155546">Decimal ascii  to hex code</a></div>
    <div class="body">Im sure there are many ways of solving this out there, but in the most direct, but propabaly not the most optomal solution, is to break the ASCII number into its fractional components and then brute force addet the fractions together in a loop:<br /><br />&quot;12345&quot; can be viewed as:<br /><br />&quot;1*10000&quot; &quot;2*1000&quot; + &quot;3*100&quot; + &quot;4*10&quot; + &quot;5*1&quot;<br /><br />So a loop that will extract a single ascii character at a time. Convert the single character to binary (easy to do, '3' - 30h = 3h ) and multiply it by its digit position.   This will build a new binary number based on the ascii value.   If the Ascii number is being analysed from left to right, you can determine the initial digit multiplier by counting the number of ascii character.  5 characters = 10^(5-1) = 10000, 4 characters = 10^(4-1) = 1000, etc.  The loop will continue adding up the number until the characters left = 0.<br /><br /><pre><code><br />Calchex PROC uses ebx esi lpAscii&#58;DWORD, dLength&#58;DWORD<br />Local RetrunVal&#58;DWORD<br /><br />xor ebx, ebx<br />mov ReturnVal, ebx<br />inc ebx<br />mov esi, dLength<br />.if esi<br />  ; Build Digit Multiplier<br />  .while esi &gt; 1<br />    imul ebx, 10<br />    dec esi<br />  .wend<br /><br />  ; Loop through ascii number and translate<br />  mov esi, lpAscii<br />  .while dLength <br />    .break .if BYTE PTR &#91;esi&#93; == NULL<br />    xor eax, eax<br />    mov al, &#91;esi&#93;<br />    inc esi<br />    sub eax, 30h<br />    imul eax, ebx<br />    add ReturnVal, eax<br />    idiv ebx, 10<br />    dec dLength<br />  .wend<br />.endif<br />mov eax, ReturnVal<br />ret<br />Calchex endp</code></pre><br /><br />I just rattled this off here on the forum.  I didnt test it.  But it should work.  Or at the very least give you the idea...<br /><br />Regards,<br />:NaN:<br /><br />BTW:  This type of topic is not very advanced and would be better suited for the Main forum area.  I've probably offended this forums users by even posting such ugly source ;)  &lt;lol&gt;</div>
    <div class="meta">Posted on 2005-01-10 21:51:47 by NaN</div>
   </div>
   <div class="post" id="post-155547">
    <div class="subject"><a href="#post-155547">Decimal ascii  to hex code</a></div>
    <div class="body"><div class="quote">Im sure there are many ways of solving this out there, but in the most direct, but propabaly not the most optomal solution, is to break the ASCII number into its fractional components and then brute force addet the fractions together in a loop:<br /><br />&quot;12345&quot; can be viewed as:<br /><br />&quot;1*10000&quot; &quot;2*1000&quot; + &quot;3*100&quot; + &quot;4*10&quot; + &quot;5*1&quot;<br /><br />So a loop that will extract a single ascii character at a time. Convert the single character to binary (easy to do, '3' - 30h = 3h ) and multiply it by its digit position.   This will build a new binary number based on the ascii value.   If the Ascii number is being analysed from left to right, you can determine the initial digit multiplier by counting the number of ascii character.  5 characters = 10^(5-1) = 10000, 4 characters = 10^(4-1) = 1000, etc.  The loop will continue adding up the number until the characters left = 0.<br /><br /><pre><code><br />Calchex PROC uses ebx esi lpAscii&#58;DWORD, dLength&#58;DWORD<br />Local RetrunVal&#58;DWORD<br /><br />xor ebx, ebx<br />mov ReturnVal, ebx<br />inc ebx<br />mov esi, dLength<br />.if esi<br />  ; Build Digit Multiplier<br />  .while esi &gt; 1<br />    imul ebx, 10<br />    dec esi<br />  .wend<br /><br />  ; Loop through ascii number and translate<br />  mov esi, lpAscii<br />  .while dLength <br />    xor eax, eax<br />    mov al, &#91;esi&#93;<br />    inc esi<br />    .break .if eax == NULL<br />    sub eax, 30h  ;make ascii char to binary number under 10<br />    imul eax, ebx ;multiply by digit value<br />    add ReturnVal, eax ; add it to running total<br />    idiv ebx, 10 ; move on to next digit value <br />    dec dLength ; Note one less char to process and go again<br />  .wend<br />.endif<br />mov eax, ReturnVal<br />ret<br />Calchex endp</code></pre><br /><br />I just rattled this off here on the forum.  I didnt test it.  But it should work.  Or at the very least give you the idea...<br /><br />Regards,<br />:NaN:<br /><br />BTW:  This type of topic is not very advanced and would be better suited for the Main forum area.  I've probably offended this forums users by even posting such ugly source ;)  &lt;lol&gt;</div></div>
    <div class="meta">Posted on 2005-01-10 21:56:30 by NaN</div>
   </div>
   <div class="post" id="post-155574">
    <div class="subject"><a href="#post-155574">Decimal ascii  to hex code</a></div>
    <div class="body">I think it is better to scan for null character then work from the back. Easier to code. <br /><br />Scan for null character and set eax = zero<br />@@:<br />Read one character and minus '0' and store in ecx<br />multiply eax by 10<br />add eax, ecx<br />if not the first character jmp @B<br /><br />Once you got the value stored in eax, converting to hex is easy. just read 4 bits and output a character. You do not need to make use of any divisions...<br /><br />Sorry for not coding it out, kinda lazy.</div>
    <div class="meta">Posted on 2005-01-11 06:28:33 by roticv</div>
   </div>
   <div class="post" id="post-155610">
    <div class="subject"><a href="#post-155610">Decimal ascii  to hex code</a></div>
    <div class="body">Well I use Randall Hyde's &quot;High Level Assembler&quot;, which has numerous built in conversion and input/output routines. Start here<a target="_blank" href="http://webster.cs.ucr.edu/AoA/Windows/HTML/AoATOC.html">http://webster.cs.ucr.edu/AoA/Windows/HTML/AoATOC.html</a> to get information on various programming issues. Error trapping is available as well. Somewhere on this site he has information on how to link in HLA libraries into MASM.<br /><br />In one program I read a number (checkpoint time) from a file (inpH) into a 32 bit register using: <br /><pre><code>        fileio.get &#40;inpH, cktime &#41;;</code></pre><br /><br />Somewhere else in the same program used a hand coded a routine (written before I learned file I/O or about various conversion routines) to read a number from the command line. I have minimal error checking. Index eax, final number edx. To multiply by 10 I multiply by 5 then 2. imul or mul affects more registers and may not be necessary. Also this seems more straightforward than scanning to the end of the line first. But there is validity checking<br /><br />Algorithm:<br />If next character is a number, then current number**10+next character<br />Repeat.<br /><br /><pre><code>     xor &#40;edx, edx&#41;;<br />getn1a&#58;<br />     mov &#40;&#91;eax&#93;,  bl&#41;;<br />     if &#40;bl in '0'..'9'&#41; then<br />         and &#40;15, bl&#41;;<br />         lea &#40;edx, &#91;edx + edx *4&#93;&#41;;<br />         lea &#40;edx, &#91;edx + edx&#93;&#41;;<br />         add &#40;ebx, edx&#41;;<br />         inc &#40;eax&#41;;<br />         jmp getn1a;</code></pre><br /><br />Then once the number is in the 32 bit register, you can convert it to a hexadecimal string with some or other built in conversion routine, or simply output it to the screen using:<br /><pre><code>     stdout.put &#40;edx&#41;;</code></pre><br />You can check out the source code for HLA at Webster for ideas on coding a conversion routine yourself.</div>
    <div class="meta">Posted on 2005-01-11 19:57:43 by V Coder</div>
   </div>
  </div>
 </body>
</html>