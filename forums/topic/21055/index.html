<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>My mistake or OllyDbg's mistake? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21055" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21055">My mistake or OllyDbg's mistake?</a></p>
   <div class="post" id="post-159536">
    <div class="subject"><a href="#post-159536">My mistake or OllyDbg's mistake?</a></div>
    <div class="body">Hi!<br /><br />I have the following simple code, and an unusual situation:<br /><pre><code>.386<br />.model	flat, stdcall<br />option	casemap:none<br /><br />include	piccam.inc<br /><br />.code<br /><br />Start:<br />	invoke	GetModuleHandle, NULL<br />	mov	hInstance, eax<br />	invoke	GetCommandLine<br />	mov	CommandLine, eax<br />	invoke	InitCommonControls<br /><br />	; Creating the main dialog<br />	invoke	DialogBoxParam, hInstance, IDD_DIALOG, NULL, addr DlgProc, NULL<br /><br />	invoke	ExitProcess, NULL<br /><br />DlgProc proc hWin:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM<br /><br />	mov	eax, uMsg<br />	.if eax == WM_INITDIALOG<br />		mov	eax, hWin<br />		mov	hDlg, eax<br />		invoke	LoadIcon, hInstance, IDI_DIALOG<br />		invoke	SendMessage, hWin, WM_SETICON, ICON_BIG + ICON_SMALL, eax<br />		invoke	CheckDlgButton, hWin, IDC_CHK1, BST_CHECKED<br />		invoke	IRRSItemsEnable, hWin<br />	.elseif eax == WM_COMMAND<br />		mov	eax, wParam<br />		mov	edx, eax<br />		shr	edx, 16<br />		and	eax, 0FFFFh<br />		.if edx == BN_CLICKED<br />			.if eax == IDC_BTN1<br />				invoke	IRRSItemsEnable, hWin<br />				invoke	IRRSEnable<br />			.elseif eax == IDC_CHK1<br />				invoke	MessageBox, NULL, NULL, NULL, MB_OK<br />			.elseif eax == IDCANCEL<br />				invoke	MessageBox, hWin, addr tExit, addr tDialog, MB_YESNO + MB_ICONQUESTION<br />				.if eax == IDYES<br />					invoke	EndDialog, hWin, IDOK<br />				.endif<br />			.endif<br />		.endif<br />	.else<br />		xor	eax, eax<br />		ret<br />	.endif<br />	xor	eax, eax<br />	inc	eax<br />	ret<br /><br />DlgProc endp<br /><br />IRRSItemsEnable proc hWin:HWND<br />	<br />	xor	bIRRS, TRUE<br />	invoke	GetDlgItem, hWin, IDC_EDT1<br />	invoke	EnableWindow, eax, bIRRS<br />	invoke	GetDlgItem, hWin, IDC_EDT2<br />	invoke	EnableWindow, eax, bIRRS<br />	invoke	GetDlgItem, hWin, IDC_EDT3<br />	invoke	EnableWindow, eax, bIRRS<br />	invoke	GetDlgItem, hWin, IDC_CHK1<br />	invoke	EnableWindow, eax, bIRRS<br />	mov 	edx, offset tEnable<br />	.if	bIRRS<br />		mov	edx, offset tDisable<br />	.endif<br />	invoke	SetDlgItemText, hWin, IDC_BTN1, edx<br />	ret<br /><br />IRRSItemsEnable endp<br /><br />IRRSEnable proc<br />	<br />	;invoke SerialOpen<br />	invoke SetDlgItemInt,hDlg,IDC_EDT1,eax,FALSE<br />	ret<br /><br />IRRSEnable endp<br /><br />end Start</code></pre><br />My problem is that if I run the program it works normally.<br />If I load it into OllyDbg and I search the <strong>IRRSEnable</strong> procedure, and I press F4 (run to cursor), it will stop with access violation. If I set up breakpoint at those location it works well again. I just don&#39;t get it. I don&#39;t even use ECX register. Did I do something wrong?<br />I attached the screen capture of OllyDbg.</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=590" target="_blank">error.gif</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-05-04 09:43:27 by bszente</div>
   </div>
   <div class="post" id="post-159538">
    <div class="subject"><a href="#post-159538">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">Ollydbg&#39;s fault. Write an email to the author&nbsp; ;)</div>
    <div class="meta">Posted on 2005-05-04 10:10:19 by roticv</div>
   </div>
   <div class="post" id="post-159546">
    <div class="subject"><a href="#post-159546">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">Ok, thanks for your reply. What a relief... :lol: I thought that I&#39;m the guilty one.<br /><br />Beside this small fault I&#39;m realy satisfied with OllyDbg, I like it better than any other debugger. It&#39;s realy a great program.</div>
    <div class="meta">Posted on 2005-05-04 11:54:07 by bszente</div>
   </div>
   <div class="post" id="post-159555">
    <div class="subject"><a href="#post-159555">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">well could you please upload the compiled binary so that i can try debugging with my olly :)<br />i dont think olly has some bugs of that nature <br />as i see it is having a violation in ntdll.dll which is odd that means you are passing some thing <br />which gets a wrong value some where <br />also in stack i see a lot of LDR : messages&nbsp; that means it is probaly in some initialization stage <br />or you have some imagebase clash and getting access violation&nbsp; dunno :)<br /><br />btw is it some trick question or didnt i see the picture clearly ?? <br />how did victor know it is a bug of olly without even having a cursory glance :) <br />or am i not looking at some thing which he noticed ?? <br /><br /></div>
    <div class="meta">Posted on 2005-05-05 02:25:48 by bluffer</div>
   </div>
   <div class="post" id="post-159557">
    <div class="subject"><a href="#post-159557">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body"><div class="quote"><br />well could you please upload the compiled binary so that i can try debugging with my olly :)<br />i dont think olly has some bugs of that nature <br />as i see it is having a violation in ntdll.dll which is odd that means you are passing some thing <br />which gets a wrong value some where</div><br />I attached the whole RadASM project.<br /><br />The steps to reproduce the error:<br />1. Open project in RadASM. Ctrl+D to debug the exe with OllyDbg.<br />2. In OllyDbg go with the cursor to address <em>004010c6</em> (<em>and eax,0fffh</em> or some other neighbouring instruction).<br />3. Press <strong>F4</strong> a few times (around 7 or 8 times)<br />4. Execution stops: Access violation when reading [7D371066]<br /><br />It is realy bizzare. In this moment I found another way to reproduce the error: if you set up a normal brakepoint and you press F9 the error will appear.<br /><br />BUT: if you do the same and you set up that breakpoint, and you <strong>DO NOT USE</strong> the keyboard, but the toolbar Run Program button, the error will NOT appear.<br />Also if I run the program normally from windows, there is no error.<br /><br />I got the feeling that there is a problem with OllyDbg using the <em><strong>keyboard shortcuts</strong></em>. I just tried another project (a program that never crashed): the same stuff. If I debug the <strong>ReBar</strong> project, which comes with RadASM, it&#39;s enough to press only twice F4 to get the error.<br /><br />There is a 3rd option: maybe my <strong>M$ Window$ very bad eXPerience</strong> is broken.&nbsp; :mad: :mad:<br /><br />Can someone, please, confirm this strange behaviour?</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=593" target="_blank">piccam.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-05-05 02:58:10 by bszente</div>
   </div>
   <div class="post" id="post-159566">
    <div class="subject"><a href="#post-159566">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">sorry to say that i cannot make it crash in w2k :) neither your program crashes nor ollydbg crashes <br /><br />i ve f4ed till my fingers ached&nbsp; then f9nned with other hand till it ached but nada i cant establish that access violation <br /><br />yes you have three edit boxes so the system will send six wm_command (notify messages)<br /><br />so after executing f4 for 6 times the seventh time the application pops up and runs normally <br /><br />ive captured the messages as they are sent to your dialogproc <br />and they all look ok <br /><br />[<pre><code>Log data<br />Address&nbsp; &nbsp; Message<br />0040103E&nbsp;  COND: 00000030 WM_SETFONT&nbsp; &lt;--first message <br />0040103E&nbsp;  COND: 00000111 WM_COMMAND &lt;- second message<br />004010BE&nbsp;  COND: 040003EB MSG(40003EB) &lt;-- notice address , id and message<br />0040103E&nbsp;  COND: 00000111 WM_COMMAND<br />004010BE&nbsp;  COND: 030003EB MSG(30003EB)<br />0040103E&nbsp;  COND: 00000111 WM_COMMAND<br />004010BE&nbsp;  COND: 040003EC MSG(40003EC)<br />0040103E&nbsp;  COND: 00000111 WM_COMMAND<br />004010BE&nbsp;  COND: 030003EC MSG(30003EC)<br />0040103E&nbsp;  COND: 00000111 WM_COMMAND<br />004010BE&nbsp;  COND: 040003ED MSG(40003ED)<br />0040103E&nbsp;  COND: 00000111 WM_COMMAND<br />004010BE&nbsp;  COND: 030003ED MSG(30003ED)<br />0040103E&nbsp;  COND: 00000110 WM_INITDIALOG<br />0040103E&nbsp;  COND: 00000080 WM_SETICON<br />0040103E&nbsp;  COND: 00000046 WM_WINDOWPOSCHANGING<br />0040103E&nbsp;  COND: 0000001C WM_ACTIVATEAPP<br />0040103E&nbsp;  COND: 00000086 WM_NCACTIVATE<br />0040103E&nbsp;  COND: 00000006 WM_ACTIVATE<br />0040103E&nbsp;  COND: 00000400 WM_USER<br />0040103E&nbsp;  COND: 00000127 WM_CHANGEUISTATE<br />0040103E&nbsp;  COND: 00000018 WM_SHOWWINDOW<br />0040103E&nbsp;  COND: 00000046 WM_WINDOWPOSCHANGING<br />0040103E&nbsp;  COND: 0000000D WM_GETTEXT<br />0040103E&nbsp;  COND: 00000085 WM_NCPAINT<br />0040103E&nbsp;  COND: 0000000D WM_GETTEXT<br />0040103E&nbsp;  COND: 00000014 WM_ERASEBKGND<br />0040103E&nbsp;  COND: 00000136 WM_CTLCOLORDLG<br />0040103E&nbsp;  COND: 00000047 WM_WINDOWPOSCHANGED<br />0040103E&nbsp;  COND: 00000005 WM_SIZE<br />0040103E&nbsp;  COND: 00000003 WM_MOVE<br />0040103E&nbsp;  COND: 0000000F WM_PAINT<br />0040103E&nbsp;  COND: 00000135 WM_CTLCOLORBTN<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 00000138 WM_CTLCOLORSTATIC<br />0040103E&nbsp;  COND: 0000000D WM_GETTEXT<br />60000000&nbsp;  Module C:\WINNT\system32\MSCTF.dll<br />779B0000&nbsp;  Module C:\WINNT\system32\OLEAUT32.DLL<br />0040103E&nbsp;  COND: 00000086 WM_NCACTIVATE<br />0040103E&nbsp;  COND: 0000000D WM_GETTEXT<br />0040103E&nbsp;  COND: 00000006 WM_ACTIVATE<br />0040103E&nbsp;  COND: 0000001C WM_ACTIVATEAPP<br />0040103E&nbsp;  COND: 00000135 WM_CTLCOLORBTN<br />0040103E&nbsp;  COND: 00000135 WM_CTLCOLORBTN<br /><br />===========================<br />here is the arguments decoded <br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_SETFONT<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hFont = 800A0592<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Redraw = 0<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Notify = EN_UPDATE... ID = 1003.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hControl = 002E0112 (&#39;0&#39;,class=&#39;Edit&#39;,parent=003D012C)<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Notify = EN_CHANGE... ID = 1003.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hControl = 002E0112 (&#39;0&#39;,class=&#39;Edit&#39;,parent=003D012C)<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Notify = EN_UPDATE... ID = 1004.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hControl = 002D00F8 (&#39;0&#39;,class=&#39;Edit&#39;,parent=003D012C)<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Notify = EN_CHANGE... ID = 1004.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hControl = 002D00F8 (&#39;0&#39;,class=&#39;Edit&#39;,parent=003D012C)<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Notify = EN_UPDATE... ID = 1005.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hControl = 002A00DE (&#39;0&#39;,class=&#39;Edit&#39;,parent=003D012C)<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Notify = EN_CHANGE... ID = 1005.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hControl = 002A00DE (&#39;0&#39;,class=&#39;Edit&#39;,parent=003D012C)<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br />0040103B&nbsp;  CALL to Assumed WinProc from user32.77E3A3CD<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hWnd = 003D012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Message = WM_INITDIALOG<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  hFocus = 002A0138 (&#39;En&amp;able&#39;,class=&#39;Button&#39;,parent=003D012C)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Parm = 0<br />0040103B&nbsp;  COND: &lt;WinProc&gt;<br /></code></pre><br /><br />i dont radasm so i cant do your ctrl+d and also i dont have xp to confirm if it has some problems <br />but on w2k it works fine on ollydbg <br /><br />you can make olly jit and cature the exception and&nbsp; look at stack back trace <br /><br />or may be post the call stack of main thread ( dont forget to actualize as there may be stale data in that window )<br /><br />look below for call stack details <br /><br /><pre><code><br />Call stack of main thread<br />Address&nbsp; &nbsp; Stack&nbsp; &nbsp; &nbsp; Procedure / arguments&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Called from&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Frame<br />0012FCB4&nbsp;  77E3A3D0&nbsp;  Maybe piccam.DlgProc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user32.77E3A3CD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FCB0<br />0012FCB8&nbsp;  003F012C&nbsp; &nbsp;  hWnd = 003F012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />0012FCBC&nbsp;  00000111&nbsp; &nbsp;  Message = WM_COMMAND<br />0012FCC0&nbsp;  000003EA&nbsp; &nbsp;  age = Notify = MENU/BN_CLICKED... ID = 1002.<br />0012FCC4&nbsp;  002B0138&nbsp; &nbsp;  hControage = 002B0138 (&#39;Dis&amp;able&#39;,class=&#39;Button&#39;,parent=003F012C)<br />0012FCD4&nbsp;  77E28C59&nbsp;  user32.77E3A3B8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E28C54&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FCD0<br />0012FCD8&nbsp;  0040103B&nbsp; &nbsp;  Arg1 = 0040103B<br />0012FCDC&nbsp;  003F012C&nbsp; &nbsp;  Arg2 = 003F012C<br />0012FCE0&nbsp;  00000111&nbsp; &nbsp;  Arg3 = 00000111<br />0012FCE4&nbsp;  000003EA&nbsp; &nbsp;  Arg4 = 000003EA<br />0012FCE8&nbsp;  002B0138&nbsp; &nbsp;  Arg5 = 002B0138<br />0012FD10&nbsp;  77E1622D&nbsp;  Maybe user32.77E28B9A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E16226&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FD0C<br />0012FD14&nbsp;  003F012C&nbsp; &nbsp;  Arg1 = 003F012C<br />0012FD18&nbsp;  00000111&nbsp; &nbsp;  Arg2 = 00000111<br />0012FD1C&nbsp;  000003EA&nbsp; &nbsp;  Arg3 = 000003EA<br />0012FD20&nbsp;  002B0138&nbsp; &nbsp;  Arg4 = 002B0138<br />0012FD24&nbsp;  00000000&nbsp; &nbsp;  Arg5 = 00000000<br />0012FD40&nbsp;  77E17361&nbsp;  user32.77E16063&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.SendMessageW+3F&nbsp; &nbsp; &nbsp; &nbsp; 0012FD3C<br />0012FD60&nbsp;  77E30963&nbsp;  user32.SendMessageW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E3095E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FD5C<br />0012FD64&nbsp;  003F012C&nbsp; &nbsp;  hWnd = 3F012C<br />0012FD68&nbsp;  00000111&nbsp; &nbsp;  Message = WM_COMMAND<br />0012FD6C&nbsp;  000003EA&nbsp; &nbsp;  age = Notify = MENU/BN_CLICKED... ID = 1002.<br />0012FD70&nbsp;  002B0138&nbsp; &nbsp;  hControage = 002B0138 (&#39;Dis&amp;able&#39;,class=&#39;Button&#39;,parent=003F012C)<br />0012FD74&nbsp;  77E2C150&nbsp;  user32.77E3091F&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E2C14B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FDFC<br />0012FD8C&nbsp;  77E28676&nbsp;  user32.77E2C058&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E28671&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FDFC<br />0012FE00&nbsp;  77E2E078&nbsp;  user32.77E27DB5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E2E073&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FDFC<br />0012FE04&nbsp;  002B0138&nbsp; &nbsp;  Arg1 = 002B0138<br />0012FE08&nbsp;  00000202&nbsp; &nbsp;  Arg2 = 00000202<br />0012FE0C&nbsp;  00000000&nbsp; &nbsp;  Arg3 = 00000000<br />0012FE10&nbsp;  000B002E&nbsp; &nbsp;  Arg4 = 000B002E<br />0012FE14&nbsp;  00000001&nbsp; &nbsp;  Arg5 = 00000001<br />0012FE24&nbsp;  77E3A3D0&nbsp;  user32.77E2E02F&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E3A3CD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FE20<br />0012FE28&nbsp;  002B0138&nbsp; &nbsp;  Arg1 = 002B0138<br />0012FE2C&nbsp;  00000202&nbsp; &nbsp;  Arg2 = 00000202<br />0012FE30&nbsp;  00000000&nbsp; &nbsp;  Arg3 = 00000000<br />0012FE34&nbsp;  000B002E&nbsp; &nbsp;  Arg4 = 000B002E<br />0012FE44&nbsp;  77E14605&nbsp;  user32.77E3A3B8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E14600&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FE40<br />0012FE48&nbsp;  77E2E02F&nbsp; &nbsp;  Arg1 = 77E2E02F<br />0012FE4C&nbsp;  002B0138&nbsp; &nbsp;  Arg2 = 002B0138<br />0012FE50&nbsp;  00000202&nbsp; &nbsp;  Arg3 = 00000202<br />0012FE54&nbsp;  00000000&nbsp; &nbsp;  Arg4 = 00000000<br />0012FE58&nbsp;  000B002E&nbsp; &nbsp;  Arg5 = 000B002E<br />0012FED0&nbsp;  77E1A7BA&nbsp;  user32.77E14321&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.DispatchMessageW+6&nbsp; &nbsp;  0012FECC<br />0012FEDC&nbsp;  77E2EC65&nbsp;  user32.DispatchMessageW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.IsDialogMessageW+3CC&nbsp;  0012FEFC<br />0012FEE0&nbsp;  0012FF18&nbsp; &nbsp;  pMsg = WM_LBUTTONUP hw = 2B0138 (&quot;Dis&amp;able&quot;) Keys = 0 X = 46. Y = 11.<br />0012FF00&nbsp;  77E334DC&nbsp;  user32.IsDialogMessageW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E334D7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FEFC<br />0012FF04&nbsp;  003F012C&nbsp; &nbsp;  hWnd = 003F012C (&#39;PicCam&#39;,class=&#39;#32770&#39;)<br />0012FF08&nbsp;  004ABDA8&nbsp; &nbsp;  pMsg = WM_DESTROY hw = 2B0138 (&quot;Dis&amp;able&quot;)<br />0012FF3C&nbsp;  77E44184&nbsp;  user32.77E3338E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E4417F&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FF38<br />0012FF40&nbsp;  003F012C&nbsp; &nbsp;  Arg1 = 003F012C<br />0012FF44&nbsp;  00000000&nbsp; &nbsp;  Arg2 = 00000000<br />0012FF48&nbsp;  00000010&nbsp; &nbsp;  Arg3 = 00000010<br />0012FF4C&nbsp;  00000000&nbsp; &nbsp;  Arg4 = 00000000<br />0012FF60&nbsp;  77E38CB4&nbsp;  user32.77E440B3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.DialogBoxIndirectPara&nbsp; 0012FF5C<br />0012FF64&nbsp;  00400000&nbsp; &nbsp;  Arg1 = 00400000<br />0012FF68&nbsp;  00404160&nbsp; &nbsp;  Arg2 = 00404160<br />0012FF6C&nbsp;  00000000&nbsp; &nbsp;  Arg3 = 00000000<br />0012FF70&nbsp;  0040103B&nbsp; &nbsp;  Arg4 = 0040103B<br />0012FF74&nbsp;  00000000&nbsp; &nbsp;  Arg5 = 00000000<br />0012FF78&nbsp;  00000003&nbsp; &nbsp;  Arg6 = 00000003<br />0012FF80&nbsp;  77E3ED19&nbsp;  user32.DialogBoxIndirectParamAorW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.DialogBoxParamA+45&nbsp; &nbsp;  0012FF7C<br />0012FF84&nbsp;  00400000&nbsp; &nbsp;  Arg1 = 00400000<br />0012FF88&nbsp;  00404160&nbsp; &nbsp;  Arg2 = 00404160<br />0012FF8C&nbsp;  00000000&nbsp; &nbsp;  Arg3 = 00000000<br />0012FF90&nbsp;  0040103B&nbsp; &nbsp;  Arg4 = 0040103B<br />0012FF94&nbsp;  00000000&nbsp; &nbsp;  Arg5 = 00000000<br />0012FF98&nbsp;  00000002&nbsp; &nbsp;  Arg6 = 00000002<br />0012FFAC&nbsp;  00401034&nbsp;  piccam.DialogBoxParamA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; piccam.&lt;ModuleEntryPoint&gt;+2F&nbsp; 0012FFA8<br />0012FFB0&nbsp;  00400000&nbsp; &nbsp;  hInst = 00400000<br />0012FFB4&nbsp;  000003E8&nbsp; &nbsp;  pTemplate = 3E8<br />0012FFB8&nbsp;  00000000&nbsp; &nbsp;  hOwner = NULL<br />0012FFBC&nbsp;  0040103B&nbsp; &nbsp;  DlgProc = piccam.DlgProc<br />0012FFC0&nbsp;  00000000&nbsp; &nbsp;  lParam = NULL<br />0012FFC4&nbsp;  7C59893D&nbsp;  Maybe piccam.&lt;ModuleEntryPoint&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  KERNEL32.7C59893A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FFF0<br /></code></pre><br /><br />i dont still think olly has a bug :)<br /><br /><br /><br /><br /></div>
    <div class="meta">Posted on 2005-05-05 07:33:04 by bluffer</div>
   </div>
   <div class="post" id="post-159571">
    <div class="subject"><a href="#post-159571">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">I got the feeling that sometheing is related here to XP.<br /><br />Can you tell me please how can I generate those logs? I don&#39;t know these logging features of OllyDbg and I looked over OllyDbg&#39;s help file, but I did not succed to generate the same logs, that you have posted. I succeded to get some brief logs, not so detailed, like yours.<br />Please tell me how to do it, and I will post the logs.<br /><br />Thanks for your time.</div>
    <div class="meta">Posted on 2005-05-05 08:33:17 by bszente</div>
   </div>
   <div class="post" id="post-159572">
    <div class="subject"><a href="#post-159572">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">I think you guys are looking into the topic from the wrong direction.<br /><br />1) We see that the crash is located at 7C91E305h within ntdll.dll. But the problem is that bszente did not even call any ntdll.dll functions. So how did that happen? Most likely something wrong with ollydbg; but that is just my preliminary analysis.<br /><br />2) I loaded ntdll.dll into IDA and downloaded the pdb file from msdn and take a look at the address where the crash occurs.<br /><span class="mono"><br />.text:7C91E305 loc_7C91E305:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; CODE XREF: LdrProcessRelocationBlockLongLong(x,x,x,x,x)+3Ej<br />.text:7C91E305&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; DATA XREF: .text:off_7C91E4AEo<br />.text:7C91E305&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  movzx&nbsp;  eax, word ptr  ; case 0x1<br />.text:7C91E308&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  shl&nbsp; &nbsp;  eax, 10h<br />.text:7C91E30B&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp;  eax, edx<br />.text:7C91E30D&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  jmp&nbsp; &nbsp;  short loc_7C91E329<br /></span><br /><br />So what is Ldr-related functions? I had to look into &quot;Inside Windows 2000&quot; to find out some information on it. <br /><br /><div class="quote"><br />Ntdll also contains many support functions, such as the image loader (functions that start with Ldr), the heap manager, and Win32 subsystem process communication functions (functions that start with Csr), as well as general run-time library routines (functions that start with Rtl). It also contains the user-mode asynchronous procedure call (APC) dispatcher and exception dispatcher. <br /></div><br /><br />So the Ldr-related functions are support functions that deals with image loader. That means that the bug could not have originated from bszente&#39;s code, but it must have came from ollydbg (As such a crash did not occur when bszente runs the exe normally).<br /><br /></div>
    <div class="meta">Posted on 2005-05-05 09:06:38 by roticv</div>
   </div>
   <div class="post" id="post-159575">
    <div class="subject"><a href="#post-159575">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">Thank you <strong>roticv </strong>for the investigation.<br />It&#39;s very strange, because as I said before only with keybord shortcuts is problem. If I put a breakpoint and I use the toolbar buttons instead of F9 the execution will go normal, and the error will not occur. I think normally it should not matter if I use keyboard shortcuts or toolbar buttons.<br /><br /><strong>bluffer</strong>, if you have time, please explain me briefly how can I generate those logs, thanks.<br /><br />Regards,<br />bszente<br /></div>
    <div class="meta">Posted on 2005-05-05 09:36:01 by bszente</div>
   </div>
   <div class="post" id="post-159577">
    <div class="subject"><a href="#post-159577">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">bszente <br />the first log was done by using conditional log breakpoint aka shift+f4 <br />to do it <br />you select the line where you want to log <br />in you example i selected your dialog procs first instruction <br />on its own olly wont know it is a message loop or winproc() which has&nbsp; standard parameters<br />so you will see only two radio button enabled&nbsp; viz pause and log expression <br />in the expression box if you enter  ---&gt; read up  always points to wParam<br />in a standard winproc <br />olly will log them as 110,111,30,202, etc etc <br />now there is a list box below which has assumed by expression as default <br />if you change it to wm_msg xxx <br />olly will crack those 111 110 etc as WM_COMMAND,WM_INITDIALOG etc etc<br />and will log it for you <br />that is the result of first part above decoding <br /><br />now you can help olly assume some thing using analysis--&gt;assume arguments <br /><br />so if you select winproc and apply it <br />olly will from now onwards assume it to be standard winproc <br />and will display a comment like this<br />0040103B&nbsp; &nbsp;  PUSH&nbsp; &nbsp; EBP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;&nbsp; Decoded as &lt;WinProc&gt;<br /><br />now if you press shift+f4 on this line again you will see the third radio button has also been enabled <br />you select to log always or set conditions&nbsp; what ever you wish <br />olly will log all the function arguments <br />viz <br />hwnd,msg,wParam,lParam <br /><br />===============<br />================<br />now as far as stack is concerned <br />it is just pressing ctrl+k when ever you have olly in paused condition <br />and right click copy pasting to note pad&nbsp; befor e copying you should always remeber to <br />right click actualize on all windows coz they may not reflect the actual status unless <br />you demand (a smart worker concept i am as smart as my boss is)<br /><br />hope i explained it in a manner you could understand&nbsp; <br />post if you have some question <br />have fun <br />regards<br /><br /><br /><br /> <br />Breakpoints, item 0<br /> Address=0040103B<br /> Module=piccam<br /> Active=Log<br /> Disassembly=PUSH&nbsp; &nbsp; EBP<br /></div>
    <div class="meta">Posted on 2005-05-05 10:36:38 by bluffer</div>
   </div>
   <div class="post" id="post-159578">
    <div class="subject"><a href="#post-159578">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">Thank you <strong>bluffer</strong> for your post. You explained well, it was very helpful.<br />From now one I can debug a lot more easyer.<br /><br />I think this thread can be considered solved.</div>
    <div class="meta">Posted on 2005-05-05 11:18:23 by bszente</div>
   </div>
   <div class="post" id="post-159583">
    <div class="subject"><a href="#post-159583">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">i dont know if it is solved or not :) as long as there isnt a clear cut verdict i wont think it is solved for me :)<br />but i was poking around catching debug strings and i think it some how must be related to ntvdm loading that gets mixed up in xp <br />coz you are opening com1 port&nbsp; on another machine com1 wasnt available so your exe failed to run <br />so i hexed your exes (com1 to com2 and catched this debug string )<br /><pre><code><br />Call stack of main thread<br />Address&nbsp; &nbsp; Stack&nbsp; &nbsp; &nbsp; Procedure / arguments&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Called from&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Frame<br />0012F4B0&nbsp;  77F99A45&nbsp;  ntdll.DbgPrint&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ntdll.77F99A40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0012F72C<br />0012F730&nbsp;  77E87F6A&nbsp;  KERNEL32.LdrGetDllHandle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  KERNEL32.77E87F65&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012F72C<br />0012F784&nbsp;  77E8DBF3&nbsp;  KERNEL32.GetModuleHandleForUnicodeString&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  KERNEL32.77E8DBEE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012F780<br />0012F7A4&nbsp;  77E1DA9D&nbsp;  KERNEL32.GetModuleHandleW&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user32.77E1DA97&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012F7A0<br />0012F7A8&nbsp;  0012F9F0&nbsp; &nbsp;  pModule = &quot;C:\Documents and Settings\Administrator\Desktop\index\piccam1.exe&quot;<br />0012F7AC&nbsp;  77E1DA33&nbsp;  user32.WowGetModuleHandle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user32.77E1DA2E&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012F7C4<br />0012F7C8&nbsp;  77E1D839&nbsp;  user32.CopyImageFromRes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user32.77E1D834&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012F7C4<br />0012FC98&nbsp;  77E1D74C&nbsp;  user32.CopyIcoCur&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; user32.77E1D747&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FC94<br />0012FCB4&nbsp;  77E1CCD1&nbsp;  user32.InternalCopyImage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  user32.77E1CCCC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  0012FCB0<br />0012FCDC&nbsp;  77F9FB83&nbsp;  Includes user32.77E1CCD1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ntdll.KiUserApcDispatcher+20&nbsp; 0012FCD8<br /></code></pre><br /><br /><pre><code><br />0012F4B0&nbsp;  77F99A45&nbsp; RETURN to ntdll.77F99A45 from ntdll.DbgPrint<br />0012F4B4&nbsp;  77F999CE&nbsp; ASCII &quot;LDR: LdrGetDllHandle, searching for %ws from %ws<br />&quot;<br />0012F4B8&nbsp;  0012F4D8&nbsp; UNICODE &quot;C:\Documents and Settings\Administrator\Desktop\index\piccam1.exe&quot;<br /><br /></code></pre><br />some old school types could help here :)</div>
    <div class="meta">Posted on 2005-05-05 12:52:05 by bluffer</div>
   </div>
   <div class="post" id="post-159591">
    <div class="subject"><a href="#post-159591">Re: My mistake or OllyDbg's mistake?</a></div>
    <div class="body">Well this problem is beyond me.&nbsp; :sad:<br />That&#39;s true with the Com1 port, but as I said before, I tested this problem with the simple ReBar tutorial project included in the RadASM package, and also with another project of mine, and I could reproduce the error, so ntvdm should not be relevant... I don&#39;t know :|<br /><br />As a conclusion: the error is not strictly related to my program. <em>It can be reproduced with other programs too and it happens <strong>ONLY</strong> with the keyboard shortcuts.</em> Thus all these arguments leads me to the conclusion what <strong>roticv </strong>said, that the problem lies in OllyDbg, or more exactly the problem comes from an incompatibiliy between OllyDbg and XP (I have SP2).<br />That&#39;s why it would be important to test this by also other people to see that only my Windows is broken or not.<br />On what Windows did you tested it, <strong>roticv</strong>?</div>
    <div class="meta">Posted on 2005-05-05 14:24:32 by bszente</div>
   </div>
  </div>
 </body>
</html>