<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>com vs exe - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3947" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3947">com vs exe</a></p>
   <div class="post" id="post-26835">
    <div class="subject"><a href="#post-26835">com vs exe</a></div>
    <div class="body">I have made some com files with debug which can be aggrevating and rewarding at the same time. My question is what is the actual difference between a com file and an executable. What i really need to know is the foramat of an EXE. Is there some info file on EXEs that i can download. I know that a exe must be somewhat like a jpeg or bmp in that certain info is stored at the beginning of the file. What is this info and why is it there. I assume its MS at work.<br /><br />Any help appreciated.<br /> :alright:</div>
    <div class="meta">Posted on 2002-03-02 20:00:36 by titan</div>
   </div>
   <div class="post" id="post-26838">
    <div class="subject"><a href="#post-26838">com vs exe</a></div>
    <div class="body">here's something you can read about the pe file:<br /><br /><a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/msdnmag/issues/02/02/PE/TOC.asp?frame=true">http://msdn.microsoft.com/library/default.asp?url=/msdnmag/issues/02/02/PE/TOC.asp?frame=true</a><br /><br />iczelion also has some pe file tutorials you can take a look at.</div>
    <div class="meta">Posted on 2002-03-02 20:20:31 by smurf</div>
   </div>
   <div class="post" id="post-26848">
    <div class="subject"><a href="#post-26848">com vs exe</a></div>
    <div class="body">I'm sure the previously posted links have answered you're question, but I think a concise answer might help anyone else following this thread.<br /><br />The com file, as you probably know, is pretty much raw data.  It's simple to load into memory and execute, but it's a legacy from a time when sharing memory with other proccesses was rare.  Normally, a com file is loading by an OS and given free reign to available memory.<br /><br />The exe file format from dos, is a bit more complicated.  It contains a header with information about the files memory requirements, size, etc.  It also contains a table of segment references that must be adjusted to point to where the program has been loaded into memory.<br /><br />The PE file format, though straight forward once understood (and I'm still shaky with it) is a bit more complicated.  First, it contains a dos executeable (the stub) which is usually a short program that informs the user that windows is required to run the program.  This is followed by the PE header, import and export tables, section tables, and other things which Iczelion's tut can explain better than I.<br /><br />If you plan on hand coding an exe with DEBUG, more power to you.  Let me know if you get it accomplished.  Sounds like quite a task.</div>
    <div class="meta">Posted on 2002-03-02 22:37:14 by Canite</div>
   </div>
   <div class="post" id="post-26878">
    <div class="subject"><a href="#post-26878">com vs exe</a></div>
    <div class="body">titan,<br /><br />Dos COM and EXE files are different due to their respective tasks. A COM file is a memory image and the file holds no more than that. You will see a directive ORG 100h that tells the prog where to start in memory as the COM file is appended to the program segment prefix when its loaded. COM files are restricted to one segment so they can never be larger that 64k where an EXE file depending on the memory model use can be up near the limit of DOS memory.<br /><br />A DOS EXE header is a lot more complicated, you can get a look at it by using an old microsoft utility called EXEHDR.EXE which will dump a lot of info for you.<br /><br />A DOS COM file is much closer to a 32 bit PE file because both are written in one segment and both can contain code and data in the same segment, its just that a DOS COM file can be no larger than 64k where a 32 bit PE file can be over a gigabyte theoretically.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-03 02:09:32 by hutch--</div>
   </div>
   <div class="post" id="post-26930">
    <div class="subject"><a href="#post-26930">com vs exe</a></div>
    <div class="body">Hello,<br />     I am new to the board, but I do have some good references to file formats. <a target="_blank" href="www.wotsit.org">www.wotsit.org</a> is a very good collection of file format documentations. For dos exes you will want to search for MZ file format, The PE file format (32bit) is just an addition to the mz file format. After the MZ header their is a &quot;pointer&quot; to the PE header. The reason for this, incase you were wondering, is if the program is ran in dos you can run the &quot;stub&quot; program which can be as simple as a message saying &quot;This program needs windows to run&quot;. Or it can be a complex dos program. But if the program is ran in windows, Windows just skips the MZ header and loads the windows program (PE). Hope this helps. Wotsit also has a com file format document. Jag</div>
    <div class="meta">Posted on 2002-03-03 11:47:27 by Jag</div>
   </div>
   <div class="post" id="post-27134">
    <div class="subject"><a href="#post-27134">com vs exe</a></div>
    <div class="body">Interesting enough if you rename a .exe to .com on Win2K it will still function.<br /><br />Try to do that on plain DOS and hope you have a parachute, because it will crash :)</div>
    <div class="meta">Posted on 2002-03-04 08:02:04 by dxantos</div>
   </div>
   <div class="post" id="post-27158">
    <div class="subject"><a href="#post-27158">com vs exe</a></div>
    <div class="body">are you sure .com/.exe extensions matter on dos, dxantos? I recall<br />using a .com file to make sure my app launched before a .exe.<br />I also remember some v1r11 using this method...</div>
    <div class="meta">Posted on 2002-03-04 10:54:24 by f0dder</div>
   </div>
   <div class="post" id="post-27371">
    <div class="subject"><a href="#post-27371">com vs exe</a></div>
    <div class="body">command.com is exe file, you can rename a file even to bat file...it will still run :-] ...</div>
    <div class="meta">Posted on 2002-03-05 16:35:50 by me8</div>
   </div>
   <div class="post" id="post-27389">
    <div class="subject"><a href="#post-27389">com vs exe</a></div>
    <div class="body">I never found any problems in renaming dos EXE files to COM files in versions of DOS from 5.0 upwards to win98se DOS.<br /><br />=========<br />command.com is exe file, you can rename a file even to bat file...it will still run :-]...<br />=========<br /><br />Actually you could have a lot of fun here, getting command.com to read a binary file line by line as it normally processes batch files could give some &quot;very interesting&quot; results. :tongue: <br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-05 18:01:30 by hutch--</div>
   </div>
   <div class="post" id="post-27409">
    <div class="subject"><a href="#post-27409">com vs exe</a></div>
    <div class="body">===<br />Actually you could have a lot of fun here, getting command.com to read a binary file line by line as it normally processes batch files could give some &quot;very interesting&quot; results.  <br />===<br /><br />I Know disassemble .exe file(Windows) but<br />How Can I disassemble command.com?</div>
    <div class="meta">Posted on 2002-03-05 19:10:16 by muzidowa</div>
   </div>
   <div class="post" id="post-27417">
    <div class="subject"><a href="#post-27417">com vs exe</a></div>
    <div class="body">I just remember vaguely from the past the name SOURCER 7 as being the best around for disassembling dos com and exe files.<br /><br />Just make sure you are not doing anything naughty or Microsoft will be unhappy about you playing with their command interpreter.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-05 19:53:42 by hutch--</div>
   </div>
  </div>
 </body>
</html>