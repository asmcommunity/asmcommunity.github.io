<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Lookup Table? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15170" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=15170">Lookup Table?</a></p>
   <div class="post" id="post-117882">
    <div class="subject"><a href="#post-117882">Lookup Table?</a></div>
    <div class="body">I want to compare a large code string. I tried this:<br /><br /><br />.data<br />Table1 db &quot;69540a0d093a656dh&quot;,0<br /><br />yada<br />yada<br />        mov ebx,<table>            ; code string<br />        mov esi,eax<br />        mov eax, dword ptr <br />        cmp eax,ebx<br />        jz $+05h<br />        inc esi<br />        loopnz $-07h</div>
    <div class="meta">Posted on 2003-09-12 13:40:39 by mrgone</div>
   </div>
   <div class="post" id="post-117910">
    <div class="subject"><a href="#post-117910">Well this will work</a></div>
    <div class="body">.data<br /><br />Table1 db &quot;69540a0d093a656dh:%s&quot;,0<br /><br /><br />;subroutine to convert ASCII to hex since MASM converts strings to ASCII<br /><br />Ascii2Hex:<br />        mov al,<table><br />        cmp al,39h<br />        ja $+09h<br />        sub al,30h<br />        shl al,04h<br />        jmp $+0dh<br />        test al,02h<br />        jz $+04h<br />        sub al,20h<br />        sub al,37h<br />        shl al,04h<br />        mov ah,al<br />        inc edx<br />        mov al,<table><br />        cmp al,39h<br />        ja $+06h<br />        sub al,30h<br />        jmp $+0ah<br />        test al,02h<br />        jz $+04h<br />        sub al,20h<br />        sub al,37h<br />        or al,ah<br />        ret</div>
    <div class="meta">Posted on 2003-09-12 20:29:40 by mrgone</div>
   </div>
   <div class="post" id="post-117928">
    <div class="subject"><a href="#post-117928">Lookup Table?</a></div>
    <div class="body">Very nice code. This helps to remember how many bytes each instruction takes :) <br /><br />I'm some confused still...<br />I just wander why not use:<br /><pre><code>Table1 db 69h,54h,0ah,0dh,09h,3ah,65h,6dh,0</code></pre></div>
    <div class="meta">Posted on 2003-09-13 02:05:14 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-117986">
    <div class="subject"><a href="#post-117986">Oh, that's how you do it</a></div>
    <div class="body">Gee wiz,:(  I always do things the hard way.</div>
    <div class="meta">Posted on 2003-09-13 13:20:48 by mrgone</div>
   </div>
   <div class="post" id="post-118205">
    <div class="subject"><a href="#post-118205">oops!</a></div>
    <div class="body">correction: just to set the record straight<br /><br />Ascii2Hex:<br /><br />        mov al,<table><br />        cmp al,39h<br />        ja $+09h<br />        sub al,30h<br />        shl al,04h<br />        jmp $+0dh<br />        test al,020h<br />        jz $+04h<br />        sub al,20h<br />        sub al,37h<br />        shl al,04h<br />        mov ah,al<br />        inc edx<br />        mov al,<table><br />        cmp al,39h<br />        ja $+06h<br />        sub al,30h<br />        jmp $+0ah<br />        test al,020h<br />        jz $+04h<br />        sub al,20h<br />        sub al,37h<br />        or al,ah<br />        ret</div>
    <div class="meta">Posted on 2003-09-15 07:55:14 by mrgone</div>
   </div>
   <div class="post" id="post-118265">
    <div class="subject"><a href="#post-118265">Lookup Table?</a></div>
    <div class="body">Hi, everyone.<br />mrgone, shouldn't it be easier to use the BCD instructions? I saw a routine like that somewhere, I think at the Assembler Gems site.</div>
    <div class="meta">Posted on 2003-09-15 18:18:01 by QvasiModo</div>
   </div>
  </div>
 </body>
</html>