<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Transformation matrix from 3 points - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19523" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=19523">Transformation matrix from 3 points</a></p>
   <div class="post" id="post-150371">
    <div class="subject"><a href="#post-150371">Transformation matrix from 3 points</a></div>
    <div class="body">I know there is a way to generate a transformation matrix from three pairs of points taken before and after the transformation, but I can not find any documentation on how to determind the transformation matrix.  Here is my problem:<br /><br /><pre><code><br />|---         ---|    |---      ---|   |---        ---|<br />|x'1   x'2   x'3|    |            |   | x1   x2   x3 |<br />|               |    |            |   |              |<br />|y'1   y'2   y'3|  = |  Matrix M  | x | y1   y2   y3 |<br />|               |    |            |   |              |<br />|z'1   z'2   z'3|    |            |   | z1   z2   z3 |<br />|---         ---|    |---      ---|   |---        ---|<br /></code></pre><br /><br />Given the three pairs of points (x1,y1,z1) --&gt; (x'1,y'1,z'1) etc., how do I find the transformation matrix M?<br /><br />Spara</div>
    <div class="meta">Posted on 2004-09-24 16:23:24 by Sparafusile</div>
   </div>
   <div class="post" id="post-150373">
    <div class="subject"><a href="#post-150373">Transformation matrix from 3 points</a></div>
    <div class="body">Work out the inverse the the rightmost matrix and multiply it on the righthand side of the left most one.</div>
    <div class="meta">Posted on 2004-09-24 16:51:04 by E贸in</div>
   </div>
   <div class="post" id="post-150374">
    <div class="subject"><a href="#post-150374">Transformation matrix from 3 points</a></div>
    <div class="body">Thanks.  I figured it was something simple like that.  Now, to continue my question... if I have more than three sets of points, how can I use them all in the same way to make the transformation more accurate?<br /><br />Spara</div>
    <div class="meta">Posted on 2004-09-24 17:27:48 by Sparafusile</div>
   </div>
   <div class="post" id="post-150397">
    <div class="subject"><a href="#post-150397">Transformation matrix from 3 points</a></div>
    <div class="body">The transformation should be perfectly accurate with just the one set. Unless there are inaccurcies in the points data. Have anymore info?</div>
    <div class="meta">Posted on 2004-09-25 04:54:52 by E贸in</div>
   </div>
   <div class="post" id="post-150468">
    <div class="subject"><a href="#post-150468">Transformation matrix from 3 points</a></div>
    <div class="body">Yeah, I'm anticipating innacuracies.  I'm doing transforms on images so I'm stuck with integer point data.  I may also allow the user to select their own points instead of doing it automaticaly so that'll introduce more innacuracies.<br /><br />Spara</div>
    <div class="meta">Posted on 2004-09-25 13:13:33 by Sparafusile</div>
   </div>
   <div class="post" id="post-150472">
    <div class="subject"><a href="#post-150472">Transformation matrix from 3 points</a></div>
    <div class="body">Well since you'll probably be dealing with small inaccurcies then working out a couple of matrices and just averaging the components indivually will probably be good enough.<br /><br />If you know there will be some constraints on the atrix then renforce these on the averaged matrix. Eg if you know the transformation can only consist of translations and rotations then you could renormalise the rotation bits of the matrix. Thats just an example though which may not apply to your needs.</div>
    <div class="meta">Posted on 2004-09-25 14:17:41 by E贸in</div>
   </div>
   <div class="post" id="post-151022">
    <div class="subject"><a href="#post-151022">Transformation matrix from 3 points</a></div>
    <div class="body">Ok I've run into another problem.  Once I actualy implemented the code to do this I realized that (since I'm working with 2D coordinates in a 3x3 matrix) the right column of my matrix is always zero.  This presents a problem when trying to find the inverse as there is no determinant.<br /><br />Should I fill the right column of both of my matrices with a constant (1 for example) or should I fill it with (0, 0, 1)  as if it were an identity matrix?<br /><br />The goal of my program is to stitch pictures together in a mosaic so they're one image.  I'm working on the image matching portion and using the transformation matrix to combine the images.  Thanks.<br /><br />Spara</div>
    <div class="meta">Posted on 2004-10-06 15:33:57 by Sparafusile</div>
   </div>
   <div class="post" id="post-151058">
    <div class="subject"><a href="#post-151058">Transformation matrix from 3 points</a></div>
    <div class="body">Yes, you should put a 1 in the bottom right corner as you guessed.</div>
    <div class="meta">Posted on 2004-10-07 06:50:21 by E贸in</div>
   </div>
  </div>
 </body>
</html>