<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>CSERVER object - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6543" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=6543">CSERVER object</a></p>
   <div class="post" id="post-47224">
    <div class="subject"><a href="#post-47224">CSERVER object</a></div>
    <div class="body">Part two of the Winsock objects series :)<br /><br />It handles incoming connections on a specific port, all you specify is a callback that handles the connection. This callback is passed a CSOCKET object, so you can use the handy GetLine method too.<br />Comes with a little demo program. This was used to debug it, so don't expect anything fancy (yet, anyway).<br /><br />It's at the bottom of my website's download page. Website: <a target="_blank" href="http://www20.brinkster.com/qweerdy/">http://www20.brinkster.com/qweerdy/</a></div>
    <div class="meta">Posted on 2002-07-12 06:57:45 by Qweerdy</div>
   </div>
   <div class="post" id="post-47286">
    <div class="subject"><a href="#post-47286">CSERVER object</a></div>
    <div class="body">Hi, I really enjoyed your class implementation. :alright: <br /><br />But I saw you're complaining in comments of your test app, that you    cannot handle WM_DESTROY in 'Stop' Method (or destructor)of your CSERVER.<br /><br /><div class="quote">			; Sadly, we can't PostQuitMessage because this runs in a different thread than our<br />			; main messageloop. If we had a window, we'd post WM_DESTROY to the window instead.<br /></div> <br /><br />I have a small suggestion:<br /><br />In 'Init' or in Start for your CSERVER class, you can create a message-only window (like MSDN says):<br /><br /><div class="quote"><br />&quot;To create a message-only window, specify the HWND_MESSAGE constant or a handle to an existing message-only window in the hWndParent parameter of the CreateWindowEx function&quot;<br /></div><br /><br />Possibly you could also start a standard a standard Windows message loop there, so as to have it in place.<br /><br />You may still wonder what this thing is for:<br />You'll be able to handle WM_DESTROY sent from ServProc thread to parent process message-only Window. ;-)<br />To do this, it's good to save hWnd handle returned by CreateWindowEx for message-only window, as a member variable in your class.<br /><br />Regards and thanks again for Your cool CSERVER and CSOCKET class.</div>
    <div class="meta">Posted on 2002-07-12 14:23:13 by Andycar</div>
   </div>
   <div class="post" id="post-47351">
    <div class="subject"><a href="#post-47351">CSERVER object</a></div>
    <div class="body">Hmmm... interesting. I didn't know there was such a thing as a message-only window. Thanks, I'll check it out! <br /><br />However, my decision to not include a window in the demo program was mainly to keep the code really simple, and including a message-only window would make it just as complex as including a regular window :( Anyway, I'll be sure to use a message-only window in my next server programs as it seems to be the best way in terms of conserving memory while at the same time doing things the preferred windows way.</div>
    <div class="meta">Posted on 2002-07-13 03:28:07 by Qweerdy</div>
   </div>
   <div class="post" id="post-47358">
    <div class="subject"><a href="#post-47358">CSERVER object</a></div>
    <div class="body"><div class="quote"><br />Hmmm... interesting. I didn't know there was such a thing as a message-only window. Thanks, I'll check it out! <br /></div><br /><br />Well, yes, and I forgot one thing: message-only windows are ONLY 2k\XP specific. <br /><a target="_blank" href="http://msdn.microsoft.com/library/en-us/winui/winui/windowsuserinterface/windowing/windows/windowfeatures.asp?frame=true#message_only">read about it in MSDN online</a> <br /><br />Regards,</div>
    <div class="meta">Posted on 2002-07-13 05:51:22 by Andycar</div>
   </div>
  </div>
 </body>
</html>