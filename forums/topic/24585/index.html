<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>erasing mdr and fat - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=24585" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=24585">erasing mdr and fat</a></p>
   <div class="post" id="post-179475">
    <div class="subject"><a href="#post-179475">erasing mdr and fat</a></div>
    <div class="body">Hello,<br /><br />I&#39;m not very used in asm programming but I have to create a little program which will erase (or write zeros on) the firts 128 sector of a HDD. I know I&#39;ve to use int 13h but not much more.<br /><br />Another question : how will windows 2k react? Will it permit the zeroing without any question?<br /><br />I&#39;ve done a little search in the main forum but to no avail.<br /><br />Can someone help me?<br /><br />Tanks in advance.<br /><br />Bregolhen</div>
    <div class="meta">Posted on 2006-04-12 14:15:18 by bregolhen</div>
   </div>
   <div class="post" id="post-179476">
    <div class="subject"><a href="#post-179476">Re: erasing mdr and fat</a></div>
    <div class="body">win2k probably wont allow it directly, unless you use createfile or ioctls, that is of course assuming the program is a win32 executable, if its a dos exe/com file it will probably work</div>
    <div class="meta">Posted on 2006-04-12 14:28:18 by evlncrn8</div>
   </div>
   <div class="post" id="post-179477">
    <div class="subject"><a href="#post-179477">mbr/fat</a></div>
    <div class="body">hello,<br /><br />I think I will try to compile to a 16bits .exe or .com file.<br /><br />I want to reassure you : I don&#39;t want to write some virus. It just a bit of homework given by one of my teacher.<br /><br />Tanks<br /><br />Bregolhen</div>
    <div class="meta">Posted on 2006-04-12 14:32:12 by bregolhen</div>
   </div>
   <div class="post" id="post-179478">
    <div class="subject"><a href="#post-179478">Re: erasing mdr and fat</a></div>
    <div class="body">A dos program using int13 most likely will not be allowed to do this under NT systems, it certainly wasn&#39;t allowed to do it even under win9x. Under NT, you can CreateFile (see the MSDN documentation) and write directly, but of course only if you have administrative privileges.<br /><br />Why would your teacher want you to make an app like this?<br /></div>
    <div class="meta">Posted on 2006-04-12 16:14:57 by f0dder</div>
   </div>
   <div class="post" id="post-179479">
    <div class="subject"><a href="#post-179479">Re: erasing mdr and fat</a></div>
    <div class="body"><div class="quote">Why would your teacher want you to make an app like this?</div><br /><br /><br />I dont&#39;t know. She didn&#39;t say and we (the students) didn&#39;t think to ask. For now, it&#39;s holyday and we have to get back the results for the 1st day of school. After that it will be useless to ask for explanations.&nbsp; :)<br /><br />Bye,<br /><br />Bregolhen</div>
    <div class="meta">Posted on 2006-04-12 16:29:25 by bregolhen</div>
   </div>
   <div class="post" id="post-179480">
    <div class="subject"><a href="#post-179480">Re: erasing mdr and fat</a></div>
    <div class="body">Call/email her? Which platform must the code run under, and which assembler do you use?<br /></div>
    <div class="meta">Posted on 2006-04-12 16:56:13 by f0dder</div>
   </div>
   <div class="post" id="post-179482">
    <div class="subject"><a href="#post-179482">Re: erasing mdr and fat</a></div>
    <div class="body">Of course, you realize that once you zero the FAT, the HDD will be trashed.&nbsp; Perhaps you should only zero sectors 2 through 128?&nbsp; Not my hard drive but thought you might like to know.<br /><br />Paul<br /></div>
    <div class="meta">Posted on 2006-04-12 16:59:57 by PBrennick</div>
   </div>
   <div class="post" id="post-179483">
    <div class="subject"><a href="#post-179483">Re: erasing mdr and fat</a></div>
    <div class="body"><div class="quote"><br />Of course, you realize that once you zero the FAT, the HDD will be trashed.&nbsp; Perhaps you should only zero sectors 2 through 128?&nbsp; Not my hard drive but thought you might like to know.<br /></div><br />Not the HDD, just all the files on it (and still with good recovery chances based on file contents) - a format and the drive is up-and-running again. But still, it&#39;s not something you&#39;d want to run on your drive without knowing it, and requests of this type make me suspicious.<br /></div>
    <div class="meta">Posted on 2006-04-12 17:08:39 by f0dder</div>
   </div>
   <div class="post" id="post-179489">
    <div class="subject"><a href="#post-179489">Re: erasing mdr and fat</a></div>
    <div class="body">Ahhhh, actually, once both copies of the FAT are erased, recovery becomes VERY tedious and almost impossible.&nbsp; The FAT is the ONLY way to recover the chain of sectors used by any given file.&nbsp; So once the first 2 sectors are erased the hard drive&#39;s data is effectively lost.&nbsp; ASCII data that is in the clear is easily recovered, but programs, etc. Forget it.<br /><br />I, also, tend to get suspicious when these type of requests pop up.<br /><br />Paul<br /></div>
    <div class="meta">Posted on 2006-04-12 18:15:58 by PBrennick</div>
   </div>
   <div class="post" id="post-179494">
    <div class="subject"><a href="#post-179494">Re: erasing mdr and fat</a></div>
    <div class="body">I&#39;ve seen GetDataBack recover some pretty trashed filesystems. Just takes longer to reconnect everything that is left.<br /><br />The one thing I can suggest to you, bregolhen, is that you don&#39;t use this program outside of a controlled environment (trashable computer or emulator with 16-bit DOS)... and especially not your computer :)<br /><br />I suggest using <a target="_blank" href="http://bochs.sourceforge.net/">Bochs</a> with a <a target="_blank" href="http://www.bootdisk.com/">DOS Bootdisk</a> in order to test this program accurately and securely.<br /><br />Other than that, DOS (actually BIOS) int 13 alone is pretty useless outside of a 16-bit Real Mode environment (16-bit DOS).</div>
    <div class="meta">Posted on 2006-04-12 18:40:52 by SpooK</div>
   </div>
   <div class="post" id="post-179495">
    <div class="subject"><a href="#post-179495">Re: erasing mdr and fat</a></div>
    <div class="body">Well, once the FAT is gone (in the case of FATx filesystems) or other filesystem structures (MFT in case of NTFS) is gone, recovery *does* become very tedious. But there&#39;s some applications out there that are pretty good at doing it - at least with drives that aren&#39;t too fragmented :)<br /></div>
    <div class="meta">Posted on 2006-04-12 18:41:02 by f0dder</div>
   </div>
   <div class="post" id="post-179504">
    <div class="subject"><a href="#post-179504">Re: erasing mdr and fat</a></div>
    <div class="body">I&#39;ve heard about applications/devices/tools/methods/whatever that can recover files from a disk that was zeroed, 1-ed, 0-ed, 1-ed and so on, severeal times.<br /><br />Where there is a will, there is a way :P</div>
    <div class="meta">Posted on 2006-04-12 20:59:25 by ti_mo_n</div>
   </div>
   <div class="post" id="post-179516">
    <div class="subject"><a href="#post-179516">Re: erasing mdr and fat</a></div>
    <div class="body">ti_mo_n,<br />It is truly amazing as to what can be done, isn&#39;t it?<br /><br />Paul<br /></div>
    <div class="meta">Posted on 2006-04-12 23:29:46 by PBrennick</div>
   </div>
   <div class="post" id="post-179517">
    <div class="subject"><a href="#post-179517">Re: erasing mdr and fat</a></div>
    <div class="body">Digital representation of a analog process :)</div>
    <div class="meta">Posted on 2006-04-12 23:32:29 by SpooK</div>
   </div>
  </div>
 </body>
</html>