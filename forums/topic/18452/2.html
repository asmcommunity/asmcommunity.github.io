<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Emulating unsupported instructions - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18452" />
  <link rel="prev" href="../?id=18452&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=18452">Emulating unsupported instructions</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=18452&amp;page=1" style="">&laquo;</a><a href="../?id=18452&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="18452" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-143032">
    <div class="subject"><a href="#post-143032">Emulating unsupported instructions</a></div>
    <div class="body"><div class="quote">But compatible.</div><br /><br />You are not getting the point of compatibility being useless if the machine is too slow to run the code it can now run. It's like porting a DVD player back to a 486... It will never work anyway, so who cares if the 486 can actually run the code or not?<br /><br /><div class="quote">I don't want to buy a Prescott to be able to write Prescott code</div><br /><br />Why don't you create SSE3 macros then, and use those in your code, so that they get translated directly, without any recompilation or other overly complex nonsense? Ultimately you will need a Prescott ofcourse, because there's no other way to verify your macros/code.</div>
    <div class="meta">Posted on 2004-06-06 12:12:33 by Scali</div>
   </div>
   <div class="post" id="post-143045">
    <div class="subject"><a href="#post-143045">Emulating unsupported instructions</a></div>
    <div class="body"><strong>f0dder</strong> the turning off the cache was a trick for making 286 games playable on the 486!<br />I've still got a little app that did it on my old 486, it came with Wing commander 2 IIRC.<br /><br />On the original topic, the ARM linux does something like this in the kernel to support the floating point module not present on certain classes of the ARM core. I'm not entirely sure where you'd need to look in the code, but I know it's there (it doesn't work properly for sine &amp; cosine functions on the ARM)!.<br /><br />The cost in any given individual program would vastly outweigh the portability aspect, especially with SSE as they are a performance instruction set... Putting them in a driver would be a &quot;nice&quot; failsafe, but any programmer who uses SSE without checking that it's available deserves to be taken out and shot.<br /><br />Mirno</div>
    <div class="meta">Posted on 2004-06-06 16:06:24 by Mirno</div>
   </div>
   <div class="post" id="post-143055">
    <div class="subject"><a href="#post-143055">Emulating unsupported instructions</a></div>
    <div class="body"><div class="quote"><br />You are not getting the point of compatibility being useless if the machine is too slow to run the code it can now run. It's like porting a DVD player back to a 486... It will never work anyway, so who cares if the 486 can actually run the code or not?</div><br />Think more about running Prescott code on a Northwood core. The DVD will play. I wouldn't care if it's only one frame per second. And it might not be existing instructions I want to emulate. :cool:<br /><div class="quote"><strong>Why don't you create SSE3 macros then, and use those in your code, so that they get translated directly, without any recompilation or other overly complex nonsense? Ultimately you will need a Prescott ofcourse, because there's no other way to verify your macros/code. </div><br />Sure, I can write macros. But it might not be my own code that needs 'emulation' support...<br /><br />Never question the question. ;)</div>
    <div class="meta">Posted on 2004-06-06 18:13:58 by C0D1F1ED</div>
   </div>
   <div class="post" id="post-143057">
    <div class="subject"><a href="#post-143057">Emulating unsupported instructions</a></div>
    <div class="body">If not enough information is provided to start with, you have to 'question the question' to find an optimal solution...<br /><br />So, you want to run other peoples binaries, to which you don't have the source - (or you want to produce a product that allows other people to do this). If this is it, you'll need to set up an emulation/JIT system... and if you want performance that's even remotely acceptable, you'll need a good JIT...</div>
    <div class="meta">Posted on 2004-06-06 18:21:55 by f0dder</div>
   </div>
   <div class="post" id="post-143060">
    <div class="subject"><a href="#post-143060">Emulating unsupported instructions</a></div>
    <div class="body"><div class="quote">The DVD will play. I wouldn't care if it's only one frame per second.</div><br /><br />Nobody is going to watch a DVD at 1 frame per second.<br />Much better to write decent code for Northwood then.<br /><br /><div class="quote">And it might not be existing instructions I want to emulate.</div><br /><br />Yea! Let's all invent our own instructionsets and emulate them! You need a new hobby?</div>
    <div class="meta">Posted on 2004-06-06 18:38:19 by Scali</div>
   </div>
   <div class="post" id="post-143141">
    <div class="subject"><a href="#post-143141">Emulating unsupported instructions</a></div>
    <div class="body"><div class="quote"><br />You need a new hobby?</div>`<br />Yes, I still got four hours of sleep every day. :grin:</div>
    <div class="meta">Posted on 2004-06-07 15:22:33 by C0D1F1ED</div>
   </div>
   <div class="post" id="post-143160">
    <div class="subject"><a href="#post-143160">Emulating unsupported instructions</a></div>
    <div class="body">I dont know how runtime Softwire really is, but how about using cpuid to see if the users system even supports SSE?  Then if SSE is used, provide a same functioning alternative.  This reduces the amount of checks for invalid opcodes you need to 1, at Softwire initiliaztion.</div>
    <div class="meta">Posted on 2004-06-07 19:12:51 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-143161">
    <div class="subject"><a href="#post-143161">Emulating unsupported instructions</a></div>
    <div class="body">TC, he said he might want to emulate for other people's programs too, to which he doesn't have source... ie, a generic system-level emulator... as far as I understand it, anyway.<br /><br />Scali, take it easy?</div>
    <div class="meta">Posted on 2004-06-07 19:18:04 by f0dder</div>
   </div>
   <div class="post" id="post-143176">
    <div class="subject"><a href="#post-143176">Emulating unsupported instructions</a></div>
    <div class="body">Yes I  understand that it is for other peoples programs.<br /><br />What I'm saying is use cpuid to get to get the the system spec it is running on.  What if someone runs a program that uses MMX or SSE and their processor does not support either?<br /><br />Maybe I'm misunderstanding how Softwire works, just how real-time it is.  Can it emit code and excute it right after being emitted?<br /><br />What I'm saying is that once you know what the running system supports, even thought the code may contain MMX or SSE,  can it at runtime patch that code to plain fpu or equivilent x86 while it is running?  Or a first run patch?</div>
    <div class="meta">Posted on 2004-06-08 00:28:13 by ThoughtCriminal</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=18452&amp;page=1" style="">&laquo;</a><a href="../?id=18452&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="18452" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>