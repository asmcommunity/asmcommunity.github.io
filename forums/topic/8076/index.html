<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>re -&gt; problem with MoveFileEx + VirtulAllocEx - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8076" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=8076">re -&gt; problem with MoveFileEx + VirtulAllocEx</a></p>
   <div class="post" id="post-59125">
    <div class="subject"><a href="#post-59125">re -&gt; problem with MoveFileEx + VirtulAllocEx</a></div>
    <div class="body"><strong>.IF did any admin or mod deleted my thread == TRUE<br />did i do something wrong, if so please tell (pm) me i don't want to screw again<br />.ELSE <br />vbulletin is buggy and deleted the thread<br />.ENDIF</strong><br /><br /><br />the reason i bothered 'repost' all this here is because someone might have the same problems as i had in the future, so a search will help them<br />thanks to the person who helped me out :alright: <br />i just wonder why my thread has vanished :(<br /><br /><br /><br />i was trying to use MoveFileEx, but i was unable to it always returned error, so to see what was wrong i used:<br />GetLastError - eax = 78<br />FormatMessage - &quot;This function is only valid in Win32 mode&quot;<br /><br />then i thought, well maybe it's because my code is not using all APIs that also work on NT or XP, the &quot;API_name_plus_Ex&quot;<br /><em>the person(don't remember his nick) who replied the thread(i read just before it was deleted) told that MoveFileEx doen't work on 98; thanks for cleraring this fog on my mind :)  and also he cleared my stupid idea that my code has to use the API_Ex instead of API to work on NT or XP </em><br /><br />because of that i tried to replace the code, when reached VirtualAlloc i tried to replace with VirtualAllocEx, but wrongly <em>again correct by the same person</em> i must call GetCurrentProcess instead of GetCurrentProcessId to get the handle to use its value as paramater to VirtualAllocEx<br /><br /><br />another thing in <em>XXXX***</em> instead of VirtualAllocEx it appeared FillconsoleoutputCharacterW, this is strange and the way to fix it is with the &quot;exp&quot; directive<br /><em>the same person helped me with this, thanks again :)</em></div>
    <div class="meta">Posted on 2002-09-22 08:49:14 by kr0n0</div>
   </div>
   <div class="post" id="post-59131">
    <div class="subject"><a href="#post-59131">Re: re -&gt; problem with MoveFileEx + VirtulAllocEx</a></div>
    <div class="body">I can't restore your post, <strong>kr0n0</strong>, only mine. Here it is:<br /><br /><strong>*** MY DELETED POST START ***</strong><br /><strong>kr0n0</strong>, with which func do you have problems?<br />It's not clear from your post why you should call VirtualAlloc.<br /><br />GetCurrentProcessId function returns the process identifier, NOT process handle.<br />You can't pass that value to VirtualAllocEx.<br />To get pseudohandle for the current process use GetCurrentProcess.<br />But if you try to get handle of your process, i guess you want allocate memory from it.<br />In this case no reason to call VirtualAllocEx, because of:<br /><em>&quot;The difference between the VirtualAllocEx function and the VirtualAlloc function is that VirtualAlloc allocates memory within the address space of the calling process, while VirtualAllocEx lets you specify a process.&quot;</em><br /><br />As for MoveFileEx. My MSDN tells me that this function:<br /><em>&quot;Windows 95/98: Unsupported.&quot;</em><br /><br /><div class="quote">...when debugging it (chuck it!) doens't apper any VirtualAllocEx but instead <br /><br />FillconsoleoutputCharacterW...</div><br />I had similar problems with chuck it! under w9x many times, but can't remember the root of this problem.<br />Most of the times it mistackes with func names i guess, but not shure.<br />In chuck it! you can use <strong>exp</strong> command to fetch exported symbols that chuck it! can <br /><br />recognize.<br />It can help you to decide in which function you are.<br /><strong>exp virtualalloc</strong><br />displays entryes for all VirtuAlalloc* functions.<br /><br />It may be better to post your code snippet here.<br />This way we can understand your problem better.<br /><strong>*** MY DELETED POST END ***</strong><br /><br /><div class="quote"><em>did i do something wrong, if so please tell (pm) me i don't want to screw again</em></div><br />Don't understand why this happend. I have just re-read the rules and couldn't see any one that we have not respected.<br />The only reason i guess is reference to most powerful debugger (you know i mean ;))<br />Dunno why, but people here don't like it much.<br />If you don't want the same happend with your post again, i guess you should immediately remove any reference to it from your post.<br /><br />And now what about your problems. Have you any?</div>
    <div class="meta">Posted on 2002-09-22 09:48:23 by Four-F</div>
   </div>
   <div class="post" id="post-59133">
    <div class="subject"><a href="#post-59133">Re: Re: re -&gt; problem with MoveFileEx + VirtulAllocEx</a></div>
    <div class="body"><div class="quote"><br />The only reason i guess is reference to most powerful debugger (you know i mean ;))<br />Dunno why, but people here don't like it much.<br /></div><br />Because 95%+ of the used SICE versions are warezed.<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=6768">http://www.asmcommunity.net/board/index.php?topic=6768</a></div>
    <div class="meta">Posted on 2002-09-22 10:31:05 by bazik</div>
   </div>
   <div class="post" id="post-59213">
    <div class="subject"><a href="#post-59213">re -&gt; problem with MoveFileEx + VirtulAllocEx</a></div>
    <div class="body">OK. Then this restriction should be added into rules, i think, because of FAQ reading is facultative, but rules are indispensable.<br />If there is nothing about it in the rules, i hope you will agree with me, it's very strange situation:<br />You (if it was you), or other moderator, deleted post of the member who haven't contravened any rule, but only haven't read FAQ!!!<br />BTW, FAQ is too big, you know.</div>
    <div class="meta">Posted on 2002-09-23 02:33:24 by Four-F</div>
   </div>
  </div>
 </body>
</html>