<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>(Optimization related)What's the diff between using 'switch- - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16580" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=16580">(Optimization related)What's the diff between using 'switch-</a></p>
   <div class="post" id="post-128926">
    <div class="subject"><a href="#post-128926">(Optimization related)What's the diff between using 'switch-</a></div>
    <div class="body">... other than the the fact that in switch case you dont need to put <em>'if(myvar=='</em> and you can use only constants.<br /><br />Does the compiler use any special optimizations while using switch-case? If so what are they?<br /><br />And if it doesnt do anything special with switch-case then why dont programming langs allows using variables too in 'case' statements instead of allowing only constants?<br /><br />Edit: I tried to look at the disassembly with vc++ 2002 on optimized switch-case code but the debugger wont trace till there and it also cant show me the asm lines corresponding to the C lines.</div>
    <div class="meta">Posted on 2003-12-25 16:26:36 by clippy</div>
   </div>
   <div class="post" id="post-128928">
    <div class="subject"><a href="#post-128928">(Optimization related)What's the diff between using 'switch-</a></div>
    <div class="body">Dear Clippy<br /><br />Not all programming languages, just damn C/c++ will not allow expressions into switch case<br /><br />The only real difference between switch/case and if/elseif/else/endif is.... none<br /><br />However compared with simple if/else/endif (aka without elseif) is that: switch/case allows many IF's in the same statement block :P<br /><br />I used to think thta all switch in C/C++ is done via jumptables, at least on MS VC++ it is :D<br />But somebody on the  MASM board showed me clear example that GNU gcc(++) does NOT</div>
    <div class="meta">Posted on 2003-12-25 18:40:26 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-128931">
    <div class="subject"><a href="#post-128931">(Optimization related)What's the diff between using 'switch-</a></div>
    <div class="body">I think i heard somewhere that using switch/case the compiler can create a sort of binary tree in the mem so finding a value is faster rather than comparing with each and every value? Is that true?</div>
    <div class="meta">Posted on 2003-12-25 19:17:34 by clippy</div>
   </div>
   <div class="post" id="post-128945">
    <div class="subject"><a href="#post-128945">(Optimization related)What's the diff between using 'switch-</a></div>
    <div class="body">With <strong>switch</strong>, the compiler (if it is built to do it) can choose a so-called &quot;optimal&quot; solution.<br /><br />In fact, the C compilers on the early PDP Unixes did choose one of three implementations depending on the distribution and number of case values.  The three implementations were:  1) individual <strong>if-then</strong> comparisons for each case value, 2) one table of jump addresses indexed by case value, and 3) one search table containing &lt;value, address&gt; pairs.<br /><br />I believe that Dennis Ritchie published years and years ago how the old Unix C compilers chose which option.</div>
    <div class="meta">Posted on 2003-12-25 22:59:08 by tenkey</div>
   </div>
   <div class="post" id="post-129138">
    <div class="subject"><a href="#post-129138">(Optimization related)What's the diff between using 'switch-</a></div>
    <div class="body"><div class="quote"><br />...so finding a value is faster rather than comparing ... Is that true? </div><br />Like Bogdan said, it's true for VC++. :D In fact, true whenever possible - let's say you have &quot;case 100:&quot; and &quot;case 5000&quot; - it won't make a jump table :grin: . Nor would any asm coder. Unless there are cases 101...4999 :grin:<br /><br />If I ever use C++, it'll be VC++ , as it optimizes very well.</div>
    <div class="meta">Posted on 2003-12-28 05:26:47 by Ultrano</div>
   </div>
   <div class="post" id="post-129321">
    <div class="subject"><a href="#post-129321">(Optimization related)What's the diff between using 'switch-</a></div>
    <div class="body">and when not doing jumptables, it does the binary search divide and conquer strategy with the conditional jumps, resulting in the least possible amount of branches.</div>
    <div class="meta">Posted on 2003-12-29 22:21:35 by f0dder</div>
   </div>
  </div>
 </body>
</html>