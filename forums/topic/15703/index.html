<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Reducing EXE size - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15703" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=15703">Reducing EXE size</a></p>
   <div class="post" id="post-121673">
    <div class="subject"><a href="#post-121673">Reducing EXE size</a></div>
    <div class="body">I did this once in FASM just for fun.  Thought I would try to create a plain Window<br />with as small a footprint as possible.  Also experimented with reducing size of<br />the WndProc, an un-balanced stack, direct access of stack variables and such.<br /><br />I seem to have stumbled upon something odd though.<br /><br />Normally, when I compile this code I end up with an exe of 1536 bytes<br />(all of case 1 uncommented while case 2 is commented).<br /><br />However, when I comment out case 1 and uncomment case 2 (supposedly to<br />further reduce code size at the expence of a cursor and icon), it ends up<br />being larger than before :confused:<br /><br />Perhaps someone might look at it and explain to me this weird behaviour?</div>
    <div class="meta">Posted on 2003-10-18 15:21:42 by Graebel</div>
   </div>
   <div class="post" id="post-121678">
    <div class="subject"><a href="#post-121678">Reducing EXE size</a></div>
    <div class="body">with standart options the size become 2,560Bytes of size.<br />linked with &quot;Macro Assembler Version 6.14.8444&quot;<br /><br />Greets !</div>
    <div class="meta">Posted on 2003-10-18 15:30:45 by Bubu-Boy</div>
   </div>
   <div class="post" id="post-121717">
    <div class="subject"><a href="#post-121717">Reducing EXE size</a></div>
    <div class="body">hmm weird behaviour. I cannot really explain it. Perhaps alignment issue? erm this is fasm code?<br /><br />Anyway you can remove the call to GetModuleHandle and replace it with 400000h. Also you can remove the data section and change<br /><br /><pre><code><br />push		OFFSET szDisplayName</code></pre><br /><br />to<br /><pre><code><br />call @F<br />db &quot;template&quot;,0<br />@@&#58;<br /></code></pre></div>
    <div class="meta">Posted on 2003-10-18 23:54:40 by roticv</div>
   </div>
   <div class="post" id="post-121729">
    <div class="subject"><a href="#post-121729">Reducing EXE size</a></div>
    <div class="body">Here is the final executable reduced to 1536 bytes with the source code intact.</div>
    <div class="meta">Posted on 2003-10-19 03:57:33 by Vortex</div>
   </div>
  </div>
 </body>
</html>