<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Mov Var1, eax...some other code...Var1=1 ; Why? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19619" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19619">Mov Var1, eax...some other code...Var1=1 ; Why?</a></p>
   <div class="post" id="post-151037">
    <div class="subject"><a href="#post-151037">Mov Var1, eax...some other code...Var1=1 ; Why?</a></div>
    <div class="body">My program wasn't working, so I began outputing at different stages to see what was going on. I take 100 and div by 2. It does get 50. A little bit later, it is still 50, but then, it's 3. It continues, 50, 50, 4, 50, 50, 5,...,50, 50, 50, 50, 1. I don't want it to change at all. I said screw the division, I will hard code 50 in, but it still changes.<br /><br />The only thing I really do is mov eax, themover. themover is two, then three, and so on. Why is that affecting onehalf?<br /><br /><pre><code>.DATA<br /><br /><br />primearr	BYTE	100 DUP&#40;0&#41;<br />onehalf		DWORD	50 ;;;;;;;This is what changes<br />lastcheck	DWORD	2<br />themover	DWORD	2<br />theprime	BYTE	3 dup&#40;' '&#41;,0<br /><br /><br />.CODE<br />_start&#58;<br />		;mov eax, lengthof primearr			;Get length of the array<br />		;mov edx, 0					;For Division<br />		;mov ebx, 2					;Move 2 to bl for division<br />		;div ebx						;Divide to know when to stop<br />		;mov onehalf, eax				;Store in OneHalf<br />		mov edi, offset primearr			;Get address of primearr<br />	<br />		mov edi, 2					;Make edi 2, the first prime<br /><br />addagain&#58;	mov eax, themover				;Move the prime for multiples<br /><br /><br />mov eax, onehalf ;;;;;;;output for testing<br />dtoa theprime, eax;;;;;;this is where it changes<br />output theprime<br /><br /><br />		add edi, eax					;Go to first prime, move by multiples of the prime<br />		cmp edi, lengthof primearr			;check if x is bigger than the array<br />		JA incagain					;if if it is<br />		mov primearr&#91;edi&#93;, 1				;x is not prime, divisible by x<br />		jmp addagain					;Keep going to end of array</code></pre></div>
    <div class="meta">Posted on 2004-10-07 00:01:56 by sjaguar13</div>
   </div>
   <div class="post" id="post-151038">
    <div class="subject"><a href="#post-151038">Mov Var1, eax...some other code...Var1=1 ; Why?</a></div>
    <div class="body">What is dtoa and output? Maybe those marcos corrupt the values in the registers.</div>
    <div class="meta">Posted on 2004-10-07 00:07:32 by roticv</div>
   </div>
   <div class="post" id="post-151039">
    <div class="subject"><a href="#post-151039">Mov Var1, eax...some other code...Var1=1 ; Why?</a></div>
    <div class="body">dtoa is decimal to ascii. It takes eax and converts it to ascii in theprime. Output just sends it to the screen. I use those all the time in my programs.</div>
    <div class="meta">Posted on 2004-10-07 00:17:07 by sjaguar13</div>
   </div>
   <div class="post" id="post-151069">
    <div class="subject"><a href="#post-151069">Mov Var1, eax...some other code...Var1=1 ; Why?</a></div>
    <div class="body">I don't understand your code at all. You first make edi point to primearr, then you overwrite it immediately with 2?!<br /><br />one of the things that can occur (nobody can say anything about your code because we can't see your macro's and such, so i can only guess) is that primearr is too small and that onehalf gets overwritten when primearr is full.</div>
    <div class="meta">Posted on 2004-10-07 12:30:53 by lifewire</div>
   </div>
   <div class="post" id="post-151096">
    <div class="subject"><a href="#post-151096">Mov Var1, eax...some other code...Var1=1 ; Why?</a></div>
    <div class="body">Where's the label &quot;incagain&quot;?</div>
    <div class="meta">Posted on 2004-10-07 22:08:11 by AmkG</div>
   </div>
   <div class="post" id="post-151097">
    <div class="subject"><a href="#post-151097">Mov Var1, eax...some other code...Var1=1 ; Why?</a></div>
    <div class="body">That's wasn't the full code.<br /><br />The good news is, I got it to work. Thanks everybody!</div>
    <div class="meta">Posted on 2004-10-07 22:12:51 by sjaguar13</div>
   </div>
  </div>
 </body>
</html>