<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Masm x64 Windows API - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20604" />
  <link rel="prev" href="../?id=20604&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20604">Masm x64 Windows API</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=20604&amp;page=1" style="">&laquo;</a><a href="../?id=20604&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="20604" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-157510">
    <div class="subject"><a href="#post-157510">Masm x64 Windows API</a></div>
    <div class="body">Sometimes I wonder if Microsoft wants to kill off windows... longhorn seems like a bad idea, and XP-64 seems... weird :)</div>
    <div class="meta">Posted on 2005-02-27 03:10:34 by f0dder</div>
   </div>
   <div class="post" id="post-157533">
    <div class="subject"><a href="#post-157533">Masm x64 Windows API</a></div>
    <div class="body"><div class="quote">Legacy Floating-Point Support<br /><br />The MMX and floating-point stack registers (MM0-MM7/ST0-ST7) are volatile.<br />That is, these legacy floating-point stack registers do not have their state <br />preserved across context switches. </div><br />Taken from this page on MSDN <br /><a target="_blank" href="http://msdn.microsoft.com/library/en-us/kmarch/hh/kmarch/64bitAMD_128662cf-fa29-443b-a61e-d9576e48c7f4.xml.asp?frame=true">http://msdn.microsoft.com/library/en-us/kmarch/hh/kmarch/64bitAMD_128662cf-fa29-443b-a61e-d9576e48c7f4.xml.asp?frame=true</a><br /><br />Effectively MMX and x87 are rendered useless in Windows x64.<br /><br /><br />f0dder,<br /><br />I agree with you, it does seem weird. What are they thinking?</div>
    <div class="meta">Posted on 2005-02-27 17:12:27 by Greg</div>
   </div>
   <div class="post" id="post-157538">
    <div class="subject"><a href="#post-157538">Masm x64 Windows API</a></div>
    <div class="body">It is an unusual thing to do unless Microsoft have some inside information that AMD and Intel WANT to remove the old FP capacity and make the SSE2 stuff better. Shame they are not still available as they could be used as extra register storage.<br /><br />It is probably the inherant architecture that is being abandoned as x87 had assumptions back in the 8088 days and something later that was also faster would be useful for truly high speed number crunching.</div>
    <div class="meta">Posted on 2005-02-27 19:23:59 by hutch--</div>
   </div>
   <div class="post" id="post-157541">
    <div class="subject"><a href="#post-157541">Masm x64 Windows API</a></div>
    <div class="body">You could contact Intel, MS and AMD technical questions. That will help them out for popular demmand. I think you can interact with one of them<br />or Mark Larson  8) will make Centaur far better, hehe...<br /><br />I don't I will switch inmediately to 64, however, I will pray for that success. Help me out your prayers for a popular demmand.</div>
    <div class="meta">Posted on 2005-02-27 22:13:28 by Xor Stance</div>
   </div>
   <div class="post" id="post-157550">
    <div class="subject"><a href="#post-157550">Masm x64 Windows API</a></div>
    <div class="body"><div class="quote">Someone really needs to write a good book on programming Windows XP x64 Edition.<br /><br />Here is some documentation on the Windows x64 Calling Convention, it's FASTCALL.<br /><a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/kmarch/hh/kmarch/64bitAMD_6ec00b51-bf75-41bf-8635-caa8653c8bd9.xml.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/kmarch/hh/kmarch/64bitAMD_6ec00b51-bf75-41bf-8635-caa8653c8bd9.xml.asp</a><br /><br />...<br />...<br />Big changes...</div><br /><br /><br />Greg, you are right. A good book will be great :)<br /><br />Thanks a lot for that link. It says exactly what I was looking for. For all of you who have not taken a look, see how the parameters are usually passed onto a function in x64 assembly:<br /><br />-------<br />Example of argument passing 1 ? all integers<br />func1(int a, int b, int c, int d, int e);<br /><br /><br />Arguments a in RCX, b in RDX, c in R8, d in R9, and e pushed on stack.<br />--------<br /><br />Awesome, isnt it? :)</div>
    <div class="meta">Posted on 2005-02-28 02:44:14 by Alorent</div>
   </div>
   <div class="post" id="post-157564">
    <div class="subject"><a href="#post-157564">Masm x64 Windows API</a></div>
    <div class="body">Well, I wasn't aware that a well written sine function in SSE/SSE2 could be faster than the FSIN instruction but it can. Same with cosine, tangent etc. I have seen a couple of different examples now.<br /><br />Nothing to fret about...</div>
    <div class="meta">Posted on 2005-02-28 14:27:46 by Greg</div>
   </div>
   <div class="post" id="post-157565">
    <div class="subject"><a href="#post-157565">Masm x64 Windows API</a></div>
    <div class="body">Greg, your informations are very interesting, thanks :)<br /><br />Could you provide some links about those functions?</div>
    <div class="meta">Posted on 2005-02-28 14:41:53 by MazeGen</div>
   </div>
   <div class="post" id="post-157567">
    <div class="subject"><a href="#post-157567">Masm x64 Windows API</a></div>
    <div class="body"><div class="quote">Nothing to fret about...</div><br />I think one issue is precision. The FPU supports single-precision (32-bit), double-precision (64-bit) and double-extended precision (80-bit) data types. However, SSE only supports the first two.</div>
    <div class="meta">Posted on 2005-02-28 15:24:01 by death</div>
   </div>
   <div class="post" id="post-157569">
    <div class="subject"><a href="#post-157569">Masm x64 Windows API</a></div>
    <div class="body">MazeGen,<br /><br />One is the Intel Approximate Math Library, it includes source code.<br />It's free and it's available here:<br /><a target="_blank" href="http://developer.intel.com/design/Pentium4/devtools/">http://developer.intel.com/design/Pentium4/devtools/</a><br /><br />Intel has another library called the Vector Math Library that is part of<br />the Math Kernel Library. It has better accuracy than the one above, but<br />it's not free:<br /><a target="_blank" href="http://www.intel.com/software/products/mkl/features/vml.htm">http://www.intel.com/software/products/mkl/features/vml.htm</a><br /><br /><br />death,<br /><br />You are right the best precision with SSE/SSE2 is double-precision, <br />64-bit, or REAL8. I think it's adequate though.</div>
    <div class="meta">Posted on 2005-02-28 15:45:58 by Greg</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=20604&amp;page=1" style="">&laquo;</a><a href="../?id=20604&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="20604" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>