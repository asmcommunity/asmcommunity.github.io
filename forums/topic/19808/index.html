<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Ownerdraw Menu - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19808" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19808">Ownerdraw Menu</a></p>
   <div class="post" id="post-152224">
    <div class="subject"><a href="#post-152224">Ownerdraw Menu</a></div>
    <div class="body">I'm creating an ownerdraw menu, but it is not working.. Does anyone know where are the mistakes? I'm getting crazy trying to find them..<br /><br />Thanks</div>
    <div class="meta">Posted on 2004-11-02 22:35:42 by Marginais</div>
   </div>
   <div class="post" id="post-152326">
    <div class="subject"><a href="#post-152326">Ownerdraw Menu</a></div>
    <div class="body">hi<br />could u give us some more input where ur problem is <br />(i can actually only see it?s not even starting here)<br />also u need to set the OWNERDRAWN flag (didn't see that so far)<br />also u missed in your message loop IsDialogMessage<br />seems all in all pretty incomplete so far to me</div>
    <div class="meta">Posted on 2004-11-04 06:00:33 by Allanon</div>
   </div>
   <div class="post" id="post-152469">
    <div class="subject"><a href="#post-152469">Ownerdraw Menu</a></div>
    <div class="body">Hi<br /><br />I made some changes in the code to simplify and turn it smaller. I have already set the OWNERDRAWN flag in the resource file and I think it is ok. Take a look...Thanks</div>
    <div class="meta">Posted on 2004-11-06 16:06:12 by Marginais</div>
   </div>
   <div class="post" id="post-152511">
    <div class="subject"><a href="#post-152511">Ownerdraw Menu</a></div>
    <div class="body">since u use tasm i can?t really test it <br />but actually when u run into WM_DRAWITEM u don't check CtlType of the Drawitemstruct so u might do a check before if it?s really a menu<br /><pre><code><br />MOV	EDI, &#91;WND_lParam&#93;<br /><br />TEST DWORD PTR &#91;EDI + DRAWITEMSTRUCT.CtlType&#93;,ODT_MENU<br />JNE @@1<br />TEST DWORD PTR &#91;EDI + DRAWITEMSTRUCT.itemAction&#93;, ODA_SELECT<br />JE @@1<br /><br /></code></pre></div>
    <div class="meta">Posted on 2004-11-07 13:56:31 by Allanon</div>
   </div>
   <div class="post" id="post-152690">
    <div class="subject"><a href="#post-152690">Ownerdraw Menu</a></div>
    <div class="body">fmz, I have already figured everything out and it's working very well... thank you for helping... vlw</div>
    <div class="meta">Posted on 2004-11-10 18:03:21 by Marginais</div>
   </div>
  </div>
 </body>
</html>