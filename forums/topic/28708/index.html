<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Designing the Perfect Manager Class (OA32) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28708" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28708">Designing the Perfect Manager Class (OA32)</a></p>
   <div class="post" id="post-202808">
    <div class="subject"><a href="#post-202808">Designing the Perfect Manager Class (OA32)</a></div>
    <div class="body"><br />This is meant to be some kind of tutorial.<br />Oh well, here goes.<br /><br />To solve any problem, you must first define it.<br />In order to design the best possible Manager class, we need to define what a Manager class is.<br />I am going to use a ParticleSystem to help you to better understand my meaning, but we&#039;re really designing a more generic &#039;BaseClass&#039; from which you can derive ParticleSystems and much more.<br /><br />Imagine that a ParticleSystem is a collection of Particle objects which all share a common Texture.<br />If we have 50,000 particles, we do not wish to load the texture 50,000 times, do we?<br />No - the ParticleSystem class would ensure that all the Particles it Manages share ONE loaded copy of the Texture resource.<br /><br />So we might start defining a ParticleSystem class as such:<br /><pre><code>Object ParticleSystem, ParticleSystemID, Collection<br />DefineVariable pName,LPSTR,NULL<br />DefineVariablt pTex9,Pointer,NULL<br /></code></pre><br /><br />We can see that the ParticleSystem class derives from the Collection class, so we have access to all those methods such as Insert and ItemAt. Its a Manager class, it manages a collection of Particles.<br /><br />We might also begin defining the Particle class as such:<br /><pre><code>Object Particle, ParticleID, Primer<br />DefineVariable vPosition,D3DXVECTOR3,{&lt;&gt;}<br />DefineVariable vVelocity,D3DXVECTOR3,{&lt;&gt;}<br /></code></pre><br /><br />Great, you might think.. but it sucks.<br />Imagine that we have a fire that is ejecting big glowing coals.<br />They bounce on the floor, breaking up into smaller sparks.<br />Similarly, these smaller sparks break up on the floor into even smaller sparks.<br />To make this happen, each Particle must ALSO be a ParticleSystem.<br />IE, each Managed object must be a Manager to SubObjects.<br />We no longer wish to differentiate between Manager and Managed.<br /><br />Wouldn&#039;t it be nice if our Manager could be derived from ITSELF?<br /><pre><code>Object ParticleSystem, ParticleSystemID, ParticleSystem</code></pre><br /><br />Firstly, that won&#039;t work - we can&#039;t inherit ourself.<br />Secondly, even if we could, we&#039;re no longer inheriting from Collection, so its a broken concept.<br />So how can we derive from ourself??<br />Let&#039;s stop talking about ParticleSystems for a moment, since that very specific example was only meant to illustrate a very abstract but common situation.<br />Take a look at this:<br /><br /><pre><code>Object Manager, ManagerID, Collection<br />...<br />...<br />...<br /><br />Object Managed, ManagedID, Manager<br /></code></pre><br /><br />Manager is a BASECLASS which we don&#039;t really use directly.. we inherit its functionality in a Derived class.. and now it gets interesting.<br />The Managed class is derived from Manager.<br />Let&#039;s think about this.<br />A Managed object, stored in a parent Manager object, is also a Manager of children.<br />It took two classes (one base, one derived) to implement the mindboggling &#039;derived from self&#039; hierarchical management concept, but we really can forget about the base object, and just worry about Managed and the classes we derive from it.<br /><br />Now look at this:<br /><pre><code><br />Object Particle, ParticleID, Managed<br /></code></pre><br /><br />Every Particle we create has the capability of storing SubParticles.<br />Each SubParticle can store its own SubParticles, and so on.<br /><br />Now we can begin to define the generic Manager and Managed classes, and some specific example classes which derive from Managed.<br /><br />Please let me know if you loved or hated this post :)<br /></div>
    <div class="meta">Posted on 2007-09-01 03:07:28 by Homer</div>
   </div>
   <div class="post" id="post-202812">
    <div class="subject"><a href="#post-202812">Re: Designing the Perfect Manager Class (OA32)</a></div>
    <div class="body">Pretty good mate. You have a syntax error in DefineVariablt pTex9,Pointer,NULL. Just a side note, if you step outside the framework (OA32) you can inherit from yourself. But it would be irrelevant to this topic as, like you stated, you&#039;d loose Collections. Well, that is unless you made a &quot;first time&quot; exception which made the first class inherit Collections, then subsequent inherited classes skip over it. But in doing that you basically achieve the same thing as what you are doing here only with an unnoticeablely smaller executable and a lot of time wasted. :p</div>
    <div class="meta">Posted on 2007-09-01 11:20:46 by Synfire</div>
   </div>
  </div>
 </body>
</html>