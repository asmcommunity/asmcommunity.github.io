<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Windows 2000/XP minimum PE. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3402" />
  <link rel="prev" href="../?id=3402&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3402">Windows 2000/XP minimum PE.</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=3402&amp;page=1" style="">&laquo;</a><a href="../?id=3402&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="3402" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-27009">
    <div class="subject"><a href="#post-27009">Windows 2000/XP minimum PE.</a></div>
    <div class="body">I imagine that if there is no application program loader for 32 bit support with NE/LE formats in 32 bit windows, then they are not supported in that manner.<br /><br />It is correct to say that PE is the native format for 32 bit windows and while NE and LE will run in the 16 bit subsystems, they will not do the same things.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-03 15:38:30 by hutch--</div>
   </div>
   <div class="post" id="post-27019">
    <div class="subject"><a href="#post-27019">Windows 2000/XP minimum PE.</a></div>
    <div class="body"><div class="quote"><br />I imagine that if there is no application program loader for 32 bit support with<br />NE/LE formats in 32 bit windows, then they are not supported in that manner.<br /></div><br />I didn't say they were.<br /><br /><div class="quote"><br />It is correct to say that PE is the native format for 32 bit windows and while<br />NE and LE will run in the 16 bit subsystems, they will not do the same things.<br /></div><br />I didn't say that win32 has support for LE files... win9x does, but only<br />as VXDs (and these can contain both 16 and 32bit code). What I reacted to<br />was:<br /><br /><div class="quote"><br />do not have the capacity to handle 32 bit flat memory model code. <br /></div><br />Which *is* wrong, as the 32bit dos extended LE files from watcom<br />indeed does run 32bit flat memory model. That's also the reason for<br />the dos extender name, dos4gw.exe ... 4g as in 4gb (flat) address<br />space, w as watcom.<br /><br />Peace.</div>
    <div class="meta">Posted on 2002-03-03 16:12:16 by f0dder</div>
   </div>
   <div class="post" id="post-27022">
    <div class="subject"><a href="#post-27022">Windows 2000/XP minimum PE.</a></div>
    <div class="body">I think there is only one solution, send a letter to Bill Gates and Steve Ballmer saying,<br /><br />&quot;Hey guys, you have it all wrong again, I WANNA run 32 bit flat memory model LE and NE code in 32 bit windows and this @#*&amp;%^ crapheap of an OS will not do it.&quot;<br /><br />I guess that if all the complaints about windows were printed on paper and put in a pile, we would not need to send man to the moon, they could just climb the paper mountain. :tongue: <br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-03 16:21:02 by hutch--</div>
   </div>
   <div class="post" id="post-27025">
    <div class="subject"><a href="#post-27025">Windows 2000/XP minimum PE.</a></div>
    <div class="body">I weren't complaining, just stating the LE in fact does have the<br />capacity to contain 32bit flat code. PE is a fine format for win32<br />anyway.<br /><br />Oh and btw if I want to, I can run 32bit flat LEs under win32...<br />writing a loader for the format is not too bad.</div>
    <div class="meta">Posted on 2002-03-03 16:26:09 by f0dder</div>
   </div>
   <div class="post" id="post-27031">
    <div class="subject"><a href="#post-27031">Windows 2000/XP minimum PE.</a></div>
    <div class="body"><div class="quote"><br />With the ms linker you can use /MERGE to collapse all the sections.<br />Don't forget using /SECTION:&lt;whatever&gt;,rwe to make your section<br />read/write/execute. </div><br /><br />Thx f0dder, that was helpful. Now I got it 1024 bytes.. do you think I can make it smaller, maybe tweaking directly the PE headers? (I know it will be &gt;512 bytes anyway).<br /><br />Greets,<br />Maverick</div>
    <div class="meta">Posted on 2002-03-03 16:42:27 by Maverick</div>
   </div>
   <div class="post" id="post-27067">
    <div class="subject"><a href="#post-27067">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Maverick,<br /><br />Unless you need to have writable data in a test piece like this, avoiding the .DATA section will help to keep the size down. You can write read only string data to the code section easily and if you want to write to it, use the linker options that f0dder mentioned.<br /><br />f0dder,<br /><br />======<br />peace<br />======<br /><br />Sure but a &quot;piece on the side&quot; is more fun, especially when its a redhead. :tongue: <br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-03 20:04:29 by hutch--</div>
   </div>
   <div class="post" id="post-27070">
    <div class="subject"><a href="#post-27070">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Here is a small WinXP EXE - 932 bytes by upi/throb<br />The source of the code is the Hugi Disk Mag 24</div>
    <div class="meta">Posted on 2002-03-03 20:12:53 by bitRAKE</div>
   </div>
   <div class="post" id="post-27110">
    <div class="subject"><a href="#post-27110">Windows 2000/XP minimum PE.</a></div>
    <div class="body">RAKEY: Thx pal, that's just what I needed.<br /><br />Hutch: I sure already knew that, thanks anyway.<br /><br />Greets,<br />Maverick</div>
    <div class="meta">Posted on 2002-03-04 03:56:37 by Maverick</div>
   </div>
   <div class="post" id="post-27112">
    <div class="subject"><a href="#post-27112">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Fodder,<br />   If you can simply write a loader to use LE file under win32, then you could just as easily whip up a custom minimalist file format, write a converter and a loader, and the entire hoopla over the minimun executable size would be all that much more wasted keystrokes.  Heck, while we're at it, I demand we all adopt a win32 .com file format (no...not COMponent...)   :)</div>
    <div class="meta">Posted on 2002-03-04 04:19:19 by Canite</div>
   </div>
   <div class="post" id="post-27116">
    <div class="subject"><a href="#post-27116">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Maverick,<br /><br />============<br />Hutch: I sure already knew that, thanks anyway.<br />============<br /><br />Which idea, avoiding the .DATA section or the virtue of redheads ? :tongue: <br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-04 04:55:32 by hutch--</div>
   </div>
   <div class="post" id="post-27117">
    <div class="subject"><a href="#post-27117">Windows 2000/XP minimum PE.</a></div>
    <div class="body">The former ;)<br /><br />Greets,<br />Maverick</div>
    <div class="meta">Posted on 2002-03-04 05:19:54 by Maverick</div>
   </div>
   <div class="post" id="post-27151">
    <div class="subject"><a href="#post-27151">Windows 2000/XP minimum PE.</a></div>
    <div class="body"><div class="quote"><br />If you can simply write a loader to use LE file under win32, then you could just as easily<br />whip up a custom minimalist file format, write a converter and a loader, and the entire<br />hoopla over the minimun executable size would be all that much more wasted keystrokes.<br /></div><br />Sure, but why bother? PE files can be smaller than 4k, which is the usual minimum cluster<br />size. PE files usually have filealign of 512 or 4096, so again there wont be wasted space<br />this way. It's also a pretty flexible format... so while it's quite possible to write your<br />own file format, and not too hard, I haven't got a reason to do so :).<br /><br /><div class="quote"><br />Heck, while we're at it, I demand we all adopt a win32 .com file format (no...not COMponent...)<br /></div><br />What would the use of this be? How would you handle things like DLLs? I suppose it could<br />be useful for very quickly testing out &quot;stuff&quot;, but... it's not like it's a lot of work<br />to use a .asm template instead ;)</div>
    <div class="meta">Posted on 2002-03-04 10:25:27 by f0dder</div>
   </div>
   <div class="post" id="post-27261">
    <div class="subject"><a href="#post-27261">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Hi All,<br /><br />From examining some PE EXE files, I got the impression that when an EXE is loaded in Windows, also the Dos stub gets loaded. Is this true?<br /><br />I thought so because when you stub a big Dos EXE then all the RVA's, code entry point, etc.. of the PE will be incremented/translated of the same amount of the Dos EXE size.<br /><br />Can anybody confirm on this, please?<br /><br />Greets,<br />Maverick</div>
    <div class="meta">Posted on 2002-03-05 04:15:39 by Maverick</div>
   </div>
   <div class="post" id="post-27262">
    <div class="subject"><a href="#post-27262">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Maverick,<br /><br />PE is a bit sloppy here, it loads the dos MZ header, PE header and the section data, even though it only gets used once. You can actually write data to the address specified in hInstance and overwrite it if you like.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-03-05 04:20:45 by hutch--</div>
   </div>
   <div class="post" id="post-27263">
    <div class="subject"><a href="#post-27263">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Hi Hutch,<br />But other than the Dos MZ header, does it &quot;load&quot; also the Dos code itself?<br /><br />Greets,<br />Mav</div>
    <div class="meta">Posted on 2002-03-05 04:23:19 by Maverick</div>
   </div>
   <div class="post" id="post-27272">
    <div class="subject"><a href="#post-27272">Windows 2000/XP minimum PE.</a></div>
    <div class="body">Maverick, the PE loader works via File Mapping. While the entire<br />exe is mapped, only the used parts will be loaded. Yeah, the entire<br />MZ ought to be available in memory space.</div>
    <div class="meta">Posted on 2002-03-05 06:10:28 by f0dder</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=3402&amp;page=1" style="">&laquo;</a><a href="../?id=3402&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="3402" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>