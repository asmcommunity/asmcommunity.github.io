<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Some ideas Math2 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2093" />
    <link rel="next" href="../?id=2093&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=2093">Some ideas Math2</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=2093&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=2093&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="2093" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=2093&amp;page=2">&gt;</a><a href="../?id=2093&amp;page=2">&raquo;</a></form>   <div class="post" id="post-13322">
    <div class="subject"><a href="#post-13322">Some ideas Math2</a></div>
    <div class="body">This may be used in masking and some algos related to number systems (for ex. in crypting)<br />Any odd number may be represeted by difference of two squares like:<br />N = X^2 - Y^2<br />we can use X = (N+1)/2 and Y=X-1 ?Svin :)<br />so we can know those X and Y by three clocks in assembly<br />eax = N<br />	lea ecx,<br />	shr ecx,1 ;ecx = X<br />	lea ebx, ;ebx = Y eax = ecx^2 - ebx^2<br />Now if we to know values of ecx^2 and edx^2 we can perform just one mul not two<br />;if edx &lt; 10000h<br />	mov eax,ebx<br />	mul eax	;eax = ebx^2<br />	lea edx,[1] ;edx = ecx^2</div>
    <div class="meta">Posted on 2001-11-28 02:38:50 by The Svin</div>
   </div>
   <div class="post" id="post-14574">
    <div class="subject"><a href="#post-14574">New ideas</a></div>
    <div class="body">Maybe this can be used also:<br /><br />N=X^3 - Y^3       what equals: (X-Y)(X^2 + XY + Y^2)<br /><br />You need a buffer to store N, and of course X and Y. <br />The code would be:<br /><br />mov eax, X   <br />mov ebx, Y<br />push eax<br />sub eax, ebx       ;X - Y<br />mov N1, eax        ;store in N1<br />pop eax               ;eax has lost its value<br />shl eax,1             ;X^2<br />mov N2, eax        ;save in N2<br />shr eax,1             ;store X into eax <br />mul ebx               ; XY<br />mov N3, eax        ;save in N3<br />shl ebx,1             ; Y^2<br />mov N4, ebx        ;save in N4<br />add N2, N3          ;X^2 + XY + Y^2)<br />add N2, N4          ;<br />mov ebx, N2        ;save in ebx<br />mov eax, N1        ;eax is (X - Y)<br />mul ebx               ;(X-Y)(X^2 + XY + Y^2)<br />mov N, eax          ;save into N</div>
    <div class="meta">Posted on 2001-12-10 20:06:07 by CodeLover</div>
   </div>
   <div class="post" id="post-14754">
    <div class="subject"><a href="#post-14754">Vector problems</a></div>
    <div class="body">I am having now a problem with vectors. Today a friend told me that he needed to calculate magnitude of vectors given angles and magnitude of the resultant. This is the example he showed me:<br /><br />&quot;There are two vectors. They represent strenghts. They each make a 18 grades angle with the axis of the resultant vector, that has a magnitude of 6000. I need to find the magnitude of the 18 grades vectors&quot;. It would be very good if you post some help, he needs the algorithm (i wont tell him i discovered it, i will give you the credits ;). <br /><br />Thanks</div>
    <div class="meta">Posted on 2001-12-12 16:18:32 by CodeLover</div>
   </div>
   <div class="post" id="post-14756">
    <div class="subject"><a href="#post-14756">Some ideas Math2</a></div>
    <div class="body">Maybe this illustrates the problem.</div>
    <div class="meta">Posted on 2001-12-12 16:29:01 by CodeLover</div>
   </div>
   <div class="post" id="post-14771">
    <div class="subject"><a href="#post-14771">Some ideas Math2</a></div>
    <div class="body"><strong>The Svin</strong>, that is a nice piece of code.  :)<br />I would love a class where you were the teacher!<br />Let me pull up a chair...<br /><br /><strong>CodeLover</strong>, <u>shl eax,2</u> does not equal (eax)^2.<br />Unless eax = 2.</div>
    <div class="meta">Posted on 2001-12-12 22:42:50 by bitRAKE</div>
   </div>
   <div class="post" id="post-14779">
    <div class="subject"><a href="#post-14779">Some ideas Math2</a></div>
    <div class="body">CodeLover,<br /><br />Each of the vectors can be broken down into an x<br />component and a y component.  Using your diagram,<br />the x-axis is horizontal the y-axis is vertical, <br />and the two vectors appear to be 18 degrees above<br />and 18 degrees below the x-axis.  And if the two <br />vectors are of equal magnitude then the problem <br />is just a matter of finding the magnitude so that<br />the x component of each vector is 3000, so that<br />when the x component of both vectors are added <br />together the resulting vector lies on the x-axis <br />with  a magnitude of 6000; the sum of the two <br />vectors.  Don't confuse my x with your <br />X(magnitude).<br /><br />The x component of each vector would be:<br />vector.x = X( cos( 18 ))<br />and<br />6000 = 2( vector.x )= 2( X( cos( 18 ))) = 6000<br />solve for X<br /><br />hope this helps and that I haven't made a stupid<br />error!<br /><br />farrier</div>
    <div class="meta">Posted on 2001-12-13 01:00:56 by farrier</div>
   </div>
   <div class="post" id="post-14965">
    <div class="subject"><a href="#post-14965">Some ideas Math2</a></div>
    <div class="body">bitRAKE, i don't see where i put &quot;shl eax,2&quot;, i wrote always shl eax,1. <br /><br />Thank you farrier, what i've done was seeing it as a triangle, with one side 18 and the other 6000. If you watch at the graph, the x axis works well as 6000,  the magnitude of one of the vectors is the hypotenuse, and the angle is 18. So, as the cosine of an angle is Adj/hyp:<br /><br />Cos (18)=6000/magnitude, so:<br /><br />6000/cos (18)=magnitude, what is, approximately:<br /><br />magnitude= 6308,77334543, what makes sense.<br /><br />Thanks you farrier, your help enlightened my problem.</div>
    <div class="meta">Posted on 2001-12-14 12:17:38 by CodeLover</div>
   </div>
   <div class="post" id="post-14967">
    <div class="subject"><a href="#post-14967">Some ideas Math2</a></div>
    <div class="body">Sorry, typo.  Can you explain this line for me?<br /><br />shl eax,1 ;X^2</div>
    <div class="meta">Posted on 2001-12-14 13:03:26 by bitRAKE</div>
   </div>
   <div class="post" id="post-14996">
    <div class="subject"><a href="#post-14996">Some ideas Math2</a></div>
    <div class="body">Sorry bitRAKE, i made a stupid mistake :). Anyway, i have never written &quot;shl eax,2&quot; ;).<br /><br />You were right friend, i should have written the piece of code like this:<br /><br />mov eax, X <br />mov ebx, Y <br />push eax <br />sub eax, ebx ;X - Y <br />mov N1, eax ;store in N1 <br />pop eax ;eax has lost its value <br />push eax<br />mul eax  ;X^2 <br />mov N2, eax ;save in N2 <br />pop eax ;store X into eax <br />mul ebx ; XY <br />mov N3, eax ;save in N3 <br />mov eax,ebx ;<br />mul eax ; Y^2 <br />mov N4, eax ;save in N4 <br />add N2, N3 ;X^2 + XY + Y^2) <br />add N2, N4 ; <br />mov ebx, N2 ;save in ebx <br />mov eax, N1 ;eax is (X - Y) <br />mul ebx ;(X-Y)(X^2 + XY + Y^2) <br />mov N, eax ;save into N</div>
    <div class="meta">Posted on 2001-12-14 18:51:52 by CodeLover</div>
   </div>
   <div class="post" id="post-15000">
    <div class="subject"><a href="#post-15000">JUST A THOUGHT</a></div>
    <div class="body">N=X^3 - Y^3 what equals: (X-Y)(X^2 + XY + Y^2) <br /><br />(X-Y)(X^2 + XY + Y^2)  = (x-y)[(x+y)^2-xy]<br /><br />mov ebx,x<br />mov ecx,y<br />mov eax,ebx<br />sub ebx,ecx ;x-y<br />push eax<br />mul ecx ;xy<br />mov edx,ecx ;save x <br />mov ecx,eax ;  ecx=xy <br />pop eax ; get y<br />add eax,edx ;x+y<br />mul eax<br />sub eax,ecx ;(x+y)^2-xy<br />mul ebx<br />mov N,eax ; <br /><br />bye<br />eko</div>
    <div class="meta">Posted on 2001-12-14 20:11:51 by eko</div>
   </div>
   <div class="post" id="post-15002">
    <div class="subject"><a href="#post-15002">Some ideas Math2</a></div>
    <div class="body">This can be used also<br /><br /><br />mov eax,X<br />push eax<br />mul eax<br />pop ebx<br />mul ebx<br />mov N1, eax<br />mov eax, Y<br />push eax<br />mul eax<br />pop ebx<br />mul ebx<br />mov ebx, N1<br />sub ebx,eax<br />mov N, ebx</div>
    <div class="meta">Posted on 2001-12-14 21:04:56 by CodeLover</div>
   </div>
   <div class="post" id="post-15010">
    <div class="subject"><a href="#post-15010">Some ideas Math2</a></div>
    <div class="body">How about this?:<pre><code>	mov ebx,x<br />	mov ecx,y<br />	mov eax,ebx		; x<br />	sub ebx,ecx		; ebx=x-y<br />	mul ecx			; xy<br />	add ecx,x		; x+y<br />	xchg ecx,eax		; eax=&#40;x+y&#41; ; ecx=xy<br />	mul eax<br />	sub eax,ecx		; &#40;x+y&#41;^2-xy<br />	mul ebx<br />	mov N,eax</code></pre>Still only three <strong>mul</strong>.</div>
    <div class="meta">Posted on 2001-12-15 01:20:39 by bitRAKE</div>
   </div>
   <div class="post" id="post-15034">
    <div class="subject"><a href="#post-15034">Some ideas Math2</a></div>
    <div class="body">bitRake: xchg ecx,eax nice one . i havnt thought about it <br /><br />codelover: your code is still with 4 mul <br /><br /><br />bye<br />eko:alright:</div>
    <div class="meta">Posted on 2001-12-15 06:59:35 by eko</div>
   </div>
   <div class="post" id="post-15251">
    <div class="subject"><a href="#post-15251">Some ideas Math2</a></div>
    <div class="body">I would replace 2 commented instructions by these 3.<br />They take 2 clocks instead of 5 by xchg r,r and add r,m<br />Apart from this your code is very well organized and eko gave IMHO the best<br />possible formula transformation, though IMHO FPU fits better for long equations:<br />	mov ebx,x<br />	mov ecx,y<br />	mov eax,ebx		; x<br />	mul ecx			; xy<br />	push eax			;!<br />	sub ebx,ecx		; ebx=x-y<br /><br />	lea eax, 	;!<br />;	add ecx,x		; x+y<br />;	xchg ecx,eax		; eax=(x+y) ; ecx=xy<br />	pop ecx			;!<br />	mul eax<br />	sub eax,ecx		; (x+y)^2-xy<br />	mul ebx<br />	mov N,eax</div>
    <div class="meta">Posted on 2001-12-18 00:24:04 by The Svin</div>
   </div>
   <div class="post" id="post-16304">
    <div class="subject"><a href="#post-16304">Some ideas Math2</a></div>
    <div class="body">; ebx-x<br />; ecx-y<br />1   lea  eax,  ; a=x+y<br />1   neg  ecx            ; c=-y<br />10 imul ebx            ; a=(x+y)*x<br />1   lea  edi,  ; i=x-y<br />11 imul ecx,ecx        ; s=y*y<br />1   add  eax,ecx        ; a=(x+y)*x+y*y<br />10  imul edi            ; a=((x+y)*x+y*y)*(x-y)<br />=35</div>
    <div class="meta">Posted on 2001-12-27 02:38:00 by The Svin</div>
   </div>
   <div class="post" id="post-16331">
    <div class="subject"><a href="#post-16331">Some ideas Math2</a></div>
    <div class="body">ebx=x <br />eax=y<br /><pre><code> lea edx,&#91;ebx+eax&#93;;d=x+y <br />           neg edx = d=-x-y<br />           imul ebx;a=xy<br />           lea ebx,&#91;edx+2*ebx&#93;;b=-y-x+2x=x-y<br />           imul edx,edx ; d =&#40;x+y&#41;^2<br />           sub edx, eax;d=&#40;x+y&#41;^2-xy<br />           imul edx,ebx ; &#40;x-y&#41;&#40;&#40;x+y&#41;^2-xy&#41; </code></pre><br /><br />^ result in edx <br />or instead the last two lines<br /><br /> sub eax,edx (xy-(x+y)^2)<br /> imul ebx,-1 ; result in eax (x-y)[-1(xy-(x+y)^2)]<br /><br />3 registers <br />dont know how much clocks</div>
    <div class="meta">Posted on 2001-12-27 07:09:29 by eko</div>
   </div>
   <div class="post" id="post-16334">
    <div class="subject"><a href="#post-16334">Some ideas Math2</a></div>
    <div class="body">How could you optimize not knowing clock table :)<br />But in the case it doesn't matter - use what I wrote as clock referrence.<br />The thing is that if you use imul reg,reg (additional parameter)<br />it result in one extra byte for prefix and one extra clock(11 instead of 10) so it will be 36 clocks instead of 35 in my version.<br />Nevertheless I enjoyed the formula transformation. It's good and nessesery training.<br />Need to be done on every day basics.<br />Most of uneffective code is written 'cause people don't care to calculate or don't use even basic (5th-6th form) arithmetics.<br /><br />Unfortunatly I just don't have talent to show it :(<br />But with exchaging basic math solutions as we do now may be it would be a little bit better :)</div>
    <div class="meta">Posted on 2001-12-27 07:24:55 by The Svin</div>
   </div>
   <div class="post" id="post-16336">
    <div class="subject"><a href="#post-16336">Some ideas Math2</a></div>
    <div class="body">hii .. <br /><br />about the clock table .. i know the basic things . that lea is 1 clock the same for  add,sub,and and etc.. <br /><br />but there are things i dont understand like :<br />you wrote imul with only one parameter 10 clock  when i look at help files with clock table . imul  reg 12-42 clocks on 486 ........<br />how do  i know how much clocks  mul takes ?<br /><br /><br /><br />i realy like math . and I like to get into the little things ( thats way i code in asm ) but i have alot to learn (i'm in the 11 grade )<br /><br /><br />bye<br /><br />eko</div>
    <div class="meta">Posted on 2001-12-27 07:57:29 by eko</div>
   </div>
   <div class="post" id="post-16436">
    <div class="subject"><a href="#post-16436">Some ideas Math2</a></div>
    <div class="body">One of places where you can find clock tables is Anger.hlp which,<br />I belive is included in MASM32.<br />Despite of difference in clocking particular instructions the main<br />idea of my previous post was that <br />imul reg,reg<br />is always slower than <br />imul reg<br />and longer.<br />I'm glad that we are both agree on importance of math knoulidge and training in asm programming.<br />Couple thoughts:<br />1. Most of the beginners here know FPU badly.<br />And to know it better there are always three general methods:<br />- To see examples of particular equitions or other formulas realized in asm<br />- To read explonations and comments in those examples<br />- Try to make realization of math equtions yourselfe.<br /><br />The most productive way is when complexity of tasks and examples<br />grows slow but at the number of exersizes to be done and examples to be learnt is quite big. (At least 15-20 a day)<br /><br />It makes it easier even for very beginner to get used to the tasks and feel in making math as a fish in the water.<br /><br />What do you think if we start giving ourself right here exersizes (starting with very basic arithmetics) and try to do exersizes of each other in both fpu and interger. And include comments and <br />explanations?</div>
    <div class="meta">Posted on 2001-12-27 22:57:14 by The Svin</div>
   </div>
   <div class="post" id="post-16497">
    <div class="subject"><a href="#post-16497">Some ideas Math2</a></div>
    <div class="body"><div class="quote">What do you think if we start giving ourself right here exersizes (starting with very basic arithmetics) and try to do exersizes of each other in both fpu and interger. And include comments and </div> <br /><br />yeah i realy like the idea ! and my fpu knowlege is bad :( so exercise will be good for me <br /><br />here is a realy simple  start(maybe continue) of integer math <br />(i dont have any idea for other equation maybe you can choose one)<br />n=x^2-y^2 finding n in the shortest way<br /><br />(x-y)(X+Y)<br /><br />eax -x <br />ebx -y<br /><br />lea ecx, ;c=x+y <br />sub eax,ebx;a =x-y ;     <br />mul ecx  ; a =(x-y)(X+Y) <br /><br />i guess this one  too easy ,nothing comes into my mind<br /><br />bye<br /><br />eko</div>
    <div class="meta">Posted on 2001-12-28 12:57:43 by eko</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=2093&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=2093&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="2093" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=2093&amp;page=2">&gt;</a><a href="../?id=2093&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>