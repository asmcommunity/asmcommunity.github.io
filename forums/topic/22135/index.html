<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Why EMMS? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22135" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22135">Why EMMS?</a></p>
   <div class="post" id="post-166615">
    <div class="subject"><a href="#post-166615">Why EMMS?</a></div>
    <div class="body">I have a program which performs MMX calculations 24/7 doing some serious processing on a Windows XP machine. It never uses FP. As I understand it, Windows saves and restores the FP state between processes (I can&#39;t remember with what FP instructions), so that when it interrupts my program to perform perhaps an FPU task in another program, it returns to mine exactly with the MMX data it left, and vice versa. When my program closes, it does not execute EMMS.<br /><br />Does it need to?<br /><br />And why?</div>
    <div class="meta">Posted on 2005-10-03 11:03:35 by V Coder</div>
   </div>
   <div class="post" id="post-166624">
    <div class="subject"><a href="#post-166624">Re: Why EMMS?</a></div>
    <div class="body">You&#39;ve already answered yourself :)<br /><br /><div class="quote">As I understand it, Windows saves and restores the FP state between processes (I can&#39;t remember with what FP instructions), so that when it interrupts my program to perform perhaps an FPU task in another program, it returns to mine exactly with the MMX data it left, and vice versa.</div></div>
    <div class="meta">Posted on 2005-10-03 13:26:53 by ti_mo_n</div>
   </div>
   <div class="post" id="post-166630">
    <div class="subject"><a href="#post-166630">Re: Why EMMS?</a></div>
    <div class="body">EMMS is used when mixing MMX and FPU code. Other than that it&#39;s useless.<br /><br />Cleaning up is needed because the MMX and FPU registers are actually aliases to the same memory space within the processor. So if you&#39;ve been storing data in the MMX registers you may not want the FPU to use it, since that may trigger exceptions.</div>
    <div class="meta">Posted on 2005-10-03 14:28:33 by QvasiModo</div>
   </div>
  </div>
 </body>
</html>