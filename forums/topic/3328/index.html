<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>listview - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3328" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3328">listview</a></p>
   <div class="post" id="post-22027">
    <div class="subject"><a href="#post-22027">listview</a></div>
    <div class="body">hi<br /><br />does anybody know how can i show popupmenu when specifed item is right-clicked in my listview???<br />what i want to do is to show a popup-menu using TrackPopupMenu when i'll click on an item that has specifed name, and if that names doesnt match the menu will not pupup.<br /><br />thanx for any reply<br /><br />cya</div>
    <div class="meta">Posted on 2002-01-30 15:45:40 by NEMO</div>
   </div>
   <div class="post" id="post-22036">
    <div class="subject"><a href="#post-22036">listview</a></div>
    <div class="body">You have to subclass the listview and handle the WM_CONTEXTMENU message. You can also send to the listview a LVM_HITTEST message in order to get the clicked element and show different context menus.</div>
    <div class="meta">Posted on 2002-01-30 16:15:01 by LuHa</div>
   </div>
   <div class="post" id="post-22147">
    <div class="subject"><a href="#post-22147">listview</a></div>
    <div class="body">thanx man!!!:grin: <br />now it works!!<br /><br />cya</div>
    <div class="meta">Posted on 2002-01-31 09:33:48 by NEMO</div>
   </div>
   <div class="post" id="post-22162">
    <div class="subject"><a href="#post-22162">listview</a></div>
    <div class="body">Since you have already subclassed your listview procedure, maybe it is nice to show a message like &quot;Right click to show menu&quot; if the listview is empty, like outlook express does. It is simple: handle also WM_PAINT message, call the default listview procedure, check for the number of items and if it is 0 get the listview rect, resize it in order to avoid painting over the header control and finally draw your text.</div>
    <div class="meta">Posted on 2002-01-31 12:06:04 by LuHa</div>
   </div>
   <div class="post" id="post-22257">
    <div class="subject"><a href="#post-22257">listview</a></div>
    <div class="body">Hi,<br /><br />I'm doing the same thing!! But instead of subclassing I just used the WM_NOTIFY message and the use of the NMHDR structure...<br /><br />It works and all but trying to get my edit menu to popup in the place the user clicked is giving me tons of trouble... I can't seem to extract the proper X, Y values from the lParam :eek: <br /><br />Anyways laterz,<br />James</div>
    <div class="meta">Posted on 2002-01-31 22:39:38 by JamesE</div>
   </div>
   <div class="post" id="post-22327">
    <div class="subject"><a href="#post-22327">listview</a></div>
    <div class="body">I used subclassing method because I also did some other stuff, and when NEMO asked his question subclassing was the first thing I thought. I have tried also your way, using WM_NOTIFY, but my popup menu now react only to left clicks. How do you handle the right clicking? About your problem showing context menu in the right place, are you using the ClientToScreen API to map a listview point to screen one before calling TrackPopupMenu?<br /><br /><strong>EDIT:</strong><br />Hem... I didn't see NM_RCLICK, I used NM_CLICK. Now it works perfectly :grin:.</div>
    <div class="meta">Posted on 2002-02-01 08:06:07 by LuHa</div>
   </div>
  </div>
 </body>
</html>