<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Newbie Procedure Question. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11190" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=11190">Newbie Procedure Question.</a></p>
   <div class="post" id="post-84368">
    <div class="subject"><a href="#post-84368">Newbie Procedure Question.</a></div>
    <div class="body">Sorry if the answer to my question is really obvious, but im new to FASM. <br /><br />Im trying to do the following:<br />Code a procedure and compile it into and obj file using FASM32 1.45<br />Include the object file in a MSVC++ 6.0 project<br />Call the procedure from C code.<br /><br />The problem is that fasm gives me errors when i try to make a procedure, example code includes:<br /><br />main proc<br />;code here<br />main endp<br /><br />proc main<br />enter<br />;code here<br />return<br /><br />neither of this works, it gives me an error such as &quot;Error, illegal instruction: proc main&quot;<br /><br />Is my syntax totally wrong or am i supposed to set up FASM somehow to make this work? Sorry again if this is a totaly newbie question.</div>
    <div class="meta">Posted on 2003-03-01 17:57:24 by osushkov</div>
   </div>
   <div class="post" id="post-84370">
    <div class="subject"><a href="#post-84370">Newbie Procedure Question.</a></div>
    <div class="body">Actually proc is not the FASM native construction but macro. The right is your second variant, but you must include stdcall.inc in your source file. Read the fasm manual and take a look at the examples.<br /><br />BTW: Actually 'proc' is not an instruction and the error message is true. :)</div>
    <div class="meta">Posted on 2003-03-01 18:07:32 by JohnFound</div>
   </div>
   <div class="post" id="post-84395">
    <div class="subject"><a href="#post-84395">Newbie Procedure Question.</a></div>
    <div class="body">Well, ok, that kinda worked, thanks, BUT... I still cant call the procedure from C... I link to the obj file, i declare:<br />extern void fun_name();<br /><br />and then call it, but I get an error, saying that no such procedure exists. This might not really be Assembler related, but any help would be nice.</div>
    <div class="meta">Posted on 2003-03-01 21:56:29 by osushkov</div>
   </div>
  </div>
 </body>
</html>