<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>New strlen algorithm by Jens Duttke - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4058" />
  <link rel="prev" href="../?id=4058&amp;page=8" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=4058">New strlen algorithm by Jens Duttke</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=4058&amp;page=1" style="">&laquo;</a><a href="../?id=4058&amp;page=8" style="">&lt;</a><input type="hidden" name="id" value="4058" /><input type="number" name="page" min="1" max="9" step="1" value="9" onchange="this.form.submit();" /></form>   <div class="post" id="post-105540">
    <div class="subject"><a href="#post-105540">New strlen algorithm by Jens Duttke</a></div>
    <div class="body">cool !<br /><br />Because I had needed such a function to write a file direct from a string.<br />Such a pretty algorithm isn usefull at this prob.<br />But there cant be a nother solution for that, or?</div>
    <div class="meta">Posted on 2003-05-31 10:24:46 by Forginforcer</div>
   </div>
   <div class="post" id="post-105581">
    <div class="subject"><a href="#post-105581">New strlen algorithm by Jens Duttke</a></div>
    <div class="body">lol must have been one of my first posts:confused:</div>
    <div class="meta">Posted on 2003-05-31 17:55:11 by Qages</div>
   </div>
   <div class="post" id="post-106702">
    <div class="subject"><a href="#post-106702">New strlen algorithm by Jens Duttke</a></div>
    <div class="body">I usually do not try to contribute to any thread in which others are optimizing<br />as my skills in this area are quite lacking...<br /><br />However I did have a couple of related questions and observations.<br /><br />After a closer look at the underlying algorithm and a revisit to my trusty<br />ASCII table :grin:, it was quickly apparent that under normal circumstances<br />testing bit 80h should be enough to find the null character.  Therefore it<br />would be my assumption that the tighter the main loop the better and if<br />you like you can test for special cases after.<br /><br />Jenns code (which makes my head spin frankly) seems to try and<br />weed out the special cases inside the loop - I admit I have not done the<br />math all the way though on this for understanding so I may be mistaken.<br /><br />buliaNazas code seems more along the lines in which I would personally<br />code it, but I am curious as to a couple of things...<br /><br />1&gt;  Would this code not be prefered in terms of speed? (buliaNaza's)<br /><pre><code><br />          mov edx, esi<br />     loop&#58;<br />          lea eax, &#91;edx-01010101h&#93;<br />          add edx, 4<br />          and eax, 80808080h<br />          jz loop<br /><br />          ...test special cases here if you like...<br /></code></pre><br /><br />This code snip brings me to my second question ;)<br />If I understand some of optimizing at all, lea eax,  should be<br />U pipe and add edx, 4 should be V pipe no?  Even if this is not true, for the<br />question please assume it is.  would the next line of and eax, 80808080h cause<br />a stall for accessing eax in the next pair?<br /><br />Sorry for the load of questions =) I find this thread very interesting...<br /><br /><br />Hmm, actually I might have answered my first question on my own as I cant recall<br />if lea eax,  is using edx as an address or if it is reading the contents<br />at that address...</div>
    <div class="meta">Posted on 2003-06-10 21:40:11 by Graebel</div>
   </div>
   <div class="post" id="post-106743">
    <div class="subject"><a href="#post-106743">New strlen algorithm by Jens Duttke</a></div>
    <div class="body"><a target="_blank" href="http://www.asmcommunity.net/board/showthread.php?threadid=8330&amp;highlight=Lingo">http://www.asmcommunity.net/board/showthread.php?threadid=8330&amp;highlight=Lingo</a></div>
    <div class="meta">Posted on 2003-06-11 05:49:26 by lingo12</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=4058&amp;page=1" style="">&laquo;</a><a href="../?id=4058&amp;page=8" style="">&lt;</a><input type="hidden" name="id" value="4058" /><input type="number" name="page" min="1" max="9" step="1" value="9" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>