<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>bin2hex.pl - x86/68k asm along with 3 HLLs - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29362" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29362">bin2hex.pl - x86/68k asm along with 3 HLLs</a></p>
   <div class="post" id="post-207321">
    <div class="subject"><a href="#post-207321">bin2hex.pl - x86/68k asm along with 3 HLLs</a></div>
    <div class="body">Originally only HLLs. Author&#039;s site:<br />http://www.chami.com/tips/delphi/052098D.html<br /><br />I added support for the ASMs. If you try this on something large (eg: notepad.exe), it&#039;ll show nothing for a little while. Then you&#039;ll see output. I had to add REGEXs to correct it. Don&#039;t know why they slow it up.<br /><br /><br />bin2hex.pl<br />----------------------------------------------------------------<br />#<br /># bin2hex.pl by Chami.com<br /># http://www.chami.com/tips/<br />#<br /># 68k/x86 asm support added by Al Leitch<br /><br /># number of characters per line<br />$chars_per_line = 15;<br /><br /># -------------------------------------<br /><br /># language id<br />#<br /># 0 = Perl (default)<br /># 1 = C / C++<br /># 2 = Pascal / Delphi<br /># 3 = x86 ASM<br /># 4 = 68k ASM<br /><br />$lang &nbsp;= $ARGV[1];<br /><br />$rem_begin &nbsp;= &quot;begin binary data:&quot;;<br />$rem_end &nbsp; &nbsp;= &quot;end binary data.&quot;;<br /><br /># initialize for Perl strings<br /># by default<br />$_var &nbsp; &nbsp; &nbsp; = &quot;# $rem_begin\n&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;\$bin_data = # %d\n&quot;;<br />$_begin &nbsp; &nbsp; = &quot;\&quot;&quot;;<br />$_end &nbsp; &nbsp; &nbsp; = &quot;\&quot;;\n&quot;;<br />$_break &nbsp; &nbsp; = &quot;\&quot;.\n\&quot;&quot;;<br />$_format &nbsp; &nbsp;= &quot;\\x%02X&quot;;<br />$_separator = &quot;&quot;;<br />$_comment &nbsp; = &quot;# $rem_end &quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;size = %d bytes&quot;;<br /><br /><br /># C / C++<br />if(1 == $lang)<br />{<br /> &nbsp;$_var &nbsp; &nbsp; &nbsp; = &quot;/* $rem_begin */\n&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;char bin_data&#91;] = &quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;/* %d */\n&quot;;<br /> &nbsp;$_begin &nbsp; &nbsp; = &quot;{&quot;;<br /> &nbsp;$_end &nbsp; &nbsp; &nbsp; = &quot;};\n&quot;;<br /> &nbsp;$_break &nbsp; &nbsp; = &quot;\n&quot;;<br /> &nbsp;$_format &nbsp; &nbsp;= &quot;0x%02X&quot;;<br /> &nbsp;$_separator = &quot;,&quot;;<br /> &nbsp;$_comment &nbsp; = &quot;/* $rem_end &quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;size = %d bytes */&quot;;<br />}<br />elsif(2 == $lang)<br />{<br /> &nbsp;$_var &nbsp; &nbsp; &nbsp; = &quot;{ $rem_begin }\n&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;const bin_data : &quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;array [1..%d] of &quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;byte = \n&quot;;<br /> &nbsp;$_begin &nbsp; &nbsp; = &quot;(&quot;;<br /> &nbsp;$_end &nbsp; &nbsp; &nbsp; = &quot;);\n&quot;;<br /> &nbsp;$_break &nbsp; &nbsp; = &quot;\n&quot;;<br /> &nbsp;$_format &nbsp; &nbsp;= &quot;\$%02X&quot;;<br /> &nbsp;$_separator = &quot;,&quot;;<br /> &nbsp;$_comment &nbsp; = &quot;{ $rem_end &quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;size = %d bytes }&quot;;<br />}<br /># x86 asm<br />elsif(3 == $lang)<br />{<br /> &nbsp;$_var &nbsp; &nbsp; &nbsp; = &quot;&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;BIN_DATA:\n&quot;;<br /> &nbsp;$_begin &nbsp; &nbsp; = &quot;db &quot;;<br /> &nbsp;$_end &nbsp; &nbsp; &nbsp; = &quot;\n&quot;;<br /> &nbsp;$_break &nbsp; &nbsp; = &quot;\ndb&quot;;<br /> &nbsp;$_format &nbsp; &nbsp;= &quot;0%02Xh&quot;;<br /> &nbsp;$_separator = &quot;,&quot;;<br /> &nbsp;$_comment &nbsp; = &quot;END_BIN_DATA:\n\n&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;BIN_LEN EQU %d&quot;;<br />}<br /># 68k asm<br />elsif(4 == $lang)<br />{<br /> &nbsp;$_var &nbsp; &nbsp; &nbsp; = &quot;&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;BIN_DATA:\n&quot;;<br /> &nbsp;$_begin &nbsp; &nbsp; = &quot;dc.b &quot;;<br /> &nbsp;$_end &nbsp; &nbsp; &nbsp; = &quot;\n&quot;;<br /> &nbsp;$_break &nbsp; &nbsp; = &quot;\ndc.b&quot;;<br /> &nbsp;$_format &nbsp; &nbsp;= &quot;\$%02X&quot;;<br /> &nbsp;$_separator = &quot;,&quot;;<br /> &nbsp;$_comment &nbsp; = &quot;END_BIN_DATA:\n\n&quot;.<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;BIN_LEN EQU %d&quot;;<br />}<br /><br />if(open(F, &quot;&lt;&quot;.$ARGV[0]))<br />{<br /> &nbsp;binmode(F);<br /><br /> &nbsp;$s = &#039;&#039;;<br /> &nbsp;$i = 0;<br /> &nbsp;$count = 0;<br /> &nbsp;$first = 1;<br /> &nbsp;$s .= $_begin;<br /> &nbsp;while(!eof(F))<br /> &nbsp;{<br /> &nbsp; &nbsp;if($i &gt;= $chars_per_line)<br /> &nbsp; &nbsp;{<br /> &nbsp; &nbsp; &nbsp;$s .= $_break;<br /> &nbsp; &nbsp; &nbsp;$i = 0;<br /> &nbsp; &nbsp;}<br /> &nbsp; &nbsp;if(!$first)<br /> &nbsp; &nbsp;{<br /> &nbsp; &nbsp; &nbsp;$s .= $_separator;<br /> &nbsp; &nbsp;}<br />	 &nbsp; &nbsp;if ($lang == 3) {<br />		 &nbsp; &nbsp;$s =~ s/\bdb,\b/db /; 		#x86 ASM<br />	 &nbsp; &nbsp;}<br />	 &nbsp; &nbsp;if ($lang == 4) {<br />		 &nbsp; &nbsp;$s =~ s/\bdc\.b,\$\b/dc\.b \$/;	#68K ASM<br />	 &nbsp; &nbsp;}<br /> &nbsp; &nbsp;<br /> &nbsp; &nbsp;$s .= sprintf(<br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$_format, ord(getc(F)));<br /> &nbsp; &nbsp;++$i;<br /> &nbsp; &nbsp;++$count;<br /> &nbsp; &nbsp;$first = 0;<br /> &nbsp;}<br /> &nbsp;$s .= $_end;<br /> &nbsp;$s .= sprintf $_comment, $count;<br /> &nbsp;$s .= &quot;\n\n&quot;;<br /><br /> &nbsp;$s = &quot;\n&quot;.sprintf($_var, $count).$s;<br />	 &nbsp; &nbsp;if ($lang == 3) {<br />		 &nbsp; &nbsp;$s =~ s/\bdb,\b/db /; 		#x86 ASM<br />	 &nbsp; &nbsp;}<br />	 &nbsp; &nbsp;if ($lang == 4) {<br />		 &nbsp; &nbsp;$s =~ s/\bdc\.b,\$\b/dc\.b \$/;	#68K ASM<br />	 &nbsp; &nbsp;}<br /><br /> &nbsp;print $s;<br /><br /> &nbsp;close( F );<br />}<br />else<br />{<br /> &nbsp;print<br /> &nbsp; &nbsp;&quot;bin2hex.pl by Chami.com\n&quot;.<br /> &nbsp; &nbsp;&quot;\n&quot;.<br /> &nbsp; &nbsp;&quot;usage:\n&quot;.<br /> &nbsp; &nbsp;&quot; &nbsp;perl bin2hex.pl &lt;binary file&gt;&quot;.<br /> &nbsp; &nbsp;&quot; &lt;language id&gt;\n&quot;.<br /> &nbsp; &nbsp;&quot;\n&quot;.<br /> &nbsp; &nbsp;&quot; &nbsp;&lt;binary file&gt; : path to the &quot;.<br /> &nbsp; &nbsp;&quot;binary file\n&quot;.<br /> &nbsp; &nbsp;&quot; &nbsp;&lt;language id&gt; : 0 = Perl, &quot;.<br /> &nbsp; &nbsp;&quot;1 = C/C++/Java, &quot;.<br /> &nbsp; &nbsp;&quot;2 = Pascal/Delphi\n&quot;.<br /> &nbsp; &nbsp;&quot;\t\t &nbsp;3 = x86 ASM, &quot;.<br /> &nbsp; &nbsp;&quot;4 = 68k ASM\n&quot;;<br />}</div>
    <div class="meta">Posted on 2009-04-15 00:22:24 by Al_Leitch</div>
   </div>
   <div class="post" id="post-207324">
    <div class="subject"><a href="#post-207324">Re: bin2hex.pl - x86/68k asm along with 3 HLLs</a></div>
    <div class="body">To clear possible misconception, I posted this merely as a useful utility. Being an ASM forum, I&#039;m not trying to get help on this script.</div>
    <div class="meta">Posted on 2009-04-15 13:08:43 by Al_Leitch</div>
   </div>
  </div>
 </body>
</html>