<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Erratic MASM compilation problems - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22735" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22735">Erratic MASM compilation problems</a></p>
   <div class="post" id="post-170278">
    <div class="subject"><a href="#post-170278">Erratic MASM compilation problems</a></div>
    <div class="body">Hi,<br />In my spare free time I’m building a CAD system in ASM using MASM. It’s becoming a large app so I decide to use libraries to reduce the compilation time. Since a while I’m experimenting a strange effect, that when I replace the libs with the original code, MASM is refusing to compile giving me strange error messages like “error A2008: syntax error: typedef??? on lines where no typedef plays a role. If I reduce the project, the error disappears.<br /><br />Any idea what is happening?<br /><br />Regards,<br /><br />Biterider<br /></div>
    <div class="meta">Posted on 2006-03-07 10:36:10 by Biterider</div>
   </div>
   <div class="post" id="post-170294">
    <div class="subject"><a href="#post-170294">Re: Erratic MASM compilation problems</a></div>
    <div class="body">I&#39;ver had similar problems recently which had an interesting cause.<br />I had been writing a quite lengthy Method of an OA32 Object, and it had a relatively large codeblock that needed to be repeated in it three times.<br />Naturally, I wrapped the first Instance of it inside Macro/EndM pair of statements, the immediately after the Endm I had a reference to the macro (thus implementing the macro I&#39;d defined) - and replaced the other two instances of the codeblock with references to the macro.<br /><br />When I compiled, all hell broke loose, ML.exe was crashing !!<br />I tried building a few times to confirm it, and even rebooted and tried again.<br />No, something was weird, ML was crashing, and if I commented the entire method out, the problem went away. It was in that method for sure.<br /><br />I fixed a few bugs here and there and tried again.<br />This time ML.exe didn&#39;t crash but I got similar crazyness to what you describe.<br />After much tearing of hair, I found a small bug in that inline macro I&#39;d defined.<br /><br />Everything was groovy again !!<br /><br />I believe the problem is caused by a combination of nesting a macro definition within a Method, and the fact that a Method is a macro already, ie, it&#39;s a bug in the macro nesting of ML.exe which only shows up under such conditions.<br /></div>
    <div class="meta">Posted on 2006-03-08 00:04:01 by Homer</div>
   </div>
  </div>
 </body>
</html>