<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Temp file generator function question - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17235" />
    <link rel="next" href="../?id=17235&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=17235">Temp file generator function question</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=17235&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=17235&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="17235" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=17235&amp;page=2">&gt;</a><a href="../?id=17235&amp;page=2">&raquo;</a></form>   <div class="post" id="post-133566">
    <div class="subject"><a href="#post-133566">Temp file generator function question</a></div>
    <div class="body">Ralf's Int List didn't give any details on file naming strategy<br />using by the temp file generator.<br /><br />It looks like it's always a 8 character filename with<br />no extension and I'd like to use it but have to make sure that's it indeed<br />always has 8 characters exactly.<br /><br />Thanks.<br /><br />;  temp.asm  Create a temporary file with a unique name,<br />;            it must be deleted manually       <br />;<br />                 <br />..model   small<br />..stack   200h    ; 512 byte stack<br />..data<br /><br />path         db           'c:\borlandc\files\',13 dup(0)<br /><br />..code<br /><br />start:             <br />             mov          ax,@data<br />             mov          ds,ax<br />             mov          ah,5ah<br />             <br />; Bitfields for file attributes:                        Decimal Equivalent<br />; Bit(s)	Description (Table 01420)<br />;  7	shareable (Novell NetWare)<br />;  7	pending deleted files (Novell DOS, OpenDOS)<br />;  6	unused<br />;  5	archive                                             32<br />;  4	directory                                           16<br />;  3	volume label       				   <br />;	execute-only (Novell NetWare)<br />;  2	system                                               4<br />;  1    hidden                                               2 <br />;  0	read-only                                            1 <br /><br />             mov          cx,00100000b   ; file attributes, archive bit set<br />             mov          dx,offset path<br />             int          21h             ; ax contains the file handle<br /><br />exit:             <br />             mov          ax,4c00h<br />             int          21h<br /><br />end          start</div>
    <div class="meta">Posted on 2004-02-15 04:57:36 by skywalker</div>
   </div>
   <div class="post" id="post-133571">
    <div class="subject"><a href="#post-133571">Temp file generator function question</a></div>
    <div class="body">Why don't you just move to Win32 coding? Or move to a DOS-asm board?<br />I certainly can't remember any of the old DOS stuff, and I don't want to anyway.<br />Why do you make things so hard on yourself, by using an archaic unsupported junk OS?</div>
    <div class="meta">Posted on 2004-02-15 06:07:48 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133572">
    <div class="subject"><a href="#post-133572">Real reason</a></div>
    <div class="body"><div class="quote"><br />Why don't you just move to Win32 coding? Or move to a DOS-asm board?<br />I certainly can't remember any of the old DOS stuff, and I don't want to anyway.<br />Why do you make things so hard on yourself, by using an archaic unsupported junk OS? </div><br /><br />This section is also for non Win 32 questions.<br /><br /> Why does it bother you that I post these questions.<br /><br />Extensive Win 32 code isn't made available by MS.<br /> <br />They are plenty of newsgroups and places to get help with it though and that's great.<br /><br />I have a number of programs written that run great right up to Windoze XP in a DOS box.<br />It may shock you, but there are a lot of people who still go to a command prompt.<br /><br />Why ? There is a heavy price to pay for the fancy GUI interface. Speed and to a lessor extent size.<br />Some well written &quot;DOS stuff&quot; apps will &quot;blow the doors off&quot; off even the best Win 32 apps. <br /><br />Re<br />Take care.</div>
    <div class="meta">Posted on 2004-02-15 06:29:40 by skywalker</div>
   </div>
   <div class="post" id="post-133577">
    <div class="subject"><a href="#post-133577">Temp file generator function question</a></div>
    <div class="body">I write my commandline programs in Win32 aswell. Why? There's a heavy price for 16 bit code, and for the sandbox which virtualizes certain instructions, etc, etc.<br />Any well-written console Win32 apps will &quot;blow the doors off&quot; any well-writen &quot;DOS stuff&quot;.</div>
    <div class="meta">Posted on 2004-02-15 07:17:20 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133581">
    <div class="subject"><a href="#post-133581">That depends on the OS and code</a></div>
    <div class="body"><div class="quote"><br />I write my commandline programs in Win32 aswell. Why? There's a heavy price for 16 bit code, and for the sandbox which virtualizes certain instructions, etc, etc.<br /><br />That depends on the OS and the code.<br /><br />Any well-written console Win32 apps will &quot;blow the doors off&quot; any well-writen &quot;DOS stuff&quot;. </div><br /><br />I won't embarrass you with a file finder that is at least 5X faster than any Win 32 stuff I have seen.<br />And if I use a ramdrive, it runs in an eyeblink.<br /><br />:-)</div>
    <div class="meta">Posted on 2004-02-15 07:29:21 by skywalker</div>
   </div>
   <div class="post" id="post-133586">
    <div class="subject"><a href="#post-133586">Temp file generator function question</a></div>
    <div class="body">I've been coding Win32 and DOS long enough to know that Win32 is always faster than DOS, especially DOS running in an NT DOSbox.<br />It just shows that you haven't seen enough of Win32 yet. But if you want to remain closed about this, go ahead, your loss.</div>
    <div class="meta">Posted on 2004-02-15 08:40:38 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133807">
    <div class="subject"><a href="#post-133807">Temp file generator function question</a></div>
    <div class="body">andrew kennedy,<br /><br />If you working on a big 16-bit DOS project, you will face the problem of segmentation which makes slower your code.<br /><br />Another fact, 32-bit registers (which means a DWORD) have two times the capacity of 16-bit registers.<br /><br />You can't claim that 16-bit code runs faster than 32-bit code.</div>
    <div class="meta">Posted on 2004-02-17 05:00:06 by Vortex</div>
   </div>
   <div class="post" id="post-133827">
    <div class="subject"><a href="#post-133827">Temp file generator function question</a></div>
    <div class="body"><div class="quote"><br />andrew kennedy,<br /><br />If you working on a big 16-bit DOS project, you will face the problem of segmentation which makes slower your code.<br /><br />Another fact, 32-bit registers (which means a DWORD) have two times the capacity of 16-bit registers.<br /><br />You can't claim that 16-bit code runs faster than 32-bit code. </div><br /><br />I never said all 16 bit code runs faster. For the programs I have written so far, 16 bit regs have been more than enough.  I would have more room if I needed it by using 32 bits regs but would pay a 1 opcode penalty for using them in 16 bit code.<br /><br />So far my biggest program is around 2000 bytes. I can fit 2 -3 of my programs in one cluster where a Win 32<br />would be lucky to fit in one.<br /><br />I would be glad to test my file finder program against anything someone can write in 32 bit and test it.<br />I have turbo profiler which allows speeding up the clock for some pretty accurate timings.<br /><br />Tqke care.<br />                     Andy Kennedy</div>
    <div class="meta">Posted on 2004-02-17 06:36:06 by skywalker</div>
   </div>
   <div class="post" id="post-133837">
    <div class="subject"><a href="#post-133837">Temp file generator function question</a></div>
    <div class="body"><div class="quote">So far my biggest program is around 2000 bytes. I can fit 2 -3 of my programs in one cluster where a Win 32<br />would be lucky to fit in one.</div><br /><br />Size says nothing about speed, other than that most size-optimized programs are considerably slower than their speed-optimized cousins.<br />Oh, and you can not fit more than one file in one cluster by definition, so you are just wasting more space than us Win32 users :)<br />At least our extra 'waste' of space translates in faster programs.<br />Oh, and the smallest working Win32 program is about 700 bytes. It's not THAT big a deal... 2k or 2.7k, I wouldn't bother.<br />64k or 64k? I don't even notice (gets lost in the roundoff).<br /><br /><div class="quote">I would be glad to test my file finder program against anything someone can write in 32 bit and test it.<br />I have turbo profiler which allows speeding up the clock for some pretty accurate timings.</div><br /><br />Aren't file finders completely I/O-limited anyway?<br />Besides, since you have never even needed 32 bit registers, an your biggest program is 2000 bytes, perhaps you should open your mind and listen to some more experienced programmers?</div>
    <div class="meta">Posted on 2004-02-17 07:17:26 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133869">
    <div class="subject"><a href="#post-133869">Temp file generator function question</a></div>
    <div class="body"><div class="quote"><br />I won't embarrass you with a file finder that is at least 5X faster than any Win 32 stuff I have seen.<br /></div><br />Hm, what kind of file finder? And what have you compared it with? I can't really think of a reason why a dos app would be faster for file finding than a win32 app, perhaps except if you do your own filesystem handling code... which is sorta a no-no these days. But would be interesting to see if you were right. Then again, if you just ran a normal win32 file search dialog and your search app afterwards in a dos box... heh.<br /><br /><div class="quote"><br />And if I use a ramdrive, it runs in an eyeblink.<br /></div><br />Anything in a ramdrive would run in an eyeblink - especially since ramdrives are usually pretty limited in size ;). If you meant a disk cache, that's something else... good thing that windows has a built-in disk cache that blows the door off smartdrv :)<br /><br />But well, it *would* be interesting to see a dos application beating win32 this way. How should it be timed, though? Raw DOS vs. raw NT? Using smartdrv under DOS? Or perhaps timing the dos under a NT dos box?<br /><br /><div class="quote"><br />I have turbo profiler which allows speeding up the clock for some pretty accurate timings.<br /></div><br />You don't need to mess with the clock to get rather accurate timings under win32 - there's the high-performance multimedia timer jiggidyzag :)<br /><br />As for size... ho humm. Doesn't really matter, does it? Cluster sizes are at least 4k on typical win32 installations, and even on a (by today's standards) ridiculously small 1gig drive, having your executables weigh at 32k (rather huge for a win32 assembly (or C without runtimes) app, normal size for a small win32 C tool) isn't a terrible disaster - it's a different story with multi-meg exes though.<br /><br />Well, if you want to do 16bit code, that's all fine and dandy :). But you might want to play around a bit more with win32 and see what it has to offer you - you might be in for a pleasant surprise :)</div>
    <div class="meta">Posted on 2004-02-17 10:58:48 by f0dder</div>
   </div>
   <div class="post" id="post-133902">
    <div class="subject"><a href="#post-133902">Temp file generator function question</a></div>
    <div class="body">Why is everyone so upset about 16bit apps? True, they are bound to be slower that win32 stuff, but as an advantage they are much better when making utilities and antiviruses. That way you can put the program in a boot disk -win32 apps would never run like that. :)<br /><br />As for the original question, I guess it's safe to assume the filename is in 8.3 format -win32 temp files are too.</div>
    <div class="meta">Posted on 2004-02-17 13:26:33 by QvasiModo</div>
   </div>
   <div class="post" id="post-133907">
    <div class="subject"><a href="#post-133907">Temp file generator function question</a></div>
    <div class="body"><div class="quote"><br />That way you can put the program in a boot disk -win32 apps would never run like that.<br /></div><br />Look out for WDOSX... there's at least one other dos extender with PE loading and win32 subset support, which is actually used in... ta-da... an antivirus package :)</div>
    <div class="meta">Posted on 2004-02-17 13:38:50 by f0dder</div>
   </div>
   <div class="post" id="post-133908">
    <div class="subject"><a href="#post-133908">D'oh!</a></div>
    <div class="body">:grin:<br /><br />f0dder - 1<br />QvasiModo - 0<br /><br />Oh, well... we still have the nostalgia reason ;)</div>
    <div class="meta">Posted on 2004-02-17 13:40:42 by QvasiModo</div>
   </div>
   <div class="post" id="post-133911">
    <div class="subject"><a href="#post-133911">Temp file generator function question</a></div>
    <div class="body">I'm glad I've forgot most of the 16bit stuff - it was rather limiting and not very fun, and having to memorize the interrupts and codes (or constantly look them up in references) was tedious. Yay for the ease &amp; power of 32bit flat memory model, and for symbolic function names :D - not to mention the lack of protection &amp; multitasking in DOS.<br /><br />But hey, if you can write a faster file searcher, there might be *some* benefit of using 16bit code still :p</div>
    <div class="meta">Posted on 2004-02-17 13:52:58 by f0dder</div>
   </div>
   <div class="post" id="post-133918">
    <div class="subject"><a href="#post-133918">Thanks</a></div>
    <div class="body"><div class="quote"><br />Why is everyone so upset about 16bit apps? True, they are bound to be slower that win32 stuff, but as an advantage they are much better when making utilities and antiviruses. That way you can put the program in a boot disk -win32 apps would never run like that. :)<br /><br />As for the original question, I guess it's safe to assume the filename is in 8.3 format -win32 temp files are too. </div><br /><br />Most of my 16 bit apps handle long file names with no problems, there are Win 95 + interrupts I used for that.<br />I wrote to handle up to 6 letter extensions, if they used more that I think they must not be creative.<br /><br />If someone is using pre-Win 95 it's probably cuz their short on cash. :-)<br /><br />Thanks for not judging me.<br /><br />Andy Kennedy</div>
    <div class="meta">Posted on 2004-02-17 14:24:30 by skywalker</div>
   </div>
   <div class="post" id="post-133920">
    <div class="subject"><a href="#post-133920">Re: D'oh!</a></div>
    <div class="body"><div class="quote"><br />:grin:<br /><br />f0dder - 1<br />QvasiModo - 0<br /><br />Oh, well... we still have the nostalgia reason ;) </div><br /><br />I have been modifying some Win 32 code and compiling it. You still have to do it from a DOS box though.<br />I was looking thru my MASM32 directory for the .html tutorials and didn't find the ones from a previous<br />package. Just a few for optimizations and other stuff.<br /><br />Learning to use masm wasn't as hard as I thought. Seems like more commands than using Tasm 52.<br /><br />Outta here.</div>
    <div class="meta">Posted on 2004-02-17 14:28:55 by skywalker</div>
   </div>
   <div class="post" id="post-133921">
    <div class="subject"><a href="#post-133921">Temp file generator function question</a></div>
    <div class="body"><div class="quote">Most of my 16 bit apps handle long file names with no problems, there are Win 95 + interrupts I used for that.<br />I wrote to handle up to 6 letter extensions, if they used more that I think they must not be creative.</div><br /><br />With long filenames the concept of extensions is lost. The '.' is just another char in the filename... Sorta like on Amiga (erm yes in 1985), where you had prefixes rather than suffixes... Eg: <br />mod.my fantastic 4-track song&quot;<br />Such stuff would probably crash your application? :)<br />Not to mention things like &quot;the.latest.uber.warez-El1t3gr00p.zip&quot;? :)<br /><br />Besides that, I don't really see the point in writing 'DOS' applications that require Win95 or higher. Surely native Win32 apps are faster.</div>
    <div class="meta">Posted on 2004-02-17 14:47:04 by Henk-Jan</div>
   </div>
   <div class="post" id="post-134001">
    <div class="subject"><a href="#post-134001">Temp file generator function question</a></div>
    <div class="body">Henk-Jan,<br /><br />You wrote:<br /><br />&gt;Oh, and the smallest working Win32 program is about 700 bytes.<br /><br />You should keep up the file size at a minimum of 1024 bytes to avoid some compatibility problems.</div>
    <div class="meta">Posted on 2004-02-18 05:07:26 by Vortex</div>
   </div>
   <div class="post" id="post-134006">
    <div class="subject"><a href="#post-134006">Temp file generator function question</a></div>
    <div class="body"><div class="quote">You should keep up the file size at a minimum of 1024 bytes to avoid some compatibility problems.</div><br /><br />Yea I know, Win9x has a broken PE loader. Then again, Win9x is dead.</div>
    <div class="meta">Posted on 2004-02-18 05:39:27 by Henk-Jan</div>
   </div>
   <div class="post" id="post-134009">
    <div class="subject"><a href="#post-134009">Temp file generator function question</a></div>
    <div class="body"><div class="quote"><br /><br /><br />Yea I know, Win9x has a broken PE loader. Then again, Win9x is dead. </div><br /><br />If only that were true life would be alot easier :alright: <br /><br />I broke TBPaint on Win9x once and got 100+ emails over 3 days bitching about it.</div>
    <div class="meta">Posted on 2004-02-18 05:57:01 by donkey</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=17235&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=17235&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="17235" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=17235&amp;page=2">&gt;</a><a href="../?id=17235&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>