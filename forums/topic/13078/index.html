<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Microsoft Plans Windows API Cleanup - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13078" />
    <link rel="next" href="../?id=13078&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=13078">Microsoft Plans Windows API Cleanup</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=13078&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=13078&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="13078" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=13078&amp;page=2">&gt;</a><a href="../?id=13078&amp;page=3">&raquo;</a></form>   <div class="post" id="post-101598">
    <div class="subject"><a href="#post-101598">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">ACK! :eek:  I was afraid this would happen now that I'm learning the Win32 API. (Move this thread if you need to.)<br /><br />Microsoft plans a major cleanup of the Win32 API set and XML application markup language (XAML) to make its next version of Windows, code-named Longhorn, as friendly for developers as it is for users.<br /><br />&quot;Win32 has like 76,000 APIs, and they're taking it down to 8,000 with Longhorn technology,&quot; said one source familiar with the plans.<br /><br /><a target="_blank" href="http://www.internetweek.com/breakingNews/showArticle.jhtml?articleID=9400498">http://www.internetweek.com/breakingNews/showArticle.jhtml?articleID=9400498</a></div>
    <div class="meta">Posted on 2003-05-06 13:03:49 by Masmer</div>
   </div>
   <div class="post" id="post-101602">
    <div class="subject"><a href="#post-101602">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">Sorry to hear that...<br /><br />The &quot;stability&quot; of Windows depends on the number of different APIs, etc... The more, the greater chance that one or two required to keep the system running will be working.<br /><br />Imagine if shlwapi.dll was integrated into kernel32.dll!!! Not only IE, Outlook, etc would be a security risk, just booting up would be a security risk (and it already is...)</div>
    <div class="meta">Posted on 2003-05-06 13:31:25 by V Coder</div>
   </div>
   <div class="post" id="post-101605">
    <div class="subject"><a href="#post-101605">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">I don't like this paragraph ...<br /><br />&quot;Also in Longhorn, Microsoft plans to integrate a replacement for the Windows graphics device interface (GDI), code-named Avalon, that replaces the need to do manual coding with prebuilt, extensible XAML scripts. That means developers wouldn't have to access many APIs directly and instead can modify XAML scripts, sources said.&quot;</div>
    <div class="meta">Posted on 2003-05-06 13:33:14 by Masmer</div>
   </div>
   <div class="post" id="post-101607">
    <div class="subject"><a href="#post-101607">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">Well my OS has about 10-15 API functions with only 1-2 documented on site curently ... and growing :P<br />So i will catch them up soon ... :)<br />Besides i will always have API and not scripts ...</div>
    <div class="meta">Posted on 2003-05-06 13:36:27 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-101610">
    <div class="subject"><a href="#post-101610">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body"><div class="quote"><br />The &quot;stability&quot; of Windows depends on the number of different APIs, etc... The more, the greater chance that one or two required to keep the system running will be working.<br /></div><br />That's somewhat lame. The more functions, the more chance to have a fuckup somewhere.<br /><br />A good thing that they're finally cleaning up - the win32 API is rather awful. I just fear they'll be too focuse on XML etc, and we'll end up with something crappy. Dunno what to think about the &quot;Avalon&quot; stuff - XAML scripting doesn't sound like a _replacement_, and I know nothing about it... but GDI _does_ need a cleanup, and if they do stuff right... well, would be nice scripting parts of the GUI instead of hardcoding it.<br /><br />I hope the cleanup doesn't mean we will have a few calls that take a zillion parameters, though...<br /><br />oh, and this I do not like:<br /><div class="quote"><br />the 3-D-capable Aero interface in Longhorn is slated to be fine-tuned to better exploit the unused processing power available on Intel Pentium 4-based PC desktops. <br /></div><br />3D GUI? No thanks. &quot;unused processing power available&quot;? XP with themes enabled is already bad enough.</div>
    <div class="meta">Posted on 2003-05-06 13:46:57 by f0dder</div>
   </div>
   <div class="post" id="post-101612">
    <div class="subject"><a href="#post-101612">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">I'm not sure how that is going to work though. A script by definition just calls an engine and that engine interfaces with the API. Is MS planning on replacing the primary API with a scripting engine ? That would be terrible news, but in line with their disillusionment with anything even remotely low level. They are moving away from C++, VB and all of the other mainstays of the MS programming enviroment and concentrating on scripting languages. This will add alot of power to the shell via no-compile executable scripts but at the expense of the low-level guys like us. Accessing a scripting engine is tough work from what I have gathered in reading Ernie's paper on the subject.<br /><br />&quot;Generating script to draw sad face please wait....&quot;</div>
    <div class="meta">Posted on 2003-05-06 13:47:41 by donkey</div>
   </div>
   <div class="post" id="post-101614">
    <div class="subject"><a href="#post-101614">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">Don't worry... it will take many years before assembly is eradicated totally :). Perhaps it will be hard writing full-assembly apps for the new windows versions, but it should still be possible to use it &quot;where it matters&quot;.</div>
    <div class="meta">Posted on 2003-05-06 13:51:16 by f0dder</div>
   </div>
   <div class="post" id="post-101618">
    <div class="subject"><a href="#post-101618">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">Oops.<br /><br />I had read &quot;developers <strong>wouldn't have to access</strong> many APIs directly&quot; as &quot;developers <strong>wouldn't have access to</strong> many APIs directly&quot; :rolleyes: (Must get sleep.)</div>
    <div class="meta">Posted on 2003-05-06 14:10:28 by Masmer</div>
   </div>
   <div class="post" id="post-101620">
    <div class="subject"><a href="#post-101620">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">Actually when you think about it, what are they going to do - throw out the whole software catalog? Those apps that are written now will still have to work so they have to keep the exact same API calls. Granted the 16 bit leftovers are gone, they were always clear on the fact that they would be replaced so if your still using AppendMenu or OpenFile too bad. But they would break too much code if they scrapped them or didn't supply direct replacement wrappers for the functions, all 76,000 of them.</div>
    <div class="meta">Posted on 2003-05-06 14:21:20 by donkey</div>
   </div>
   <div class="post" id="post-101621">
    <div class="subject"><a href="#post-101621">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">donkey, my guess: wrapper layer for legacy software.</div>
    <div class="meta">Posted on 2003-05-06 14:22:15 by f0dder</div>
   </div>
   <div class="post" id="post-101627">
    <div class="subject"><a href="#post-101627">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">From that movie, where the kid sez 'I see dead people'...<br /><br />*I see huge exes...<br />*I see poor optimizations...<br />*I see less control over my own stuff...<br />*I see web-tv...<br />*I see monopolies<br />*I see a no xbox emulators...<br />*I see a need to switch to linux...<br /><br />Am I paranoid?</div>
    <div class="meta">Posted on 2003-05-06 14:47:20 by drarem</div>
   </div>
   <div class="post" id="post-101629">
    <div class="subject"><a href="#post-101629">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">drarem, if they do the cleanup properly, this doesn't have to be the result. In fact, stuff might shrink a bit.<br /><br />As for scripting the UI... dunno how it'll be performance wise, but it might make EXEs even smaller, since there's less stuff you have to handle yourself. Unless they majorly screw it up, it could even be quite nice - GUI coding is so trivial, and there's so much boring stuff you have to handle.<br /><br />And if we start talking p-code... well, don't mention performance until really good JIT appears, but EXEs can be quite smaller (at the price of a many many many megabyte runtime... but as long as that's distributed with the OS, &quot;who cares&quot; :rolleyes: )</div>
    <div class="meta">Posted on 2003-05-06 14:52:49 by f0dder</div>
   </div>
   <div class="post" id="post-101630">
    <div class="subject"><a href="#post-101630">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">One question, does anybody know the word compability? What will happen to it? :confused: <br />A wrapper, wouldn't that mean that the &quot;old&quot; API still would exists (virutally)? Why give up old windows programming habits for new problems? (&lt;- every new inovation opens a new world of possible problems, and if history repeats itself, then many of the possible errors will occur)<br />A wrapper wouldn't that risk causing new problems, like functions not doing what it was supposed to do (but something similar), and therefore causing errors?<br /><br />Perhaps it would be better to let the windows api use interrupts, like linux's int 80h, that would set some limit to the number of API functions. 76,000 APIs, I wonder how many of them that will be forgotten (thus no wrapper function made for it)...</div>
    <div class="meta">Posted on 2003-05-06 14:54:32 by scientica</div>
   </div>
   <div class="post" id="post-101634">
    <div class="subject"><a href="#post-101634">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body"><div class="quote"><br />wrapper, wouldn't that mean that the &quot;old&quot; API still would exists (virutally)? <br /></div><br />Sure, just like there's win16 and (limited) DOS support in NT. Subsystems.<br /><br /><div class="quote"><br />Why give up old windows programming habits for new problems? <br /></div><br />Because it can be done better? Because it might be possible to create a new API set that's more coherent and reasonable, making apps easier to write, causing less bugs? Yeah, it's a dream, but it could be done. There's been _many_ years of experience with the win32 api now, should be possible to have learnt something from that.<br /><br /><br /><br />The wrappers would conform to microsofts specifications. If you have taken advantage of undocumented behaviour, too bad. Your fault.<br /><br /><div class="quote"><br />Perhaps it would be better to let the windows api use interrupts, like linux's int 80h, that would set some limit to the number of API functions. 76,000 APIs, I wonder how many of them that will be forgotten (thus no wrapper function made for it)...<br /></div><br />:eek:<br />That's rather crappy. Descriptive names are nicer, and it's easier to remap than numbers for an INT call. Too bad linux doesn't really have an API. And INT calls for everything... correct me if I'm wrong, but doesn't that force a ring transition?</div>
    <div class="meta">Posted on 2003-05-06 15:01:25 by f0dder</div>
   </div>
   <div class="post" id="post-101641">
    <div class="subject"><a href="#post-101641">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body"><div class="quote"><br />Because it can be done better? Because it might be possible to create a new API set that's more coherent and reasonable, making apps easier to write, causing less bugs? Yeah, it's a dream, but it could be done. There's been _many_ years of experience with the win32 api now, should be possible to have learnt something from that.<br /><br /><br /><br />The wrappers would conform to microsofts specifications. If you have taken advantage of undocumented behaviour, too bad. Your fault.</div><br />Well it's a nice dream that things will be better in the next version, since WinXP I find it a bit harder to belive (since IMO WinXP is terrible, win2k was the last useable OS they made; I've lost a bit of faith in Wndows you see).<br />Reminds me of an countys dream, it's just a dream. Too bad &quot;some&quot; of them hasn't woken up<br /><br />The part about using undocumented stuff I can agree that it's a bit risky, and something that should only be done if there's a good reason and that the software((/programmer)) should check for the right system verison/build before utilizing code that uses undoc stuff.<br /><br />Descriptive names vs. descriptive equates, what's the difference in niceness? As for interrupt requiring ring transition I don't know at the moment, perhaps our dear pinguin programmer bazik knows?</div>
    <div class="meta">Posted on 2003-05-06 15:41:42 by scientica</div>
   </div>
   <div class="post" id="post-101644">
    <div class="subject"><a href="#post-101644">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">Nah, not necessarily. If the higher of the RPL of the selector in an interrupt or trap gate and the DPL of the segment it refers to is equal to the CPL of the calling program, then there's no ring transition.</div>
    <div class="meta">Posted on 2003-05-06 16:03:31 by Sephiroth3</div>
   </div>
   <div class="post" id="post-101646">
    <div class="subject"><a href="#post-101646">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">I'll take your word for it - it has been some time since I messed at this level.<br /><br />However, INT transition should still be slower then CALL if I am not mistaken, plus you need supervisor code to set up the interrupt.<br /><br />Make's more sense to have the api in shared libraries, most of it will be ring3 code anyway.<br /><br />I like the nt/win32 model... I mean, the win32 API is totally polluted, but the idea of &quot;any subsystem&quot; using NT native API, and NT native api finally does the r3-&gt;r0 transitions.</div>
    <div class="meta">Posted on 2003-05-06 16:09:21 by f0dder</div>
   </div>
   <div class="post" id="post-101693">
    <div class="subject"><a href="#post-101693">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">My bet, if this does happen, is that MS will update the &quot;compatibility wizard&quot; to support &quot;old&quot; apps, and encourage new development in &quot;API II&quot;, by supporting it in the then current version of Visual Studio, or whatever it'll be called...<br /><br />And I wouldn't worry about &quot;wasting your time&quot; learning the current API structure. I'ld imagine the same model would be used, just less functions to worry about.<br /><br />Sort of like when we went form Function to FunctionEx, that would be my guess.<br /><br />After all, we are talking Windows here, aren't we... :grin: :grin: :grin:</div>
    <div class="meta">Posted on 2003-05-06 20:04:07 by S/390</div>
   </div>
   <div class="post" id="post-101749">
    <div class="subject"><a href="#post-101749">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">M$ has to make more money,so they will have new plans. :)</div>
    <div class="meta">Posted on 2003-05-07 03:06:43 by Vortex</div>
   </div>
   <div class="post" id="post-101803">
    <div class="subject"><a href="#post-101803">Microsoft Plans Windows API Cleanup</a></div>
    <div class="body">looks like what is comming down the pike will be buggie untill the 3rd version<br /><br />there is one big point that is being over looked M$ will have a copyright on the new API and you guys will not be allowed to have acess to info on the new API</div>
    <div class="meta">Posted on 2003-05-07 11:31:42 by rob.rice</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=13078&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=13078&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="13078" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=13078&amp;page=2">&gt;</a><a href="../?id=13078&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>