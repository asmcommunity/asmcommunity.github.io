<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Suggestion for FASM - Linux - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7152" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=7152">Suggestion for FASM - Linux</a></p>
   <div class="post" id="post-51706">
    <div class="subject"><a href="#post-51706">Suggestion for FASM - Linux</a></div>
    <div class="body">Thomasz,<br /><br />is it possible to add a &quot;format ELF&quot; which automatically does what the &quot;elf.ash&quot; does?<br /><br /><br />BTW, just saw you even use the Linux UPX version for compressing FASM ;)</div>
    <div class="meta">Posted on 2002-08-05 08:10:35 by bazik</div>
   </div>
   <div class="post" id="post-51711">
    <div class="subject"><a href="#post-51711">Suggestion for FASM - Linux</a></div>
    <div class="body">Another thing:<br /><br />Is there a FASM equvivalent to NASM's &quot;GLOBAL&quot; and &quot;EXTERN&quot; statements?<br />If not, do I have a chance to get them added? :)<br /><br />thanks,<br />bazik</div>
    <div class="meta">Posted on 2002-08-05 08:36:05 by bazik</div>
   </div>
   <div class="post" id="post-51955">
    <div class="subject"><a href="#post-51955">Suggestion for FASM - Linux</a></div>
    <div class="body">Yes, there is &quot;extrn&quot; statement (like in TASM) for the COFF output format, it's documented <a target="_blank" href="http://fasm.metro-nt.pl/fasmdocpre.zip">here</a>.</div>
    <div class="meta">Posted on 2002-08-06 13:23:24 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-52017">
    <div class="subject"><a href="#post-52017">Suggestion for FASM - Linux</a></div>
    <div class="body">Thomasz,<br />thanks for pointing me to your docs again :) <br /><br />I get a clean compile with FASM now! But neither GCC nor the Linker recognizes the file format :/<br /><br />Here is some info:<br /><pre><code><br />bazik@antares coding $ gcc --version<br />gcc &#40;GCC&#41; 3.1.1<br />bazik@antares coding $ ld --version <br />GNU ld version 2.12.90.0.7 20020423<br />bazik@antares coding $ fasm    <br />flat assembler  version 1.39<br />usage&#58; fasm source output<br /></code></pre><br /><br />And here the commands I use:<br /><br /><pre><code><br />bazik@antares coding $ fasm GtkTest.asm GtkTest.o<br />flat assembler  version 1.39<br />2 passes, 932 bytes.<br />bazik@antares coding $ gcc `gtk-config --cflags --libs` -Wall -s -o GtkTest GtkTest.o<br />GtkTest.o&#58; file not recognized&#58; File format not recognized<br />collect2&#58; ld returned 1 exit status<br />bazik@antares coding $ <br /></code></pre><br /><br />Same happens with the examples comming along with FASM:<br /><br /><pre><code><br />bazik@antares coding $ cd fasm/examples/coffdemo/<br />bazik@antares coffdemo $ ll<br />total 16<br />-rw-r--r--    1 bazik    users         413 Jul 14 15&#58;09 coffdemo.asm<br />-rw-r-----    1 bazik    users         229 Jul  8 23&#58;37 coffdemo.o<br />-rw-r--r--    1 bazik    users         200 Jul  8 23&#58;36 writemsg.asm<br />-rw-r-----    1 bazik    users         124 Jul  8 23&#58;37 writemsg.o<br />bazik@antares coffdemo $ rm *.o<br />bazik@antares coffdemo $ fasm coffdemo.asm coffdemo.o   <br />flat assembler  version 1.39<br />3 passes, 229 bytes.<br />bazik@antares coffdemo $ fasm writemsg.asm writemsg.o   <br />flat assembler  version 1.39<br />1 passes, 124 bytes.<br />bazik@antares coffdemo $ ld coffdemo.o writemsg.o -o coffdemo<br />coffdemo.o&#58; file not recognized&#58; File format not recognized<br />bazik@antares coffdemo $ <br /></code></pre><br /><br />Which versions of GCC and LD did you use for development?<br />The problem is only in the COFF format...<br /><br />If you need more information, just tell me what you need to know about my system.<br /><br />regards,<br />bazik</div>
    <div class="meta">Posted on 2002-08-06 18:46:19 by bazik</div>
   </div>
   <div class="post" id="post-52018">
    <div class="subject"><a href="#post-52018">Suggestion for FASM - Linux</a></div>
    <div class="body">It does not depend on version of bintools, but on what emulations are supported (you can set it up and recompile to support different set of emulations). You can get the list of emulations by typing &quot;ld -V&quot;.</div>
    <div class="meta">Posted on 2002-08-06 18:57:07 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-52022">
    <div class="subject"><a href="#post-52022">Suggestion for FASM - Linux</a></div>
    <div class="body">Hmm... ok, learned something new again :)<br />Which kind of emulation do I need?<br /><br /><pre><code><br />bazik@antares coding $ ld -V <br />GNU ld version 2.12.90.0.7 20020423<br />  Supported emulations&#58;<br />   elf_i386<br />   i386linux<br /></code></pre></div>
    <div class="meta">Posted on 2002-08-06 19:56:15 by bazik</div>
   </div>
   <div class="post" id="post-52054">
    <div class="subject"><a href="#post-52054">Suggestion for FASM - Linux</a></div>
    <div class="body">You need i386coff emulation.</div>
    <div class="meta">Posted on 2002-08-07 02:25:24 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-52325">
    <div class="subject"><a href="#post-52325">Suggestion for FASM - Linux</a></div>
    <div class="body">I tried about 10 times now to compile a GCC crosscompiler for i386-coff (i386-pc-coff) and always failed :(<br /><br />Just curious, why can NASM compile a linkable object without i386-coff emulation? (nasm -f elf)<br /><br />Is there a way to do/implement this in FASM, too?</div>
    <div class="meta">Posted on 2002-08-09 08:15:34 by bazik</div>
   </div>
   <div class="post" id="post-52554">
    <div class="subject"><a href="#post-52554">Suggestion for FASM - Linux</a></div>
    <div class="body">Well, I also don't know how to recompile binutils to support i386coff when they don't; but on some servers on which I have shell accounts ld supports it. Maybe we should mail someone at gnu.org? This is Win32Asm forum, we are allowed to be lame about Linux. :grin: <br /><br />After I have implemented COFF output (and that was a hard work...) it should be quite easy to implement ELF output also. I have already downloaded a good docs on ELF format, now I need to extract from these docs what I really need, and maybe I will add this format also in some future versions (altough after reading those docs I think the COFF format is really much finer). But first I want to finally release the &quot;coffee&quot; (1.40) with the good documentation. Coming soon... (at least program, the docs are growing slowly)</div>
    <div class="meta">Posted on 2002-08-10 17:59:29 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-53016">
    <div class="subject"><a href="#post-53016">Suggestion for FASM - Linux</a></div>
    <div class="body">And what do you think about COFF2ELF converter?</div>
    <div class="meta">Posted on 2002-08-12 17:51:56 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-53052">
    <div class="subject"><a href="#post-53052">Suggestion for FASM - Linux</a></div>
    <div class="body">Sounds good :)</div>
    <div class="meta">Posted on 2002-08-12 23:59:14 by bazik</div>
   </div>
  </div>
 </body>
</html>