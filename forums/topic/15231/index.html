<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Dll offset problem - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15231" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=15231">Dll offset problem</a></p>
   <div class="post" id="post-118322">
    <div class="subject"><a href="#post-118322">Dll offset problem</a></div>
    <div class="body">Hi guys,<br /><br />I have a little problem:<br /><br />I have created a dll file. There, I have put a function, which just moves a message to eax.  Just like that:<br /><br />.<br />.<br />.<br />.data   msg db &quot;Hello&quot;,0<br />.<br />.<br />.code <br />.<br />.<br />func proc <br />    mov eax, offset msg<br />    ret <br />func endp <br />.<br />.<br /><br /><br />But, the message isnt really put to eax. Just the Hex Values. But I want to have the string there. (For the stringlength function)<br /><br />If i do the exactly same thing with a normal exe file everything works fine. Where is the problem?<br /><br /><br />Hope you got the point...<br /><br />Kreatief</div>
    <div class="meta">Posted on 2003-09-16 10:35:49 by Kreatief</div>
   </div>
   <div class="post" id="post-118331">
    <div class="subject"><a href="#post-118331">Dll offset problem</a></div>
    <div class="body"><strong>mov eax, offset string</strong> is the same as moving the address of the string &quot;string&quot; to eax. So what's your exact problem? I do not understand your question.</div>
    <div class="meta">Posted on 2003-09-16 11:39:17 by roticv</div>
   </div>
   <div class="post" id="post-118336">
    <div class="subject"><a href="#post-118336">Dll offset problem</a></div>
    <div class="body">If i use the above code segment in a normal exe, the string (as real ascii) is loaded to eax.<br /><br />Something like that: mov eax, prog.402000<br /><br />The result is soemthing like that in a debugger: eax    xxxxxxh (&quot;Hello&quot;, Ascii)<br /><br />But the same code in a dll, if i start the function, the result is just a dword of the first hex values.<br /><br />Like that: mov eax, dword ptr ds:<br /><br /><br />I want to see an Ascii String like &quot;Hello&quot; and not 48656C6Ch. Because I want to test the length of the string with the strlength function. <br /><br />Its not easy to explain. I hope you know what I mean...<br /><br /> Oh shit, just forgot what I said. Everything works fine. It was a little mistake, which was a big waste of time... Sorry for this Thread... Wish you a nice day...<br /><br /><br />Kreatief</div>
    <div class="meta">Posted on 2003-09-16 11:59:43 by Kreatief</div>
   </div>
  </div>
 </body>
</html>