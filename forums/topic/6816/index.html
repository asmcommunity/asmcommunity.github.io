<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Problems with defining Struct (FindFirstFile) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6816" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=6816">Problems with defining Struct (FindFirstFile)</a></p>
   <div class="post" id="post-49213">
    <div class="subject"><a href="#post-49213">Problems with defining Struct (FindFirstFile)</a></div>
    <div class="body">Hi!<br /><br />I'm a Newbie in Asm.<br /><br />I got the following prob:<br /><br />I want to search for a File with FindFirstFile<br />It needs to parameters:<br />    LPCTSTR lpFileName,	// pointer to name of file to search for  <br />    LPWIN32_FIND_DATA lpFindFileData 	// pointer to returned information <br /><br />First Parameter is:<br /><br />.data<br />SearchString db &quot;*.mp3&quot;,0<br /><br />right?<br /><br />But I dont know how to define WIN32_FIND_DATA. Its a Struct and I tried to define it with:<br /><br />.data?<br />FileInfo WIN32_FIND_DATA ?<br /><br />But it doesnt Work.<br /><br />Thats my whole Programm:<br /><br /><pre><code><br />.386<br />.model flat,stdcall<br />option casemap&#58;none<br /><br />include /masm32/include/windows.inc<br />include /masm32/include/user32.inc<br />include /masm32/include/kernel32.inc<br />includelib /masm32/lib/kernel32.lib<br />includelib /masm32/lib/user32.lib<br /><br /><br />.DATA<br />SearchString db &quot;*.mp3&quot;,0<br /><br /><br />.DATA?<br />FileInfo WIN32_FIND_DATA ?<br /><br /><br />.CODE<br />start&#58;<br />    invoke FindFirstFile,ADDR SearchString,ADDR FileInfo<br />    <br />    <br />    invoke ExitProcess,NULL<br />end start<br /></code></pre><br /><br />Whats wrong? :(<br /><br />Errormsg: <br />C:\masm32\Proggy\Proggy.asm(17) : error A2179: structure improperly initialized<br />C:\masm32\Proggy\Proggy.asm(17) : error A2008: syntax error : in structure<br />C:\masm32\Proggy\Proggy.asm(22) : error A2006: undefined symbol : DateiInfo<br />C:\masm32\Proggy\Proggy.asm(22) : error A2114: INVOKE argument type mismatch : a<br />rgument : 2</div>
    <div class="meta">Posted on 2002-07-21 17:05:05 by Subby</div>
   </div>
   <div class="post" id="post-49214">
    <div class="subject"><a href="#post-49214">Problems with defining Struct (FindFirstFile)</a></div>
    <div class="body"><pre><code><br />FileInfo            WIN32_FIND_DATA &lt;&gt;<br /></code></pre><br /><br />Please use the search engine of this Forum next time.<br />You just need to enter &quot;win32_find_data&quot; as keyword <br />to find some source code wich uses this structure.<br /><br />Thanks!<br /><br />bAZiK</div>
    <div class="meta">Posted on 2002-07-21 17:09:12 by bazik</div>
   </div>
   <div class="post" id="post-49215">
    <div class="subject"><a href="#post-49215">Problems with defining Struct (FindFirstFile)</a></div>
    <div class="body">Hi!<br /><br />Thanks for the fast reply! :)<br /><br />Yes, of course i will try the search next time, first!<br /><br /><br /><br />PS: Very cool Forum about Asm &amp; Sorry for my bad englisch ;) <br />(I'm German)</div>
    <div class="meta">Posted on 2002-07-21 17:16:20 by Subby</div>
   </div>
   <div class="post" id="post-49216">
    <div class="subject"><a href="#post-49216">Problems with defining Struct (FindFirstFile)</a></div>
    <div class="body">oh and since you're new, we just recently made a FAQ forum.<br /><br />Please check out the sticky post there and tell us if this works for you. Is it clear/easy enough? Does it need other things? Let us know in the FAQ thread in the 'Main' forum please :)<br /><br />Thx.<br /><br />-H-</div>
    <div class="meta">Posted on 2002-07-21 17:22:35 by Hiroshimator</div>
   </div>
  </div>
 </body>
</html>