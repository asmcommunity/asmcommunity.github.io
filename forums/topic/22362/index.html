<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to write Winasm to read CPU MSR in WinXP  - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22362" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22362">How to write Winasm to read CPU MSR in WinXP </a></p>
   <div class="post" id="post-167869">
    <div class="subject"><a href="#post-167869">How to write Winasm to read CPU MSR in WinXP </a></div>
    <div class="body">I would like to read CPU MSR in winXP to get some CPU information, but it always get blue screen , Does anyone have sample code can do that ?<br />I use below macro to read MSR :<br />_RDMSR macro<br />db 0fh<br />db 32h<br />ebdm<br /><br /><br />many thanks~</div>
    <div class="meta">Posted on 2005-11-14 01:53:29 by sakhir10</div>
   </div>
   <div class="post" id="post-167871">
    <div class="subject"><a href="#post-167871">Re: How to write Winasm to read CPU MSR in WinXP </a></div>
    <div class="body">Windows is a protected operating system, and will not let you directly access something as critical as the MSRs.<br /><br />I wrote some cross 9x/NT code (ring0hack on 9x, driver on NT) to access MSRs though. It was written a while ago and is quick-and-dirty (ie, use at your own risk), but I&#39;ve used it successfully to do things like changing CPUID string on my system.<br /><br />Have a look at the attached zip.<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1198" target="_blank">ring3msr_20040417.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-11-14 03:25:44 by f0dder</div>
   </div>
   <div class="post" id="post-167899">
    <div class="subject"><a href="#post-167899">Re: How to write Winasm to read CPU MSR in WinXP </a></div>
    <div class="body">Thank you sir ! I just want to write a small tool to check MSR data for testing .<br /> By the way ,I unzip the file to get ring3msr_dist.zip.sig and ring3msr_dist.zip files . I do NOT know how to ue it .Could you help me ?<br /></div>
    <div class="meta">Posted on 2005-11-14 20:01:14 by sakhir10</div>
   </div>
   <div class="post" id="post-167900">
    <div class="subject"><a href="#post-167900">Re: How to write Winasm to read CPU MSR in WinXP </a></div>
    <div class="body">The .sig file is a PGP (well, gnupg) file for verifying the integrity of the ring3msr_dist.zip file - you can safely ignore it, and unpack the ring3msr_dist.zip which has the actual source and example :)<br /></div>
    <div class="meta">Posted on 2005-11-14 21:12:37 by f0dder</div>
   </div>
   <div class="post" id="post-167930">
    <div class="subject"><a href="#post-167930">Re: How to write Winasm to read CPU MSR in WinXP </a></div>
    <div class="body">I&#39;m sorry that I still can NOT unzip the ring3msr_dist.zip file , it got the below error message :<br /><br />End-of-central-directory signature not found.&nbsp; Either this file is not a Zip file, or it constitutes one disk of a multi-part Zip file.<br /><br />I can unzip the ring3msr_20040417.zip but can NOT unzip the ring3msr_dist.zip .<br />Could you kindly direct mail the sample code to me ? <br />Many thanks~ </div>
    <div class="meta">Posted on 2005-11-15 20:45:21 by sakhir10</div>
   </div>
   <div class="post" id="post-167931">
    <div class="subject"><a href="#post-167931">Re: How to write Winasm to read CPU MSR in WinXP </a></div>
    <div class="body">Try re-downloading the file, it unpacks perfectly here - ring3msr_dist.zip should be 29.8kb (30.561 bytes) long.<br /></div>
    <div class="meta">Posted on 2005-11-15 21:11:50 by f0dder</div>
   </div>
  </div>
 </body>
</html>