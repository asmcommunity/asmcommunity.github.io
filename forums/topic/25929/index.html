<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Assembler code translate to C Language - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25929" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25929">Assembler code translate to C Language</a></p>
   <div class="post" id="post-189029">
    <div class="subject"><a href="#post-189029">Assembler code translate to C Language</a></div>
    <div class="body">Hi, i have a piece of code in assembler, and i do not understand the switch statement in it.&nbsp; This is an assigment, i did two of those pieces of code, but this one i can not figure out, i can not see even what is asking me in the switch command.&nbsp; Any help will be really appreciate, here is the piece of code in assemble, if anyone can translate to C, i will really appreciate:<br /><br />08048b7b &lt;phase_3&gt;:<br /> 8048b7b:	55&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	push&nbsp;  %ebp<br /> 8048b7c:	89 e5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; %esp,%ebp<br /> 8048b7e:	83 ec 24&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	sub&nbsp; &nbsp; $0x24,%esp<br /> 8048b81:	8d 45 f8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	lea&nbsp; &nbsp; 0xfffffff8(%ebp),%eax<br /> 8048b84:	50&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	push&nbsp;  %eax<br /> 8048b85:	8d 45 f7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	lea&nbsp; &nbsp; 0xfffffff7(%ebp),%eax<br /> 8048b88:	50&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	push&nbsp;  %eax<br /> 8048b89:	8d 45 fc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	lea&nbsp; &nbsp; 0xfffffffc(%ebp),%eax<br /> 8048b8c:	50&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	push&nbsp;  %eax<br /> 8048b8d:	68 26 97 04 08&nbsp; &nbsp; &nbsp;  	push&nbsp;  $0x8049726<br /> 8048b92:	ff 75 08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	pushl&nbsp; 0x8(%ebp)<br /> 8048b95:	e8 de fc ff ff&nbsp; &nbsp; &nbsp;  	call&nbsp;  8048878 &lt;sscanf@plt&gt;<br /> 8048b9a:	83 c4 20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	add&nbsp; &nbsp; $0x20,%esp<br /> 8048b9d:	83 f8 02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	cmp&nbsp; &nbsp; $0x2,%eax<br /> 8048ba0:	7f 05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jg&nbsp; &nbsp;  8048ba7 &lt;phase_3+0x2c&gt;<br /> 8048ba2:	e8 99 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048ba7:	83 7d fc 07&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	cmpl&nbsp;  $0x7,0xfffffffc(%ebp)<br /> 8048bab:	0f 87 bd 00 00 00&nbsp; &nbsp; 	ja&nbsp; &nbsp;  8048c6e &lt;phase_3+0xf3&gt;<br /> 8048bb1:	8b 45 fc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	mov&nbsp; &nbsp; 0xfffffffc(%ebp),%eax<br /> 8048bb4:	ff 24 85 30 97 04 08 	jmp&nbsp; &nbsp; *0x8049730(,%eax,4)<br /> 8048bbb:	81 7d f8 37 01 00 00 	cmpl&nbsp;  $0x137,0xfffffff8(%ebp)<br /> 8048bc2:	0f 84 af 00 00 00&nbsp; &nbsp; 	je&nbsp; &nbsp;  8048c77 &lt;phase_3+0xfc&gt;<br /> 8048bc8:	e8 73 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048bcd:	b0 69&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x69,%al<br /> 8048bcf:	e9 a5 00 00 00&nbsp; &nbsp; &nbsp;  	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048bd4:	81 7d f8 7d 01 00 00 	cmpl&nbsp;  $0x17d,0xfffffff8(%ebp)<br /> 8048bdb:	0f 84 96 00 00 00&nbsp; &nbsp; 	je&nbsp; &nbsp;  8048c77 &lt;phase_3+0xfc&gt;<br /> 8048be1:	e8 5a 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048be6:	b0 69&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x69,%al<br /> 8048be8:	e9 8c 00 00 00&nbsp; &nbsp; &nbsp;  	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048bed:	81 7d f8 20 03 00 00 	cmpl&nbsp;  $0x320,0xfffffff8(%ebp)<br /> 8048bf4:	75 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jne&nbsp; &nbsp; 8048bfa &lt;phase_3+0x7f&gt;<br /> 8048bf6:	b0 77&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x77,%al<br /> 8048bf8:	eb 7f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048bfa:	e8 41 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048bff:	b0 77&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x77,%al<br /> 8048c01:	eb 76&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c03:	81 7d f8 9f 02 00 00 	cmpl&nbsp;  $0x29f,0xfffffff8(%ebp)<br /> 8048c0a:	75 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jne&nbsp; &nbsp; 8048c10 &lt;phase_3+0x95&gt;<br /> 8048c0c:	b0 75&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x75,%al<br /> 8048c0e:	eb 69&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c10:	e8 2b 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c15:	b0 75&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x75,%al<br /> 8048c17:	eb 60&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c19:	83 7d f8 35&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	cmpl&nbsp;  $0x35,0xfffffff8(%ebp)<br /> 8048c1d:	75 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jne&nbsp; &nbsp; 8048c23 &lt;phase_3+0xa8&gt;<br /> 8048c1f:	b0 61&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x61,%al<br /> 8048c21:	eb 56&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c23:	e8 18 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c28:	b0 61&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x61,%al<br /> 8048c2a:	eb 4d&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c2c:	81 7d f8 ac 03 00 00 	cmpl&nbsp;  $0x3ac,0xfffffff8(%ebp)<br /> 8048c33:	75 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jne&nbsp; &nbsp; 8048c39 &lt;phase_3+0xbe&gt;<br /> 8048c35:	b0 7a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x7a,%al<br /> 8048c37:	eb 40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c39:	e8 02 08 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c3e:	b0 7a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x7a,%al<br /> 8048c40:	eb 37&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c42:	81 7d f8 bd 03 00 00 	cmpl&nbsp;  $0x3bd,0xfffffff8(%ebp)<br /> 8048c49:	75 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jne&nbsp; &nbsp; 8048c4f &lt;phase_3+0xd4&gt;<br /> 8048c4b:	b0 70&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x70,%al<br /> 8048c4d:	eb 2a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c4f:	e8 ec 07 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c54:	b0 70&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x70,%al<br /> 8048c56:	eb 21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c58:	81 7d f8 80 03 00 00 	cmpl&nbsp;  $0x380,0xfffffff8(%ebp)<br /> 8048c5f:	75 04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jne&nbsp; &nbsp; 8048c65 &lt;phase_3+0xea&gt;<br /> 8048c61:	b0 6d&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x6d,%al<br /> 8048c63:	eb 14&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c65:	e8 d6 07 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c6a:	b0 6d&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x6d,%al<br /> 8048c6c:	eb 0b&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c6e:	e8 cd 07 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c73:	b0 72&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x72,%al<br /> 8048c75:	eb 02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	jmp&nbsp; &nbsp; 8048c79 &lt;phase_3+0xfe&gt;<br /> 8048c77:	b0 69&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	mov&nbsp; &nbsp; $0x69,%al<br /> 8048c79:	3a 45 f7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	cmp&nbsp; &nbsp; 0xfffffff7(%ebp),%al<br /> 8048c7c:	74 05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 	je&nbsp; &nbsp;  8048c83 &lt;phase_3+0x108&gt;<br /> 8048c7e:	e8 bd 07 00 00&nbsp; &nbsp; &nbsp;  	call&nbsp;  8049440 &lt;explode_bomb&gt;<br /> 8048c83:	c9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	leave&nbsp; <br /> 8048c84:	c3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  	ret&nbsp; </div>
    <div class="meta">Posted on 2007-05-02 23:19:44 by rbulus</div>
   </div>
   <div class="post" id="post-189036">
    <div class="subject"><a href="#post-189036">Re: Assembler code translate to C Language</a></div>
    <div class="body">Ick, AT&amp;T style assembly.<br />Ick, disassembly dump - we tend to not be very happy about those here.<br />Ick, homework assignment?<br /><br />A couple of pieces of advice, though: convert the 0xFFFFFFxx to signed isntead of unsigned numbers, and give them names.<br />Give <strong>phase_3+xx</strong> unique names, and <strong>insert those labels</strong>.<br />Graph it visually.<br /><br />What is this an assignment for, and are you just given the disassembly listings, or executables?<br /></div>
    <div class="meta">Posted on 2007-05-03 03:47:17 by f0dder</div>
   </div>
   <div class="post" id="post-189047">
    <div class="subject"><a href="#post-189047">Re: Assembler code translate to C Language</a></div>
    <div class="body">Thanks for the help, i have done two phases, this is the phase number three.&nbsp; I just can not figure out.&nbsp; This is a homework name BombLab, it has 6 phases, it gave you the exe and the c code, but you can not do anything with the c code, the idea is to use gbd for everything.&nbsp; I was asking for a little help when i can work it after it.<br /><br />Thanks</div>
    <div class="meta">Posted on 2007-05-03 11:15:15 by rbulus</div>
   </div>
   <div class="post" id="post-189063">
    <div class="subject"><a href="#post-189063">Re: Assembler code translate to C Language</a></div>
    <div class="body">hm, sounds like a weird assignment. Get a better disassembler, especially if there&#39;s debug info present in the exe.<br /></div>
    <div class="meta">Posted on 2007-05-03 17:54:11 by f0dder</div>
   </div>
   <div class="post" id="post-189066">
    <div class="subject"><a href="#post-189066">Re: Assembler code translate to C Language</a></div>
    <div class="body">you didn&#39;t give the table at 0x8049730, nor did you give string at 0x8049726 - nevertheless i foresaw it.<br /><br />does your C code look like this:<br /><br /><pre><code>phase3 (char *inputbuff)<br />{<br />dword X1,X2;<br />byte X3,Y;<br /><br />if (sscanf(inputbuff,&quot;%u %u %u&quot;,&amp;X1,&amp;X3,&amp;X2) &lt;= 2) explode_bomb();<br /><br />if (X1&lt;=7) {<br />	switch (X1) {<br />	/*<br />	table at 0x8049730 should be<br />	dd 0x8048bbb,0x8048bd4,0x8048bed,0x8048c03<br />	dd 0x8048c19,0x8048c2c,0x8048c42,0x8048c58<br />	*/<br />	<br />	case 0:<br />		if (X2==311) Y=105;<br />		else { explode_bomb(); Y=105; }<br />		break;<br />	case 1:<br />		if (X2==381) Y=105;<br />		else { explode_bomb(); Y=105; }<br />		break;<br />	case 2:<br />		if (X2==800) Y=119;<br />		else { explode_bomb(); Y=119; }<br />		break;<br />	case 3:<br />		if (X2==671) Y=117;<br />		else { explode_bomb(); Y=117; }<br />		break;<br />	case 4:<br />		if (X2==53) Y=97;<br />		else { explode_bomb(); Y=97; }<br />		break;<br />	case 5:<br />		if (X2==940) Y=122;<br />		else { explode_bomb(); Y=122; }<br />		break;<br />	case 6:<br />		if (X2==957) Y=112;<br />		else { explode_bomb(); Y=112; }<br />		break;<br />	case 7:<br />		if (X2==896) Y=109;<br />		else { explode_bomb(); Y=109; }<br />		break;<br />	default:<br />		Y=114;<br />	}<br />}<br /><br />if (Y!=X3) explode_bomb();<br /><br />}<br /></code></pre></div>
    <div class="meta">Posted on 2007-05-03 19:18:04 by drizz</div>
   </div>
   <div class="post" id="post-189080">
    <div class="subject"><a href="#post-189080">Re: Assembler code translate to C Language</a></div>
    <div class="body">Thanks a lot, this C code works fine, the only the input is %d %c %d, it is giving in the line: <br /><br />8048b8d:&nbsp;  68 26 97 04 08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; push&nbsp;  $0x8049726<br /><br />But thanks again a lot.<br /><br /></div>
    <div class="meta">Posted on 2007-05-04 13:54:33 by rbulus</div>
   </div>
  </div>
 </body>
</html>