<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Uses multiple bitmaps - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7987" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=7987">Uses multiple bitmaps</a></p>
   <div class="post" id="post-58326">
    <div class="subject"><a href="#post-58326">Uses multiple bitmaps</a></div>
    <div class="body">I am writing a program that will do this, <a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=7748">http://www.asmcommunity.net/board/index.php?topic=7748</a>.<br /><br />  I have questions about painting with bitmaps.  I have the chess board as my background( a bitmap of course ), all I do is SelectObject and BitBlt.  But is there a better way to paint this background?  What happens if I want to move it to a different place in the client area, do I just BitBlt to a different location?<br /><br />  Also I have to paint multiple chess pieces( 24 pieces ), I have read multiple posts here about painting transparent bitmaps( I found one from NaN ) and also the one at <a target="_blank" href="www.winprog.org,">www.winprog.org,</a> but that code seems to be for painting one bitmap, is this going to be a bad idea to use it for 24 bitmaps?  :confused: Or is it just going to be plain hard what I want to do?<br /><br />I am wanting to get the GUI first, the parsing and storing of data won't be that hard for me( <span style="font-size:9px>I think</span> )<br />Thanks,<br />gorshing</div>
    <div class="meta">Posted on 2002-09-17 10:33:27 by gorshing</div>
   </div>
   <div class="post" id="post-58332">
    <div class="subject"><a href="#post-58332">Uses multiple bitmaps</a></div>
    <div class="body">I was once writing a program to serve as an editor for 2d game maps. Needless to say there was alot of bitblt-ing involved. Despite the fact that I was using DirectX for the game, once I started programming the editor my mind just went to GDI mode. It was a pretty bad choice becuase performance was quite poor. Even with using ScrollWindow and painting only the update rectangle, the flicker was quite noticeable. I ended up redoing the graphics rendering code to use DirectDraw and of course it now integrates better with the game.<br /><br />I haven't clicked on the link yet, but based on you said in your post, it sounds like  like a pretty good fit for DirectDraw. Transparency is a breeze in DD. No bitmasks and crap. Just specify which color in your graphic should be transparent and DirectDraw does not transfer it during a blt. <br /><br />If you haven't used DirectX before its a bit of an investment but worth it IMO if you are going to be doing graphics stuff.<br /><br /><div class="quote"><br />Or is it just going to be plain hard what I want to do?<br /></div><br /><br />I haven't done alot of transparency with the GDI functions but I suspect the answer to your above question is yes. <br /><br /><br />EDIT: Just did a quick MSDN library search. If you want to go the GDI route maybe you should check out the AlphaBlend function. I haven't used it before so I can't really say much apart from that. Probably somebody else will be of more help apart from suggesting that you do something totally different...heh</div>
    <div class="meta">Posted on 2002-09-17 11:18:07 by Thanatos</div>
   </div>
   <div class="post" id="post-58333">
    <div class="subject"><a href="#post-58333">Uses multiple bitmaps</a></div>
    <div class="body">I'd say 12 pieces would be enough. No need to have 2 towers (etc) of each color.<br /><br />Just put all 12 chess pieces in 1 bitmap to start with. keep them all at exactly the same distance so that you can access each piece from an array once you got the bitmap in an DC. <br /><br /><strong> (white - normal pieces)<br /><strong> (white - mask for pieces)<br /><strong> (black - normal pieces)<br /><strong> (black - mask for pieces)<br /><br />So, all you have to calculate the x to where a piece is. As you always know the y.<br /><br /><br />PS: I don't know the names of chess pieces in english :stupid: <br />Here I just used the german initials of each piece from left to right.</div>
    <div class="meta">Posted on 2002-09-17 11:26:02 by JimmyClif</div>
   </div>
   <div class="post" id="post-58335">
    <div class="subject"><a href="#post-58335">Uses multiple bitmaps</a></div>
    <div class="body">hello gorshing (my last post today, pheew :)  )<br /><br /><div class="quote"><br />But is there a better way to paint this background?<br /></div><br /><pre><code><br />WinMain         PROC hInst&#58;DWORD,hPrevInst&#58;DWORD,CmdLine&#58;DWORD,CmdShow&#58;DWORD<br />                LOCAL wc&#58;WNDCLASSEX<br />...<br />        invoke  LoadBitmap,hInst,BGPicID<br />        mov     hBitmap01,eax<br />        invoke  CreatePatternBrush,eax<br />        mov     wc.hbrBackground,eax<br />...<br /></code></pre><br /><div class="quote"><br />What happens if I want to move it to a different place in the client area, do I just BitBlt to a different location?<br /></div><br />in this case you have to draw it via bitblt on wm_paint to your device-context (which you'll find in<br />the paintstruct structure that BeginPaint offers). bitblt features x and y offsets so you can drop<br />your picture where you want... another thing, you mentioned  that you use selectobject on your dc.<br />a d-context doesn't allow ANY drawing operation until you select a bitmap into that device... here's<br />what i would do (backbuffered so it doesn't flicker)<br /><pre><code><br />.DATA	MainDC		DD ?<br />	BackDC		DD ?<br />	hBitmap01	DD ?<br /><br />.ELSEIF uMSG ==		WM_CREATE<br />        INVOKE          CreateCompatibleDC,NULL<br />        MOV             MainDC, EAX<br /><br />        INVOKE          GetDC, NULL<br />        PUSH            EAX<br />        INVOKE          CreateCompatibleBitmap,EAX,1500,1500 ; CREATE A BIG BITMAP<br />        PUSH            EAX<br />        INVOKE          SelectObject, MainDC, EAX            ; SETUP DC<br />        POP             EAX<br />        INVOKE          DeleteObject, EAX<br />        POP             EAX<br />        INVOKE          ReleaseDC,hWnd, EAX<br /><br />        INVOKE          LoadBitmap, hInstance, BGPICID       ; LOAD BACKGROUND-PIC<br />        MOV             hBitmap01, EAX                   <br /><br />        INVOKE          CreateCompatibleDC,NULL<br />        MOV             BackDC, EAX<br />        INVOKE          SelectObject, EAX, hBitmap01<br /><br />.ELSEIF uMSG ==         WM_PAINT        <br />        INVOKE          BeginPaint, hWnd,ADDR ps                 <br />        <br />        INVOKE          BitBlt, MainDC, 0, 0, PICTURE_W, PICTURE_H, BackDC, 0, 0, SRCCOPY <br /><br />			;DRAW THE CHESS FIGURES HERE TO THE MainDC<br /><br />	INVOKE          BitBlt, ps.hdc, 0, 0, ps.rcPaint.right, ps.rcPaint.bottom, MainDC, 0, 0, SRCCOPY               <br />                                <br />        INVOKE          EndPaint,hWnd,ADDR ps<br /><br />.ELSEIF uMSG ==         WM_DESTROY        <br />        INVOKE          DeleteDC, MainDC    <br />	INVOKE          DeleteDC, BackDB<br />	INVOKE          DeleteObject, hBitmap01<br /></code></pre><br />it creates two dc's selects a compatible bitmap to the backbuffer-dc so that it allows<br />drawing actions from now on... the rest is easy...<br /><div class="quote"><br />I have read multiple posts here about painting transparent bitmaps<br /></div><br />please see the attachement, it draws three transparent bitmaps to a black surface.<br />the first pixel is interpreted as transparent color... the routines are very old many<br />things are just nonsense, for example you have to pass the bitmap width/height...<br />thats stupid because you can get that information with the GetObject API <br />automaticly...</div>
    <div class="meta">Posted on 2002-09-17 11:27:18 by mob</div>
   </div>
   <div class="post" id="post-58336">
    <div class="subject"><a href="#post-58336">Uses multiple bitmaps</a></div>
    <div class="body">forgot the attachement</div>
    <div class="meta">Posted on 2002-09-17 11:28:15 by mob</div>
   </div>
  </div>
 </body>
</html>