<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>IOREQ Structure Problem in IFS.INC - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3598" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=3598">IOREQ Structure Problem in IFS.INC</a></p>
   <div class="post" id="post-24014">
    <div class="subject"><a href="#post-24014">IOREQ Structure Problem in IFS.INC</a></div>
    <div class="body">The Problem is--&gt;<br /><br />1) Ioreq Structure Size ??? Problem compiling seen IFS.inc File, IOreq struct had some % &amp; $<br />   hence when i excluded some element from that struct by placing';' then there was no problem in    compiling BUT i want to use them(excluded element) what to do????????<br /><br />2) Also want to know the IOreq size that i want so that i can give it's size in (i.e sam    Procedure)  ....ArgVar Param3,??? PLz see in the code's below<br /><br />3) how to define a Procedure whose parameter's r filled by system<br />###############<br />I am calling a Service(i.e XYZ) which requires only the address of the Procedure(i.e Sam),&amp; when system call's this procedure later it pass some Parameter's to the procedure,hence I need to collect those passed parameter's to the procedure(i.e sam ) by the system, on entrying the Procedure, normally we do define Procedure as follow's<br /><br />BeginProc Sam <br /><br />EndProc  Sam <br /><br />But, if i have to pass the paramter's what's the syntax to pass the paramter's i think this can be done with ccall &amp; Argvar ..as follows<br /><br />BeginProc Sam, CCALL<br /><br />ArgVar Param1, DWORD<br />ArgVar Param2, WORD  ;--&gt; this can be a Int<br />ArgVar Param3, ???   ;--&gt; i want to know the Size of IOreq<br /><br />LocalVar Local1, DWORD<br />LocalVar Local2, WORD <br />LocalVar Local3,&lt;size IOreq&gt; <br /><br />EnterProc<br />  .........<br />   ...........<br /> .......<br />  ...........<br />LeaveProc<br />RETF<br />EndProc MyProc<br /><br />***** IMP **** <br />Also do suggest me that should i save Register's &amp; pop them when i will Return<br /><br />i Think that this is right way for collecting the parameter's from the system ..ok Plz correct me if i am wrong <br />##############################<br />so Plz help! or mail me ur suggestion's ( <a href="mailto:gj007_in@yahoo.com">gj007_in@yahoo.com</a> )<br />Thank's in Advance....</div>
    <div class="meta">Posted on 2002-02-12 13:25:42 by pt_sniffer</div>
   </div>
   <div class="post" id="post-24554">
    <div class="subject"><a href="#post-24554">Thought that ppl didn't get me!</a></div>
    <div class="body">When i include these line that is declaration of Structure Ioreq<br />in source code of VxD :-<br /><br />----Start--- Here-------<br /><br />VxD_PAGEABLE_DATA_SEG<br /><br /> pir ioreq &lt; &gt; ; variable to Ioreq structure defined in IFS.INC <br />  ........<br />  ...... <br />VxD_PAGEABLE_DATA_ENDS<br /><br />------End--Here--------<br /><br />then i get error as follow's:-<br /><br />\masm32\include\ddk\INC_WIN98_IFS.INC(271) : error A2008: syntax error : $I<br />\masm32\include\ddk\INC_WIN98_IFS.INC(273) : error A2008: syntax error : uid_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(274) : error A2008: syntax error : sfn_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(275) : error A2008: syntax error : pid_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(276) : error A2008: syntax error : path_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(278) : error A2008: syntax error : ubuffer<br />_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(281) : error A2008: syntax error : rh_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(282) : error A2008: syntax error : fh_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(283) : error A2008: syntax error : pos_t<br />\masm32\include\ddk\INC_WIN98_IFS.INC(286) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(287) : error A2006: undefined symbol : fsd<br />work<br />\masm32\include\ddk\INC_WIN98_IFS.INC(373) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(374) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(375) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(383) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(408) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(997) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(1261) : error A2008: syntax error : $P<br />\masm32\include\ddk\INC_WIN98_IFS.INC(1262) : error A2008: syntax error : $P<br /><br />*****<br /><br />So i peeped in the IFS.INC &amp; got the struct as follow's <br /><br />######## Struct in IFS.INC File ########<br /><br />ioreq 	struc<br />	% ir_length $I ?		; length of user buffer (eCX)<br />	ir_flags db ?			; misc. status flags (AL)<br />	% ir_user uid_t ?		; user ID for this request<br />	% ir_sfn sfn_t ?		; System File Number of file handle<br />	% ir_pid pid_t ?		; process ID of requesting task<br />	% ir_ppath path_t ?		; unicode pathname<br />	ir_aux1 dd ?			; secondary user data buffer (CurDTA)<br />	% ir_data ubuffer_t ?		; ptr to user data buffer (DS:eDX)<br />	ir_options dw ?			; request handling options<br />	ir_error dw ?			; error code (0 if OK)<br />	% ir_rh rh_t ?			; resource handle<br />	% ir_fh fh_t ?			; file (or find) handle<br />	% ir_pos pos_t ?		; file position for request<br />	ir_aux2 dd ?			; misc. extra API parameters<br />	ir_aux3 dd ?			; misc. extra API parameters<br />	% ir_pev $P ?			; ptr to IFSMgr event for async requests<br />	ir_fsd db (size fsdwork) dup (?);		; Provider work space<br />ioreq	ends<br /><br />########### Struct End's Here ######################<br /><br />i thought the error is due to the % &amp; $ in the structure element say for eg <br /> <br /> % ir_length $I  ?  ; in the above ioreq structure<br /><br /><br />So i excluded them by putting ';' in the ioreq structure  in IFS.INC as follow's<br /><br />######## Struct in IFS.INC File ########<br /><br />ioreq 	struc<br />   ; % ir_length $I ?		; length of user buffer (eCX)<br />	ir_flags db ?			; misc. status flags (AL)<br />   ; % ir_user uid_t ?		; user ID for this request<br />   ; % ir_sfn sfn_t ?		; System File Number of file handle<br />   ; % ir_pid pid_t ?		; process ID of requesting task<br />   ; % ir_ppath path_t ?		; unicode pathname<br />	ir_aux1 dd ?			; secondary user data buffer (CurDTA)<br />   ; % ir_data ubuffer_t ?		; ptr to user data buffer (DS:eDX)<br />	ir_options dw ?			; request handling options<br />	ir_error dw ?			; error code (0 if OK)<br />   ; % ir_rh rh_t ?			; resource handle<br />   ; % ir_fh fh_t ?			; file (or find) handle<br />   ; % ir_pos pos_t ?		; file position for request<br />	ir_aux2 dd ?			; misc. extra API parameters<br />	ir_aux3 dd ?			; misc. extra API parameters<br />   ; % ir_pev $P ?			; ptr to IFSMgr event for async requests<br />	ir_fsd db (size fsdwork) dup (?);		; Provider work space<br />ioreq	ends<br /><br />########### Struct End's Here ######################<br /><br />&amp; compiled the program then i got no error. But what if i want to use that elements in the structure what should i do??????</div>
    <div class="meta">Posted on 2002-02-16 13:00:56 by pt_sniffer</div>
   </div>
  </div>
 </body>
</html>