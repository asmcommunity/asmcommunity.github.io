<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>direct read disk - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21555" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21555">direct read disk</a></p>
   <div class="post" id="post-162742">
    <div class="subject"><a href="#post-162742">direct read disk</a></div>
    <div class="body">hi all !<br />i want to write a kernel driver - it will read disk direct (as use INT on dos) but i don&#39;t know to do this on Windows NT(2k &amp; XP), please help me&nbsp; :lol: . thanks</div>
    <div class="meta">Posted on 2005-08-03 06:28:17 by secmask</div>
   </div>
   <div class="post" id="post-162743">
    <div class="subject"><a href="#post-162743">Re: direct read disk</a></div>
    <div class="body">Maybe you can use the win32 api function CreateFile to open \\.\PHYSICALDRIVE0.<br />You will be able to read/write disk directly.<br /><br />Writting a kernel mode driver to read disk direct is a very difficult and dangerous task.<br />But if you really need, try to get the Windows 2k DDK and read the manuals.<br /><br />The best reference is definitly:<br />http://www.oreilly.com/catalog/wininternals/<br /><br />Regards,<br />Opc0de<br /></div>
    <div class="meta">Posted on 2005-08-03 07:06:39 by Opcode</div>
   </div>
   <div class="post" id="post-162823">
    <div class="subject"><a href="#post-162823">Re: direct read disk</a></div>
    <div class="body">You must use in and out instruction. You will not able to made it if you use WinXP, if you have an old computer you will able to made it. Check www.programmersheaven.com for tutorial and code. Opcode is rigth it is dangerous.</div>
    <div class="meta">Posted on 2005-08-05 07:35:38 by realvampire</div>
   </div>
   <div class="post" id="post-162825">
    <div class="subject"><a href="#post-162825">Re: direct read disk</a></div>
    <div class="body">Not only if is it difficult to get the code right, but you&#39;ll have to remember that you&#39;re running in a protected mode OS - that <strong>already</strong> has a driver that accesses the disk. This gives opportunity for a world full of pain if you try to do direct disk access.<br /><br />Much better to use the documented and well-working CreateFile method.<br /></div>
    <div class="meta">Posted on 2005-08-05 07:56:47 by f0dder</div>
   </div>
   <div class="post" id="post-162876">
    <div class="subject"><a href="#post-162876">Re: direct read disk</a></div>
    <div class="body">So if readfile direct is difficult, but what about read some sectors of the disk , i think there are some instructions do this ??? .</div>
    <div class="meta">Posted on 2005-08-06 06:04:30 by secmask</div>
   </div>
   <div class="post" id="post-162878">
    <div class="subject"><a href="#post-162878">Re: direct read disk</a></div>
    <div class="body">secmask, http://msdn.microsoft.com/library/default.asp?url=/library/en-us/fileio/fs/createfile.asp - notice the \\.\PHYSICALDRIVEx and \\.\x: filename parameters, and do read the documentation there.<br /></div>
    <div class="meta">Posted on 2005-08-06 07:14:33 by f0dder</div>
   </div>
   <div class="post" id="post-163329">
    <div class="subject"><a href="#post-163329">Re: direct read disk</a></div>
    <div class="body">hi all .<br />i did as f0dder said but when i try to read first 512 bytes of drive C ,it doesn&#39;t like as i view in Hex Editor . So where i were wrong ?<br />thanks .</div>
    <div class="meta">Posted on 2005-08-16 07:40:11 by secmask</div>
   </div>
   <div class="post" id="post-163331">
    <div class="subject"><a href="#post-163331">Re: direct read disk</a></div>
    <div class="body">secmask, perhaps it&#39;s the difference between \\.\C: and \\.\PHYSICALDRIVE0 that gives you different results?<br /></div>
    <div class="meta">Posted on 2005-08-16 10:10:34 by f0dder</div>
   </div>
   <div class="post" id="post-163387">
    <div class="subject"><a href="#post-163387">Re: direct read disk</a></div>
    <div class="body">oh , yeh . that&#39;s exact my problem , thank f0dder .</div>
    <div class="meta">Posted on 2005-08-17 06:24:48 by secmask</div>
   </div>
   <div class="post" id="post-163389">
    <div class="subject"><a href="#post-163389">Re: direct read disk</a></div>
    <div class="body">no problem, glad to help :)</div>
    <div class="meta">Posted on 2005-08-17 06:29:15 by f0dder</div>
   </div>
  </div>
 </body>
</html>