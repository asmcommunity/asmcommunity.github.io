<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>why no carry flag - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27057" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27057">why no carry flag</a></p>
   <div class="post" id="post-194410">
    <div class="subject"><a href="#post-194410">why no carry flag</a></div>
    <div class="body">So does anybody know why windows api dont return an error by setting the carry flag, like dos and bios interrupts do??
Carry flag seems a better option to me. At lest you dont have to do an extra compare.</div>
    <div class="meta">Posted on 2001-02-28 06:20:00 by mega</div>
   </div>
   <div class="post" id="post-194411">
    <div class="subject"><a href="#post-194411">why no carry flag</a></div>
    <div class="body">You might send that question to the M$ tech support, maybe they can answer it ;)
btw, you don't really need an extra comparison, a simple
test eax,eax
is enough in almost all cases (I think you can afford that additonal clock cycle).</div>
    <div class="meta">Posted on 2001-02-28 11:44:00 by Tola</div>
   </div>
   <div class="post" id="post-194412">
    <div class="subject"><a href="#post-194412">why no carry flag</a></div>
    <div class="body">It makes no sense for the API to use the carry flag, as that imposes a very high burdon on it's clients. 

Why?

Cause the API was written with C in mind. 

The API uses the STDCALL convention (which interestingly enough, comes from Pascal and not C). It expects that return value to be in a register. C knows how to handle that.

C does NOT know how to handle the carry flag by itself. One would have to inline some asm, add custom compiler additions, make crazy macros, etc, to get this to work.</div>
    <div class="meta">Posted on 2001-02-28 12:31:00 by Ernie</div>
   </div>
   <div class="post" id="post-194413">
    <div class="subject"><a href="#post-194413">why no carry flag</a></div>
    <div class="body">The original Win32 platform, NT 3.1, was coded in C.  All the way down to the API of the "native NT kernel".  The use of the stack to pass arguments, and the register saving conventions were set by the compilers used at that time. (circa 1992)</div>
    <div class="meta">Posted on 2001-02-28 21:33:00 by tank</div>
   </div>
  </div>
 </body>
</html>