<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Why lost the bottom line using bitblt to DC? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22321" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22321">Why lost the bottom line using bitblt to DC?</a></p>
   <div class="post" id="post-167650">
    <div class="subject"><a href="#post-167650">Why lost the bottom line using bitblt to DC?</a></div>
    <div class="body">Hi, everybody,<br />    While programming with MASM using GDI functions ,a very strange matter hit me down:<br /> <br />       During WM_PAINT Message ,I draw a rectangle in a memory bitmap ,using MASM32 lib function &quot;Frame3D&quot;,and bitblt this bitmap to <br />the current Device context.Well,it&#39;s very strange that only the top,left,and right frame of this rectangle are displayed;the bottom line got disappeared!(See attachement file)<br />      <br />        Does Anyone know why it happen like that?<br />       Any comments or suggestion will be appreciated.<br />      Thanks in advance.<br /><br /><br /></div>
    <div class="meta">Posted on 2005-11-08 08:24:01 by Luckrock</div>
   </div>
   <div class="post" id="post-167652">
    <div class="subject"><a href="#post-167652">Re: Why lost the bottom line using bitblt to DC?</a></div>
    <div class="body">Could be a simple mathematical error (i.e. length/width +1)???</div>
    <div class="meta">Posted on 2005-11-08 08:58:29 by SpooK</div>
   </div>
   <div class="post" id="post-167656">
    <div class="subject"><a href="#post-167656">Re: Why lost the bottom line using bitblt to DC?</a></div>
    <div class="body">Yes,it&#39;s a simple question.<br />&nbsp;  I add&nbsp; to painting height in bitblt ,have solved the problem. But the question is why bitblt not transfer ,the whole bitmap to device context,while it &quot;cut&quot; one line of pixels down?<br />&nbsp;  Anyway ,thanks for your help.<br />&nbsp; Best regards.</div>
    <div class="meta">Posted on 2005-11-08 10:25:15 by Luckrock</div>
   </div>
   <div class="post" id="post-167657">
    <div class="subject"><a href="#post-167657">Re: Why lost the bottom line using bitblt to DC?</a></div>
    <div class="body"><div class="quote"><br />Yes,it&#39;s a simple question.<br />&nbsp;  I add&nbsp; to painting height in bitblt ,have solved the problem. But the question is why bitblt not transfer ,the whole bitmap to device context,while it &quot;cut&quot; one line of pixels down?<br />&nbsp;  Anyway ,thanks for your help.<br />&nbsp; Best regards.<br /></div><br /><br />I am not too keen on Windows API, but I think it has something to do with the size of the source and destination DCs. If you define the area to be copied as height,width of the source DC (rcSource.bottom - rcSource.top, rcSource.right - rcSource.left), then you lose out on the fact that the top and bottom are absolute numbers, so essentially it doesn&#39;t calculate the fact that the bottom line is also to be included as an entity. It lies under the same concept on why 0xF is 15 in decimal but is the 16th number in concession from 0 to 15 (0 counts as an entity).<br /><br /></div>
    <div class="meta">Posted on 2005-11-08 12:56:59 by SpooK</div>
   </div>
   <div class="post" id="post-167671">
    <div class="subject"><a href="#post-167671">Re: Why lost the bottom line using bitblt to DC?</a></div>
    <div class="body">Hi,Spook<br />&nbsp; &nbsp; &nbsp; &nbsp;  Thanks for your kind and detailed explaint for this,it make me to remember those days in Collelege ,learning the &quot;C&quot; array.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Yes,it could only be explainted as the same concept as &quot;C&quot;&nbsp; Array, An array&nbsp; consisting of&nbsp; &quot; n&quot; compoments start it index [0],while end with .<br />&nbsp; &nbsp; &nbsp; &nbsp;  I got this now.<br />&nbsp; &nbsp; &nbsp; &nbsp;  Thank you very much.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; With my best regards.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T</div>
    <div class="meta">Posted on 2005-11-08 18:34:57 by Luckrock</div>
   </div>
  </div>
 </body>
</html>