<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>how to get the MAC - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16842" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=16842">how to get the MAC</a></p>
   <div class="post" id="post-130670">
    <div class="subject"><a href="#post-130670">how to get the MAC</a></div>
    <div class="body">Is any API to do that?<br />-------------------------------<br />WSAStartup<br />gethostname -&gt; give me host name<br />-------------------------------<br />what could I write to get my MAC when I am not connected to the network?<br />-------------------------------<br />if I am connected, I send arp request to myself and get it.<br />-------------------------------</div>
    <div class="meta">Posted on 2004-01-15 04:29:19 by HarryTuttle</div>
   </div>
   <div class="post" id="post-130730">
    <div class="subject"><a href="#post-130730">how to get the MAC</a></div>
    <div class="body">I want to know how ipconfig gets all the information after  ipconfig /all direction?(I can get all without MAC )<br />I found a c source but 4 linux only and as you know library used in that system are little different than in windows. Could you post the source of ipconfig.c or ipconfig.asm 4 windows if you got it?<br /><br /><br />regards,<br /><br />harry</div>
    <div class="meta">Posted on 2004-01-16 02:46:04 by HarryTuttle</div>
   </div>
   <div class="post" id="post-130735">
    <div class="subject"><a href="#post-130735">how to get the MAC</a></div>
    <div class="body">There's more methods to get the mac than you can poke a stick at :grin:<br /><br /><a target="_blank" href="http://www.ndis.com/faq/QA01030302.htm">http://www.ndis.com/faq/QA01030302.htm</a></div>
    <div class="meta">Posted on 2004-01-16 04:26:44 by Homer</div>
   </div>
   <div class="post" id="post-130808">
    <div class="subject"><a href="#post-130808">how to get the MAC</a></div>
    <div class="body">The older way and more machcanical way is to use the Netbios API.  Given as an example from M$ website.<br /><br />It works well from W95, W98, WME, NT4, W2K, XPpro.  <br />I have not tried it on Server 2003 yet.<br /><br />Are you looking to learn or just trying to find a pre-written solution?<br /><br />Regards,  P1 :cool:</div>
    <div class="meta">Posted on 2004-01-16 12:45:59 by Pone</div>
   </div>
   <div class="post" id="post-130893">
    <div class="subject"><a href="#post-130893">how to get the MAC</a></div>
    <div class="body">That netbios api method will not work when netbios is not enabled, which is likely to be a problem when querying for mac of NICs that are connected to the internet, since very few silly people leave netbios enabled on those interfaces, due to things like NULL session and SMB downgrading exploits.</div>
    <div class="meta">Posted on 2004-01-17 10:17:57 by Homer</div>
   </div>
   <div class="post" id="post-130949">
    <div class="subject"><a href="#post-130949">how to get the MAC</a></div>
    <div class="body"><div class="quote"><br /><br />Are you looking to learn or just trying to find a pre-written solution?<br /><br />Regards,  P1 :cool: </div><br />to learn:)<br />I prefer documentation like RFC, short, essential, technical description but source code is sometime better<br />Please post those links you got;)<br />Thanks<br />h</div>
    <div class="meta">Posted on 2004-01-18 06:49:28 by HarryTuttle</div>
   </div>
   <div class="post" id="post-131058">
    <div class="subject"><a href="#post-131058">how to get the MAC</a></div>
    <div class="body">EvilHomer2k,<br /><br />You have me curious now.<br />Would you like to try my NetBios method display MAC address program for me?<br />I have never know this program fragment to fail yet.  Not Even on a virtual PPP adapter which gives a MAC of &quot;444553540000&quot;.<br /><br />The worst is that it would give an error.  The best is that M$ recommends this as a prefered method of getting the MAC address and it still works anyway on your system.<div class="quote"><em>Originally found in MSDN Library</em><br /><strong>Network Basic Input/Output System (NetBIOS) defines a software interface and a naming convention, not a protocol.</div>So I am interested to see if this turns out.  I do this stuff everyday for a living and would very much like to see if your right.<br /><br />Regards,  P1 :cool: <br /><br />HarryTuttle,<br /><br />What you need is either, a MSDN Library CDs, or a Platform SDK to go through the basics of M$ OSes.  In the mean time, use the websites:<br /><a target="_blank" href="http://support.microsoft.com/">http://support.microsoft.com/</a> <br /><a target="_blank" href="http://msdn.microsoft.com/">http://msdn.microsoft.com/</a> <br /><br />Regards,  P1 :cool:</div>
    <div class="meta">Posted on 2004-01-19 13:50:07 by Pone</div>
   </div>
   <div class="post" id="post-131102">
    <div class="subject"><a href="#post-131102">how to get the MAC</a></div>
    <div class="body">I'd be happy to test your code fragment.<br />Since you like to quote MSDN as the ultimate authority of m$ component software, allow me to kindly do the same:<br /><div class="quote"><br />This article demonstrates how to get the Media Access Control (MAC) address for an ethernet adapter programmatically by using NetBIOS, if your card is bound to NetBIOS. </div><br /><br />This is taken from <a target="_blank" href="http://support.microsoft.com/default.aspx?scid=http://support.microsoft.com:80/support/kb/articles/Q118/6/23.asp&amp;NoWebContent=1">http://support.microsoft.com/default.aspx?scid=http://support.microsoft.com:80/support/kb/articles/Q118/6/23.asp&amp;NoWebContent=1</a> <br /><br />Note that carefully: if the NIC has not been bound to NETBIOS (sic - if NETBIOS has not been bound to the NIC) then it won't work. This is quite clear, but we don't have to rely on the NETBIOS method, theres lots of others.</div>
    <div class="meta">Posted on 2004-01-20 00:48:20 by Homer</div>
   </div>
   <div class="post" id="post-131114">
    <div class="subject"><a href="#post-131114">how to get the MAC</a></div>
    <div class="body">the key is not that , the discusion skips the clue.;)<br />First I was searching  for get my MAC method when I am not connected.<br /><br />when I am connected i have NetBios (getmac.exe),ICMP (ping.exe myself and then arp-a), ARP (by my programm) and others.<br /><br />when I am not connected the system has my MAC the NIC has its hardware and MAC inside the ROM.<br /><br />I do not want to take it from NIC because it may be more tough than get it from system.<br /><br />I need this because of an idea anticrack.<br /><br />best regards,<br />harry<br /><br /><br />btw:Do you know how to get HD serial?</div>
    <div class="meta">Posted on 2004-01-20 02:52:23 by HarryTuttle</div>
   </div>
   <div class="post" id="post-131116">
    <div class="subject"><a href="#post-131116">how to get the MAC</a></div>
    <div class="body">NIC=Network Interface Card, all network devices have one.<br />Your MAC address for a given NIC is hardcoded into the NIC.<br />That being said, the OS queries the NIC itself for the value at startup.<br />From then on, it uses the SOFTWARE version of the MAC.<br />As I understand it, subsequent queries are always to the OS cache and not to the device itself, although I could be wrong here, depending on the method chosen.<br />This is what allows us to forge a MAC, should we choose to.<br />The MAC retrieval should have nothing to do with your online status.<br />The MAC can be retrieved anytime.<br />All I was saying is that the NETBIOS method of querying a NIC's MAC WILL FAIL if NETBIOS isn't bound to that NIC.<br />As for querying a HDD for its hardware serial, try searching this board ;)</div>
    <div class="meta">Posted on 2004-01-20 04:34:55 by Homer</div>
   </div>
   <div class="post" id="post-131128">
    <div class="subject"><a href="#post-131128">how to get the MAC</a></div>
    <div class="body"><div class="quote"><br />This is what allows us to forge a MAC, should we choose to.<br /></div><br />Doesn't the NIC itself add the MAC to the ethernet frames? Or is this done by software?</div>
    <div class="meta">Posted on 2004-01-20 08:24:27 by f0dder</div>
   </div>
   <div class="post" id="post-131130">
    <div class="subject"><a href="#post-131130">how to get the MAC</a></div>
    <div class="body">f0dder, if that was the case, MAC spoofing would not be possible, at least it wouldn't be possible without some kind of local router MITM, and I can tell you for a fact that its doable. This means that the tcp/ip stack uses a soft cached copy of the MAC, and that the MAC is not written on all outgoing packets by the NIC as we have often  been lead to believe... for better or worse, we can forge MAC on outgoing packets. I can't think of a single decent reason to wish to do so, but I can tell you that some kids on cable networks like to charge their bandwidth to their peers... We can close this thread now if you like :)</div>
    <div class="meta">Posted on 2004-01-20 08:38:53 by Homer</div>
   </div>
   <div class="post" id="post-131138">
    <div class="subject"><a href="#post-131138">how to get the MAC</a></div>
    <div class="body">Interesting, I thought changing MAC involved flashing your NIC.</div>
    <div class="meta">Posted on 2004-01-20 10:12:02 by f0dder</div>
   </div>
   <div class="post" id="post-131243">
    <div class="subject"><a href="#post-131243">how to get the MAC</a></div>
    <div class="body"><div class="quote"><br />Interesting, I thought changing MAC involved flashing your NIC. </div><br /><br /><pre><code><br />#include &lt;stdlib.h&gt;<br />#include &lt;stdio.h&gt;<br /><br />#include &lt;pcap.h&gt;<br /><br />void usage&#40;&#41;;<br /><br />void main&#40;int argc, char **argv&#41; &#123;<br />    pcap_t *fp;<br />    char error&#91;PCAP_ERRBUF_SIZE&#93;;<br />    u_char packet&#91;100&#93;;<br />    int i;<br /><br />    /* Check the validity of the command line */<br />    if &#40;argc != 2&#41;<br />    &#123;<br />        printf&#40;&quot;usage&#58; %s inerface&quot;, argv&#91;0&#93;&#41;;<br />        return;<br />    &#125;<br /><br />    /* Open the output adapter */<br />    if&#40;&#40;fp = pcap_open_live&#40;argv&#91;1&#93;, 100, 1, 1000, error&#41; &#41; == NULL&#41;<br />    &#123;<br />        fprintf&#40;stderr,&quot;\nError opening adapter&#58; %s\n&quot;, error&#41;;<br />        return;<br />    &#125;<br /><br />    /* Supposing to be on ethernet, set MAC destination to 1&#58;1&#58;1&#58;1&#58;1&#58;1 */<br />    packet&#91;0&#93;=1;<br />    packet&#91;1&#93;=1;<br />    packet&#91;2&#93;=1;<br />    packet&#91;3&#93;=1;<br />    packet&#91;4&#93;=1;<br />    packet&#91;5&#93;=1;<br />    <br />    /* set MAC source to 2&#58;2&#58;2&#58;2&#58;2&#58;2 */<br />    packet&#91;6&#93;=2;<br />    packet&#91;7&#93;=2;<br />    packet&#91;8&#93;=2;<br />    packet&#91;9&#93;=2;<br />    packet&#91;10&#93;=2;<br />    packet&#91;11&#93;=2;<br />    <br />    /* Fill the rest of the packet */<br />    for&#40;i=12;i&lt;100;i++&#41;&#123;<br />        packet&#91;i&#93;=i%256;<br />    &#125;<br /><br />    /* Send down the packet */<br />    pcap_sendpacket&#40;fp,<br />        packet,<br />        100&#41;;<br /><br />    return;<br />&#125;<br /><br /></code></pre></div>
    <div class="meta">Posted on 2004-01-21 05:07:32 by HarryTuttle</div>
   </div>
   <div class="post" id="post-131262">
    <div class="subject"><a href="#post-131262">how to get the MAC</a></div>
    <div class="body">well, well! You live, you learn :)<br /><br />Haven't tested, but I assume it does what I expect it does.</div>
    <div class="meta">Posted on 2004-01-21 08:20:18 by f0dder</div>
   </div>
   <div class="post" id="post-131433">
    <div class="subject"><a href="#post-131433">how to get the MAC</a></div>
    <div class="body">EvilHomer2k,<br /><br />Here is the NetBios method of get a MAC address from an adapter card ( includes source ).<br /><br />I just checked it on Server 2003 and still works well.<br /><br />So I am curious if it will run or not on your system with your given pre-cautions.<br /><br />Regards,  P1 :cool:</div>
    <div class="meta">Posted on 2004-01-23 10:35:36 by Pone</div>
   </div>
   <div class="post" id="post-131470">
    <div class="subject"><a href="#post-131470">how to get the MAC</a></div>
    <div class="body">I have my primary interface with no netbios, and secondary interface has no netbios, the cards are bridged, the result I got was the same mac for both devices, but I admit it did match one of the device macs, the lan card in fact, the secondary interface.</div>
    <div class="meta">Posted on 2004-01-24 02:10:54 by Homer</div>
   </div>
   <div class="post" id="post-132004">
    <div class="subject"><a href="#post-132004">how to get the MAC</a></div>
    <div class="body">EvilHomer2k,<br /><br />I guess generating a matrix of technique by results by OS, would help determine usability for us network programmers.<br /><br />If I understand you correctly, two NICs in one system, running two patch cables to the same Hub.  Correct?<br /><br />Regards,  P1 :cool:</div>
    <div class="meta">Posted on 2004-01-28 16:35:29 by Pone</div>
   </div>
   <div class="post" id="post-132036">
    <div class="subject"><a href="#post-132036">how to get the MAC</a></div>
    <div class="body">No hub, one NIC connected to a cable modem, the other NIC servicing the LAN...</div>
    <div class="meta">Posted on 2004-01-29 08:32:45 by Homer</div>
   </div>
  </div>
 </body>
</html>