<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Does FINIT fire IRQ 15? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25850" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25850">Does FINIT fire IRQ 15?</a></p>
   <div class="post" id="post-188538">
    <div class="subject"><a href="#post-188538">Does FINIT fire IRQ 15?</a></div>
    <div class="body">At the beginning of my kernel, I issue the FINIT instruction. After that, there are almost 200 lines of code and when I enable the interrupts with STI, IRQ 15 is fired? Does anybody have any idea?<br /><br />P.S: My IDT is established and initialized correctly. IRQs are remapped and GDT is fine. When FINIT is removed, IRQ 15 is not fired anymore.</div>
    <div class="meta">Posted on 2007-03-22 03:09:59 by XCHG</div>
   </div>
   <div class="post" id="post-188541">
    <div class="subject"><a href="#post-188541">Re: Does FINIT fire IRQ 15?</a></div>
    <div class="body">The FPU/x87/Co-processor should trigger IRQ 13 (0x0D) and not IRQ 15 (0x0F) unless something is triggering a spurious interrupt... but I&#39;ve only seen that happen to IRQ 7. Perhaps the IRQs are not correctly mapped?<br /><br />I don&#39;t use any FPU instructions in my kernel, so I don&#39;t have much more to tell you. Let me know what you figure out :)</div>
    <div class="meta">Posted on 2007-03-22 06:43:14 by SpooK</div>
   </div>
   <div class="post" id="post-188542">
    <div class="subject"><a href="#post-188542">Re: Does FINIT fire IRQ 15?</a></div>
    <div class="body">I think it was Bochs&#39; problem because even then I checked it with MSVPC and IRQ 15 was not being fired. I am testing my OS with Bochs right now again and everything seems to be fine. Have you had such problems with Bochs, too?&nbsp; :shock:</div>
    <div class="meta">Posted on 2007-03-22 07:34:50 by XCHG</div>
   </div>
   <div class="post" id="post-188543">
    <div class="subject"><a href="#post-188543">Re: Does FINIT fire IRQ 15?</a></div>
    <div class="body">Not that I remember. There are plenty of times that I thought Bochs was the problem, but to this very day every single major problem was a logic/design flaw on my behalf and not with the actual emulator. The only exception to this is the problem with the FDC not firing an IRQ6 during various operations. Who knows... maybe that is another error on my behalf that I just haven&#39;t figured out yet :P</div>
    <div class="meta">Posted on 2007-03-22 09:02:41 by SpooK</div>
   </div>
   <div class="post" id="post-188544">
    <div class="subject"><a href="#post-188544">Re: Does FINIT fire IRQ 15?</a></div>
    <div class="body"><div class="quote"><br />maybe that is another error on my behalf that I just haven&#39;t figured out yet<br /></div><br />...or just bochs not emulating hardware 100% the way it works in real life - with all the quirks and annoyances.<br /><br /></div>
    <div class="meta">Posted on 2007-03-22 09:30:56 by f0dder</div>
   </div>
  </div>
 </body>
</html>