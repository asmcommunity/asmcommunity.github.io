<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>popup menu won't disappear - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6518" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=6518">popup menu won't disappear</a></p>
   <div class="post" id="post-47059">
    <div class="subject"><a href="#post-47059">popup menu won't disappear</a></div>
    <div class="body">I did a tray icon, with a popup menu.<br />after I pressed the right click button, the popup menu showed,<br /><br />but usually I left click anywhere else other than inside the popup menu will make my popup menu go away,, <br /><br />but this time it won't go away,, I must click one of the items in the popup menu inorder for it to hide itself,,<br /><br /><br />can someone tell me y???<br /><br />sorry for the bad english,,<br /><br /><br />thankx in adv,</div>
    <div class="meta">Posted on 2002-07-10 21:47:44 by Yanda</div>
   </div>
   <div class="post" id="post-47068">
    <div class="subject"><a href="#post-47068">popup menu won't disappear</a></div>
    <div class="body">This may be your problem:<br /><br />From the Microsoft Knowledge Base article ID: Q135788 &quot;Menus for<br />Notification Icons Do Not Work Correctly&quot;<br />============================================<br />When you display a context menu for a notification icon (see<br />Shell_NotifyIcon), clicking anywhere besides the menu or the window<br />that created the menu (if it is visible) doesn't cause the menu to<br />disappear. When this behavior is corrected, the second time this menu<br />is displayed, it displays and then immediately disappears.<br /><br />RESOLUTION<br />To correct the first behavior, you need to make the current window the<br />foreground window before calling TrackPopupMenu or TrackPopupMenuEx.<br /><br />The second problem is caused by a problem with TrackPopupMenu. It is<br />necessary to force a task switch to the application that called<br />TrackPopupMenu at some time in the near future. This can be<br />accomplished by posting a benign message to the window or thread.<br /><br />The following code will take care of all of this:<br /><br />   SetForegroundWindow(hDlg);<br />   // Display the menu<br />   TrackPopupMenu(   hSubMenu,<br />                     TPM_RIGHTBUTTON,<br />                     pt.x,<br />                     pt.y,<br />                     0,<br />                     hDlg,<br />                     NULL);<br />   PostMessage(hDlg, WM_NULL, 0, 0);<br />============================================<br /><br />Kayaker</div>
    <div class="meta">Posted on 2002-07-10 22:38:38 by Kayaker</div>
   </div>
   <div class="post" id="post-47088">
    <div class="subject"><a href="#post-47088">popup menu won't disappear</a></div>
    <div class="body">thankx alots!!</div>
    <div class="meta">Posted on 2002-07-11 00:20:53 by Yanda</div>
   </div>
   <div class="post" id="post-47242">
    <div class="subject"><a href="#post-47242">popup menu won't disappear</a></div>
    <div class="body">It's most likely a windows bug.  The windows mixer does this on all versions of windows.</div>
    <div class="meta">Posted on 2002-07-12 09:01:18 by grv575</div>
   </div>
  </div>
 </body>
</html>