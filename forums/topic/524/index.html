<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>VirtualAlloc - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=524" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=524">VirtualAlloc</a></p>
   <div class="post" id="post-3133">
    <div class="subject"><a href="#post-3133">VirtualAlloc</a></div>
    <div class="body">Does someone know in what state is a &quot;Virtual&quot; allocated Memory<br />when committed *and* released? (Win95 family).<br /><br />betov.</div>
    <div class="meta">Posted on 2001-08-06 10:13:16 by Betov</div>
   </div>
   <div class="post" id="post-3190">
    <div class="subject"><a href="#post-3190">VirtualAlloc</a></div>
    <div class="body">I'm not entirely sure what you mean with 'state'<br /><br /><a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/memory/hh/winbase/memman_3elf.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/memory/hh/winbase/memman_3elf.asp</a></div>
    <div class="meta">Posted on 2001-08-07 06:33:19 by Hiroshimator</div>
   </div>
   <div class="post" id="post-3199">
    <div class="subject"><a href="#post-3199">VirtualAlloc</a></div>
    <div class="body">Thanks, Hiro, but i know all this almost by heart now, and even some more<br />as i have carefully read some techincal paper from an M$ developer about<br />all types of allocations and ways to<br /><br /><br />Maybe i wrongly wrote the question:<br /><br /><br />First, i am talking of VirtualAlloc / VirtualFree. Let us say you ask the <br />WMM for some Memory with the <br /><br />&quot;MEM_RESERVE or MEM_COMMIT&quot; flags.<br /><br />Then later you do not want any more of this Mem and ask to Free it with only<br /><br />&quot;MEM_RELEASE&quot; flag.<br /><br />In this case, i thaught (and it seems to work so under NT family) that the <br />Memory is freed the same way as if you ask for it with the full:<br /><br />&quot;MEM_RELEASE or MEM_DECOMMIT&quot; flags.<br /><br />It is *not* true under 95 family.<br /><br />It is just like if you reseve a room for rent, then go effectively living<br />for one week in the room. But when the owner give you the keys, you <br />&quot;Un-reseve&quot; the room and keep going living in it. What would this mean???<br /><br />What could mean a both commited and released Memory??? For me, it doesn't <br />make sense, but it seems to exist under 95 family (or at least, the concerned<br />Pages remains marked as 'Valid' -or something like this -for the ones who<br />know internals of the thing--). <br /><br />In such cases, with big  amounts of Memory chunks (over 1 Mo * &gt;=10 Chunks)<br />attributed and released enough time to be  interleaved, the WMM produces <br />random hangs after a while. That took me two weeks to point out it, and i <br />have never been able to reproduce this effect under 2000.<br /><br />So, the problem is solved for me, but i just would like to understand...<br /><br /><br />betov.</div>
    <div class="meta">Posted on 2001-08-07 08:27:33 by Betov</div>
   </div>
  </div>
 </body>
</html>