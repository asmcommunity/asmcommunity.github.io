<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Improved BSPGenerator - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25640" />
    <link rel="next" href="../?id=25640&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25640">Improved BSPGenerator</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=25640&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=25640&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="25640" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=25640&amp;page=2">&gt;</a><a href="../?id=25640&amp;page=3">&raquo;</a></form>   <div class="post" id="post-187120">
    <div class="subject"><a href="#post-187120">Improved BSPGenerator</a></div>
    <div class="body">I&#39;ve been toying with one of my older projects..making improvements and adding further code to my BSPTree Generator.<br />-improved algorithms (faster, better numerical stability)<br />-threadbased execution (decoupled from MessagePump)<br /><br />Step 1: take an input XFile and generates from it a BSPTree.<br />This has been completed, the implementation &#39;seems ok&#39;..<br />But just building a BSP only solves the problem of z sorting.<br />It doesn&#39;t help us to cull non-visible faces..<br /><br />Step 2 involves calculating the geometry of the Portals which separate pairs of leaf nodes.<br />Step 3 involves calculating the PVS of each leaf node with the assistance of the results from step 2.<br />Step 4 will just be code for Writing the output to a custom file, and code for Reading it back again.. nothing major.<br /><br />I&#39;m not going to talk about Generating a BSPTree here unless I&#39;m asked to .. it deserves to be a separate topic of discussion.<br /><br />For those not intimate with BSP:<br />1. The leafnodes of a BSPTree represent the empty spaces which exist in a 3D world which might be occupied by players or other objects.<br />2. There exists some Portals which connect pairs of LeafNodes and represent &#39;doorways&#39; between leafnodes.<br />3. For each leafnode, we can calculate the total set of faces which are visible from any point within that leafnode (the pvs).<br />This is the faces of that leafnode, plus faces that are visible thru any Portals connected to it.<br />Now we can accelerate our rendering of the 3D world by ONLY drawing the pvs of the leafnode the camera is within.<br /><br />While writing code for step 2, I noticed that I could re-use a lot of code from step 1, with a little modification.<br />I made the necessary modifications and improvements to the existing code, but didn&#39;t implement step 2 just yet..<br />Wanting to make sure that those changes, didn&#39;t interfere with existing code, I rebuilt the project and tested it.<br />I noticed a fairly dramatic speedup in the execution of Step 1 due to all the improvements, which kinda made my day since it wasn&#39;t an intentional result.<br /><br />Next update will implement the new code for step 2.<br />Sourcecode available apon request.<br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2193" target="_blank">BSPGenerator.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-12-26 03:09:02 by Homer</div>
   </div>
   <div class="post" id="post-187122">
    <div class="subject"><a href="#post-187122">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer,<br /><br /><div class="quote">Sourcecode available apon request.</div><br /><br />I&#39;m interested in the source<br /><br /><div class="quote">I&#39;m not going to talk about Generating a BSPTree here unless I&#39;m asked to .. it deserves to be a separate topic of discussion.</div><br /><br />I&#39;ld like to learn more about Generating a BSPTree.<br /><br />Friendly regards,<br />mdevries.</div>
    <div class="meta">Posted on 2006-12-26 03:29:12 by mdevries</div>
   </div>
   <div class="post" id="post-187123">
    <div class="subject"><a href="#post-187123">Re: Improved BSPGenerator</a></div>
    <div class="body">For the record, the recent improvements reduced the time for processing of my testfile (Tiny.x) on a 500Mhz machine from 42 minutes (old version) to 14 minutes (current version).<br />Note that the new version correctly preserves the Materials of faces, so that the World can contain multiple materials and even translucent ones.<br /><br />OK, let&#39;s talk about how to create a BSPTree, and I&#39;ll provide my sourcecode.<br /><br />BSPTrees are a binary tree structure where each non-leaf node describes a Plane used to binary-partition the World, and the leaf nodes contain (typically convex) sets of polygons which (along with the planes of all parent nodes) describe (typically convex) subspaces in WorldSpace.<br />Trees are typically described as a network of connected nodes.<br />We begin by defining the BSPNode structure (we can add stuff to this of course)..<br /><br />BSPNode struct<br />pFront dd ?<br />pBack dd ?<br />pFaces dd ?<br />BSPNode ends<br /><br />At the bare minimum, our node struct contains two dwords.<br />They can each be NULL, or they can each contain a pointer to a child node.<br /><br />We begin with a &#39;polygon soup&#39; made of triangles (we&#39;ll refer to these triangles as Faces).<br />I&#39;m obtaining Faces from a .x file of your choosing.<br />The first thing we do is calculate the Plane of each Face (ie the plane which each face lays apon), and have each Face remember its Plane.<br /><br />We create a root node for our tree.<br />Now we begin to build our tree.<br /><br />We are given an input set of Faces (and their Planes).<br /><br />The recursive problem is as follows:<br />From the Planes of all input Faces, find the Plane which both:<br />A) &#39;cuts&#39; the fewest other faces<br />B) &#39;most evenly&#39; divides the other faces<br /><br />Use this to divide the other faces into three lists:<br />-those in front of the plane<br />-those behind the plane<br />-those which are coplanar<br />-those which are cut by the plane<br />If any faces are cut, create output faces and send them to front and back lists, then destroy the original.<br /><br />Now mark the current node with the splitting plane, create child nodes, send the front list to the front child, the back list to the back child, overwrite the current node&#39;s input list with the coplanar list, and then solve the recursive problem (all of the above) for each child.<br /><br />When this recursive process is complete, we have built a BSP tree whose non-leaf nodes represent splitting planes and any faces which live on that plane.. the leaf nodes are as described.<br /><br />This is all we need to implement view-independant Z-sorting, but at this stage we&#39;re still forced to draw the entire world - we&#39;re not finished !!<br /><br />The attached zip is bound to have files missing - let me know which and I&#39;ll add them. <br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2194" target="_blank">BSPGenerator.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-12-26 05:00:56 by Homer</div>
   </div>
   <div class="post" id="post-187124">
    <div class="subject"><a href="#post-187124">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer<br />Missing files:<br />- ..\..\..\..\ObjAsm32_13d\Projects\Homer\D3D9\PointsPlanesEtc.inc<br />- the whole res folder<br /><br />Here is a link that describes the partitioning with a little graphical support <a target="_blank" href="http://en.wikipedia.org/wiki/Binary_space_partitioning">http://en.wikipedia.org/wiki/Binary_space_partitioning</a><br /><br />Regards,<br /><br />Biterider</div>
    <div class="meta">Posted on 2006-12-26 05:45:06 by Biterider</div>
   </div>
   <div class="post" id="post-187127">
    <div class="subject"><a href="#post-187127">Re: Improved BSPGenerator</a></div>
    <div class="body">Biterider - thanks :)<br /><br />;include c:\masm32\ObjAsm32_13d\Projects\Homer\d3d9\PointsPlanesEtc.inc<br />This file is redundant - where was it included?<br /><br />Attached zip contains Res folder, and also the latest copy of Vec3Math.inc :)<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2195" target="_blank">BSPGenerator.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-12-26 06:45:21 by Homer</div>
   </div>
   <div class="post" id="post-187129">
    <div class="subject"><a href="#post-187129">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer<br />This is the compilation status:<br />Missing file: C:\Masm32\ObjAsm32\Code\Objects\Vec4Collection.inc<br />I have an old copy, but it shoulde be included in your distro<br /><br />I changed the following line:<br />;include c:\masm32\ObjAsm32_13d\Projects\Homer\d3d9\d3d9.inc	;Contains some global data (REQUIRED)<br />% include &amp;COMPath&amp;COM.inc<br />% include &amp;DxPath&amp;D3D9.inc<br />% include &amp;DxPath&amp;D3DX9Core.inc<br />% include &amp;DxPath&amp;D3DX9Math.inc<br />% include &amp;DxPath&amp;D3D9Types.inc<br />% include &amp;DxPath&amp;D3D9Caps.inc<br />% include &amp;DxPath&amp;D3DX9Mesh.inc<br />% include &amp;DxPath&amp;D3DX9Tex.inc<br /><br />Still missing symbols:<br />pD3DDevice, szErr, szFailD3D, pD3D, d3dpp, fp1000<br />I guess that all of them are included in your modified d3d9.inc<br /><br />Regards,<br /><br />Biterider</div>
    <div class="meta">Posted on 2006-12-26 08:47:37 by Biterider</div>
   </div>
   <div class="post" id="post-187131">
    <div class="subject"><a href="#post-187131">Re: Improved BSPGenerator</a></div>
    <div class="body">Attachment has the missing files.</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2197" target="_blank">BSPGenerator.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-12-26 10:14:22 by Homer</div>
   </div>
   <div class="post" id="post-187138">
    <div class="subject"><a href="#post-187138">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer,<br /><br />Compiling the project I had some errors.<br />There was a symbol redefinition of the structs: vec2 and vec3<br /><br />I commented them both out:<br />- vec2, in BSPGenerator.asm<br />- vec3, in vec3Math.inc<br /><br />They are both defined in \masm32\ObjAsm32\code\DirectX\D3DXMath.inc.<br /><br />I moved the line which includes vec3Math.inc a little further, directly after the line which includes d3d9.inc, because I still had errors.<br /><br />After having done this the next compile error remains:<br /><br /><pre><code>BSPGenerator.obj : error LNK2001: unresolved external symbol _DirectSoundFullDuplexCreate@40<br />BSPGenerator.exe : fatal error LNK1120: 1 unresolved externals</code></pre><br /><br />How can I solve this error? And have I done right sofar?<br /><br />Friendly regards,<br />mdevries.</div>
    <div class="meta">Posted on 2006-12-26 17:26:27 by mdevries</div>
   </div>
   <div class="post" id="post-187139">
    <div class="subject"><a href="#post-187139">Re: Improved BSPGenerator</a></div>
    <div class="body">Heya - the teething problems don&#39;t sound too painful.<br /><br />I had commented out those Vec structs in the dxmath file.. the structs are the same, so it really doesn&#39;t matter..<br /><br />Here&#39;s what I did to my dxmath file:<br /><pre><code><br />D3DXVECTOR2 struct<br />&nbsp; x FLOAT ?<br />&nbsp; y FLOAT ?<br />D3DXVECTOR2 ends<br />LPD3DXVECTOR2 typedef ptr D3DXVECTOR2<br /><br />D3DXVECTOR3 struct<br />&nbsp; x FLOAT ?<br />&nbsp; y FLOAT ?<br />&nbsp; z FLOAT ?<br />D3DXVECTOR3 ends<br />LPD3DXVECTOR3 typedef ptr D3DXVECTOR3<br /><br />D3DXVECTOR4 struct<br />&nbsp; x FLOAT ?<br />&nbsp; y FLOAT ?<br />&nbsp; z FLOAT ?<br />&nbsp; w FLOAT ?<br />D3DXVECTOR4 ends<br />LPD3DXVECTOR4 typedef ptr D3DXVECTOR4<br />Vec4 equ &lt;D3DXVECTOR4&gt;<br /></code></pre><br /><br />The reason I removed the Vec2 and Vec3 references from there is that they are not DX terminology, they&#39;re MY terminology.. it just so happens that I am also the creator of that dxmath file, which is how they ended up being there in the first place.<br /><br /><br />I don&#39;t use any DirectSound stuff in this demo.<br />When I build this project, I only get a warning from the linker :<br />&quot;LINK : warning LNK4089: all references to &quot;DSOUND.dll&quot; discarded by /OPT:REF<br /><br />Maybe our linking options differ? (I use RadAsm, I can provide RAP file)<br />Anyway, you can safely comment out any references to DSound which are in the d3d9.inc file since we&#39;re not using it.. <br /><br />Also - I believe the more recent source I posted contains some extra code to begin generating Portals after the tree is generated - if so the app will likely crash at that point - I&#39;ll probably post an update at some stage today.<br /><br /></div>
    <div class="meta">Posted on 2006-12-26 21:20:37 by Homer</div>
   </div>
   <div class="post" id="post-187141">
    <div class="subject"><a href="#post-187141">Re: Improved BSPGenerator</a></div>
    <div class="body">Biterider will probably be most interested in the XFile importing code (main asm file).<br /><br />mdevries will probably be most interested in the ChooseBestDividingPlane procedure, and the ClassifyFacePlane procedure which it relies apon.<br /><br />ClassifyFacePlane compares a single triangular face and a plane.<br /><br />If we say that input triangles are made of points ABC, the result from ClassifyFacePlane tells us which side of the plane each point lays.<br />For example, the result &#39;FRONTBACKCOPLANAR&quot; means that Point A is on the Front side of the plane, Point B is on the Back side of the plane, and point C is smack on the plane.. in this example case, our plane passes through point C, and intersects edge AB, dividing the triangle into two output triangles.<br /><br />ChooseBestDividingPlane takes an input set of triangles, and tries to use the Plane of each triangle to partition the rest of the triangles in order to determine which is the &#39;best&#39;.. it doesn&#39;t actually partition the input list, it performs &#39;virtual partitioning&#39; to evaluate the &#39;best partition result&#39;.<br />Once it has determined the &#39;best splitter&#39;, it calls DivideFaces which reproduces the &#39;best result&#39;, but this time actually generating new output triangles and new vertices at intersections.<br /><br />Child nodes are created on demand and are filled with the output triangle lists, and then we recurse the child nodes until we fail to find a suitable splitter.<br />This only happens when the input list contains 2 parallel faces, or contains a convex set of faces .. we call these leafnodes and return from recursion.<br /><br /></div>
    <div class="meta">Posted on 2006-12-26 23:45:07 by Homer</div>
   </div>
   <div class="post" id="post-187143">
    <div class="subject"><a href="#post-187143">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer,<br /><br /><div class="quote">I had commented out those Vec structs in the dxmath file.</div><br /><br /><div class="quote">The reason I removed the Vec2 and Vec3 references from there is that they are not DX terminology, they&#39;re MY terminology.. </div><br /><br />For that reason I will remove them from the D3DXMath.inc file too, instead of commenting them out in the project.<br /><br /><div class="quote">Maybe our linking options differ? (I use RadAsm, I can provide RAP file)</div><br /><br />You already provided the rap file in the project source.<br />I am using RadAsm too. The linking options for the project are:<br /><br /><pre><code>5,O,$B\LINK.EXE /SUBSYSTEM:WINDOWS /RELEASE /VERSION:4.0 /LIBPATH:&quot;$L&quot; /OUT:&quot;$5&quot;,3,4</code></pre><br /><br /><div class="quote">Anyway, you can safely comment out any references to DSound which are in the d3d9.inc file </div><br /><br />The project compiles now succesfully.<br /><br />I tested Tiny.x on my 1,8 GHz laptop:<br />- Saving of the output (DebugCenter): 667 KB<br />- Duration (Application Topmost, DebugCenter visible behind it): 5:15 minutes.<br />- Duration (DebugCenter Topmost): 4:12 minutes.<br />- Duration (Windows explorer Topmost, Application and DebugCenter not visible behind it: 3:11 minutes.<br />- Duration (Application Topmost, Debugging off): 2:51 minutes.<br />- Duration (Windows explorer Topmost, Application not visible behind it, Debugging off): 2:40 minutes.<br /><br />Friendly regards,<br />mdevries.</div>
    <div class="meta">Posted on 2006-12-27 01:38:24 by mdevries</div>
   </div>
   <div class="post" id="post-187155">
    <div class="subject"><a href="#post-187155">Re: Improved BSPGenerator</a></div>
    <div class="body">Please refer to Portals.inc ...<br /><br />The next step is to create a large rectangle (two big triangles) which lay on each of the splitting planes (non leaf nodes).<br />This is easily achieved via the bounding box corners (BoxMin, BoxMax).. we simply take the boundingbox values and feed them into each Plane Equation in order to generate the &#39;missing points&#39;.<br />We call these large triangles &#39;potential portal faces&#39;, and we store each pair of them in a list , then store that list in the Node whose splittingplane we just used to generate it.<br /><br />Why did we need to store them in lists? This is why:<br />Each time we create a list of potential portals on a given plane, we &#39;fragment&#39; that list by cutting those faces with ALL OTHER SPLITTINGPLANES... <br />We simply use our existing triangle-splitting code.. output collections are channelled back into their respective input collections instead of being shoved into child nodes.<br />Now each List contains a healthy number of &#39;potential portal fragments&#39;.<br /><br />The next part is a little tricky.. we need to &#39;frogmarch&#39; all those fragments down the tree.. Basically this is similar to generating a tree.. Note that since all fragments have been pre-split against all planes, no Splitting should occur during this stage.. if it does, you screwed up.<br />Each fragment is compared against the current node&#39;s plane.. front fragments are sent to the front child, back fragments to the back child, and (THIS IS IMPORTANT) coplanar fragments are sent down BOTH SIDES.<br />It is for THAT reason that we are using DwordCollections that contain REFERENCES to faces.. we can have multiple REFERENCES to one face without trouble.<br />Anyway, when that&#39;s completed, all the fragments have ended up filtering down into the leafnodes.<br /><br />We&#39;re almost finished !!<br /><br />For each PAIR of leafnodes, we look for any fragments that exist in BOTH leafnodes - if a fragment exists in two leafnodes, it&#39;s a &#39;TRUE PORTAL FRAGMENT&#39;, otherwise it&#39;s marked for death.<br /><br />Once we&#39;ve found all the TRUE PORTALS that join LEAFNODE PAIRS, we can DANCE A JIG because we just &#39;extracted connectivity information from a BSPTree&#39; - we&#39;re only a heartbeat away from generating a PVS for each leafnode.<br /><br />Portals make calculating PVS quite fast and simple, but theres at least one other thing we can use them for - if we recall that leafnodes describe &#39;the subspaces where players and other objects can exist&#39;, we can think of portals as &#39;the possible exits from the current room&#39;.. if Elvis collides with a portal, he just left the building.. more importantly, we know exactly which leafnode Elvis just entered, no discovery process is required.<br /><br /></div>
    <div class="meta">Posted on 2006-12-27 20:18:46 by Homer</div>
   </div>
   <div class="post" id="post-187157">
    <div class="subject"><a href="#post-187157">Re: Improved BSPGenerator</a></div>
    <div class="body">I&#39;ve finished writing code to save the tree (after generating it, and before we screw with Portals) , and to load it back again.<br /><br />Note to Biterider: The problem when using Put and Get methods was due to a lack of checking of MemAlloc failures.. Having spent some days developing this code, HeapAlloc() was beginning to fail (either my ram failing in the heat, or the OS heap manager failing due to poor implementation).. once I replaced the Get and Put calls with handcrafted loops that contained MemAlloc checking, the problem vanished - and strangely, MemAlloc stopped failing me too !!<br />Maybe all I had to do was reboot :P<br /><br />The Load and Save functions are recursive - the tree is saved and reloaded in exactly the same order it is typically Walked.<br />The planeptrs (stored in each node) are replaced with Indices during Saving, and are converted back into Pointers during Loading.<br />This could have been handled in a more linear fashion, but then we&#39;d have to store a chunk of linear data describing the tree layout (like Quake&#39;s BSP files, which use a binary string) - I chose to record this information on a per-node basis, thus the nodes themselves guide the reconstruction of the tree.. The two dwords which trail each non-leaf node in the file could be replaced with bytes, which would reduce the filesize somewhat, and there&#39;s a number of further optimisations that COULD have been applied in order to further reduce filesize, but it&#39;s simply not a big issue to me right now.<br /><br />The Load and Save functions both ATTEMPT to deal with Portals - which at this point don&#39;t exist .. it means that once I implement the portal generating code, we can reuse the existing Save and Load functions.<br /><br />I&#39;d like to make it clear that Tiny.x is a very UNSUITABLE mesh for BSPTree generation - which is exactly WHY I chose to use it.<br />Not ONE of its 6,841 planes was duplicated - nothing is truly coplanar (during loading of XFile, I eliminate duplicate Planes by returning duplicate Pointers/Indices)..<br />The planes of its faces intersect each other so much, causing MANY splits (despite our attempts to reduce this in ChooseDividingPlane).<br />Typical game worlds contain many more coplanar faces (more faces &#39;share the same planes&#39;, so we have less planes than faces at the start) - this is far more suitable - creating fewer splits (fewer new triangles and fewer new vertices), and yielding a more balanced, less deep tree.<br />I wanted to make SURE my generator would work for arbitrary scenes, not just nice orthogonal indoor scenes (eg DOOM)<br /><br /></div>
    <div class="meta">Posted on 2006-12-27 22:38:10 by Homer</div>
   </div>
   <div class="post" id="post-187162">
    <div class="subject"><a href="#post-187162">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer,<br /><br /><div class="quote">I&#39;ve finished writing code to save the tree (after generating<br />it, and before we screw with Portals) , and to load it back again.<br /><br />Note to Biterider: The problem when using Put and Get methods was<br />due to a lack of checking of MemAlloc failures.. Having spent some<br />days developing this code, HeapAlloc() was beginning to fail.<br /></div><br /><br />Does this mean you intended to attach the new source?<br />There is no attachment though, but I&#39;m interested in it.<br /> <br />Friendly regards,<br />mdevries.<br /></div>
    <div class="meta">Posted on 2006-12-28 03:27:40 by mdevries</div>
   </div>
   <div class="post" id="post-187164">
    <div class="subject"><a href="#post-187164">Re: Improved BSPGenerator</a></div>
    <div class="body">Attachment contains my sourcecode as of today.<br />The code in Portals.inc is unreliable and incomplete - it is only there for your personal amusement / interest.<br /><br />mdevries:<br />I&#39;m not in any hurry to complete this project - given that fact, and the implied time you have to familiarize yourself with this code, are you interested in helping to extend and complete it?<br />(I could shovel you smallish jobs to help complete the project)<br />No deadlines means no pressure, and since there&#39;s no pressure, I could care less if you completely bork the job, it&#39;s an educational/fun kinda project with a potentially commercial long term prognosis.<br />Please note that this is currently to the best of my knowledge the world&#39;s FASTEST BSPTree Generator, and I&#39;ve posted it all for FREE.<br />A lot of people don&#39;t really understand BSP, and the &#39;other&#39; ways it can be applied ... example.. a &#39;CSG Editor&#39; where our paint &#39;brushes&#39; are precompiled BSPTrees which are unioned at runtime.<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2203" target="_blank">BSPGenerator.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-12-28 05:03:54 by Homer</div>
   </div>
   <div class="post" id="post-187183">
    <div class="subject"><a href="#post-187183">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer,<br /><br /><div class="quote">I&#39;m not in any hurry to complete this project - given that<br />fact, and the implied time you have to familiarize yourself with this<br />code, are you interested in helping to extend and complete it?</div><br /><br />I&#39;m in the luxury of having holidays until the end of december.<br />That&#39;s why I have more time for asm programming at the moment. <br /><br />But have to divide my programming time into three parts:<br /><br />Gathering information<br />---------------------<br />I&#39;m always looking for documentation on subjects I&#39;m interested in,<br />which can be studied at a later moment. For instance:<br /><br />Project Source:<br />- OOP<br />- RadAsm AddIns<br />- 3D Projects<br />- GameDev Tutorial (Especially the way it was evolving)<br />- BSP Generator (I guess this project will evolve too, I am interested<br />in this evolving process)<br />etc.<br /><br />Books:<br />- Jim Adams: Advanced animation with DirectX<br />- Frank D.Luna: Introduction to 3D Game Programming with DirectX 9.0<br />etc.<br /><br />Studying information<br />--------------------<br />Gathered information has to be studied. At the moment I am studying:<br />- RadAsm AddIn source code projects <br /><br />Programming<br />------------<br />It is my wish to create a chess engine. I once did for DOS, and it was time consuming.<br />But for now my active programming time has to go to the tools I need for creating my engine. That&#39;s the reason why a few RadAsm AddIns have my specific attention at the moment. Maybe I want to create my own AddIn.<br />After my chess engine I want to give my active programming time<br />most likely to 3D programming.<br /><br />Given these facts, and your proposal to getting involved in the<br />BSPGenerator project: I&#39;ld rather be on the sideline for now,<br />if you don&#39;t mind. But I&#39;m interested in it.<br /><br />Friendly regards,<br />mdevries.</div>
    <div class="meta">Posted on 2006-12-29 10:07:11 by mdevries</div>
   </div>
   <div class="post" id="post-187190">
    <div class="subject"><a href="#post-187190">Re: Improved BSPGenerator</a></div>
    <div class="body">Not a problem :)<br /><br />I&#39;ve never coded a chess engine, but I can say without a moment of hesitation that it would be based on a neural network.<br />The reason is that chess (and most turn-based games for that matter) is an exercise in pattern recognition, and neural networks are nothing if not trainable pattern recognizers... training your own game to beat you sounds a lot more fun than the alternatives, and it will remain unpredictable and adjust itself to the enemy.<br /><br />Anyway, I&#39;m now at the stage where I&#39;m creating a large flat rectangle&nbsp; (actually 2 big triangles) apon the plane of each non leaf node and extending over the entire bounds of the model (ie based on the model&#39;s bounding box).<br />Each rectangle is a collection of triangles, and lives in node.pPortals<br />I&#39;m meant to split each of these pairs of triangles using the planes of all the OTHER non-leaf nodes, so that we produce a crapload of tiny fragments of triangles.. then I&#39;m meant to pass each resulting list of fragments to the rootnode and let them &#39;fall through the tree&#39; by classifying them against each node&#39;s plane until they reach the leaves (no splitting should happen now).<br />The current problem I&#39;m facing is that my triangle splitting code is refusing to correctly classify my giant triangle pairs against the other splitplanes and so no fragmenting is occuring.<br />I suspect I&#39;m doing something silly, since I&#39;m reusing a lot of the code from previous stages, and hadn&#39;t detected issues in there previously.<br />One thing I did do late last night is add a couple of debug lines to let me see when large portals are first created what plane they were meant to use, and what plane the new big triangles actually used.. I noticed a very small error, far smaller than my epsilon of .001 , but still..<br /><br />The attached zip contains an update allowing you to save your tree to a &#39;TRF&#39; custom file after generating it, and to allow you to load a TRF file for portal generating.<br />It includes several minor bugfixes, and several modifications of shared functions.<br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2205" target="_blank">BSPGenerator.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-12-29 22:23:15 by Homer</div>
   </div>
   <div class="post" id="post-187191">
    <div class="subject"><a href="#post-187191">Re: Improved BSPGenerator</a></div>
    <div class="body">Think I found the problem..<br />The boundingbox of the entire model is calculated when the xfile is first loaded.. I had neglected to store this in my custom file data.. so that one is my bad, since I insisted on saving the machinestate half way.<br /><br />Also, I found the source of the instability in the loader, and fixed that small and silly bug also.<br />Probably be updating this again today :)</div>
    <div class="meta">Posted on 2006-12-29 22:48:28 by Homer</div>
   </div>
   <div class="post" id="post-187196">
    <div class="subject"><a href="#post-187196">Re: Improved BSPGenerator</a></div>
    <div class="body">Hi Homer,<br /><br />Thanks for your thoughts:<br /><br /><div class="quote">I&#39;ve never coded a chess engine, but I can say without a moment of<br />hesitation that it would be based on a neural network.<br />The reason is that chess (and most turn-based games for that matter) is an<br />exercise in pattern recognition, and neural networks are nothing if not trainable<br />pattern recognizers... training your own game to beat you sounds a lot more fun<br />than the alternatives, and it will remain unpredictable and adjust itself to the enemy.</div><br /><br />I must admit that my chess engine wasn&#39;t a self teaching system.<br />What readings on neural networks would you recommend?<br />- Documentation<br />- Tutorials<br />- Project sources<br /><br />Friendly regards,<br />mdevries.</div>
    <div class="meta">Posted on 2006-12-30 04:47:12 by mdevries</div>
   </div>
   <div class="post" id="post-187197">
    <div class="subject"><a href="#post-187197">Re: Improved BSPGenerator</a></div>
    <div class="body">I would recommend a thorough study of Thomas Bleeker&#39;s DigiBrain project, and suggest that my oopified translation of the core code be a good place to start. Here we have working code, and a proven demo, and that&#39;s always a bonus.<br /></div>
    <div class="meta">Posted on 2006-12-30 06:52:46 by Homer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=25640&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=25640&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="25640" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=25640&amp;page=2">&gt;</a><a href="../?id=25640&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>