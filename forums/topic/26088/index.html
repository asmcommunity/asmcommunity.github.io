<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Breadth first search and Kevin Bacon - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26088" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26088">Breadth first search and Kevin Bacon</a></p>
   <div class="post" id="post-190020">
    <div class="subject"><a href="#post-190020">Breadth first search and Kevin Bacon</a></div>
    <div class="body">Hi, I am not sure if this is the right place to post this, but couldn&#39;t find any algorithms section or something similar...<br /><br />I am doing the Six Degrees of Kevin Bacon implementation. <br /><br />For those who do not know, the problem states that all actors/actresses are related to Kevin Bacon by appearing directly in a movie with him, or by being in a movie with someone who has been with Bacon, or someone who has been with someone who has been with someone who has been... etc with Bacon. <br /><br />&quot;The computation of a Bacon number for X is a &quot;shortest path&quot; algorithm. It involves computing the Bacon number for all film actors who X has acted with:<br /><br />If X has appeared in a movie with Bacon, X&#39;s Bacon number is 1 <br />If X does not have a Bacon number of 1 (hasn&#39;t appeared in a Bacon movie) but has appeared in a movie with someone who has, X&#39;s Bacon Number is 2 <br />If X does not have a Bacon number of 2, the computation continues, examining all actors with whom X has been in a movie. The Bacon number of X is 1 plus the lowest Bacon number of all actors who have appeared in a movie with X. &quot; (Wikipedia: http://en.wikipedia.org/wiki/Bacon_number)<br /><br />For example, also from wikipedia: <br /><br />Pope John Paul II (Bacon number: 3) <br /><br />Pope John Paul II was in Padre Pio â€” Tra cielo e terra (2000) with Giovanni Lombardo Radice. <br />Giovanni Lombardo Radice was in The Omen (2006) with Vee Vimolmal <br />Vee Vimolmal was in Where the Truth Lies (2005) with Kevin Bacon <br /><br />I hope the problem is understood...&nbsp; I am given a text file with lots of movies and their actors. The file contains thousands of lines like this one:<br /><br />Name of the movie (1970): Bacon, Kevin/ Alley, Kirstie/ Another, actor/ Another, actress/...... and so on...<br /><br />Name of movie 2 (1969): More, actors/ More, actresses/.... and so on<br /><br />So I thought about doing it with a BFS search... But I don&#39;t know how to use data structures for this problem... Also, I cannot figure the problem to use the BFS search, I suppose each actor is a vertex, but how? I mean, I just can&#39;t draw the approach in my head... If someone can give me some light here, I would really appreciate!!! I am really lost, have been thinking about this for like a week but... well hopefully someone puts me on the road...<br /><br />Thanks a lot! Thanks for reading this!!<br /><br /><br /><br /></div>
    <div class="meta">Posted on 2007-08-04 19:34:38 by Snake</div>
   </div>
   <div class="post" id="post-190024">
    <div class="subject"><a href="#post-190024">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body"><div class="quote"><br /><br />Please, could you post the file?<br /><br /></div><br /><br />In case you are wondering, Snake, the contents of the file and how they are arranged are vital in picking the best suited algorithm.</div>
    <div class="meta">Posted on 2007-08-05 10:28:56 by SpooK</div>
   </div>
   <div class="post" id="post-190027">
    <div class="subject"><a href="#post-190027">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">Sounds a bit like homework, but at least a pretty interesting topic for once :)<br /></div>
    <div class="meta">Posted on 2007-08-05 11:19:44 by f0dder</div>
   </div>
   <div class="post" id="post-190028">
    <div class="subject"><a href="#post-190028">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">Thanks! :) This is a compact version of the file, the real one is like 5 MB, and then there is another one which is like 20 MB... I post the small one since it is the same as the other ones but with less movies... <br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2395" target="_blank">movie-top-grossing.txt</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2007-08-05 14:27:45 by Snake</div>
   </div>
   <div class="post" id="post-190030">
    <div class="subject"><a href="#post-190030">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">This reminds me of the classic &#39;Travelling Salesman&#39; problem, or even the &#39;Dining Philosophers&#39; problem.<br /></div>
    <div class="meta">Posted on 2007-08-05 22:19:44 by Homer</div>
   </div>
   <div class="post" id="post-190031">
    <div class="subject"><a href="#post-190031">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body"><div class="quote"><br />This reminds me of the classic &#39;Travelling Salesman&#39; problem, or even the &#39;Dining Philosophers&#39; problem.<br /><br /></div><br /><br />How does it relate to the dining philosophers&#39; problem? I don&#39;t see any relation at all :s</div>
    <div class="meta">Posted on 2007-08-05 22:29:24 by Snake</div>
   </div>
   <div class="post" id="post-190058">
    <div class="subject"><a href="#post-190058">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">Any ideas?</div>
    <div class="meta">Posted on 2007-08-07 11:09:40 by Snake</div>
   </div>
   <div class="post" id="post-190060">
    <div class="subject"><a href="#post-190060">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">How about something like:<br /><pre><code><br />MOVIE struct<br />	MovieID		dd ?<br />	MovieName	db 32 dup (?)<br />	NumActors	dd ?<br />	BaconNumber	dd ?<br />	Actors		dd 0 dup (?) ; variable-size! , is an array of ActorID&#39;s<br />MOVIE ends<br />	<br />ACTOR struct<br />	ActorID		dd ?<br />	ActorName	db 32 dup (?)<br />	NumMovies	dd ?<br />	BaconNumber	dd ?<br />	Movies		dd 0 dup (?) ; variable-size! , is an array of MovieID&#39;s<br />ACTOR ends<br /><br /><br />AllMovies dd 0 ; ptr to the MOVIE array (pointer to pointer)<br />AllActors dd 0 ; ptr to the ACTOR array (pointer to pointer)<br />NumMovies dd 0<br />NumActors dd 0<br />CurBacon&nbsp; dd 0<br /><br /><br /><br />InitArrays proc<br />	;-----------------------\<br />	; here, you&#39;ll be constantly increasing the size of the AllMovies and AllActors arrays,<br />	; and allocating+resizing the MOVIE and ACTOR structs, when a new actor/movie is added. <br />	;...<br />	;-----------------------/<br />	ret<br />InitArrays endp<br /><br /><br />FindBaconNumbersFor proc ActorID<br />	;------[ for each MOVIE and ACTOR, set BaconNumber to 0 ]------[<br />	;...<br />	;--------------------------------------------------------------/<br />	;---[ global registers! ]---\<br />	xor edx,edx ; CurBacon<br />	mov esi,AllMovies<br />	mov edi,AllActors<br />	;---------------------------/<br />	<br />	invoke EnumMovies,ActorID<br />	ret<br />FindBaconNumbersFor	endp<br /><br />EnumMovies proc uses ebx ecx ; ActorID is in EAX<br />	mov ebx, ; ebx = AllActors<br />	inc edx<br />	cmp .ACTOR.BaconNumber,0<br />	mov ecx,.ACTOR.NumMovies<br />	jne _done<br />	mov .ACTOR.BaconNumber,edx<br />	add ebx,ACTOR ; now ebx becomes the address of the Movies&#91;] array<br />	_next:<br />		dec ecx<br />		jl _done<br />		mov eax,<br />		call EnumActors ; can be optimized with a &quot;push _next | jmp EnumActors&quot;<br />	jmp _next<br />	_done:<br />	dec edx<br />	ret<br />EnumMovies endp<br /><br />EnumActors proc uses ebx ecx ; MovieID is in EAX<br />	mov ebx, ; ebx = AllMovies<br />	cmp .MOVIE.BaconNumber,0<br />	mov ecx,.MOVIE.NumActors<br />	jne _done<br />	mov .MOVIE.BaconNumber,edx<br />	add ebx,MOVIE ; now ebx becomes the address of the Movies&#91;] array<br />	_next:<br />		dec ecx<br />		jl _done<br />		mov eax,<br />		call EnumMovies ; can be optimized with a &quot;push _next | jmp EnumMovies&quot;<br />	jmp _next<br />	_done:<br />	ret<br />EnumActors endp<br /></code></pre><br /><br />A bit of optimization would be to have two separate dd arrays for MovieBacon and ActorBacon. (bacon!=0 means &quot;visited&quot; already)<br /><br />Haven&#39;t tested it, and can&#39;t guarantee the idea is ok ^^&quot;</div>
    <div class="meta">Posted on 2007-08-07 12:35:45 by Ultrano</div>
   </div>
   <div class="post" id="post-190105">
    <div class="subject"><a href="#post-190105">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">P.S. A slight error in the code:<br /><br />initially, set everything&#39;s BaconNumber to 2,000,000,000<br />and modify at both places<br /><br /><pre><code><br />cmp .MOVIE.BaconNumber,0<br />mov ecx,.MOVIE.NumActors<br />jne _done<br /><br />into<br /><br />cmp .MOVIE.BaconNumber,edx<br />mov ecx,.MOVIE.NumActors<br />jle _done<br /></code></pre></div>
    <div class="meta">Posted on 2007-08-09 09:50:03 by Ultrano</div>
   </div>
   <div class="post" id="post-190107">
    <div class="subject"><a href="#post-190107">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">Looks good, however, would that be efficient on a big file? Looks like it would take a while, but I am not sure though :p</div>
    <div class="meta">Posted on 2007-08-09 11:23:45 by Snake</div>
   </div>
   <div class="post" id="post-190108">
    <div class="subject"><a href="#post-190108">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">A big file? The whole idea, as I&#39;ve understood, is to compute the Bacon number of _every_ actor. So, it&#39;s necessary/best to put the necessary data into RAM. Let&#39;s assume you have the data of 1 million actors, 200000 movies, 15 actors average per movie, 20 movies average per actor. Let&#39;s remove the unnecessary MovieID and MovieName from the Movie struct and their respective members in the Actor struct, and move the BaconNumber outside of the structs. Total of 106,400,000 bytes RAM. Plenty of space to waste to reach the 2GB limit. <br /><br />My idea is similar to the Bellman-Ford algorithm, but using the optimization-shortcut of having &quot;Movies&quot; present groups of edges. Because otherwise you&#39;d have to make 1 graph, where actors are vertices, and each vertex is connected to ALL actors from ALL movies the current actor has played in. In other words, when an actor-vertex has 300 (20*15) edges, we needn&#39;t iterate/check them all again (in the case of them having been already visited with a shorter/same path-length): we just iterate 20 times. For even further optimization, maybe we can add some&nbsp; marking of visited/next-to-visit Movies, to do the more efficient breadth-first enumeration. But I guess that&#39;s already some fine-tuning to do after you have converted the current data into suitable MovieID/ActorID/Movies&#91;]/Actors&#91;] pure-integer data, and checked the speed of the current ideas. </div>
    <div class="meta">Posted on 2007-08-09 11:51:25 by Ultrano</div>
   </div>
   <div class="post" id="post-202611">
    <div class="subject"><a href="#post-202611">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">Thanks very much Ultrano... I&#039;ll see how that goes... I still find confusing your two procedures EnumMovies and EnumActors and the way they find the bacon number... I would greatly appreciate if you gave some hints in here :p</div>
    <div class="meta">Posted on 2007-08-10 23:33:00 by Snake</div>
   </div>
   <div class="post" id="post-202613">
    <div class="subject"><a href="#post-202613">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body"><div class="quote"><br /><pre><code><br />InitArrays proc<br />	;-----------------------\<br />	; here, you&#039;ll be constantly increasing the size of the AllMovies and AllActors arrays,<br />	; and allocating+resizing the MOVIE and ACTOR structs, when a new actor/movie is added. <br />	;...<br />	;-----------------------/<br />	ret<br />InitArrays endp<br /></code></pre><br /></div><br /><br />I&#039;ve made a set of routines for the above task.<br /><br />When you need additional memory: invoke AdjustMemory, ptr MEMORY.<br /><br />AdjustMemory will allocate more mem (if needed) and return<br />the pointer to current free mem in EAX and the pointer in ECX to...hmm, read the docs;)<br /><br />AdjustMemory is designed for fixed-size structures and so, but can be used here, as well.<br /><br />example:<br /><br />movies MEMORY &lt;100* sMOVIE, 5* sMOVIE&gt;<br /><br />	;when adding a new MOVIE<br />		invoke	AdjustMemory, o movies<br /><br />		assume	eax:pMOVIE, ecx:ptr POINTER<br />		add	.sMOVIE<br /><br />		mov	.BaconNumber, 0<br />		.<br />		.<br />		.<br />		assume	eax:nothing, ecx:nothing<br /><br />You can get it from www.beotel.net/~astancic (click on &quot;Memory.zip&quot;)<br />(Comments are in quick and poor english, sorry.)</div>
    <div class="meta">Posted on 2007-08-11 02:04:27 by aleksaZR</div>
   </div>
   <div class="post" id="post-202619">
    <div class="subject"><a href="#post-202619">Re: Breadth first search and Kevin Bacon</a></div>
    <div class="body">what? bread and bacon?&nbsp;  :P<br /> :D<br /><br />ok, i&#039;ll leave now...</div>
    <div class="meta">Posted on 2007-08-14 07:05:48 by HeLLoWorld</div>
   </div>
  </div>
 </body>
</html>