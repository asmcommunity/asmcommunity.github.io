<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>floating FCOM instruction - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=272" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=272">floating FCOM instruction</a></p>
   <div class="post" id="post-1419">
    <div class="subject"><a href="#post-1419">floating FCOM instruction</a></div>
    <div class="body">i've got some problem to find a complete floating instruction documentation. <br /><br />Now i need to compare to float real8 values.<br />I've found FCOM but i couldn't find an explaination of this instruction.<br /><br />How can i compare st(0) with st(1) ?<br />Is FCOM the right instruction ?<br />What's the correct syntax ?<br /><br />thanks angelo</div>
    <div class="meta">Posted on 2001-07-20 08:17:42 by Bit7</div>
   </div>
   <div class="post" id="post-1421">
    <div class="subject"><a href="#post-1421">floating FCOM instruction</a></div>
    <div class="body"><pre><code><br />Instruction      Description<br />FCOM m32real     Compare ST&#40;0&#41; with m32real.<br />FCOM m64real     Compare ST&#40;0&#41; with m64real.<br />FCOM ST&#40;i&#41;       Compare ST&#40;0&#41; with ST&#40;i&#41;.<br />FCOM             Compare ST&#40;0&#41; with ST&#40;1&#41;.<br />FCOMP m32real    Compare ST&#40;0&#41; with m32real and pop register stack.<br />FCOMP m64real    Compare ST&#40;0&#41; with m64real and pop register stack.<br />FCOMP ST&#40;i&#41;      Compare ST&#40;0&#41; with ST&#40;i&#41; and pop register stack.<br />FCOMP            Compare ST&#40;0&#41; with ST&#40;1&#41; and pop register stack.<br />FCOMPP           Compare ST&#40;0&#41; with ST&#40;1&#41; and pop register stack twice.<br /></code></pre></div>
    <div class="meta">Posted on 2001-07-20 08:28:44 by gamital</div>
   </div>
   <div class="post" id="post-1448">
    <div class="subject"><a href="#post-1448">floating FCOM instruction</a></div>
    <div class="body">thanks</div>
    <div class="meta">Posted on 2001-07-20 11:34:32 by Bit7</div>
   </div>
   <div class="post" id="post-1482">
    <div class="subject"><a href="#post-1482">floating FCOM instruction</a></div>
    <div class="body">don't forget that after any compare you have to use the following two instructions:<br /><br />fstsw ax<br />sahf<br /><br />Then you can use conditional jumps, etc</div>
    <div class="meta">Posted on 2001-07-20 17:20:47 by Eóin</div>
   </div>
   <div class="post" id="post-1534">
    <div class="subject"><a href="#post-1534">floating FCOM instruction</a></div>
    <div class="body">I think scali whipped up some macros for floating-point conditional<br />jumps. Check out <a target="_blank" href="http://sourcevault.cjb.net">http://sourcevault.cjb.net</a> .</div>
    <div class="meta">Posted on 2001-07-21 03:40:23 by f0dder</div>
   </div>
   <div class="post" id="post-1649">
    <div class="subject"><a href="#post-1649">floating FCOM instruction</a></div>
    <div class="body">Keep in mind that if you want to compare 2 REAL4 value, you can use the normal cmp instruction (a real4 value can fit in DWORD). It easier and faster.<br /><br />Note : you can even compare a REAL4 value with a DWORD Integer.<br /><br />(s)</div>
    <div class="meta">Posted on 2001-07-22 04:29:59 by (scalp)</div>
   </div>
   <div class="post" id="post-1651">
    <div class="subject"><a href="#post-1651">floating FCOM instruction</a></div>
    <div class="body">Are you sure scalp. I mean the binary representation of 1 and 1.0f are completly different. If you used cmp they wouldn't register as equal.<br /><br />In fact the only crossover between the integer and floating point binary representations of numbers is for zero. In fact this won't even always be the case as there are two valid representations of zero in floating point fromat. +0 and -0</div>
    <div class="meta">Posted on 2001-07-22 05:21:23 by Eóin</div>
   </div>
   <div class="post" id="post-1655">
    <div class="subject"><a href="#post-1655">Oups</a></div>
    <div class="body">U're right Zadkiel, u can compare 2 float each other using cmp, and cmp a float with 0 but not a float with int.<br />I don't know why i thought that....<br /><br />(s)</div>
    <div class="meta">Posted on 2001-07-22 05:37:16 by (scalp)</div>
   </div>
   <div class="post" id="post-1664">
    <div class="subject"><a href="#post-1664">floating FCOM instruction</a></div>
    <div class="body">You can't even compare to float's for equality this way. Because of<br />rounding errors (etc), you should always allow for a very little difference<br />between to floats, even if testing for equality.</div>
    <div class="meta">Posted on 2001-07-22 10:28:57 by f0dder</div>
   </div>
  </div>
 </body>
</html>