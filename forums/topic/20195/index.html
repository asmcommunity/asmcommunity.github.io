<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Create Thread - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20195" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=17">Iczelion's Tutorials</a> &raquo; <a href="../?id=20195">Create Thread</a></p>
   <div class="post" id="post-154661">
    <div class="subject"><a href="#post-154661">Create Thread</a></div>
    <div class="body">There's a win32 api function called CreateRemoteThread(). I was wondering if the thread exits cleanly if you use it. I heard it is quite untidy (the return handle). When used with VirtualAllocEx, it never gets deallocated. Just wondering if anyone can elaborate on that or even show some examples how to use it properly and what isn't the proper way to use it. Thanks</div>
    <div class="meta">Posted on 2004-12-23 16:56:27 by Randomizer</div>
   </div>
   <div class="post" id="post-154690">
    <div class="subject"><a href="#post-154690">Create Thread</a></div>
    <div class="body">When a thread exits with a normal ret, windows takes care of cleaning up (you must, of course, close the handle returned by Create*Thread yourself to avoid kernel-mode object leaks - not that using CloseHandle on the thread handle does *not* terminate the thread). You get leaks if you use TerminateThread.<br /><br />As for the memory allocated with VirtualAllocEx, just free it once the thread has terminated: you could WaitForSingleObject on the thread handle, then CloseHandle, then VirtualFreeEx.</div>
    <div class="meta">Posted on 2004-12-24 06:56:37 by f0dder</div>
   </div>
  </div>
 </body>
</html>