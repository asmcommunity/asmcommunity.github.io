<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>OpenGL Engine DLL - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19865" />
  <link rel="prev" href="../?id=19865&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=19865">OpenGL Engine DLL</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=19865&amp;page=1" style="">&laquo;</a><a href="../?id=19865&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="19865" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-153345">
    <div class="subject"><a href="#post-153345">OpenGL Engine DLL</a></div>
    <div class="body">I've done it.<br />I've implemented the Frustum class as I described, and I've tested it with the CubeManager to render cullable and selectable 3D textured Cubes.<br /><br />I modified the CubeManager_RenderAllSelectable method to have one extra param, a pointer to the Camera you wish to &quot;render through&quot;.<br />Now you can throw your geometry at the current Camera quite easily :)<br /><br />The Camera class now supports three cull-related methods which you can use to test render objects at the last moment during rendering loops :)<br />They are called Camera_CullPoint, Camera_CullSphere and Camera_CullCube. They return TRUE if the entity is offscreen and should be culled, they return FALSE if the entity is (partially?) onscreen and should be rendered.<br /><br />Who's a Happy Homer ?<br /><br /><br />Have a nice day :)</div>
    <div class="meta">Posted on 2004-11-22 03:26:49 by Homer</div>
   </div>
   <div class="post" id="post-153358">
    <div class="subject"><a href="#post-153358">OpenGL Engine DLL</a></div>
    <div class="body">I took a break after that little effort (phew!) I felt that I should quit while I was way ahead :)<br /><br />Next things to be added: the existing but currently not implemented Sphere class, a yet-to-be-written SphereManager class, and then modify both the Cube and Sphere classes to use per-instance textures (at which point I will probably want to implement some kind of texture management too).<br /><br />After that I am ready to add some support for &quot;complex objects&quot; in the form of Loaders for some common model file formats (OBJ, 3DS etc)<br /><br />Then I must add code to find tight-fitting hulls for those complex objects (in the form of non-rendered cubes and spheres?) <br /><br />Having done all of that, it will probably be time to write up some documentation and post the first official public beta of the engine :)</div>
    <div class="meta">Posted on 2004-11-22 07:36:28 by Homer</div>
   </div>
   <div class="post" id="post-153381">
    <div class="subject"><a href="#post-153381">OpenGL Engine DLL</a></div>
    <div class="body">It has been brought to my attention that a problem exists in the Camera code. It would be great if I could get some feedback on this.<br />If you visit my page http://homer.ultrano.com and scroll to the bottom theres a list of files. The latest upload of this project is called &quot;dllStuff5.rar&quot; - you will need one of the very early ones for the bmp files.<br /><br />A quick description of the problem:<br />I have a scene containing two 3D cubes positioned at +/-,0,0 ie one on either side of the Origin, separated on the X axis. My camera is a few units back in Z so we can see them immediately.<br />If we move towards 0,0,0 ie the space between the cubes, the Camera will veer off to the left or right (whichever Cube is closer) as if the Cubes themselves are somehow attracting the Camera. The Direction X value is moving more than it should be.<br />HOWEVER, if I &quot;sidestep&quot; around these cubes and approach the origin from the far side, the problem disappears - and if I now return to the original location and again approach the origin, its working correctly !!<br /><br />Does this sound weird or what?</div>
    <div class="meta">Posted on 2004-11-22 18:28:16 by Homer</div>
   </div>
   <div class="post" id="post-153386">
    <div class="subject"><a href="#post-153386">OpenGL Engine DLL</a></div>
    <div class="body">The problem was resolved by setting the initial lookat point further away.<br />Something smells funny, and I'm not smiling.<br />But it's working and correctly.</div>
    <div class="meta">Posted on 2004-11-22 19:16:19 by Homer</div>
   </div>
   <div class="post" id="post-153389">
    <div class="subject"><a href="#post-153389">OpenGL Engine DLL</a></div>
    <div class="body">Oh joy, Oh joy, Oh joyojoyojoy !!!<br /><br />Implemented Sphere class (textured 3D sphere instances)<br />Implemented SphereManager class (an arraymanager for the above)<br />Implemented Selectable, CULLABLE spheres :)<br /><br />Just like the Cube and CubeManager, Sphere and SphereManager handle all the rending and culling for effectively an infinite number of 3D spheres.<br />Just like the Cubez code, culling is performed by the frustum of the active camera.<br />Just like the Cubez code, Selectable objects return their pointer on request.<br /><br />Do you feel lucky, punk?</div>
    <div class="meta">Posted on 2004-11-22 22:25:32 by Homer</div>
   </div>
   <div class="post" id="post-153447">
    <div class="subject"><a href="#post-153447">OpenGL Engine DLL</a></div>
    <div class="body">I've added complete code for importing (loading), animating and rending of player models from MD3 (Quake3) files. It's compiling ok but its untested and I have to assume there's a lot of bugs to be fixed.<br />The code compiled to 3kb, not bad huh <img src="http://www.asmcommunity.net/board/images/smiles/icon_smile.gif" /><br />The entire DLL is still a puny 29kb, and could definitely be screwed down even tighter than that.<br />I'll try to get all that code working asap, followed by the addition of collision detection of the player model with the world, using an imaginary sphere about the player model.<br />After that, code to export (save) the player models to a CUSTOM FILE FORMAT so that IDG don't get antsy and sue me <img src="http://www.asmcommunity.net/board/images/smiles/icon_smile.gif" /><br />Finally, code to import (load) the now native custom format.<br />At that point, I can only be accused of writing a file format converter, and not of openly ripping off the MD3 file format. As long as I don't imply that MD3 is the native format of the Engine, I should be safe, yes?" /></div>
    <div class="meta">Posted on 2004-11-29 06:58:16 by Homer</div>
   </div>
   <div class="post" id="post-153786">
    <div class="subject"><a href="#post-153786">OpenGL Engine DLL</a></div>
    <div class="body">Bah - considering throwing away all the work I did on MD3 support.<br /><br />I've decided I want to separate the skeleton, its animations, and mesh into separate data files. I'm using Maya for modelling, and I'm satisfied that I can do something useful with the data exported by Maya's animExport plugin, but there's no neat solution to exporting skeletons by themselves. The best solution I found was to export the skeleton to DirectX X-File format (ASCII) and then pilfer the minimal required data by hand (for the moment)..<br />Since there was no one super-sexy file format for Skeleton data, I have begun implementing my own file format..<br />I've already written a Loader for it, which is working nicely.<br /><br />Here's the example file which I'm loading at the moment..<br />(note the matrix values are dummy values only)<br /><br /><pre><code><br />Skeleton Biped<br />    Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0         ;Matrix to position and orient the Skeleton Origin<br />    Joint Pelvis<br />        Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0     ;Matrix to position and orient the Pelvis relative to &#40;Origin&#41;<br />        Joint LeftHip<br />           Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0     ;Matrix to position and orient the LeftHip relative to Pelvis<br />            Joint LeftKnee<br />                Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                Joint LeftAnkle<br />                    Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                EndJoint<br />            EndJoint<br />        EndJoint<br />        Joint RightHip<br />            Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0     ;Matrix to position and orient the RightHip relative to Pelvis<br />            Joint RightKnee<br />                Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                Joint RightAnkle<br />                    Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                EndJoint<br />            EndJoint<br />        EndJoint<br />        Joint LowerSpine<br />            Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0  &lt;&gt;    ;Matrix to position and orient the LowerSpine relative to Pelvis<br />            Joint UpperSpine<br />                Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                Joint Clavicle<br />                    Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                    Joint LeftShoulder<br />                        Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                        Joint LeftElbow<br />                            Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                             Joint LeftWrist<br />                                Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                             EndJoint<br />                        EndJoint<br />                    EndJoint<br />                    Joint RightShoulder<br />                        Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                        Joint RightElbow<br />                            Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                             Joint RightWrist<br />                                Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                             EndJoint<br />                        EndJoint<br />                    EndJoint<br />                    Joint Neck<br />                        Mat4 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0<br />                    EndJoint<br />                EndJoint<br />            EndJoint<br />        EndJoint<br />    EndJoint<br />EndSkeleton<br /></code></pre></div>
    <div class="meta">Posted on 2004-12-06 07:14:25 by Homer</div>
   </div>
   <div class="post" id="post-153793">
    <div class="subject"><a href="#post-153793">OpenGL Engine DLL</a></div>
    <div class="body">Basically it's a simply script language for describing a hierarchy of named joints, along with a 4x4 matrix for each joint which is used to position and orient each joint...<br /><br />This should be enough information for me to render the skeleton in its &quot;bind pose&quot; by using some primitives to show the joints and bones...</div>
    <div class="meta">Posted on 2004-12-06 07:56:42 by Homer</div>
   </div>
   <div class="post" id="post-153823">
    <div class="subject"><a href="#post-153823">OpenGL Engine DLL</a></div>
    <div class="body">OK think of it this way : if the above script (describing a joint hierarchy) is enough to display the skeleton in its &quot;bind pose&quot;, then we should realize that Joints are what needs to be animated..<br />Animation keyframes will consist of matrices to be applied to joints, and therefore the matrices in the Joint Hierarchy will be replaced at runtime with matrices interpolated from the current and next keyframes.<br /><br />Clear as mud, eh?</div>
    <div class="meta">Posted on 2004-12-06 22:32:41 by Homer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=19865&amp;page=1" style="">&laquo;</a><a href="../?id=19865&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="19865" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>