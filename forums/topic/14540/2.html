<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Somewhat new to Intel chips. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14540" />
  <link rel="prev" href="../?id=14540&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=14540">Somewhat new to Intel chips.</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=14540&amp;page=1" style="">&laquo;</a><a href="../?id=14540&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="14540" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-112875">
    <div class="subject"><a href="#post-112875">Somewhat new to Intel chips.</a></div>
    <div class="body"><div class="quote"><br /><br />Windows is doing this already - pages are pulled in from the executable as needed.<br /></div><br /><br />Actually, the entire program is loaded (minus any referenced externals) upon execution, then any dll's that are accessed are processed at first usage and expunged when they have a use count of 0.  But thats not what I'm meaning.<br /><br />IE:  Splash window shows up, only once during program start (like Adobe Photoshop, etc), then when it's done, those areas are freed from memory, to allow for other code to pull in, and if you never use a certain function (within the program, not a dll), the code isn't read in from the exe on disk.<br /><br /><div class="quote"><br /><br />Humm... if they're referencing the import table, it should work... but I guess it depends on details of your scheme. Sounds like you're doing weird stuff ^_^ </div><br /><br />But thats the problem, each segment is dynamically loaded when needed, and when it's no longer needed, expunged for free space to work in.  IE:  A 2 meg exe would take 64k of any memory to run in, as the sections needed would be in chunks and would only need about 64k of memory to work with.  It's how the Macs do things on such short memory constraints.  It's the closest I can explain what I'm doing, takes chunks from a &quot;chunk file&quot;, same idea though, when I need the code, that part that is referenced, is pulled in, set up and used, count is kept a hold of and when room is needed, the oldest chunk gets tossed.</div>
    <div class="meta">Posted on 2003-08-03 18:09:45 by FunkyMeister</div>
   </div>
   <div class="post" id="post-112876">
    <div class="subject"><a href="#post-112876">Somewhat new to Intel chips.</a></div>
    <div class="body"><div class="quote"><br />Actually, the entire program is loaded (minus any referenced externals) upon execution, then any dll's that are accessed are processed at first usage and expunged when they have a use count of 0. But thats not what I'm meaning.<br /></div><br />Wrong :)<br />Pages are pulled in on a as-necessary basis. It's not done in 4k increments though, I think it might be 64k or something like it. If you don't believe me, try creating an executable with a huge (say, 128 megs) array of 'A's. Will take some time assembling it with masm because of the way DUP works. But it will show I'm right.<br /><br />Also, the advantage of letting windows handle this (voided if you use silly things like EXE packers) is that, in low-mem situation, windows can discard code/static-data pages, and re-read the, directly from the disk file if needed again. If you use exe compression or implement your own swapping scheme, you have dirty pages, which have to be swapped out to the pagefile.<br /><br />Not saying you can't get some benefit from doing it on your own...</div>
    <div class="meta">Posted on 2003-08-03 18:16:18 by f0dder</div>
   </div>
   <div class="post" id="post-112906">
    <div class="subject"><a href="#post-112906">Somewhat new to Intel chips.</a></div>
    <div class="body"><div class="quote"><br /><br />Wrong :)<br />Pages are pulled in on a as-necessary basis. It's not done in 4k increments though, I think it might be 64k or something like it. If you don't believe me, try creating an executable with a huge (say, 128 megs) array of 'A's. Will take some time assembling it with masm because of the way DUP works. But it will show I'm right.<br /></div><br /><br />Well, either way, I need a safe bet to call windows library functions from a non-in-memory function (pulled in as needed/used).  And the thing is, the entire program will load if you have enough memory (seen that happen).  The Cache also will have a copy of it (if it's large enough too).  If you don't have the memory, then yes, the entire thing gets tossed into the swap file minus the part that's not there.  I've not run into any program that hasn't done that.   Minus the DLLs.<br /><br /><div class="quote"><br />Also, the advantage of letting windows handle this (voided if you use silly things like EXE packers) is that, in low-mem situation, windows can discard code/static-data pages, and re-read the, directly from the disk file if needed again. If you use exe compression or implement your own swapping scheme, you have dirty pages, which have to be swapped out to the pagefile.<br /><br />Not saying you can't get some benefit from doing it on your own... </div><br /><br />Well, the problem is, I need to do it myself.  The mystery on getting to Windows is odd, not sure why Microsoft made talking to their OS so alienating.<br /><br />It's got to be the hardest one to talk to out of a good deal of them, well, for what I'm doing.</div>
    <div class="meta">Posted on 2003-08-03 23:49:03 by FunkyMeister</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=14540&amp;page=1" style="">&laquo;</a><a href="../?id=14540&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="14540" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>