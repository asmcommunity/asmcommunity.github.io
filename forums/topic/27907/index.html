<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Invalid opcode - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27907" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27907">Invalid opcode</a></p>
   <div class="post" id="post-198562">
    <div class="subject"><a href="#post-198562">Invalid opcode</a></div>
    <div class="body">Hi all,

Thanks for the all answers I got in the list when i started running my first win32asm programs. Now I have another worry.

I have started writing a NDISWan Miniport driver using 98 DDK. All the help I get is from MSDN only. 

Now when i read a bytestream from the VCOMM's readque, using a callback function, I am getting a fatal exception called "06:Invalid opcode fault". When I searched for this exception,I got many explanation but it all sounds geek.

Could you help me out with some direct and down to earth explanation. And can you relate it with a possible mistake i could have made in my code ?

bye
ranjith</div>
    <div class="meta">Posted on 2001-05-03 15:31:00 by Ranjith</div>
   </div>
   <div class="post" id="post-198563">
    <div class="subject"><a href="#post-198563">Invalid opcode</a></div>
    <div class="body">Maybe if we read your code It'll be less dificult to discover the problem.

see ya. :)</div>
    <div class="meta">Posted on 2001-05-04 22:23:00 by wolfao</div>
   </div>
   <div class="post" id="post-198564">
    <div class="subject"><a href="#post-198564">Invalid opcode</a></div>
    <div class="body">Invalid ops can be caused by things like trying to do MMX instructions on a CPU that doesn't know what MMX is. I doubt this is your problem. :)

The most common cause is "data overflow". Lets say that you allocate 100 bytes to a buffer. But then you call a function that returns 500 bytes to that buffer. If you have instructions anywhere in the 400 bytes that follow the buffer, the excess data will clobber the instructions, so when you try to execute the instructions that were once there, you end up "executing data" and the result is BOOM!

I don't know anything about miniport drivers, but the word BYTESTREAM in your post, makes me think that your problem has something to do with this.

:)</div>
    <div class="meta">Posted on 2001-05-05 03:28:00 by S/390</div>
   </div>
  </div>
 </body>
</html>