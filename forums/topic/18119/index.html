<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>KMD assemblying problem. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18119" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18119">KMD assemblying problem.</a></p>
   <div class="post" id="post-140061">
    <div class="subject"><a href="#post-140061">KMD assemblying problem.</a></div>
    <div class="body">After reading Four-F's tutorial on KMDs i wrote (or actually rewrote Dale Roberts' giveio =) a sys file for reading and writing to the 8042 chip (Serial Communication Chip). It assembled perfectly when i first wrote it. But now, after a reinstallation of win2k, installing sp4 and hutchs masm32 pack with KMDkit 1.5, it wont work.<br /><strong>error A2006: undefined symbol : dwLength</strong><br /><pre><code><br />------------------------<br />choped code&#58;<br />------------------------<br />...<br />DriverEntry proc DrvObjectP&#58;PDRIVER_OBJECT, RegPathPUC&#58;PUNICODE_STRING<br />LOCAL status&#58;NTSTATUS<br />LOCAL oa&#58;OBJECT_ATTRIBUTES<br />LOCAL KeyHT&#58;HANDLE<br />LOCAL kvpi&#58;KEY_VALUE_PARTIAL_INFORMATION<br />LOCAL IopmP&#58;PVOID<br />LOCAL ProcessP&#58;PVOID<br /><br />invoke DbgPrint, addr dbgEnter<br />mov status,STATUS_DEVICE_CONFIGURATION_ERROR<br /><br />lea ecx,oa<br />; setting the objectattributes<br />xor eax,eax<br />assume ecx&#58;ptr OBJECT_ATTRIBUTES<br />mov &#91;ecx&#93;.dwLength,sizeof OBJECT_ATTRIBUTES<br />mov &#91;ecx&#93;.RootDirectory,eax<br />push RegPathPUC<br />pop &#91;ecx&#93;.ObjectNamepopa det.<br />mov &#91;ecx&#93;.Attributes,eax<br />...<br /></code></pre><br />any ideas?</div>
    <div class="meta">Posted on 2004-04-24 14:07:08 by sluggo</div>
   </div>
   <div class="post" id="post-140064">
    <div class="subject"><a href="#post-140064">KMD assemblying problem.</a></div>
    <div class="body">Surely it must be an include file problem. Would I be right to guess it wasn't assembled with KmdKit 1.5 prior to reinstallation, thats the only change I would imagine could be affecting things. Do a search in files for the OBJECT_ATTRIBUTES structre and see if the dwLength member has changed. Perhpas its become dwlength accidently.</div>
    <div class="meta">Posted on 2004-04-24 14:56:32 by EÃ³in</div>
   </div>
   <div class="post" id="post-140067">
    <div class="subject"><a href="#post-140067">KMD assemblying problem.</a></div>
    <div class="body">Thank you verry much!! dwLength had gone to _Length, didnt even remember updating the KMDkit till you mentioned it.<br /><br />Thank you again, E?in!</div>
    <div class="meta">Posted on 2004-04-24 15:13:43 by sluggo</div>
   </div>
  </div>
 </body>
</html>