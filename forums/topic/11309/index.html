<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Console Input redirection... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11309" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=11309">Console Input redirection...</a></p>
   <div class="post" id="post-85365">
    <div class="subject"><a href="#post-85365">Console Input redirection...</a></div>
    <div class="body">I'm working on a program which does a similar thing to the make.exe utility.  I can spawn a cmd.exe process from within this utility and redirect it's output, but i can't seem to redirect the input.  <br /><br />essentially my program parses a .myk file and issues the appropriate command lines to cmd.exe(or command.com).  At the moment I can send the command line at the time I spawn the cmd.exe process but once it's running I can't get any input to it.  It'd be more efficient to spawn 1 cmd.exe and then send the commands to the one process.<br />So dose anyone have an example of issuing commands to a redirected console input.</div>
    <div class="meta">Posted on 2003-03-06 04:53:48 by MArtial_Code</div>
   </div>
   <div class="post" id="post-85406">
    <div class="subject"><a href="#post-85406">In the old DOS days ....</a></div>
    <div class="body">Have you tried cmd.exe mytemp.bat?<br /><br />Regards,  P1</div>
    <div class="meta">Posted on 2003-03-06 10:45:43 by Pone</div>
   </div>
   <div class="post" id="post-85411">
    <div class="subject"><a href="#post-85411">Console Input redirection...</a></div>
    <div class="body">If I can't pass each command directly then a batch file would be the second best solution.</div>
    <div class="meta">Posted on 2003-03-06 11:11:32 by MArtial_Code</div>
   </div>
   <div class="post" id="post-85413">
    <div class="subject"><a href="#post-85413">Re: Console Input redirection...</a></div>
    <div class="body"><div class="quote"><br />I'm working on a program which does a similar thing to the make.exe utility.  I can spawn a cmd.exe process from within this utility and redirect it's output, but i can't seem to redirect the input.  <br /><br />essentially my program parses a .myk file and issues the appropriate command lines to cmd.exe(or command.com).  At the moment I can send the command line at the time I spawn the cmd.exe process but once it's running I can't get any input to it.  It'd be more efficient to spawn 1 cmd.exe and then send the commands to the one process.<br />So dose anyone have an example of issuing commands to a redirected console input. </div><br /><br />Dunno if this helps, but for example<br /><br /><br />echo y | del *.*<br /><br />Answeres y(es) to the &quot;are you sure?&quot; question.<br /><br />blah &lt; bleh.txt <br /><br />Gets blah to read the contents of bleh (the shell passes bleh.txt to blah)</div>
    <div class="meta">Posted on 2003-03-06 11:15:58 by bazik</div>
   </div>
   <div class="post" id="post-85457">
    <div class="subject"><a href="#post-85457">re:</a></div>
    <div class="body">i think if i am not wrong that i saw a source(tasm16), called redir that redirects input, but the annoying thing is that you don?t see the input from the keyboard in the dos-windows.. :-/<br />but you can redirect with=<br />cmd&gt;log.txt<br />cmd|copy con:log.txt<br />or something like that.. :alright: <br />Regards</div>
    <div class="meta">Posted on 2003-03-06 13:37:42 by Rygar</div>
   </div>
   <div class="post" id="post-85458">
    <div class="subject"><a href="#post-85458">Console Input redirection...</a></div>
    <div class="body">Can't you just set the stdin/stdout handles in a STARTUPINFO struct and use CreateProcess for each process?<br /><br />Thomas</div>
    <div class="meta">Posted on 2003-03-06 13:40:06 by Thomas</div>
   </div>
   <div class="post" id="post-86118">
    <div class="subject"><a href="#post-86118">Console Input redirection...</a></div>
    <div class="body">Ok finally after porting  several C sources I've found one which works for me the c source is at <a target="_blank" href="http://bdn.borland.com/article/0,1410,10387,00.html">Console IO redirection C source</a> <br /><br />I've split the code into it's functional subroutines which can be used for most situations i think.<br />this source shows redirecting the stdin and stdout handles of a hidden child cmd.exe process.<br />the program then issues four commands (dir,ver,vol,exit) to cmd.exe and displays the results.<br /><br />the asm file must be built as a console app.</div>
    <div class="meta">Posted on 2003-03-09 19:03:53 by MArtial_Code</div>
   </div>
  </div>
 </body>
</html>