<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Rename file with 56h doesn't work? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26021" />
    <link rel="next" href="../?id=26021&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26021">Rename file with 56h doesn't work?</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=26021&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=26021&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="26021" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=26021&amp;page=2">&gt;</a><a href="../?id=26021&amp;page=2">&raquo;</a></form>   <div class="post" id="post-189597">
    <div class="subject"><a href="#post-189597">Rename file with 56h doesn't work?</a></div>
    <div class="body">hi i&#39;m using following code to rename a file:<br /><br />.data<br />OldName&nbsp; &nbsp;db &quot;a.txt&quot;,0<br />NewName&nbsp; db &quot;b.txt&quot;,0<br /><br />.code<br />lea&nbsp; &nbsp; &nbsp;dx, OldName <br />lea&nbsp; &nbsp; &nbsp;di, NewName<br />mov&nbsp; &nbsp; &nbsp;ah, 56h<br />int&nbsp; &nbsp; &nbsp;21h<br />jc&nbsp; &nbsp; &nbsp; BadRename <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;. <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.<br /><br />It compiles nice but produce an hard error when running. I think it has something to do with that DS is pointing the wrong place because of the .code/.data words&nbsp; :?:. Can anyone help how i do this call correct ?&nbsp; thanks.</div>
    <div class="meta">Posted on 2007-06-13 04:30:34 by maxleif</div>
   </div>
   <div class="post" id="post-189602">
    <div class="subject"><a href="#post-189602">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">I tried to set the es to ds<br /><br />&nbsp; mov&nbsp; &nbsp; &nbsp; ax,ds <br />&nbsp; mov&nbsp; &nbsp; &nbsp; es,ax&nbsp; &nbsp; <br /><br />Still error during execution&nbsp; :sad:. Btw i use masm to compile and haven&#39;t found any samles different from what i&#39;m doing. Well i also tried with &quot;mov ax,7156h&quot; still without any succes. hmmm - i though renaming a file was a triviel task but obviusly it isn&#39;t.&nbsp; &nbsp; &nbsp;</div>
    <div class="meta">Posted on 2007-06-13 15:24:20 by maxleif</div>
   </div>
   <div class="post" id="post-189604">
    <div class="subject"><a href="#post-189604">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Try<br /><pre><code>&nbsp; &nbsp; mov ax,seg OldName<br />&nbsp; &nbsp; mov ds,ax<br />&nbsp; &nbsp; mov es,ax</code></pre><br />and make sure that &quot;a.txt&quot; exists.<br /><br />Most DOS functions on error will return carry set and an error code in AX.</div>
    <div class="meta">Posted on 2007-06-13 18:18:11 by sinsi</div>
   </div>
   <div class="post" id="post-189606">
    <div class="subject"><a href="#post-189606">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Should be a doddle, the name should change even if the original named file is open in a windows box.<br /><br />I assume those zeros on the end of old + newname are null terminators.<br />Newname cannot already exist in the folder, or you will get a carry.<br />My own nulls are inside the &quot;&nbsp; &quot;<br /><br /><br />ZONE<br />org cs:100<br />RENAME<br />mov dx,N1<br />mov di,N2<br />mov ax,5600<br />int 21<br />N1 db &quot;ee.txt_&quot;<br />N2 db &quot;ff.txt_&quot;<br />END<br />____________<br /><br /><br />Try your one as a micro comfile to see if it works as a standalone com executable.<br /><br />If it does, then try cs segment overrides with dx and di in the main procedure.<br />(ES and/or DS may be messed up)</div>
    <div class="meta">Posted on 2007-06-13 21:08:41 by eek</div>
   </div>
   <div class="post" id="post-189608">
    <div class="subject"><a href="#post-189608">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Hey maxleif, <br /><br />This will give you an idea of how to finish. The rename function is for Win 95+, <br />but the principal is still the same. Since it handles long names, you might want to use it.<br /><br />.model small<br />.stack 200h<br /><br />.data<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  day&nbsp; &nbsp; &nbsp; &nbsp;  db&nbsp;  &#39;00&#39;&nbsp; &nbsp; &nbsp; ; storage for date<br />&nbsp; &nbsp; &nbsp;  month&nbsp; &nbsp; &nbsp;  db&nbsp;  &#39;00&#39;<br />&nbsp; &nbsp; &nbsp;  year&nbsp; &nbsp; &nbsp; &nbsp; db&nbsp;  &#39;00&#39;<br />&nbsp; &nbsp; &nbsp;  orig_name&nbsp;  db&nbsp; &nbsp; 140 dup(?)<br />&nbsp; &nbsp; &nbsp;  new_name&nbsp; &nbsp; db&nbsp; &nbsp; 128 dup(?)<br />&nbsp; &nbsp; &nbsp;  name_length db&nbsp; &nbsp; ?<br />&nbsp; &nbsp; &nbsp;  ext_length&nbsp; dw&nbsp; &nbsp; ?<br />&nbsp; &nbsp; &nbsp;  extension&nbsp;  db&nbsp; &nbsp; 10 dup(?)<br />&nbsp; &nbsp; &nbsp;  storage&nbsp; &nbsp;  db&nbsp; &nbsp; 150 dup(?)<br />&nbsp; &nbsp; &nbsp;  fail&nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,&#39;File not found.&#39;,13,10,&#39;$&#39;<br />&nbsp; &nbsp; &nbsp;  nofile&nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,&#39;File not found.&#39;,13,10,&#39;$&#39;<br />&nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  prompt&nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,9,&#39;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  (c) Elvis&nbsp; 2/1/04&#39;,13,10<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  db&nbsp; &nbsp; 13,10,&#39;Filename to Rename -&gt;&nbsp; $&#39;<br /><br /><br />.code<br />begin:<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,@data<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ds,ax<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; es,ax&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; need this for function 7156h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; dx, offset prompt<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ah,9<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; orig_name,128&nbsp; &nbsp; &nbsp; ; max characters in input<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; dx,orig_name&nbsp; &nbsp; &nbsp;  ; get filename<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ah,0ch&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; flush keyboard buffer<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,0ah&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; buffered keyboard input<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; ax,ax<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, ; how many chars entered<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; al,2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; find position after last char<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; si,ax&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; move count to index register<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; orig_name,00&nbsp;  ; make it into ascii string<br />&nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; dx,offset orig_name + 2<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,7143h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; See if file exists<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; carry flag set if problem<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  jc&nbsp; &nbsp; &nbsp;  short not_present<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cl, ; how many bytes read in<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; name_length,cl&nbsp; &nbsp;  ; store filename length<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ch,00<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; si,cx&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; move count to index register<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cl,&nbsp;  ; cx = total number of characters<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; excluding the terminating &lt;ENTER&gt;<br /><br />; Look for a &#39;\&#39; which would indicate a path was specified<br /><br />chk_path:<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; si,<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; cx,cx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,si<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cl,<br />&nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,&#39;\&#39;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; c:\work.1\temp\test.asm<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; di,cx<br />&nbsp; &nbsp; &nbsp;  std&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; scan from right to left&nbsp; &lt;------<br />&nbsp; &nbsp; &nbsp;  dec&nbsp; &nbsp; &nbsp; di&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  repne&nbsp; &nbsp; scasb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; zero flag set if &quot;\&quot;<br />&nbsp; &nbsp; &nbsp;  pushf<br />&nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp;  cx<br />&nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; di,di<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; si,si<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; si,<br />&nbsp; &nbsp; &nbsp;  pop&nbsp; &nbsp; &nbsp; cx<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; si,cx<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; cx,cx<br />&nbsp; &nbsp; &nbsp;  cld&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; scan from left to right<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,si<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cl,<br />&nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,&#39;.&#39;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; c:\work.1\temp\test.asm<br />&nbsp; &nbsp; &nbsp;  repne&nbsp; &nbsp; scasb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; zero flag set if &quot;.&quot;<br />&nbsp; &nbsp; &nbsp;  jnz&nbsp; &nbsp; &nbsp; short scan<br /><br />; Store the file extension<br /><br />extens:<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; si,di&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; the scanned input now is the source<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,offset extension ; <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,cx<br />&nbsp; &nbsp; &nbsp;  rep&nbsp; &nbsp; &nbsp; movsb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; move remaining chars into extension<br />&nbsp; &nbsp; &nbsp;  jmp&nbsp; &nbsp; &nbsp; short scan<br /><br />not_present:<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; dx,offset nofile<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ah,9<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,4c01h<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br /><br /><br />; Store the path<br /><br />scan:<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; si,<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; cx,cx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,si<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cl,<br />&nbsp; &nbsp; &nbsp;  <br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,&#39;\&#39;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; c:\work.1\<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; di,cx<br />&nbsp; &nbsp; &nbsp;  std&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; scan from right to left<br />&nbsp; &nbsp; &nbsp;  dec&nbsp; &nbsp; &nbsp; di<br />&nbsp; &nbsp; &nbsp;  repne&nbsp; &nbsp; scasb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; zero flag set if &quot;\&quot;<br />&nbsp; &nbsp; &nbsp;  popf<br />&nbsp; &nbsp; &nbsp;  jnz&nbsp; &nbsp; &nbsp; short no_path<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; cx,1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; value is total # chars in path<br /><br />no_path:<br />&nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp;  cx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,offset storage<br />&nbsp; &nbsp; &nbsp;  cld&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; scan from left to right<br />&nbsp; &nbsp; &nbsp;  rep&nbsp; &nbsp; &nbsp; movsb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; store path to directory in storage<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,0<br />&nbsp; &nbsp; &nbsp;  stosb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; make path ASCIZ<br />&nbsp; &nbsp; &nbsp;  pop&nbsp; &nbsp; &nbsp; cx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; name_length,cl&nbsp; &nbsp; &nbsp; ; store length of path<br /><br />time:<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ah,4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; get time<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 1ah<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,cl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; store time<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; ah,ah&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;&nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; bl,10h<br />&nbsp; &nbsp; &nbsp;  div&nbsp; &nbsp; &nbsp; bl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; ax,3030h<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,al<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,ah<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,dh<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; ah,ah<br />&nbsp; &nbsp; &nbsp;  div&nbsp; &nbsp; &nbsp; bl<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; ax,3030h<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,al<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,ah<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al,dl<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; ah,ah<br />&nbsp; &nbsp; &nbsp;  div&nbsp; &nbsp; &nbsp; bl<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; ax,3030h<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,al<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ,ah<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, &nbsp; &nbsp; &nbsp; &nbsp;  ; build time-based new filename<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; byte ptr new_name, al<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; byte ptr new_name + 1, al<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; byte ptr new_name + 2, al<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; byte ptr new_name + 3, al<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; byte ptr new_name + 4, al<br /><br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; byte ptr new_name + 5, al<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,offset new_name + 6&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; al, &#39;.&#39;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; add the period (6 + 1)<br />&nbsp; &nbsp; &nbsp;  stosb<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; si,offset extension&nbsp; &nbsp; &nbsp; ; add on file extension <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cx, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp;  rep&nbsp; &nbsp; &nbsp; movsb<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; cx,cx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; di,offset storage&nbsp; &nbsp; &nbsp; &nbsp; ; <br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cl, <br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; di, cx&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; move to end of storage<br /><br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; cx,cx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; si,offset new_name&nbsp; &nbsp; &nbsp;  ; source of extension<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; cx, &nbsp; &nbsp; &nbsp; &nbsp;  ; # of chars in the extension<br />&nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp; &nbsp; cx,7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; chars in new name plus the period<br />&nbsp; &nbsp; &nbsp;  rep&nbsp; &nbsp; &nbsp; movsb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; add new_name to end of storage<br /><br />is_a_path:<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; ax,ax<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; dx,dx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,7156h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; LFN rename file&nbsp; Win 95 +<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; dx, orig_name + 2&nbsp; &nbsp; &nbsp; &nbsp; ; old name<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; di, storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; sets the new name<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />is_there:<br />&nbsp; &nbsp; &nbsp;  cmp&nbsp; &nbsp; &nbsp; al,02h<br />&nbsp; &nbsp; &nbsp;  jz&nbsp; &nbsp; &nbsp;  not_there<br />&nbsp; &nbsp; &nbsp;  jmp&nbsp; &nbsp; &nbsp; short exit<br /><br />not_there:<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; dx,offset fail<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ah,9<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,4c01h<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br /><br />exit:<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,4c00h<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br /><br />end begin<br /></div>
    <div class="meta">Posted on 2007-06-14 00:01:51 by skywalker</div>
   </div>
   <div class="post" id="post-189609">
    <div class="subject"><a href="#post-189609">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">fail&nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,&#39;File not found.&#39;,13,10,&#39;$&#39;&nbsp; &lt;---String terminator &#39;$&#39; is in quotes.<br />Should your null terminator be in quotes?<br /><br />No null terminator means it cant read the filename.<br /></div>
    <div class="meta">Posted on 2007-06-14 04:32:08 by eek</div>
   </div>
   <div class="post" id="post-189610">
    <div class="subject"><a href="#post-189610">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br />fail&nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,&#39;File not found.&#39;,13,10,&#39;$&#39;&nbsp; &lt;---String terminator &#39;$&#39; is in quotes.<br />Should your null terminator be in quotes?<br /><br />No null terminator means it cant read the filename.<br /><br /></div><br /><br />This is tasm code. What compiler are you using ?<br /><br />If it&#39;s masm, you may have to do it like this.&nbsp; &nbsp; &quot;file_la_de_dah$&quot;<br /><br />I don&#39;t work much with 16 bit code all that much and when I do, I convert it<br />to tasm.<br /><br />Sometimes there are several ways of handling strings.<br /><br /></div>
    <div class="meta">Posted on 2007-06-14 04:54:06 by skywalker</div>
   </div>
   <div class="post" id="post-189611">
    <div class="subject"><a href="#post-189611">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Thaks for all replies&nbsp; :D. I tried many things but can&#39;t get it to work. I use XP and a MASM32 compiler:<br /><br />Microsoft (R) Macro Assembler Version 6.14.8444<br />Copyright (C) Microsoft Corp 1981-1997.&nbsp; All rights reserved.<br /><br /><br /><br /><br />Inside the original programs there is lines like:<br />lea 	esi, <br />push 	esi<br />call 	GetTimeFormat<br />xor	eax, eax<br />.<br />.<br />etc<br /><br /><br /><br /><br />I compile the code with succes using this .bat file:<br /><br />SET MP=C:\masm32<br />%MP%\tools\inc2l\inc2l msvcrt.inc<br />%MP%\bin\ml /c /coff winbol.asm<br />%MP%\bin\polink /release /subsystem:windows /MAPINFO:EXPORTS /MAPINFO:FIXUPS<br />/MAPINFO:LINES /VERBOSE /MACHINE:IX86 /libpath:%MASMPATH%\lib winbol.obj<br /><br />I have a file a.txt in the same folder as the program file :). When running the program with the modification suggested in this thread I alway get the error:<br /><br />winbol.EXE has encountered a problem and needs to close.&nbsp; We are sorry for the inconvenience.<br /><br /><br /><br /><br /><br />Here is the program:<br /><br />.386<br />.model flat, stdcall<br />option casemap:none<br /><br />include \masm32\include\windows.inc<br />include \masm32\include\kernel32.inc<br />include \masm32\include\user32.inc<br />include \masm32\include\advapi32.inc<br />include msvcrt.inc<br />includelib \masm32\lib\user32.lib<br />includelib \masm32\lib\kernel32.lib<br />includelib \masm32\lib\advapi32.lib<br />includelib msvcrt.lib<br /><br />.data<br />OldName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;db&nbsp; &nbsp; &quot;a.txt&quot;, 0<br />NewName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;db&nbsp; &nbsp; &quot;b.txt&quot;, 0<br /><br />.code<br />main:<br />&nbsp; mov ax,ds <br />&nbsp; mov es,ax&nbsp; &nbsp; <br />&nbsp; lea&nbsp; &nbsp;dx, OldName <br />&nbsp; lea&nbsp; &nbsp;di, NewName <br />&nbsp; mov&nbsp; ah, 56h<br />&nbsp; int&nbsp; &nbsp; 21h<br />&nbsp; jc&nbsp; &nbsp; &nbsp;BadRename <br />BadRename:<br /><br />end main</div>
    <div class="meta">Posted on 2007-06-14 05:47:09 by maxleif</div>
   </div>
   <div class="post" id="post-189612">
    <div class="subject"><a href="#post-189612">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br />Try<br /><pre><code>&nbsp; &nbsp; mov ax,seg OldName<br />&nbsp; &nbsp; mov ds,ax<br />&nbsp; &nbsp; mov es,ax</code></pre><br />and make sure that &quot;a.txt&quot; exists.<br /><br />Most DOS functions on error will return carry set and an error code in AX.<br /></div><br /><br />This line:<br /><br />mov ax,seg OldName<br /><br />Gives me compiler error:<br /><br />error A2004: symbol type conflict</div>
    <div class="meta">Posted on 2007-06-14 05:51:30 by maxleif</div>
   </div>
   <div class="post" id="post-189613">
    <div class="subject"><a href="#post-189613">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br />Should be a doddle, the name should change even if the original named file is open in a windows box.<br /><br />I assume those zeros on the end of old + newname are null terminators.<br />Newname cannot already exist in the folder, or you will get a carry.<br /><br />Try your one as a micro comfile to see if it works as a standalone com executable.<br /><br />If it does, then try cs segment overrides with dx and di in the main procedure.<br />(ES and/or DS may be messed up)<br /></div><br /><br />I&#39;m sure it works with:<br /><br />OldName&nbsp; &nbsp; &nbsp; &nbsp;  db&nbsp; &nbsp; &quot;a.txt&quot;, 0<br /><br />because this is also what is doing in the original program which is working fine.<br /><br />What do you mean by micro compile?</div>
    <div class="meta">Posted on 2007-06-14 05:57:40 by maxleif</div>
   </div>
   <div class="post" id="post-189614">
    <div class="subject"><a href="#post-189614">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br />Hey maxleif, <br /><br />This will give you an idea of how to finish. The rename function is for Win 95+, <br />but the principal is still the same. Since it handles long names, you might want to use it.<br /><br /><br />is_a_path:<br />&nbsp; &nbsp; &nbsp; &nbsp;xor&nbsp; &nbsp; &nbsp; ax,ax<br />&nbsp; &nbsp; &nbsp; &nbsp;xor&nbsp; &nbsp; &nbsp; dx,dx<br />&nbsp; &nbsp; &nbsp; &nbsp;mov&nbsp; &nbsp; &nbsp; ax,7156h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; LFN rename file&nbsp; Win 95 +<br />&nbsp; &nbsp; &nbsp; &nbsp;lea&nbsp; &nbsp; &nbsp; dx, orig_name + 2&nbsp; &nbsp; &nbsp; &nbsp; ; old name<br />&nbsp; &nbsp; &nbsp; &nbsp;lea&nbsp; &nbsp; &nbsp; di, storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; sets the new name<br />&nbsp; &nbsp; &nbsp; &nbsp;int&nbsp; &nbsp; &nbsp; 21h<br /></div><br /><br />Doing this gives me error at programrun.<br /><br />&nbsp; mov ax,ds <br />&nbsp; mov es,ax&nbsp; &nbsp; <br />&nbsp; mov&nbsp; &nbsp; &nbsp; ax,7156h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; lea&nbsp; &nbsp; &nbsp; dx, OldName + 2&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; lea&nbsp; &nbsp; &nbsp; di, NewName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; ; lea&nbsp;  dx, OldName <br />&nbsp; ; lea&nbsp;  di, NewName <br />&nbsp; mov&nbsp; ah, 56h<br />&nbsp; int&nbsp; &nbsp; 21h<br />&nbsp; jc&nbsp; &nbsp;  BadRename </div>
    <div class="meta">Posted on 2007-06-14 06:01:42 by maxleif</div>
   </div>
   <div class="post" id="post-189615">
    <div class="subject"><a href="#post-189615">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br />fail&nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,&#39;File not found.&#39;,13,10,&#39;$&#39;&nbsp; &lt;---String terminator &#39;$&#39; is in quotes.<br />Should your null terminator be in quotes?<br /><br />No null terminator means it cant read the filename.<br /><br /></div><br /><br />It&#39;s not the problem because it is ended with ,0 in the original program.</div>
    <div class="meta">Posted on 2007-06-14 06:02:52 by maxleif</div>
   </div>
   <div class="post" id="post-189616">
    <div class="subject"><a href="#post-189616">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />fail&nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; 13,10,&#39;File not found.&#39;,13,10,&#39;$&#39;&nbsp; &lt;---String terminator &#39;$&#39; is in quotes.<br />Should your null terminator be in quotes?<br /><br />No null terminator means it cant read the filename.<br /><br /></div><br /><br />This is tasm code. What compiler are you using ?<br /><br />If it&#39;s masm, you may have to do it like this.&nbsp; &nbsp; &quot;file_la_de_dah$&quot;<br /><br />I don&#39;t work much with 16 bit code all that much and when I do, I convert it<br />to tasm.<br /><br />Sometimes there are several ways of handling strings.<br /><br /><br /></div><br /><br /><br />Tried that but gives me error at run. String end with ,0 because original program works fine with that.</div>
    <div class="meta">Posted on 2007-06-14 06:06:05 by maxleif</div>
   </div>
   <div class="post" id="post-189617">
    <div class="subject"><a href="#post-189617">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />Hey maxleif, <br /><br />This will give you an idea of how to finish. The rename function is for Win 95+, <br />but the principal is still the same. Since it handles long names, you might want to use it.<br /><br /><br />is_a_path:<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; ax,ax<br />&nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp; &nbsp; dx,dx<br />&nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp; &nbsp; ax,7156h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; LFN rename file&nbsp; Win 95 +<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; dx, orig_name + 2&nbsp; &nbsp; &nbsp; &nbsp; ; old name<br />&nbsp; &nbsp; &nbsp;  lea&nbsp; &nbsp; &nbsp; di, storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; sets the new name<br />&nbsp; &nbsp; &nbsp;  int&nbsp; &nbsp; &nbsp; 21h<br /></div><br /><br />Doing this gives me error at programrun.<br /><br />&nbsp; mov ax,ds <br />&nbsp; mov es,ax&nbsp; &nbsp; <br />&nbsp; mov&nbsp; &nbsp; &nbsp; ax,7156h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; lea&nbsp; &nbsp; &nbsp; dx, OldName + 2&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; lea&nbsp; &nbsp; &nbsp; di, NewName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; ; lea&nbsp;  dx, OldName <br />&nbsp; ; lea&nbsp;  di, NewName <br /> -&gt; mov&nbsp; ah, 56h<br /> -&gt; int&nbsp; &nbsp; 21h<br />&nbsp; jc&nbsp; &nbsp;  BadRename <br /></div><br /><br />It is because you don&#39;t need the 2 marked statements.<br /><br />Try an altavista advanced search and put this in the<br />box marked &quot;All these words&quot;<br /><br />Google is OK, but a sloppy second place. :-)<br /><br />rename 56h source code <br /><br />or<br /><br />16 bit assembly code<br /><br />You probably get the idea.<br /><br />Get a copy of Ralf Brown&#39;s Interrupt List, it lists all the DOS interuppts.<br /><br /><br /></div>
    <div class="meta">Posted on 2007-06-14 06:16:16 by skywalker</div>
   </div>
   <div class="post" id="post-189618">
    <div class="subject"><a href="#post-189618">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Trust me i have now used about 5-6 hours totally just for doing lots of search in google and altavista too :)....but still i have no working solution. Pretty hard to get file rename to work&nbsp; :sad:<br /><br />What 2 marks do you think i should leave out? i have tried with ah=56h and ax=7156h and with ax=5600 .... no idea what to do now&nbsp; :sad:</div>
    <div class="meta">Posted on 2007-06-14 09:00:19 by maxleif</div>
   </div>
   <div class="post" id="post-189619">
    <div class="subject"><a href="#post-189619">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">I just found this. Look for LFN_Code.zip if you want more source code.<br /><br />; The program renames &quot;TEXT.TXT&quot; to &quot;RENAME.TXT&quot;<br />; Rename takes place in the current directory.<br /><br /><br />	org	100h<br />start:<br /><br />	mov	ah,56h		; open file read/write<br />	lea	dx,file		; points to file name<br />	lea	di,new		; renames to<br />	int	21h<br /><br />	ret<br /><br />file	db	&#39;TEST.TXT&#39;,0	; File name<br />new	db	&#39;Rename.txt&#39;,0	; New name<br /><br />end<br /></div>
    <div class="meta">Posted on 2007-06-14 09:21:45 by skywalker</div>
   </div>
   <div class="post" id="post-189620">
    <div class="subject"><a href="#post-189620">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Yes i found that sample <br /><br />http://www.programmersheaven.com/download/22037/ZipFileList.aspx<br /><br />and that&#39;s also what i do. I think it has something to do how i compile it. <br /><br />Perhaps i should try another compiler tasm or something. hmm. I used to program assembler on motorola many years ago but if any knows a link to masm for dummies i will start look at that :).</div>
    <div class="meta">Posted on 2007-06-14 12:28:11 by maxleif</div>
   </div>
   <div class="post" id="post-189624">
    <div class="subject"><a href="#post-189624">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">Have you looked on alt.lang.asm ?<br /><br />There are posts there dealing with file renaming.<br /><br /></div>
    <div class="meta">Posted on 2007-06-14 14:36:15 by skywalker</div>
   </div>
   <div class="post" id="post-189627">
    <div class="subject"><a href="#post-189627">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">DOS INT 21h won&#39;t work from a Win32 program - you need to use the Win32 API.<br />Try using MoveFile<br /><div class="quote"><br />BOOL MoveFile(<br />&nbsp; LPCTSTR lpExistingFileName,<br />&nbsp; LPCTSTR lpNewFileName<br />);<br /></div><br /></div>
    <div class="meta">Posted on 2007-06-14 18:32:20 by sinsi</div>
   </div>
   <div class="post" id="post-189629">
    <div class="subject"><a href="#post-189629">Re: Rename file with 56h doesn't work?</a></div>
    <div class="body">From what I can remember way back in my old days of MASM DOS programming:<br /><br />1) The DS register does not point to the data segment (for .EXE files) when the program is loaded. You must initialize it to the data segment yourself in order that the SI register can be used to point to the proper area of memory. You must also initialize the ES register to the data segment for the DI register to point to the proper area of memory (unless you use a segment override such as DS:DI).<br /><br />2) Strings to be handled by the DOS interrupts all had to be terminated by the $ character).<br /><br />Raymond<br /></div>
    <div class="meta">Posted on 2007-06-14 21:03:03 by Raymond</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=26021&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=26021&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="26021" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=26021&amp;page=2">&gt;</a><a href="../?id=26021&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>