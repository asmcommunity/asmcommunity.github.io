<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>problems with checkboxes in listview - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2301" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2301">problems with checkboxes in listview</a></p>
   <div class="post" id="post-14532">
    <div class="subject"><a href="#post-14532">problems with checkboxes in listview</a></div>
    <div class="body">In the attachment you will find a simple program that shows a listview control with the LVS_EX_CHECKBOXES extended style used. This causes the listview to put checkboxes before each item and this all works fine..<br /><br />But the problem is that I want to disable some of the items, i.e. preventing the user to uncheck them. I've seen several more or less the same examples in C (most using MFC) and the solution should be really simple but it just doesn't work for me.<br /><br />When the LVN_ITEMCHANGING notifcation message is handled, one can detect if an item's state has changed. According to the docs, a non-null return value from the handler should prevent the state change. However this doesn't work. <br /><br />The state change is successfully detected, when you disable the first or second item, you will hear a sound but I just can't get the listview to disallow the state change.<br />Any ideas?<br /><br />Thomas</div>
    <div class="meta">Posted on 2001-12-10 14:49:08 by Thomas</div>
   </div>
   <div class="post" id="post-14616">
    <div class="subject"><a href="#post-14616">problems with checkboxes in listview</a></div>
    <div class="body">Since your listview is in a dialog box, you will have to set return value with SetWindowLong, like:<br /><br /><pre><code><br />	; make some noise &#58;&#41;<br />	invoke 	MessageBeep, MB_OK<br />               invoke SetWindowLong,hWnd,DWL_MSGRESULT,1<br />	mov eax,1 <br /><br /></code></pre><br /> <br />returning 1 in eax is still necessary to indicate you have processed the message<br /><br />japheth</div>
    <div class="meta">Posted on 2001-12-11 06:32:54 by japheth</div>
   </div>
   <div class="post" id="post-14639">
    <div class="subject"><a href="#post-14639">problems with checkboxes in listview</a></div>
    <div class="body">Thanks a lot, I didn't know that, I don't use dialog boxes much. :rolleyes:<br /><br />Thomas</div>
    <div class="meta">Posted on 2001-12-11 13:19:39 by Thomas</div>
   </div>
   <div class="post" id="post-114094">
    <div class="subject"><a href="#post-114094">problems with checkboxes in listview</a></div>
    <div class="body">Likewise ;)<br /><br />This is exactly what I was struggling over as well... :alright:<br /><br />:NaN:</div>
    <div class="meta">Posted on 2003-08-16 21:19:06 by NaN</div>
   </div>
  </div>
 </body>
</html>