<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>JCC and Flags reference utility - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4764" />
    <link rel="next" href="../?id=4764&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4764">JCC and Flags reference utility</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=4764&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=4764&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="4764" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=4764&amp;page=2">&gt;</a><a href="../?id=4764&amp;page=2">&raquo;</a></form>   <div class="post" id="post-33389">
    <div class="subject"><a href="#post-33389">JCC and Flags reference utility</a></div>
    <div class="body">Another demo and reference utility.<br />The application show <br />1. real flag condition<br />2. math condition<br />3. opcode of jcc for condition<br />4. all mnemonics for the condition <br />(usualy there are several mnemonics for the same JCC opcode<br />for example JC,JNAE,JB - they are all the same)<br />For any choosen condition it shows all four infos for:<br />1. The condition itself<br />2. Reverse comparing (determination if X ? Y by cmp Y,X)<br />3. Not condition (for example if not X &lt; Y; X &gt;=Y)<br /><br />For those who are experienced enough - <br />look at code.<br />There if absolutly no data about opcode and no referrence<br />what for some condition is reverse or negative condition.<br />All this determined in run time by logical operation.<br />I tried to explain the method in Algo section,<br />but nobody seemed to understand.<br />Now you can see it in working programm.<br /><br />Inside zip RadAsm project.<br />KetiIO, I finally tried your shell you are in title.</div>
    <div class="meta">Posted on 2002-04-13 21:32:52 by The Svin</div>
   </div>
   <div class="post" id="post-33391">
    <div class="subject"><a href="#post-33391">JCC and Flags reference utility</a></div>
    <div class="body">I don't understand... what's the purpose of this program?</div>
    <div class="meta">Posted on 2002-04-13 22:18:23 by iblis</div>
   </div>
   <div class="post" id="post-33392">
    <div class="subject"><a href="#post-33392">JCC and Flags reference utility</a></div>
    <div class="body"><div class="quote"><br />I don't understand... what's the purpose of this program? </div><br /><br />:)</div>
    <div class="meta">Posted on 2002-04-13 22:24:17 by The Svin</div>
   </div>
   <div class="post" id="post-33394">
    <div class="subject"><a href="#post-33394">JCC and Flags reference utility</a></div>
    <div class="body">Gee, thanks for clearing that up.</div>
    <div class="meta">Posted on 2002-04-13 23:49:08 by iblis</div>
   </div>
   <div class="post" id="post-33398">
    <div class="subject"><a href="#post-33398">JCC and Flags reference utility</a></div>
    <div class="body">I thought you were jocking.<br />OK I'll explain.<br />It is a tool to serve as a mantra for zen contemplation.<br />For those who are not feel themselves with JCC as fish in water.<br />They slowly press up and down arrow keys...<br />Looking in goupped JCC , flags conditions, math conditions.<br />And how they are changed with each keystroke in each group.<br />Until they are enlightened.<br />They also look look how opcode changed and in a few minute could<br />understand whole machine logic with jcc in bynary level.<br /><br />I see you don't need all this ****. You are already know it all.<br />I see it in your question, it's funny I didn't see it in your code.<br />I'm jocking too.</div>
    <div class="meta">Posted on 2002-04-14 01:11:12 by The Svin</div>
   </div>
   <div class="post" id="post-33410">
    <div class="subject"><a href="#post-33410">JCC and Flags reference utility</a></div>
    <div class="body">That's what I initially suspected, but I was curious if there was more to it than what I saw.<br /><br />To a newbie it would be a useful tool and I can see where it would be useful beyond that, good job. ;)</div>
    <div class="meta">Posted on 2002-04-14 03:32:17 by iblis</div>
   </div>
   <div class="post" id="post-33413">
    <div class="subject"><a href="#post-33413">JCC and Flags reference utility</a></div>
    <div class="body">Alex,<br /><br />Congratulation, this is a good tool that will be useful to many people. It will help to produce better optimised code that uses the flag conditions in a more efficient way.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-04-14 03:42:47 by hutch--</div>
   </div>
   <div class="post" id="post-33414">
    <div class="subject"><a href="#post-33414">JCC and Flags reference utility</a></div>
    <div class="body">Its a neat little program...  Im forgetful of what i dont use alot so im sure it can have its momentary uses... (Can you make one for the PIC microprocessors :grin: ~ I find X&gt;Y a pain in the arse to get right with their architecture)<br /><br />Nice job Svin.</div>
    <div class="meta">Posted on 2002-04-14 03:45:43 by NaN</div>
   </div>
   <div class="post" id="post-33420">
    <div class="subject"><a href="#post-33420">JCC and Flags reference utility</a></div>
    <div class="body">Haven't checked this program yet but, by the way, for who may be interested (surely beginners), here is my JCC table I wrote when I just started to code in x86, I hope it can be useful to anybody:<br /><br /><pre><code><br />;Branch&#58;<br />;<br />;unsigned &lt;=                    JBE  JNA         ..   &#40;C|Z&#41;=1<br />;unsigned &lt;                     JB   JNAE  JC    ..   C=1<br />;unsigned &gt;                     JA   JNBE        ..   &#40;C|Z&#41;=0<br />;unsigned &gt;=                    JAE  JNB   JNC   ..   C=0<br /><br />;signed   &lt;=                    JLE  JNG         ..   &#40;&#40;S^O&#41;|Z&#41;=1<br />;signed   &lt;                     JL   JNGE        ..   &#40;S^O&#41;=1<br />;signed   &gt;                     JG   JNLE        ..   &#40;&#40;S^O&#41;|Z&#41;=0<br />;signed   &gt;=                    JGE  JNL         ..   &#40;S^O&#41;=0<br /><br />;equal                          JE   JZ          ..   Z=1<br />;not equal                      JNE  JNZ         ..   Z=0<br /><br />;zero                           JZ   JE          ..   Z=1<br />;not zero                       JNZ  JNE         ..   Z=0<br /><br />;sign                           JS               ..   S=1<br />;not sign                       JNS              ..   S=0<br /><br />;carry                          JC               ..   C=1<br />;not carry                      JNC              ..   C=0<br /><br />;overflow                       JO               ..   O=1<br />;not overflow                   JNO              ..   O=0<br /><br />;parity &#40;even&#41;                  JP   JPE         ..   P=1<br />;not parity &#40;odd&#41;               JNP  JPO         ..   P=0<br /><br />;ecx=0                          JECXZ            ..  ECX=0<br />;cx=0                           JCXZ             ..  CX=0<br /></code></pre></div>
    <div class="meta">Posted on 2002-04-14 04:22:49 by Maverick</div>
   </div>
   <div class="post" id="post-33421">
    <div class="subject"><a href="#post-33421">JCC and Flags reference utility</a></div>
    <div class="body">Thanx, guys.<br />I was so buffled by iblis question that thought<br />might be I'd done something wrong having posted this :)<br />iblis,<br />yes there is some more about this app. It is in code of<br />how it was implemented.<br />But in order to understand this you need deep understanding<br />what is JCC and how it's done.<br />I tried to make move like in chess, where setting position of<br />figure might have several purposes: to attack some fields and<br />to defend someones.<br />Studing how the app works will help you to understand (among<br />other things) what is JCC in depth, and studing JCC by the same<br />app (but now in performence not in code) will help you understand<br />the tecnique used in it.<br /><br />First thing it's absolutly real and show first nessesary things to understand,<br />1. there are a lot of mnemonics but a few real conditions.<br />2. processor doesn't care making JCC if X &lt; Y of X &gt; Y, it cares only for<br />current flags position.<br />Assume you in block of code at the end of some loop making<br /> shr eax,1<br /> dec ecx<br />and you want exit the loop if either last bit in eax before shifting was 1<br />or if ecx is now 0<br /><br /> dec doesn't change CF so you can<br /> @@:<br />    ...<br />   ...<br /> shr eax,1<br /> dec ecx<br /> jump again if CF = 1(after shr eax,1) or ZF = 1 (after dec ecx)<br />there is such opcode but mnemonics for the opcode tell absolutly nothing of the flags condition.<br />open the app<br />find condition CF = 1 or ZF = 1<br />look for menmonics for it:<br />it's JNA and JBE so in your code you can write<br /> @@:<br />    ...<br />   ...<br /> shr eax,1<br /> dec ecx<br /> jna @B<br /><br />Does it make sence for you after shr eax,1 :)?<br />The mnemonics names have sence only if they are used in pare of cmp (or sub).<br />In other case they can in oposite trap you.<br />But cmp is just one of many instruction that can set flags, and many other instruction<br />doing in fact something usefull may be also used (even more than one in a raw)<br />for JCC.<br /><br />3. The app reminds you in visible manner that there is ofter chance to determine<br />conditions in optional ways - and at once shows you all these ways with all nessesary<br />data to use them.<br /><br />4. tttn - is unic ID for condition in JCC I tell about it a little bit later.<br />For now - use it just for thought provoking :)<br />Try to group what you see in different ways<br />(note for example that both signed and unsigned use ZF ; but for determine<br />wich is bigger unsign use just CF while sign comparing SF ans OV against each other -<br />try to understand why)<br />BTW - do you know how tecniqualy processor knows that overflow has happend?<br />(it can lead to very usefull notions)</div>
    <div class="meta">Posted on 2002-04-14 05:03:53 by The Svin</div>
   </div>
   <div class="post" id="post-33427">
    <div class="subject"><a href="#post-33427">JCC and Flags reference utility</a></div>
    <div class="body">Svin,<br /><br />I am not a complete stranger to JCC.  I know that conditional jumps are flag-based, and I am familiar with what the flags represent and which instructions modify them, and I have used them in some odd optimisation situations myself.<br /><br />Here is why I was confused:<br />I am not accustomed to seeing &quot;reference tools&quot;.  All of the references I use are in text/help documents, and so when I ran your program and saw a dialog box with JCC info, it took me by surprise.    I was expecting it to do something else - therein lies my confusion.  That is why I asked if there was a purpose to your program.  Perhaps I should have worded it better; I did not intend for it to come accross as insulting.  I simply had not ever seen a reference app.<br /><br />My apologies, and again very nice work! :D</div>
    <div class="meta">Posted on 2002-04-14 06:11:50 by iblis</div>
   </div>
   <div class="post" id="post-33428">
    <div class="subject"><a href="#post-33428">JCC and Flags reference utility</a></div>
    <div class="body">Explonation of JCC opcode. TTTN<br />Actaully there are just 8 conditions in jcc it coded in ttt field of opcode<br />binary by 3 bits field called TTT<br />000  001 010 011 100 101...<br />the other 8 conditions is NOT conditions of the first 8 and which condition the <br />current one is deterimed by 1 bit field called N<br />for example<br />0000 - is if OF = 1    0001 - is if NOT OF = 1 in other words if OF = 0<br /><br />whole format for JCC opcode is<br />short:<br /><br />0111TTTN:offset 8<br /><br />let's stop on the short format for full unberstanding<br />short JCC is 2 bytes opcode, so you probably like it more than far one.<br />you see in the above TTTN for OF = 1 and OF = 0 so let's put them inside.<br />first tetrada of first byte always 0111 (7) next tetrada TTTN so we get for <br /><br />OF=1 - 01110000 :offset 8<br />OF=0 - 01110001 :offset 8<br /><br />We just coded in binary - as you see nothing to be afraid of.<br />now what is offset 8?<br />it is 8 bits(one byte) signed value. Sure you can see it is not address of anything -<br />it 's too small for it.<br />offset 8 is offset from next to the JCC command.<br />Let me demonstrate it very simple example:<br /><br />     01110000:00000000 ; hex: 7000h - jo to offset 0 <br />     mov eax,ebx	       ;addr mov eax,ebx - is offset 0,zero point<br />----------<br />     01110001b, -2h	      ;jump onto itself<br /><br />The format for short fist 7 then tttn then explained offset<br />So far the format is<br /><br />   00001111 1000TTTN:offset 32<br />hex 0F8(tttn):offset 32<br /><br />one note you can make: if you jump more far then 127 bytes from zero point -<br />you get 6 bytes instruction instead of 2 :)<br /><br />Check it with help of the app:<br />Look att opcode field (on the left of boxes)<br />and compare opcodes for condition and NOT condition - they always differ by 1 in<br />the only figure of opcode that is being changing.<br />It because the only difference of them in TTTN is N bit and 'cause it least bit<br />the difference in digit for TTTN is always 1.<br /><br />It's very simple to code in binary as you see.<br />When you understand and systemize those bits :)</div>
    <div class="meta">Posted on 2002-04-14 06:13:53 by The Svin</div>
   </div>
   <div class="post" id="post-33429">
    <div class="subject"><a href="#post-33429">JCC and Flags reference utility</a></div>
    <div class="body">Yes the TTTN stuff I <strong>didn't</strong> know.  I normally don't worry about opcodes, but it is a very interesting read.  Thank you for explaining it.  ;)</div>
    <div class="meta">Posted on 2002-04-14 06:16:40 by iblis</div>
   </div>
   <div class="post" id="post-33430">
    <div class="subject"><a href="#post-33430">JCC and Flags reference utility</a></div>
    <div class="body">You are wellcome.<br />So what do you know of how processor determines if there is<br />overflow?</div>
    <div class="meta">Posted on 2002-04-14 06:21:19 by The Svin</div>
   </div>
   <div class="post" id="post-33433">
    <div class="subject"><a href="#post-33433">JCC and Flags reference utility</a></div>
    <div class="body">I'm not sure what you mean.  Do you just want me to tell you what the overflow flag is for?<br /><br />Okay well the CPU sets the overflow flag if the result of the operation produces a value that overflows into the sign bit.   Example,  mov eax, 7FFFFFFFh;  inc eax; would set the overflow flag.  Edit for clarity: If two positives produce a negative, or if two negatives produce a positive.<br /><br />As for how exactly the CPU does it internally...  i.e. how the wiring and stuff is set up on the chip itself,  I don't know.</div>
    <div class="meta">Posted on 2002-04-14 06:48:02 by iblis</div>
   </div>
   <div class="post" id="post-33435">
    <div class="subject"><a href="#post-33435">JCC and Flags reference utility</a></div>
    <div class="body"><div class="quote">I am not accustomed to seeing &quot;reference tools&quot;. </div> <br />I understand what you mean.<br />And that what I have to say:<br />I'm sure that a lot of great ideas died just 'cause creators were not sure &quot;if it suppose to be that way&quot; and they tried to keep up with what they see, killing the best original thoughts they have.<br />I write anytime anything when I want it, and the way I want it,<br />the other users can always decide for themselves if they need it.<br /><br />That's why I just love Hutch and Betov approach - they are both sure they do great thing - and do it without hesitation.<br />Had they keep there job relying only on others oppinion they would have never done what they've done. And people whould<br />never knew that there were some ideas.<br /><br />At short as a beginner I was f*cking tyred looking at JCC reference every minute, opening and scrolling those docs, systemizing what I didn't understand yet etc. etc. I spent 100 more time they I actually needed to get used to jcc if had the apps in those days, it's easy  to talk and systemize it when you know it already but when you don't know it - to get know you need to systemize it and to systemize it you need to get know it.<br /><br />The same reason I wrote styles utility, you can find it all in Win32.hlp but slower, and while scrolling and searching, you may<br />lost your thoughts, get tyred etc. etc.</div>
    <div class="meta">Posted on 2002-04-14 07:00:11 by The Svin</div>
   </div>
   <div class="post" id="post-33437">
    <div class="subject"><a href="#post-33437">JCC and Flags reference utility</a></div>
    <div class="body"><div class="quote">Do you just want me to tell you what the overflow flag is for? </div> <br />No :)<br />I'm sure you know what OF is for.<br />And it's not actually about wiring.<br />I have ~ 25 different asm books in paper, not talking of electronic versions. And practically none of them explain how it works.<br />Actually it may lead to usefull notions and of course to deeper understanding of system.<br />Processor work with bits, it is the only way to know for him about anithing, and in case of flags he works with bits which produced under programmer control (not inner ones)<br />OF is set if carry TO sign bit  and OUT from it (to CF) are not the same.</div>
    <div class="meta">Posted on 2002-04-14 07:10:09 by The Svin</div>
   </div>
   <div class="post" id="post-33440">
    <div class="subject"><a href="#post-33440">JCC and Flags reference utility</a></div>
    <div class="body">Your tool is a keeper.  Belongs in MASM8. <br /><br /><br />It also a good avertisement for RadAsm.  I have not even looked at RadAsm, but I will now.<br /><br /><br />Thanks for sharing with us.</div>
    <div class="meta">Posted on 2002-04-14 08:00:55 by ThoughtCriminal</div>
   </div>
   <div class="post" id="post-34323">
    <div class="subject"><a href="#post-34323">JCC and Flags reference utility</a></div>
    <div class="body">I forgot to write code to generate opcode for equal-not equal cases :)<br />Here is fixed version.<br />Let me know if anybody care for code. There were just 6 lines added to previous code.</div>
    <div class="meta">Posted on 2002-04-21 15:09:52 by The Svin</div>
   </div>
   <div class="post" id="post-34932">
    <div class="subject"><a href="#post-34932">JCC and Flags reference utility</a></div>
    <div class="body">Hi The Svin<br /><br />Please post the code as I would like to include it in RadASM projects on my next release. Besides beeing a useful tool for beginners it also shows an exelent and efficent coding style.<br /><br />KetilO</div>
    <div class="meta">Posted on 2002-04-24 19:34:36 by KetilO</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=4764&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=4764&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="4764" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=4764&amp;page=2">&gt;</a><a href="../?id=4764&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>