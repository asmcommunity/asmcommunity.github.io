<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Help to patch WDM driver - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15553" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=15553">Help to patch WDM driver</a></p>
   <div class="post" id="post-120781">
    <div class="subject"><a href="#post-120781">Help to patch WDM driver</a></div>
    <div class="body">Hello,<br /><br />I need to patch a WDM driver, so that i can listen to all the MMIO being done the driver. I did so before on a Linux driver, but i'm rather clueless on how to do this with a Windows driver.<br /><br />The WDM driver calls WRITE_REGISTER_ULONG to write to a MMIO area of a PCI device, and AFAIK, i have to replace those calls with something like _MY_DEBUG_FUNC, and there i can forward the write operation and make a copy of the data and address being written.<br /><br />I have been playing with IDA 4.5 evaluation version, but it just doesnt let me insert any assembler code  (very frustrating) ! Finally i decided to dump the Assembler listing to a text file, and try to recompile it with MingW &quot;as.exe&quot; assembler, but it uses a different syntax (argGHHH).<br /><br />Any ideas ?<br /><br />Best Regards</div>
    <div class="meta">Posted on 2003-10-08 08:11:15 by mjander</div>
   </div>
   <div class="post" id="post-120893">
    <div class="subject"><a href="#post-120893">Help to patch WDM driver</a></div>
    <div class="body">While IDA is a very nice tool, and definitely worth the money, don't count on being able to reassemble disassemblies and get working output.<br /><br />Your best bet is probably to patch the stuff in memory, but... tjah. The KMD road is long and hard ^_^</div>
    <div class="meta">Posted on 2003-10-09 16:17:49 by f0dder</div>
   </div>
  </div>
 </body>
</html>