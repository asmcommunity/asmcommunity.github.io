<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MASM Macro Syntax - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2806" />
  <link rel="prev" href="../?id=2806&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2806">MASM Macro Syntax</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=2806&amp;page=1" style="">&laquo;</a><a href="../?id=2806&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="2806" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-18391">
    <div class="subject"><a href="#post-18391">real4 values</a></div>
    <div class="body">It is strange masm doesn't support immediate real4 values.. I played a bit with creating the values with macros but had some problems.. It is possible though, with some very simple algorithms it can be done with a macro. <br />I managed to get the right value for the mantissa but not in all cases, and the algo I used does not round 'impossible' floating point values (like 3.2) the way masm does..<br />I'll give it another try someday, right now I've got too much to do.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-01-09 16:26:24 by Thomas</div>
   </div>
   <div class="post" id="post-18393">
    <div class="subject"><a href="#post-18393">MASM Macro Syntax</a></div>
    <div class="body">I thought about it too - that is why I came to the conclusion to patch masm. :grin:</div>
    <div class="meta">Posted on 2002-01-09 16:38:07 by bitRAKE</div>
   </div>
   <div class="post" id="post-18394">
    <div class="subject"><a href="#post-18394">MASM Macro Syntax</a></div>
    <div class="body">So NaN are you saying that in the final assembled code that there is an opcode that will allow REAL4 immediate movement and that is what the:<br /><br /><pre><code><br />mov    dest, 12345678h<br /></code></pre><br /><br />is tricking the assembler into using?  I think the standard is C7 for dword immediate to mem.</div>
    <div class="meta">Posted on 2002-01-09 16:40:13 by rdaneel</div>
   </div>
   <div class="post" id="post-18481">
    <div class="subject"><a href="#post-18481">MASM Macro Syntax</a></div>
    <div class="body">As for the specific op-codes, i dont have the intel specs infront of me (was tested on it last semester tho).  If i remember correctly it is two bytes followed by the 32bit address, followed by the litteral 32 bit value.<br /><br />So to me this is about 10 bytes long, and as the macro indicates, its backing up over the last 4 bytes and replace it with a different set of 1's and 0's (as per the actual REAL4 data).<br /><br />Im not well versed in this neck of the woods, but i take it that when you do this:<br /><br />FloatVal  REAL4  3.14159<br /><br />MASM does the dirty work of makeing 3.14159 into 4 bytes of binary info that adhears to some anchient standard invented by some crazy mathematicians for IBM in the early 80's. (( little history ))<br /><br />Back on track, when your macro works, it realizes that real4 is only 4 bytes long, and simular to a DWORD.  So it &quot;uses&quot; the opcode needed, but then instructs the assembler to &quot;create&quot; an litteral REAL4 value over the old 4 bytes.<br /><br />I too agree that masm shouldnt need this macro, but asside from this, i see the real savings is not having to define the # as an equate or something elsewhere in the program.<br /><br />Hope this helps..<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-01-10 01:31:54 by NaN</div>
   </div>
   <div class="post" id="post-18482">
    <div class="subject"><a href="#post-18482">MASM Macro Syntax</a></div>
    <div class="body"><u>The problem being:</u> To pull off this wizardry you invalidate MASM's internal workings - the tables it figures what bytes to write to a file.  <u>Do not</u> use <strong>ORG $-4</strong> to back over code generated by MASM.  If anyone wants proof, I'll round up some good examples of impossible to debug errors for you.</div>
    <div class="meta">Posted on 2002-01-10 01:51:10 by bitRAKE</div>
   </div>
   <div class="post" id="post-18487">
    <div class="subject"><a href="#post-18487">MASM Macro Syntax</a></div>
    <div class="body">To: NAN<br /><br /><div class="quote"><br />Thats an excellent link! I have them in PDF's but its too annoying to use as is (contents in 1 pdf, index in another, chapters unmarked in file name). Thanx! <br /></div><br /><br /><br />Nan, I recently merged all the individual AoA16 files into one PDF and created a clickable table of contents (limited, but functional to the heads of the chapters only).<br /><br />I created a windows installer for HLA 1.30 (recent) however it's a 12MB download becuase it's fully customizable and has all the downloadables and info from his website (I even printed some of the web pages into PDF and made them available)...  I&quot;ve been studying how HLA converts it's OOP into MASM before the compile... interesting stuff<br /><br />Likely you aren't interested in the entire download, but if you want the AoA16 book let me know and I&quot;ll send it your way...<br /><br /><br />Thanks,<br />_Shawn</div>
    <div class="meta">Posted on 2002-01-10 02:31:53 by _Shawn</div>
   </div>
   <div class="post" id="post-18518">
    <div class="subject"><a href="#post-18518">MASM Macro Syntax</a></div>
    <div class="body">I would love to see it, umm I dont think my current E-mail will handle it (size ~ hotmail... you get it :) ), but you can send it to my robotic's related e-mail address:<br /><br /><a href="mailto:roboflag@yahoo.com">roboflag@yahoo.com</a> <br /><br />( building a robot to play capture the flag on its own )<br /><br />Likewise, after i finish all the hardware (about a two weeks more), i wouldnt mind touching base with you and seeing what you've managed to dig up.<br /><br />Best of luck.<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-01-10 07:10:22 by NaN</div>
   </div>
   <div class="post" id="post-18521">
    <div class="subject"><a href="#post-18521">MASM Macro Syntax</a></div>
    <div class="body"><div class="quote"><br />Readiosys,<br /><br /> Thats an excellent link!  I have them in PDF's but its too annoying to use as is (contents in 1 pdf, index in another, chapters unmarked in file name).  Thanx!</div><br /><br />Glad it is useful to someone. :)<br />Someone posted the .doc version on the old board, but I don't remember the link... (I don't have them anymore).<br /><br />Good bye ! :alright:</div>
    <div class="meta">Posted on 2002-01-10 07:19:48 by JCP</div>
   </div>
   <div class="post" id="post-18560">
    <div class="subject"><a href="#post-18560">MASM Macro Syntax</a></div>
    <div class="body"><div class="quote"><br />I thought about it too - that is why I came to the conclusion to patch masm. :grin: </div><br /><br />Masm loads all the files it reads in memory first so we could patch masm at that point, looking at some character sequence like $float(xxx) or something, converting the value to a dword and putting in back in (new) memory, masm will just see a dword.<br />I would give it a try if I just had enough time :rolleyes: <br /><br />Thomas</div>
    <div class="meta">Posted on 2002-01-10 15:51:27 by Thomas</div>
   </div>
   <div class="post" id="post-18611">
    <div class="subject"><a href="#post-18611">MASM Macro Syntax</a></div>
    <div class="body">If we gotta patch it, we gotta do it right. Actually make it support<br />normal float-constant immediate values. Dunno how hard it would<br />be to do, depends on how MASM does stuff internally... and it would<br />take some REing, which might make it a bit of a shady affair :).</div>
    <div class="meta">Posted on 2002-01-11 00:38:29 by f0dder</div>
   </div>
   <div class="post" id="post-18669">
    <div class="subject"><a href="#post-18669">MASM Macro Syntax</a></div>
    <div class="body"><div class="quote"><br />If we gotta patch it, we gotta do it right. Actually make it support<br />normal float-constant immediate values. Dunno how hard it would<br />be to do, depends on how MASM does stuff internally... and it would<br />take some REing, which might make it a bit of a shady affair :). </div><br /><br />Well it *does* know it's a real or bcd value, as the error message says so... But I think it's not easy to find that specific place where it decides to give an error.. <br /><br />Thomas</div>
    <div class="meta">Posted on 2002-01-11 08:45:55 by Thomas</div>
   </div>
   <div class="post" id="post-18670">
    <div class="subject"><a href="#post-18670">MASM Macro Syntax</a></div>
    <div class="body">xrefs are your friend ;). But I don't really need it (for now at least),<br />so I can't be bothered to drag out the disassembler.</div>
    <div class="meta">Posted on 2002-01-11 09:03:18 by f0dder</div>
   </div>
   <div class="post" id="post-18681">
    <div class="subject"><a href="#post-18681">MASM Macro Syntax</a></div>
    <div class="body">What version do we want to reverse?  I've been browsing through 7.0 to see what is new, but most everyone has 6.14/5.</div>
    <div class="meta">Posted on 2002-01-11 09:47:33 by bitRAKE</div>
   </div>
   <div class="post" id="post-18684">
    <div class="subject"><a href="#post-18684">MASM Macro Syntax</a></div>
    <div class="body">Well the latest version freely available to everyone.. I never saw 7.00 free for download but I believe 6.15.8803 is the latest version that came with the VC processor pack..</div>
    <div class="meta">Posted on 2002-01-11 10:10:31 by Thomas</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=2806&amp;page=1" style="">&laquo;</a><a href="../?id=2806&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="2806" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>