<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Problem with modulus - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25700" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25700">Problem with modulus</a></p>
   <div class="post" id="post-187514">
    <div class="subject"><a href="#post-187514">Problem with modulus</a></div>
    <div class="body">Basically i need if one value divided with another leaves a remainder. I could of course just use DIV, but DIV, as far as i know, is one of the slowest executing instructions you can use, also it is somewhat tricky to use.<br /><br />What i want is a modulus function which only leaves the remainder, possibly just a boolean output, 0 for no remainder and 1 if there is a remainder.<br /><br />I was thinking that maybe you could do somesort of bit manipulation or something, but i have figured out a way yet.<br /><br />I&#39;m sure that there is some bright heads in here, so i hope for the best.<br /><br />Thanks in advance</div>
    <div class="meta">Posted on 2007-01-14 15:15:11 by Zacariaz</div>
   </div>
   <div class="post" id="post-187523">
    <div class="subject"><a href="#post-187523">Re: Problem with modulus</a></div>
    <div class="body">Modulus of (x % y) is best done with idiv/div if y is <strong>arbitrary</strong>. Since you haven&#39;t specified y, then you mean y is arbitrary. <br /><br />But if y is constant, it&#39;s easy with MagicDivider (by The Svin and Ewayne).<br />For instance, if y=271, the proc would be<br /><pre><code><br />Modulo271 macro x:REQ<br />mov eax,x<br />mov edx, 4057238479<br />mul edx<br />SHR edx, 8<br />mov eax,271<br />mul edx<br />sub eax,x<br />endm<br /></code></pre><br />; if (x % 271)==0, eax=0 and ZERO flag is set<br />; otherwise, eax !=0, and ZERO flag is clear<br /></div>
    <div class="meta">Posted on 2007-01-14 19:17:59 by Ultrano</div>
   </div>
   <div class="post" id="post-187535">
    <div class="subject"><a href="#post-187535">Re: Problem with modulus</a></div>
    <div class="body">You could of course do a subtraction loop until the remainder is smaller than the dividend (value to subtract).<br /><br />In the old days, afaik, this could be faster than a DIV if you knew you would always get a small number of iterations.</div>
    <div class="meta">Posted on 2007-01-15 03:36:29 by f0dder</div>
   </div>
  </div>
 </body>
</html>