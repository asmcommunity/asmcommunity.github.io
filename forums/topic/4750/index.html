<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>PNGlib - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4750" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4750">PNGlib</a></p>
   <div class="post" id="post-33301">
    <div class="subject"><a href="#post-33301">PNGlib</a></div>
    <div class="body">The PNG library I started working on a month ago is finished! It is a free library for decoding and displaying PNG images in MASM32 and (Visual) C programs. The whole code for the library is written in assembly and included in the package as well. It does not have all the possible optimisations yet but I thought I'd release it first so you can use it already.<br />The package includes the library in source and binary form (safe &amp; non-safe builds, in .lib files), includes and headers for MASM32 and Visual C, nice documentation (htmlhelp) and several C and asm examples of using the library.<br />Finally it contains a 29kb PNG viewer that uses the library.. I use it as my default viewer now :)<br /><br /><strong>Features:</strong><br /><ul><br />  [*]Support for all types of interlacing available in version 1.0: <br />- Method 0: No interlacing<br />- Method 1: Adam7 interlacing<br />  [*]Support for all color types: <br />- Color type 0: Grayscale, bit depth 1,2,4,8 or 16<br />- Color type 2: RGB triples, bit depth 8 or 16<br />- Color type 3: Palette index, bit depth 1,2,4 or 8<br />- Color type 4: Grayscale &amp;amp; alpha, bit depth 8 or 16<br />- Color type 6: RGB triples &amp;amp; alpha, bit depth 8 or 16<br />  [*]All filter types in filter set 0 (None,sub,up,average and Paeth)<br />  [*]Many output formats for use with Windows bitmaps (DIBs or DDBs) or custom <br />    procedures<br />  [*]Functionality to easily generate a Windows bitmap handle<br />  [*]Functionality to get the original color precision even when not supported <br />    by DIBs<br />  [*]Load PNG data from file location, resource or custom data (pointer + length)<br />  [*]Several build modes <br />- Safe mode: checks data to prevent crashing on invalid PNG<br />- Non-safe mode: for internal use, use on valid PNGs only. Slightly faster <br />        than safe mode.<br />- Custom mode: for creating your own build, leaving out unwanted things<br /><br /><br />Download it at my site now! <br /><a target="_blank" href="http://www.MadWizard.org/view.php?page=downloads">www.MadWizard.org/view.php?page=downloads</a><br /><br />Any comments and suggestions are appreciated..<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-04-13 05:23:42 by Thomas</div>
   </div>
   <div class="post" id="post-33303">
    <div class="subject"><a href="#post-33303">PNGlib</a></div>
    <div class="body">Great job Thomas!<br /><br />The package is as complete as it can be, very well documented too.. very nice :)<br /><br />thank you :alright:</div>
    <div class="meta">Posted on 2002-04-13 06:00:08 by savage</div>
   </div>
   <div class="post" id="post-33310">
    <div class="subject"><a href="#post-33310">PNGlib</a></div>
    <div class="body">I must say I'm amazed at how professional this package is. You know this is better made than 90% of the commercial  components you can buy for programming :alright: <br />It's finished alright, not counting any optimizations of course.<br /><br />I know I'll be using it a lot in future programs, seeing that if you use a lot of bitmaps it can really decrease size. <br /><br />I think you'd be declared a god if you also made a png encoder ;)</div>
    <div class="meta">Posted on 2002-04-13 06:38:52 by Qweerdy</div>
   </div>
   <div class="post" id="post-33311">
    <div class="subject"><a href="#post-33311">PNGlib</a></div>
    <div class="body">great work!<br />thanks for sharing</div>
    <div class="meta">Posted on 2002-04-13 08:06:05 by adapix</div>
   </div>
   <div class="post" id="post-33315">
    <div class="subject"><a href="#post-33315">PNGlib</a></div>
    <div class="body">Clap clap clap clap clap ! :alright: <br />I agree with Qweerdy, it is a very professionnal package, better than many expensive ones...<br /><br />Keep up the good work on it : it is really worth it. ;)<br /><br />Thanks.</div>
    <div class="meta">Posted on 2002-04-13 09:29:55 by JCP</div>
   </div>
   <div class="post" id="post-33318">
    <div class="subject"><a href="#post-33318">PNGlib</a></div>
    <div class="body">Thanks guys :), I hope you can use it.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-04-13 09:46:21 by Thomas</div>
   </div>
   <div class="post" id="post-33349">
    <div class="subject"><a href="#post-33349">PNGlib</a></div>
    <div class="body">Awesome, Thomas! If I every start a own software company, can I hire you? :)</div>
    <div class="meta">Posted on 2002-04-13 15:04:02 by bazik</div>
   </div>
   <div class="post" id="post-33378">
    <div class="subject"><a href="#post-33378">PNGlib</a></div>
    <div class="body">Great++ work, Thomas!!<br /><br />IMHO the most &quot;useful&quot; gfx formats:<br /><br />TIFF, PNG, JPEG<br /><br />now what about a loader of the other two formats? ;)</div>
    <div class="meta">Posted on 2002-04-13 17:42:06 by Maverick</div>
   </div>
   <div class="post" id="post-33380">
    <div class="subject"><a href="#post-33380">PNGlib</a></div>
    <div class="body"><div class="quote"><br />Awesome, Thomas! If I every start a own software company, can I hire you? :) </div><br /><br />sorry I have first pick :grin:<br /><br />damn fine job<br />:alright:</div>
    <div class="meta">Posted on 2002-04-13 18:06:32 by Hiroshimator</div>
   </div>
   <div class="post" id="post-33569">
    <div class="subject"><a href="#post-33569">PNGlib</a></div>
    <div class="body">Thanks again to all!<br /><br />I just spend an hour trying to find the bug that prevented one image from being decoded.. I've tested the library on nearly every PNG file on my harddisk and everytime I get a new image somewhere I test it with it. <br />I had downloaded some kind of mp3 tag utility (only to throw it away again immediately) which had two sample images to put in the id3v2 tags. One of them was a PNG and I tried to open it.. no luck. &quot;Invalid or corrupt PNG file&quot;.<br />So I decommented all the debug info and tried to find the bug. It turned out it wasn't a bug, but a badly encoded PNG.<br />PNG compression works partly by referring to an earlier part of the output stream, and copying that (using a length and distance pair). Although the zlib specifications clearly states:<br /><br /><div class="quote">&quot;Note that a duplicated string reference may refer to a string in a previous block; i.e., the backward distance<br />may cross one or more block boundaries. <strong>However a distance cannot refer past the beginning of the output<br />stream.</strong>&quot;</div><br /><br />This PNG did. It assumed the bytes before the output stream (which was just random garbage, I was surprised it didn't even crash), were not copied but zeroes were to be used instead. After I did this the image decoded fine and even the adler32 cheksum was correct. <br /><br />I don't know if I keep this change, as it goes against the specifications. The stupid thing is that all other image viewers I could find (IE, opera, netscape, paint shop pro, irfan view) all decoded the image perfectly..<br /><br />Oh well, at least it wasn't my fault :)<br /><br />Thomas<br />P.S. here's the stupid image :grin: :</div>
    <div class="meta">Posted on 2002-04-15 10:23:11 by Thomas</div>
   </div>
   <div class="post" id="post-33572">
    <div class="subject"><a href="#post-33572">PNGlib</a></div>
    <div class="body"><div class="quote"><br />Great++ work, Thomas!!<br /><br />IMHO the most &quot;useful&quot; gfx formats:<br /><br />TIFF, PNG, JPEG<br /><br />now what about a loader of the other two formats? ;) </div><br /><br />JPEG is already supported by Windows (OleLoadPicture), I don't think it is JPEG2000 compliant tough...<br />Ernie made a great library (ImageLib) based on COM to decode gif, wmf, jpeg, etc...<br /><br />About TIFF, I was considering making a lib to decode these pictures, don't know when I will have the time, so if Thomas wants to do it, he's more than welcome to. ;)<br /><br />*EDIT* : Uhmm, TIFF format seems to be very complete (many compressions) : if somebody wants to give a try :</div>
    <div class="meta">Posted on 2002-04-15 10:38:24 by JCP</div>
   </div>
   <div class="post" id="post-33573">
    <div class="subject"><a href="#post-33573">PNGlib</a></div>
    <div class="body"><div class="quote"><br />I don't know if I keep this change, as it goes against the specifications. The stupid thing is that all other image viewers I could find (IE, opera, netscape, paint shop pro, irfan view) all decoded the image perfectly.</div>It seems like an elegant way to recover from an errored image, but certainly a matter to comment on in the source code.  It would be nice to have a warning in some applications.</div>
    <div class="meta">Posted on 2002-04-15 10:41:04 by bitRAKE</div>
   </div>
   <div class="post" id="post-33577">
    <div class="subject"><a href="#post-33577">PNGlib</a></div>
    <div class="body">The TIFF v6 specification ;)</div>
    <div class="meta">Posted on 2002-04-15 10:50:00 by JCP</div>
   </div>
   <div class="post" id="post-33578">
    <div class="subject"><a href="#post-33578">PNGlib</a></div>
    <div class="body"><strong>REAL</strong> men code their own image format :)</div>
    <div class="meta">Posted on 2002-04-15 10:50:16 by bazik</div>
   </div>
   <div class="post" id="post-33579">
    <div class="subject"><a href="#post-33579">PNGlib</a></div>
    <div class="body">smart programmers use an existing format if it suits the task.</div>
    <div class="meta">Posted on 2002-04-15 10:52:07 by f0dder</div>
   </div>
   <div class="post" id="post-33584">
    <div class="subject"><a href="#post-33584">PNGlib</a></div>
    <div class="body"><div class="quote">About TIFF, I was considering making a lib to decode these pictures, don't know when I will have the time, so if Thomas wants to do it, he's more than welcome to.  </div><br /><br />TIFF doesn't look fun :(..  PNG is a lot easier to code :)<br /><br /><strong>bitRAKE</strong>: I think I will do something like that.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-04-15 11:04:13 by Thomas</div>
   </div>
   <div class="post" id="post-33587">
    <div class="subject"><a href="#post-33587">PNGlib</a></div>
    <div class="body"><div class="quote"><br />TIFF doesn't look fun :(..  PNG is a lot easier to code :)<br /></div><br /><br />Yup, last time I read the TIFF specifications, I seem to remember it was much simpler. ;)<br /><br /><div class="quote">REAL men code their own image format</div><br /><br />When you think of it, it is funny and flexible : just encode a whole bmp file using a compression, and reorganize a bit your header and you have a new image format.  :grin:</div>
    <div class="meta">Posted on 2002-04-15 11:21:15 by JCP</div>
   </div>
   <div class="post" id="post-33620">
    <div class="subject"><a href="#post-33620">PNGlib</a></div>
    <div class="body"><div class="quote"><br /><strong>REAL</strong> men code their own image format :) </div><br /><br />Yes, when they dont want the art to be used by some other person, and only read by the program you want it to read it.<br /><br />Also when you are daling with gameboy color and want to squeeze every possible memory :)</div>
    <div class="meta">Posted on 2002-04-15 16:27:00 by dxantos</div>
   </div>
   <div class="post" id="post-33857">
    <div class="subject"><a href="#post-33857">PNGlib</a></div>
    <div class="body">OMG!  What an amazing product!<br /><br />How could windows have survived this long with out such a tool for developers! :grin:<br /><br />PS:  None of you vultures can have Thomas till hez done working with ME... ( :grin: LoL :grin: )<br /><br /><em>...This response has been stratigically paced to place this thread at the top again!</em>.<br /><br />Seriously tho, Good job Thomas!<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-04-17 14:15:52 by NaN</div>
   </div>
   <div class="post" id="post-33886">
    <div class="subject"><a href="#post-33886">PNGlib</a></div>
    <div class="body">OMG?<br /><br />Object Management Group? :P<br /><br />Oh My God? :grin:</div>
    <div class="meta">Posted on 2002-04-17 17:04:18 by Maverick</div>
   </div>
  </div>
 </body>
</html>