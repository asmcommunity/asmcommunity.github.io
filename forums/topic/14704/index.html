<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>For Newbies: Paint.asm Iczelion's example FASMW version - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14704" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=14704">For Newbies: Paint.asm Iczelion's example FASMW version</a></p>
   <div class="post" id="post-113942">
    <div class="subject"><a href="#post-113942">For Newbies: Paint.asm Iczelion's example FASMW version</a></div>
    <div class="body"><div class="quote"><br /><br />; Paint.asm Iczelion's example FASMW version<br /><br />format PE GUI 4.0<br />entry start<br /><br /><br />include '%include%\win32a.inc'<br /><br />;--------------------------------------------------------------------------------------------<br />section '.data' data readable writeable<br /><br />  _title db 'Our First Window',0<br />  _class db 'SimpleWinClass',0<br />  _OurText  db 'Win32 assembly is great and easy!',0<br />  mainhwnd dd ?<br />  hinstance dd ?<br />  msg MSG<br />  wc WNDCLASS<br />  _hdc dd 0<br />  _rect RECT<br />  _ps PAINTSTRUCT<br /><br />;---------------------------------------------------------------------------------------------<br />section '.code' code readable executable<br /><br />  start:<br /><br />        invoke  GetModuleHandle,0<br />        mov     ,eax<br />        invoke  LoadIcon,0,IDI_APPLICATION<br />        mov     ,eax<br />        invoke  LoadCursor,0,IDC_ARROW<br />        mov     ,eax<br />        mov     ,0<br />        mov     ,WindowProc<br />        mov     ,0<br />        mov     ,0<br />        mov     eax,<br />        mov     ,eax<br />        mov     ,COLOR_WINDOW+1<br />        mov     ,0<br />        mov     ,_class<br />        invoke  RegisterClass,wc<br /><br />        invoke  CreateWindowEx,0,_class,_title,WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT , CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL, , NULL<br />        mov     ,eax<br />        invoke  ShowWindow, , SW_SHOWNORMAL<br />        invoke  UpdateWindow, <br /><br />  msg_loop:<br />        invoke  GetMessage,msg,NULL,0,0<br />        or      eax,eax<br />        jz      end_loop<br />        invoke  TranslateMessage,msg<br />        invoke  DispatchMessage,msg<br />        jmp     msg_loop<br /><br />  end_loop:<br />        invoke  ExitProcess,<br />;--------------------------------------------------------------------------------------------<br />proc WindowProc, hwnd,wmsg,wparam,lparam<br />        enter<br />        push    ebx esi edi<br />        cmp     ,WM_DESTROY<br />        je      wmdestroy<br />        cmp     ,WM_PAINT<br />        je      wmpaint<br />  defwndproc:<br />        invoke  DefWindowProc,,,,<br />        jmp     finish<br />  wmpaint:<br />        invoke  BeginPaint, , _ps<br />        mov     [_hdc], eax<br />        invoke  GetClientRect, , _rect<br />        invoke  DrawText, [_hdc], _OurText, -1, _rect, DT_SINGLELINE+DT_CENTER+DT_VCENTER<br />        invoke  EndPaint, , _ps<br />        jmp     finish<br />  wmdestroy:<br />        invoke  PostQuitMessage,0<br />        xor     eax,eax<br />  finish:<br />        pop     edi esi ebx<br />        return<br />;--------------------------------------------------------------------------------------------<br />section '.idata' import data readable writeable<br /><br />  library kernel,'KERNEL32.DLL',\<br />          user,'USER32.DLL'<br /><br />  import kernel,\<br />         GetModuleHandle,'GetModuleHandleA',\<br />         ExitProcess,'ExitProcess'<br /><br />  import user,\<br />         RegisterClass,'RegisterClassA',\<br />         CreateWindowEx,'CreateWindowExA',\<br />         DefWindowProc,'DefWindowProcA',\<br />         GetMessage,'GetMessageA',\<br />         TranslateMessage,'TranslateMessage',\<br />         DispatchMessage,'DispatchMessageA',\<br />         LoadCursor,'LoadCursorA',\<br />         LoadIcon,'LoadIconA',\<br />         PostQuitMessage,'PostQuitMessage',\<br />         ShowWindow,'ShowWindow',\<br />         UpdateWindow, 'UpdateWindow',\<br />         BeginPaint, 'BeginPaint',\<br />         GetClientRect, 'GetClientRect',\<br />         DrawText, 'DrawTextA',\<br />         EndPaint, 'EndPaint',\<br />         GetWindowLong, 'GetWindowLongA'<br />;=======================================================<br /></div><br /><br />Cheers,<br /><br />The I</div>
    <div class="meta">Posted on 2003-08-15 01:06:09 by imagineer</div>
   </div>
  </div>
 </body>
</html>