<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Need an easy square-root algo - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6132" />
  <link rel="prev" href="../?id=6132&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=6132">Need an easy square-root algo</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=6132&amp;page=1" style="">&laquo;</a><a href="../?id=6132&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="6132" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-44695">
    <div class="subject"><a href="#post-44695">Need an easy square-root algo</a></div>
    <div class="body">OK i was in the wrong. Sorry (thought i apologized already?)<br /><br />RAdlanor you said (You just don't use trigonometry for square roots.) <br /><br />This is DeMoivres theorom which can be used to find the square, cubic, or any power roots of any real or complex number.<br /><br />[(any number) ^ (1/n)] =  [(cosA +k *360 + sinB +k*360)/n]<br /><br /> That looks like trig to me. The problem is that you still have to find the square root of the radius vector. (i.e. [(any number) ^ (1/n)] )<br /><br />This thread has got me thinking of trying to find one unique formula for finding roots of members of infinite sequences that uses only squares and normal math operations. I spent most of yesterday working on the sequence ( 2,4,8,16,32.....) <br /><br />Maybe such formula already exist. I dunno<br />Gonna work on it anyway.<br />  :alright:</div>
    <div class="meta">Posted on 2002-06-22 10:50:39 by IwasTitan</div>
   </div>
   <div class="post" id="post-44697">
    <div class="subject"><a href="#post-44697">hmmm...</a></div>
    <div class="body">I haven't used DeMoivre's theorem since grade 11... but if I remember correctly it's really only good for complex numbers. For real numbers the sin componenet disappears and cos goes to one, because your angle is 0.<br /><br />So, even if you were being serious about solving it this way... you'd be stuck with your original problem...<br /><br />However, for complex numbers, it's great.<br /><br />Personally, I don't see anything wrong with Newton's method for square roots... it should work well enough and you could probably code up an integer version easily<br /><br />Take care<br /><br />--Chorus<br /><br /><br />PS. shouldn't the formula be:<br /><br />p=x+yi<br />r^2=x^2+y^2<br />k=angle (in radians) between abscissa and p<br />p^(1/n) = r^(1/n)</div>
    <div class="meta">Posted on 2002-06-22 11:05:24 by chorus</div>
   </div>
   <div class="post" id="post-44705">
    <div class="subject"><a href="#post-44705">Need an easy square-root algo</a></div>
    <div class="body">Yep chorus your right about the formula. I get typing and don't watch my brackets and stuff.<br /><br />Here i have uncovered the formula for finding the roots of the members of the infinite sequence {2,4,8,16....} obviously the easiest sequence to use when basing the formula on the square root of 2.<br /><br />It Is:<br />	Sqr root of N = ((N^2)/ 2) / (1.4142135)^(1+3*n)<br /><br /><br />Where N is the number you want the root of.<br /><br />Where n is position of the number in the infinite sequence. (i.e. 2 = position 0, 4 = position 1, 8 = position 2)<br /><br />1.4142135 is the root of 2<br /><br />That was an obviously easy sequence.<br /><br />I am going to try this one next still based on the the root of 2.<br /><br />{3,6,9,12...}<br /><br />	 :alright:</div>
    <div class="meta">Posted on 2002-06-22 11:50:39 by IwasTitan</div>
   </div>
   <div class="post" id="post-44709">
    <div class="subject"><a href="#post-44709">Need an easy square-root algo</a></div>
    <div class="body">What's wrong with<br /><br />sqrt (2^n) == 2^(n/2)<br /><br />which is a lot easier to calculate than (1.414..)^(1+3n)<br /><br />or if you wanna be fancy, you can use lns<br /><br />sqrt(2^n) == e^(ln (2)/2)<br /><br /><br />The sequence {3,6,9,12} is simply 3*{1,2,3,4,...} for which the solution for the square root of the nth number is sqrt(3)*sqrt(n) where sqrt (3) ~= 1.73.<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-06-22 12:50:08 by chorus</div>
   </div>
   <div class="post" id="post-44712">
    <div class="subject"><a href="#post-44712">Need an easy square-root algo</a></div>
    <div class="body">Yep that is very nice chorus for the first sequence {2,4,8,...}<br /><br />sqrt (2^n) == 2^(n/2)<br /><br />However your solution to finding the roots of the sequence {3,6,9,12...} requires that you find individual roots.<br /><br />sqrt(3)*sqrt(n) <br /><br />Here you have a constant sqrt (3) but you then have to calculate the root sqrt(n) for all integer values.<br /><br />My goal is to find a formula  for the series similar to your posted  sqrt (2^n) == 2^(n/2) which uses powers. This &quot;is&quot; better than mine.<br /><br />And of course if the series were {3,9,27,81....} you could use <br />sqrt(3^n)==3^(n/2)<br /><br />But the series is { 3,6,9,12 } so you see my point i hope.<br /><br />Any ideas please reply.<br />thanx<br /><br /><br /><br />:alright: :alright:</div>
    <div class="meta">Posted on 2002-06-22 13:28:57 by IwasTitan</div>
   </div>
   <div class="post" id="post-44719">
    <div class="subject"><a href="#post-44719">Need an easy square-root algo</a></div>
    <div class="body">IwasTitan,<br /><br /> my point about {3,6,9,12} is that if there were a nice solution then you would implicitly have a solution for the square root of integers because they are identical problems.<br /><br />There are a number of solutions, but none as simple as for the specific case of Sqrt (2^n). You can use a Taylor series expansion, for example, which is what Newton's method is based on.<br /><br />The problem you will find is that most square roots are non-constructable. That is, they, are transcendental and do not boil down to finite algebraic sequences. You pretty much have to define them in terms of other transcendental numbers.<br /><br />Regards<br />--Chorus</div>
    <div class="meta">Posted on 2002-06-22 15:36:20 by chorus</div>
   </div>
   <div class="post" id="post-44729">
    <div class="subject"><a href="#post-44729">Need an easy square-root algo</a></div>
    <div class="body">Well that is certainly food for thought chorus. You appear to have a good understanding of number theory.<br /><br />Maybe you could help me with something. I once had taken a calculas course in which the following equation was stated as being impossible to integrate.<br /><br /><br />(x^2 + 5) ^ 2 . dx<br /><br />Any idea why?<br /><br />:alright:</div>
    <div class="meta">Posted on 2002-06-22 16:25:20 by IwasTitan</div>
   </div>
   <div class="post" id="post-44738">
    <div class="subject"><a href="#post-44738">Need an easy square-root algo</a></div>
    <div class="body">No idea...<br /><br />f(x)dx == (x^2 + 5) ^ 2 . dx == x^4+ 10x^2+25<br /><br />Integeral f(x) dx == (x^5)/5 + 10(x^3)/3 + 25x + C1<br /><br />Seems perfectly integrable (?) to me...<br /><br />However, there are many equations for which an algebraic solution of an integral is not possible. Every polynomial is though.<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-06-22 18:16:00 by chorus</div>
   </div>
   <div class="post" id="post-44750">
    <div class="subject"><a href="#post-44750">Need an easy square-root algo</a></div>
    <div class="body">Hmmmm ...I think what the course may have been implying is that if the X value is at a power greater than 1 ..then you would have to expand just as you did. Expansion isn't necessary for the equation below.  <br /><br />(3x+4)^5.dy/dx = 15 (3x+4)^4<br /><br />and so<br /><br />15(3X +4) ^4. dx == 15(3X+4)^5 /(3*5)<br /><br /><br />Imagine how simple it woul'd become if you didn't have to expand this:<br /><br />(x^7 + 11) ^ 25<br /><br />If i remember correctly now their words were:<br /><br />&quot;There is presently no method&quot; ....which does not mean there is no solution.<br /><br />With modern computing power would a method that did not require expansion really count for much? i dunno. Maybe they were implying something else.<br /><br />:alright:</div>
    <div class="meta">Posted on 2002-06-22 19:18:13 by IwasTitan</div>
   </div>
   <div class="post" id="post-44764">
    <div class="subject"><a href="#post-44764">AnyOne have a FPU version of a SqRoot routine</a></div>
    <div class="body"><div class="quote"><br />something like this would do it<br /><br /><pre><code>SquareRoot PROC Number&#58;DWORD<br />        mov ecx, 1<br />@@&#58;     inc ecx<br />        mov eax, ecx<br />        mul ecx<br />        cmp eax, Number<br />        jb @b<br />        ja @f<br />        mov eax, ecx<br />        ret<br />@@&#58;     xor eax, eax<br />        ret<br />    SquareRoot ENDP<br /></code></pre> </div><br /><br />This just gives 0's if it's not 9 or 4</div>
    <div class="meta">Posted on 2002-06-22 21:36:04 by andy981</div>
   </div>
   <div class="post" id="post-44766">
    <div class="subject"><a href="#post-44766">But I got it to work</a></div>
    <div class="body">I got it to work, it's pretty cool code!</div>
    <div class="meta">Posted on 2002-06-22 21:37:25 by andy981</div>
   </div>
   <div class="post" id="post-44770">
    <div class="subject"><a href="#post-44770">Need an easy square-root algo</a></div>
    <div class="body"><div class="quote"><em>Originally posted by andy981</em><br />AnyOne have a FPU version of a SqRoot routine </div><pre><code><br /><br />...<br /><br />_dq DQ 0<br /><br />...<br /><br />push 10<br />fild DWORD PTR &#91;esp&#93;<br />fsqrt<br />fstp _dq<br />pop eax  ;Rebalance stack</code></pre>_dq contains the squareroot of 10. You can eliminate push 10 ... pop eax if you want to compute directly from a &quot;variable&quot;. Then use the FloatToStr from the masm32 library to convert FPU to string. :)</div>
    <div class="meta">Posted on 2002-06-22 22:16:27 by stryker</div>
   </div>
   <div class="post" id="post-44858">
    <div class="subject"><a href="#post-44858">Don't really know how to make this work, but Thank You Stryk</a></div>
    <div class="body"><div class="quote"><em>Originally posted by stryker </em><br /><strong><pre><code><br /><br />...<br /><br />_dq DQ 0<br /><br />...<br /><br />push 10<br />fild DWORD PTR &#91;esp&#93;<br />fsqrt<br />fstp _dq<br />pop eax  ;Rebalance stack</code></pre><br /><br />.data<br />Number      dd  ?<br /><br />.code  <br /><br />mov eax,25        <br />push eax<br />call SquareRoot<br /><br />SquareRoot:<br />        mov Number,eax<br />        mov ecx, 1<br />@@:     inc ecx<br />        mov eax, ecx<br />        mul ecx<br />        cmp eax, Number<br />        jb @b<br />        ja @f<br />        mov eax, ecx<br />        ret<br />@@:     xor eax, eax<br />        ret<br /><br /><br />If you want, can you lay out what you showed me Stryker last night like this<br />if it can work like that, Thank You for the help so far<br /><br />Andy981<br /><br />:stupid:</div>
    <div class="meta">Posted on 2002-06-23 21:35:01 by andy981</div>
   </div>
   <div class="post" id="post-44915">
    <div class="subject"><a href="#post-44915">Need an easy square-root algo</a></div>
    <div class="body">;maybe this one<br />;but you should add in the start a check if the number is 0,1 or 2 ( i think) <br />un tested .. <br />shr eax,2<br />mov ecx, eax<br />@@: inc ecx <br />mov eax, ecx <br />mul ecx <br />cmp , eax,; esp if you push eax, number if not  <br />ja @b <br />sbb ecx,0<br />@@:<br />mov eax, ecx ;add esp,4<br />ret 4 ; or do ret 4 <br /><br /><br />bye<br />eko</div>
    <div class="meta">Posted on 2002-06-24 07:01:43 by eko</div>
   </div>
   <div class="post" id="post-44939">
    <div class="subject"><a href="#post-44939">Need an easy square-root algo</a></div>
    <div class="body"><div class="quote"><em>Originally posted by Andy981<em><br />Don't really know how to make this work, but Thank You Stryker </div>You mean my code? Or the one you posted. If the latter, I'll check that out later, also haven't tested eko's version yet.<pre><code>.data?<br /><br />    _dq     DQ ?<br />    bfr     DB 20 DUP&#40;?&#41;<br /><br />.code<br />start&#58;<br />    push    10              ;TOS == 10<br />    fild DWORD PTR &#91;esp&#93;    ;ST&#40;0&#41; == 10<br />    fsqrt                   ;ST&#40;0&#41; == 3.162278 == sqrt&#40;10&#41;&#41;<br />    fstp _dq                ;_dq = ST&#40;0&#41;<br />    pop     eax<br />    invoke FloatToStr, _dq, OFFSET bfr<br />    invoke MessageBox, NULL, OFFSET bfr, NULL, MB_OK<br /><br />    ;or<br /><br />    fld _dq                 ;ST&#40;0&#41; == 3.162278<br />    fsqrt                   ;ST&#40;0&#41; == 1.778279 == sqrt&#40;3.162278&#41;<br />    fstp _dq                ;_dq = ST&#40;0&#41;<br /><br />    invoke FloatToStr, _dq, OFFSET bfr<br />    invoke MessageBox, NULL, OFFSET bfr, NULL, MB_OK<br /><br />    invoke ExitProcess,NULL<br />end start</code></pre>Just include masm32.inc and masm32.lib for the FloatToStr.</div>
    <div class="meta">Posted on 2002-06-24 11:21:22 by stryker</div>
   </div>
   <div class="post" id="post-45008">
    <div class="subject"><a href="#post-45008">Thanks Stryker</a></div>
    <div class="body">Yeah you really come through, Thanks Stryker!<br /><br />I'd done a little of this floating point several months ago, but never got to this level, as I actually look at it right now,<br />I remember that fstp is for storing the number.<br />And by looking up in the Book right now about<br /><br />DQ is a double, I wondered what <br />_dq     DQ ?<br /><br />was about<br />    <br /><br /><br />Anyway Thank You Stryker            <br /><br />I made it one complete copy paste for the next person.<br /><br />And I changed it so 25 is pushed<br />then Squared to 5<br />then 5 is Squared<br /><br />and that last Square is displayed on the Screen<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />.486<br />.model flat,stdcall<br />option	casemap:none<br /><br />includelib  \masm32\lib\kernel32.lib<br />includelib 	\masm32\lib\user32.lib<br />includelib 	\masm32\lib\masm32.lib<br />include 	\masm32\include\windows.inc<br />include 	\masm32\include\kernel32.inc<br />include 	\masm32\include\user32.inc<br />include 	\masm32\include\masm32.inc<br /><br />.data?<br /><br />    _dq     DQ ?<br />    bfr     DB 20 DUP(?)<br /><br />.code<br />start:<br />    push    25        ; You will get 5      ;TOS == 10<br />    fild DWORD PTR     ;ST(0) == 10<br />    fsqrt                   ;ST(0) == 3.162278 == sqrt(10))<br />    fstp _dq                ;_dq = ST(0)<br />    pop     eax<br />    invoke FloatToStr, _dq, OFFSET bfr<br />    invoke MessageBox, NULL, OFFSET bfr, NULL, MB_OK<br /><br />    ;or<br /><br />    fld _dq                 ;ST(0) == 3.162278<br />    fsqrt                   ;ST(0) == 1.778279 == sqrt(3.162278)<br />    fstp _dq                ;_dq = ST(0)<br /><br />    invoke FloatToStr, _dq, OFFSET bfr<br />    invoke MessageBox, NULL, OFFSET bfr, NULL, MB_OK<br />    invoke StdOut,addr bfr<br />    invoke ExitProcess,NULL<br /><br /><br />end start</div>
    <div class="meta">Posted on 2002-06-24 20:45:35 by andy981</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=6132&amp;page=1" style="">&laquo;</a><a href="../?id=6132&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="6132" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>