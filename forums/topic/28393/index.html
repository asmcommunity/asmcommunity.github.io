<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Preventing user to Copy Screen - brainstorm - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28393" />
    <link rel="next" href="../?id=28393&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28393">Preventing user to Copy Screen - brainstorm</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=28393&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=28393&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="28393" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=28393&amp;page=2">&gt;</a><a href="../?id=28393&amp;page=3">&raquo;</a></form>   <div class="post" id="post-200921">
    <div class="subject"><a href="#post-200921">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Hi

i need a "brain-storm" session on this ideea:

How can a program prevent the user or another program from makeing a copy of its GDI Client Area that is supposed to have "eyes only" information

Any ideeas are welcome ;)

like kill PrintScren Key, Stop capture programs on hot keys, stop capture programs on timmer events or precision timmers, stop remote progams from getting the screen etc..

What is required? how can be done? ;)

Thx</div>
    <div class="meta">Posted on 2001-06-13 18:33:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-200922">
    <div class="subject"><a href="#post-200922">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Yeah stopping Print Screen key its one way of doing it ...

but there are a lot of programs out there that do "screen capture" based on diffrent methods, like another key (cant know them all can I ?), or on a timmer...etc

i belive any program can get a DC with a window handle set to NULL and so get the DC of the whole screen...then all it has to do is crop  and save the image ;(</div>
    <div class="meta">Posted on 2001-06-13 21:07:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-200923">
    <div class="subject"><a href="#post-200923">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Bogdan, are you by any chance working for www.nud.ro?</div>
    <div class="meta">Posted on 2001-06-13 21:23:00 by Larry Hammick</div>
   </div>
   <div class="post" id="post-200924">
    <div class="subject"><a href="#post-200924">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Might be able to do it with DirectX?  ...but that's not what you wanted?</div>
    <div class="meta">Posted on 2001-06-13 23:46:00 by bitRAKE</div>
   </div>
   <div class="post" id="post-200925">
    <div class="subject"><a href="#post-200925">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">windows media player is able to - if you make a screenshot of a
running video, you get a black whole instead of the video.

The same thing occurs with most DVD software players.

But I have no idea how to realize :(</div>
    <div class="meta">Posted on 2001-06-14 05:34:00 by beaster</div>
   </div>
   <div class="post" id="post-200926">
    <div class="subject"><a href="#post-200926">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">The reason video, and DVD playbacks don't appear is because their GDI driver supports video overlays (similar to hardware rendered mouse cursors).

They are a sperate part of the video memory from the frame buffer, and are rendered separately.

When you do a GDI read, you simply grab part of the frame buffer, and record it in local memory instead. As the video is not a part of this "grabbed" memory, it doesn't show.

However if the card doesn't support video overlays, it will be rendered frame by frame to the normal frame buffer, and get captured in the screen dump. The only problem is it'll kill performance as you are thrashing the frame buffer so much!
Plus its pretty damn hard to find a GFX card that doesn't support it.

Mirno</div>
    <div class="meta">Posted on 2001-06-14 05:50:00 by Mirno</div>
   </div>
   <div class="post" id="post-200927">
    <div class="subject"><a href="#post-200927">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">And overlays *can* be grabbed, you just need an app that can do
it. I think HypersnapDX can. Bogdan, there's no use in trying to
prevent people from grabbing your screen. There's too many ways
to do it, and you wont get them all. Why is this important, btw?
People can always note down the stuff on paper...unless, of course,
you're trying to prevent crap like BackOrifice ...</div>
    <div class="meta">Posted on 2001-06-14 07:03:00 by f0dder</div>
   </div>
   <div class="post" id="post-200928">
    <div class="subject"><a href="#post-200928">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Here's a fresh thought off the top of my head. And it's even simple.

To invoke any sort of screen saver, application focus will probably shift to that app (well, not always. Paint Shop Pro for one will do it on a timer). BUT.... to stop the casual coppier, have your app process the lost focus message (whatever it is), and re-paint itself white as that happens. When it regains focus it can go back to normal.

Not 100% safe, but aproaching your needs, and in a simple fashion.</div>
    <div class="meta">Posted on 2001-06-14 07:34:00 by Ernie</div>
   </div>
   <div class="post" id="post-200929">
    <div class="subject"><a href="#post-200929">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Just being nosey, but why would you want to do this?

umbongo</div>
    <div class="meta">Posted on 2001-06-14 08:34:00 by umbongo</div>
   </div>
   <div class="post" id="post-200930">
    <div class="subject"><a href="#post-200930">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Give it up, BogdanOnatu - you can't stop users from copying such information. I mean, they can always use a photo camera to take a picture of the monitor, right? :D
BTW, who are you working for? CIA, NSA, or M16?</div>
    <div class="meta">Posted on 2001-06-14 09:36:00 by Qweerdy</div>
   </div>
   <div class="post" id="post-200931">
    <div class="subject"><a href="#post-200931">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">how about making a windows clipboard chainviewer that reacts on bitmaps, discarding any bitmaps placed on the clipboard during it's existence.

Points to take into knowledge: bitmaps not of the same size as the screen aren't screen copies :) 
bitmaps that already were in the clipboard before the application started shouldn't be discarded.

I bet the dataformat used will just be a bitmap or a dib :)</div>
    <div class="meta">Posted on 2001-06-14 13:48:00 by Hiroshimator</div>
   </div>
   <div class="post" id="post-200932">
    <div class="subject"><a href="#post-200932">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">You're wasting your time.  You can prevent it.  But there will always be a way around it.  Personally, I think you're on a wild goose chase that will lead to little solutions that will work for awhile, but soon, you'll noticed someone has found a way around it.  Use your time for something more productive.  Tell us the problem, and maybe someone could come up with a viable alternative.</div>
    <div class="meta">Posted on 2001-06-14 16:57:00 by Jon Richardson</div>
   </div>
   <div class="post" id="post-200933">
    <div class="subject"><a href="#post-200933">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Hey, thx all for your ideeas...keep them comming ..that is the way "brainstorm" works after all..

just to give u "food for thought":

Well i CANT tell you who i am working for, :( sorry starndard NDA
but as far as i know it can ve anybody *hehe including CIA, NSA etc) just dosent matter. Sure IS NOT www.nud.ro ;)

but u can check:
<- hmm I overlooked this ->
if u want to see some real romanian amateur beauties

Now back to work
I havt to do just that: STOP the maximum number of users from geting a copy of the screen ...yeah i know a photo camera can do it...but is not my problem ;)

I am also aware i can do it more easy with DirectX (after all i am knowing 2D DX hardcore ;) by now )

Problem is i have to do it with GDI also.

It was thinking to stop all and any apps that try to do that from working properly ;) kinda virus detection software only i will detect screen grabbers instead, also stopping PrintScreen to work i belive is quite easy is it not?

Clipboard...yeah cool also but i belive a program can easy save the bitmap to a file without placeing it to the clipboard first ...

Ernie's ideea also crossed my mind and i think is one of the best ;) if combined with a messge loop stand still ;) ( strange we use this technique in our game but allow PrntScr at Alt+Tab... ) makeing the APP kinda of a MODAL one....

Patching GDI...arghh this is another ideea...but i guess very un orthodox one.

video overlay is also cool but one cant make listviews and dialogs in a video overlay can it? (think at all that predefined window controls that make GDI life/developement so much easy)

All i can tell (again NDA) is that i am not doing anything wrong with this...just a normal job for me.

So keep those ideas flowing...

And special THANKS to everyone 






This message was edited by Hiroshimator, on 6/16/2001 11:21:45 AM</div>
    <div class="meta">Posted on 2001-06-14 22:16:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-200934">
    <div class="subject"><a href="#post-200934">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">I'm really not quite sure, but couldn't you use a VxD to intercept the capturing of the screen? I'm not really able to help you any further, but it was just a suggestion. Good Luck.</div>
    <div class="meta">Posted on 2001-06-14 22:34:00 by usb</div>
   </div>
   <div class="post" id="post-200935">
    <div class="subject"><a href="#post-200935">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">yeah, but how is a vxd supposed to stop GetDC WinAPI function to get a handle to the desktop DC and do a BitBlt to a propetary memory DC and the save the DC content to a file just like in the MSDN GDI example?

i mean all other Apps must run Ok just not be able to copy my windows DC content ...

And yeah i dont want code or other help & stuff just your wild ideeas ;)

Thx Anyway</div>
    <div class="meta">Posted on 2001-06-14 22:46:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-200936">
    <div class="subject"><a href="#post-200936">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">here's a wild idea: you could ask the user not to make ascreen copy :D</div>
    <div class="meta">Posted on 2001-06-14 23:05:00 by Hiroshimator</div>
   </div>
   <div class="post" id="post-200937">
    <div class="subject"><a href="#post-200937">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">"This graphic will self-destruct in five seconds. Good luck, Jim. {fizzing sound}"

Could your program hide its window contents whenever some other program (screen snatcher) becomes "active" in some sense? E.g. on WM_KILLFOCUS?

This message was edited by Larry Hammick, on 6/15/2001 8:20:40 AM</div>
    <div class="meta">Posted on 2001-06-15 00:36:00 by Larry Hammick</div>
   </div>
   <div class="post" id="post-200938">
    <div class="subject"><a href="#post-200938">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body"><pre><code>
 perhaps, Bogdan can place a legal notice :) such as copyright msg
 . it might not stop all, but it sure will stop some from trying
 to get your gdi. spcially people who believe in god and try to
 have faith in him by doing good thing. ;)


 what else? there's no other way...
</code></pre></div>
    <div class="meta">Posted on 2001-06-15 10:43:00 by disease_2000</div>
   </div>
   <div class="post" id="post-200939">
    <div class="subject"><a href="#post-200939">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Nice

i like the jokes ;) esp this one by Larry:

<div class="quote">
"This graphic will self-destruct in five seconds. Good luck, Jim. {fizzing sound}"
</div>

the one with ppl that belive in GOD is a good one also ;)
esp. for humman race i mean...

well what can i do ... every man has to do its job ;)

WM_KILLFOCUS? well i belive i will not get that message every time a timmer fires up will i? 

I am not sure but i belive an app dose not have to loose focus (or to put it the other way, the app that captures dosent have to gain focus) when a capture is done (either on Hot key or on timmer)

And i dont have to do it against you guys, i know u will fast make and ASM proggy to do just that...and i will be able to do little against You...

i only have to stop the normal/causal user/or special agent ;) that has little time but can DL any such "freeware" capture proggy from internet ... and wants to make easy money from selling that info ;)

:(</div>
    <div class="meta">Posted on 2001-06-15 20:09:00 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-200940">
    <div class="subject"><a href="#post-200940">Preventing user to Copy Screen - brainstorm</a></div>
    <div class="body">Sorry, Ernie, I overlooked your post and said much the same thing.
True, timers would evade WM_KILLFOCUS, no doubt.
And is this screen material going through PPP? If it is, you have more than the screen to worry about. A tough opponent might be packin' his own packet driver -- logging everything going in and out. Symantec and others are developing such things for the general market, and the not-so-tough opponents might learn how to use them.
"Back Orifice" -- good one f0dder:).</div>
    <div class="meta">Posted on 2001-06-15 21:21:00 by Larry Hammick</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=28393&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=28393&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="28393" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=28393&amp;page=2">&gt;</a><a href="../?id=28393&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>