<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to display a dialog box with HLA? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13668" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=13668">How to display a dialog box with HLA?</a></p>
   <div class="post" id="post-105878">
    <div class="subject"><a href="#post-105878">How to display a dialog box with HLA?</a></div>
    <div class="body">Hi,<br /><br />I am trying to display a dialog box in HLA, but it just  work.<br /><br />I haven't inluded the resource file, but the rest is obvious.<br />The resource file was created with radasm.<br /><br />Can someone please help me to understand what I am doing wrong.<br /><br />Please see code below,<br /><br />Thanks, <br /><br />Yao.<br /><br />program Script_Generator;<br /><br />#include( &quot;w.hhf&quot; ) // Standard windows stuff.<br /><br />#include (&quot;comctl32.hhf&quot;)<br /><br /><br /><br />#asm<br />includelib \masm32\lib\comctl32.lib<br />#endasm<br /><br />#asm<br />includelib \masm32\lib\user32.lib<br />#endasm<br /><br /><br />const<br />myMENU := 10000;<br />IDM_NRFILE := 10002;<br />IDM_RANGEFILE := 10003;<br />IDM_RUN := 10005;<br />IDM_VIEWFILE := 10006;<br />IDM_EXIT := 10008;<br />IDM_RESET := 10009;<br />IDM_ABOUT := 10010;<br />myIcon := 100;<br />IDC_BTN1 := 1005;<br />IDD_DLG01 := 1000;<br /><br />static<br />hInstance :dword;<br />hMenu :dword;<br />hEdit :dword;<br />hDlg :dword;<br />CommandLine :string;<br /><br /><br />readonly<br /><br />ClassName :string := &quot;Win32ASMEditClass&quot;;<br />EditClass :string := &quot;edit&quot;;<br />AppName :string := &quot;AppNameStr&quot;;<br />DlgName :string := &quot;aboutDialog&quot;;<br /><br />procedure DlgProc( hDlg:dword; uMsg:uns32; wParam:dword; <br />lParam:dword );<br />@nodisplay;<br />@stdcall;<br /><br />begin DlgProc;<br /><br /><br />if ( uMsg = w.WM_INITDIALOG ) then<br /><br />elseif ( uMsg = w.WM_CLOSE ) then<br /><br />w.EndDialog ( hDlg, 0 );<br /><br />elseif ( uMsg = w.WM_COMMAND ) then<br /><br />if ( wParam = IDC_BTN1 ) then<br /><br />w.SendMessage (hDlg, w.WM_CLOSE, 0, 0);<br /><br />endif;<br /><br />else<br /><br />mov ( 0 , eax );<br />exit DlgProc;<br /><br />endif;<br /><br />mov ( 1, eax );<br /><br />end DlgProc;<br /><br /><br />procedure WndProc( lParam:dword; wParam:dword; uMsg:uns32; <br />hWnd:dword );<br />@nodisplay;<br /><br />begin WndProc;<br /><br />if( uMsg = w.WM_DESTROY ) then<br /><br />w.PostQuitMessage( 0 );<br /><br />elseif( uMsg = w.WM_CREATE ) then<br /><br />w.CreateWindowEx<br />(<br />NULL,<br />EditClass,<br />NULL,<br />w.WS_VSCROLL|w.WS_HSCROLL|w.WS_VISIBLE| <br />w.WS_CHILD | w.ES_LEFT | w.ES_MULTILINE| <br />w.ES_AUTOVSCROLL|w.ES_AUTOHSCROLL,<br />w.CW_USEDEFAULT,<br />w.CW_USEDEFAULT,<br />w.CW_USEDEFAULT,<br />w.CW_USEDEFAULT,<br />hWnd,<br />NULL,<br />hInstance,<br />NULL<br />);<br /><br />elseif( uMsg = w.WM_SIZE ) then<br /><br />mov( lParam, eax );<br />mov ( eax, edx );<br />shr( 16, edx );<br />and( $FFFF, eax );<br />w.MoveWindow( hEdit, 0, 0, eax, edx, true );<br /><br />elseif( uMsg = w.WM_COMMAND ) then<br /><br />mov( wParam, eax );<br />if( lParam = 0 ) then<br /><br />if( ax = IDM_ABOUT ) then<br />w.CreateDialogParam( hWnd,IDD_DLG01, NULL, <br />&amp;DlgProc, NULL );<br />mov(eax,hDlg); <br /><br />endif; <br />endif; <br />else<br /><br />w.DefWindowProc( hWnd, uMsg, wParam, lParam );<br />exit WndProc;<br /><br />endif;<br />sub( eax, eax );<br /><br />end WndProc;<br /><br />procedure WinMain<br />(<br />hInst:dword;<br />hPrevInst: dword;<br />CmdLine: string;<br />CmdShow: dword<br />); @nodisplay;<br /><br />var<br />wc: w.WNDCLASSEX;<br />msg: w.MSG;<br />hWnd: dword;<br /><br />begin WinMain;<br /><br /><br />// Set up the window class (wc) object:<br /><br />mov( @size( w.WNDCLASSEX ), wc.cbSize );<br />mov( w.CS_HREDRAW | w.CS_VREDRAW, wc.style );<br />mov( &amp;WndProc, wc.lpfnWndProc );<br />mov( NULL, wc.cbClsExtra );<br />mov( NULL, wc.cbWndExtra );<br /><br />mov( hInstance, wc.hInstance );<br />mov( w.COLOR_WINDOW+1, wc.hbrBackground );<br />mov( myMENU, wc.lpszMenuName );<br />mov( ClassName, wc.lpszClassName );<br /><br />// Get the icons and cursor for this application:<br /><br />w.LoadIcon( hInstance, myIcon );<br />mov( eax, wc.hIcon );<br />mov( eax, wc.hIconSm );<br /><br />w.LoadCursor( NULL, w.IDC_ARROW );<br />mov( eax, wc.hCursor );<br /><br /><br />// Okay, register this window with Windows so it<br />// will start passing messages our way. Once this<br />// is accomplished, create the window and display it.<br /><br />w.RegisterClassEx( wc );<br /><br />w.CreateWindowEx<br />( <br />w.WS_EX_CLIENTEDGE, <br />ClassName, <br />AppName, <br />w.WS_OVERLAPPEDWINDOW,<br />w.CW_USEDEFAULT,<br />w.CW_USEDEFAULT,<br />w.CW_USEDEFAULT,<br />w.CW_USEDEFAULT,<br />NULL,<br />NULL,<br />hInst,<br />NULL<br />);<br />mov( eax, hWnd );<br /><br />// createStatusBar(hWnd);<br /><br />w.GetMenu(hWnd);<br />mov(eax,hMenu);<br /><br /><br />w.ShowWindow( hWnd, w.SW_SHOWNORMAL );<br />w.UpdateWindow( hWnd );<br /><br />// Here's the event loop that processes messages<br />// sent to our window. On return from GetMessage,<br />// break if EAX contains false and quit the<br />// program.<br /><br />forever<br /><br />w.GetMessage( msg, NULL, 0, 0 );<br />breakif( !eax );<br />w.TranslateMessage( msg );<br />w.DispatchMessage( msg );<br /><br />endfor;<br />mov( msg.wParam, eax );<br /><br /><br />end WinMain;<br /><br /><br /><br />begin Script_Generator;<br /><br />w.GetModuleHandle( NULL );<br />mov( eax, hInstance );<br /><br />// Get a copy of the command line string passed to this code:<br /><br />w.GetCommandLine();<br />mov(eax,CommandLine);<br /><br />WinMain( hInstance, NULL, CommandLine, w.SW_SHOWDEFAULT );<br /><br />// WinMain returns a return code in EAX, exit the program<br />// and pass along that return code.<br /><br />w.ExitProcess( eax ); <br /><br />end Script_Generator;<br /><br />-----------------------------------<br />Yao knows he's new to the ASM scene, but yao loves a challenge.</div>
    <div class="meta">Posted on 2003-06-03 14:14:39 by Yao_Rules</div>
   </div>
  </div>
 </body>
</html>