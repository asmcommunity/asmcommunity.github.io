<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>PICF690 port B change interrupt - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25615" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25615">PICF690 port B change interrupt</a></p>
   <div class="post" id="post-186975">
    <div class="subject"><a href="#post-186975">PICF690 port B change interrupt</a></div>
    <div class="body">&nbsp; Anybody use one of these things? I got my TMR0 interrupt working fine, but the port B change interrupts just wont work. Here&#39;s my configuration....<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;050&nbsp; &nbsp; &nbsp; 1683&nbsp; &nbsp;BSF 0x3, 0x5&nbsp; &nbsp; &nbsp; ; Go to Bank1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 051&nbsp; &nbsp; &nbsp; 1303&nbsp; &nbsp;BCF 0x3, 0x6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 052&nbsp; &nbsp; &nbsp; 1007&nbsp; &nbsp;BCF 0x7, 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 053&nbsp; &nbsp; &nbsp; 1087&nbsp; &nbsp;BCF 0x7, 0x1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 054&nbsp; &nbsp; &nbsp; 1107&nbsp; &nbsp;BCF 0x7, 0x2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 055&nbsp; &nbsp; &nbsp; 1187&nbsp; &nbsp;BCF 0x7, 0x3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 056&nbsp; &nbsp; &nbsp; 100F&nbsp; &nbsp;BCF 0xf, 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 057&nbsp; &nbsp; &nbsp; 3000&nbsp; &nbsp;MOVLW 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; 058&nbsp; &nbsp; &nbsp; 00A0&nbsp; &nbsp;MOVWF 0x20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 059&nbsp; &nbsp; &nbsp; 1381&nbsp; &nbsp;BCF 0x1, 0x7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 05A&nbsp; &nbsp; &nbsp; 30FF&nbsp; &nbsp;MOVLW 0xff&nbsp; &nbsp; &nbsp; &nbsp; ; Set trisB input&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 05B&nbsp; &nbsp; &nbsp; 0086&nbsp; &nbsp;MOVWF 0x6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; 05C&nbsp; &nbsp; &nbsp; 1703&nbsp; &nbsp;BSF 0x3, 0x6&nbsp; &nbsp; &nbsp;&nbsp; ; Goto Bank2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 05D&nbsp; &nbsp; &nbsp; 1283&nbsp; &nbsp;BCF 0x3, 0x5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 05E&nbsp; &nbsp; &nbsp; 0095&nbsp; &nbsp;MOVWF 0x15&nbsp; &nbsp; &nbsp; &nbsp;; Turn on WPUB pull ups&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 05F&nbsp; &nbsp; &nbsp; 0096&nbsp; &nbsp;MOVWF 0x16&nbsp; &nbsp; &nbsp; &nbsp;; Set IOCB interrupt on change&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 060&nbsp; &nbsp; &nbsp; 3000&nbsp; &nbsp;MOVLW 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Set ANSEL to digital I/O&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 061&nbsp; &nbsp; &nbsp; 009E&nbsp; &nbsp;MOVWF 0x1e&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 062&nbsp; &nbsp; &nbsp; 1303&nbsp; &nbsp;BCF 0x3, 0x6&nbsp; &nbsp; &nbsp;&nbsp; ; Goto Bank1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 063&nbsp; &nbsp; &nbsp; 1683&nbsp; &nbsp;BSF 0x3, 0x5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 064&nbsp; &nbsp; &nbsp; 0000&nbsp; &nbsp;NOP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; 065&nbsp; &nbsp; &nbsp; 1381&nbsp; &nbsp;BCF 0x1, 0x7&nbsp; &nbsp; &nbsp; ; RABPU pull ups enabled&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 066&nbsp; &nbsp; &nbsp; 1701&nbsp; &nbsp;BSF 0x1, 0x6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 067&nbsp; &nbsp; &nbsp; 1281&nbsp; &nbsp;BCF 0x1, 0x5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 068&nbsp; &nbsp; &nbsp; 1201&nbsp; &nbsp;BCF 0x1, 0x4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 069&nbsp; &nbsp; &nbsp; 1181&nbsp; &nbsp;BCF 0x1, 0x3&nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 06A&nbsp; &nbsp; &nbsp; 1101&nbsp; &nbsp;BCF 0x1, 0x2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 06B&nbsp; &nbsp; &nbsp; 1081&nbsp; &nbsp;BCF 0x1, 0x1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 06C&nbsp; &nbsp; &nbsp; 1001&nbsp; &nbsp;BCF 0x1, 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 06D&nbsp; &nbsp; &nbsp; 1283&nbsp; &nbsp;BCF 0x3, 0x5&nbsp; &nbsp; &nbsp;; Back to Bank0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 06E&nbsp; &nbsp; &nbsp; 130B&nbsp; &nbsp;BCF 0xb, 0x6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 06F&nbsp; &nbsp; &nbsp; 168B&nbsp; &nbsp;BSF 0xb, 0x5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 070&nbsp; &nbsp; &nbsp; 120B&nbsp; &nbsp;BCF 0xb, 0x4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 071&nbsp; &nbsp; &nbsp; 158B&nbsp; &nbsp;BSF 0xb, 0x3&nbsp; &nbsp; &nbsp; ; Enable port change interrupt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; 072&nbsp; &nbsp; &nbsp; 178B&nbsp; &nbsp;BSF 0xb, 0x7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>
    <div class="meta">Posted on 2006-12-15 20:06:01 by mrgone</div>
   </div>
  </div>
 </body>
</html>