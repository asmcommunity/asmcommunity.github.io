<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>a model  dialog  problem - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14908" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14908">a model  dialog  problem</a></p>
   <div class="post" id="post-115695">
    <div class="subject"><a href="#post-115695">a model  dialog  problem</a></div>
    <div class="body">This  program make  a   model  dialog,but  i can not understand somewhere<br />.386<br />		.model flat, stdcall<br />		option casemap :none<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />; Include ???????<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />include		windows.inc<br />include		user32.inc<br />includelib	user32.lib<br />include		kernel32.inc<br />includelib	kernel32.lib<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />; Equ <br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />ICO_MAIN	equ		1000h	;icon<br />DLG_MAIN	equ		1<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />; data<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />		.data?<br /><br />hInstance	dd		?<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />; code<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />		.code<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />_ProcDlgMain	proc	uses ebx edi esi hWnd,wMsg,wParam,lParam<br /><br />		mov	eax,wMsg<br />		.if	eax == WM_CLOSE<br />			invoke	EndDialog,hWnd,NULL<br />		.elseif	eax == WM_INITDIALOG<br />			invoke	LoadIcon,hInstance,ICO_MAIN<br />			invoke	SendMessage,hWnd,WM_SETICON,ICON_BIG,eax<br />		.elseif	eax == WM_COMMAND<br />			mov	eax,wParam<br />			.if	ax == IDOK<br />				invoke	EndDialog,hWnd,NULL<br />			.endif<br />		.else<br />               mov	          eax,FALSE   <br />			ret   <br />		.endif<br />             mov       eax,TRUE     <br />		ret <br />_ProcDlgMain	endp<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />start:<br />		invoke	GetModuleHandle,NULL<br />		mov	hInstance,eax<br />		invoke	DialogBoxParam,hInstance,DLG_MAIN,NULL,offset _ProcDlgMain,NULL<br />		invoke	ExitProcess,NULL<br />;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br />		end	start<br />1.The  first  question  is  why  use   mov   eax,FALSE<br />2.The  second   question   is  why    use    ret   tow  times?<br />3.The  third  question   is  why   use  mov   eax,TRUE</div>
    <div class="meta">Posted on 2003-08-27 05:55:28 by tomorrow</div>
   </div>
   <div class="post" id="post-115697">
    <div class="subject"><a href="#post-115697">Re: a model  dialog  problem</a></div>
    <div class="body"><div class="quote">1.The  first  question  is  why  use   mov   eax,FALSE</div>To indicate to Windows that you HAVE processed the message.<br /><br /><div class="quote">2.The  second   question   is  why    use    ret   tow  times?</div>Because you have two exit points from the function. You can have a million exit points if you wish.<br /><br /><div class="quote">3.The  third  question   is  why   use  mov   eax,TRUE </div>To indicate to Windows that you have NOT dealt with the message.<br /><br /><br />Note that you have your mov eax, TRUE and mov eax, FALSE around the wrong way. You really should read <a target="_blank" href="http://spiff.tripnet.se/~iczelion/tut3.html"><u>this</u></a> tutorial.</div>
    <div class="meta">Posted on 2003-08-27 06:10:11 by sluggy</div>
   </div>
   <div class="post" id="post-115701">
    <div class="subject"><a href="#post-115701">thanks</a></div>
    <div class="body">Thank you for answer my question.<br />question 1 and 3 i understand.but 2 answer you say <br />Because you have two exit points from the function. You can have a million exit points if you wish.<br />i can not understand. can you tell me  what dose exit points mean and where i hava two exit points.</div>
    <div class="meta">Posted on 2003-08-27 06:18:36 by tomorrow</div>
   </div>
   <div class="post" id="post-115704">
    <div class="subject"><a href="#post-115704">a model  dialog  problem</a></div>
    <div class="body">It is a function, a self contained piece of code, it is designed to a specific job. It can be called from anywhere, and you always enter at the same spot, but you can leave it at any time and return to the piece of code that called it.</div>
    <div class="meta">Posted on 2003-08-27 06:26:48 by sluggy</div>
   </div>
   <div class="post" id="post-115707">
    <div class="subject"><a href="#post-115707">a model  dialog  problem</a></div>
    <div class="body">i can not  understand you,you mean   use ret  because  i use invok function.but i use  it so many.</div>
    <div class="meta">Posted on 2003-08-27 06:52:22 by tomorrow</div>
   </div>
   <div class="post" id="post-115710">
    <div class="subject"><a href="#post-115710">a model  dialog  problem</a></div>
    <div class="body">anybody here</div>
    <div class="meta">Posted on 2003-08-27 07:12:47 by tomorrow</div>
   </div>
   <div class="post" id="post-115712">
    <div class="subject"><a href="#post-115712">a model  dialog  problem</a></div>
    <div class="body">ret is masm's marco for the opcode retn xx. The reason why there is 2 ret is that the coder want to exit from the function with different values in eax. That's the only reason why there is 2 ret.</div>
    <div class="meta">Posted on 2003-08-27 07:36:56 by roticv</div>
   </div>
   <div class="post" id="post-115713">
    <div class="subject"><a href="#post-115713">a model  dialog  problem</a></div>
    <div class="body">roticy ,thankyou.nice to meet you</div>
    <div class="meta">Posted on 2003-08-27 07:51:05 by tomorrow</div>
   </div>
   <div class="post" id="post-115717">
    <div class="subject"><a href="#post-115717">a model  dialog  problem</a></div>
    <div class="body">You call a function, so you must return from it. 'ret' is a macro for the 'return' opcode. You can return from a function at any point within that function.<br /><br />This is all absolute basic coding practice, regardless of the language being used.</div>
    <div class="meta">Posted on 2003-08-27 08:13:24 by sluggy</div>
   </div>
   <div class="post" id="post-115729">
    <div class="subject"><a href="#post-115729">a model  dialog  problem</a></div>
    <div class="body"><div class="quote"><br />--------------------------------------------------------------------------------<br />1.The first question is why use mov eax,FALSE<br />--------------------------------------------------------------------------------<br /><br />To indicate to Windows that you HAVE processed the message.<br /><br />--------------------------------------------------------------------------------<br />3.The third question is why use mov eax,TRUE <br />--------------------------------------------------------------------------------<br /><br />To indicate to Windows that you have NOT dealt with the message.<br /></div><br /><br />May be im wrong but I think the opposite is true, you should return TRUE if you have processed the message. WM_INITDIALOG is an exception, returning TRUE here means windows should set focus.<br /><br />Japheth</div>
    <div class="meta">Posted on 2003-08-27 08:40:58 by japheth</div>
   </div>
  </div>
 </body>
</html>