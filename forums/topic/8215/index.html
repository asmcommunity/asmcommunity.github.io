<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Additional data to store in custom control instance - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8215" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=8215">Additional data to store in custom control instance</a></p>
   <div class="post" id="post-60064">
    <div class="subject"><a href="#post-60064">Additional data to store in custom control instance</a></div>
    <div class="body">How to superclass a custom control and make it store additional data you need. The data should be stored for each instance of the control. I can allocate a data structure on WM_CREATE message and store a pointer to it with the corresponding window handle in an array. But it's hard to define by the window handle which pointer I have to use. I have to scan the entire array and compare the handle I get in my windowproc with the handles stored in it. When the handles match I get the right pointer to additional data structure. I don't like this way. Does anyone know the better one?</div>
    <div class="meta">Posted on 2002-09-30 02:19:28 by Vaxon</div>
   </div>
   <div class="post" id="post-60136">
    <div class="subject"><a href="#post-60136">Re: Additional data to store in custom control instance</a></div>
    <div class="body">You can call SetWindowLong with GWL_USERDATA flag and store your pointer to control instance itself.<br />And every time you need it again call GetWindowLong. When you don't need this instance of control anymore, you can fetch pointer from it, release memory and destroy control.</div>
    <div class="meta">Posted on 2002-09-30 08:19:35 by Four-F</div>
   </div>
   <div class="post" id="post-60143">
    <div class="subject"><a href="#post-60143">Additional data to store in custom control instance</a></div>
    <div class="body">Thank you. I found yet another way: SetProp function:alright:</div>
    <div class="meta">Posted on 2002-09-30 08:30:41 by Vaxon</div>
   </div>
   <div class="post" id="post-60161">
    <div class="subject"><a href="#post-60161">Additional data to store in custom control instance</a></div>
    <div class="body">With custom controls, you use the extra window memory that is available with the WNDCLASSEX structure for the CreateWindowEx() function call. On win95, this is limited to 40 bytes but this is large enough to hold addressing of allocated memory if you need larger. You set this up with SetWindowLong() and access the memory with GetWindowLong().<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-09-30 10:50:15 by hutch--</div>
   </div>
   <div class="post" id="post-60233">
    <div class="subject"><a href="#post-60233">Additional data to store in custom control instance</a></div>
    <div class="body">Thanks, Four-F and Hutch!<br />I think I'll use the SetWindowLong.</div>
    <div class="meta">Posted on 2002-10-01 02:09:11 by Vaxon</div>
   </div>
  </div>
 </body>
</html>