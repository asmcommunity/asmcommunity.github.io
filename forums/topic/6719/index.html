<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Looks like another windblows sh*tty bug! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6719" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=6719">Looks like another windblows sh*tty bug!</a></p>
   <div class="post" id="post-48521">
    <div class="subject"><a href="#post-48521">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Hi,<br /><br />I've created an app witch monitors keystroke. It works well but I still have a problem:<br /><br />When I press CTRL-ALT-DEL on my Xp box my JournalHook Procedure seems to stop receiving windows messages and therefore stops recording keyz (thought the app don't crashes).<br /><br />Any ideas to get rid of that bug ?</div>
    <div class="meta">Posted on 2002-07-18 14:09:30 by Axial</div>
   </div>
   <div class="post" id="post-48541">
    <div class="subject"><a href="#post-48541">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Before you start blaming windows I suggest you take another look at your code.  The odds are against you.</div>
    <div class="meta">Posted on 2002-07-18 16:38:38 by MArtial_Code</div>
   </div>
   <div class="post" id="post-48542">
    <div class="subject"><a href="#post-48542">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">AFAIK that's not a bug, it's a security feature against password snooping.</div>
    <div class="meta">Posted on 2002-07-18 16:49:43 by Hiroshimator</div>
   </div>
   <div class="post" id="post-48558">
    <div class="subject"><a href="#post-48558">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">For Password &quot;snooping&quot; on WinNT/2K/XP just write your own GINA.DLL (not Gina Wild).</div>
    <div class="meta">Posted on 2002-07-18 16:53:42 by bazik</div>
   </div>
   <div class="post" id="post-48621">
    <div class="subject"><a href="#post-48621">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">It is not a bug, you are not supposed to hook the ctrl-alt-del sequence, due to its security implications. If you go to your %system32% directory, you will see a file called msgina32.dll. That is the file that handles that sequence.</div>
    <div class="meta">Posted on 2002-07-18 17:00:39 by sluggy</div>
   </div>
   <div class="post" id="post-48678">
    <div class="subject"><a href="#post-48678">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">In these next two posts are the screenshots of the exports from msgina.dll. As you can see, more than half of them are exported by ordinal only, good luck trying to work with that :grin:</div>
    <div class="meta">Posted on 2002-07-18 17:26:48 by sluggy</div>
   </div>
   <div class="post" id="post-48679">
    <div class="subject"><a href="#post-48679">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">and the second one:</div>
    <div class="meta">Posted on 2002-07-18 17:27:23 by sluggy</div>
   </div>
   <div class="post" id="post-48682">
    <div class="subject"><a href="#post-48682">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Thanks everyone ! :alright: <br /><br />Sluggy :<br /><br />I 'll do some research on that file !<br /><br />Regards.</div>
    <div class="meta">Posted on 2002-07-18 18:01:36 by Axial</div>
   </div>
   <div class="post" id="post-48694">
    <div class="subject"><a href="#post-48694">Looks like another windblows sh*tty bug!</a></div>
    <div class="body"><div class="quote"><em>I 'll do some research on that file !</em></div>Have fun checking it out :grin: Expect progress to be slow however, MS have been known to 'protect' certain key functions to prevent normal apps from Ring3 calling them, i.e. you have to be running at Ring 0, or be calling from certain other modules.</div>
    <div class="meta">Posted on 2002-07-18 20:08:43 by sluggy</div>
   </div>
   <div class="post" id="post-48705">
    <div class="subject"><a href="#post-48705">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Axial,<br /><br />Standard documentation for the JournalHook techniques say that Ctrl+Esc and Ctrl+Alt+DEL both terminate the hook so its actually behaving according to documentation. The normal termination of the technique is through Ctrl+Break but the two system based combinations over-ride the local application.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-07-18 22:19:38 by hutch--</div>
   </div>
   <div class="post" id="post-48717">
    <div class="subject"><a href="#post-48717">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">If anyone is interested, I can post some source for a minimal replacement of the GINA dll. It's written in PowerBASIC (and not by me), but it's easy to convert to assembly. Just didnt have the time yet :/<br /><br /><em>Edit: <a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/security/security/gina.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/security/security/gina.asp</a></em></div>
    <div class="meta">Posted on 2002-07-18 23:58:51 by bazik</div>
   </div>
   <div class="post" id="post-48718">
    <div class="subject"><a href="#post-48718">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Hutch:<br /><br />Thank you very much, <br />I got nuts with this dissassembly:grin: <br />I'll try KeyboardProc with a hook.dll.<br /><br />Bazik<br /><br />I'm interested !</div>
    <div class="meta">Posted on 2002-07-19 00:17:12 by Axial</div>
   </div>
   <div class="post" id="post-48724">
    <div class="subject"><a href="#post-48724">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Here it is. It's a really basic example, wich passes all unused functions to the original GINA dll and just shows Password &amp; Username after login.<br />This &quot;CALL DWORD&quot; thing is just a call to the function you loaded via GetProcAddress.<br />As mentioned above the code is not written by me (and I didn't have the time to translate it yet :( ). Better use something like VMWare or a second machine for testing... else you will trash your System :rolleyes: <br />Or install WinNT/2K/XP on a FAT32 disk so you could replace the corrupt DLL with the original from DOS.<br /><br /><br />P.S.: Before someone of the &quot;I know it better&quot;-Guys yells, you can also use NTFSDOS Pro for replacing the corrupt dll with the original one ;)<br /><br />P.P.S.: Or use Linux ;<br /><br />I better stop now before I confuse you even more :grin:</div>
    <div class="meta">Posted on 2002-07-19 01:02:45 by bazik</div>
   </div>
   <div class="post" id="post-48821">
    <div class="subject"><a href="#post-48821">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">Linux with NTFS? Oh yeah, very good idea with current versions of linux.<br />At least do yourself the favour and don't try to do write access ot NTFS<br />partitions. It might work... and it might trash your partition severely.<br /><br />If you're serious about rescuing NTFS stuff, get ERD commander from<br />winternals.</div>
    <div class="meta">Posted on 2002-07-19 09:02:29 by f0dder</div>
   </div>
   <div class="post" id="post-48822">
    <div class="subject"><a href="#post-48822">Looks like another windblows sh*tty bug!</a></div>
    <div class="body"><div class="quote"><br />Linux with NTFS? Oh yeah, very good idea with current versions of linux.<br />At least do yourself the favour and don't try to do write access ot NTFS<br />partitions. It might work... and it might trash your partition severely.<br /></div><br /><br />Hehe, I know... nothing is perfect! :tongue: <br />But serious, I never trashed a partition... even read/write access WinXP partitions work fine with the newest NTFS drivers.<br />I copied over 10 GB of Mp3 files from a XP NTFS partition to my XFS /home partition without trashing it ;)</div>
    <div class="meta">Posted on 2002-07-19 09:09:13 by bazik</div>
   </div>
   <div class="post" id="post-48826">
    <div class="subject"><a href="#post-48826">Looks like another windblows sh*tty bug!</a></div>
    <div class="body">well, copying 10 gigs of MP3s *from* NTFS is read-only... which ought to be safe :).<br />But really, be very careful if you're going to do write access... NTFS is an advanced<br />filesystem, not officially documented, and thus the linux drivers involve RE and<br />guessing. Especially the &quot;guessing&quot; part is not something I feel particularly comfortable<br />about when dealing with important data ;)</div>
    <div class="meta">Posted on 2002-07-19 09:32:11 by f0dder</div>
   </div>
  </div>
 </body>
</html>