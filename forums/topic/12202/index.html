<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>listview/treeview images with transparent background? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12202" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=12202">listview/treeview images with transparent background?</a></p>
   <div class="post" id="post-93730">
    <div class="subject"><a href="#post-93730">listview/treeview images with transparent background?</a></div>
    <div class="body">Hi<br />I have problem setting images in these two common controles, actually I manage to do it well but when I change windows appearance then image backgrounds become visible which is unwanted behaviour<br /><br />before changing appearance (cool)<br /><img src="http://www.70megs.com/mikky/images/22.jpg" /><br /><br />after changing appearance (yuck)<br /><img src="http://www.70megs.com/mikky/images/11.jpg" /><br /><br />you can see that background of hdd images is white, which is fine if control background is white but if one changes color of background (control panel-&gt;display-&gt;appearance) it does not look that neat anymore<br />any solutions?</div>
    <div class="meta">Posted on 2003-04-06 20:21:50 by Mikky</div>
   </div>
   <div class="post" id="post-93806">
    <div class="subject"><a href="#post-93806">listview/treeview images with transparent background?</a></div>
    <div class="body">You have to catch WM_SYSCOLORCHANGE and change background color for an image list <br /><br />and tree/list-view control.<br /><br />I do it like this for treeview:<br /><br /><pre><code>local bck&#58;COLORREF<br />. . .<br />.elseif eax == WM_SYSCOLORCHANGE<br />    mov bck, $invoke&#40;GetSysColor, COLOR_WINDOW&#41;<br />    invoke ImageList_SetBkColor, g_hImageListNrm, bck<br />    TreeView_SetBkColor g_hwndTreeView, bck</code></pre></div>
    <div class="meta">Posted on 2003-04-07 03:32:01 by Four-F</div>
   </div>
   <div class="post" id="post-93828">
    <div class="subject"><a href="#post-93828">listview/treeview images with transparent background?</a></div>
    <div class="body"><strong>Mikky</strong>: do you mean changing the color while your app is running or not? Four-F's code will work if your icons are transparent and you change the color scheme while your program is running but I think your icons aren't transparent.<br />Just use an imagelist and its AddMasked function to create one with transparent icons. <br /><br />Thomas</div>
    <div class="meta">Posted on 2003-04-07 06:09:17 by Thomas</div>
   </div>
   <div class="post" id="post-94054">
    <div class="subject"><a href="#post-94054">listview/treeview images with transparent background?</a></div>
    <div class="body">Hi guys,<br />Thomas I just wanted to make background of my images transparent on whatever color scheme<br />I will try out your suggestions now<br /><br />Also one more question about this two controles, they are somehow not being repainted always, for example when I add somthing to listview and then minimaze main window, and after I restore main window listview is not repainted or if you like refreshed<br /><br />this is part of main window with listview control with no items (cool)<br /><br /><img src="http://www.70megs.com/mikky/images/l1.jpg" /><br /><br />this is same place after I set to foreground some other window and then returned to this (yuck)<br /><br /><img src="http://www.70megs.com/mikky/images/l2.jpg" /><br /><br />you can see that right part of listview is not repainted, the place and size of other window that was foreground few seconds ago<br />I really dont know what is the problem, am I missing some style or extended style??<br />this does not happen with regular controls, like buttons<br />this listview and treeview are on tab control and they are created from resource (not sure if that has to do anything with this problem)</div>
    <div class="meta">Posted on 2003-04-07 19:40:44 by Mikky</div>
   </div>
  </div>
 </body>
</html>