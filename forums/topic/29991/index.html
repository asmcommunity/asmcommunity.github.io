<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>a question about segment-override in Intel 64 architecture - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29991" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29991">a question about segment-override in Intel 64 architecture</a></p>
   <div class="post" id="post-211704">
    <div class="subject"><a href="#post-211704">a question about segment-override in Intel 64 architecture</a></div>
    <div class="body">Can we do segment-override any way we want in Intel 64 mode(IA-32e)?<br /><br />Is the following assembly line valid? <br />mov SS:, EAX<br /><br /></div>
    <div class="meta">Posted on 2010-05-15 01:52:29 by logicman112</div>
   </div>
   <div class="post" id="post-211717">
    <div class="subject"><a href="#post-211717">Re: a question about segment-override in Intel 64 architecture</a></div>
    <div class="body">-----&gt; <a target="_blank" href="http://wiki.osdev.org/X86-64#Segmentation_in_Long_Mode">x86-64 @ OSDev.org Wiki</a> &lt;-----</div>
    <div class="meta">Posted on 2010-05-15 13:12:56 by SpooK</div>
   </div>
   <div class="post" id="post-211875">
    <div class="subject"><a href="#post-211875">Re: a question about segment-override in Intel 64 architecture</a></div>
    <div class="body">If an instruction uses base registers RSP/RBP and uses a segment override prefix to<br />specify a non-SS segment, a canonical fault generates a #GP (instead of an #SF). In<br />64-bit mode, only FS and GS segment-overrides are applicable in this situation.<br />Other segment override prefixes (CS, DS, ES and SS) are ignored. Note that this also<br />means that an SS segment-override applied to a “non-stack” register reference is<br />ignored. <br /><br />I copied some lines from Intel manual in the above. What do they mean? Overriding segments in 64-bit mode some has some limits?&nbsp;  </div>
    <div class="meta">Posted on 2010-05-30 23:41:29 by logicman112</div>
   </div>
   <div class="post" id="post-211877">
    <div class="subject"><a href="#post-211877">Re: a question about segment-override in Intel 64 architecture</a></div>
    <div class="body">When using SS results in addressing outside of the canonical range, it generates #SS.<br /><br />When using FS or GS results in addressing outside of the canonical range, it generates #GP.</div>
    <div class="meta">Posted on 2010-05-31 00:11:59 by SpooK</div>
   </div>
   <div class="post" id="post-211878">
    <div class="subject"><a href="#post-211878">Re: a question about segment-override in Intel 64 architecture</a></div>
    <div class="body">In short, it means that you shold use SS with &#039;stack&#039; GP registers (sp/bp) for stack instructions and other segment registers with other non-stack GP registers for other instructions :P Makes sense, huh? ;) Otherwise you may get non-intuitive faults.</div>
    <div class="meta">Posted on 2010-05-31 00:16:16 by ti_mo_n</div>
   </div>
  </div>
 </body>
</html>