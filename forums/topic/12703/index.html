<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>pcx encode and decode - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12703" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=12703">pcx encode and decode</a></p>
   <div class="post" id="post-98180">
    <div class="subject"><a href="#post-98180">pcx encode and decode</a></div>
    <div class="body">hello:<br /> i am a very newer .i come here first<br />i write a pcx progam with in win32asm.i hope know about programer with in winasm and make friend.i am poor<br />now but i very want write program with in win32asm . i dont why,<br />best regard your every one</div>
    <div class="meta">Posted on 2003-04-20 09:14:14 by bgcq007</div>
   </div>
   <div class="post" id="post-98186">
    <div class="subject"><a href="#post-98186">pcx encode and decode</a></div>
    <div class="body">Err do you mind explaining how to use your work?  There is no executable in the file.<br /><br />What exactly are you loading and saving, and why?  :confused:<br /><br />:NaN:</div>
    <div class="meta">Posted on 2003-04-20 09:34:43 by NaN</div>
   </div>
   <div class="post" id="post-98364">
    <div class="subject"><a href="#post-98364">pcx encode and decode</a></div>
    <div class="body">Nice work :)<br />He's loading and saving bmp,jpg,gif, tif, pcx and png files, as well as scaling , rotating and blah, a file format converter and image editor without libsupport = NICE WORK DUDE :)<br />I don't care that you are poor. <br />Most programmers STAY poor !!! :tongue: <br />Your source may be a bit messy but I think you show talent.</div>
    <div class="meta">Posted on 2003-04-21 07:17:39 by Homer</div>
   </div>
   <div class="post" id="post-98497">
    <div class="subject"><a href="#post-98497">only pcx</a></div>
    <div class="body">i only encode and decode pcx.i want to work about gif,tif and jpg.<br />i write some common in chinese,later, i will use in english replace.<br />run the compile ,it will make a img.exe program ,it need ml.exe link.exe.<br />hope to know some programer ,some friend.</div>
    <div class="meta">Posted on 2003-04-21 23:50:49 by bgcq007</div>
   </div>
   <div class="post" id="post-99118">
    <div class="subject"><a href="#post-99118">pcx encode and decode</a></div>
    <div class="body"><div class="quote"><br />Nice work :)<br />He's loading and saving bmp,jpg,gif, tif, pcx and png files, as well as scaling , rotating and blah, a file format converter and image editor without libsupport = NICE WORK DUDE :)<br />I don't care that you are poor. <br />Most programmers STAY poor !!! :tongue: <br />Your source may be a bit messy but I think you show talent. </div><br /><br />IF you think his code is messy you don't want to see mine :eek:</div>
    <div class="meta">Posted on 2003-04-24 15:22:56 by x86asm</div>
   </div>
   <div class="post" id="post-188791">
    <div class="subject"><a href="#post-188791">Re: pcx encode and decode</a></div>
    <div class="body">can anyone see the attachment in this post?&nbsp; if not, does anyone have a pcx decoder source that returns a hbitmap?</div>
    <div class="meta">Posted on 2007-04-09 18:58:54 by localmotion34</div>
   </div>
   <div class="post" id="post-188797">
    <div class="subject"><a href="#post-188797">Re: pcx encode and decode</a></div>
    <div class="body">The attachments are gone, probably due to auto-pruning.<br /><br />PCX decoding is pretty simple, shouldn&#39;t be hard to write some routine from a copy of the specs. Heck, even I was able to do it ~10 years ago :p<br /></div>
    <div class="meta">Posted on 2007-04-10 01:27:57 by f0dder</div>
   </div>
   <div class="post" id="post-188798">
    <div class="subject"><a href="#post-188798">Re: pcx encode and decode</a></div>
    <div class="body">Anything prior to 2005, the attachments are probably missing, but this due to older website/database attacks on the older forum software.</div>
    <div class="meta">Posted on 2007-04-10 01:53:00 by SpooK</div>
   </div>
   <div class="post" id="post-188799">
    <div class="subject"><a href="#post-188799">Re: pcx encode and decode</a></div>
    <div class="body">localmotion34, is there any particular reason for you to use PCX? PNG is much better and it&#39;s supported by the GDI+, so you get PNG (de)compression with almost no effort -- about 10 lines of code in C++ to get a HBITMAP handle from a PNG/GIF/JPEG/TIFF image.</div>
    <div class="meta">Posted on 2007-04-10 01:58:29 by ti_mo_n</div>
   </div>
   <div class="post" id="post-188800">
    <div class="subject"><a href="#post-188800">Re: pcx encode and decode</a></div>
    <div class="body"><div class="quote"><br />localmotion34, is there any particular reason for you to use PCX? PNG is much better and it&#39;s supported by the GDI+, so you get PNG (de)compression with almost no effort -- about 10 lines of code in C++ to get a HBITMAP handle from a PNG/GIF/JPEG/TIFF image.<br /></div><br /><br />I am writing an image decoding package that deals with many, many formats.&nbsp; i cant stand Freeimage because it takes 14 lines of code to load an image, which is a freeimage bitmap, and then convert it to a hbitmap for use with Windows.&nbsp; i am writing decoders that load an image from a filename and always return a valid hbitmap.&nbsp; <br /><br />the PCX decoder isnt working so well for me.&nbsp; i was just wodering of ahyone had actual win32 source that returned a hbitmap, and not just displayed it via VGA like all the examples out there already.&nbsp; </div>
    <div class="meta">Posted on 2007-04-10 06:32:38 by localmotion34</div>
   </div>
   <div class="post" id="post-188801">
    <div class="subject"><a href="#post-188801">Re: pcx encode and decode</a></div>
    <div class="body">Do you need to support all the esoteric pcx additions, or just 8bpp palettized versions?<br /></div>
    <div class="meta">Posted on 2007-04-10 16:59:29 by f0dder</div>
   </div>
   <div class="post" id="post-188802">
    <div class="subject"><a href="#post-188802">Re: pcx encode and decode</a></div>
    <div class="body">id like to be able to support most versions.&nbsp; however, its the stupid RLE encoding that is killing me.&nbsp; i cant seem to accurately decode each scanline and realign it into a bitmap correctly.&nbsp; all i get is complete garbage for a bitmap.&nbsp; <br /><br />i think the variations of each PCX dont rely on differences in RLE encoding, but rather how many planes there are as well as if a palette is included or not.&nbsp; i just need to get the scanlines decoded properly first.&nbsp; if anyone can provide an example, im all ears.&nbsp; </div>
    <div class="meta">Posted on 2007-04-10 17:29:48 by localmotion34</div>
   </div>
   <div class="post" id="post-188803">
    <div class="subject"><a href="#post-188803">Re: pcx encode and decode</a></div>
    <div class="body">Well, what I can dig up from my archives is some 100% undocumented <strong>crappy</strong> ~10 years old 16bit pascal-inline-assembly code, hardcoded for 320x200x8bpp, for your amusement:<br /><pre><code><br />procedure unpackpcx(var src,dst); assembler;<br />asm<br />&nbsp; push ds<br />&nbsp; cld<br />&nbsp; xor cx,cx<br />&nbsp; les di,dst<br />&nbsp; lds si,src<br />&nbsp; mov dx,64000<br />@mainloop:<br />&nbsp; mov cl,ds:<br />&nbsp; and cl,0c0h<br />&nbsp; cmp cl,0c0h<br />&nbsp; jz @compressed<br />&nbsp; movsb<br />&nbsp; dec dx<br />&nbsp; jmp @next<br />@compressed:<br />&nbsp; mov cl,ds:<br />&nbsp; and cl,03fh<br />&nbsp; sub dx,cx<br />&nbsp; inc si<br />&nbsp; lodsb<br />&nbsp; rep stosb<br />@next:<br />&nbsp; or dx,dx<br />&nbsp; jnz @mainloop<br />@fin:<br />&nbsp; pop ds<br />end;<br /></code></pre><br /><br />...I know that this used to work ;). The scheme is pretty simple, anyway:<br /><br /><div class="quote"><br />Scan line 0: 	RRR...<br />		GGG...<br />		BBB...<br />		III...<br />Scan line 1: 	RRR...<br />		GGG...<br />		BBB...<br />		III...<br />(etc.)<br /><br />The encoding method is:<br /><br />&nbsp;  FOR&nbsp; each&nbsp; byte,&nbsp; X,&nbsp; read from the file<br />	IF the top two bits of X are&nbsp; 1&#39;s then<br />		count = 6 lowest bits of X<br />		data = next byte following X<br />	ELSE<br />		count = 1<br />		data = X<br /></div><br />(for 8bpp you obviously don&#39;t have R,G,B,I planes. The illustration just means that PCX encoding is line-based, and per line has the bitplanes separated and RLE encoded).<br /></div>
    <div class="meta">Posted on 2007-04-10 17:43:48 by f0dder</div>
   </div>
  </div>
 </body>
</html>