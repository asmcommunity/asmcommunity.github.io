<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>SSE2 and XMM register trouble .. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17099" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17099">SSE2 and XMM register trouble ..</a></p>
   <div class="post" id="post-132637">
    <div class="subject"><a href="#post-132637">SSE2 and XMM register trouble ..</a></div>
    <div class="body">Hallo, <br /><br />there is a problem using SSE2 instructions with masm32, <br />particular version 6.14.8444. assembling:<br /><pre><code><br />pavgb mm0, mm1<br /></code></pre><br />works fine because it's SSE/MMX extension, but<br /><pre><code><br />pavgb xmm0, xmm1<br /></code></pre><br />assembles fine but results in the same opcode without the leading 066h.<br />Therefore it is unsusable because I need 660FE0C1h instead of 0FE0C1h using:<br /><pre><code><br />xorpd xmm0, xmm1<br /></code></pre><br />doesn't assemble at all with Error A2008. It does not recognize the xmm.<br /><br />Does anybody have some ideas on how to do some steps forward <br />without using agners macros for this? Is there another version of ml.exe <br />doing this right?<br /><br />Even if somebody have the same problem without solution I'd like to hear.<br /><br />Thanks in advance, Miracle</div>
    <div class="meta">Posted on 2004-02-05 06:59:59 by miracle</div>
   </div>
   <div class="post" id="post-132641">
    <div class="subject"><a href="#post-132641">SSE2 and XMM register trouble ..</a></div>
    <div class="body">if all else fails, split out the routines requiring SSE2 to separate modules and assemble with another assembler - I suppose fasm handles it correctly, otherwise privalov will surely fix it ^_^</div>
    <div class="meta">Posted on 2004-02-05 07:18:42 by f0dder</div>
   </div>
   <div class="post" id="post-132643">
    <div class="subject"><a href="#post-132643">SSE2 and XMM register trouble ..</a></div>
    <div class="body">did you put .xmm at the start of your listing? it works with 7.10.2179 (from ddk). i know your version has problems with sse2... bun sse should be ok.<br /><br />see <br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=9534">http://www.asmcommunity.net/board/index.php?topic=9534</a></div>
    <div class="meta">Posted on 2004-02-05 07:19:25 by stormix</div>
   </div>
   <div class="post" id="post-132644">
    <div class="subject"><a href="#post-132644">SSE2 and XMM register trouble ..</a></div>
    <div class="body">Use a later verison of ml (like ml7). If I am not wrong, ml 6.14 does not fully support sse/sse2.</div>
    <div class="meta">Posted on 2004-02-05 07:21:25 by roticv</div>
   </div>
   <div class="post" id="post-132647">
    <div class="subject"><a href="#post-132647">SSE2 and XMM register trouble ..</a></div>
    <div class="body">Hmmm... <br /><br />f0dder:<br /><br />I was hoping to avoid exactly this scenario for several reasons. That way <br />I'll go to construct some macros generating the correct opcodes.<br /><br />stormix: <br /><br />yes, .XMM was used<br /><br />roticv:<br /><br />I'm giving the newer versions (7.10) a try now.<br /><br />usually I don't use masm at all. Unfortunately the current masm32 packages <br />includes the (buggy) 6.14.8444 so be warned of trouble using SSE2. :-(<br /><br />Thanks Miracle</div>
    <div class="meta">Posted on 2004-02-05 07:28:44 by miracle</div>
   </div>
   <div class="post" id="post-132663">
    <div class="subject"><a href="#post-132663">SSE2 and XMM register trouble ..</a></div>
    <div class="body">afaik 6.14 is older than SSE2 itself, so no wonder it doesn't support it properly. No bug, just old software.<br />6.14 was one of the first to add SSE itself, iirc.</div>
    <div class="meta">Posted on 2004-02-05 08:18:52 by Henk-Jan</div>
   </div>
  </div>
 </body>
</html>