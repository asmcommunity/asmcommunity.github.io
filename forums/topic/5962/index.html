<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>What affects the memory usage? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5962" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=5962">What affects the memory usage?</a></p>
   <div class="post" id="post-42673">
    <div class="subject"><a href="#post-42673">What affects the memory usage?</a></div>
    <div class="body">Why is a simple &quot;Hello world!&quot;-messagebox eating almost 1.5 MB of my ram? Why not 2.5 kB (the exe size)? :confused: <br /><br />/Delight</div>
    <div class="meta">Posted on 2002-06-11 14:10:20 by Delight</div>
   </div>
   <div class="post" id="post-42676">
    <div class="subject"><a href="#post-42676">Re: What affects the memory usage?</a></div>
    <div class="body"><div class="quote"><br />Why is a simple &quot;Hello world!&quot;-messagebox eating almost 1.5 MB of my ram? Why not 2.5 kB (the exe size)? :confused: <br /><br />/Delight </div><br /><br /><br />Headline:<br /><br />and finally after years of mistreatment 'hello world' finally turns bad!!!<br />:grin: :grin: <br /><br />kinda hard to answer without some source code, maybe you are allocating mem, or loading a library?</div>
    <div class="meta">Posted on 2002-06-11 14:14:29 by Terab</div>
   </div>
   <div class="post" id="post-42679">
    <div class="subject"><a href="#post-42679">What affects the memory usage?</a></div>
    <div class="body"><div class="quote">and finally after years of mistreatment 'hello world' finally turns bad!!! </div> <br />hehe...:grin:<br /><br />nah, it's just a small app thats showing a messagebox and then exits. Nothing more.<br /><br /><strong>edit:</strong> I just tried the &quot;minimum&quot; demo that's comes with masm32 and it's almost as bad as my test, 1428 kB!<br /><br />/Delight</div>
    <div class="meta">Posted on 2002-06-11 14:19:17 by Delight</div>
   </div>
   <div class="post" id="post-42681">
    <div class="subject"><a href="#post-42681">What affects the memory usage?</a></div>
    <div class="body">what libs and incs are you including? maybe something is loading something else up at runtime.<br /><br />seems kinda strange</div>
    <div class="meta">Posted on 2002-06-11 14:24:56 by Terab</div>
   </div>
   <div class="post" id="post-42683">
    <div class="subject"><a href="#post-42683">What affects the memory usage?</a></div>
    <div class="body">I'm using kernel32 and user32 and the only imported APIs (checked after compile) are MessageBox and ExitProcess...<br /><br />/Delight</div>
    <div class="meta">Posted on 2002-06-11 14:27:49 by Delight</div>
   </div>
   <div class="post" id="post-42684">
    <div class="subject"><a href="#post-42684">What affects the memory usage?</a></div>
    <div class="body">Memory usage doesn't say much. A lot of stuff goes on internally, libraries are loaded (kernel32/user32 etc), the default heap memory is allocated and much more things windows needs internally.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-06-11 14:27:51 by Thomas</div>
   </div>
   <div class="post" id="post-42689">
    <div class="subject"><a href="#post-42689">What affects the memory usage?</a></div>
    <div class="body">Ok, that explains it, but still - 1428 kB??? That sounds way too much for a 1.5 kB program<br /><br /><br />/Delight</div>
    <div class="meta">Posted on 2002-06-11 14:41:04 by Delight</div>
   </div>
   <div class="post" id="post-42695">
    <div class="subject"><a href="#post-42695">What affects the memory usage?</a></div>
    <div class="body">Don't forget a thread uses 1Mb of stack space by default.</div>
    <div class="meta">Posted on 2002-06-11 14:56:30 by Dr. Manhattan</div>
   </div>
   <div class="post" id="post-42699">
    <div class="subject"><a href="#post-42699">What affects the memory usage?</a></div>
    <div class="body"><div class="quote"><br />Don't forget a thread uses 1Mb of stack space by default. </div><br /><br />I really didnt know that.<br /><br />is that for all threads?  even ones inside your program?</div>
    <div class="meta">Posted on 2002-06-11 15:00:28 by Terab</div>
   </div>
   <div class="post" id="post-42724">
    <div class="subject"><a href="#post-42724">What affects the memory usage?</a></div>
    <div class="body">Don't be so alarmed. A *lot* of the memory usage is through shared<br />DLLs. Also, don't worry about thread stack space, only worry about<br />*committed* space (usually 4k is committed at a time when accessed,<br />both for stack and heap, but you can adjust this through linker settings).<br /><br />So while the memory usage might seem like a lot, it's not too bad.<br />Ok, reserved (and not committed) memory regions will take a little<br />space because of page tables - but that's only like 4 bytes per 4k.<br /><br />So... worry about committed memory... and, in case you have fallen<br />into the folly of compressing your executables, any large static<br />buffers.</div>
    <div class="meta">Posted on 2002-06-11 16:07:15 by f0dder</div>
   </div>
   <div class="post" id="post-42765">
    <div class="subject"><a href="#post-42765">What affects the memory usage?</a></div>
    <div class="body">hmm almost 1.5mb...I have a proggy that has a window, 3 toolbar bitmaps, and another customized open dialog box, Plus it has 10 sub classed edit controls, all just occupies 1.3 - 1.5 MB at most...sometimes it even goes lower than 1mb, sometimes around 800kb, does anybody have any idea, why this is happening? :confused:<br /><br /><br />I do have witnessed to that 1.5mb MessageBox....</div>
    <div class="meta">Posted on 2002-06-11 19:49:56 by stryker</div>
   </div>
   <div class="post" id="post-42769">
    <div class="subject"><a href="#post-42769">What affects the memory usage?</a></div>
    <div class="body">Run RadASM 800k,<br />Load a project 4MB,<br />Close big app (M$ Word),<br />Now down to 672k. :)</div>
    <div class="meta">Posted on 2002-06-11 21:05:19 by bitRAKE</div>
   </div>
   <div class="post" id="post-42771">
    <div class="subject"><a href="#post-42771">What affects the memory usage?</a></div>
    <div class="body">That GetOpenFileName API is a memory hog. That's why I had my own customized open dialog without the extra baggage, GetOpenFileName carries... of course with less functionality. :tongue:</div>
    <div class="meta">Posted on 2002-06-11 21:16:18 by stryker</div>
   </div>
   <div class="post" id="post-42786">
    <div class="subject"><a href="#post-42786">What affects the memory usage?</a></div>
    <div class="body">I've said it before and I'll say it again - allocated memory is not a<br />problem, committed memory is. Yes, using DLLs like shell32.dll will<br />seemingly make your app use a very large extra amount of memory,<br />but very little of this has physical memory overhead.<br /><br />Also, I do not recommend using SetProcessWorkingSetSize to trim<br />your &quot;memory usage&quot;, as it might cause your app to have pages<br />discarded and/or swapped out.</div>
    <div class="meta">Posted on 2002-06-11 23:44:59 by f0dder</div>
   </div>
   <div class="post" id="post-42809">
    <div class="subject"><a href="#post-42809">What affects the memory usage?</a></div>
    <div class="body">By the way, I've been looking for some time for a utility that displays how much physical memory, and how much on the swap file is allocated for each process.<br /><br />Does anybody know of such an utility?</div>
    <div class="meta">Posted on 2002-06-12 03:35:17 by Maverick</div>
   </div>
   <div class="post" id="post-42812">
    <div class="subject"><a href="#post-42812">What affects the memory usage?</a></div>
    <div class="body">invoke SetProcessWorkingSetSize, hProcess, -1, -1<br /><br /><br />:) <br /><br /><br /><br />But I think it doesn't work on 9x/ME (don't have API reference here)</div>
    <div class="meta">Posted on 2002-06-12 03:46:29 by bazik</div>
   </div>
   <div class="post" id="post-42815">
    <div class="subject"><a href="#post-42815">What affects the memory usage?</a></div>
    <div class="body">Also may be used:<br /><br /><pre><code><br />	call GetCurrentProcess<br />	call EmptyWorkingSet,eax<br /></code></pre><br />I am use it for backround program (ex. control FM-radio - 208Kb memory in use).</div>
    <div class="meta">Posted on 2002-06-12 04:16:08 by Nexo</div>
   </div>
   <div class="post" id="post-42816">
    <div class="subject"><a href="#post-42816">What affects the memory usage?</a></div>
    <div class="body">I only now of FILEMON.EXE, a nice VxD.<br /><br />I'm not sure if that can help though.<br /><br />You can get it from:  <br /><a target="_blank" href="http://www.sysinternals.com/ntw2k/utilities.shtml">http://www.sysinternals.com/ntw2k/utilities.shtml</a></div>
    <div class="meta">Posted on 2002-06-12 04:28:42 by slop</div>
   </div>
  </div>
 </body>
</html>