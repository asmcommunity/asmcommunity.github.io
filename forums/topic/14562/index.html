<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>filesize help (MAXWORD+1)? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14562" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14562">filesize help (MAXWORD+1)?</a></p>
   <div class="post" id="post-112647">
    <div class="subject"><a href="#post-112647">filesize help (MAXWORD+1)?</a></div>
    <div class="body">I am using WIN32_FIND_DATA to get nFileSizeHigh &amp; nFileSizeLow for files.  All fine and good but once I get passed 4.3 gigs its wrong, to be expected though unless I play by ms rules. The formula they provide is <br /><br />(nFileSizeHigh * (MAXDWORD+1)) + nFileSizeLow<br /><br />thats where my problem is.  it used to look like<br /><br />(nFileSizeHigh * MAXDWORD) + nFileSizeLow<br /><br />so on windows xp if I use what it was my file sizes for over 4.3 gigs are wrong when matching up to what windows says about it but I can't seem to figure out ho to use MAXDWORD+1 since it pops back to 0 if I do.<br /><br />Any help would be great.</div>
    <div class="meta">Posted on 2003-08-01 03:27:32 by Betrayed</div>
   </div>
   <div class="post" id="post-112648">
    <div class="subject"><a href="#post-112648">filesize help (MAXWORD+1)?</a></div>
    <div class="body">The original Windows API documentation and SDK had an error in it. The <em>(nFileSizeHigh * (MAXDWORD+1)) + nFileSizeLow</em> is the right formula. To use it just multiply nFileSizeHigh by MAXDWORD and add nFileSizeHigh to the result. So the formula becomes (basic algebra)<br /><br /><strong><em>(nFileSizeHigh * MAXDWORD) + nFileSizeHigh + nFileSizeLow</em></strong></div>
    <div class="meta">Posted on 2003-08-01 03:39:11 by donkey</div>
   </div>
  </div>
 </body>
</html>