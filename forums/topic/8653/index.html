<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Need help on labels in addressing modes - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8653" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=8653">Need help on labels in addressing modes</a></p>
   <div class="post" id="post-63576">
    <div class="subject"><a href="#post-63576">Need help on labels in addressing modes</a></div>
    <div class="body">Hi everybody,<br /><br />It's been a while, but I'm back learning assembler again.<br />I've just spent a few days pouring over all the information about the various addressing modes - I think I've more or less got it all sorted, but there is one aspect which is REALLY confusing me.<br /><br />In Hutch's &quot;Introduction to 32 bit Assembler&quot;, &quot;Data Types in Registers&quot; he says:<br /><br />mov edx, lpMemvar   ; copy variable address into EDX<br /><br />...but then a few lines later we have:<br /><br />mov eax, lpMem   ; copy memory value into register<br /><br />Now, as I understand it, to the assembler (MASM) a label such as a code label or the identifier for a variable IS an address, but wherever I look I find conflicting information about whether an instruction such as MOV (as in the above examples) copies the address of the variable, or the value of the variable which is stored at that address.<br /><br />A fairly simple question, but a pretty fundamental one I would say.<br /><br />Could anyone please help with a definitive answer on this.  Maybe also then, on the use of the &quot;offset&quot; operator - when, why etc.</div>
    <div class="meta">Posted on 2002-10-26 12:35:24 by Hamper</div>
   </div>
   <div class="post" id="post-63591">
    <div class="subject"><a href="#post-63591">Follow up</a></div>
    <div class="body">I've done some more swotting-up on the subject.<br /><br />I guess that Hutch's (and a few others') notes are based upon you somehow knowing that the variable names used are to be &quot;taken as read&quot; as having already been initialized with certain values, e.g. the effective address of a variable in memory.  If that's so, then OK, but it could be clearer.  Learning assembler is tricky enough as it is.<br /><br />I still can't see any point to the directive OFFSET though.  The instruction LEA seems to do everything that OFFSET can do, and without adding another layer of complication onto the assembler.  Is OFFSET just another &quot;bells and whistles&quot; construct that doesn't actually do anything that you can't do anyway?  Does it encode based on the use of the LEA instruction upon assembly?  Are the following statements the same, in effect?<br /><br />     myString byte &quot;Hello&quot;,0<br /><br />     mov ebx, offset myString<br />     lea ebx, myString</div>
    <div class="meta">Posted on 2002-10-26 16:02:41 by Hamper</div>
   </div>
   <div class="post" id="post-63625">
    <div class="subject"><a href="#post-63625">Need help on labels in addressing modes</a></div>
    <div class="body">lea ebx,myString<br /><br />and<br /><br />mov ebx,OFFSET myString<br /><br />Give the same results but in principle, they are different. If i am not wrong, OFFSET is a precompiler method, while using lea it takes up cpu time. When you using ADDR myString ,MASM expands it to lea eax,myString and later push eax.</div>
    <div class="meta">Posted on 2002-10-26 20:19:29 by roticv</div>
   </div>
  </div>
 </body>
</html>