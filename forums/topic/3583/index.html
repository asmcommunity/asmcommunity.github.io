<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Help with corrupted libraries - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3583" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3583">Help with corrupted libraries</a></p>
   <div class="post" id="post-23938">
    <div class="subject"><a href="#post-23938">Help with corrupted libraries</a></div>
    <div class="body">Hello all,<br /><br />I need some help with corrupted libraries. I am trying to insert an exe inside another.<br /><br />For this i created a library through the target executable, but the import libraries are all corrupted.<br /><br />With the generated lib, i inserted it within my little code (in masm), and it worked (i mean compiled ok).<br /><br />But the import library is all corrupted. I don't want to use an import rebuilder to correct. I want some code that relink the libraries properly.<br /><br />Let's say that, on the lib file, therer something like this:<br /><br />jmp_J_ ; It should jmp, to Getmodulehandle.<br /><br />My question is, how can i if i made a library fix to undetermined jumps. ?<br /><br />I am trying to make a include file with something like that<br /><br />jmp_J PROTO<br /><br />and an asssembler file (to create the library), like this:<br /><br />jmp_J_ Proc<br /><br />jmp dword <br /><br />jmp_J_ end<br /><br /><br />What can i do to make a fix library ? And if the &quot;J&quot; function is not a word, but an adress ? How can i make an include file for it, or correct the symbols ?<br /><br /><br />Best regards,<br /><br />Beyond2000!</div>
    <div class="meta">Posted on 2002-02-11 20:26:36 by Beyond2000!</div>
   </div>
   <div class="post" id="post-23959">
    <div class="subject"><a href="#post-23959">coding need</a></div>
    <div class="body">I don't know if i made myself clear. <br /><br />Check out my last post (new included libraries for masm32), in one example i inserted a full dll inside the main code, making the program works fine. <br />I want to do the same thing, but, instead inseting a dll, i am trying to insert a executable file. <br /><br />I could be a good thing to analyse how program works. Inserting an executable inside an masmed file, can give more clues about others procedures <br /><br />for example, let's say that you have an app that has some obfsucation code (made with borland C++, or delphi), with a lot of junk coding . <br /><br />You you create a file in asm, that has the beginning of the procedure, and insert a library file (full) from this executable, you can be able to analyse how the program works, and bypassing the junk code without too much problem. <br /><br />It can be done with an library from a dll...but the hard is to make the same with an executable, because the library file, remains corrupted. (Try using dll2lib to convert executable to lib)</div>
    <div class="meta">Posted on 2002-02-12 00:23:24 by Beyond2000!</div>
   </div>
   <div class="post" id="post-23990">
    <div class="subject"><a href="#post-23990">Help with corrupted libraries</a></div>
    <div class="body">Be careful... this topic is balancing on the edge. I can see the usefulness<br />and legality of placing .DLLs inside your own code (dll2lib style) to<br />avoid multiple files... but placing EXE files inside your own exe to<br />&quot;analyze&quot;? This smells a bit. Try to refine your purpose a bit so we<br />can see this is a &quot;kosher&quot; post and not one that has to go away.<br /><br /><br />I removed your duplicate post, &quot;coding needed&quot;.<br /></div>
    <div class="meta">Posted on 2002-02-12 09:51:53 by f0dder</div>
   </div>
   <div class="post" id="post-24000">
    <div class="subject"><a href="#post-24000">Ok</a></div>
    <div class="body">I guess i know what you are saying.<br /><br />Avoying multiples files inserting dlls on it, i did it. My question about inserting a  executable is exactly what i said, i am trying to analyse the functionality of programs in order to make a kinda universal converter for masm.<br /><br />I am using as my target W32dasm from urbanik. I am trying to insert it inside another exe. I inted to rebuild interilly in masm, in order to improve their functions.<br /><br />The disassembler process can be inserted inside a masm code, in a simple way. So, i analysed the program a lot, and it is very possible to make a complete disassembler.<br /><br />One that can be able to convert any file to an masmed language (Like sourcer or even IdaPro), but with additional functions, like, a save as asm, removing Visual C; C++; C; Delphi garbage, dumping files from memory to disk; unpacker for several packers;; disassembling obj and other files; using flirt technology etc, enabling compiler options, creating resources etc. <br /><br />What i am trying to do is create a new disassembler, based on the architecture of w32dasm, IdaPro, Sourcer, Pedasm, PExplorer etc...<br /><br />I intend to release with open source, so everybody can alter the main code without any problems.<br /><br /><br />This post is not for viruses creation or illegal rights, it's exactly the opposite.<br /><br />Insereting an entire executable inside another (Don't matter if it has 1 megabyte or more), can be usefull to exactly analyse their functions, and rebuild any program written in a language different then masm.<br /><br />Visual C++6.0 programs are relativelly easy to convert, because the Main Function (Winmain) is masmed builded, and after this function (sometimes) all is garbage. So you can transform a program with 100 Kb and recompile it to just 15 kb...etc...<br /><br />I did it once with a program called Codedasm, i analyse the code and recreate it in masm version, and other little samples in visual c++6.0 too.<br /><br />The recompilation of other languages is kinda a hard work, but it can be done using flirt recognition inside a disassembler, and a code able to remove junk stuff (Like the exceptions in C++ or C).<br /><br />I''m sorry if my last post was not clearly enough, my intentions are exaclty these one, in other hands : analysing the functionalitty of a specific program (W32dasm) to rebuild it in masm and recreate another one to fully transform any file (Or at least make the process easier) in masmed version).<br /><br />.Just like the masm version of wordedit, but for a renewed disassembler.<br /><br />So, instead a disassembler writes something like:<br /><br />push dword [121242h]<br /><br />it can be rewritten as<br /><br />dd nana (on the data section)<br />push nana (on the code section)<br /><br />and many other stuffs like making the calls to api looks like invokable stuff, etc...<br /><br />Best regards,<br /><br />Beyond2000!</div>
    <div class="meta">Posted on 2002-02-12 11:12:43 by Beyond2000!</div>
   </div>
  </div>
 </body>
</html>