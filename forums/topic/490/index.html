<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>.MMX doesnt work - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=490" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=490">.MMX doesnt work</a></p>
   <div class="post" id="post-2921">
    <div class="subject"><a href="#post-2921">.MMX doesnt work</a></div>
    <div class="body">I am trying to find fast memory copy algo.I have found couple of them(including one posted on this board) and they have mmx opcodes in it.I have tried to assemble them but they give errorsFor example I have have this memcopy code<br /><pre><code><br />mem5 proc<br />		mov edi,d;<br />		mov esi,s;<br />		mov ecx,size;<br />		shr ecx,4;<br />lx&#58;<br />		movq mm0,&#91;esi&#93;;<br />		movq mm1,&#91;esi+8&#93;;<br />		lea esi,&#91;esi+16&#93;;<br />		movntq &#91;edi&#93;,mm0;<br />		movntq &#91;edi+8&#93;,mm1;<br />		lea edi,&#91;edi+16&#93;;<br />		dec ecx;<br />		jnz lx;<br />mem5 endp<br /></code></pre><br />I have put <br />.586<br />.MMX<br />to top of my source code however it doesnt accept movntq instructions.I have also tried <br />.686<br />.XMM<br />I have Masm 6.14.84.44 which comes with mas32 packge<br />Thanks</div>
    <div class="meta">Posted on 2001-08-03 17:11:47 by LaptoniC</div>
   </div>
   <div class="post" id="post-2925">
    <div class="subject"><a href="#post-2925">.MMX doesnt work</a></div>
    <div class="body">.586p<br />.XMM<br /><br />...did it for me, same version.  <a target="_blank" href="http://www.sgi.com/developers/library/resources/asc_cpu.html">Good Reading.</a><br />448.427564 mb/sec is my best memcpy. :)</div>
    <div class="meta">Posted on 2001-08-03 17:55:40 by bitRAKE</div>
   </div>
   <div class="post" id="post-2952">
    <div class="subject"><a href="#post-2952">Thanks it works now</a></div>
    <div class="body">Thanks.I made a silly error I forgot to remove .MMX directive ie<br />it was<br /><br />.686<br />.XMM<br />.MMX<br /><br />I dunno why I havent removed it.<br /><br /><br /><br />:stupid:</div>
    <div class="meta">Posted on 2001-08-04 05:07:29 by LaptoniC</div>
   </div>
  </div>
 </body>
</html>