<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>mmx sse(2) etc ? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=1501" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=1501">mmx sse(2) etc ?</a></p>
   <div class="post" id="post-9680">
    <div class="subject"><a href="#post-9680">mmx sse(2) etc ?</a></div>
    <div class="body">Hi im a &quot;newbie&quot; and would like to use masm to produce .obj files to link with delphi code (i hear screams).<br /><br />This would just be for the inner loops of programs which are very data intensive.You may know that up to Delphi5 you can only use the 486 set unless you use opcodes(db?). The Delphi6 assembler does support up to P4.<br /><br />So the question is can I use newer processor instructions in masm (probably via radasm) ? I would be grateful of a small example. I tired an instruction or two but i got errors , it may just be (probably) my silly coding errors.<br /><br />Many thanks.</div>
    <div class="meta">Posted on 2001-10-18 07:40:57 by trancera</div>
   </div>
   <div class="post" id="post-9681">
    <div class="subject"><a href="#post-9681">mmx sse(2) etc ?</a></div>
    <div class="body"><div class="quote">(i hear screams).</div><br />I see dead people!<br /><br />In order to use mmx instructions on a processor, you need to specify <strong>.mmx</strong>.<br /><br />There is also <strong>.xmm</strong> for the SIMD SSE instructions (SSE1 only I think). You can define macros (or possibly search the web for some) that'll do SSE2 for you.<br /><br />I don't use Delphi, or have a copy to try stuff on. If its like C Builder, it'll use OMF object files rather than COFF, so you'll need to make sure you compile without the /c switch if you use MASM (the linker with MASM32 is a COFF linker).<br /><br />First I would recomend trying to link a simple function into your code just to test it (eg. <strong>mov eax, 5</strong> / <strong>ret</strong>), just to prove you've got the linking between the packages right. Then try bringing more complex stuff.<br /><br />Mirno</div>
    <div class="meta">Posted on 2001-10-18 08:23:11 by Mirno</div>
   </div>
   <div class="post" id="post-9683">
    <div class="subject"><a href="#post-9683">mmx sse(2) etc ?</a></div>
    <div class="body">Thanks for the VERY quick reply Mirno.<br /><br />I have tried some small functions. One odd thing ( maybe someone will say its not ) - and not that i fully understand the meaning or reasoning is that i have to define each function in its own segment or Delphi wont find the function.<br /><br />Something like this ( template kinda file ).<br /><br />.CODE<br /><br />_1_TEXT segment dword public 'CODE' use32<br />Procedure1  proc<br />;<br />retn<br />Procedure1 endp<br />@CurSeg ends<br /><br />_2_TEXT segment dword public 'CODE' use32<br />Procedure2  proc<br />;<br />retn<br />Procedure2 endp<br />@CurSeg ends<br /><br />I think its to do with what you say 'OMF' maybe ?<br />Yes the switches i am using ( so far ) are : /c /Cp /nologo /Fl /Sa /I$I,2<br /><br />Does this segment thing make sense then ?<br />Is it expensive in terms of size/performance or negligible once you are in the required function ?<br /><br />Thanks y'all.</div>
    <div class="meta">Posted on 2001-10-18 08:33:21 by trancera</div>
   </div>
  </div>
 </body>
</html>