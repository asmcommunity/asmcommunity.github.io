<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Dll of a DLL - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19146" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19146">Dll of a DLL</a></p>
   <div class="post" id="post-148013">
    <div class="subject"><a href="#post-148013">Dll of a DLL</a></div>
    <div class="body">I want to hook an export of user32.dll (used by MyProgram's Dependency MyProgram.dll)<br /><br /> My question is, Is the memory of every loaded DLL for a process and it's dependencies shared within a process?<br /> or is &quot;Copy on write&quot; in effect? (XP/2000)<br /><br />Lets say I have a program MyProgram.exe with a dependent dll I created --&gt; MyDll.dll<br /><br />IF I get the base address of USER32.DLL in MyProgram.exe and hook it. will it be hooked in the MyPrograml.dll's USER32.DLL dependency also? Since they are in the same process :confused: <br /><br /><br />Thank you... :alright:</div>
    <div class="meta">Posted on 2004-08-13 03:11:25 by LarryH</div>
   </div>
   <div class="post" id="post-148028">
    <div class="subject"><a href="#post-148028">Dll of a DLL</a></div>
    <div class="body">not sure i follow you exactly..each windows system DLL like kernel and user have specialy allocated parts in your memory that is diffirent per OS. So if your hooking USER32.dll's base address it should certainly apply to any dll's your program is using, possibly even other processes if your hooker is setup this way</div>
    <div class="meta">Posted on 2004-08-13 07:51:07 by Uradox</div>
   </div>
   <div class="post" id="post-148030">
    <div class="subject"><a href="#post-148030">Dll of a DLL</a></div>
    <div class="body">Uradox, not on NT - because of copy-on-write.</div>
    <div class="meta">Posted on 2004-08-13 08:34:54 by f0dder</div>
   </div>
   <div class="post" id="post-148031">
    <div class="subject"><a href="#post-148031">Dll of a DLL</a></div>
    <div class="body">ah apollogies then :P<br />i am wrong</div>
    <div class="meta">Posted on 2004-08-13 08:36:09 by Uradox</div>
   </div>
   <div class="post" id="post-148038">
    <div class="subject"><a href="#post-148038">Dll of a DLL</a></div>
    <div class="body"><div class="quote"><br />Uradox, not on NT - because of copy-on-write. </div><br /><br />What exactly is copy-on-write?</div>
    <div class="meta">Posted on 2004-08-13 14:15:36 by Mikky</div>
   </div>
   <div class="post" id="post-148040">
    <div class="subject"><a href="#post-148040">Dll of a DLL</a></div>
    <div class="body">It is a method that allows multiple processes to share the same physical memory for memory pages, and make a process-local copy when a page is modified. It's good for saving some memory - and this is one of the reasons that &quot;using EXE packers is bad&quot;.</div>
    <div class="meta">Posted on 2004-08-13 14:30:03 by f0dder</div>
   </div>
   <div class="post" id="post-148048">
    <div class="subject"><a href="#post-148048">Dll of a DLL</a></div>
    <div class="body"><div class="quote"><br />Uradox, not on NT - because of copy-on-write. </div><br /><br />Is That a no f0dder???</div>
    <div class="meta">Posted on 2004-08-13 15:46:25 by LarryH</div>
   </div>
   <div class="post" id="post-148049">
    <div class="subject"><a href="#post-148049">Dll of a DLL</a></div>
    <div class="body">No, they were talking about changes made in different processes. When a DLL is explicitly or implicitly loaded several times in the same process, only one instance is made, and a reference count is kept.</div>
    <div class="meta">Posted on 2004-08-13 15:57:08 by Sephiroth3</div>
   </div>
  </div>
 </body>
</html>