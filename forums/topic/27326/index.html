<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Winsock - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27326" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27326">Winsock</a></p>
   <div class="post" id="post-195684">
    <div class="subject"><a href="#post-195684">Winsock</a></div>
    <div class="body">i have writen a very small client/server chat type of program.
everything works fine except that i am only recieving one FD_READ
message from windows.  should i not be recieving an FD_READ message
every time there is a new packet???

many thanks</div>
    <div class="meta">Posted on 2001-03-21 12:37:00 by lineadd</div>
   </div>
   <div class="post" id="post-195685">
    <div class="subject"><a href="#post-195685">Winsock</a></div>
    <div class="body">Lineadd,

I asked myself almost the same question a few days ago.
Fact is that if there is a packet send to the server/client there is a read message coming. In my example I never intercepted them as I tried getting them while debugging. I just inserted a MessageBox,0,ADDR test,ADDR test,0 at the FD_READ which I left running out empty after recv() them and suddenly all these funny MessageBoxes were popping up.

Try to make sure that your data gets accurately send/intercepted.</div>
    <div class="meta">Posted on 2001-03-21 12:49:00 by JimmyClif</div>
   </div>
   <div class="post" id="post-195686">
    <div class="subject"><a href="#post-195686">Winsock</a></div>
    <div class="body">i'm not really sure what you mean???</div>
    <div class="meta">Posted on 2001-03-21 13:04:00 by lineadd</div>
   </div>
   <div class="post" id="post-195687">
    <div class="subject"><a href="#post-195687">Winsock</a></div>
    <div class="body">#define WM_SOCKDATA (WM_USER+1)
PROTOENT *prot = getprotobyname("tcp");
sock = socket ( AF_INET, SOCK_STREAM, prot->p_proto );
ULONG mode = 1;
ioctlsocket(sock, FIONBIO, &mode);
WSAAsyncSelect(sock, hWnd, WM_SOCKDATA, FD_READ|FD_CONNECT);</div>
    <div class="meta">Posted on 2001-03-21 13:19:00 by Mantelus</div>
   </div>
   <div class="post" id="post-195688">
    <div class="subject"><a href="#post-195688">Winsock</a></div>
    <div class="body">hehe dont worry, i just had the socker handle named something differnt
all works now :):):)</div>
    <div class="meta">Posted on 2001-03-21 13:22:00 by lineadd</div>
   </div>
  </div>
 </body>
</html>