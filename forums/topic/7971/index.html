<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>GetDC documentation - 98/XP - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7971" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=7971">GetDC documentation - 98/XP</a></p>
   <div class="post" id="post-58209">
    <div class="subject"><a href="#post-58209">GetDC documentation - 98/XP</a></div>
    <div class="body">Have a program that works fine in Windows 98. It bombs in windows XP.<br />I think my problem lies in my use of GetDC/ReleaseDC and handles. <br />Would it be possible to post the page from the latest SDK for GetDC that<br />recognizes windows XP. I'm thinking there might be a differance.</div>
    <div class="meta">Posted on 2002-09-16 19:40:27 by shankle</div>
   </div>
   <div class="post" id="post-58210">
    <div class="subject"><a href="#post-58210">GetDC documentation - 98/XP</a></div>
    <div class="body">You should check whether it's the bug in your own program that crashed it. Especially, check whether you saved values of registers such as esi, edi, ebx with in your program.</div>
    <div class="meta">Posted on 2002-09-16 19:47:54 by Iczelion</div>
   </div>
   <div class="post" id="post-58290">
    <div class="subject"><a href="#post-58290">GetDC documentation - 98/XP</a></div>
    <div class="body">shankle,<br />you don't need anyone to post this page, it is already available on the net, right <a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/gdi/devcons_4esj.asp"><u>here</u>.</a> For all API doco, goto <a target="_blank" href="www.msdn.microsoft.com,">www.msdn.microsoft.com,</a> and use the little searchbox in the top left corner.<br /><br />After checking the link above, you will see that there has been no discernable change to this API call in XP, so it is likely that the bug is yours, probably exactly the bug Icz mentioned.</div>
    <div class="meta">Posted on 2002-09-17 07:07:59 by sluggy</div>
   </div>
   <div class="post" id="post-58295">
    <div class="subject"><a href="#post-58295">GetDC documentation - 98/XP</a></div>
    <div class="body">Thanks for the suggestions guys.</div>
    <div class="meta">Posted on 2002-09-17 07:24:25 by shankle</div>
   </div>
   <div class="post" id="post-58392">
    <div class="subject"><a href="#post-58392">GetDC documentation - 98/XP</a></div>
    <div class="body">I was under the impression that the following would save the registers<br />that Windows uses.<br /><br />   WNDPROC PROC uses esi edi ebp ebx, hWnd:HWND, iMsg:UINT,<br />    wParam:WPARAM,  lParam:LPARAM<br /><br />Thanks</div>
    <div class="meta">Posted on 2002-09-17 15:54:23 by shankle</div>
   </div>
   <div class="post" id="post-58415">
    <div class="subject"><a href="#post-58415">GetDC documentation - 98/XP</a></div>
    <div class="body">It does, if you check the compiled code you will see a bunch of pushes at the start of the function, and a bunch of pops just before each ret. I don't know if there is any need for you to save ebp unless you are actually using it in your code, i personally never save it (but i also never use it).<br /><br />You have really given us no information to go on, which means we cannot give you an answer. What you need to do is whenever you call an API function, check the return code, if the return code indicates that there was an error then you need to call GetLastError to find out what the error was. Also, it would help if you posted the relevant section of code :)</div>
    <div class="meta">Posted on 2002-09-17 19:31:04 by sluggy</div>
   </div>
   <div class="post" id="post-58428">
    <div class="subject"><a href="#post-58428">GetDC documentation - 98/XP</a></div>
    <div class="body">The other thing to look for is the complement of preserving ESI, EDI, and EBX.<br /><br />When calling API's, don't assume ECX and EDX will remain undisturbed.</div>
    <div class="meta">Posted on 2002-09-17 23:20:12 by tenkey</div>
   </div>
  </div>
 </body>
</html>