<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>help with a really simple program - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20531" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20531">help with a really simple program</a></p>
   <div class="post" id="post-156822">
    <div class="subject"><a href="#post-156822">help with a really simple program</a></div>
    <div class="body">Hello, i just started with masm programming, but i dont really understand it quite well. First of all the code the book gives me doesnt compile right, and second: i dont fully understand the commands it uses. So if someone can help me fix the code and tell me what the function mean/do then that would be really great. Thanks for any help.<br /><br /><pre><code><br />.386<br />.MODEL Flat, STDCALL<br />.CODE<br />M1&#58; MOV AH,01H<br /> INT 21H<br /> JMP M1<br /> END<br /></code></pre></div>
    <div class="meta">Posted on 2005-02-08 17:51:40 by w00</div>
   </div>
   <div class="post" id="post-156823">
    <div class="subject"><a href="#post-156823">help with a really simple program</a></div>
    <div class="body">w00,<br /><br />The example you have posted is a mix of 32 bit Windows code and 16 bit DOS code and it will not work. I can post bits and pieces but you will find far more information with the MASM32 project which you can get at www.masm32.com .<br /><br />It has various templates that work directly from the editor and 2 code generators that will build Windows skeletons so you have reliable working examples to start with.</div>
    <div class="meta">Posted on 2005-02-08 18:07:02 by hutch--</div>
   </div>
   <div class="post" id="post-156825">
    <div class="subject"><a href="#post-156825">help with a really simple program</a></div>
    <div class="body"><div class="quote">w00,<br /><br />The example you have posted is a mix of 32 bit Windows code and 16 bit DOS code and it will not work. I can post bits and pieces but you will find far more information with the MASM32 project which you can get at www.masm32.com .<br /><br />It has various templates that work directly from the editor and 2 code generators that will build Windows skeletons so you have reliable working examples to start with.</div><br /><br />Can you tell me how you know that some part is 16bit asm? I thought this was all 32bit asm...<br />btw, the beginning doesnt start with<br />.386 <br />.MODEL Flat, STDCALL <br />i added that, it originally begins with<br /><br />.MODEL SMALL<br />.CODE<br />...<br />...<br />etc</div>
    <div class="meta">Posted on 2005-02-08 18:24:53 by w00</div>
   </div>
   <div class="post" id="post-156838">
    <div class="subject"><a href="#post-156838">help with a really simple program</a></div>
    <div class="body">isn't<br /><br />.model flat, stdcall  = 32 bit<br /><br />and<br /><br />int 21h  = 16 bit?<br /><br />You'll definately not get int 16h to work on win2k or XP, that's for sure! (I had to learn the hard way! :)</div>
    <div class="meta">Posted on 2005-02-08 22:09:54 by 067D4563</div>
   </div>
   <div class="post" id="post-156850">
    <div class="subject"><a href="#post-156850">help with a really simple program</a></div>
    <div class="body">I dont understand why its 16bit. Im reading a book about 32bit asm  :? <br />But ill just take your word for it, but how would you guys do this in 32 bit then?<br /><br />btw the error that i got with compiling was<br />Warning: multiple &quot;.DATA&quot; sections found with different attributes.<br />nothing about 21H.</div>
    <div class="meta">Posted on 2005-02-09 04:52:58 by w00</div>
   </div>
   <div class="post" id="post-156857">
    <div class="subject"><a href="#post-156857">help with a really simple program</a></div>
    <div class="body">Of course MASM will not throw you any error as interrupts is valid in both 16bit and 32bit environment.<br /><br />The way you are using int 21h is how you would use it in 16bit dos. In 32bit windows, interrupts are not used, instead API are used. Internally API will end up using syscall or sysenter or some interrupt.<br /><br />Hope I clarify some doubts</div>
    <div class="meta">Posted on 2005-02-09 08:01:03 by roticv</div>
   </div>
  </div>
 </body>
</html>