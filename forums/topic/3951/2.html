<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Precise Timing of Small Code: - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3951" />
  <link rel="prev" href="../?id=3951&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=3951">Precise Timing of Small Code:</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=3951&amp;page=1" style="">&laquo;</a><a href="../?id=3951&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="3951" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-27162">
    <div class="subject"><a href="#post-27162">Precise Timing of Small Code:</a></div>
    <div class="body">Really, I cheated - I lowered the loop count to 100.  So, the odds of the OS getting in the way are almost nil.   Still off by 1 cycle - wonder where that is coming from?<br /><br />P3 600Mhz at work (I had to minimize the<br />debug window on NT4 to get these zeros):<pre><code>OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles</code></pre></div>
    <div class="meta">Posted on 2002-03-04 11:30:16 by bitRAKE</div>
   </div>
   <div class="post" id="post-27217">
    <div class="subject"><a href="#post-27217">Precise Timing of Small Code:</a></div>
    <div class="body"><pre><code><br />OverHead&#58; 78 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 78 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 78 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br /></code></pre><br /><br />very consistent on my athlon xp 1800</div>
    <div class="meta">Posted on 2002-03-04 17:08:27 by mc`</div>
   </div>
   <div class="post" id="post-27233">
    <div class="subject"><a href="#post-27233">Precise Timing of Small Code:</a></div>
    <div class="body">Windows 98 2nd edition 600mhz<br /><br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles</div>
    <div class="meta">Posted on 2002-03-04 18:19:06 by Sliver</div>
   </div>
   <div class="post" id="post-27237">
    <div class="subject"><a href="#post-27237">Precise Timing of Small Code:</a></div>
    <div class="body"><strong>Sliver</strong>, what CPU is that?  Wow, four cycles off!<br />Well, atleast it's consistent. :)</div>
    <div class="meta">Posted on 2002-03-04 18:36:17 by bitRAKE</div>
   </div>
   <div class="post" id="post-27241">
    <div class="subject"><a href="#post-27241">Precise Timing of Small Code:</a></div>
    <div class="body">Pentium 3<br /><br />....<br /><br />I feel kinda left out :(<br />Semms to work on everyone else's<br /><br />Sliver</div>
    <div class="meta">Posted on 2002-03-04 20:13:23 by Sliver</div>
   </div>
   <div class="post" id="post-27271">
    <div class="subject"><a href="#post-27271">Precise Timing of Small Code:</a></div>
    <div class="body">Win98 SE P3 450<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br />OverHead: 136 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 400 cycles<br /><br /><br />That is why I didnt upgraded to 600mhz :grin:</div>
    <div class="meta">Posted on 2002-03-05 05:56:58 by LaptoniC</div>
   </div>
   <div class="post" id="post-27288">
    <div class="subject"><a href="#post-27288">Precise Timing of Small Code:</a></div>
    <div class="body">Back at my AMD TB with your latest version:<br /><br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles<br />OverHead: 78 cycles/byte<br />MyPROC: 1 bytes, 100 loops, 0 cycles</div>
    <div class="meta">Posted on 2002-03-05 09:48:53 by Qweerdy</div>
   </div>
   <div class="post" id="post-27299">
    <div class="subject"><a href="#post-27299">Precise Timing of Small Code:</a></div>
    <div class="body">P1 = 1, overhead 57<br />P2 = 0, overhead 128<br />P3 = 4, overhead 136<br />P3 = 0, overhead 149<br />P4 = ?<br />K7 = 0, overhead 78<br /><br />Could someone with a P2 or P4 test the code?</div>
    <div class="meta">Posted on 2002-03-05 10:24:13 by bitRAKE</div>
   </div>
   <div class="post" id="post-27303">
    <div class="subject"><a href="#post-27303">Precise Timing of Small Code:</a></div>
    <div class="body">p2 350Mhz windows xp<br /><pre><code><br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 128 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles</code></pre></div>
    <div class="meta">Posted on 2002-03-05 10:44:41 by eko</div>
   </div>
   <div class="post" id="post-27341">
    <div class="subject"><a href="#post-27341">Precise Timing of Small Code:</a></div>
    <div class="body">Here's my new results:<br /><br /><pre><code><br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 1 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 1 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br />MyPROC&#58; 1 bytes, 100 loops, 0 cycles<br />OverHead&#58; 149 cycles/byte<br /></code></pre><br /><br />I didn't copy the whole thing, it was too long but the results of those were 0.<br /><br />Looks good to me than the first one. :alright:</div>
    <div class="meta">Posted on 2002-03-05 14:25:05 by stryker</div>
   </div>
   <div class="post" id="post-27342">
    <div class="subject"><a href="#post-27342">Precise Timing of Small Code:</a></div>
    <div class="body">There definitely are two types of P3's being used here. :)</div>
    <div class="meta">Posted on 2002-03-05 14:27:37 by bitRAKE</div>
   </div>
   <div class="post" id="post-27343">
    <div class="subject"><a href="#post-27343">Precise Timing of Small Code:</a></div>
    <div class="body">My P3 specs:<br /><br />Intel P3 FCPGA at 802mhz (I tested it on some benchmark-ers, nah! this one is really 800mhz) x86 Family 6 Model 8 Stepping 6<br /><br /><strong>edit()</strong><br />I told you my PC is buggy! :) - OFFTOPIC: My PC shuts down if I don't login within 2 minutes since the enter password prompt (win2k) pops up.<br /><br /><strong>edit()</strong><br /><br />Why not cheat, subtract 1 if the result is 1 -&gt; too lame. Should we trash our P3 boxes? :)</div>
    <div class="meta">Posted on 2002-03-05 14:33:12 by stryker</div>
   </div>
   <div class="post" id="post-27345">
    <div class="subject"><a href="#post-27345">Precise Timing of Small Code:</a></div>
    <div class="body">Timing algos isn't a problem if you don't mind waiting - use a large number of itterations and find the average.  My goal was to find a quicker way.  Both methods have their limitations.</div>
    <div class="meta">Posted on 2002-03-05 15:00:10 by bitRAKE</div>
   </div>
   <div class="post" id="post-27349">
    <div class="subject"><a href="#post-27349">Precise Timing of Small Code:</a></div>
    <div class="body">Find the average?<br /><br />I tried it 100 times. The counted all cycles and the average cycle throughout the entire experiment is 0.47. I don't know if this is what you want.</div>
    <div class="meta">Posted on 2002-03-05 15:12:20 by stryker</div>
   </div>
   <div class="post" id="post-27359">
    <div class="subject"><a href="#post-27359">Precise Timing of Small Code:</a></div>
    <div class="body"><strong>stryker</strong>, thanks for posting your results.  About the average, I was speaking in a general sense about timing algos.  The above experiment is meant to measure nothing - it's a start.  When trying to measure longer routines the OS seems to always get in the way, as <strong>Hutch--</strong> stated above.<br /><br />You could try timing some code by putting it between the <em>startTime</em> and <em>stopTime</em> macros.  I have a couple MUL instructions commented out right now.  I was able to time small pieces of code very accurately - like the little challenges <strong>Svin</strong> has posted.</div>
    <div class="meta">Posted on 2002-03-05 15:50:54 by bitRAKE</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=3951&amp;page=1" style="">&laquo;</a><a href="../?id=3951&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="3951" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>