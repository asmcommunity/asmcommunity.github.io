<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>who can to develop an al program by joint effort - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29439" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=115">DOS &amp; BIOS</a> &raquo; <a href="../?id=29439">who can to develop an al program by joint effort</a></p>
   <div class="post" id="post-207850">
    <div class="subject"><a href="#post-207850">who can to develop an al program by joint effort</a></div>
    <div class="body">nowadays,i think i am the first man of trying to develop an ai program.<br />the basic workflow is read two files,one input file(this file is <br /><br />generated computer peripheral OCR equipment) and another(this file is <br /><br />generated by customs expected result,it&#039;s made-to-order by <br /><br />miscellaneous software,in future,this kind of results or problems can <br /><br />be find by machine-self)<br />please tell me,how do i use DOS function 42h to control file pointer <br /><br />read/write contextual two files.after prepare for many algorithm<br />for example:<br /><br /><br />+++++++++++++++++++++++++++++<br />INCLUDE Irvine16.inc<br /><br />.data<br />BufSize = 5000<br />infile&nbsp; &nbsp; BYTE &quot;input.txt&quot;,0<br />outfile&nbsp;  BYTE &quot;my_output_file.txt&quot;,0<br />inHandle&nbsp; WORD ?<br />outHandle WORD ?<br />buffer&nbsp; &nbsp; BYTE BufSize DUP(?)<br />bytesRead WORD ?<br />address dw ?<br /><br /><br />.code<br />main PROC<br />&nbsp; &nbsp; mov&nbsp; ax,@data<br />&nbsp; &nbsp; mov&nbsp; ds,ax<br /><br />; Open the input file<br />	mov ax,716Ch&nbsp;  	; extended create or open<br />	mov bx,0&nbsp; &nbsp; &nbsp; 	; mode = read-only<br />	mov cx,0	; normal attribute<br />	mov dx,1	; action: open<br />	mov si,OFFSET infile<br />	int 21h&nbsp; &nbsp; &nbsp;  	; call MS-DOS<br />	jc&nbsp; quit	; quit if error<br />	mov inHandle,ax<br /><br />; Read the input file<br />	mov ah,3Fh	; read file or device<br />	mov bx,inHandle	; file handle<br />	mov cx,BufSize	; max bytes to read<br />	mov dx,OFFSET buffer	; buffer pointer<br />	int 21h<br />	jc&nbsp; quit	; quit if error<br />	mov bytesRead,ax<br /><br />; Display the buffer<br />	mov ah,40h	; write file or device<br />	mov bx,1	; console output handle<br />	mov cx,BufSize 	; number of bytes<br />	mov dx,OFFSET buffer	; buffer pointer<br />	int 21h<br />	jc&nbsp; quit	; quit if error<br /><br />; Close the file<br />	mov&nbsp; ah,3Eh&nbsp; &nbsp; 	; function: close file<br />	mov&nbsp; bx,inHandle	; input file handle<br />	int&nbsp; 21h&nbsp; &nbsp; &nbsp;  	; call MS-DOS<br />	jc&nbsp; quit	; quit if error<br /><br />; Create the output file<br />	mov ah,3dh&nbsp;  	; extended create or open<br />	mov bx,1&nbsp; &nbsp; &nbsp; 	; mode = write-only<br />	mov cx,0<br />	mov al,0; normal attribute<br />;	mov dx,13h	; action: create/truncate<br />	mov si,OFFSET outfile<br />	int 21h&nbsp; &nbsp; &nbsp;  	; call MS-DOS<br />	jc&nbsp; quit	; quit if error<br />	mov outHandle,ax	; save handle<br />;pointer<br />;mov ax,42h<br />;mov bx,outhandle<br />;mov cx,10<br />;mov al,0<br />;int 21h<br />;mov address,dx<br /><br />; Write buffer to new file<br /><br />mov ah,40h	; write file or device<br />	mov bx,outHandle	; output file handle<br />	mov cx,bytesRead	; number of bytes<br />	mov dx,OFFSET buffer; buffer pointer<br /><br />	int 21h<br /><br />	jc&nbsp; quit	; quit if error<br />;loop next<br />; Close the file<br />	mov&nbsp; ah,3Eh&nbsp; &nbsp; 	; function: close file<br />	mov&nbsp; bx,outHandle	; output file handle<br />	int&nbsp; 21h&nbsp; &nbsp; &nbsp;  	; call MS-DOS<br /><br />quit:<br />	call Crlf<br />&nbsp; &nbsp; exit<br />main ENDP<br />END main<br /><br />+++++++++++++++++++++++++++++<br />the goal is accomplish segmental reading,after computing,finally step <br /><br />outcome the procedure of dynamic demonstration.</div>
    <div class="meta">Posted on 2009-06-09 11:07:08 by waphon</div>
   </div>
  </div>
 </body>
</html>