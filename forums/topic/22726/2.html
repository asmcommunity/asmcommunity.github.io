<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>BSP - finding the Portals - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22726" />
  <link rel="prev" href="../?id=22726&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=22726">BSP - finding the Portals</a></p>
   <div class="post" id="post-178481">
    <div class="subject"><a href="#post-178481">Re: BSP - finding the Portals</a></div>
    <div class="body">Thanks once more for the feedback.<br /><br />The most recent binary I posted contains a MessageBox call just before the end of the &quot;importer&quot;, and this MessageBox needs to be closed before you can generate a BSPTree.<br /><br />I was using the MessageBox to help isolate a GPF, but now that GPF is fixed, I forgot to remove the call.<br /><br />With this in mind, you should be able to successfully test the BSPGenerator.. the last phase of the Generator includes the &quot;Portal Finder&quot; which is my current goal.<br /><br />During the BSPTree generation, and again during the &quot;portal finding&quot;, new Vertices are calculated (at the intersections of geometry and planes) , and it is the values of these new vertices which I am most interested in.<br /><br />At the moment, I make NO attempt to calculate pervertex Normals, so where they apply, I expect them to contain junk.<br />I do however calculate new UV coordinates for new Vertices, which should contain as many UVSets as the FVF dictates, but the bitdepth of each UVSet is assumed to be REAL4 (I will improve this code if/when I see a mesh that actually uses multiple UVSets with different bitdepths).<br /><br />Several minor changes have been made which impact apon the Importer, most notably I&#39;ve improved the cleanup of redundant resources, but am still not totally satisfied with it.<br /><br />I&#39;ll post another version in the next day or two, which will address most if not all of the issues I&#39;ve outlined, and then immediately begin adding code to render the geometry during the BSPTree generation, providing some visualisation and hopefully showing up any anomolies in the math (for example, other sources I&#39;ve seen impose limitations on the fragmentation of exceedingly thin or small triangles whereas I do not..)</div>
    <div class="meta">Posted on 2006-03-19 08:10:56 by Homer</div>
   </div>
  </div>
 </body>
</html>