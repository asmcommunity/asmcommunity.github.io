<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Bochs or Virtual PC? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25860" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=113">Low Level Concepts</a> &raquo; <a href="../?id=25860">Bochs or Virtual PC?</a></p>
   <div class="post" id="post-188583">
    <div class="subject"><a href="#post-188583">Bochs or Virtual PC?</a></div>
    <div class="body">I am writing a Floppy Driver and I came around this problem. I am resetting the first Floppy and Bochs&#39;s debugger says:<br /><br /><pre><code>00001277492i controller reset in software</code></pre><br /><br />So the initialization code has successfully done its job. The problem is that I have written some procedures that sense certain IRQs. For example I can invoke my [__WaitForIRQPulse] procedure and wait for IRQ6 to be fired. The thing is that this approach proves to be working on Virtual PC but not on Bochs. On Bochs, I just get the IRQ and non of my Sense-interrupts work correctly but on Virtual PC they do work.<br /><br />I have attached the floppy image of my kernel to this post so if anyone could please confirm this, I would really appreciate it. When running this image on Bochs, I don&#39;t get the message that my kernel is supposed to print on the screen after having successfully reset the floppy driver but on Virtual PC the message is shown.</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=2314" target="_blank">DriveA.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2007-03-25 04:27:05 by XCHG</div>
   </div>
   <div class="post" id="post-188585">
    <div class="subject"><a href="#post-188585">Re: Bochs or Virtual PC?</a></div>
    <div class="body">Okay great. I had forgotten to push the accumulator and then pop it in my IRQ6 handler procedure so EAX was getting modified in the handler and this was changing the EAX in my other procedures. It&#39;s now fixed.</div>
    <div class="meta">Posted on 2007-03-25 05:26:21 by XCHG</div>
   </div>
  </div>
 </body>
</html>