<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to get thd menu's DC - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19120" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19120">How to get thd menu's DC</a></p>
   <div class="post" id="post-147825">
    <div class="subject"><a href="#post-147825">How to get thd menu's DC</a></div>
    <div class="body">In order to make my app more attractive,i wanna draw the menu bar myself,but i can not get the DC of it by useing API GetDC &amp; GetWindowDC.It seems that the handle of a menu is not a window handle.So GetDC return NULL instead of returning the DC of the menu bar.I totally have no ideal about it.Could you gave me some help about it ! Thank you in advance!</div>
    <div class="meta">Posted on 2004-08-10 06:55:43 by Rey</div>
   </div>
   <div class="post" id="post-147832">
    <div class="subject"><a href="#post-147832">How to get thd menu's DC</a></div>
    <div class="body">GetMenu?<br /><br />The GetMenu function retrieves the handle of the menu assigned to the given window. <br /><br />HMENU GetMenu(<br /><br />    HWND hWnd	// handle of window  <br />   );<br /><br />or maybe if its a on a dialog window i guess you could try<br /><br />The GetDlgItem function retrieves the handle of a control in the specified dialog box. <br /><br />HWND GetDlgItem(<br /><br />    HWND hDlg,	// handle of dialog box<br />    int nIDDlgItem 	// identifier of control<br />   );</div>
    <div class="meta">Posted on 2004-08-10 08:07:58 by HeXeN</div>
   </div>
   <div class="post" id="post-147839">
    <div class="subject"><a href="#post-147839">How to get thd menu's DC</a></div>
    <div class="body">Rey,<br /><br />In order the change the appearance of the main menu of a window or any sub-menus, you will need to process two different window messages and also do some pre-processing of the menu items before/during the window creation method.<br /><br />Here are the window messages to catch and process:  (To make sure you are touching the menu and not some control), the structures used (MEASUREITEMSTRUCT and DRAWITEMSTRUCT),  check the CtrlType == ODT_MENU.<br /><br />WM_MEASUREITEM<br />WM_DRAWITEM<br /><br />You will also need to go through each of the menu items in your WM_CREATE handler and modify the menu style to be owner-drawn.  One you have the styles set, you will start getting WM_MEASUREITEM calls.  This is where you do any additonal calculations you like to acheive before the drawing occurs.<br /><br />Relvinian</div>
    <div class="meta">Posted on 2004-08-10 12:01:35 by Relvinian</div>
   </div>
   <div class="post" id="post-148734">
    <div class="subject"><a href="#post-148734">How to get thd menu's DC</a></div>
    <div class="body">Thanks,i have done what i wanna do.Thank you for you great help.<br />I have implement XP-style menu under win98?</div>
    <div class="meta">Posted on 2004-08-30 00:05:10 by Rey</div>
   </div>
   <div class="post" id="post-148735">
    <div class="subject"><a href="#post-148735">How to get thd menu's DC</a></div>
    <div class="body">Thanks,i have done what i wanna do.Thank you for you great help.<br />I have implement XP-style menu under win98?</div>
    <div class="meta">Posted on 2004-08-30 00:05:48 by Rey</div>
   </div>
  </div>
 </body>
</html>