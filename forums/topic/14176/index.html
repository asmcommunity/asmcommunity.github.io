<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Primitive color picker control - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14176" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=116">Windows</a> &raquo; <a href="../?id=14176">Primitive color picker control</a></p>
   <div class="post" id="post-109569">
    <div class="subject"><a href="#post-109569">Primitive color picker control</a></div>
    <div class="body">This is a little custom control I coded some time ago. I had a dialog box where you could select several colors, so I put several buttons coloured as the selected colors, when you clicked on them ChooseColor would be invoked.<br />I'm not sure I've explained myself well, so to make up for my bad english ;) I'll post some code here. It's not optimized at all, actually I coded it in a hurry, so I'll appreciate any help from you coding gurus here. I have also hardcoded a couple of values, so I'm not sure it works fine for every Windows, or with different schemes.<br /><br />Hope It's useful. :)<br /><br />EDIT: I've decided to post an attachment instead of pasting the code here. Now I've also included a test program. Tried to add a new feature (sending BN_CLICKED messages when a new color was picked), but it didn't work... :( )</div>
    <div class="meta">Posted on 2003-07-07 11:03:56 by QvasiModo</div>
   </div>
   <div class="post" id="post-109595">
    <div class="subject"><a href="#post-109595">Primitive color picker control</a></div>
    <div class="body">Here's the attachment.<br /><br />EDIT: Attachment deleted to save space (85 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-07-07 15:44:10 by QvasiModo</div>
   </div>
   <div class="post" id="post-110009">
    <div class="subject"><a href="#post-110009">Primitive color picker control</a></div>
    <div class="body">New version!<br /><br />Corrected a few bugs, but there's one I still couldn't get rid of - it seems to flicker whenever you click on it. I'm pretty sure the DrawControlFrame call is responsible for the flicker, as it (appears to be) doesn't just draw the frame, but also paints the rest of the control as well... Anyway, it's not that bad, you won't even notice unless your button is HUGE and you click on it several times per second :grin: <br /><br />I also tried to use a standard push button instead of this control, and colour it by responding to notify messages, but it didn't work. I've read somewhere in this board that it was impossible. I wonder if the DrawControlFrame API has anything to do with it... :confused: <br /><br />I'm attaching the new source, together with my test programs... Try it and tell me what you think :)<br /><br />EDIT: Attachment deleted to save space (36 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-07-10 16:09:17 by QvasiModo</div>
   </div>
   <div class="post" id="post-110804">
    <div class="subject"><a href="#post-110804">Primitive color picker control</a></div>
    <div class="body">This is probably my final version, unless there are bugs to fix, requests to add features :grin: or if I decide it's a good time to learn how to use those XP themes in custom controls.<br /><br />It doesn't seem to ficker anymore, so I guess it's finished. This is freeware... if you ever use it in your programs, please let me know :)<br /><br />EDIT: Attachment deleted to save space (36 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-07-16 16:33:08 by QvasiModo</div>
   </div>
   <div class="post" id="post-114854">
    <div class="subject"><a href="#post-114854">Primitive color picker control</a></div>
    <div class="body">Updated:<br />- Renamed to &quot;ColorBtn&quot;, because RadAsm already comes with a custom control of that name.<br />- Added support for RadAsm, now it can be integrated with the dialog editor (see readme file).<br />- A series of small improvements in the code, I can't remember anyway.<br /><br />This is my first try at RadAsm custom control interface, so feel free to post any comments/bugs/suggestions, etc...<br /><br />EDIT: Attachment deleted to save space (33 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-08-21 18:28:13 by QvasiModo</div>
   </div>
   <div class="post" id="post-114866">
    <div class="subject"><a href="#post-114866">Primitive color picker control</a></div>
    <div class="body"><div class="quote"><br />New version!<br />Corrected a few bugs, but there's one I still couldn't get rid of - it seems to flicker </div><br />What is really flickering, that's Clock in WinNT :tongue: :tongue: :tongue: <br /><br />Nice work, <strong>QvasiModo</strong> :alright: <br /><br />since you use <pre><code>        invoke SendDlgItemMessage,hwnd,IDC_COLOR2,CLBM_SETCOLOR,00FFFFFFh,0     ;white<br />        invoke SendDlgItemMessage,hwnd,IDC_COLOR3,CLBM_SETCOLOR,000000FFh,0     ;red<br />        invoke SendDlgItemMessage,hwnd,IDC_COLOR4,CLBM_SETCOLOR,0000FF00h,0     ;green<br />        invoke SendDlgItemMessage,hwnd,IDC_COLOR5,CLBM_SETCOLOR,00FF0000h,0     ;blue<br /></code></pre><br />I'd like to know what do you think of my post to <br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=14785">this thread</a><br /><br /><strong>NaN</strong> seems some missunderstanding me<br />or maybe :stupid:</div>
    <div class="meta">Posted on 2003-08-21 19:56:29 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-115001">
    <div class="subject"><a href="#post-115001">Primitive color picker control</a></div>
    <div class="body">You're right, it is a good idea. NaN's last post there seems to follow your proposal. However it's too big for this particular program (it doesn't make so many calls to SendMessage). It would be good to know exactly at wich point does it save bytes...<br />In any case, your first version can be slightly modified to store both the control ID and wParam, I'll try that and see if any bytes are saved :)</div>
    <div class="meta">Posted on 2003-08-22 10:07:36 by QvasiModo</div>
   </div>
   <div class="post" id="post-115051">
    <div class="subject"><a href="#post-115051">Primitive color picker control</a></div>
    <div class="body"><div class="quote"><br />It would be good to know exactly at wich point does it save bytes...</div><br />Each call takes some bytes, and push, too ;)<br />You'll never write:<br />mov , eax<br />mov , eax<br />mov , eax<br />....<br />You'll write a loop instead<br /><br />Why not use this techic in other ways? We're at asm :alright: <br /><br />P.S. I'm from 8bit old box, so it's just some kind of my madness :grin:</div>
    <div class="meta">Posted on 2003-08-22 18:29:06 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-116161">
    <div class="subject"><a href="#post-116161">Primitive color picker control</a></div>
    <div class="body">New update...</div>
    <div class="meta">Posted on 2003-08-29 15:15:37 by QvasiModo</div>
   </div>
  </div>
 </body>
</html>