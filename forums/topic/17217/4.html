<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>C like strings in MASM - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17217" />
  <link rel="prev" href="../?id=17217&amp;page=3" />  <link rel="next" href="../?id=17217&amp;page=5" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17217">C like strings in MASM</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=17217&amp;page=1" style="">&laquo;</a><a href="../?id=17217&amp;page=3" style="">&lt;</a><input type="hidden" name="id" value="17217" /><input type="number" name="page" min="1" max="7" step="1" value="4" onchange="this.form.submit();" /><a href="../?id=17217&amp;page=5">&gt;</a><a href="../?id=17217&amp;page=7">&raquo;</a></form>   <div class="post" id="post-133821">
    <div class="subject"><a href="#post-133821">C like strings in MASM</a></div>
    <div class="body">I think the flame war started long before I got here, you just decided to issue blanket statements about people who don't agree with you being idiots. Well, the fact is that the context that the question was asked in has nothing to do with cache issues at all, any instruction cache would be lost when the program branched to another procedure or API call so you are wrong, there is not a cache concern in dealing with the issue presented. I am very sorry that you take this as badly as you do but the fact is that he asked a question dealing with inline strings and calling functions. There is nothing in there about cache hits and the topic is completely unrelated.</div>
    <div class="meta">Posted on 2004-02-17 05:27:31 by donkey</div>
   </div>
   <div class="post" id="post-133826">
    <div class="subject"><a href="#post-133826">C like strings in MASM</a></div>
    <div class="body"><div class="quote">you just decided to issue blanket statements about people who don't agree with you being idiots.</div><br /><br />That's not at all what I said. Again, re-read until you understand what I said.<br />I merely said that people would agree with me because technically, what I say, makes sense. Read the Intel optimization manual's notes about cache usage, and you too will see that code and data cache are separate.<br /><br /><div class="quote">Well, the fact is that the context that the question was asked in has nothing to do with cache issues at all, any instruction cache would be lost when the program branched to another procedure or API call so you are wrong, there is not a cache concern in dealing with the issue presented.</div><br /><br />That is not at all a given, modern-day code caches are very large... 64 kb on Athlon, and 12k uOps on P4. It is entirely possible that both an API function and your own calling routine can co-exist in cache. Besides, even though code-cache may be lost, that is still not a reason to ignore data-cache issues.<br /><br /><div class="quote">I am very sorry that you take this as badly as you do but the fact is that he asked a question dealing with inline strings and calling functions. There is nothing in there about cache hits and the topic is completely unrelated.</div><br /><br />He asked about C-like strings in MASM. Depending on how you interpret it, he may have actually wanted to have them behave like in C, which is not using the code-section obviously. Since an alternative that was NOT like C was presented, I think it's very much on-topic to at least discuss the differences between this non-C variation and C-like macros. How else will he know what to choose?<br />Unless ofcourse you insist that the non-C macro was also off-topic, but I am not the one who brought that up.</div>
    <div class="meta">Posted on 2004-02-17 06:08:13 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133829">
    <div class="subject"><a href="#post-133829">C like strings in MASM</a></div>
    <div class="body"><div class="quote"><br />Unless ofcourse you insist that the non-C macro was also off-topic, but I am not the one who brought that up. </div><br /><br />Are you just dense ? He was the one who brought up the &quot;non-C macro&quot; in the original post. Maybe it is you who should reread this thread<br /><br /><div class="quote"><em>From the real topic here</em><br />Is there a <strong>macro</strong> for <strong>MASM/MASM32</strong> that lets you pass plain strings like this to a <strong>function</div><br /><br />So I hardly think saying &quot;Yes there is a macro in the MASM32 library that does this&quot; is off topic. If you want to write your own library go ahead, who cares. But if you want to answer a specific question about a specific library and go off on a tangent that has nothing at all to do with the topic at hand then you will be ridiculed. And no, an API call will not be within 64K of the calling function, but if you ever find one let me know.</div>
    <div class="meta">Posted on 2004-02-17 07:01:19 by donkey</div>
   </div>
   <div class="post" id="post-133832">
    <div class="subject"><a href="#post-133832">C like strings in MASM</a></div>
    <div class="body">Note also that he said:<br /><div class="quote">Just like in C</div><br />Needless to say that hutch's alternative does not qualify entirely.<br />It doesn't work JUST like in C. Which was my point, and you didn't seem to get it. So who are you calling dense here?<br /><br /><div class="quote">And no, an API call will not be within 64K of the calling function, but if you ever find one let me know.</div><br /><br />Don't tell me that you have never heard of the term &quot;set-associative&quot;, and still think that all 64k of the cached data has to be adjacent. I guess you don't know what a cacheline is either? Ah, it's all clear to me now... You argue so endlessly because you have not understood anything of what I said in the first place. Please, read those Intel manuals.</div>
    <div class="meta">Posted on 2004-02-17 07:06:43 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133835">
    <div class="subject"><a href="#post-133835">C like strings in MASM</a></div>
    <div class="body"><div class="quote"><em>Originally posted by Henk-Jan </em><br />Note also that he said:<br /><pre><code>Just like in C</code></pre><br />Needless to say that hutch's alternative does not qualify entirely.<br />It doesn't work JUST like in C. Which was my point, and you didn't seem to get it. So who are you calling dense here?<br /></div><br /><br />Well, I think (and I guess everyone else but you does), that the OP meant &quot;just like in C&quot; in terms of source code (for convenience), not in terms of what is going on beneath (which pipeline it goes through, etc).</div>
    <div class="meta">Posted on 2004-02-17 07:14:35 by Morris</div>
   </div>
   <div class="post" id="post-133838">
    <div class="subject"><a href="#post-133838">C like strings in MASM</a></div>
    <div class="body"><div class="quote">So who are you calling dense here?</div><br /><br />Well, it's not me that's for sure. I'm not the one worried about how many clocks I can save calling MessageBoxA. I have argued points like this with Hutch before, amiably and with give and take on both sides, for example my objection to the Switch/Case macro that is more C crap than I can handle and horribly inefficient, but this argument is just stupid.</div>
    <div class="meta">Posted on 2004-02-17 07:17:42 by donkey</div>
   </div>
   <div class="post" id="post-133841">
    <div class="subject"><a href="#post-133841">C like strings in MASM</a></div>
    <div class="body"><div class="quote">I'm not the one worried about how many clocks I can save calling MessageBoxA.</div><br /><br />Yes you are. I never brought up messageboxes at all, you did however.<br /><br /><div class="quote">for example my objection to the Switch/Case macro that is more C crap than I can handle and horribly inefficient</div><br /><br />Well yes, we discussed switch/case before, and came to the conclusion that it is almost impossible to write a MASM macro that is as efficient as VC++, let alone as convenient to use.<br /><br /><div class="quote">but this argument is just stupid.</div><br /><br />You think it is stupid to argue about technical issues considering asm code and its performance on an asm forum? What do you want to discuss then? The birds and the bees?</div>
    <div class="meta">Posted on 2004-02-17 07:23:01 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133845">
    <div class="subject"><a href="#post-133845">C like strings in MASM</a></div>
    <div class="body">Ah, MessageBoxA was an example, obviously you are not capable of seeing that. Would you rather that I provide a full list of all the Windows API functions that use pointers to strings, there are quite a few but obviously you are not capable of understanding that a representative example is just that. Maybe I should be more specific so you can understand in the future, or I'll just type slower. :rolleyes: <br /><br />You keep bringing up cache issues, f0dder was right that there were other perhaps better ways but decided to be insulting about it because he dislikes Hutch. It is his great failing that he chooses to answer a question by insulting the work of others. He is a very good coder from what I have seen of his work but he acts like a little kid sometimes and comes across like someone who is so inadequate that he must deride others to advance his opinion. In the same way you seem to have chosen to explain your point, by calling everyone who disagrees with you an idiot. Well, if you want to do that why not pick an issue that would actually make a difference then everyone can get pissed off at you for a good reason.<br /><br />I no longer use MASM and inline strings in GoAsm are properly handled, when I did use MASM I did not use macros at all, preferring hand coded applications and procedures. That did not give me the right to insult others or attack anybody elses work as you, f0dder and Scali seem to think is your right. If you don't like the way something is done in Hutch's MASM32 then write your own MASM32 library and push that one instead. You will find many many threads here in which I have said things like &quot;don't use that function it is terrible in this context&quot; and was not insulting about it and did not call anyone who disagreed an idiot.<br /><br />Your argument is stupid and pointless, there is no advantage to worrying about the instruction cache before a call to the API period.</div>
    <div class="meta">Posted on 2004-02-17 07:58:45 by donkey</div>
   </div>
   <div class="post" id="post-133849">
    <div class="subject"><a href="#post-133849">C like strings in MASM</a></div>
    <div class="body"><div class="quote">Ah, MessageBoxA was an example, obviously you are not capable of seeing that.</div><br /><br />But I also gave some examples of API functions that might not be slow, or did you miss that part aswell?<br /><br /><div class="quote">It is his great failing that he chooses to answer a question by insulting the work of others.</div><br /><br />He 'insults' work that he considers bad, and not recommendable to anymore. Still a lot better than insulting someone directly, without any good reason at all.<br /><br /><div class="quote">In the same way you seem to have chosen to explain your point, by calling everyone who disagrees with you an idiot.</div><br /><br />I haven't done that, and I suggest you stop bringing that up, especially since you seem to be the only one that misunderstood what I said, and repeatedly refuses to re-read the statement to understand what it really meant.<br /><br /><div class="quote">That did not give me the right to insult others or attack anybody elses work as you, f0dder and Scali seem to think is your right.</div><br /><br />As far as I can tell f0dder only made the 'junk' remark, which I would barely classify as an insult... and the other insults came from hutch. As far as I know I have not insulted anyone (at least not directly and/or on purpose), and I did not 'insult' anyone else's work, but merely gave some technical reasons (which are perfectly verifiable with the Intel manuals) why one would prefer certain macros in certain situations.<br /><br /><div class="quote">and was not insulting about it and did not call anyone who disagreed an idiot.</div><br /><br />Neither was I.<br /><br /><div class="quote">Your argument is stupid and pointless, there is no advantage to worrying about the instruction cache before a call to the API period.</div><br /><br />Correction, YOU find the argument stupid and pointless, but I'm sure that some people are interested in technical issues here.<br />Also, my statement was not about instruction-cache, but about data-cache, so at least get your facts straight (then again, you have not exactly given me the impression that you understand caching anyway... are you sure the argument is pointless? If you would open up to it, perhaps you can pick up a thing here and there).<br />Lastly, if you think that all API calls or string handling are not performance-critical by default, you are making a huge mistake.<br /><br />So either get your facts straight, or just stop talking about things you don't understand.</div>
    <div class="meta">Posted on 2004-02-17 08:27:04 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133852">
    <div class="subject"><a href="#post-133852">C like strings in MASM</a></div>
    <div class="body"><div class="quote"><em>Originally posted by Henk-Jan </em><br /><div class="quote"><em>Originally posted by Donkey</em><br />In the same way you seem to have chosen to explain your point, by calling everyone who disagrees with you an idiot.</div><br /><br />I haven't done that, and I suggest you stop bringing that up, especially since you seem to be the only one that misunderstood what I said, and repeatedly refuses to re-read the statement to understand what it really meant.</div><br /><br />Yes you did say that<br /><br /><div class="quote"><em>Originally posted by Henk-Jan </em><br />For the rest, any asm programmer that deliberately screws up cache-performance is an idiot, that's why all decent asm programmers must agree with me.</div><br /><br />I don't think I am the only one who understood full well what you meant and are now trying to obscure:<br /><br /><div class="quote"><em>Originally posted by Morris</em><br /><br />...Who are you to call me an idiot?...</div><br /><br /><div class="quote">He 'insults' work that he considers bad, and not recommendable to anymore. Still a lot better than insulting someone directly, without any good reason at all.</div><br /><br />He was being childish, insulting is never right when he was not provoked. If you will remember his insult came as a first response, not as a reply to anything anyone else had said. That is immature and uncalled for, and I think that he did mention Hutch directly in his post. He wanted to provoke a flame war and he got one.<br /><br /><div class="quote">Correction, YOU find the argument stupid and pointless, but I'm sure that some people are interested in technical issues here.</div><br /><br />No, everybody who has commented on it has only referred to the argument as stupid and pointless or completely off-topic. I have not seen a single post that expressed any interest in the folly of worrying about cache misses for api calls. If I missed a post that demonstrated somebodies interest in a pointless topic I appologize but from what I can tell it is only you who find this useless subject interesting and have chosen to hijack an otherwise mundane thread to demonstrate the fact that you can argue endlessly about something that makes no difference at all. And as an added bonus call anyone who disagrees an idiot.<br /><br />For example some other random comments from the thread:<br /><div class="quote"><em>Originally posted by Bogdan</em><br />I also do not care for the cache unless is inside one of my inner loops. Showing some message in a Messagebox on screen hardly qualifys for my &quot;inner loop&quot; definition. For the rest of my asm code i am quite happy to usee things that are simpler and much easyer to understand -- like some HLL constructs</div><br /><br /><div class="quote">	<em>Originally posted by bluffer</em><br />isnt there a crusade or some section in this forum apart from main isnt it hiro<br /><br />why dont you shift this hoopla over there so that all of them who want to fight it can fight it out without annoying the onlookers</div></div>
    <div class="meta">Posted on 2004-02-17 08:53:37 by donkey</div>
   </div>
   <div class="post" id="post-133854">
    <div class="subject"><a href="#post-133854">C like strings in MASM</a></div>
    <div class="body"><div class="quote">I don't think I am the only one who understood full well what you meant and are now trying to obscure</div><br /><br />Okay, so maybe there are two. Who cares?<br />I think I know better what I meant by what I said, since I was the one actually saying it.<br /><br /><div class="quote">No, everybody who has commented on it has only referred to the argument as stupid and pointless or completely off-topic.</div><br /><br />Were they referring to me, or to the others, such as yourself, who continually try to argue beside the point?<br />I cannot help that, I only mentioned technical facts. What about all the people that may have found it interesting, but HAVEN'T posted?<br /><br /><div class="quote">from what I can tell it is only you who find this useless subject interesting and have chosen to hijack an otherwise mundane thread to demonstrate the fact that you can argue endlessly about something that makes no difference at all. And as an added bonus call anyone who disagrees an idiot.</div><br /><br />First of all, you have proven time and time again that you do not understand the caching system. If anyone should find it interesting it should be you. Asm programmers not interested in cache... that's asm programmers not interested in how their CPU works... which is sort of a contradiction in terms, is it not? You really don't want to defend that statement, do you?<br />Secondly, drop the idiot-nonsense already. What do you think? If you say I called people who disagree with me an idiot often enough, that people will believe that?<br />Well in that case:<br />Donkey, stop calling everyone on this forum an idiot.<br />Donkey, stop calling everyone on this forum an idiot.<br />Donkey, stop calling everyone on this forum an idiot.<br />Donkey, stop calling everyone on this forum an idiot.<br />Donkey, stop calling everyone on this forum an idiot.<br />...<br />Donkey, stop calling everyone on this forum an idiot.<br /><br />You get the idea. And you dare to call other people childish? Sheesh. Grow up, please. And spend your time in a more useful way, like studying how cache works.</div>
    <div class="meta">Posted on 2004-02-17 09:11:23 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133856">
    <div class="subject"><a href="#post-133856">C like strings in MASM</a></div>
    <div class="body"><div class="quote">Were they referring to me, or to the others, such as yourself, who continually try to argue beside the point?</div><br />I believe Bogdan mentioned his opinion of cache concerns with API functions directly, so draw your own conclusion on that one.<br /><br /><div class="quote">First of all, you have proven time and time again that you do not understand the caching system. If anyone should find it interesting it should be you. Asm programmers not interested in cache... that's asm programmers not interested in how their CPU works... </div><br />Thank you but I understand enough to know that it is pointless to worry about the instruction cache before an API call.<br /><br /><div class="quote">You get the idea. And you dare to call other people childish? Sheesh. Grow up, please. And spend your time in a more useful way, like studying how cache works.</div><br />What did I do to provoke you, I only got involved in this thread's flame war when you decided to define what a good coder was and called everyone who disagreed an idiot. Maybe you should go back to more useful pursuits instead of thinking of new and original ways to insult people then trying to lie about your intentions later.</div>
    <div class="meta">Posted on 2004-02-17 09:24:55 by donkey</div>
   </div>
   <div class="post" id="post-133857">
    <div class="subject"><a href="#post-133857">to Henk-Jan</a></div>
    <div class="body"><strong>You</strong> call people an idot all the time, I should know because I'm frequently located at the receiving end.<br /><br />Now, if you touch that 'report this post to a moderator' link 1 more time or post any following post that does not involve the topic at hand but instead focuses on one of the posters then you're out of here.<br /><br />My patience has worn out. Reply at your own peril.</div>
    <div class="meta">Posted on 2004-02-17 09:27:15 by Hiroshimator</div>
   </div>
   <div class="post" id="post-133859">
    <div class="subject"><a href="#post-133859">C like strings in MASM</a></div>
    <div class="body"><div class="quote">You call people an idot all the time, I should know because I'm frequently located at the receiving end.</div><br /><br />Off-the-record perhaps. But I haven't spoken to you in ages. What do you know about me anyway?<br /><br /><div class="quote">or post any following post that does not involve the topic at hand</div><br /><br />Excuse me, but I think my analysis of cache behaviour other than in C  with a certain macro was quite on-topic. It's not my fault that people start claiming all kinds of things that I never said.<br />Someone put them up to this. And you don't do anything about it, other than perhaps banning me again. The most talented, experienced, knowledgable and helpful person on this forum, if he were given a chance. Why don't you tell liars like hutch, or people that don't even know that cache is set-associative, like donkey, to just shut up, and let people who provide valuable info, provide their valuable info?<br />Go ahead and ban me, I don't care. It's your loss.<br />Especially donkey's, because now he'll never find out how cache works, and how he can use it to his advantage. Hutch is beyond help anyway, he is so demented that he forgot that he can be and often is wrong.</div>
    <div class="meta">Posted on 2004-02-17 09:38:22 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133860">
    <div class="subject"><a href="#post-133860">C like strings in MASM</a></div>
    <div class="body"><div class="quote">or people that don't even know that cache is set-associative, like donkey, to just shut up, and let people who provide valuable info, provide their valuable info?</div><br /><br />Please don't assume to explain what I know or don't know, that is how this all started. And please don't use me as an excuse for your personal crusade. If your information was in the least bit valuable I would have gladly shut up, but it was more a tirade of insults than anything else. If you will notice before you decided to start calling people idiots I was very civil about the whole thing.</div>
    <div class="meta">Posted on 2004-02-17 09:54:14 by donkey</div>
   </div>
   <div class="post" id="post-133861">
    <div class="subject"><a href="#post-133861">C like strings in MASM</a></div>
    <div class="body">Christ...<br /><br />Okay, first things first - the macro I objected to was szText, not SADD - my bad. :stupid: . That macro, however, <strong>is</strong> junk, and I would have said that no matter who wrote it. Even if you want to put data in the code section, it's bad.<br /><br /><pre><code><br />szText MACRO Name, Text&#58;VARARG<br />LOCAL lbl<br />	jmp lbl<br />	Name db Text,0<br />	lbl&#58;<br />ENDM<br /></code></pre><br /><br />Fortunately, the SADD macro in more recent versions of the masm32 package does 'the right thing' - well, almost. Instead of getting to the data section by &quot;.data&quot; and then switching &quot;back&quot; again with &quot;.code&quot;, it would be better to implement it (or rather, the 'literal' macro) more like the CTEXT macro I posted - that way, you can use SADD and friends outside the code section, where it can be useful for things like building string pointer tables easily (think indexed error messages etc).<br /><br />As for the rest of the stuff in this thread - boy what a bunch of crap, from all sides. It's silly to say you have to write optimal code, and for most uses of a ctext/sadd type macro, speed won't matter. That's still no excuse to use a clearly inoptimal macro like szText, the extra bytes for the jmp would be much better used to put it in the .data section and do &quot;align 4&quot;. Scali, you need to remember that a whole lot of people here program in assembly not to squeeze the last drop of performance from the CPU, but because they like assembly or don't know any other languages. While we probably agree that this is somewhat silly, I think it's just fine, and there's no reason to shove HLL's down people's throaths.<br /><br />While I don't really fancy mixing code and data in the same section, I think it's an okay thing to do this (for read-only data anyway), where performance isn't critical. Donkey's example of self-contained procs are a good example of where this can be useful (note, though, that a SEGMENT+ENDS statement could be added inside or at least right after the proc, still keeping the data and code split up nicely in memory). What I object to, however, is when people continuously mix code and data, using JMPs to skip data. szText and PowerBasic EXEs are good examples of this junk. At least learn to place your data after a RET or before a procedure entrypoint.<br /><br />Btw,<br /><div class="quote"><br />In a portable executable file there is no mechanical seperation between data and code and the sections are defined by the read / write / execute attributes only. You can copy binary data into GlobalAlloc() memory and run it from there.<br /></div><br />- if you want to stay compatible with future processors, you should refrain from doing this. On AMD64 in PAE mode, per-page 'X' bit has *finally* been added to the IA-32 architecture, allowing for nonexecutable heap and stack. Time to use VirtualAlloc with the correct flags for your JITters. Besides, per-page X bit can be implemented on most existing x86 with some clever tricks, look at The Owl + friend's PAX project (and wkrakers NT4+ port and Teo/OpenBSD's &quot;I did not streal from PAX&quot; implementation). But sure, on around 99% of the existing win32 platforms, that kind of code will run just fine.<br /><br />As for the whole cache thing... dunno whether scali is right about code cached data not going into the data cache, but I guess he's right - it would be nice if you could specify the intel manual, section and page where it's mentioned, though. And sure it won't matter with your casual API call (not that API calls are the only place you can use invoke and ctext/sadd), and most likely not in 99% of the cases where you'd use a thing like ctext/sadd... that doesn't mean you shouldn't keep it in mind under other circumstances, though. (Oh, and do keep in mind that caches are set-associative and there's speculative reads/writes going on.)<br /><br />Oh and btw Donkey, I don't rely on HeapAlloc for everything; I promote it instead of Global/LocalAlloc (since those are deprecated), and I raise an eyebrow when people use VirtualAlloc in bad ways (like, allocating small buffers). Your fancy example in a previous thread seemed like pretty good example of <strong>when</strong> to use VirtualAlloc, since you needed a pretty custom memory management system.<br /><br />If the whole SGI yadda yadda blah must be brought in, remember the HP sv7 - it uses standard Xeon's for the rendering nodes, along with standard NVIDIA Quatro FX - standard PC hardware. And well, surprise surprise, the Onyx4 which hutch himself promoted, uses ATi video chips (the same stuff used on normal desktop &quot;taiwanese terrors&quot;) - <a target="_blank" href="http://www.xbitlabs.com/news/video/display/20030715001721.html">http://www.xbitlabs.com/news/video/display/20030715001721.html</a> . No, obviously a single/standard PC will not compete with a high-class expensive 'big iron', but PC hardware can.<br /><br />Also, it would be interesting to find some good information about the new NUMA (I think it's called) style PC hardware, whose purpose is to reduce some of the bus/memory bandwidth bottlenecks of SMP systems, by &quot;grouping&quot; CPUs and memory. Hey, if has a nice performance/price scale, who cares if it's junky old IA-32.<br /><br />As for the rest... pages of useless yadda-yadda. Yes, that means you too, scali. And obviously, this post will either be ignored or things will be taken from it out of context and twisted beyond belief.</div>
    <div class="meta">Posted on 2004-02-17 09:56:01 by f0dder</div>
   </div>
   <div class="post" id="post-133864">
    <div class="subject"><a href="#post-133864">C like strings in MASM</a></div>
    <div class="body"><div class="quote">Please don't assume to explain what I know or don't know, that is how this all started.</div><br /><br />Your statement about API functions not being within 64k of your own code made it painfully obvious. I did not assume anything, you handed it right to me.<br /><br /><div class="quote"> If your information was in the least bit valuable I would have gladly shut up, but it was more a tirade of insults than anything else.</div><br /><br />It would be, if you understood what it is about, perhaps?</div>
    <div class="meta">Posted on 2004-02-17 10:14:29 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133866">
    <div class="subject"><a href="#post-133866">C like strings in MASM</a></div>
    <div class="body"><div class="quote">you need to remember that a whole lot of people here program in assembly not to squeeze the last drop of performance from the CPU, but because they like assembly or don't know any other languages. While we probably agree that this is somewhat silly, I think it's just fine, and there's no reason to shove HLL's down people's throaths.</div><br /><br />No, but we don't have to accept it when such people try to decide for everyone what is important or not, do we?<br /><br /><div class="quote">dunno whether scali is right about code cached data not going into the data cache, but I guess he's right - it would be nice if you could specify the intel manual, section and page where it's mentioned, though.</div><br /><br />Ofcourse he's right. Especially on P4 it should be painfully obvious that L1 cache is not shared, since the code-cache is of an entirely different type. For older CPUs the same rules apply though.<br />See <a target="_blank" href="http://www.intel.com/design/pentium4/manuals/248966.htm,">http://www.intel.com/design/pentium4/manuals/248966.htm,</a> page 1-18 : &quot;The first level cache (nearest to the execution core) contains separate<br />caches for instructions and data.&quot;<br />page 2-5: &quot;Avoid mixing code and data&quot;<br />to name the two most important ones.<br /><br /><div class="quote">Hey, if has a nice performance/price scale, who cares if it's junky old IA-32.</div><br /><br />I do, I do!!! :)</div>
    <div class="meta">Posted on 2004-02-17 10:28:00 by Henk-Jan</div>
   </div>
   <div class="post" id="post-133868">
    <div class="subject"><a href="#post-133868">C like strings in MASM</a></div>
    <div class="body">Hi f0dder,<br /><br />Thank you for bringing some sanity back to this topic, I agree with everythng you said. Sorry about the HeapAlloc thing, it just seems that way from the posts I see and that we are both involved in answering.<br /><br />My only objection was to the personalized insults that were being thrown around without provocation and the lumping of everyone who disagrees with a coding strategy into a single category. Scali seems to assume that because I say that worrying about the instruction cache for an API call is pointless I didn't read the Intel manuals and must be an idiot. His method of explaining something is to throw out insults and arrogance then when somebody has the temerity to say it doesn't make a difference in the context of the question, he makes up his own question and calls them an idiot. Then when you take exception to being called an idiot he lies about his intention in the remark. A thoroughly distasteful person who has nothing to offer that I am interested in and it seems that no-one else is interested in his opinion either.<br /><br /><div class="quote">(note, though, that a SEGMENT+ENDS statement could be added inside or at least right after the proc, still keeping the data and code split up nicely in memory)</div><br /><br />Inline strings in GoAsm do not need the same treatment as MASM, GoAsm has this functionality built in and does not introduce the problem in the first place.</div>
    <div class="meta">Posted on 2004-02-17 10:48:46 by donkey</div>
   </div>
   <div class="post" id="post-133870">
    <div class="subject"><a href="#post-133870">C like strings in MASM</a></div>
    <div class="body"><div class="quote">because I say that worrying about the instruction cache for an API call is pointless I didn't read the Intel manuals and must be an idiot.</div><br /><br />I thought I said the issue was your self-inflicted 64kb cache statement (I never even mentioned instruction cache in the first place, it has nothing to do with the issue I explained, you are the only one bringing that up. Are you trying to argue with yourself? I surely won't argue this point, I never made it). That pretty much proves that you didn't read the manuals, or at least, did not understand them fully. And it's not that which would make you an idiot, but the fact that you would deny what is in the Intel manuals. As if you know it better than the guys that build the CPUs themselves?<br />Besides, you are the annoying distasteful blablah-whatever person here, by dragging personal issues along endlessly.<br />At least I have actually added valuable technical facts to this discussion. What have you added again, other than noise and slander?</div>
    <div class="meta">Posted on 2004-02-17 11:05:43 by Henk-Jan</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=17217&amp;page=1" style="">&laquo;</a><a href="../?id=17217&amp;page=3" style="">&lt;</a><input type="hidden" name="id" value="17217" /><input type="number" name="page" min="1" max="7" step="1" value="4" onchange="this.form.submit();" /><a href="../?id=17217&amp;page=5">&gt;</a><a href="../?id=17217&amp;page=7">&raquo;</a></form>  </div>
 </body>
</html>