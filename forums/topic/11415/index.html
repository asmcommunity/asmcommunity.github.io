<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>getcommandline returns 8.3 filename - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=11415" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=11415">getcommandline returns 8.3 filename</a></p>
   <div class="post" id="post-86321">
    <div class="subject"><a href="#post-86321">getcommandline returns 8.3 filename</a></div>
    <div class="body">hi there!<br /><br />i spent many hours reading this forum in the past and i'm happy there's such a nice place for assembly language programming on the web, with so many helpful people and valuable information.<br /><br />ok my problem:<br />i have told windows95 to open all &quot;*.bla&quot; files with myprogram.exe, so when i double click on such a file e.g. &quot;longfilename.bla&quot; and i invoke getcommandline i get &quot;c:\masm32\blah\myprogram.exe longfi~1.bla&quot; ....is there a possibility to get the _entire_ filename instead of the 8.3 format? or how could i easily find the original filename if i have the alias?<br /><br />since i'm pretty new to win32asm it's quite possible that there is a very obvious solution but really, i have no idea what it is.<br /><br /><br />i hope anybody can help me... thanks in advance &amp; have a nice day</div>
    <div class="meta">Posted on 2003-03-10 16:14:03 by c--</div>
   </div>
   <div class="post" id="post-86388">
    <div class="subject"><a href="#post-86388">getcommandline returns 8.3 filename</a></div>
    <div class="body">I've found that <strong>GetCommandLine</strong> returns filename (argv[0] if you may) based on where it is ran from. You can specficially see in Windows 2000, where you have Win32 shell (cmd.exe) and DOS shell (command.com). Any program ran from win32 shell (cmd.exe, explorer.exe, etc) would receive full filename. Anything ran from DOS shells (command.com, nc.exe, etc) would receive 8.3 filename.</div>
    <div class="meta">Posted on 2003-03-10 22:41:27 by comrade</div>
   </div>
   <div class="post" id="post-86410">
    <div class="subject"><a href="#post-86410">getcommandline returns 8.3 filename</a></div>
    <div class="body">c--,<br /><br />You can try the __getmainargs function provided by msvcrt.dll<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/showthread.php?s=&amp;goto=lastpost&amp;threadid=9510">http://www.asmcommunity.net/board/showthread.php?s=&amp;goto=lastpost&amp;threadid=9510</a><br /><br />Regards,<br /><br />Vortex</div>
    <div class="meta">Posted on 2003-03-11 02:05:44 by Vortex</div>
   </div>
   <div class="post" id="post-86968">
    <div class="subject"><a href="#post-86968">thank you for your responses.</a></div>
    <div class="body">i tried it with winxp and it seems like it's some sort of chance if it works or not. i don't know how to control which &quot;command&quot;-program windows uses. sometimes the argument was in 8.3 format and sometimes not, and once it even was only partially uppercase. the only thing i changed between these tests was the path to my testprogram.<br /><br />now i moved the program to it's &quot;final&quot; location on winxp and it seems to work, but i'm not able to tell you what was wrong, because for any reason winxp wont let me change the program assignment again. it always forces me to use the standard editor... i don't know.<br />but since it works now and it's only a small utility with no need to run error free on all computers, i will leave it this way and do further checks at a later time.<br /><br />thanks again, nice week to all<br /><br />c--</div>
    <div class="meta">Posted on 2003-03-13 16:41:04 by c--</div>
   </div>
  </div>
 </body>
</html>