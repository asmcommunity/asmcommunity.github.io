<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>dualquestion, more precise time and com-ports. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16901" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=16901">dualquestion, more precise time and com-ports.</a></p>
   <div class="post" id="post-131077">
    <div class="subject"><a href="#post-131077">dualquestion, more precise time and com-ports.</a></div>
    <div class="body">Hello all!<br />My first question is simply how i can get a more precise timer than the winAPI GetTickCount? The scenario is as follows, im writing a small proggie for my physics class, its supposed to messure the speed of an object. the program will receive a signal when the &quot;nose&quot; of the object brakes the photocell and another one when the &quot;tail&quot; has passed by. Since the object will be between 1 and 3 cm (0.39 to 1.18 inches) wide and the messurements needs to be quite accurate i will need a timer that counts at least 1/100 milliseconds. hope you got the idea =)!<br /><br />secondly im wondering if anybody knows a good tutorial or equivalant info on handling the com-ports.</div>
    <div class="meta">Posted on 2004-01-19 16:59:35 by sluggo</div>
   </div>
   <div class="post" id="post-131081">
    <div class="subject"><a href="#post-131081">dualquestion, more precise time and com-ports.</a></div>
    <div class="body">Hi sluggo,<br /><br />1)You should use RDTSC or QuerryPerformanceCounter API if you need under 1ms accuracy. <br />(didnt i answered this before ?)<br /><br />2)Windows OS is not suitable for RealTime operations, at least you should attempt and use an IRQ for the signals and that will most likely require programming a kernel mode driver,<br /><br />3)COM serial ports are too slow for this kind of under 1ms operations.<br /><br />Basically serial ports are safer sending data over long cables/wires but they are slow; while paralel ports are faster and for shorter cables/lines.<br /><br />4)We do not make other's homeworks.<br /><br />5)If you make progress on your own and get stucked somewhere and/or need general guidance ppl here will most likely help.</div>
    <div class="meta">Posted on 2004-01-19 17:32:15 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-131086">
    <div class="subject"><a href="#post-131086">dualquestion, more precise time and com-ports.</a></div>
    <div class="body">thank you!<br />and since i enjoy programming asm so much i wouldnt let anybody else do this homework =)!<br />what im looking for with the com port is not a continous flow of signals but start and stop ones. Do you think the low speed of the port could be make the results differ so much its not neglectable? thank you again for your help!</div>
    <div class="meta">Posted on 2004-01-19 18:25:26 by sluggo</div>
   </div>
   <div class="post" id="post-131091">
    <div class="subject"><a href="#post-131091">dualquestion, more precise time and com-ports.</a></div>
    <div class="body">From Windows I don't think something like <a target="_blank" href="http://www.internals.com/">WinIO</a> will work because the time measurement itself needs to be done at the driver level.  The port generates an interrupt and by the time that signal reaches user level code we have already lost the percision needed.<br /><br />I strongly suggest <a target="_blank" href="http://www.masmforum.com/website/tutorials/kmdtute/index.html"><strong>Four-F</strong>'s KMD tut's</a> if you are serious about making the measurement from windows.<br /><br />OTHO, an accurate solution from DOS should be very easy.  Download your favorite TSR proggie with ASM source, gut the meat, insert interrupt code using time stamp counter to measure time between interrupts, and done.</div>
    <div class="meta">Posted on 2004-01-19 19:22:35 by bitRAKE</div>
   </div>
   <div class="post" id="post-131098">
    <div class="subject"><a href="#post-131098">dualquestion, more precise time and com-ports.</a></div>
    <div class="body">Well, you don't say you're an EE student.<br /><br />If you are an EE student, I would suggest using a microcontroller with a timer/counter and a serial interface. It can send the captured information to the PC in a convenient format.<br /><br />If you've never used microcontrollers, a DOS system is the next best thing, as <strong>bitRAKE</strong> suggests.</div>
    <div class="meta">Posted on 2004-01-19 23:02:25 by tenkey</div>
   </div>
   <div class="post" id="post-131109">
    <div class="subject"><a href="#post-131109">dualquestion, more precise time and com-ports.</a></div>
    <div class="body">That being a clean DOS system - not a DOS TSR running under vm86 in windows.</div>
    <div class="meta">Posted on 2004-01-20 01:38:07 by f0dder</div>
   </div>
  </div>
 </body>
</html>