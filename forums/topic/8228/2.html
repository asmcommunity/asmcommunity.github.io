<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>VESA doubt - .com files - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8228" />
  <link rel="prev" href="../?id=8228&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=8228">VESA doubt - .com files</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=8228&amp;page=1" style="">&laquo;</a><a href="../?id=8228&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="8228" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-76463">
    <div class="subject"><a href="#post-76463">VESA doubt - .com files</a></div>
    <div class="body">You should try these:<br /><br />INT 10 0E-- - VIDEO - TELETYPE OUTPUT<br /><br /><br />Category: V - video<br /><br />Inp.:<br />	AH = 0Eh<br />	AL = character to write<br />	BH = page number<br />	BL = foreground color (graphics modes only)<br />Desc:	display a character on the screen, advancing the cursor and scrolling<br />	  the screen as necessary<br />Notes:	characters 07h (BEL), 08h (BS), 0Ah (LF), and 0Dh (CR) are interpreted<br />	  and do the expected things<br />	IBM PC ROMs dated 4/24/81 and 10/19/81 require that BH be the same as<br />	  the current active page<br /><br /><br /><br /><br /><br />INT 10 13-- - VIDEO - WRITE STRING (AT and later,EGA)<br /><br /><br />Category: V - video<br /><br />Inp.:<br />	AH = 13h<br />	AL = write mode<br />	   bit 0: update cursor after writing<br />	   bit 1: string contains alternating characters and attributes<br />	   bits 2-7: reserved (0)<br />	BH = page number<br />	BL = attribute if string contains only characters<br />	CX = number of characters in string<br />	DH,DL = row,column at which to start writing<br />	ES:BP -&gt; string to write<br />Notes:	recognizes CR, LF, BS, and bell; for the ET4000 BIOS, scrolling,<br />	  backspace, and CR only take place in the active page<br />	also available PC or XT with EGA or higher<br />	HP 95LX only supports write mode 00h<br />BUG:	on the IBM VGA Adapter, any scrolling which may occur is performed on<br />	  the active page rather than the requested page</div>
    <div class="meta">Posted on 2003-01-15 11:31:50 by Despero</div>
   </div>
   <div class="post" id="post-76479">
    <div class="subject"><a href="#post-76479">VESA doubt - .com files</a></div>
    <div class="body">Hello Despero.<br /><br />Thanks for reply.<br />I have try your examples and are OK.<br /><br />Do you know how can i use True Type Fonts ?<br /><br />Thanks very much,Manos.</div>
    <div class="meta">Posted on 2003-01-15 13:55:19 by Anonymous</div>
   </div>
   <div class="post" id="post-76486">
    <div class="subject"><a href="#post-76486">VESA doubt - .com files</a></div>
    <div class="body">I think you need to create a function to load the true type font file and draw each character from string.<br />I'll try to find some code about ttf.</div>
    <div class="meta">Posted on 2003-01-15 14:23:11 by Despero</div>
   </div>
   <div class="post" id="post-76494">
    <div class="subject"><a href="#post-76494">VESA doubt - .com files</a></div>
    <div class="body">Thanks for your interest.<br /><br />Manos.</div>
    <div class="meta">Posted on 2003-01-15 15:08:13 by Anonymous</div>
   </div>
   <div class="post" id="post-77443">
    <div class="subject"><a href="#post-77443">VESA doubt - .com files</a></div>
    <div class="body">Hello Manos!<br /><br />I didn't find anything about true type fonts yet!<br />But you can see anything interesting in <a target="_blank" href="http://sealsystem.sourceforge.net/">http://sealsystem.sourceforge.net/</a><br />It use true type font, and come with source, but it's not in assembly, it's i c++<br />i think!<br /><br />I'm still looking for true type fonts and asm!<br /><br />Regards!<br /><br />Despero.</div>
    <div class="meta">Posted on 2003-01-20 19:20:00 by Despero</div>
   </div>
   <div class="post" id="post-77472">
    <div class="subject"><a href="#post-77472">VESA doubt - .com files</a></div>
    <div class="body">Thank you Despero.<br /><br />Manos.</div>
    <div class="meta">Posted on 2003-01-21 00:33:02 by Anonymous</div>
   </div>
   <div class="post" id="post-84994">
    <div class="subject"><a href="#post-84994">BitBlt</a></div>
    <div class="body">Hello Despero.<br /><br />I am writing a BitBlt function.I use linear frame buffer.<br />Can you send me an example,if know about it ?<br /><br />Regards,Manos.</div>
    <div class="meta">Posted on 2003-03-04 11:08:47 by Anonymous</div>
   </div>
   <div class="post" id="post-85018">
    <div class="subject"><a href="#post-85018">VESA doubt - .com files</a></div>
    <div class="body">Hello Manos!<br /><br />Try this 16 bit example.<br /><br />; begin<br /><br />;I didn't test yet.<br />; this moves a rectangle<br />; x1, y1: start position<br />; x2, y2: end position<br />; w1 : Width, h1 : Height<br />; sw : Screen width<br />; vm : 8, 16 or 32 bits video mode - assume 1 to 8 bits,2 to 16 or 4 to 32.<br />; es and ds point to buffer segment<br />; If you code 32 bits programs try to use 32 bit registers. :)<br />; You can use movsw or movsd to speed up the code.<br />; not optimized.<br /><br />;saving registers<br />push ds<br />push es<br />push di<br />push si<br />push ax<br />push bx<br />push cx<br />push dx<br /><br /><br /><br /><br />mov bx, (segment of linear video buffer)<br />mov ds,bx<br />mov bx, (segment of temp buffer); to avoid overwriting the selected rectangle<br />mov es,bx<br />xor di,di ; es:di --&gt; 0:0 coordinates of temp buffer<br /><br /><br />mov ax,<br />mul <br />add ax,<br />mul <br />mov si,ax<br />mov cx,<br />mov ax,<br />mul <br />mov ,ax<br /><br />loop1: ;loop1 copies rectangle to temp buffer<br />  push cx<br />  mov cx,<br />  rep movsb<br />  add si,<br />  pop cx<br />loop loop1<br /><br /><br />mov bx, (segment of linear video buffer)<br />mov es,bx<br />mov bx, (segment of temp buffer); to avoid overwriting the selected rectangle<br />mov ds,bx<br />xor si,si<br />mov ax,<br />mul <br />add ax,<br />mul <br />mov di,ax<br /><br />mov cx,<br /><br />loop2:  ;loop2 copies temp buffer to linear video buffer<br />   push cx<br />   mov cx,<br />   rep movsb<br />   add di,<br />   pop cx<br />loop loop2<br /><br />pop dx<br />pop cx<br />pop bx<br />pop ax<br />pop si<br />pop di<br />pop es<br />pop ds<br /><br /><br />;data for test<br /><br />x1 dw 10<br />y1 dw 10<br />x2 dw 100<br />y2 dw 100<br />w1 dw 50<br />h1 dw 15<br />vm dw 1<br />sw dw 800<br /><br />; end<br /><br />Regards,<br />Despero.</div>
    <div class="meta">Posted on 2003-03-04 13:23:19 by Despero</div>
   </div>
   <div class="post" id="post-85033">
    <div class="subject"><a href="#post-85033">VESA doubt - .com files</a></div>
    <div class="body">Have looked at the kelvar example from the FASM website? There are a few blit functions, both for linear and banked VESA framebuffers, controlled in 32-bit real mode (in &quot;system\video.inc&quot;). BTW I haven't got much feedback about this one, altough one day I was asking people to test it, because I'm still not sure that my latest unREAL tricks would work everywhere. Can you test it for me? (of course you need the true real mode DOS to run it) Please let me know how does it work and on what processor etc.</div>
    <div class="meta">Posted on 2003-03-04 14:40:55 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-85041">
    <div class="subject"><a href="#post-85041">VESA doubt - .com files</a></div>
    <div class="body">Thanks Despero,thanks Privalov.<br /><br />I 'll test the codes and i 'll post reply when i have results.<br /><br />Regards,Manos.</div>
    <div class="meta">Posted on 2003-03-04 15:32:20 by Anonymous</div>
   </div>
   <div class="post" id="post-85641">
    <div class="subject"><a href="#post-85641">VESA doubt - .com files</a></div>
    <div class="body">Hello Despero.<br /><br />I am writing an OS in UnReal Mode and i use linear/flat buffer of VESA.<br />I load edi with PhysBasePtr of ModeInfoBlock structure and i plot pixels<br />using : mov ,bx  ;bx=16 bits color.<br />This works OK,but i have a query.The PhysBasePtr points at 3825205248 <br />of memory.Where is this  locality?<br /><br />Regards,Manos.</div>
    <div class="meta">Posted on 2003-03-07 15:28:23 by Anonymous</div>
   </div>
   <div class="post" id="post-86128">
    <div class="subject"><a href="#post-86128">VESA doubt - .com files</a></div>
    <div class="body">Hello Manos,<br />I'm not sure about this, so look what de VBE(core functions) documentation say about it:<br /><br /><br />PhysBasePtr dd ? ; physical address for flat memory frame buffer<br /><br />The PhysBasePtr is a 32-bit physical address of the start of frame buffer memory when the controller is in flat frame buffer memory mode. If this mode is not available, then this field will be zero. Note that the physical address cannot be used directly by the application, but must be translated by an operating system service to a linear address that can be used directly by the application (ie: the OS must create the page tables to map in this memory). Under a DPMI compatible environment this is done with DPMI function 0x800. Note also that it is possible for<br />the linear framebuffer memory to start at different locations for different modes.<br /><br /><br />Regards, <br />Despero</div>
    <div class="meta">Posted on 2003-03-09 19:46:42 by Despero</div>
   </div>
   <div class="post" id="post-86172">
    <div class="subject"><a href="#post-86172">VESA doubt - .com files</a></div>
    <div class="body">Hello Despero.<br /><br />I have the VBE documentation.I know all that you tell me.<br />My query is where is the address 3825205248 that points <br />the PhysBasePtr.<br />I use this number directly,as is,in Flat Real Mode,and it works OK.<br />I think that this address is in video card memory.<br /><br />Regards,Manos.</div>
    <div class="meta">Posted on 2003-03-10 01:15:50 by Anonymous</div>
   </div>
   <div class="post" id="post-86295">
    <div class="subject"><a href="#post-86295">VESA doubt - .com files</a></div>
    <div class="body">Hello Manos,<br /><br />I think you are right, but in my pc the motherboard has onboard devices, and the motherboard shares RAM with video device.<br /><br />I think this value will change from a computer to other.<br /><br />Regards,<br />Despero</div>
    <div class="meta">Posted on 2003-03-10 13:32:10 by Despero</div>
   </div>
   <div class="post" id="post-86307">
    <div class="subject"><a href="#post-86307">VESA doubt - .com files</a></div>
    <div class="body">Hello Despero.<br /><br />Yes,i think that video card controls this pointer.<br /><br />Regards,<br />Manos.</div>
    <div class="meta">Posted on 2003-03-10 15:34:53 by Anonymous</div>
   </div>
   <div class="post" id="post-113781">
    <div class="subject"><a href="#post-113781">Hello</a></div>
    <div class="body">What about your OS?<br />When I'll have a chance to test it?</div>
    <div class="meta">Posted on 2003-08-12 22:26:55 by Despero</div>
   </div>
   <div class="post" id="post-113794">
    <div class="subject"><a href="#post-113794">VESA doubt - .com files</a></div>
    <div class="body">Hello Despero.<br /><br />I have stop my OS because i have not any code for PS/2 port for mouse.<br />If i find any code,i 'll continue.<br />Now,i am building controls.<br />Have a look in Custom Controls Forum in ManosGrid and GenericGrid.<br /><br />Thanks for your interest.<br /><br />Regards,<br />Manos.</div>
    <div class="meta">Posted on 2003-08-13 01:34:42 by Anonymous</div>
   </div>
   <div class="post" id="post-113835">
    <div class="subject"><a href="#post-113835">PS/2 mouse</a></div>
    <div class="body">Hello,<br /><br />You can find a drive with source and I think some explanation in:<br /><a target="_blank" href="http://cutemouse.sourceforge.net/index.html">http://cutemouse.sourceforge.net/index.html</a><br /><br />the source is in asm, but I think it's not in fasm structure.<br /><br />regards,<br />Despero</div>
    <div class="meta">Posted on 2003-08-13 11:09:55 by Despero</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=8228&amp;page=1" style="">&laquo;</a><a href="../?id=8228&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="8228" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>