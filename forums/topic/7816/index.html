<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>API's make my code grow - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7816" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=7816">API's make my code grow</a></p>
   <div class="post" id="post-56709">
    <div class="subject"><a href="#post-56709">API's make my code grow</a></div>
    <div class="body">When I am programming, why is it that my files get several K bigger evey time I include one little win32 api call, isn't most of the work supposed to be contained in my dlls?  <br /><br />Besides using loadlibrary functions, is there other ways of compacking my code?</div>
    <div class="meta">Posted on 2002-09-08 21:10:58 by zenwaters</div>
   </div>
   <div class="post" id="post-56718">
    <div class="subject"><a href="#post-56718">API's make my code grow</a></div>
    <div class="body">You could use a compression programm like <a target="_blank" href="http://upx.sf.net">UPX</a>.</div>
    <div class="meta">Posted on 2002-09-09 00:55:14 by bazik</div>
   </div>
   <div class="post" id="post-56726">
    <div class="subject"><a href="#post-56726">API's make my code grow</a></div>
    <div class="body">Yes but &quot;several KB's for each API call&quot; will be a challenge even for UPX. :grin:</div>
    <div class="meta">Posted on 2002-09-09 03:30:52 by Maverick</div>
   </div>
   <div class="post" id="post-56729">
    <div class="subject"><a href="#post-56729">API's make my code grow</a></div>
    <div class="body">You can squeeze some VB apps to a 10th of their size with UPX ;)</div>
    <div class="meta">Posted on 2002-09-09 03:48:24 by bazik</div>
   </div>
   <div class="post" id="post-56731">
    <div class="subject"><a href="#post-56731">API's make my code grow</a></div>
    <div class="body">Yes, I know Markus Oberhumer's UPX and the NRV compression that it uses. ;)<br /><br />I was just joking on the original poster's affirmation that his EXE's grow of &quot;several KB's for each API call&quot; that he includes. :)</div>
    <div class="meta">Posted on 2002-09-09 03:56:01 by Maverick</div>
   </div>
   <div class="post" id="post-56743">
    <div class="subject"><a href="#post-56743">API's make my code grow</a></div>
    <div class="body">zenwaters,<br />your question lacks logic, if you think about it you will see why. When you call &quot;little&quot; API calls, are you including more lib and inc files to make that api call possible? Or maybe you have to do some parameter setups before calling that API? <br /><br />When you make an API call, the call itself uses 10's of bytes, *not* 1000's of bytes. If it is using K's of bytes, then you are either doing lots of prepatory work, or you are doing something wrong.....</div>
    <div class="meta">Posted on 2002-09-09 06:12:45 by sluggy</div>
   </div>
   <div class="post" id="post-56768">
    <div class="subject"><a href="#post-56768">API's make my code grow</a></div>
    <div class="body">Zen,<br /><br />I agree with Sluggy here, API calls only increase your code size by a few bytes at a time, push/call instruction size etc ....<br /><br />If you can give us some idea of what you are doing or paste in a small amount of your code, maybe someone can help you track down the problem.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-09-09 07:42:25 by hutch--</div>
   </div>
   <div class="post" id="post-56772">
    <div class="subject"><a href="#post-56772">API's make my code grow</a></div>
    <div class="body">Afternoon, zenwaters.<br /><br />The only way your proggys would increase in size by a few kbs each time you included an API call, is if you were actually using a static lib. Anything from the user32/kernal32/etc32 libs won't increase the size of your proggys dramatically.<br /><br />I can only think of two ways inwhich your proggy is increasing in size.<br />1) you <strong>are</strong> using a static lib (i.e. like d3dx8.lib).<br />2) You're actually adding buffers/structs in your .data section for use with these APIs.<br /><br />What're the libs you're including in your proggy? We'd be able to give you a more accurate assessment of what's happening, if we knew;).<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2002-09-09 08:04:50 by Scronty</div>
   </div>
   <div class="post" id="post-56868">
    <div class="subject"><a href="#post-56868">API's make my code grow</a></div>
    <div class="body">My apolgoies all - <br /><br />I seem to have made a mistake here, sorry... what I thought was happening wasn't when I looked at it a second time.<br /><br />For some reason I thought when I compiled my PE .exe file it got signifigantly bigger with each .dll call that I added into my source, but that's not the case...  I looked at it again, with one api call my .exe was 16k.  If I add another, it is still 16k, and another, still 16k.<br /><br />Sorry for the confusion, thanks for your willingness to help! :alright:</div>
    <div class="meta">Posted on 2002-09-09 20:50:07 by zenwaters</div>
   </div>
   <div class="post" id="post-56878">
    <div class="subject"><a href="#post-56878">API's make my code grow</a></div>
    <div class="body">zen,<br /><br />If you initial size is 16k, it sounds like you are using one of the C/C++ linkers that is aligned differently, try using the linker from MASM32 that is from the win98ddk, it will drop your file size a lot as it uses alignment suitable for VxD files.<br /><br />You can also look up the options on a C/C++ linker to change the alignment to get the size down.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-09-09 22:30:53 by hutch--</div>
   </div>
   <div class="post" id="post-56899">
    <div class="subject"><a href="#post-56899">API's make my code grow</a></div>
    <div class="body">I rather think he made the typical &quot;newbie&quot; mistake and used only initialized buffers ;)</div>
    <div class="meta">Posted on 2002-09-10 00:50:28 by bazik</div>
   </div>
  </div>
 </body>
</html>