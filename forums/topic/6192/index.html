<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>hook question - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6192" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=6192">hook question</a></p>
   <div class="post" id="post-44504">
    <div class="subject"><a href="#post-44504">hook question</a></div>
    <div class="body">hi<br />i am making program that will monitor and log what button<br />controls are pressed in whole system (all posible programs),<br />i think the best way to do this is by using system wide hook, <br />but i am not sure which one should i use and also which <br />message should i track down<br />when someone press button on say calculator app, what message<br />is generated? is this message different if button is maded<br />using resource script than button created by winapi (CreateWindow())<br />also are those messages sent to parent window (of button)<br />on msg queue or directly to the windows procedure?<br /><br />many thanks</div>
    <div class="meta">Posted on 2002-06-21 06:58:59 by Mikky</div>
   </div>
   <div class="post" id="post-44572">
    <div class="subject"><a href="#post-44572">hook question</a></div>
    <div class="body">When you click a button a lot of messages are generated, and they are different if you click with left mouse button or right. If you want to intercept the command given to the application you can grab WM_COMMAND message and check if HIWORD(wParam) is equal to BN_CLICKED notification code.</div>
    <div class="meta">Posted on 2002-06-21 12:07:23 by LuHa</div>
   </div>
   <div class="post" id="post-44578">
    <div class="subject"><a href="#post-44578">hook question</a></div>
    <div class="body">yes that message is exacly what i need<br />now what hook should i use? <br />is this message sent on message queue or directly to wnd procedure</div>
    <div class="meta">Posted on 2002-06-21 12:24:05 by Mikky</div>
   </div>
   <div class="post" id="post-44635">
    <div class="subject"><a href="#post-44635">hook question</a></div>
    <div class="body">If you're to log the button clicks, pick BM_CLICK or WM_COMMAND with BN_CLICKED. (You aren't going to log the button presses, do you?) <br /><br />As for what to hook, I think both WH_CALLWNDPROCRET and WH_CALLWNDPROC	 work. WH_GETMESSAGE also meets the need but WH_CALLWNDPROCRET and WH_CALLWNDPROC are better imo.<br /><br />If the user eventually uses the mouse and clicks on a button then the message is sent to message queue and then dispatched to the window procedure.</div>
    <div class="meta">Posted on 2002-06-21 21:42:34 by C.Z.</div>
   </div>
   <div class="post" id="post-44667">
    <div class="subject"><a href="#post-44667">hook question</a></div>
    <div class="body">I recently played a bit with hooks... I wasn't able to get WH_GETMESSAGE<br />to fire at all, but WH_CALLWNDPROC* seemed to work just fine.</div>
    <div class="meta">Posted on 2002-06-22 05:03:25 by f0dder</div>
   </div>
  </div>
 </body>
</html>