<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Lempel-Ziv 77 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=6681" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=6681">Lempel-Ziv 77</a></p>
   <div class="post" id="post-48286">
    <div class="subject"><a href="#post-48286">Lempel-Ziv 77</a></div>
    <div class="body">Attached is LZ-77 implementation.</div>
    <div class="meta">Posted on 2002-07-18 00:35:18 by comrade</div>
   </div>
   <div class="post" id="post-48319">
    <div class="subject"><a href="#post-48319">Lempel-Ziv 77</a></div>
    <div class="body">Good contribution comrade. ;)</div>
    <div class="meta">Posted on 2002-07-18 03:33:24 by Maverick</div>
   </div>
   <div class="post" id="post-50774">
    <div class="subject"><a href="#post-50774">Lempel-Ziv 77</a></div>
    <div class="body">Yep,<br /><br />This is a good piece of code that works well, I have downloaded it and tested it and it works fine.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-07-29 21:24:48 by hutch--</div>
   </div>
   <div class="post" id="post-50824">
    <div class="subject"><a href="#post-50824">Lempel-Ziv 77</a></div>
    <div class="body">Great piece of code comrade,<br /><br />I was just wondering about the patents on the limpel - ziv algorithm , if this was ever used in a commercial application, wouldnt there be a problem?</div>
    <div class="meta">Posted on 2002-07-30 04:13:25 by Terab</div>
   </div>
   <div class="post" id="post-50838">
    <div class="subject"><a href="#post-50838">Lempel-Ziv 77</a></div>
    <div class="body">Sorry to say, but I got a bug with a file...<br /><br /><div class="quote"><br />C:\&gt;pack d:\output\top\topfr.zip c:\tst.l77<br />LZ77 Packer<br />Built on 07/18/02 01:30:44<br />Version 1.0<br />Coded by comrade &lt;comrade2k@hotmail.com&gt;<br />Web: <a target="_blank" href="http://euro.comrade64.com/">http://euro.comrade64.com/</a><br />     <a target="_blank" href="http://comrade64.cjb.net/">http://comrade64.cjb.net/</a><br />     <a target="_blank" href="http://comrade.ownz.com/">http://comrade.ownz.com/</a><br />     <a target="_blank" href="http://comrade.win32asm.com/">http://comrade.win32asm.com/</a><br />     <a target="_blank" href="http://comrade.hpacv.dk/">http://comrade.hpacv.dk/</a><br />     <a target="_blank" href="http://www.comrade64.com/">http://www.comrade64.com/</a><br />IRC: #asm, #coders, #win32asm on EFnet<br /><br />Error at 004011ECh<br />Registers:<br />eax = 1FFFFFFFh ebx = 10020020h ecx = 0012FFBCh<br />edx = 00130608h esp = 0012FF7Ch ebp = 0012FF9Ch<br />esi = 00000000h edi = 3002001Fh<br />Recovering...<br /></div><br /><br />But it really works well with most files!</div>
    <div class="meta">Posted on 2002-07-30 07:09:49 by JCP</div>
   </div>
   <div class="post" id="post-50839">
    <div class="subject"><a href="#post-50839">Lempel-Ziv 77</a></div>
    <div class="body">Really nice and fast!<br /><br /><pre><code><br />C&#58;\temp\Lz77&gt;pack test.dxf test.out<br />LZ77 Packer<br />Built on 07/18/02 01&#58;30&#58;44<br />Version 1.0<br />Coded by comrade &lt;comrade2k@hotmail.com&gt;<br />Web&#58; &#91;url&#93;http&#58;//euro.comrade64.com/&#91;/url&#93;<br />     &#91;url&#93;http&#58;//comrade64.cjb.net/&#91;/url&#93;<br />     &#91;url&#93;http&#58;//comrade.ownz.com/&#91;/url&#93;<br />     &#91;url&#93;http&#58;//comrade.win32asm.com/&#91;/url&#93;<br />     &#91;url&#93;http&#58;//comrade.hpacv.dk/&#91;/url&#93;<br />     &#91;url&#93;http&#58;//www.comrade64.com/&#91;/url&#93;<br />IRC&#58; #asm, #coders, #win32asm on EFnet<br /><br />C&#58;\temp\Lz77&gt;dir test.*<br /> Datentr?ger in Laufwerk C&#58; hat keine Bezeichnung.<br /> Datentr?gernummer&#58; 08AD-42A2<br /><br /> Verzeichnis von C&#58;\temp\Lz77<br /><br />22.04.2002  13&#58;14           59.145.568 test.dxf<br />30.07.2002  14&#58;15            6.608.469 test.out<br />               2 Datei&#40;en&#41;     65.754.037 Bytes<br />               0 Verzeichnis&#40;se&#41;,  30.325.571.584 Bytes frei<br /><br />C&#58;\temp\Lz77&gt;<br /></code></pre><br /><br />AutoCAD produces such bloated files :)</div>
    <div class="meta">Posted on 2002-07-30 07:16:25 by bazik</div>
   </div>
   <div class="post" id="post-50847">
    <div class="subject"><a href="#post-50847">Lempel-Ziv 77</a></div>
    <div class="body">Perhaps readiosyses bug is a problem with the memory allocation in case of incompressible<br />data?<br /><br />Also comrade, why use GlobalAlloc instead of HeapAlloc? *nag* *nag*</div>
    <div class="meta">Posted on 2002-07-30 07:52:50 by f0dder</div>
   </div>
   <div class="post" id="post-50875">
    <div class="subject"><a href="#post-50875">Lempel-Ziv 77</a></div>
    <div class="body">because HeapAlloc limits how much you can allocate, or atleast on my windows xp.</div>
    <div class="meta">Posted on 2002-07-30 11:12:38 by Qages</div>
   </div>
   <div class="post" id="post-50880">
    <div class="subject"><a href="#post-50880">Lempel-Ziv 77</a></div>
    <div class="body">Thats impossible, because Local/GlobalAlloc call HeapAlloc internally :)</div>
    <div class="meta">Posted on 2002-07-30 11:32:21 by bazik</div>
   </div>
   <div class="post" id="post-50882">
    <div class="subject"><a href="#post-50882">Lempel-Ziv 77</a></div>
    <div class="body">one time i HeapAlloc  over a megabyte, it crashed, but when i changed the code to globalalloc it didnt crash. ... i tried it 2 times it crashed with HeapAlloc , but not with global, hummmph</div>
    <div class="meta">Posted on 2002-07-30 11:35:35 by Qages</div>
   </div>
   <div class="post" id="post-50884">
    <div class="subject"><a href="#post-50884">Lempel-Ziv 77</a></div>
    <div class="body">perhaps you've run the HeapAlloc (very) shortly after allocating a *huge*<br />amount of memory? I can probably get away with allocating a 512meg<br />chunk (or at least a 256meg chunk), but not twice in a row - and not<br />immediately after freeing the other one (windows will have to do some<br />cleanup stuff first, which isn't done *exactly* at the memory free calls -<br />whether you're using Global/Local* or Heap*). Also, was this on NT or 9x?<br />On NT, Global/LocalAlloc go very quickly to HeapAlloc after some parameter<br />conversion (and HeapAlloc is forwarded by kernel32 to NTDLL:RtlAllocateHeap<br />or similar). On 9x it's somewhat different, and I haven't yet studied the<br />details clearly.</div>
    <div class="meta">Posted on 2002-07-30 11:40:23 by f0dder</div>
   </div>
   <div class="post" id="post-50885">
    <div class="subject"><a href="#post-50885">Lempel-Ziv 77</a></div>
    <div class="body">im windows xp. i just allocated it and it crashed with heap, i dunno, so i always use global</div>
    <div class="meta">Posted on 2002-07-30 11:43:26 by Qages</div>
   </div>
   <div class="post" id="post-50886">
    <div class="subject"><a href="#post-50886">Lempel-Ziv 77</a></div>
    <div class="body">Show a sample of a crashing HeapAlloc call, please.</div>
    <div class="meta">Posted on 2002-07-30 11:48:50 by f0dder</div>
   </div>
   <div class="post" id="post-50888">
    <div class="subject"><a href="#post-50888">Lempel-Ziv 77</a></div>
    <div class="body">i dont remember what program it did it on, but i remember it did crash with heapalloc.</div>
    <div class="meta">Posted on 2002-07-30 11:58:24 by Qages</div>
   </div>
   <div class="post" id="post-50906">
    <div class="subject"><a href="#post-50906">Lempel-Ziv 77</a></div>
    <div class="body"><strong><u>Readiosys</strong></u>, could you e-mail those files to me please? I am also on IRC #win32asm EFnet, so you can DCC Send them as well.<br />As I can see from the crash info, <strong><u>esi</strong></u> is 0, so it was unable to allocate the required memory. It can be because the file size is too large, or is 0, or it could not open the input file.</div>
    <div class="meta">Posted on 2002-07-30 12:54:20 by comrade</div>
   </div>
   <div class="post" id="post-50913">
    <div class="subject"><a href="#post-50913">Lempel-Ziv 77</a></div>
    <div class="body">Sorry !<br />It was all my fault there...<br />Somebody deleted a file I presumed to be there... I put it on the right place and all went ok...<br /><br />But there is a problem though... if the input file doesn't exist (or can't be opened), it crashes...<br />After a quick look to the code, you don't seem to check the CreateFile return value to know if the file was sucessfully opened...<br /><br /><pre><code><br />	invoke	CreateFile, &#91;argv+04h&#93;, GENERIC_READ, FILE_SHARE_READ, 0, OPEN_EXISTING, 0, 0<br />	mov	&#91;hFileIn&#93;, eax<br />	invoke	CreateFileMapping, eax, 0, PAGE_READONLY, 0, 0, 0<br />	mov	&#91;hFileMapIn&#93;, eax<br />	invoke	MapViewOfFile, eax, FILE_MAP_READ, 0, 0, 0<br />	mov	&#91;dwFileIn&#93;, eax<br />	invoke	GetFileSize, &#91;hFileIn&#93;, 0<br />	mov	&#91;dwUnpackedSize&#93;, eax<br /></code></pre><br /><br />The error wasn't very explicit about this missing file... so I didn't even bothered to check if it was at the right place...<br />I prefer this, as it is not a problem to the compression code and will avoid you debugging pain, but it deserves a little fix in the public version, imho. ;)</div>
    <div class="meta">Posted on 2002-07-30 13:35:37 by JCP</div>
   </div>
   <div class="post" id="post-50937">
    <div class="subject"><a href="#post-50937">Lempel-Ziv 77</a></div>
    <div class="body"><div class="quote"><br />i dont remember what program it did it on, but i remember it did crash with heapalloc<br /></div><br />And from that very detailed information you assume HeapAlloc is inferior to Global/LocalAlloc? :tongue:</div>
    <div class="meta">Posted on 2002-07-30 15:34:55 by f0dder</div>
   </div>
  </div>
 </body>
</html>