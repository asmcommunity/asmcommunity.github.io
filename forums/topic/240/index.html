<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Simple question about buffer's and bufferlen's. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=240" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=240">Simple question about buffer's and bufferlen's.</a></p>
   <div class="post" id="post-1202">
    <div class="subject"><a href="#post-1202">Simple question about buffer's and bufferlen's.</a></div>
    <div class="body">We've seen this example before.<br />Note: These are used in conjunction with movsb.<br /><br />.data<br />buffer    db   &quot;Hello There!&quot;,0<br />bufferlen equ  $-buffer<br /><br />.code<br />mov  esi,offset buffer   ; 12 characters + 0<br />mov  ecx,bufferlen       ; so 'equ 13'now right?<br /><br />But my question is how can this be done if we are using undeclared data?<br /><br />.data<br />buffer    db   &quot;Hello There!&quot;,0<br />bufferlen equ  $-buffer<br /><br />.data?<br />buffer2    db   256 dup (?)  ;So large, just<br />bufferlen2 equ  $-buffer     ;incase more or less<br />                             ;data.<br />.code<br />invoke lstrcpy, addr buffer2, addr buffer<br />mov  esi,offset buffer2   ;now this contains 256<br />mov  ecx,bufferlen2       ;minus &quot;Hello There&quot;<br /><br />So now buffer2 contains our original string <br />&quot;Hello There!&quot;. Here is the problem. I need to find a way so that my program can count the data in buffer2 and then make it so bufferlen2 is equal to it. Because right now bufferlen2 has 12 (not sure if term null is included, if so 13) characters, plus 243 undeclaired spaces right? And this causes a major problem for my program. I am writing data to another file, and more data is written than is needed. Thus overwriting data further in the file.<br /><br />All help is appreciated :)<br /><br /><br />Thanks,<br />Nokturnal</div>
    <div class="meta">Posted on 2001-07-19 02:42:01 by Nokturnal</div>
   </div>
   <div class="post" id="post-1215">
    <div class="subject"><a href="#post-1215">Simple question about buffer's and bufferlen's.</a></div>
    <div class="body">the first string can be calulated at compile time (for want of a better phrase) because it's length is known.<br /><br />you can't do it then if you don't know what the string length is. You'll have to use <br /><br />invoke strlen,addr &lt;string&gt;<br /><br />then eax contains the length.<br /><br />umbongo</div>
    <div class="meta">Posted on 2001-07-19 03:54:10 by umbongo</div>
   </div>
   <div class="post" id="post-1845">
    <div class="subject"><a href="#post-1845">Thanks!!!</a></div>
    <div class="body">Works great Umbongo!:)<br />Never needed to use it before, so I didn't know what it was or how to use it.:cool:<br /><br />Thanks Man!:alright:<br />Nok.:grin:<br />:stupid:</div>
    <div class="meta">Posted on 2001-07-24 01:18:45 by Nokturnal</div>
   </div>
   <div class="post" id="post-1847">
    <div class="subject"><a href="#post-1847">Simple question about buffer's and bufferlen's.</a></div>
    <div class="body">Hi nok<br /><br />sorry for not mailing you.<br />since i use 1 hd for internet and 1 for coding im a bit lazy to go online.most time i learn coding and only go online to post a stupid question :)<br /><br />i have not forget you and i work on a tutorial for you on how to change icon in exe files ,its not so easy for me to because english is not my home language so i use some grafics to show what im doing.<br /><br />i mail it to you soon :)<br /><br />cu</div>
    <div class="meta">Posted on 2001-07-24 01:40:03 by CodeMonkey</div>
   </div>
  </div>
 </body>
</html>