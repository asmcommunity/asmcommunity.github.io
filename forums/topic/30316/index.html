<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Greatest Common Divisor  - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30316" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=30316">Greatest Common Divisor </a></p>
   <div class="post" id="post-213502">
    <div class="subject"><a href="#post-213502">Greatest Common Divisor </a></div>
    <div class="body">Need help with this program.<br /><br /><br />Suppose the time field of a file directory entry uses bits 0-4 for the seconds, bits 5-10 for the&nbsp; minutes, and bits 11-15 for the hours (24-hour clock). For example, the following binary value indicates a time of 02:16:07, in hh:mm:ss format:<br /><br />00010 010000 00111<br /><br />Write a procedure named ShowFileTime that receives a binary file time value in the AX<br />register and displays the time in hh:mm:ss format.<br /><br /><br /><br />The following program is written to accomplish the task, but it is incomplete. The code under label L1 and L2 in ShowFiletimeProc needs to be completed.<br /><br /><br /><br />INCLUDE Irvine32.inc<br /><br />.data<br />time WORD 0001001000000111b 	; 02:16:07<br /><br />.code<br />main PROC<br />call Clrscr<br /><br />mov 	ax, time 	; AX = time in MS-DOS format call ShowFileTime<br /><br />exit main ENDP<br /><br />;-------------------------------------------------------- ShowFileTime PROC<br />;<br />; Receives a binary file time value in MS-DOS format<br />; and displays the time in hh:mm:ss format.<br />; Receives: AX = time in binary MS-DOS format<br />; Returns: nothing<br />;--------------------------------------------------------<br /> <br />push ebx push edx<br /><br />and eax,0FFFFh 	; clear upper half of EAX mov bx,ax 	; BX = a copy of the file time shr ax,11	; shift hour to the right<br />cmp ax,10 	; is the hour &gt;= 10?<br />jae L1 	; yes: display it<br />call DisplayZero 	; no: display a leading zero<br /><br />L1:	call WriteDec<br /><br />........	;	display	the	hour<br />	........				<br />	........				<br /><br />L2:	<br />call WriteDec	<br />;	<br />display	<br />the	<br />minutes<br />	<br />........	<br />	........	<br />	........	<br /><br /><br /><br />static function sub ShowFileTime (dim binfv as integer)<br />copy cx, binfc<br />copy ax, result<br />msdos.interrupt()<br />shl ax, 4<br />copy ax, 2<br />mov bx, ax<br />interrupt 21h<br />msdos.show<br />return ax<br />end function<br /><br /><br /><br /><br /><br /><br /><br />L3: 	call WriteDec 	; display seconds call Crlf<br /><br />pop edx pop ebx ret<br />ShowFileTime ENDP<br /><br />;-------------------------------------------------------- DisplayZero PROC<br />;<br />; Displays a zero character<br />; Receives: nothing<br />; Returns: nothing<br />;-------------------------------------------------------- push eax<br /><br />mov al,&#039;0&#039; 	; char to display call WriteChar<br /><br />pop eax ret<br />DisplayZero ENDP<br /><br />END main<br /></div>
    <div class="meta">Posted on 2010-11-21 19:18:07 by goonjrulz</div>
   </div>
  </div>
 </body>
</html>