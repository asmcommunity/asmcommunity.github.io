<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Bypass L1, L2 cache ? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15985" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=15985">Bypass L1, L2 cache ?</a></p>
   <div class="post" id="post-123897">
    <div class="subject"><a href="#post-123897">Bypass L1, L2 cache ?</a></div>
    <div class="body">Hi all<br />I am a total newbie to assembly ...<br />My question is as much about assembly as it is about computer architecture ..<br /><br />I am doing a write-up about caches in college .. I understand there are instructions to bypass the CPU cache.... so that one can be sure that this particular instruction did not use the cache and loaded/stored directly from RAM.. I would simply like a small example of this.<br /><br />Is there any way to time the difference of two instructions (in VC++?), one that bypasses cache and one that dosent. Is this even possible or is there no timer with high enough resolution ?<br /><br />Any pointers would be nice ...<br /><br />:confused:</div>
    <div class="meta">Posted on 2003-11-09 19:46:18 by ashayh</div>
   </div>
   <div class="post" id="post-123900">
    <div class="subject"><a href="#post-123900">Bypass L1, L2 cache ?</a></div>
    <div class="body">I don't know how to load past the cache - don't think it is possible.  Might want to use the prefetch instructions or count on the hardware prefetch for data loads.  Instruction caching is done by the processor automatically.<br /><br />Writing past the cache is done with the MOVNT* instructions.  I don't think there is harware writing past the cache, but there should be (AMD/Intel - are you listening?).<br /><br />Search the board for MOVNTQ for some examples I've coded, and there is much on the board about timing with the time stamp counter.  Better to time several instructions to understand the latency and thoughput.<br /><br />Memory copying is also a popular area of research relating very closely to this topic.</div>
    <div class="meta">Posted on 2003-11-09 20:33:10 by bitRAKE</div>
   </div>
   <div class="post" id="post-124181">
    <div class="subject"><a href="#post-124181">Re: Bypass L1, L2 cache ?</a></div>
    <div class="body"><div class="quote"><br />Hi all<br />I am a total newbie to assembly ...<br />My question is as much about assembly as it is about computer architecture ..<br /><br />I am doing a write-up about caches in college .. I understand there are instructions to bypass the CPU cache.... so that one can be sure that this particular instruction did not use the cache and loaded/stored directly from RAM.. I would simply like a small example of this.<br /><br />Is there any way to time the difference of two instructions (in VC++?), one that bypasses cache and one that dosent. Is this even possible or is there no timer with high enough resolution ?<br /><br />Any pointers would be nice ...<br /><br />:confused: </div><br /><br />Though a particular processor may provide instructions to bypass the cache, the usual way to do this is by setting certain bits in the page tables. Most (protected mode) operating systems provide a special form of memory allocation call that lets you control the cache setting (e.g., Win32 provides VirtualAlloc and its ilk with certain flags to control this, Linux has mmap, etc.).<br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2003-11-12 12:05:45 by rhyde</div>
   </div>
   <div class="post" id="post-124424">
    <div class="subject"><a href="#post-124424">Invl &amp; Invlpg instructions</a></div>
    <div class="body">&quot;Invl&quot; flushes all cache and &quot;Invlpg&quot; flushes a page entry from the TLB.</div>
    <div class="meta">Posted on 2003-11-15 01:24:20 by mrgone</div>
   </div>
  </div>
 </body>
</html>