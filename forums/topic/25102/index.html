<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Fireworks - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25102" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25102">Fireworks</a></p>
   <div class="post" id="post-183805">
    <div class="subject"><a href="#post-183805">Fireworks</a></div>
    <div class="body">Hi<br />I’ve written a small app form y amusement based on a code snipped I found in the net. They are Fireworks that can be outputted to a window of your choice.<br />To compile it successfully, you have to rebuild the objmem32 library due to a little change in the Park-Miller random algo. The rest of the files are included in the attached zip file.<br /><br />Enjoy! 8)<br /><br />Biterider<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1894" target="_blank">Fireworks.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-07-21 01:02:50 by Biterider</div>
   </div>
   <div class="post" id="post-183811">
    <div class="subject"><a href="#post-183811">Re: Fireworks</a></div>
    <div class="body">I like the pretty lights :)<br /><br />You should add some mouse-support... click-boom, click-boom, clickclickclick-BOOM! :p</div>
    <div class="meta">Posted on 2006-07-21 03:35:10 by f0dder</div>
   </div>
   <div class="post" id="post-183814">
    <div class="subject"><a href="#post-183814">Re: Fireworks</a></div>
    <div class="body">Hi Biterider,<br /><br />Looks nice!!<br /><br />I have 30-33 fps, as well on my desktop as on my laptop, while they have quite different specifications.<br /><br />I rebuilt the ObjMem32 library, as you instructed.<br />After rebuilding the Fireworks project my exe was 26 KB<br />The original exe file you included in the zip file was 16 KB.<br /><br />Could it have anything to do with different versions of RadAsm we are using. Or what else could it be?<br /><br />Friendly regards,<br />mdevries.</div>
    <div class="meta">Posted on 2006-07-21 05:57:32 by mdevries</div>
   </div>
   <div class="post" id="post-183816">
    <div class="subject"><a href="#post-183816">Re: Fireworks</a></div>
    <div class="body">Beautiful. </div>
    <div class="meta">Posted on 2006-07-21 06:13:12 by JimmyClif</div>
   </div>
   <div class="post" id="post-183820">
    <div class="subject"><a href="#post-183820">Re: Fireworks</a></div>
    <div class="body"><div class="quote"><br />I have 30-33 fps, as well on my desktop as on my laptop, while they have quite different specifications.<br /></div><br /><br />I get ~30fps as well, with almost no CPU usage... I haven&#39;t looked at the source, but my guess is that he&#39;s put in some form of frame-rate limiter.<br /></div>
    <div class="meta">Posted on 2006-07-21 06:41:18 by f0dder</div>
   </div>
   <div class="post" id="post-183822">
    <div class="subject"><a href="#post-183822">Re: Fireworks</a></div>
    <div class="body"><br />Yeah, he asked me and I suggested two ways to control framerate.. I&#39;m wondering which one he implemented :)<br /></div>
    <div class="meta">Posted on 2006-07-21 06:48:48 by Homer</div>
   </div>
   <div class="post" id="post-183823">
    <div class="subject"><a href="#post-183823">Re: Fireworks</a></div>
    <div class="body">Hi<br />The target frame rate is 30 fps. The trick (thanks to Homer) is to measure the render time and sleep the remaining time until we have to render again. If the wait time is negative due to a slow CPU, we do nothing and the frame rate falls under the target. <br />I tested it with a slow 500MHz CPU and the app reaches the target with 80% of CPU usage.<br /><br />About the file size, switch RadAsm project to release or use the make.bat file.<br /><br />Regards,<br /><br />Biterider<br /></div>
    <div class="meta">Posted on 2006-07-21 06:50:59 by Biterider</div>
   </div>
   <div class="post" id="post-183879">
    <div class="subject"><a href="#post-183879">Re: Fireworks</a></div>
    <div class="body">Very nice Biterider!<br />I get a steady 32fps, with almost no cpu usage on my home PC.<br />Rags</div>
    <div class="meta">Posted on 2006-07-22 14:13:05 by rags</div>
   </div>
   <div class="post" id="post-183971">
    <div class="subject"><a href="#post-183971">Re: Fireworks</a></div>
    <div class="body">Interesting, the fps should NEVER exceed 30fps.<br />The implementation of framerate capping is not quite perfect, but it&#39;s pretty close.<br />I assume you&#39;re still relying on WM_TIMER?<br />That would explain the discrepancy - it&#39;s simply inaccurate.<br />The more accuracy you require from timer, the more it sucks.<br />This is a good example of a timed event where WM_TIMER, GetTickCount and other &#39;quick and easy&#39; timer functions are not good enough.<br /><br /></div>
    <div class="meta">Posted on 2006-07-24 11:52:55 by Homer</div>
   </div>
   <div class="post" id="post-183973">
    <div class="subject"><a href="#post-183973">Re: Fireworks</a></div>
    <div class="body">Hi Homer<br />As I described in the previous post, I’m measuring the rendering process using a StopWatch object. This object uses the QueryPerformanceXXX apis to perform his job.<br />The loss of precision has 2 sources, the measurement of the frame rate in the main application, which is done with a Windows timer and the Sleep api. Since the both have latency times, the frame rate is slidely above the target but good enough for this example&nbsp; ;) <br /><br />Biterider<br /></div>
    <div class="meta">Posted on 2006-07-24 15:21:40 by Biterider</div>
   </div>
   <div class="post" id="post-184014">
    <div class="subject"><a href="#post-184014">Re: Fireworks</a></div>
    <div class="body">Ahuh, and it pretty :)<br />Who doesn&#39;t like eye-candy? :P<br /></div>
    <div class="meta">Posted on 2006-07-26 05:33:16 by Homer</div>
   </div>
  </div>
 </body>
</html>