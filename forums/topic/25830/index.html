<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>newbie masm help. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25830" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25830">newbie masm help.</a></p>
   <div class="post" id="post-188394">
    <div class="subject"><a href="#post-188394">newbie masm help.</a></div>
    <div class="body">hello. i want to learn ASM but i&#39;m still at the &#39;haven&#39;t got anything to even compile yet&#39; stage.&nbsp; so i was wondering if anybody could help me try and figure out how to successfully compile something.<br /><br />i&#39;ve been trying to do the first console example that actually comes with the masm software:<br /><br /><pre><code><br />; ?????????????????????????????????????????????????????????????????????????<br /><br />;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  Build this with the &quot;Project&quot; menu using<br />;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &quot;Console Assemble and Link&quot;<br /><br />; ?????????????????????????????????????????????????????????????????????????<br /><br />&nbsp; &nbsp; .486&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; create 32 bit code<br />&nbsp; &nbsp; .model flat, stdcall&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; 32 bit memory model<br />&nbsp; &nbsp; option casemap :none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; case sensitive<br /> <br />&nbsp; &nbsp; include \masm32\include\windows.inc&nbsp; &nbsp;  ; always first<br />&nbsp; &nbsp; include \masm32\macros\macros.asm&nbsp; &nbsp; &nbsp;  ; MASM support macros<br /><br />&nbsp; ; -----------------------------------------------------------------<br />&nbsp; ; include files that have MASM format prototypes for function calls<br />&nbsp; ; -----------------------------------------------------------------<br />&nbsp; &nbsp; include \masm32\include\masm32.inc<br />&nbsp; &nbsp; include \masm32\include\gdi32.inc<br />&nbsp; &nbsp; include \masm32\include\user32.inc<br />&nbsp; &nbsp; include \masm32\include\kernel32.inc<br /><br />&nbsp; ; ------------------------------------------------<br />&nbsp; ; Library files that have definitions for function<br />&nbsp; ; exports and tested reliable prebuilt code.<br />&nbsp; ; ------------------------------------------------<br />&nbsp; &nbsp; includelib \masm32\lib\masm32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\gdi32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\user32.lib<br />&nbsp; &nbsp; includelib \masm32\lib\kernel32.lib<br /><br />&nbsp; &nbsp; .code&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; Tell MASM where the code starts<br /><br />; ?????????????????????????????????????????????????????????????????????????<br /><br />start:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; The CODE entry point to the program<br /><br />&nbsp; &nbsp; print chr$(&quot;Hey, this actually works.&quot;,13,10)<br />&nbsp; &nbsp; exit<br /><br />; ?????????????????????????????????????????????????????????????????????????<br /><br />end start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; Tell MASM where the program ends<br /><br /></code></pre><br /><br />anyway what happens is:<br /><br /><pre><code><br />C:\masm32\tutorial\console\demo1&gt;ml /c /coff hello.asm<br />Microsoft (R) Macro Assembler Version 6.14.8444<br />Copyright (C) Microsoft Corp 1981-1997.&nbsp; All rights reserved.<br /><br /> Assembling: hello.asm<br /><br />C:\masm32\tutorial\console\demo1&gt;link hello.obj<br />Microsoft (R) Incremental Linker Version 5.12.8078<br />Copyright (C) Microsoft Corp 1992-1998. All rights reserved.<br /><br />LINK : fatal error LNK1221: a subsystem can&#39;t be inferred and must be defined<br /><br />C:\masm32\tutorial\console\demo1&gt;<br /></code></pre><br /><br />the reason i used /c was because it was giving a linking error on the running of ml. and the reason i use /coff is because it was telling me there was a problem converting from OMF to COFF in the linking stage.<br /><br />thanks for any pointers in the right direction.<br /><br />robert</div>
    <div class="meta">Posted on 2007-03-11 11:39:19 by Aradesh</div>
   </div>
   <div class="post" id="post-188395">
    <div class="subject"><a href="#post-188395">Re: newbie masm help.</a></div>
    <div class="body">hi Aradesh<br /><br />use this commands<br /><br />\masm32\bin\ml /c /coff hello.asm<br />\masm32\bin\link /SUBSYSTEM:CONSOLE /LIBPATH:c:\masm32\lib hello.obj<br />pause<br /><br />greets<br />ragdog</div>
    <div class="meta">Posted on 2007-03-11 11:58:55 by ragdog</div>
   </div>
   <div class="post" id="post-188396">
    <div class="subject"><a href="#post-188396">Re: newbie masm help.</a></div>
    <div class="body">ah. thank you very much. it works now.<br />there are many online examples i can&#39;t get to work however - but hopefully once i&#39;ve studied the examples that come with masm, i can edit them so that they do. (asuming the other examples compile nicely also)</div>
    <div class="meta">Posted on 2007-03-11 14:18:15 by Aradesh</div>
   </div>
  </div>
 </body>
</html>