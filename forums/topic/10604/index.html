<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>trick: crossover - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10604" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=10604">trick: crossover</a></p>
   <div class="post" id="post-79737">
    <div class="subject"><a href="#post-79737">trick: crossover</a></div>
    <div class="body">Isn't it amazing:<span style="font-size:9px><pre><code><br />&#91;B&#93;program&#91;/B&#93; trick;<br /><br />&#91;B&#93;    #macro&#91;/B&#93; ecx_loop&#40; _i &#41;&#58;_start;<br />        &#91;B&#93;mov&#91;/B&#93;&#40; _i, ecx &#41;;<br />    _start&#58;<br />&#91;B&#93;    #terminator&#91;/B&#93; ecx_end;<br />        &#91;B&#93;loop&#91;/B&#93; _start;<br />&#91;B&#93;    #endmacro&#91;/B&#93;;<br /><br />&#91;B&#93;begin&#91;/B&#93; trick;<br /><br />    &#91;B&#93;mov&#91;/B&#93;&#40; &#91;COLOR=blue&#93;5&#91;/COLOR&#93;, eax &#41;;<br />    <br />    ecx_loop&#40; &#91;COLOR=blue&#93;10&#91;/COLOR&#93; &#41;;             &#91;COLOR=royalblue&#93;// &lt;--------+&#91;/COLOR&#93;<br />                                &#91;COLOR=royalblue&#93;//          |&#91;/COLOR&#93;<br />        &#91;COLOR=royalblue&#93;// do smthg 1...        //          |&#91;/COLOR&#93;<br />        &#91;B&#93;if&#91;/B&#93;&#40; eax &lt; ecx &#41; &#91;B&#93;then&#91;/B&#93;    &#91;COLOR=royalblue&#93;// &lt;----+   |&#91;/COLOR&#93;<br />                                &#91;COLOR=royalblue&#93;//      |   |&#91;/COLOR&#93;<br />            &#91;COLOR=royalblue&#93;// do smthg 2...    //      |   |&#91;/COLOR&#93;<br />            ecx_end;            &#91;COLOR=royalblue&#93;// &lt;----+---+&#91;/COLOR&#93;<br />                                &#91;COLOR=royalblue&#93;//      |&#91;/COLOR&#93;<br />        &#91;B&#93;endif&#91;/B&#93;;                  &#91;COLOR=royalblue&#93;// &lt;----+&#91;/COLOR&#93;<br /><br />&#91;B&#93;end&#91;/B&#93; trick;</code></pre></span></div>
    <div class="meta">Posted on 2003-02-03 09:02:24 by clone-d</div>
   </div>
   <div class="post" id="post-79809">
    <div class="subject"><a href="#post-79809">Re: trick: crossover</a></div>
    <div class="body"><div class="quote"><br />Isn't it amazing:<span style="font-size:9px><pre><code><br />&#91;B&#93;program&#91;/B&#93; trick;<br /><br />&#91;B&#93;    #macro&#91;/B&#93; ecx_loop&#40; _i &#41;&#58;_start;<br />        &#91;B&#93;mov&#91;/B&#93;&#40; _i, ecx &#41;;<br />    _start&#58;<br />&#91;B&#93;    #terminator&#91;/B&#93; ecx_end;<br />        &#91;B&#93;loop&#91;/B&#93; _start;<br />&#91;B&#93;    #endmacro&#91;/B&#93;;<br /><br />&#91;B&#93;begin&#91;/B&#93; trick;<br /><br />    &#91;B&#93;mov&#91;/B&#93;&#40; &#91;COLOR=blue&#93;5&#91;/COLOR&#93;, eax &#41;;<br />    <br />    ecx_loop&#40; &#91;COLOR=blue&#93;10&#91;/COLOR&#93; &#41;;             &#91;COLOR=royalblue&#93;// &lt;--------+&#91;/COLOR&#93;<br />                                &#91;COLOR=royalblue&#93;//          |&#91;/COLOR&#93;<br />        &#91;COLOR=royalblue&#93;// do smthg 1...        //          |&#91;/COLOR&#93;<br />        &#91;B&#93;if&#91;/B&#93;&#40; eax &lt; ecx &#41; &#91;B&#93;then&#91;/B&#93;    &#91;COLOR=royalblue&#93;// &lt;----+   |&#91;/COLOR&#93;<br />                                &#91;COLOR=royalblue&#93;//      |   |&#91;/COLOR&#93;<br />            &#91;COLOR=royalblue&#93;// do smthg 2...    //      |   |&#91;/COLOR&#93;<br />            ecx_end;            &#91;COLOR=royalblue&#93;// &lt;----+---+&#91;/COLOR&#93;<br />                                &#91;COLOR=royalblue&#93;//      |&#91;/COLOR&#93;<br />        &#91;B&#93;endif&#91;/B&#93;;                  &#91;COLOR=royalblue&#93;// &lt;----+&#91;/COLOR&#93;<br /><br />&#91;B&#93;end&#91;/B&#93; trick;</code></pre></span> </div><br /><br /><br />Yep, the compile-time language and the run-time language use different<br />stacks for maintaining their nesting.  So you can really do disgusting things<br />like this :-)<br /><br />At one time, I even allowed macros and text constants to get expanded<br />inside false conditional assembly sections so you could do some really<br />amazing things.  Unfortunately, that one cause some infinite loops during<br />assembly at various points, so I had to shut it down :-(.<br />The neat thing about that feature (before I killed it) is that it let you<br />easily create  your own compile-time language statements (i.e., long ago,<br />before I added the #for..#endfor statement, you could actually build one<br />out of a #while..#endwhile loop).<br />Randy Hyde</div>
    <div class="meta">Posted on 2003-02-03 21:00:58 by rhyde</div>
   </div>
  </div>
 </body>
</html>