<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Array string character conversion? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29101" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29101">Array string character conversion?</a></p>
   <div class="post" id="post-205592">
    <div class="subject"><a href="#post-205592">Array string character conversion?</a></div>
    <div class="body">I need to create a data array of 5 strings each with 4 characters---three &#039;0&#039; characters followed by a lower case letter (a-f)<br />I need to set up a main function that prints out the set of strings as created in the above section one string per line with no zero bytes at the end of each string.&nbsp; Then set up a second procedure that will receive the address of the data array on the stack and convert the lower case letter to an upper case letter without modifying any of the &#039;0&#039; characters.&nbsp; Then print the array again as earlier.<br /><br />I have some of the code, but for some reason I am getting my end of program string printed on each line and I can&#039;t get the strings of the array on seperate lines...I have been working on this for about 6 hrs now and am ready to beat my head against a wall.&nbsp; I would appreciate any help.&nbsp; Thanks<br /><br />Here is what I have...I have written and rewritten this like 60 times, but this is the best I have been able to come up with.<br /><pre><code><br />; provide access to the class IO library<br />%include &quot;c:/tools/lib/asm_io.inc&quot;<br /><br />; define data needed by the program here ----------------------------<br />segment&nbsp; &nbsp;  .data<br />signon&nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;Lab 2 - IOdemo&#039;,0<br />array&nbsp; &nbsp; &nbsp;  dd&nbsp; &nbsp; &nbsp; &#039;000a&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; &nbsp; &#039;000b&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; &nbsp; &#039;000c&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; &nbsp; &#039;000d&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; &nbsp; &#039;000e&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; &nbsp; &#039;000f&#039;<br /><br />signoff&nbsp; &nbsp;  db&nbsp; &nbsp; &nbsp; &#039;End of program&#039;,0<br /><br />; define uninitialized variable containers here<br />segment&nbsp; &nbsp;  .bss<br /><br /><br /><br /><br />; program code begins here ------------------------------------------<br />segment&nbsp; &nbsp;  .text<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; global&nbsp; _asm_main<br />_asm_main:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; enter&nbsp; &nbsp; &nbsp;  0, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, signon<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; your project code goes below this point<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax,array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is the end of the program. <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, signoff<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leave<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end:</code></pre></div>
    <div class="meta">Posted on 2008-07-07 23:19:08 by cannsyl</div>
   </div>
   <div class="post" id="post-205593">
    <div class="subject"><a href="#post-205593">Re: Array string character conversion?</a></div>
    <div class="body">I currently don&#039;t have access to whatever toolkit you are using, nor do I currently have access to NASM on this computer (I&#039;m at a friends house) but give this a shot in the dark and let me know if it works.<br /><br /><pre><code>; provide access to the class IO library<br />%include &quot;c:/tools/lib/asm_io.inc&quot;<br /><br />; define data needed by the program here ----------------------------<br />segment&nbsp; &nbsp;  .data<br />signon&nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;Lab 2 - IOdemo&#039;,0<br />array&nbsp; &nbsp; &nbsp;  db&nbsp; &nbsp; &nbsp; &#039;000a&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;000b&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;000c&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;000d&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;000e&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;000f&#039;<br /><br />signoff&nbsp; &nbsp;  db&nbsp; &nbsp; &nbsp; &#039;End of program&#039;,0<br /><br />; define uninitialized variable containers here<br />segment&nbsp; &nbsp;  .bss<br /><br /><br />; program code begins here ------------------------------------------<br />segment&nbsp; &nbsp;  .text<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; global&nbsp; _asm_main<br />_asm_main:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; enter&nbsp; &nbsp; &nbsp;  0, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, signon<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; your project code goes below this point<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  esi,array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  ecx,signoff<br /><br />.L1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp&nbsp; &nbsp; &nbsp; &nbsp;  esi, ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; je&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .eoa<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add&nbsp; &nbsp; &nbsp; &nbsp;  esi, 4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp&nbsp; &nbsp; &nbsp; &nbsp;  .L1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is the end of the program. <br />.eoa:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, signoff<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leave<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; end:</code></pre><br /><br />If it doesn&#039;t, name the Nasm toolkit you are working with and when I get home I&#039;ll play around with it.</div>
    <div class="meta">Posted on 2008-07-07 23:53:08 by Synfire</div>
   </div>
   <div class="post" id="post-205594">
    <div class="subject"><a href="#post-205594">Re: Array string character conversion?</a></div>
    <div class="body">As for the conversion proc (sorry I overlooked that) do this (also search the board, I&#039;m sure there are better methods):<br /><br /><pre><code>char_upper:<br />	enter 0, 0<br /><br />	cmp	al, &#039;a&#039;<br />	jl	.nir<br />	cmp	al, &#039;f&#039;<br />	jg	.nir<br />	sub	al, &#039;a&#039;<br />	add	al, &#039;A&#039;<br /><br />	leave<br />	ret<br /><br />.nir:<br />	xor	eax, eax<br />	leave<br />	ret</code></pre><br /><br />to use it move the character into AL then call char_upper.</div>
    <div class="meta">Posted on 2008-07-08 00:09:40 by Synfire</div>
   </div>
   <div class="post" id="post-205602">
    <div class="subject"><a href="#post-205602">Re: Array string character conversion?</a></div>
    <div class="body">So I do this...<pre><code>&nbsp;  ; your project code goes below this point<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  esi,array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  ecx,signoff<br /><br />.L1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp&nbsp; &nbsp; &nbsp; &nbsp;  esi, ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; je&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .eoa<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  al, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add&nbsp; &nbsp; &nbsp; &nbsp;  esi, 4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp&nbsp; &nbsp; &nbsp; &nbsp;  .L1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; char_upper<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is the end of the program. <br />.eoa:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, signoff<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp;  eax, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leave<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret<br />	&nbsp; &nbsp; end:<br /><br /><br /><br />char_upper:<br />	enter 0, 0<br /><br />	cmp	al, &#039;a&#039;<br />	jl	.nir<br />	cmp	al, &#039;f&#039;<br />	jg	.nir<br />	sub	al, &#039;a&#039;<br />	add	al, &#039;A&#039;<br /><br />	leave<br />	ret<br /><br />.nir:<br />	xor	eax, eax<br />	leave<br />	ret</code></pre><br />and the first part works brilliantly, but the second part where it is suppose to change to upper case it&#039;s like the code is not even there.&nbsp; </div>
    <div class="meta">Posted on 2008-07-08 23:18:43 by cannsyl</div>
   </div>
   <div class="post" id="post-205605">
    <div class="subject"><a href="#post-205605">Re: Array string character conversion?</a></div>
    <div class="body">Nah, you have put the call to char_upper below the jmp and it should be before each call to print_char like so:<br /><pre><code>&nbsp; &nbsp;; your project code goes below this point<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;esi,array ; set ESI to start of array (i=0)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ecx,signoff ; set ECX to end of array<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eax, eax ; clear EAX register<br /><br />.L1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;esi, ecx ; have we reached the end?<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; je&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .eoa ; yes, jump to .eoa<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;al,  ; set AL to array<em>[0]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; char_upper ; convert AL to uppercase if &#039;a&#039;-&#039;f&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char ; print AL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;al,  ; set AL to array<em>[1]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; char_upper ; convert AL to uppercase if &#039;a&#039;-&#039;f&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char ; print AL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;al,  ; set AL to array<em>[2]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; char_upper ; convert AL to uppercase if &#039;a&#039;-&#039;f&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char ; print AL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;al,  ; set AL to array<em>[3]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; char_upper ; convert AL to uppercase if &#039;a&#039;-&#039;f&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char ; print AL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl ; print newline<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;esi, 4 ; move to next element (i++)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.L1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is the end of the program. <br />.eoa:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eax, signoff<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_string<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_nl<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eax, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; leave<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ret<br />	&nbsp; &nbsp; end:<br /><br /><br /><br />char_upper:<br />	enter 0, 0<br /><br />	cmp	al, &#039;a&#039;<br />	jl	.nir<br />	cmp	al, &#039;f&#039;<br />	jg	.nir<br />	sub	al, &#039;a&#039;<br />	add	al, &#039;A&#039;<br /><br />	leave<br />	ret<br /><br />.nir:<br />	xor	eax, eax<br />	leave<br />	ret</code></pre><br /><br />I added some rough commenting to give you an idea of the thought process.</div>
    <div class="meta">Posted on 2008-07-09 17:38:42 by Synfire</div>
   </div>
   <div class="post" id="post-205607">
    <div class="subject"><a href="#post-205607">Re: Array string character conversion?</a></div>
    <div class="body">erm.. <br /><br /><pre><code>char_upper:<br />	enter 0, 0<br /><br />	cmp	al, &#039;a&#039;<br />	jl	.nir<br />	cmp	al, &#039;f&#039;<br />	jg	.nir<br />	sub	al, &#039;a&#039;<br />	add	al, &#039;A&#039;<br /><br />	leave<br />	ret<br /><br />.nir:<br />	xor	eax, eax&nbsp; &lt;&lt;&lt; isnt this a bug?<br />	leave<br />	ret</code></pre><br /><br />and couldnt it be done simpler.. like<br /><br /><pre><code>char_upper:<br />	enter 0, 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; no idea why this is here<br /><br />	cmp	al, &#039;a&#039;<br />	jb	.nir<br />	cmp	al, &#039;f&#039;<br />	ja	.nir<br />&nbsp; &nbsp; &nbsp;  sub&nbsp; &nbsp; al, &#039;a&#039;-&#039;A&#039;<br /><br />.nir:<br />	leave<br />	ret<br /></code></pre></div>
    <div class="meta">Posted on 2008-07-10 02:05:09 by evlncrn8</div>
   </div>
   <div class="post" id="post-205608">
    <div class="subject"><a href="#post-205608">Re: Array string character conversion?</a></div>
    <div class="body">The xor eax,eax is equivalent to &#039;mov eax,0&#039; - he&#039;s returning NULL if the input character is not in the legal range.<br />But you&#039;re right about the sub IMM8 followed by add IMM8.<br />Thats just icky.<br /><br /></div>
    <div class="meta">Posted on 2008-07-10 06:10:19 by Homer</div>
   </div>
   <div class="post" id="post-205609">
    <div class="subject"><a href="#post-205609">Re: Array string character conversion?</a></div>
    <div class="body">yeh but...<br /><br /><pre><code>&nbsp;  call&nbsp; &nbsp; &nbsp; &nbsp; char_upper ; convert AL to uppercase if &#039;a&#039;-&#039;f&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; call&nbsp; &nbsp; &nbsp; &nbsp; print_char ; print AL</code></pre><br /><br />char_upper - if char isn&#039;t valid it&#039;ll return null, and then print_char will print al right?.. and al will be null...<br /><br />of course, im guessing because i can&#039;t see the print_char proc anywhere<br /></div>
    <div class="meta">Posted on 2008-07-10 08:13:07 by evlncrn8</div>
   </div>
   <div class="post" id="post-205610">
    <div class="subject"><a href="#post-205610">Re: Array string character conversion?</a></div>
    <div class="body">First off, I noted that there were better implementations. The reason I didn&#039;t use &#039;a&#039;-&#039;A&#039; inline is because I didn&#039;t have acces to NASM at the time and wasn&#039;t sure if that would assemble correctly, so to avoid that discussion i just used the runtime notation. Second, you are correct, in the last post the &#039;xor eax, eax&#039; shouldn&#039;t be there, I got in a hurry trying to retype the code and I type the &quot;return(0)&quot; equivilant almost automatically like 90% of the time. My bad.</div>
    <div class="meta">Posted on 2008-07-10 14:18:16 by Synfire</div>
   </div>
   <div class="post" id="post-205616">
    <div class="subject"><a href="#post-205616">Re: Array string character conversion?</a></div>
    <div class="body">It worked great thanks so much to everyone.&nbsp; <br /></div>
    <div class="meta">Posted on 2008-07-11 23:01:09 by cannsyl</div>
   </div>
  </div>
 </body>
</html>