<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Number of binary 1s in a number - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19036" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=19036">Number of binary 1s in a number</a></p>
   <div class="post" id="post-147231">
    <div class="subject"><a href="#post-147231">Number of binary 1s in a number</a></div>
    <div class="body">I'm sure there was a page showing how to count the number of binary 1s in a 32bit number.<br /><br />Can anyone point me to it please or provide an algorithm. Thanks</div>
    <div class="meta">Posted on 2004-08-01 12:52:07 by V Coder</div>
   </div>
   <div class="post" id="post-147234">
    <div class="subject"><a href="#post-147234">Number of binary 1s in a number</a></div>
    <div class="body">This macro counts the no of 1's in esi I believe, someone posted it here once.<br /><pre><code>POPCOUNT1 MACRO<br />	mov edx,esi<br />	shr edx,1<br />	and edx,055555555h	; &#40;n &gt;&gt; 1&#41; &amp; 0x55555555<br />	sub esi,edx		; n - &#40;&#40;n &gt;&gt; 1&#41; &amp; 0x55555555&#41;<br />	mov edx,esi<br />	shr edx,2		; n &gt;&gt; 2<br />	and esi,033333333h	; n &amp; 0x33333333<br />	and edx,033333333h	; &#40;n &gt;&gt; 2&#41;  &amp; 0x33333333<br />	add esi,edx		; n = &#40;n &amp; 0x33333333&#41; + &#40;&#40;n &gt;&gt; 2&#41; &amp; 0x33333333&#41;<br />	mov edx,esi<br />	shr edx,4		; n &gt;&gt; 4<br />	add edx,esi		; n + &#40;n &gt;&gt; 4&#41;<br />	and edx,00F0F0F0Fh	; n = &#40;n + &#40;n &gt;&gt; 4&#41; &amp; 0x0F0F0F0F&#41;<br /><br />	imul edx,001010101h	; add by multiplying with a &quot;magic number&quot;<br />	shr edx,24		; shift result into place<br />ENDM</code></pre></div>
    <div class="meta">Posted on 2004-08-01 13:19:22 by EÃ³in</div>
   </div>
   <div class="post" id="post-147236">
    <div class="subject"><a href="#post-147236">Number of binary 1s in a number</a></div>
    <div class="body">Thanks. That is the very thing.</div>
    <div class="meta">Posted on 2004-08-01 13:59:48 by V Coder</div>
   </div>
   <div class="post" id="post-147237">
    <div class="subject"><a href="#post-147237">Number of binary 1s in a number</a></div>
    <div class="body"><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=5724">http://www.asmcommunity.net/board/index.php?topic=5724</a><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=14647">http://www.asmcommunity.net/board/index.php?topic=14647</a></div>
    <div class="meta">Posted on 2004-08-01 14:01:40 by f0dder</div>
   </div>
   <div class="post" id="post-147425">
    <div class="subject"><a href="#post-147425">Number of binary 1s in a number</a></div>
    <div class="body">Many more thanks... These links are great too.</div>
    <div class="meta">Posted on 2004-08-05 00:10:39 by V Coder</div>
   </div>
  </div>
 </body>
</html>