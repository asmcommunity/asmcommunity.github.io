<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>who know gdt 's offset - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18083" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=34">OS Development</a> &raquo; <a href="../?id=18083">who know gdt 's offset</a></p>
   <div class="post" id="post-139642">
    <div class="subject"><a href="#post-139642">who know gdt 's offset</a></div>
    <div class="body">i want write bootloader use nasm,i enter pmode,then write a char 'a',but when kernel offset is 500h,it 's ok,then i modifty 500h to 1000h,it's wrong and restart machine,the snipe code is bellow:<br />;boot.asm<br />...<br />;read driver a<br />mov ax, 1000h ;<br />mov es, ax ;<br />mov bx, 0 ;<br />mov dl, 0 ; <br />mov dh, 0 ; <br />mov ch, 0 ; <br />mov cl, 2 ; <br />mov al, 2 ; <br />mov ah, 2 ;<br />int 13h<br /><br />mov ax, 1000h ;<br />mov es, ax<br />mov ds, ax<br /><br />push word 1000h<br />push word 00h<br />retf<br />...<br />;kernel.asm<br />org 10000h<br />...<br />   lgdt	    ; Load GDT	<br />   mov eax,cr0	    ; The lsb of cr0 is the protected mode bit<br />   or al,0x01	    ; Set protected mode bit<br />   mov cr0,eax	    ; Mov modified word to the control register<br />   jmp codesel:go_pm<br />...<br />then i replace 1000h to 500h,then it 's ok,can you help me?</div>
    <div class="meta">Posted on 2004-04-21 02:25:13 by bgcq</div>
   </div>
   <div class="post" id="post-139657">
    <div class="subject"><a href="#post-139657">who know gdt 's offset</a></div>
    <div class="body">I hate to do this, but your recent posts are starting to reak of the &quot;spoon-feed me&quot; syndrome.<br /><br /><a target="_blank" href="http://www.nondot.org/sabre/os/articles/">CLICK ON THIS LINK</a> and start reading up on how things are done.</div>
    <div class="meta">Posted on 2004-04-21 06:27:08 by SpooK</div>
   </div>
   <div class="post" id="post-139717">
    <div class="subject"><a href="#post-139717">who know gdt 's offset</a></div>
    <div class="body">sorry,i learn myself first.</div>
    <div class="meta">Posted on 2004-04-21 23:13:38 by bgcq</div>
   </div>
  </div>
 </body>
</html>