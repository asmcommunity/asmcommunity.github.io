<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Font addin - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17574" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=42">RadASM</a> &raquo; <a href="../?id=17574">Font addin</a></p>
   <div class="post" id="post-135945">
    <div class="subject"><a href="#post-135945">Font addin</a></div>
    <div class="body">I use CreateFontIndirect to create the fonts for my apps. This requires that I create a LOGFONT structure in my data section and fill it with all of the appropriate information. I have created an addin to do that for you. It is added to the project menu, enable it with the AddIn manager after copying the DLL to your Addins folder.<br /><br />When you select Font builder from the project menu, a choose font dialog will appear. Choose your font and size as well as effects (underline etc...) and press OK. A line will be inserted at the current cursor position with a filled LOGFONT structure in the following format:<br /><br />Arial_Black_10 LOGFONT &lt;-13,0,0,0,400,-1,1,1,0,3,2,1,34,&quot;Arial Black&quot;&gt;<br /><br />The output string is built with wsprintf so that if another assembler (besides GoAsm and Masm) uses a different syntax it is easy to add the functionality. I have not done that but will if someone posts a filled LOGFONT structure for me to use as a template.<br /><br />When you want to use the font, you include the following in your code<br /><br />invoke CreateFontIndirect, offset Arial_Black_10</div>
    <div class="meta">Posted on 2004-03-14 22:18:32 by donkey</div>
   </div>
   <div class="post" id="post-135950">
    <div class="subject"><a href="#post-135950">Font addin</a></div>
    <div class="body">It's a bit tricky in HLA, but if it can be done, this would make a great addition!<br /><br />Arial_Black_10 :w.LOGFONT:=w.LOGFONT:[-13,0,0,0,400,-1,1,1,0,3,2,1,34,strToBA(&quot;Arial Black&quot;,w.LF_FACESIZE)];<br /><br />It's kind of a hack.  Should come with a note that the &quot;strToBA&quot; macro can be found in the HLA examples release.  Randy put that together for me when I needed to do this in HLA.<br /><br />As you may guess, I'm not too happy about the way HLA implements static structure filling.  Leaves me wondering.. .why?</div>
    <div class="meta">Posted on 2004-03-15 01:09:38 by Kain</div>
   </div>
   <div class="post" id="post-135952">
    <div class="subject"><a href="#post-135952">Font addin</a></div>
    <div class="body">Hi Kain,<br /><br />No problem at all, new upload with your HLA format.</div>
    <div class="meta">Posted on 2004-03-15 01:19:03 by donkey</div>
   </div>
   <div class="post" id="post-135974">
    <div class="subject"><a href="#post-135974">Font addin</a></div>
    <div class="body">Thanks!  <br />Another excellent add-in. :alright: <br /><br /><br />Just one minor change change request.  Please remove the default effects flags.</div>
    <div class="meta">Posted on 2004-03-15 08:23:08 by Kain</div>
   </div>
   <div class="post" id="post-135976">
    <div class="subject"><a href="#post-135976">Font addin</a></div>
    <div class="body">Hi Kain,<br /><br />I'm not sure what you mean, I do not set any defaults at all. But I do not zero the structure before calling ChooseFont, are you having a problem with the effects ?<br /><br />The dialog should be clear when it starts:</div>
    <div class="meta">Posted on 2004-03-15 08:31:30 by donkey</div>
   </div>
   <div class="post" id="post-136009">
    <div class="subject"><a href="#post-136009">Font addin</a></div>
    <div class="body">It's not a big deal, just cosmetic.<br /><br />When I start it up, Strikeout and Underline are selected by default and there is a 3 in the point size box.<br /><br />Running on WinME.</div>
    <div class="meta">Posted on 2004-03-15 14:10:30 by Kain</div>
   </div>
   <div class="post" id="post-136011">
    <div class="subject"><a href="#post-136011">Font addin</a></div>
    <div class="body">Weird that yours is initialized and mine is not, at any rate it is not a big fix. New upload at the top...</div>
    <div class="meta">Posted on 2004-03-15 14:14:24 by donkey</div>
   </div>
   <div class="post" id="post-136015">
    <div class="subject"><a href="#post-136015">Font addin</a></div>
    <div class="body">It's probably a Windows thing.  Anyways, it's fixed now.  Thanks.</div>
    <div class="meta">Posted on 2004-03-15 14:40:18 by Kain</div>
   </div>
   <div class="post" id="post-136186">
    <div class="subject"><a href="#post-136186">Font addin</a></div>
    <div class="body">Hi Donkey and Kain, it's not windows's bug, i'm using WinMe and i have the same problem. In win XP everything is nomal.</div>
    <div class="meta">Posted on 2004-03-17 06:45:46 by neverending</div>
   </div>
   <div class="post" id="post-136205">
    <div class="subject"><a href="#post-136205">Font addin</a></div>
    <div class="body"><div class="quote"><br />Hi Donkey and Kain, it's not windows's bug, i'm using WinMe and i have the same problem. In win XP everything is nomal. </div><br /><br />But it works now right ?</div>
    <div class="meta">Posted on 2004-03-17 09:41:10 by donkey</div>
   </div>
   <div class="post" id="post-136253">
    <div class="subject"><a href="#post-136253">Font addin</a></div>
    <div class="body">Hi Donkey :) <br />Now, i've tested in my XP SP1 , this error appear again <br />This is pictures</div>
    <div class="meta">Posted on 2004-03-17 20:40:07 by neverending</div>
   </div>
   <div class="post" id="post-136255">
    <div class="subject"><a href="#post-136255">Font addin</a></div>
    <div class="body">Hi neverending,<br /><br />Well, there is not much I can do about it. I zero the structures before calling ChooseFont so it should not be initialized. Besides that I am out of ideas, you can try downloading the version from my site it is the latest but it should be exactly the same as the one here.</div>
    <div class="meta">Posted on 2004-03-17 20:49:48 by donkey</div>
   </div>
   <div class="post" id="post-136259">
    <div class="subject"><a href="#post-136259">Font addin</a></div>
    <div class="body">The latest test version (l) of RadAsm has the older Font Builder.  Are you sure you're using the latest one? <br />Also, you may have the older version in your browser cache.  Try to clear your cache and download again.<br /><br /><br />Heh.  This already came in handy for me.  I usually use default font because I'm too lazy to look up API, fill out the structure, then fix the inevitable mistakes that creep in when doing things manually.  Now it's a snap...5 seconds and I have a filled out font structure.</div>
    <div class="meta">Posted on 2004-03-17 23:10:22 by Kain</div>
   </div>
   <div class="post" id="post-136264">
    <div class="subject"><a href="#post-136264">Font addin</a></div>
    <div class="body">Hi Kain,<br /><br />Glad it helped out a bit<br /><br />Added support for NASM, the structure is initialized as follows, I got this from the docs so I am not sure if it is exactly right, still looking for TASM and FASM...<br /><br /><pre><code>Arial_Black_10&#58;<br />ISTRUC LOGFONT<br />AT LOGFONT.lfHeight, dd -13<br />AT LOGFONT.lfWidth, dd 0<br />AT LOGFONT.lfEscapement, dd 0<br />AT LOGFONT.lfOrientation, dd 0<br />AT LOGFONT.lfWeight, dd 400<br />AT LOGFONT.lfItalic, db 0<br />AT LOGFONT.lfUnderline, db 0<br />AT LOGFONT.lfStrikeOut, db 0<br />AT LOGFONT.lfCharSet, db 0<br />AT LOGFONT.lfOutPrecision, db 3<br />AT LOGFONT.lfClipPrecision, db 2<br />AT LOGFONT.lfQuality, db 1<br />AT LOGFONT.lfPitchAndFamily, db 34<br />AT LOGFONT.lfFaceName, db 'Arial Black'<br />IEND</code></pre></div>
    <div class="meta">Posted on 2004-03-18 00:55:59 by donkey</div>
   </div>
   <div class="post" id="post-136395">
    <div class="subject"><a href="#post-136395">Font addin</a></div>
    <div class="body">Thanks pelaillo,<br /><br />Added the FASM initialized logfont format to the possible outputs, this completes the structures for all supported assemblers.</div>
    <div class="meta">Posted on 2004-03-19 09:14:12 by donkey</div>
   </div>
  </div>
 </body>
</html>