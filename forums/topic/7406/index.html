<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Wonder why to return a brush in WM_CTLCOLOREDIT !!! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7406" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=7406">Wonder why to return a brush in WM_CTLCOLOREDIT !!!</a></p>
   <div class="post" id="post-53864">
    <div class="subject"><a href="#post-53864">Wonder why to return a brush in WM_CTLCOLOREDIT !!!</a></div>
    <div class="body">I've asked what to do about the the smearing of text and background<br />in my (multi-line) edit control a few days ago. <br />It appears when scrolling and when using backspace the text will only <br />be erased when you clear the complete line. If you don't only the cursor<br />moves and text will simply be written over.<br /><br />I was gonna use a pattern brush. But there is simply no can do.<br />As soon as you have text in it the only thing that determines the<br />background color is SetBkColor which again only allows a solid color.<br /><br />The funny thing is you can edit the text in a single-line edit box just<br />fine using a pattern brush and even setting the background to<br />transparent.<br /><br />I've also tried subclassing it filling the background in response to <br />WM_ERASEBKGND using FillRect. Scrolling, selecting and editing will <br />make the selected lines white:<br /><br /><pre><code><br />.IF uMsg==WM_ERASEBKGND<br />	invoke SetBkMode,wParam,TRANSPARENT<br />	;invoke SetBkColor,wParam,0EFEFEFh<br />	invoke GetWindowRect,hWnd,addr rect<br />	invoke FillRect,wParam,addr rect,hBackBrush<br /></code></pre><br /><br />I think I will have to draw the edit box completely myself<br />or use solid color  :mad:  .<br /><br />Another real bad problem I have is when I open PaintShop Pro<br />my program simply seems to forget I ever colored it:</div>
    <div class="meta">Posted on 2002-08-18 05:23:17 by goofee</div>
   </div>
  </div>
 </body>
</html>