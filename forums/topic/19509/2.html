<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MASM + GNU linker - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19509" />
  <link rel="prev" href="../?id=19509&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19509">MASM + GNU linker</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=19509&amp;page=1" style="">&laquo;</a><a href="../?id=19509&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="19509" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-151187">
    <div class="subject"><a href="#post-151187">MASM + GNU linker</a></div>
    <div class="body">Hi Poimander,<br /><br />thanks for the info. I will try to find the cygwin version.<br /><br />&gt; the alternative -q option isn't implemented in the MinGW version<br /><br />BTW, it *is* implemented in the MinGW version --- in the way that LD doesn't complain.. But the docs say:<br /><div class="quote"><br />-q <br />--emit-relocs <br />Leave relocation sections and contents in fully linked exececutables. Post link analysis and optimization tools may need this information in order to perform correct modifications of executables. This results in larger executables. <br />This option is currently only supported on ELF platforms. <br /></div><br /><br />So this switch has no effect for win32 binaries, I verified it.<br /><br />Regards<br /><br />Japheth</div>
    <div class="meta">Posted on 2004-10-11 02:41:54 by japheth</div>
   </div>
   <div class="post" id="post-168674">
    <div class="subject"><a href="#post-168674">Re: MASM + GNU linker</a></div>
    <div class="body">Here is another example of using the GNU linker ld.exe with Masm, the -s switch allows to produce small executables<br /><br /><pre><code>\masm32\bin\ml /c /coff Dialog.asm<br />\goasm\gorc /o Rsrc.rc<br />ld -e_start -subsystem windows -Lc:\masm32\lib -o Dialog.exe Dialog.obj Rsrc.obj -luser32 -lkernel32 -s</code></pre></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1296" target="_blank">Masm+ld.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-12-08 12:50:27 by Vortex</div>
   </div>
   <div class="post" id="post-168692">
    <div class="subject"><a href="#post-168692">Re: MASM + GNU linker</a></div>
    <div class="body">thanks vortex, but perhaps you should mention which version of LD you are using and where to get it. At least the version I tried (from binutils-2.16.91, date 8/27/2005) doesn&#39;t understand some of the cmdline options of your sample.<br /></div>
    <div class="meta">Posted on 2005-12-09 01:32:00 by japheth</div>
   </div>
   <div class="post" id="post-168712">
    <div class="subject"><a href="#post-168712">Re: MASM + GNU linker</a></div>
    <div class="body">Hi japheth,<br /><br />Yes, you are right. My apologies, I should mention about the version of ld.exe<br /><br />I am using ld.exe coming with the MinGW Developer Studio 2.05 package (build 04-01-2005)<br /><br />http://parinyasoft.com/<br /><br />The linker comes with the full package :<br /><br />http://parinyasoft.com/download/MinGWStudioFullSetup-2.05.exe<br /><br />The linker ld.exe supplied with the package dates 01.20.2005<br /><br />The critical switch to build a small executable is <span class="mono">-s</span> :<br /><pre><code>-s <br />--strip-all <br />Omit all symbol information from the output file. </code></pre></div>
    <div class="meta">Posted on 2005-12-09 12:39:42 by Vortex</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=19509&amp;page=1" style="">&laquo;</a><a href="../?id=19509&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="19509" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>