<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MASM obj file prob - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19288" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19288">MASM obj file prob</a></p>
   <div class="post" id="post-148962">
    <div class="subject"><a href="#post-148962">MASM obj file prob</a></div>
    <div class="body">I am having problems with the masm linker when it builds the exe most of the file is zeros. when i dissasimble the exe there is only 17 bytes of command data but the file is 512 the code offset is 200h evereyting between 10h and 200h is zero any ideas why??</div>
    <div class="meta">Posted on 2004-09-01 18:27:08 by inuyaga</div>
   </div>
   <div class="post" id="post-148963">
    <div class="subject"><a href="#post-148963">MASM obj file prob</a></div>
    <div class="body">This is the case with procedures built as COFF modules in PE files. The EXE file will always be multiples of 512 or larger so if you have truly tiny code, the rest of the code section is padded out with zeros.<br /><br />The first section usually contains the MZ dos header, the PE header and the section headers.<br /><br />You can be satisfied with this much that if you add a 50 byte procedure to your exe, all you get is the 50 bytes in the code section. With default format MASM, the library code is added after the jump table at the end so its easy to check.</div>
    <div class="meta">Posted on 2004-09-01 19:04:04 by hutch--</div>
   </div>
   <div class="post" id="post-148968">
    <div class="subject"><a href="#post-148968">MASM obj file prob</a></div>
    <div class="body">ok that sounds logical but is there a way around i need this to fit in a single sector. namley the boot sector. is there a way this can be done</div>
    <div class="meta">Posted on 2004-09-01 21:32:05 by inuyaga</div>
   </div>
   <div class="post" id="post-148978">
    <div class="subject"><a href="#post-148978">MASM obj file prob</a></div>
    <div class="body">Microsoft has written all their OS bootsectors in MASM, but IMO if you need this kind of stuff, you're better off with FASM or NASM, as they have direct binary output etc.</div>
    <div class="meta">Posted on 2004-09-02 00:41:07 by f0dder</div>
   </div>
   <div class="post" id="post-148988">
    <div class="subject"><a href="#post-148988">MASM obj file prob</a></div>
    <div class="body">Boot sectors are almost exclusively 16 bit real mode code so you would need to use a 16 bit linker with ML to write one. Most assemblers can still write 16 bit code so its not a difficult task.<br /><br />Regardas,<br /><br />hutch at movsd dot com</div>
    <div class="meta">Posted on 2004-09-02 03:11:25 by hutch--</div>
   </div>
  </div>
 </body>
</html>