<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>WorkDC? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26424" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26424">WorkDC?</a></p>
   <div class="post" id="post-191500">
    <div class="subject"><a href="#post-191500">WorkDC?</a></div>
    <div class="body">How would I make a DC that I could do GDI funtions on and then BitBlt to the window DC when the WM_PAINT is recieved?
I tried CreateCompatibleDC but when I BitBlt it is blank...
-------------
WM_CREATE:
GetDC,hWnd
CreateCompatibleDC,eax
mov wDC,eax
Rectangle,wDC,25,25,50,50
WM_PAINT:
BeginPaint,hWnd,lpPaint
mov hDC,eax
BitBlt,hDC,0,0,100,100,wDC,0,0,SRCCOPY
EndPaint,hWnd,lpPaint
-------------</div>
    <div class="meta">Posted on 2000-12-22 20:28:00 by dork</div>
   </div>
   <div class="post" id="post-191501">
    <div class="subject"><a href="#post-191501">WorkDC?</a></div>
    <div class="body">You're on the right track.

Think of a DC as an artist's easel, it still needs a canvas to hold the picture.

That canvas is the bitmap. CreateCompatableDC does create a bitmap, but it's only 1x1 pixel. Kinda useless.

So, after you create the DC, CreateCompatibleBitmap and select that into the DC. 

Don't forget to restore the orgional 1x1 bitmap before you destroy the DC (and then destroy the bitmap)</div>
    <div class="meta">Posted on 2000-12-22 21:01:00 by Ernie</div>
   </div>
  </div>
 </body>
</html>