<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Dealing with SSE - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19897" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=19897">Dealing with SSE</a></p>
   <div class="post" id="post-152773">
    <div class="subject"><a href="#post-152773">Dealing with SSE</a></div>
    <div class="body">Hi Guys,<br /><br />I want to speed up my application a bit, so I want to use SSE...<br />Of course my prob is, I can't be sure that all things are properly aligned (may happen when I only aggregate parts of a vector).<br /><br />I think, but I don't know how, that it must work if I check if the address is on a boundery or not. How can I do this?<br /><br />I suppose I have the base in EAX, so I do a simple:<br /><br />AND EAX,  16<br />JNZ Unaligned<br />...<br />Aligned SSE-II CODE...<br /><br /><br />Unaligned SSE-II Code here<br /><br />Can I do it this way? Or will the jump slow down things horribly?</div>
    <div class="meta">Posted on 2004-11-12 06:25:21 by abrosda</div>
   </div>
   <div class="post" id="post-152778">
    <div class="subject"><a href="#post-152778">Dealing with SSE</a></div>
    <div class="body">Sure, that is commonly done, but it should be &quot;AND EAX,-16&quot;.  The other option would be to enforce alignment through the application, but that can always be done later - there is always more work to do. :)</div>
    <div class="meta">Posted on 2004-11-12 08:35:07 by bitRAKE</div>
   </div>
   <div class="post" id="post-152788">
    <div class="subject"><a href="#post-152788">Dealing with SSE</a></div>
    <div class="body">I think you should force the data to be aligned to 16. SSE is meant to work with aligned data.</div>
    <div class="meta">Posted on 2004-11-12 11:06:43 by roticv</div>
   </div>
   <div class="post" id="post-152790">
    <div class="subject"><a href="#post-152790">Dealing with SSE</a></div>
    <div class="body">Don't you mean TEST AL,15?</div>
    <div class="meta">Posted on 2004-11-12 12:08:14 by Sephiroth3</div>
   </div>
   <div class="post" id="post-152792">
    <div class="subject"><a href="#post-152792">Dealing with SSE</a></div>
    <div class="body">Yeah, TEST AL,15 is the way to check for alignment.  I really just wanted him to align the address.  :P  :oops:</div>
    <div class="meta">Posted on 2004-11-12 12:37:26 by bitRAKE</div>
   </div>
   <div class="post" id="post-153181">
    <div class="subject"><a href="#post-153181">Dealing with SSE</a></div>
    <div class="body">Sure, the data is aligned. The problem occurs when I have to add two vectors, it may happen that I have to sumup parts of a vector, so I can't be sure if the data is aligned in this case.<br /><br />Although I have to acces an old product to get data from... the data on this side is mostly misaligned.</div>
    <div class="meta">Posted on 2004-11-18 06:57:34 by abrosda</div>
   </div>
   <div class="post" id="post-153191">
    <div class="subject"><a href="#post-153191">Dealing with SSE</a></div>
    <div class="body">What about reading everything to memory then make use of the packing and unpacking feature to extract what you need?</div>
    <div class="meta">Posted on 2004-11-18 09:24:12 by roticv</div>
   </div>
  </div>
 </body>
</html>