<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Saving all the registers before a call to procedure - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2121" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2121">Saving all the registers before a call to procedure</a></p>
   <div class="post" id="post-13456">
    <div class="subject"><a href="#post-13456">Saving all the registers before a call to procedure</a></div>
    <div class="body">HEllo al,i am using Delphi and i have to use asm code in between ,the asm procedure takes two parameters ,this asm procedure actually goes to someother stack frame and copies the data and stores in the current stack frame and then calls a function in DLL ,this involves lot of register usage,so  i need to preserve all the registers and restore it back, but the problem is that once the call to dll occurs in some other workspace ,how should i restore the registers if i store them in stack, <br /><br />I could explain it clearly if someone is willin to help, i have been really confused and workin on this for months,or anyone can suggest an alternative solution for this problem.<br /><br />regards<br />suki</div>
    <div class="meta">Posted on 2001-11-29 05:31:25 by suki</div>
   </div>
   <div class="post" id="post-13460">
    <div class="subject"><a href="#post-13460">Saving all the registers before a call to procedure</a></div>
    <div class="body">suki,<br /><br />This is not really a Delphi forum but what you need to track down is what calling conventions are being used in the calls you are making as this effects the stack cleanup. STDCALL and C are well understood but from memory Delphi also uses the FASTCALL convention and I am not sure if it has been published.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2001-11-29 05:51:55 by hutch--</div>
   </div>
  </div>
 </body>
</html>