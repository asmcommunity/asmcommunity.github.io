<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>simple gif animation - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18077" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=18077">simple gif animation</a></p>
   <div class="post" id="post-139615">
    <div class="subject"><a href="#post-139615">simple gif animation</a></div>
    <div class="body">I know Adobe Imageready can accomplish this but imagready is way too bulky for my needs. I prefer something lean. I'm looking for a program that will let me do the following:<br /><br />1. Import multiple image files into gif frames<br /><br />img01.png<br />img02.png<br />img03.png<br />...<br /><br />into<br /><br />untitled.gif<br />- frame1 - img01.png<br />- frame2 - img02.png<br />- frame3 - img03.png<br />...<br /><br />Any file type will do.<br /><br />2. Assuming img01.png img02.png... are 300x300. I want only a certain part on the whole 300x300 to be used in the final frames.<br /><br />img01.png 300x300<br />rectangle cut:<br />- starting point cordinates 10, 10<br />- ending point coordinates 290, 290<br /><br />this cut will apply to all frames. Then I can save the final output into an animated gif(in the case above, it will be 280x280 anigif).<br /><br />There are a lot of gif creator programs out there and I've installed more than a dozen of them already and I still haven't found what I want.<br /><br />:grin:</div>
    <div class="meta">Posted on 2004-04-20 19:57:07 by arkane</div>
   </div>
   <div class="post" id="post-139809">
    <div class="subject"><a href="#post-139809">simple gif animation</a></div>
    <div class="body">I cant see this being a hard project to do yourself.  This is assuming you can find the GIF specifications on the net somewhere.  Thomas has already done you the favor of providing a PNG library, and internal to the OS its pretty simple to manage bitmap images:<br /><br />PNG -&gt; OS:BMP -&gt; Crop:OS:Bmp -&gt; GIF Frame<br /><br />Its reall the last translation that would require some homework.  Anyone know of where a good spec can be found for GIF?<br /><br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2004-04-22 18:16:40 by NaN</div>
   </div>
   <div class="post" id="post-139811">
    <div class="subject"><a href="#post-139811">simple gif animation</a></div>
    <div class="body"><div class="quote"><br />I cant see this being a hard project to do yourself.  This is assuming you can find the GIF specifications on the net somewhere.  Thomas has already done you the favor of providing a PNG library, and internal to the OS its pretty simple to manage bitmap images:<br /><br />PNG -&gt; OS:BMP -&gt; Crop:OS:Bmp -&gt; GIF Frame<br /><br />Its reall the last translation that would require some homework.  Anyone know of where a good spec can be found for GIF?<br /><br />:alright:<br />NaN </div><br /><br />Yep:)  <a target="_blank" href="http://www.wotsit.org">http://www.wotsit.org</a>  &lt;--been one of my favorite websites for a while now;)  Best one for file format specifications that I have found  (and I LOOOVE working with that stuff:D )<br /><br />Haven't personally tried to make a GIF program using the GIF specs but they do have quite a few there;)....read those:D</div>
    <div class="meta">Posted on 2004-04-22 18:37:47 by ShortCoder</div>
   </div>
   <div class="post" id="post-139824">
    <div class="subject"><a href="#post-139824">simple gif animation</a></div>
    <div class="body">Wow, it appears that Compuserve released something to actually help people use GIF.  However, note their copyright restrictions:<br /><pre><code>                                G I F &#40;tm&#41;<br />                     Graphics Interchange Format &#40;tm&#41;<br />                      A standard defining a mechanism<br />                     for the storage and transmission<br />                   of raster-based graphics information<br />                               June 15, 1987<br />                     &#40;c&#41; CompuServe Incorporated, 1987<br />                            All rights reserved<br />            While this document is copyrighted, the information<br />          contained within is made available for use in computer<br />          software without royalties, or licensing restrictions.<br />          GIF and 'Graphics Interchange Format' are trademarks of<br />                         CompuServe, Incorporated.<br />                           an H&amp;R Block Company<br />                        5000 Arlington Centre Blvd.<br />                           Columbus, Ohio 43220<br />                              &#40;614&#41; 457-8600<br />                                                                     Page 2<br />              Graphics Interchange Format &#40;GIF&#41; Specification<br />                             Table of Contents<br />        INTRODUCTION . . . . . . . . . . . . . . . . . page 3<br />        GENERAL FILE FORMAT  . . . . . . . . . . . . . page 3<br />        GIF SIGNATURE  . . . . . . . . . . . . . . . . page 4<br />        SCREEN DESCRIPTOR  . . . . . . . . . . . . . . page 4<br />        GLOBAL COLOR MAP . . . . . . . . . . . . . . . page 5<br />        IMAGE DESCRIPTOR . . . . . . . . . . . . . . . page 6<br />        LOCAL COLOR MAP  . . . . . . . . . . . . . . . page 7<br />        RASTER DATA  . . . . . . . . . . . . . . . . . page 7<br />        GIF TERMINATOR . . . . . . . . . . . . . . . . page 8<br />        GIF EXTENSION BLOCKS . . . . . . . . . . . . . page 8<br />        APPENDIX A - GLOSSARY  . . . . . . . . . . . . page 9<br />        APPENDIX B - INTERACTIVE SEQUENCES . . . . . . page 10<br />        APPENDIX C - IMAGE PACKAGING &amp; COMPRESSION . . page 12<br />        APPENDIX D - MULTIPLE IMAGE PROCESSING . . . . page 15<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 3<br />Specification<br />INTRODUCTION<br />        'GIF' &#40;tm&#41; is CompuServe's standard for defining generalized  color<br />   raster   images.    This   'Graphics  Interchange  Format'  &#40;tm&#41;  allows<br />   high-quality, high-resolution graphics to be displayed on a  variety  of<br />   graphics  hardware  and is intended as an exchange and display mechanism<br />   for graphics images.  The image format described  in  this  document  is<br />   designed  to  support  current  and  future image technology and will in<br />   addition serve as a basis for future CompuServe graphics products.<br />        The main focus  of  this  document  is  to  provide  the  technical<br />   information  necessary  for  a  programmer to implement GIF encoders and<br />   decoders.  As such, some assumptions are made as to terminology relavent<br />   to graphics and programming in general.<br />        The first section of this document describes the  GIF  data  format<br />   and its components and applies to all GIF decoders, either as standalone<br />   programs or as part of  a  communications  package.   Appendix  B  is  a<br />   section  relavent to decoders that are part of a communications software<br />   package and describes the protocol requirements for entering and exiting<br />   GIF mode, and responding to host interrogations.  A glossary in Appendix<br />   A defines some of the terminology used in  this  document.   Appendix  C<br />   gives  a  detailed  explanation  of  how  the  graphics  image itself is<br />   packaged as a series of data bytes.<br />                Graphics Interchange Format Data Definition<br /> GENERAL FILE FORMAT<br />        +-----------------------+<br />        | +-------------------+ |<br />        | |   GIF Signature   | |<br />        | +-------------------+ |<br />        | +-------------------+ |<br />        | | Screen Descriptor | |<br />        | +-------------------+ |<br />        | +-------------------+ |<br />        | | Global Color Map  | |<br />        | +-------------------+ |<br />        . . .               . . .<br />        | +-------------------+ |    ---+   <br />        | |  Image Descriptor | |       |   <br />        | +-------------------+ |       |   <br />        | +-------------------+ |       |  <br />        | |  Local Color Map  | |       |-   Repeated 1 to n times<br />        | +-------------------+ |       |   <br />        | +-------------------+ |       |   <br />        | |    Raster Data    | |       |   <br />        | +-------------------+ |    ---+   <br />        . . .               . . .   <br />        |-    GIF Terminator   -|   <br />        +-----------------------+<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 4<br />Specification<br /> GIF SIGNATURE<br />        The following GIF Signature identifies  the  data  following  as  a<br />   valid GIF image stream.  It consists of the following six characters&#58;<br />             G I F 8 7 a<br />        The last three characters '87a' may be viewed as a  version  number<br />   for  this  particular  GIF  definition  and will be used in general as a<br />   reference  in  documents  regarding  GIF  that   address   any   version<br />   dependencies.<br /> SCREEN DESCRIPTOR<br />        The Screen Descriptor describes the overall parameters for all  GIF<br />   images  following.  It defines the overall dimensions of the image space<br />   or logical screen required, the existance of color mapping  information,<br />   background  screen color, and color depth information.  This information<br />   is stored in a series of 8-bit bytes as described below.<br />              bits<br />         7 6 5 4 3 2 1 0  Byte #<br />        +---------------+<br />        |               |  1<br />        +-Screen Width -+      Raster width in pixels &#40;LSB first&#41;<br />        |               |  2<br />        +---------------+<br />        |               |  3<br />        +-Screen Height-+      Raster height in pixels &#40;LSB first&#41;<br />        |               |  4<br />        +-+-----+-+-----+      M = 1, Global color map follows Descriptor<br />        |M|  cr |0|pixel|  5   cr+1 = # bits of color resolution<br />        +-+-----+-+-----+      pixel+1 = # bits/pixel in image<br />        |   background  |  6   background=Color index of screen background<br />        +---------------+          &#40;color is defined from the Global color<br />        |0 0 0 0 0 0 0 0|  7        map or default map if none specified&#41;<br />        +---------------+<br />        The logical screen width and height can both  be  larger  than  the<br />   physical  display.   How  images  larger  than  the physical display are<br />   handled is implementation dependent and can take advantage  of  hardware<br />   characteristics  &#40;e.g.   Macintosh scrolling windows&#41;.  Otherwise images<br />   can be clipped to the edges of the display.<br />        The value of 'pixel' also defines  the  maximum  number  of  colors<br />   within  an  image.   The  range  of  values  for 'pixel' is 0 to 7 which<br />   represents 1 to 8 bits.  This translates to a range of 2 &#40;B &amp; W&#41; to  256<br />   colors.   Bit  3 of word 5 is reserved for future definition and must be<br />   zero.<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 5<br />Specification<br /> GLOBAL COLOR MAP<br />        The Global Color Map is optional but recommended for  images  where<br />   accurate color rendition is desired.  The existence of this color map is<br />   indicated in the 'M' field of byte 5 of the Screen Descriptor.  A  color<br />   map  can  also  be associated with each image in a GIF file as described<br />   later.  However this  global  map  will  normally  be  used  because  of<br />   hardware  restrictions  in equipment available today.  In the individual<br />   Image Descriptors the 'M' flag will normally be  zero.   If  the  Global<br />   Color  Map  is  present,  it's definition immediately follows the Screen<br />   Descriptor.   The  number  of  color  map  entries  following  a  Screen<br />   Descriptor  is equal to 2**&#40;# bits per pixel&#41;, where each entry consists<br />   of three byte values representing the relative intensities of red, green<br />   and blue respectively.  The structure of the Color Map block is&#58;<br />              bits<br />         7 6 5 4 3 2 1 0  Byte #<br />        +---------------+<br />        | red intensity |  1    Red value for color index 0<br />        +---------------+<br />        |green intensity|  2    Green value for color index 0<br />        +---------------+<br />        | blue intensity|  3    Blue value for color index 0<br />        +---------------+<br />        | red intensity |  4    Red value for color index 1<br />        +---------------+<br />        |green intensity|  5    Green value for color index 1<br />        +---------------+<br />        | blue intensity|  6    Blue value for color index 1<br />        +---------------+<br />        &#58;               &#58;       &#40;Continues for remaining colors&#41;<br />        Each image pixel value received will be displayed according to  its<br />   closest match with an available color of the display based on this color<br />   map.  The color components represent a fractional intensity  value  from<br />   none  &#40;0&#41;  to  full &#40;255&#41;.  White would be represented as &#40;255,255,255&#41;,<br />   black as &#40;0,0,0&#41; and medium yellow as &#40;180,180,0&#41;.  For display, if  the<br />   device  supports fewer than 8 bits per color component, the higher order<br />   bits of each component are used.  In the creation of  a  GIF  color  map<br />   entry  with  hardware  supporting  fewer  than 8 bits per component, the<br />   component values for the hardware  should  be  converted  to  the  8-bit<br />   format with the following calculation&#58;<br />        &lt;map_value&gt; = &lt;component_value&gt;*255/&#40;2**&lt;nbits&gt; -1&#41;<br />        This assures accurate translation of colors for all  displays.   In<br />   the  cases  of  creating  GIF images from hardware without color palette<br />   capability, a fixed palette should be created  based  on  the  available<br />   display  colors for that hardware.  If no Global Color Map is indicated,<br />   a default color map is generated internally  which  maps  each  possible<br />   incoming  color  index to the same hardware color index modulo &lt;n&gt; where<br />   &lt;n&gt; is the number of available hardware colors.<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 6<br />Specification<br /> IMAGE DESCRIPTOR<br />        The Image Descriptor defines the actual placement  and  extents  of<br />   the  following  image within the space defined in the Screen Descriptor.<br />   Also defined are flags to indicate the presence of a local color  lookup<br />   map, and to define the pixel display sequence.  Each Image Descriptor is<br />   introduced by an image separator  character.   The  role  of  the  Image<br />   Separator  is simply to provide a synchronization character to introduce<br />   an Image Descriptor.  This is desirable if a GIF file happens to contain<br />   more  than  one  image.   This  character  is defined as 0x2C hex or ','<br />   &#40;comma&#41;.  When this character is encountered between images,  the  Image<br />   Descriptor will follow immediately.<br />        Any characters encountered between the end of a previous image  and<br />   the image separator character are to be ignored.  This allows future GIF<br />   enhancements to be present in newer image formats and yet ignored safely<br />   by older software decoders.<br />              bits<br />         7 6 5 4 3 2 1 0  Byte #<br />        +---------------+<br />        |0 0 1 0 1 1 0 0|  1    ',' - Image separator character<br />        +---------------+<br />        |               |  2    Start of image in pixels from the<br />        +-  Image Left -+       left side of the screen &#40;LSB first&#41;<br />        |               |  3<br />        +---------------+<br />        |               |  4<br />        +-  Image Top  -+       Start of image in pixels from the<br />        |               |  5    top of the screen &#40;LSB first&#41;<br />        +---------------+<br />        |               |  6<br />        +- Image Width -+       Width of the image in pixels &#40;LSB first&#41;<br />        |               |  7<br />        +---------------+<br />        |               |  8<br />        +- Image Height-+       Height of the image in pixels &#40;LSB first&#41;<br />        |               |  9<br />        +-+-+-+-+-+-----+       M=0 - Use global color map, ignore 'pixel'<br />        |M|I|0|0|0|pixel| 10    M=1 - Local color map follows, use 'pixel'<br />        +-+-+-+-+-+-----+       I=0 - Image formatted in Sequential order<br />                                I=1 - Image formatted in Interlaced order<br />                                pixel+1 - # bits per pixel for this image<br />        The specifications for the image position and size must be confined<br />   to  the  dimensions defined by the Screen Descriptor.  On the other hand<br />   it is not necessary that the image fill the entire screen defined.<br /> LOCAL COLOR MAP<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 7<br />Specification<br />        A Local Color Map is optional and defined here for future use.   If<br />   the  'M' bit of byte 10 of the Image Descriptor is set, then a color map<br />   follows the Image Descriptor that applies only to the  following  image.<br />   At the end of the image, the color map will revert to that defined after<br />   the Screen Descriptor.  Note that the 'pixel' field of byte  10  of  the<br />   Image  Descriptor  is used only if a Local Color Map is indicated.  This<br />   defines the parameters not only for the image pixel size, but determines<br />   the  number  of color map entries that follow.  The bits per pixel value<br />   will also revert to the value specified in the  Screen  Descriptor  when<br />   processing of the image is complete.<br /> RASTER DATA<br />        The format of the actual image is defined as the  series  of  pixel<br />   color  index  values that make up the image.  The pixels are stored left<br />   to right sequentially for an image row.  By default each  image  row  is<br />   written  sequentially, top to bottom.  In the case that the Interlace or<br />   'I' bit is set in byte 10 of the Image Descriptor then the row order  of<br />   the  image  display  follows  a  four-pass process in which the image is<br />   filled in by widely spaced rows.  The first pass writes every  8th  row,<br />   starting  with  the top row of the image window.  The second pass writes<br />   every 8th row starting at the fifth row from the top.   The  third  pass<br />   writes every 4th row starting at the third row from the top.  The fourth<br />   pass completes the image, writing  every  other  row,  starting  at  the<br />   second row from the top.  A graphic description of this process follows&#58;<br />   Image<br />   Row  Pass 1  Pass 2  Pass 3  Pass 4          Result<br />   ---------------------------------------------------<br />     0  **1a**                                  **1a**<br />     1                          **4a**          **4a**<br />     2                  **3a**                  **3a**<br />     3                          **4b**          **4b**<br />     4          **2a**                          **2a**<br />     5                          **4c**          **4c**<br />     6                  **3b**                  **3b**<br />     7                          **4d**          **4d**<br />     8  **1b**                                  **1b**<br />     9                          **4e**          **4e**<br />    10                  **3c**                  **3c**<br />    11                          **4f**          **4f**<br />    12          **2b**                          **2b**<br />   . . . <br />        The image pixel values are processed as a series of  color  indices<br />   which  map  into the existing color map.  The resulting color value from<br />   the map is what is actually displayed.  This series  of  pixel  indices,<br />   the  number  of  which  is equal to image-width*image-height pixels, are<br />   passed to the GIF image data stream one value per pixel, compressed  and<br />   packaged  according  to  a  version  of the LZW compression algorithm as<br />   defined in Appendix C.<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 8<br />Specification<br /> GIF TERMINATOR<br />        In order to provide a synchronization for the termination of a  GIF<br />   image  file,  a  GIF  decoder  will process the end of GIF mode when the<br />   character 0x3B hex or ';' is found after an image  has  been  processed.<br />   By  convention  the  decoding software will pause and wait for an action<br />   indicating that the user is ready to continue.  This may be  a  carriage<br />   return  entered  at  the  keyboard  or  a  mouse click.  For interactive<br />   applications this user action must  be  passed  on  to  the  host  as  a<br />   carriage  return  character  so  that the host application can continue.<br />   The decoding software will then typically leave graphics mode and resume<br />   any previous process.<br /> GIF EXTENSION BLOCKS<br />        To provide for orderly extension of the GIF definition, a mechanism<br />   for  defining  the  packaging  of extensions within a GIF data stream is<br />   necessary.  Specific GIF extensions are to be defined and documented  by<br />   CompuServe in order to provide a controlled enhancement path.<br />        GIF Extension Blocks are packaged in a manner similar to that  used<br />   by the raster data though not compressed.  The basic structure is&#58;<br />         7 6 5 4 3 2 1 0  Byte #<br />        +---------------+<br />        |0 0 1 0 0 0 0 1|  1       '!' - GIF Extension Block Introducer<br />        +---------------+<br />        | function code |  2       Extension function code &#40;0 to 255&#41;<br />        +---------------+    ---+<br />        |  byte count   |       |<br />        +---------------+       |<br />        &#58;               &#58;       +-- Repeated as many times as necessary<br />        |func data bytes|       |<br />        &#58;               &#58;       |<br />        +---------------+    ---+<br />        . . .       . . .<br />        +---------------+<br />        |0 0 0 0 0 0 0 0|       zero byte count &#40;terminates block&#41;<br />        +---------------+<br />        A GIF Extension Block may immediately preceed any Image  Descriptor<br />   or occur before the GIF Terminator.<br />        All GIF decoders must be able to recognize  the  existence  of  GIF<br />   Extension  Blocks  and  read past them if unable to process the function<br />   code.  This ensures that older decoders will be able to process extended<br />   GIF   image   files   in  the  future,  though  without  the  additional<br />   functionality.<br />Graphics Interchange Format &#40;GIF&#41;                                    Page 9<br />Appendix A - Glossary<br />                                 GLOSSARY<br />Pixel - The smallest picture element of a  graphics  image.   This  usually<br />   corresponds  to  a single dot on a graphics screen.  Image resolution is<br />   typically given in units of  pixels.   For  example  a  fairly  standard<br />   graphics  screen  format  is  one 320 pixels across and 200 pixels high.<br />   Each pixel can  appear  as  one  of  several  colors  depending  on  the<br />   capabilities of the graphics hardware.<br />Raster - A horizontal row of pixels representing one line of an  image.   A<br />   typical method of working with images since most hardware is oriented to<br />   work most efficiently in this manner.<br />LSB - Least Significant Byte.  Refers to a convention for two byte  numeric<br />   values in which the less significant byte of the value preceeds the more<br />   significant byte.  This convention is typical on many microcomputers.<br />Color Map - The list of definitions of each color  used  in  a  GIF  image.<br />   These  desired  colors are converted to available colors through a table<br />   which is derived by assigning an incoming color index &#40;from  the  image&#41;<br />   to  an  output  color  index  &#40;of  the  hardware&#41;.   While the color map<br />   definitons are specified in a GIF image, the output  pixel  colors  will<br />   vary  based  on  the  hardware used and its ability to match the defined<br />   color.<br />Interlace - The method of displaying a GIF image in which  multiple  passes<br />   are  made,  outputting  raster  lines  spaced  apart to provide a way of<br />   visualizing the general content of an entire image  before  all  of  the<br />   data has been processed.<br />B Protocol - A CompuServe-developed error-correcting file transfer protocol<br />   available  in  the  public  domain  and implemented in CompuServe VIDTEX<br />   products.  This error checking mechanism will be used  in  transfers  of<br />   GIF images for interactive applications.<br />LZW - A sophisticated data compression algorithm  based  on  work  done  by<br />   Lempel-Ziv  &amp;  Welch  which  has  the feature of very efficient one-pass<br />   encoding and decoding.  This allows the image  to  be  decompressed  and<br />   displayed  at  the  same  time.   The  original  article from which this<br />   technique was adapted is&#58;<br />          Terry  A.   Welch,  &quot;A  Technique  for  High   Performance   Data<br />          Compression&quot;, IEEE Computer, vol 17 no 6 &#40;June 1984&#41;<br />        This basic algorithm is also used in the  public  domain  ARC  file<br />   compression  utilities.   The  CompuServe  adaptation  of LZW for GIF is<br />   described in Appendix C.<br />Graphics Interchange Format &#40;GIF&#41;                                   Page 10<br />Appendix B - Interactive Sequences<br />           GIF Sequence Exchanges for an Interactive Environment<br />        The following sequences are defined for use  in  mediating  control<br />   between a GIF sender and GIF receiver over an interactive communications<br />   line.  These  sequences  do  not  apply  to  applications  that  involve<br />   downloading  of  static  GIF  files and are not considered part of a GIF<br />   file.<br /> GIF CAPABILITIES ENQUIRY<br />        The GCE sequence is issued from a host and requests an  interactive<br />   GIF  decoder  to  return  a  response  message that defines the graphics<br />   parameters for the decoder.  This involves returning  information  about<br />   available screen sizes, number of bits/color supported and the amount of<br />   color detail supported.  The escape sequence for the GCE is defined as&#58;<br />        ESC &#91; &gt; 0 g     &#40;g is lower case, spaces inserted for clarity&#41;<br />                         &#40;0x1B 0x5B 0x3E 0x30 0x67&#41;<br /> GIF CAPABILITIES RESPONSE<br />        The GIF Capabilities Response message is returned by an interactive<br />   GIF  decoder  and  defines  the  decoder's  display capabilities for all<br />   graphics modes that are supported by the software.  Note that  this  can<br />   also include graphics printers as well as a monitor screen.  The general<br />   format of this message is&#58;<br />     #version;protocol&#123;;dev, width, height, color-bits, color-res&#125;... &lt;CR&gt;<br />   '#'          - GCR identifier character &#40;Number Sign&#41;<br />   version      - GIF format version number;  initially '87a'<br />   protocol='0' - No end-to-end protocol supported by decoder<br />                  Transfer as direct 8-bit data stream.<br />   protocol='1' - Can use an error correction protocol to transfer GIF data<br />               interactively from the host directly to the display.<br />   dev = '0'    - Screen parameter set follows<br />   dev = '1'    - Printer parameter set follows<br />   width        - Maximum supported display width in pixels<br />   height       - Maximum supported display height in pixels<br />   color-bits   - Number of  bits  per  pixel  supported.   The  number  of<br />               supported colors is therefore 2**color-bits.<br />   color-res    - Number of bits  per  color  component  supported  in  the<br />               hardware  color  palette.   If  color-res  is  '0'  then  no<br />               hardware palette table is available.<br />        Note that all values in the  GCR  are  returned  as  ASCII  decimal<br />   numbers and the message is terminated by a Carriage Return character.<br />Graphics Interchange Format &#40;GIF&#41;                                   Page 11<br />Appendix B - Interactive Sequences<br />        The  following   GCR   message   describes   three   standard   EGA<br />   configurations  with  no  printer;  the GIF data stream can be processed<br />   within an error correcting protocol&#58;<br />        #87a;1 ;0,320,200,4,0 ;0,640,200,2,2 ;0,640,350,4,2&lt;CR&gt;<br /> ENTER GIF GRAPHICS MODE<br />        Two sequences are currently defined to invoke  an  interactive  GIF<br />   decoder into action.  The only difference between them is that different<br />   output media are selected.  These sequences are&#58;<br />     ESC &#91; &gt; 1 g   Display GIF image on screen<br />                   &#40;0x1B 0x5B 0x3E 0x31 0x67&#41;<br />     ESC &#91; &gt; 2 g   Display image directly to an attached graphics  printer.<br />                   The  image  may optionally be displayed on the screen as<br />                   well.<br />                   &#40;0x1B 0x5B 0x3E 0x32 0x67&#41;<br />        Note that the 'g' character terminating each sequence is  in  lower<br />   case.<br /> INTERACTIVE ENVIRONMENT<br />        The assumed environment for the transmission of GIF image data from<br />   an  interactive  application  is  a  full 8-bit data stream from host to<br />   micro.  All 256 character codes must be transferrable.  The establishing<br />   of  an 8-bit data path for communications will normally be taken care of<br />   by the host application programs.  It is however  up  to  the  receiving<br />   communications programs supporting GIF to be able to receive and pass on<br />   all 256 8-bit codes to the GIF decoder software.<br />Graphics Interchange Format &#40;GIF&#41;                                   Page 12<br />Appendix C - Image Packaging &amp; Compression<br />        The Raster Data stream that represents the actual output image  can<br />   be represented as&#58;<br />         7 6 5 4 3 2 1 0<br />        +---------------+<br />        |   code size   | <br />        +---------------+     ---+<br />        |blok byte count|        |<br />        +---------------+        |<br />        &#58;               &#58;        +-- Repeated as many times as necessary<br />        |  data bytes   |        |<br />        &#58;               &#58;        |<br />        +---------------+     ---+<br />        . . .       . . .<br />        +---------------+<br />        |0 0 0 0 0 0 0 0|       zero byte count &#40;terminates data stream&#41;<br />        +---------------+<br />        The conversion of the image from a series  of  pixel  values  to  a<br />   transmitted or stored character stream involves several steps.  In brief<br />   these steps are&#58;<br />   1.  Establish the Code Size -  Define  the  number  of  bits  needed  to<br />       represent the actual data.<br />   2.  Compress the Data - Compress the series of image pixels to a  series<br />       of compression codes.<br />   3.  Build a Series of Bytes - Take the  set  of  compression  codes  and<br />       convert to a string of 8-bit bytes.<br />   4.  Package the Bytes - Package sets of bytes into blocks  preceeded  by<br />       character counts and output.<br />ESTABLISH CODE SIZE<br />        The first byte of the GIF Raster Data stream is a value  indicating<br />   the minimum number of bits required to represent the set of actual pixel<br />   values.  Normally this will be the same as the  number  of  color  bits.<br />   Because  of  some  algorithmic constraints however, black &amp; white images<br />   which have one color bit must be indicated as having a code size  of  2.<br />   This  code size value also implies that the compression codes must start<br />   out one bit longer.<br />COMPRESSION<br />        The LZW algorithm converts a series of data values into a series of<br />   codes  which may be raw values or a code designating a series of values.<br />   Using text characters as an analogy,  the  output  code  consists  of  a<br />   character or a code representing a string of characters.<br />Graphics Interchange Format &#40;GIF&#41;                                   Page 13<br />Appendix C - Image Packaging &amp; Compression<br />        The LZW algorithm used in  GIF  matches  algorithmically  with  the<br />   standard LZW algorithm with the following differences&#58;<br />   1.  A   special   Clear   code   is    defined    which    resets    all<br />       compression/decompression parameters and tables to a start-up state.<br />       The value of this code is 2**&lt;code size&gt;.  For example if  the  code<br />       size  indicated  was 4 &#40;image was 4 bits/pixel&#41; the Clear code value<br />       would be 16 &#40;10000 binary&#41;.  The Clear code can appear at any  point<br />       in the image data stream and therefore requires the LZW algorithm to<br />       process succeeding codes as if  a  new  data  stream  was  starting.<br />       Encoders  should output a Clear code as the first code of each image<br />       data stream.<br />   2.  An End of Information code is defined that explicitly indicates  the<br />       end  of  the image data stream.  LZW processing terminates when this<br />       code is encountered.  It must be the last code output by the encoder<br />       for an image.  The value of this code is &lt;Clear code&gt;+1.<br />   3.  The first available compression code value is &lt;Clear code&gt;+2.<br />   4.  The output codes are of variable length, starting  at  &lt;code size&gt;+1<br />       bits  per code, up to 12 bits per code.  This defines a maximum code<br />       value of 4095 &#40;hex FFF&#41;.  Whenever the LZW code value  would  exceed<br />       the  current  code length, the code length is increased by one.  The<br />       packing/unpacking of these codes must then be altered to reflect the<br />       new code length.<br />BUILD 8-BIT BYTES<br />        Because the LZW compression  used  for  GIF  creates  a  series  of<br />   variable  length  codes, of between 3 and 12 bits each, these codes must<br />   be reformed into a series of 8-bit bytes that  will  be  the  characters<br />   actually stored or transmitted.  This provides additional compression of<br />   the image.  The codes are formed into a stream of bits as if  they  were<br />   packed  right to left and then picked off 8 bits at a time to be output.<br />   Assuming a character array of 8 bits per character and using 5 bit codes<br />   to be packed, an example layout would be similar to&#58;<br />         byte n       byte 5   byte 4   byte 3   byte 2   byte 1<br />        +-.....-----+--------+--------+--------+--------+--------+<br />        | and so on |hhhhhggg|ggfffffe|eeeedddd|dcccccbb|bbbaaaaa|<br />        +-.....-----+--------+--------+--------+--------+--------+<br />        Note that the physical  packing  arrangement  will  change  as  the<br />   number  of  bits per compression code change but the concept remains the<br />   same.<br />PACKAGE THE BYTES<br />        Once the bytes have been created, they are grouped into blocks  for<br />   output by preceeding each block of 0 to 255 bytes with a character count<br />   byte.  A block with a zero byte count terminates the Raster Data  stream<br />   for  a  given  image.  These blocks are what are actually output for the<br />Graphics Interchange Format &#40;GIF&#41;                                   Page 14<br />Appendix C - Image Packaging &amp; Compression<br />   GIF image.  This block format has the side effect of allowing a decoding<br />   program  the  ability to read past the actual image data if necessary by<br />   reading block counts and then skipping over the data.<br />Graphics Interchange Format &#40;GIF&#41;                                   Page 15<br />Appendix D - Multiple Image Processing<br />        Since a  GIF  data  stream  can  contain  multiple  images,  it  is<br />   necessary  to  describe  processing and display of such a file.  Because<br />   the image descriptor allows  for  placement  of  the  image  within  the<br />   logical  screen,  it is possible to define a sequence of images that may<br />   each be a partial screen, but in total  fill  the  entire  screen.   The<br />   guidelines for handling the multiple image situation are&#58;<br />   1.  There is no pause between images.  Each is processed immediately  as<br />       seen by the decoder.<br />   2.  Each image explicitly overwrites any image  already  on  the  screen<br />       inside  of  its window.  The only screen clears are at the beginning<br />       and end of the  GIF  image  process.   See  discussion  on  the  GIF<br />       terminator.<br />4444444444444444444444444444444444444444444444444444444444444444444444444444<br /></code></pre><br /><br />Enjoy..<br />Regards,<br />:NaN:</div>
    <div class="meta">Posted on 2004-04-22 20:30:40 by NaN</div>
   </div>
  </div>
 </body>
</html>