<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>TUTORIAL: Operations with 2D and 3D Polygons - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29845" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=29845">TUTORIAL: Operations with 2D and 3D Polygons</a></p>
   <div class="post" id="post-210865">
    <div class="subject"><a href="#post-210865">TUTORIAL: Operations with 2D and 3D Polygons</a></div>
    <div class="body">Hello, and welcome to this tutorial :)<br /><br />This thread will (initially) be dedicated to the development of a general-purpose oop object for describing 2D polygons, and performing various tests with them. It will serve as the basis for a more generalized 3D class.<br />The code will be written for the ObjAsm oopasm environment, but don&#039;t be put off - you may still learn something :)<br /><br />If you are reading this as I write it, you may want to periodically check for modified posts...<br /><br />To begin with, let&#039;s assume that we want to handle pairs of NON CONVEX 2d polygons, and that they are &#039;sane&#039; (don&#039;t self-intersect), and finally, that they always have the same &#039;winding order&#039; (they are perfectly coplanar - their surface normals point in the same direction .. will help us later in 3D).<br />We can handle CONVEX polygons later... I choose the more difficult case first :)<br /><br />So, let&#039;s define our Polygon object as an ObjAsm class.<br />What do we need it to contain as a bare minimum?<br />We could either describe our polygon as a set of edges, or as a set of points, both being circular lists.<br />While each has its advantages, we should choose one, and I choose to keep a list of points.<br />So: we need to keep a list of the 2d points (coordinates) which make up the polygon.<br />In fact, we COULD assume that they exist in an array somewhere else, and just remember their Vertex Index instead :) But to start with, we&#039;ll just shove numbers into a list.<br /><br />And for the purposes of this tutorial, let&#039;s implement the list of points by inheriting from ObjAsm&#039;s DwordCollection class. This allows us to keep an unsorted list of 32-bit integers, and we can choose to allow or disallow duplicates.<br />DwordCollections will also Grow automatically, if we underestimated the storage space requirements.<br />Inheriting from an existing class means that our Polygon object will inherit all the data, and all the code methods, which are defined by the ancestor class, and any ancestors it might have. But we&#039;re only typically only interested in the immediate ancestor class, in this case, DwordCollection. We&#039;ll have to call its Init method from our code.<br /><br />The object would look something like this:<br /><br /><pre><code><br />Object POLYGON, PolygonID, DwordCollection<br /> &nbsp; &nbsp;;Nothing going on here yet<br />ObjectEnd<br /></code></pre><br /><br />Now to build a Polygon, we simply create an instance (New), initialize it (New Polygon, Init, pOwner, 3, 3, INFINITE), then construct its geometry (add our 2D points via calls to the Insert method).<br />In this example, I&#039;ll be storing the 2D coordinates as pairs of REAL4 floating point values.<br /><br /><br /><pre><code><br />mov pMyFirstPolygon, $New(POLYGON, Init, NULL, 3, 3, INFINITE)<br />OCall pMyFirstPolygon::POLYGON.Insert, 20.0 &nbsp; &nbsp; &nbsp; ;X coordinate<br />OCall pMyFirstPolygon::POLYGON.Insert, 15.27 &nbsp; &nbsp; ;Y coordinate<br /></code></pre><br /><br />Remember that the Polygon represents a Circular Buffer of 2D points forming a CLOSED POLYGON... this implies that the first point is also the last point - don&#039;t put it in there twice.<br />We should observe the same Winding Order - soon we&#039;ll see how to enforce that.<br /><br />&lt;stuff about &#039;which side of a line is this point test&#039; here, as it lead into&gt;<br />&lt;stuff about determining and enforcing winding order goes here&gt;<br /><br />Now that we&#039;ve constructed our first Polygon, we better make another one, since we need at least two for intersection testing :P<br /><br /><br />&lt;example polygons jpg to go here&gt;<br />Let&#039;s discuss the possible outcomes of an intersection test between two coplanar 2D polygons.<br />We can note that there are basically three possible cases:<br /><br />1 - The polygons do not intersect. They are separated by some space (or are &#039;just touching&#039; - special case!)<br />2 - One polygon is entirely inside another.<br />3 - The polygons overlap in some fashion.<br /><br />We can&#039;t simply check &#039;if a point of one Polygon is inside the other&#039; - this won&#039;t cover case 1 or 3.<br />And we can&#039;t simply check &#039;if any Edge of one Polygon intersects any Edge of the other&#039; - this won&#039;t cover case 2.<br />The easiest case to check for, and perhaps the fastest (?) is the first case.<br />For this, we can use &#039;SAT&#039; (Separating Axis Theorem).<br />Basically, if we can find any Edge of either Polygon which cleanly separates the two Polygons (a separating axis), then we have case 1: polygons are not intersecting (but may be touching).<br />If we can&#039;t find a Separating Axis, then we must have some kind of intersection (cases 2 and 3), and can move on to another more expensive (?) test - ie, checking for Case 2 (Poly in Poly).<br /><br />&lt;here belongs injected content&gt;<br /></div>
    <div class="meta">Posted on 2010-02-22 01:00:28 by Homer</div>
   </div>
   <div class="post" id="post-210896">
    <div class="subject"><a href="#post-210896">Re: TUTORIAL: Operations with 2D and 3D Polygons</a></div>
    <div class="body">I actually have a great new algorithm to lay out here, which is my own creation.<br />Not enough interest, I&#039;ll keep it to myself.<br />This thread will evolve with due interest.<br />Anyone who actually really was interested in this, be patient, or complain loudly.<br /></div>
    <div class="meta">Posted on 2010-03-01 04:13:14 by Homer</div>
   </div>
  </div>
 </body>
</html>