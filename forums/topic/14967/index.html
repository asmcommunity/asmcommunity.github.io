<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Region calculator - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14967" />
    <link rel="next" href="../?id=14967&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14967">Region calculator</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=14967&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14967&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14967" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14967&amp;page=2">&gt;</a><a href="../?id=14967&amp;page=2">&raquo;</a></form>   <div class="post" id="post-116165">
    <div class="subject"><a href="#post-116165">Region calculator</a></div>
    <div class="body">Hi<br /><br />I'm currently working on a program to calculate regions from image files, to be used for skinning a program. It's still VERY beta (scroll bars are not yet implemented, for example :grin: ), but most of it is finished, and I wanted to know if there's any bugs that need correction, or suggestions of new features to be implemented, before I get to work on the scrollbars (it will need rewriting of my paint routines).<br /><br />The regions are saved as raw files, using a RGNDATA structure. I have seen some tutorials on skinning windows (like Test Department's), but they only store the RECT data, and not the RGNDATAHEADER part. Is there any specific reason for this? (like a compatibility problem or so). I'm using ExtCreateRegion, that's why I prefer to store the whole structure (and so it can be used in the resource script, otherwise I would have to hardcode the filesize in the program, I think it's more versatile this way).<br /><br />The program also allows you to manually edit the region data. I'm interested in any suggestions regarding how to improve the region editor.<br /><br />EDIT: Deleted attachment (44 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-08-29 15:30:56 by QvasiModo</div>
   </div>
   <div class="post" id="post-116172">
    <div class="subject"><a href="#post-116172">Region calculator</a></div>
    <div class="body">It would be nice as an AddIn for RadASM, you could auto-update the resource file, saving the rgn resource in the RES folder.</div>
    <div class="meta">Posted on 2003-08-29 15:44:30 by donkey</div>
   </div>
   <div class="post" id="post-116175">
    <div class="subject"><a href="#post-116175">Region calculator</a></div>
    <div class="body">Very good idea, donkey! I thought only of adding it to the tools menu, but the addin approach is better. Added to the list :)<br /><br />Will implement it a little later though, I want to make sure I finish the standalone version first, since in order to transform it into an addin I won't have to rewrite much code (like I did with the error lookup thing before).</div>
    <div class="meta">Posted on 2003-08-29 15:52:11 by QvasiModo</div>
   </div>
   <div class="post" id="post-116180">
    <div class="subject"><a href="#post-116180">Region calculator</a></div>
    <div class="body">I understand fully, I am doing the same thing with toolbar paint, I am developping it as a standalone app then at some later date I will convert it to an addin. I would suggest that you provide the possibility to have the filenames loaded by command line, that is what I did. The advantage is that you can keep the standalone app and just write an addin to plug in the filenames and start the standalone. Just my opinion but it is how I am planning to integrate TBPaint into RadASM.</div>
    <div class="meta">Posted on 2003-08-29 16:06:59 by donkey</div>
   </div>
   <div class="post" id="post-116182">
    <div class="subject"><a href="#post-116182">Region calculator</a></div>
    <div class="body">Yes, it's what I was just thinking of doing to convert it to an addin. Thanks for the commandline idea, it's a nice feature and will be easier for the conversion. :)</div>
    <div class="meta">Posted on 2003-08-29 16:10:47 by QvasiModo</div>
   </div>
   <div class="post" id="post-116219">
    <div class="subject"><a href="#post-116219">Region calculator</a></div>
    <div class="body">Well i wont pretend i fully see its uses, but the program is done nicely! Good work..<br /><br />Perhaps you can show an example (simple sample) of its uses in a program?  (I guess this is to do similar stuff as the RGN creator tool ?? )<br /><br />I understand it is your intent for use with skinned windows, but Im not seeing how...  <br />:NaN:<br />:stupid:</div>
    <div class="meta">Posted on 2003-08-29 23:34:34 by NaN</div>
   </div>
   <div class="post" id="post-116286">
    <div class="subject"><a href="#post-116286">Region calculator</a></div>
    <div class="body">Indeed, this program is similar to RGN creator tool... in face I made it because RGN creator didn't do exactly what I wanted :) . Besides I can't learn anything in programming if I don't code an example or two, and this seemed like a constructive way to learn about region GDI objects.<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=14965">Here's a sample use of this program.</a> <br /><br />By precalculating the regions, you can use SetWindowRgn for custom window shapes (necessary for skinning with transparencies). There are several examples of this, including one by TD, but most of the stuff I have seen only stores the RECT structures (making it more difficult to use it the resource section), or calculated the regions on runtime (wich could be very slow if you have several images).<br /><br />The region editor was added just to make some simple operations without having to whip out an hex editor to do it manually, or having to do it in your app.</div>
    <div class="meta">Posted on 2003-08-30 13:44:30 by QvasiModo</div>
   </div>
   <div class="post" id="post-116289">
    <div class="subject"><a href="#post-116289">Update</a></div>
    <div class="body">The last version had a nasty bug when clicking &quot;File -&gt; New&quot; that would cause a heap corruption.<br />Also I have implemented the scroll bars.<br /><br />EDIT: Deleted attachment (32 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-08-30 13:50:19 by QvasiModo</div>
   </div>
   <div class="post" id="post-116329">
    <div class="subject"><a href="#post-116329">Region calculator</a></div>
    <div class="body">Thanks <strong>QvasiModo</strong> for sharing your <strong>RGN</strong> application. I also developed an <strong>RGNDATA</strong> generator but it's only a command line utility.  BTW, my <strong>GenGUID1.2b</strong> application makes use of the <strong>SetWndowRgn</strong> api.</div>
    <div class="meta">Posted on 2003-08-31 01:02:25 by Poimander</div>
   </div>
   <div class="post" id="post-116460">
    <div class="subject"><a href="#post-116460">Region calculator</a></div>
    <div class="body">Thanks Poimander for your support :)  (at least someone sees the point of this program :grin: )<br />I would like to see your RGNDATA app, it would be interesting to compare notes :)</div>
    <div class="meta">Posted on 2003-09-01 09:55:14 by QvasiModo</div>
   </div>
   <div class="post" id="post-116461">
    <div class="subject"><a href="#post-116461">Region calculator</a></div>
    <div class="body">Last beta version. I have no plans for further work on it, except for bug fixes and new feature suggestions. I'll be working on the RadAsm specific version of this.<br /><br />EDIT: Uploaded attachment again. My mistake, it didn't compile well the manifest resource.<br /><br />EDIT: Deleted attachment (16 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-09-01 09:58:27 by QvasiModo</div>
   </div>
   <div class="post" id="post-116926">
    <div class="subject"><a href="#post-116926">Region calculator</a></div>
    <div class="body">New update:<br /><br />- Bugfix: one extra line was being added to the region, outside the image.<br />- Bugfix: transparent GIF pictures are now being loaded correctly.<br />- Bugfix: scroll bars are now being shown properly when the window was maximized and a new picture is loaded.<br />- Bugfix: the main window is now auto resized the the work area, not the screen size.<br /><br />EDIT: Deleted attachment (13 downloads). See bottom of thread.</div>
    <div class="meta">Posted on 2003-09-04 12:50:13 by QvasiModo</div>
   </div>
   <div class="post" id="post-117258">
    <div class="subject"><a href="#post-117258">Region calculator</a></div>
    <div class="body">New bugfix, just the EXE this time (I'm not uploading the addins until I get the to work more or less decently).<br />The scrollbars were not working properly when clicking on them instead of dragging the thumb box.</div>
    <div class="meta">Posted on 2003-09-06 14:21:02 by QvasiModo</div>
   </div>
   <div class="post" id="post-146210">
    <div class="subject"><a href="#post-146210">Region calculator</a></div>
    <div class="body">Sorry to bring up an old thread :), but I have a suggestion for the app:  you seem to be using a very slow method of creating the region data from the bitmap. If you replace the GetPixel based loop with direct image data access, you will get an insane speedup. Also, building a list of RECTs and then ExtCreateRegion rather than constantly CombineRgn will also give a small speedup.<br /><br />But a very nice tool - I was considering writing one of my own, and found yours by accident :-)</div>
    <div class="meta">Posted on 2004-07-16 12:21:36 by f0dder</div>
   </div>
   <div class="post" id="post-146420">
    <div class="subject"><a href="#post-146420">Region calculator</a></div>
    <div class="body">Yeah, the whole app is kinda lame since I didn't know much about direct bitmap access back then. :(<br /><br />Speeding up the routine would probably make it usable on runtime for most cases, so this tool is probably useless anyway :grin: but I'll update it if you wish :)</div>
    <div class="meta">Posted on 2004-07-19 11:24:53 by QvasiModo</div>
   </div>
   <div class="post" id="post-146427">
    <div class="subject"><a href="#post-146427">Region calculator</a></div>
    <div class="body">It's not lame, it's a pretty useful tool - and the slow speed isn't<br />too bad since it's a generation tool. Still would be nice to have the faster code :).<br /><br />Yes, you can do the calculations realtime with the direct pixel access, but there's still a little overhead... so the non-runtime generation is still a nice thing.<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=18893">http://www.asmcommunity.net/board/index.php?topic=18893</a> has some code etc for faster version :)<br /><br />PS: what about releasing the code for your tool?</div>
    <div class="meta">Posted on 2004-07-19 11:45:29 by f0dder</div>
   </div>
   <div class="post" id="post-146739">
    <div class="subject"><a href="#post-146739">Region calculator</a></div>
    <div class="body"><div class="quote"><br />It's not lame, it's a pretty useful tool - and the slow speed isn't<br />too bad since it's a generation tool. Still would be nice to have the faster code :).<br /><br />Yes, you can do the calculations realtime with the direct pixel access, but there's still a little overhead... so the non-runtime generation is still a nice thing.<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=18893">http://www.asmcommunity.net/board/index.php?topic=18893</a> has some code etc for faster version :)</div><br />Thanks, will do then :)<br /><div class="quote"><strong>PS: what about releasing the code for your tool? </div><br />Mhm, it's because of the &quot;embarrasment factor&quot;, so to speak. ;)<br />I'll have to clean up the source and add some comments too before releasing it. I was coding it for myself at first, so it's really messy.</div>
    <div class="meta">Posted on 2004-07-25 00:06:21 by QvasiModo</div>
   </div>
   <div class="post" id="post-147373">
    <div class="subject"><a href="#post-147373">Region calculator</a></div>
    <div class="body">Version 1.01<br /><br />Changes:<br />- It's open source now ;)<br />- Rewritten region generator, now it uses direct bitmap access (thanks f0dder).<br />- Fixed some silly memory leaks.<br /><br />I didn't try building a list of RECTs instead of the region APIs yet... I want to test it first to make sure I'm not generating bigger regions that way. Supposedly the APIs optimize the regions, but I'm sure they can be beaten (take a look at the &quot;squares&quot; sample).<br /><br />As usual, feedback is very welcome :)</div>
    <div class="meta">Posted on 2004-08-04 13:34:33 by QvasiModo</div>
   </div>
   <div class="post" id="post-147490">
    <div class="subject"><a href="#post-147490">Region calculator</a></div>
    <div class="body">Version 1.02<br /><br />Changes:<br />- New feature: tolerance levels. Now color matching doesn't have to be exact.<br />- Now the list of rectangles is generated first, instead of combining regions (faster).<br />- Fixed a couple silly bugs in the UI.<br />- Fixed a small memory leak, hopefully the last (MemProof didn't detect any more).</div>
    <div class="meta">Posted on 2004-08-05 16:42:46 by QvasiModo</div>
   </div>
   <div class="post" id="post-147512">
    <div class="subject"><a href="#post-147512">Region calculator</a></div>
    <div class="body"><strong>QvasiModo:</strong> GPF (write error) after calling GetFullPathName (LoadPictureH)<br /><br />WinXP Pro, SP1</div>
    <div class="meta">Posted on 2004-08-06 05:09:23 by TBD</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=14967&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14967&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14967" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14967&amp;page=2">&gt;</a><a href="../?id=14967&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>