<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Libraries1 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2931" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2931">Libraries1</a></p>
   <div class="post" id="post-18945">
    <div class="subject"><a href="#post-18945">Libraries1</a></div>
    <div class="body">I Got the INCLUDE File for the MessageBox directly in my Program.  So as you see I don't have to use the INCLUDE\user32.inc. i mark it out...<br /><br />Now I am trying to do the SAME THING with the .LIB File.<br /><br />I think I got the right .LIB file. It is _MessageBoxA@16 or _MessageBoxA@20<br /><br />What section do i have to put it....... in the .data----.cont----.data? <br />and how do I declare it...as equ...DWORD...DB  or what.<br />or do it HAVE to be in a .LIB Module.<br /><br />::::::::::::::::::::::::::::::::::::::::::::::<br />:::::::::::::::::::::::::::::::::::::::::::::::<br />::::::::::::::::::::::::::::::::::::::::::::::::<br /><br />.386<br />.model flat,stdcall<br />option casemap:none<br /><br />       include \MASM32\INCLUDE\windows.inc<br />;;;;   include \MASM32\INCLUDE\user32.inc<br />       include \MASM32\INCLUDE\kernel32.inc<br /><br />;;;;   includelib \MASM32\LIB\user32.lib<br />       includelib \MASM32\LIB\kernel32.lib<br /><br /> MessageBoxA PROTO :DWORD,:DWORD,:DWORD,:DWORD<br /><br /> _MessageBoxA@16 dd  0 ....&lt;   <span style="font-size:9px>....&lt;  Don't know where and how</span> <br /><br /><br />.const<br /><br /><br />.data<br /> <br /> MyText            db &quot;D:\1.txt&quot;,0<br /><br /> BoxCaption      db      'Here The Text',0<br /><br />.data? <br /><br /> hFile		dd ?<br /> MyBuffer	dd ?<br /> BufferLen	dd ?<br /> nBytesWritten	dd ?<br /><br /><br />.code<br /> Main: <br /> Bla...Bla...Bla<br /> <br /> invoke    MessageBoxA, NULL, ADDR MyBuffer, offset BoxCaption, NULL       <br /><br /> invoke    ExitProcess,0<br /><br />                end     Main</div>
    <div class="meta">Posted on 2002-01-13 10:23:07 by cmax</div>
   </div>
   <div class="post" id="post-18949">
    <div class="subject"><a href="#post-18949">Libraries1</a></div>
    <div class="body">As far as I know if you declare a prototype (like MessageBoxA) and make a reference to this symbol in your prog, MASM automatically defines an &quot;external&quot;, in case of stdcall convention it should be _MessageBoxA@16. So if you define such a symbol (possibly in the .data section, lets say &quot;_MessageBoxA16 dword 0&quot;) the reference is solved and you dont need the libs (its user32.lib in this case) for linking any more. But you shouldn't expect your program will still work. How is the loader to know now that you want to call a function in a dll? I think you cannot avoid using the libs (and why do you care about that, I wonder?)<br /><br />japheth</div>
    <div class="meta">Posted on 2002-01-13 11:18:38 by japheth</div>
   </div>
   <div class="post" id="post-19021">
    <div class="subject"><a href="#post-19021">&quot;and why do you care about that, I wonder?&quot;</a></div>
    <div class="body">Hello japheth<br /><br />Thanks for the Reply<br /><br />The word &quot;external&quot; may be the key word i am looking for.<br /><br />Since early last year i got in my mind to pack everything under one file and have been trying to do it every since. <br /><br />I trying to learn how to use less API and more Regesters... I think that's what masm32 is really all about.<br /><br />It's a habit now and to end this task i only have to get the .LIB in somehow if it is possible.  Than there may be a way to comply it somehow.  There are many people here that got a rotine for everything i think even tho he may never use it.<br /><br />And also it has taught me how to line things up to make the wierdest things start working.  After that happen a couple of times i got hook on packing it all under one file.  And it's kind of fun trying to do things in a difference way....Not easy but Very  intresting<br /><br />Thanks Again</div>
    <div class="meta">Posted on 2002-01-13 20:58:24 by cmax</div>
   </div>
   <div class="post" id="post-19024">
    <div class="subject"><a href="#post-19024">Libraries1</a></div>
    <div class="body"><strong>cmax</strong>, you might want to look into using FASM - it doesn't require any external files to build a windows executable - just one asm file is all you need.</div>
    <div class="meta">Posted on 2002-01-13 21:31:40 by bitRAKE</div>
   </div>
   <div class="post" id="post-19031">
    <div class="subject"><a href="#post-19031">Libraries1</a></div>
    <div class="body">Three more questions.<br /><br />Can you Rig NASM to do it?<br />Can you Rig Masm to do it?<br />Can you still us M32.lib code with either FASM or NASM?<br /><br />I just got use to that .lib and know how to use it fairly well now.</div>
    <div class="meta">Posted on 2002-01-14 03:10:22 by cmax</div>
   </div>
  </div>
 </body>
</html>