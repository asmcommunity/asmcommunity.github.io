<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>div problem in Timer procedure - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3604" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3604">div problem in Timer procedure</a></p>
   <div class="post" id="post-24044">
    <div class="subject"><a href="#post-24044">div problem in Timer procedure</a></div>
    <div class="body">why i've got exception when i try to dinamicly set timer time-out value:<br /><br />.if TimerWorking==FALSE<br />		mov TimerWorking, TRUE<br />		mov eax, TimeTemp<br />		mov ecx, HowManyTimes<br />		.if (eax&gt;0) &amp;&amp; HowManyTimes&gt;0<br />			div ecx			<br />		.endif			<br />		.if eax&lt;60<br />			mov eax, 60<br />		.endif<br />		mul SecInMilSec<br />		invoke SetTimer, hWnd, 2, eax, offset AnotherTimerProc<br />.endif<br /><br />I use this .if conditional in my first timer procedure. Everything is woking fine if i wrote this procedure without div instruction.<br />What is wrong?</div>
    <div class="meta">Posted on 2002-02-12 18:56:43 by dJed_mRaz</div>
   </div>
   <div class="post" id="post-24047">
    <div class="subject"><a href="#post-24047">div problem in Timer procedure</a></div>
    <div class="body">This is a common problem when you don't clear EDX register.<br />You have to remember DIV operates on EDX:EAX</div>
    <div class="meta">Posted on 2002-02-12 19:05:18 by bitRAKE</div>
   </div>
   <div class="post" id="post-24048">
    <div class="subject"><a href="#post-24048">div problem in Timer procedure</a></div>
    <div class="body">There Has been many disussions regarding the use of the DIV op-code.  I encourage you to use the search engine and look up some of them... as well one of them i &quot;preserved&quot; on my web-page, as i thought it got to the point quick and simple :)<br /><br /><a target="_blank" href="http://www.angelfire.com/scifi/win32asm/Disc_4.html">http://www.angelfire.com/scifi/win32asm/Disc_4.html</a><br /><br />Long story short, dont forget the EDX:EAX pair.  This is the equivalent number being divided when the divisor is a 32 bit number.<br /><br />Good luck..<br />NaN<br /><br />(( EDIT: you beat me by a minute BitRake.. :grin: ))</div>
    <div class="meta">Posted on 2002-02-12 19:06:35 by NaN</div>
   </div>
  </div>
 </body>
</html>