<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>painting all over - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4842" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4842">painting all over</a></p>
   <div class="post" id="post-33953">
    <div class="subject"><a href="#post-33953">painting all over</a></div>
    <div class="body">if I use a listview with an imagelist, its possible to drag an item all over the screen.<br />It is displayed 50% transparent and moves together with the mouse pointer.<br /><br />I wonder how can I realize something similar without using an imagelist?<br />More specific: how to paint on the desktop screen without releasing WM_PAINTs to other programs windows?</div>
    <div class="meta">Posted on 2002-04-18 12:58:51 by beaster</div>
   </div>
   <div class="post" id="post-33959">
    <div class="subject"><a href="#post-33959">painting all over</a></div>
    <div class="body">It doesn't sound good to me, but maybe it'll help you?<br /><br />Make a window the size of the screen and fake it. :)<br /><br />Okay, it's a lame idea. :tongue:</div>
    <div class="meta">Posted on 2002-04-18 13:42:58 by bitRAKE</div>
   </div>
   <div class="post" id="post-33976">
    <div class="subject"><a href="#post-33976">painting all over</a></div>
    <div class="body">Actually I think you just do something like get the handle to the desktop and then draw directly to it using an XOR type.  One to draw what you need and another in the same place to remove it.  When I have need it I used PatBlt.<br /><br />&lt;create a bitmap here&gt;<br />&lt;select it into the hdc of the screen&gt;<br />PatBlt(hdc, x1, y1, width, height, PATINVERT);</div>
    <div class="meta">Posted on 2002-04-18 17:08:34 by Graebel</div>
   </div>
   <div class="post" id="post-33982">
    <div class="subject"><a href="#post-33982">painting all over</a></div>
    <div class="body">If you wanna do more fancy stuff than a blit allows you, you can<br />use the classic &quot;sprite&quot; method of saving original contents, drawing<br />your stuff, restoring original stuff on mousemove et cetera. There's<br />a bunch of code involved... setmousecapture, creation and management<br />of vairous bitmaps, et cetera. Dunno how much fun it would be coding :).<br /><br />Probably creating a top-level window for your draggable item could<br />work out okay... you could trap WM_NCHITTEST to make the entire<br />window return &quot;hell yeah I'm the caption&quot; and thus make all of it<br />draggable... dunno the best way to go about this though.</div>
    <div class="meta">Posted on 2002-04-18 17:21:36 by f0dder</div>
   </div>
   <div class="post" id="post-34029">
    <div class="subject"><a href="#post-34029">painting all over</a></div>
    <div class="body">thanks for the ideas, I'll try the PatBlt version.<br /><br />The main reason why I want to make this on my own, is a problem with the ImageList.<br />I'm selecting a &quot;CreateBitmap&quot; bitmap into the imagelist and use it for ImageList_BeginDrag. Works fine for Win95, but a problem occurs for NT/2K under 16 bit and 8 bit color resolution.<br />Here the images have distorted colors (f.e. light blue instead of white). But if I blit the bitmap (which I put into the imagelist) directly to my window (without imagelist) everything looks ok.<br />So the problem cannot be inside the bitmap(handle) but it must be in the imagelist control. Using 8 bit palette images delivers complete distorted colors.<br /><br />I also tried using a &quot;CreateDIBitmap&quot; and &quot;CreateDIBSection&quot; bitmaphandle instead of a &quot;CreateBitmap&quot;made, but these types dont show anything in the imagelist.</div>
    <div class="meta">Posted on 2002-04-19 07:06:18 by beaster</div>
   </div>
   <div class="post" id="post-34046">
    <div class="subject"><a href="#post-34046">painting all over</a></div>
    <div class="body"><strong>Beaster</strong>: I've had the same problem when I used my pnglib to load images for an imagelist. However the problem was solved using a DDB instead of a DIB. LoadBitmap has always worked for me though (win2k as well). Have you tried using different color types when creating the image list?<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-04-19 10:48:08 by Thomas</div>
   </div>
  </div>
 </body>
</html>