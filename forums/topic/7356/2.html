<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>CodeView - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7356" />
  <link rel="prev" href="../?id=7356&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=7356">CodeView</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=7356&amp;page=1" style="">&laquo;</a><a href="../?id=7356&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="7356" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-54596">
    <div class="subject"><a href="#post-54596">Include COFF</a></div>
    <div class="body">I know, I know... This is discussed in another tread, but anyway...<br /><br />Isn't it possible to add an instruction that includes a COFF file? It would be very nice... I hate to use linkers and all that. Fasm IS flexible, but it had been excellent if it supported this!<br /><br />BUT! Remember, you are the master, and you decide what to do... This is only a little wish from a newbie that loves fasm but want to only use fasm and not to use the linker too... :)<br /><br />Thanks again!</div>
    <div class="meta">Posted on 2002-08-23 07:17:33 by NewToAssembly</div>
   </div>
   <div class="post" id="post-54660">
    <div class="subject"><a href="#post-54660">resources</a></div>
    <div class="body">I didn't play with resource section yet.<br />What is the best way to put resource in PE format, except typing them?<br />Can I just include .res file produced by resource compiler in resource section?<br />Or maybe there are some tools that produce text descrpition using FASM macros?</div>
    <div class="meta">Posted on 2002-08-23 16:15:47 by Sergo</div>
   </div>
   <div class="post" id="post-56070">
    <div class="subject"><a href="#post-56070">unanswered questions</a></div>
    <div class="body">Privalov,<br />Sorry for bothering you again, <br />is it possible to answer the rest of my question from August 22nd, 2002 11:12,<br />and maybe you can reconsider you decision about section splitting/merging<br />in PE format, i.e so the sections with the same name name and attribute goes<br />declared in different parts of source script go to the same physical section in PE file.<br />It would allow to declare variables when you need them and not to jump back and forth from data to code section. Also enabling macros return values would be useful for printing short messages (like SADD macro from MASM32, or any string in <br />in GoASM ) .<br />I think allowing to define a section attribute as a number only make the job of PE formatter easier and code more clear, and also gives a lot of reservered words back to the FASM users like &quot;readable, writable, code data&quot;</div>
    <div class="meta">Posted on 2002-09-04 15:12:46 by Sergo</div>
   </div>
   <div class="post" id="post-56212">
    <div class="subject"><a href="#post-56212">CodeView and other questions</a></div>
    <div class="body">Hi Serge,<br />I've been following your interesting conversation with Privalov, and as I think he's on holyday now, I'm going to try to answer some of them.<br /><br />About splitting/merging sections:<br />I fnd it great to get an image of what you code. If you need splitting/merging, use MASM.<br /><br />About defining sections as numbers:<br />It makes more sense to me to have them like that, the same that makes more sense instead of 0110010011000001 knowing: Parity Even, Carry Flag on, Direction up, etc.<br />See, I have an electrical eng. background, so I'm used to numbers, but when I program I prefer to have the idea.<br />Of course, this is a matter of taste, I like the readable, writeable, exportable format.<br /><br />Your question from August 22nd, 2002 11:12:<br /><br />2) /nologo... that reminds me of a canadian girl ;) (anti-globalization stuff)<br />You can get a /quiet very quiet output using pipes, and redirecting your output to a file, like fasm cool.exe &gt; cool.out<br /><br />3)A default alignment? But why make it default? Just use align macro whenever you need it. (Btw check a new align macro by Maverick that let's you define an offset, find it in his profiler thingy)<br /><br />5)Create your own macro for that, easy exercise.<br /><br />10)You can use local structs that don?t consume space.<br />A lot have been explained about using struct, look for E?in's example POINT struct<br /><br />11) I don?t know it either, if you find out, please tell me.<br /><br />12) Okay, how about using a hex-editor and changing it directly?<br /><br />16) They are a lot, and also you have here many new examples, and of course, the macros in the import, stdcall... sections<br /><br />17) well, I don?t know about this, are you sure there's no need to have 10h directories?<br /><br /><br /><br />Questions 1, 4, 7, 8, 9, 13, 14 and 15 have been already answered by Privalov.<br /><br />Hope it helps.</div>
    <div class="meta">Posted on 2002-09-05 08:47:47 by slop</div>
   </div>
   <div class="post" id="post-56397">
    <div class="subject"><a href="#post-56397">Assember as a friend</a></div>
    <div class="body">Hi, Sloppy!<br /><br />My suggestion about section attributes as numbers doesn't have to be take literally, of course, most people just use predefined constants in header files<br />(the symbolic names for them are defined in PE specs) <br />and OR ( logicalliy)  them in the section declaration.<br /><br />header.inc<br />IMAGE_SCN_CNT_INITIALIZED_DATA = ???<br />IMAGE_SCN_CNT_ALIGN4 = ???<br /><br />code.asm<br /><br />section 'data' IMAGE_SCN_CNT_INITIALIZED_DATA or IMAGE_SCN_CNT_ALIGN4<br /><br />If you still think that each image needs 10h dirs you can check the build the binary example given by Privalov ( 2 dirs exp/imp) and run it.<br />DLL perfectly work even with one directory (export)<br /><br />2) /nologo - I had to modyify a source code, I even made to output errors in MASM<br />format so Visual Studio can understand it.<br />What canadian girl did you mean? I don't watch TV now. :(<br /><br />3) A default alignment - in data section when you have dword structure declarartion interleaved by text string it's tiresome to type align 4 everytime.<br /><br />5) Could you give your example of 'comment' implementation in FASM macro?<br /><br /><br />11) I just like to include standard headers and don't have to define each new Win<br />structure I want to use.<br />The way structures come in the headers  is wasting space and non-initializable.<br /><br /><br />The idea I try to convey to Privalov is that good assembler/compiler in general should give <br />1) as much freedom as possible so people don't have to use hex editors to set individual bytes<br /><br />2) If the job could be done by the compiler it shouldn't burden the programmer.<br />The purpose of compiler to help a programmer not to create extra problem.<br />( For example 'on the fly data declarations  (compiler can add it to data section without my help, forward references, etc )<br />Multipassing - that's why I like FASM, saving half second on compilation and making users to spend miniutes ( at least) to rearrange the code is the biggest problem of single pass assemblers as a redundant reminder of slow CPUs.<br /><br />But it's only the first step. I hope.</div>
    <div class="meta">Posted on 2002-09-06 15:08:58 by Sergo</div>
   </div>
   <div class="post" id="post-56970">
    <div class="subject"><a href="#post-56970">CodeView and other questions</a></div>
    <div class="body">Hi Serge.<br />I prefer to address your las two ideas:<br /><br />1)Yes, I also love freedom, but there has to be some sort of 'compromise' between freedom and bloatedness, because when an assembler starts being too fancy... well, I think it loses its original freedom.<br />I tould you las time, for high level assembly I use masm; while for things that can't be done any other way fasm is the best.<br /><br />2) You are right.</div>
    <div class="meta">Posted on 2002-09-10 07:20:01 by slop</div>
   </div>
   <div class="post" id="post-59284">
    <div class="subject"><a href="#post-59284">CodeView and other questions</a></div>
    <div class="body">Hi Sergo<br /><br />I just found somewhere inside winnt.h the following:<br /><div class="quote"><br />#define IMAGE_NUMBEROF_DIRECTORY_ENTRIES    16<br /></div><br /><br />So I guess Privalov was right, and also Borland.<br /><br /><br />And for my comment macro, it's probably the simplest macro I can think of, it?s like a meta-macro, maybe the smallest reduction of a macro: <pre><code>macro comment &#91;args&#93; &#123; &#125;</code></pre><br />Like here:<pre><code><br />	macro comment &#91;args&#93; &#123; &#125; <br />comment This is just a comment<br />comment This is another<br />	movsx eax,ax<br />	bsf eax,&#91;edi&#93;<br />comment Move extending sign, then bit scan forward instructionss<br />comment The end</code></pre><br /><br />Hope this helps</div>
    <div class="meta">Posted on 2002-09-23 12:27:39 by slop</div>
   </div>
   <div class="post" id="post-59297">
    <div class="subject"><a href="#post-59297">Number of Dirs</a></div>
    <div class="body">Hi, Sloppy<br />1<br />But the PE/COFF standard on MS website doesn't specify the specific number of directories, and what's most important Windows PE loader procedures, don't care either, as long as Export dir with kernel32.dll is present it's ok. If you don't need to create a new process you don't need directories at all.<br /><br />2.<br />Does it work?<br />Maybe it needs '\' at the end of line? Can't check now.<br /><br />comment This is another<br />	movsx eax,ax<br />	bsf eax,</div>
    <div class="meta">Posted on 2002-09-23 14:07:15 by Sergo</div>
   </div>
   <div class="post" id="post-59573">
    <div class="subject"><a href="#post-59573">CodeView and other questions</a></div>
    <div class="body">Good to see you are back,<br /><br />1)<div class="quote">But the PE/COFF standard on MS website doesn't specify the specific number of directories, and what's most important Windows PE loader procedures, don't care</div>Another example of M$ setting an standard, and they saying 'did we?'<br /><br />2)Yes, it works, great, that?s a snippet from my code.<br /><br />Sergo, go on and ask all your questions, I find some of them rather interesting.<br /><br />Regards,</div>
    <div class="meta">Posted on 2002-09-25 12:40:15 by slop</div>
   </div>
   <div class="post" id="post-60074">
    <div class="subject"><a href="#post-60074">CodeView and other questions</a></div>
    <div class="body">To Sergo:<br /><br />I made a mistake, the standard is still there:<div class="quote">Quote from MSDN Journal, last February issue:<br />At the end of the IMAGE_NT_HEADERS structure is an array of IMAGE_DATA_DIRECTORY structures. This field contains the number of entries in the array. This field has been 16 since the earliest releases of Windows NT.</div><br /><br />So, where did you get your references from?</div>
    <div class="meta">Posted on 2002-09-30 03:50:46 by slop</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=7356&amp;page=1" style="">&laquo;</a><a href="../?id=7356&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="7356" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>