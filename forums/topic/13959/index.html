<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>how to make a trap in a process - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13959" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13959">how to make a trap in a process</a></p>
   <div class="post" id="post-107878">
    <div class="subject"><a href="#post-107878">how to make a trap in a process</a></div>
    <div class="body">how to make a trap in a process or a thread</div>
    <div class="meta">Posted on 2003-06-22 08:58:02 by feizhongshvi</div>
   </div>
   <div class="post" id="post-107898">
    <div class="subject"><a href="#post-107898">how to make a trap in a process</a></div>
    <div class="body">What you mean?</div>
    <div class="meta">Posted on 2003-06-22 12:12:20 by bazik</div>
   </div>
   <div class="post" id="post-107899">
    <div class="subject"><a href="#post-107899">how to make a trap in a process</a></div>
    <div class="body">SEH ?</div>
    <div class="meta">Posted on 2003-06-22 12:25:03 by donkey</div>
   </div>
   <div class="post" id="post-107901">
    <div class="subject"><a href="#post-107901">how to make a trap in a process</a></div>
    <div class="body"><div class="quote"><br />SEH ? </div><br /><br />Or cheese :grin:</div>
    <div class="meta">Posted on 2003-06-22 12:37:17 by bazik</div>
   </div>
   <div class="post" id="post-107906">
    <div class="subject"><a href="#post-107906">how to make a trap in a process</a></div>
    <div class="body">i think he ment BPX =) (breakpoint)..<br />probably if the process has been loaded with DEBUG flags, u can set a int 3 in order of single step ur process</div>
    <div class="meta">Posted on 2003-06-22 13:20:15 by wizzra</div>
   </div>
   <div class="post" id="post-111144">
    <div class="subject"><a href="#post-111144">how to make a trap in a process</a></div>
    <div class="body">or the simplest way for me - use MessageBox :) . I don't use any debugger other than VKDebug :)</div>
    <div class="meta">Posted on 2003-07-19 02:18:54 by Ultrano</div>
   </div>
   <div class="post" id="post-111148">
    <div class="subject"><a href="#post-111148">how to make a trap in a process</a></div>
    <div class="body">I think I know what he means and SEH seems like the good candidate. Set up your exception-handler, raise the exception whenever you want your 'trap', at end of proc, don't forget to restore old exception handler and such...<br /><br />I made a *very* primitive set of macros for this<br /><br /><pre><code><br />	ThreadExceptionHandler MACRO handler<br />		PUSH OFFSET handler<br />		PUSH FS&#58;&#91;0&#93;<br />		MOV FS&#58;&#91;0&#93;,ESP<br />	ENDM<br /><br />	EndThreadException MACRO<br />		POP FS&#58;&#91;0&#93;<br />		ADD ESP,4h<br />	ENDM<br /></code></pre><br /><br />..Anywhays, you should read this<br /><a target="_blank" href="http://spiff.tripnet.se/~iczelion/Exceptionhandling.html">http://spiff.tripnet.se/~iczelion/Exceptionhandling.html</a><br />and the Win32Api about RaiseException. I *JUST* started SEH, but I know it can do what I think you want it to do :/ Sort of a trap, called immediately when you raise exception.<br /><br />If anyone likes my macros, tell me ;) I can work on them more, or if you have an addition, don't be shy! I know the ERR structure can be more descriptive but... I'm new...</div>
    <div class="meta">Posted on 2003-07-19 03:03:23 by FearHQ</div>
   </div>
  </div>
 </body>
</html>