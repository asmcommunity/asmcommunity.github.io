<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Aoa - Computation Of Absolute Numbers - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17883" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=17883">Aoa - Computation Of Absolute Numbers</a></p>
   <div class="post" id="post-138069">
    <div class="subject"><a href="#post-138069">Aoa - Computation Of Absolute Numbers</a></div>
    <div class="body">Hi Guys,<br /><br />I have a simple &quot;yes/no&quot; question concerning, what I believe to be, a typing error in the brilliant AOA (beta version: 7/4/01) textbook.<br /><br />There's this cool piece of code on page 752, under section, &quot;Calculation Rather than Branching&quot;, that computes the absolute value of a number without using any jump/conditional-jump instructions.  Here's how it appears in the textbook (note the code assumes eax already contains a number for computation:)<br /><br />//---------------------------------------------------------------------------------------<br />	// Set EDX to $FFFF_FFFF if EAX is negative, $0000_0000 if EAX is<br />	// zero or positive:<br />	cdq();<br /><br /><br />	// If EAX was negative, the following code inverts all the bits in EAX,<br />	// otherwise it has no effect on EAX.<br />	xor( edx, edx);<br /><br /><br /><br />	// If EAX was negative, the following code adds one to EAX, otherwise<br />	// it doesn?t modify EAX?s value.<br />	and( 1, edx ); // EDX = 0 or 1 (1 if EAX was negative).<br />	add( edx, eax );<br />//---------------------------------------------------------------------------------------<br /><br />That second instruction: -<br />		xor(edx, edx);<br /><br />- is supposed to be: -<br />		xor(edx, EAX);<br /><br />- right?<br /><br /><br />I'm pretty sure that's what it's meant to be, but your professional view would strengthen mine, so thank you very much, in advance...</div>
    <div class="meta">Posted on 2004-04-06 07:22:11 by Jaysen</div>
   </div>
   <div class="post" id="post-138237">
    <div class="subject"><a href="#post-138237">Re: Aoa - Computation Of Absolute Numbers</a></div>
    <div class="body"><div class="quote"><br />Hi Guys,<br /><br /><br />That second instruction: -<br />		xor(edx, edx);<br /><br />- is supposed to be: -<br />		xor(edx, EAX);<br /><br />- right?<br /><br /><br />I'm pretty sure that's what it's meant to be, but your professional view would strengthen mine, so thank you very much, in advance... </div><br /><br />Yes, it is.<br />Obviously xor( edx, edx) simply clears the EDX register, it doesn't invert EAX.<br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2004-04-07 14:05:42 by rhyde</div>
   </div>
   <div class="post" id="post-138309">
    <div class="subject"><a href="#post-138309">Aoa - Computation Of Absolute Numbers</a></div>
    <div class="body">What an excellent forum;  I can get answers from Mr. Hyde himself!  Thank you very much Mr. Hyde.</div>
    <div class="meta">Posted on 2004-04-08 01:06:35 by Jaysen</div>
   </div>
  </div>
 </body>
</html>