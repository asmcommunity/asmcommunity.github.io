<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Tsunami - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9979" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=9979">Tsunami</a></p>
   <div class="post" id="post-74536">
    <div class="subject"><a href="#post-74536">Tsunami</a></div>
    <div class="body">I need help because I do not know how to make a Tsunami files at run time in Assembler.<br /><br />:confused: Fernand</div>
    <div class="meta">Posted on 2003-01-05 22:21:32 by Fernand</div>
   </div>
   <div class="post" id="post-74544">
    <div class="subject"><a href="#post-74544">Tsunami</a></div>
    <div class="body">Question,<br /><br />What is <em>Tsunami</em>?</div>
    <div class="meta">Posted on 2003-01-05 23:04:39 by NaN</div>
   </div>
   <div class="post" id="post-74571">
    <div class="subject"><a href="#post-74571">Tsunami</a></div>
    <div class="body">Fernand<br /><br /><pre><code><br />include	      C&#58;\...\trm.inc<br />includelib   C&#58;\...\trm.lib<br /><br />.data<br />FilePath   db   &quot;C&#58;\data&quot;, 0<br />P_len       dd   $ - FilePath<br />FileDef    &lt;- This is where you can set up index key definitions!<br />               ....<br />FD_len    dd     $ - FileDef<br /><br />.data ?<br />TRMudt				TRMtype&lt;?&gt;<br /><br /><br />.code<br />	mov		TRMudt.op,		Tsu_Create<br />	mov		TRMudt.file,	0<br />	mov		TRMudt.dataptr,	offset FileDef<br />	push	        FD_len<br />	pop		TRMudt.datalen<br />	mov		TRMudt.keyptr,	offset FilePath<br />	push	        P_len<br />	pop		TRMudt.keylen<br />	mov		TRMudt.keyno,	0<br />	invoke	       trm_udt, offset TRMudt		;Create if not existing<br /></code></pre><br /><br />HTH<br /><br />Register &amp; support Tsunami if you can, They will help in the User Forum<br /><a target="_blank" href="https://www.trm-ug.com/join.htm">https://www.trm-ug.com/join.htm</a><br /><br />Let us know what you're trying to do!<br /><br />farrier</div>
    <div class="meta">Posted on 2003-01-06 00:47:51 by farrier</div>
   </div>
   <div class="post" id="post-74606">
    <div class="subject"><a href="#post-74606">Tsunami</a></div>
    <div class="body">Scronty should know the answer to this too... he's the one who is doing an assembler demo using it....<br /><br />Hey Phil where are ya buddy, haven't seen ya online lately...<br /><br />James</div>
    <div class="meta">Posted on 2003-01-06 06:09:49 by JamesE</div>
   </div>
   <div class="post" id="post-74673">
    <div class="subject"><a href="#post-74673">Tsunami</a></div>
    <div class="body">Afternoon, Fernand.<br /><br />Have a look at the CreateDatabase proc in the Masm32 tsunami demo.<br /><br />All info required is either in the sourcecode for the demo, or in the PDF file for the Tsunami interface system.<br /><br />For support in its use, there already is a Tsunami Masm32 interface support forum at <a target="_blank" href="http://www.trm-ug.com/">http://www.trm-ug.com/</a>  .<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2003-01-06 15:19:04 by Scronty</div>
   </div>
   <div class="post" id="post-74961">
    <div class="subject"><a href="#post-74961">Tsunami</a></div>
    <div class="body">Excuse me ... I am a new programmer in asm and I think that it is the best thing for me to learn the asm. <br />I want to make a program in database with the help of Stunami..<br />I read the trm.pdf for the VB and also the TRMDEMO.ASM...<br />I think that I made a mistake in my last posting, because it was not the answer I attempted to get...<br /><br />I will try to explain what I want to get ....<br /><br />How to build a .TSR and interfacing it in the program in asm.<br /><br />About the TRMDEMO.TSR I mean, the structure  of  the database I want to create...like    ACctNo  db  6 dup (?) etc<br />and how i can call it from my program..<br /><br /> I will contribute to Stunami at the end of this month and I hope that Stunami will make a TRM_M.PDF.<br /><br />Thank for all your help . I appreciate it Fernand (:confused: )</div>
    <div class="meta">Posted on 2003-01-07 21:11:52 by Fernand</div>
   </div>
   <div class="post" id="post-75027">
    <div class="subject"><a href="#post-75027">Tsunami</a></div>
    <div class="body">Afternoon, Fernand.<br /><br />The TRMDemo application shows you how to do this.<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2003-01-08 04:50:40 by Scronty</div>
   </div>
   <div class="post" id="post-75031">
    <div class="subject"><a href="#post-75031">Tsunami</a></div>
    <div class="body">Fernand,<br /><br />As an example, you can use a STRUC to define the layout of your record:<br /><br /><pre><code><br />.const<br /><br />Account_Str    STRUCT<br />    acct_num    db  10 dup &#40;?&#41;             ;account number<br />    cust_num    db  10 dup &#40;?&#41;             ;customer number<br />    ....<br />Account_Str    ends<br /><br />.data?<br />;use the struct to define an instance of your record<br />Account_buf   Account_Str   &lt;?&gt;<br />acct_handle   HANDLE   ?<br />cust_handle   HANDLE   ?<br /><br />.code<br />;get handle of data entry controls<br />	invoke	GetDlgItem, htp, IDC_ACCT_NUM<br />	mov	acct_handle, eax<br />	invoke	GetDlgItem, htp, IDC_CUST_NUM<br />	mov	cust_handle, eax<br />;Aquire account data from a controls<br />	invoke SendMessage, acct_handle, WM_GETTEXT, sizeof Account_buf.acct_num, ADDR Account_buf.acct_num<br />	invoke SendMessage, cust_handle, WM_GETTEXT, sizeof Account_buf.custt_num, ADDR Account_buf.custt_num<br />;Open file<br />	mov	TRMudt.op,	Tsu_Open<br />	push	FD_len<br />	pop	TRMudt.datalen<br />	mov	TRMudt.keyptr,	offset FilePath<br />	push	FP_len<br />	pop	TRMudt.keylen				;length of path<br />	mov	TRMudt.keyno,	0			;Single-User<br />	invoke	trm_udt, offset TRMudt		;Open File<br />;Insert new record<br />	mov	TRMudt.op, Tsu_Insert<br />	mov	TRMudt.dataptr,	offset Account_buf<br />	mov	TRMudt.datalen,	sizeof Account_buf<br />	invoke	trm_udt, offset TRMudt		;Insert Acct File Record<br />&#58;Close file<br />	mov	TRMudt.op, Tsu_Close<br />	invoke	trm_udt, offset TRMudt		;Close Acct File<br /><br /></code></pre><br /><br /><br />If you use the tools that Scronty has given us--BIG thanks to Scronty--this can be very easy!<br /><br />Does this help?<br /><br />BTW, what would a .TSR file be?<br /><br />Also, what would TRM_M.PDF be?  A help file with MASM syntax?  If you look at the PowerBasic file it will be trivial to translate.<br /><br />farrier</div>
    <div class="meta">Posted on 2003-01-08 05:05:50 by farrier</div>
   </div>
   <div class="post" id="post-75063">
    <div class="subject"><a href="#post-75063">Tsunami</a></div>
    <div class="body">Thank all for your help<br />That true the TRMDemo application shows you how to do this.<br />But when you are a new user of asm it is very difficult for us...<br /><br />PS A big thank to farrier for your help [:alright:]</div>
    <div class="meta">Posted on 2003-01-08 09:00:00 by Fernand</div>
   </div>
   <div class="post" id="post-111331">
    <div class="subject"><a href="#post-111331">Tsunami</a></div>
    <div class="body">Im interested in this data base engine that Scronty has been involved with, but Im still not 100% clear if its free for use in business software or not??  <br /><br />Is there limitations here that im missing?<br /><br />Thanks.<br />:NaN:</div>
    <div class="meta">Posted on 2003-07-20 22:04:40 by NaN</div>
   </div>
   <div class="post" id="post-111334">
    <div class="subject"><a href="#post-111334">Tsunami</a></div>
    <div class="body">Nevermind, found the &quot;appendix A&quot; in the PDF's ;)<br /><br />From what i can see this will work well for my needs.  Im thinking i might wrap it up into an object with my OOP model.  Then i can start dealing with multiple databases with ease...<br /><br />However, if i understand the rules here.  I dont think i will be able to share the source with you, since its not a complete &quot;packaged.exe&quot;.  An OOP class would only make a wrapper out of it....  someone correct me if im wrong here.<br /><br />:NaN:</div>
    <div class="meta">Posted on 2003-07-20 22:32:34 by NaN</div>
   </div>
   <div class="post" id="post-111920">
    <div class="subject"><a href="#post-111920">Tsunami</a></div>
    <div class="body">NaN,<br /><br />I've been using Tsunami Record Manager for a small commercial app for about 7 months now and I'm really impressed!  If I can help in any way, let me know.  I've already made most of the stupid mistakes at least twice!  Now I automatically get that little electric shock twinge if I even try to make those same mistakes.<br /><br />As for distributing your source,  I don't think there would be any restriction.  The only thing you are allowed to distribute is the TRM.DLL  But anyone can download the version 2.5 software, and as long as you use only features in the 2.5 DLL there shouldn't be a problem with anyone modifying your code.<br /><br />I chose to do things differently than Scronty did.  It made things more readable and serviceable for me.<br /><br />Again, if I can help, let me know.<br /><br />farrier</div>
    <div class="meta">Posted on 2003-07-25 21:51:15 by farrier</div>
   </div>
   <div class="post" id="post-111961">
    <div class="subject"><a href="#post-111961">Tsunami</a></div>
    <div class="body">I will probably take you up on that. ;)<br /><br />My project is a *big* one.  My goal is to devise a project database, for engineering projects at work.  The way typical engineering projects go is the Engineer designs the key components (mostly by hand on paper, or in Excel sheets).  The CAD drafting team drafts  up formal blue prints.  Alot of cross reference exists between the drawings and the Excel sheets, however, drafters manually copy and enter these values from hand mark-ups.  <br /><br />This system works, until the project direction shifts, and you have to change a bunch of things.  Then your retracing your old steps changing all those text items on a print.  Which can take weeks.  <br /><br />I want to devise a way to link AutoCad and Excel together via a master database.  I will need to think of unique but simple keys for autocad text entities to hold on to, and i will need to devise look up tables in the data base such that one change in an excel sheet can be looked up, and all drawings affected is automatically changed.<br /><br />For me this is a big chunk of work.  Especially since im very novice in databases.  But from what i can tell from this database, it should do the trick... if I get my design layed out just right ;)<br /><br />Anywho, this is what im up to.  If i ask questions later you should at least know the context of what im doing  ;)<br /><br />Thanks for your thoughts..<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-07-26 09:56:13 by NaN</div>
   </div>
   <div class="post" id="post-113660">
    <div class="subject"><a href="#post-113660">Ok help..</a></div>
    <div class="body">I found more time reciently to give it a deeper look.  I gave the PDF a good hard read as well and feel good about most things.  However, im still grey on the &quot;concepts&quot; more than i am the programming.  Never was a big database person.  Im most attracted to this engine simply cause its more api based and less SQL looking :eek:<br /><br />Can some one cut it clear to me the roll between &quot;Key Indexes&quot;, &quot;Keys&quot;, &quot;Key Segments&quot;, and similar.<br /><br />All tuts and books talk SQL with tables and keys..  I barely got my head around that ;) <br /><br />I want a simple database with a few record types: Text / Project / Other.  Would this be done with segments?  With indexes acting as tables for each?<br /><br /><br />Here is the basic idea of a database system i want to build:<pre><code><br />TextRecord STRUC  &#40;Primary Key == Record Unique ID&#41;  <br />   <br />   DataString  db 64 dup ?    ; Arbitrary text<br />   DataTypeKey db 16 dup ?    ; For another database <br />   DataType    dd ?           ; For type of other database<br />   DataDrawing dd 16 dup ?    ; Drawing name<br />   DataGroup   dd ?           ; For grouping the specific text into series<br />   <br />TextRecord ENDS<br />   <br /><br /><br />And a supporting record structure for project files&#58;<br /><br /><br /><br />ProjectRecord  STRUC<br />   FileName          db 16 dup ?<br />   FileType          dd ?<br />   PercentComplete   dd ?<br />ProjectRecord  STRUC<br /><br /><br /><br /><br />In AutoCad, i plan to stuff the Primary Unique ID into the text entities.<br />When processed, the ID-KEY is used on the master text db, and the record is<br />gotten directly for the data it is to display in the drawing &#40;DataString&#41;.  <br /><br />For other tools, i may want to process these records by their drawing/group,<br />say the code is &quot;2nd floor offices&quot;.  If some records have the<br />datatype code = &quot;FIXTURES&quot;, i want to use the DataTypeKey to search a<br />different database in a different file for fixture records&#58;<br /><br /><br /><br />FixtureRecord STRUC<br />   Name        db 16 dup ? &#40;primary key&#41;<br />   Manufacture db 16 dup ? <br />   Model       dd 16 dup ?<br />   Class       dd ?<br />   Watts       dd ?<br />   Volts       dd ?<br />   Lumens      dd ?<br />FixtureRecord ENDS<br /><br /><br /><br /><br />So with all this, the tool would then itterates through a<br />group code, checking if this text record refers to a fixture, and then<br />finding the type of light fixture and summing up the load in watts the<br />fixuture type is rated for. <br /><br />I have many other simular ideas for other electrical assets <br />that appear in drawings.  But for now i want to get past go ;&#41;<br /><br /><br />That being said, how would a knowledged TSunami programmer <br />set up the database? This is an example of the 'challange' im facing.<br />In the end i would want &#40;hopefully&#41; specific databases &#40;such as text<br />records and Project files&#41; in one project data file, and other more <br />general databases &#40;such as fixture types&#41; to be left outside the <br />project scope for reuse in other projects.</code></pre><br /><br />I know im dumping alot on to you guys reading this.  If you can help, i dont need you to burn out showing me code.  Pseudo code or similar would be enough to get my head aligned ;) .  I just need to know more or less the TSunami calls required to build such a scheme, and the calls to transverse different databases in the above two cases.<br /><br />As always, thanks for your patience ;)<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-08-11 21:56:11 by NaN</div>
   </div>
   <div class="post" id="post-113716">
    <div class="subject"><a href="#post-113716">Tsunami</a></div>
    <div class="body">NaN,<br /><br />You're off to a good start!  The important things to consider when designing a system for me are:<br /><br />1) What information do I need to keep track of,<br />2) How will I retrieve this info when I need it.<br /><br />1) will determine how the data structures are defined, and you have started that<br />2) will determine your use of indexes, keys and key segments.<br /><br /><div class="quote"><br />Can some one cut it clear to me the roll between &quot;Key Indexes&quot;, &quot;Keys&quot;, &quot;Key Segments&quot;, and similar.<br /></div><br /><br />Why key segments?  For example in one of my files, one of the elements is a SYSTEMTIME structure, and I defined the key as follows:<br /><pre><code><br />Location_Str	STRUCT<br />	trans_num	dd	?		;tracking number<br />	arriv_date	SYSTEMTIME &lt;?&gt;		;arrival date and time<br />	locat_num	db	25 dup &#40;?&#41;	;location of delivery<br />	operator	db	25 dup &#40;?&#41;	;delivery agent<br />Location_Str ENDS<br /></code></pre><br />File defination string<br /><pre><code><br />LocFileDef		db	1	;Page Size<br />			db	0	;Compression<br />			db	5	;Number of key segments, 4 keys, 5 key segments<br />;First Key Def<br />			db	&quot;TRANSACTION NUMBER       &quot;<br />			db	1	;Key number<br />pos1			dw	1	;Segment Positon within record structure<br />len1			db	4	;Segment Length<br />			db	NO_DUPLICATES or NO_COMPRESSION or BINARY_KEY<br />;Second Key Def<br />;2 Segments&#58; <br />;1&#41; SYSTEMTIME.wYear + SYSTEMTIME.wMonth		4 Bytes<br />			db	&quot;ARRIVAL DATE YEAR &amp; MONTH&quot;<br />			db	2				;KEY NUMBER 2, SEGMENT 1<br />pos2			dw	1 +  4<br />len2			db	4<br />			db	BINARY_KEY or NO_COMPRESSION or CASE_SENSITIVE<br />;2&#41; SYSTEMTIME.wDay							2 Bytes<br />			db	&quot;ARRIVAL DATE DAY         &quot;<br />			db	2				;KEY NUMBER 2, SEGMENT 2<br />pos2_1			dw	1 +  4 + 6			;6 IS OFFSET INTO SYSTEMTIME FOR DAY<br />len2-1			db	2<br />			db	BINARY_KEY or NO_COMPRESSION or CASE_SENSITIVE<br />;Third Key Def<br />			db	&quot;LOCATION                 &quot;<br />			db	3<br />pos3			dw	1 + 4 + sizeof SYSTEMTIME<br />len3			db	25<br />			db	NO_COMPRESSION<br />;Fourth Key Def<br />			db	&quot;OPERATOR                 &quot;<br />			db	4<br />pos4			dw	5 + sizeof SYSTEMTIME + 25<br />len4			db	25<br />			db	NO_COMPRESSION<br />LFD_len			dd	$ - LocFileDef<br /><br /></code></pre><br /><br />Key number 2 has 2 segments, since the SYSTEMTIME structure inserts the DayOfWeek between <br />the month and day.  The first segment consists of wYear + wMonth; then segment 2 consists of<br />wDay.  So when I search for a certain date or date range, I use a structure:<br /><br /><pre><code><br />Search_date	STRUC<br />	SD_Year	WORD<br />	SD_Mon	WORD<br />	SD_Day	WORD<br />Search_date	ENDS<br /></code></pre><br /><br />This matches the layout of the key definition for date.<br /><br />You could also combine two or more data elements to speed a search.  You could use 2 segments <br />to look up a customer.<br /><br />For example: lastname + first_name<br /><br />Or:		Watts + Volts<br /><br />to search quickly for a certain combination of data elements.<br /><br />hth<br /><br />Ask more questions.<br /><br />farrier</div>
    <div class="meta">Posted on 2003-08-12 09:37:06 by farrier</div>
   </div>
   <div class="post" id="post-113771">
    <div class="subject"><a href="#post-113771">Tsunami</a></div>
    <div class="body">Well on the 4th pass re-reading your reply.. it finaly sank in :alright:  ( Me = thick ;) )<br /><br />Thanks for this, its exactly what i needed.  I dont think i have any more questions at the moment, but im sure there will be more.  I now have to re-think my design strategy for future considerations, as well any my immediate plans.<br /><br />Thanks again!<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-08-12 19:29:08 by NaN</div>
   </div>
  </div>
 </body>
</html>