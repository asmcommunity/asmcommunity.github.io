<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>problems with instructions fsubr,fisubr - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8382" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=8382">problems with instructions fsubr,fisubr</a></p>
   <div class="post" id="post-61233">
    <div class="subject"><a href="#post-61233">problems with instructions fsubr,fisubr</a></div>
    <div class="body">I am using FASM 1.41 beta x and am having problems assembling the following<br /><br />fsubr &lt;no operand&gt;<br />fsubr STx ;single operand<br /><br />it gives me an 'invalid operand' message, and if I'm reading the intel manuals correct this shouldn't happen<br />I also get the same error for FISUBR instruction also, and there maybe more.</div>
    <div class="meta">Posted on 2002-10-10 12:56:29 by GorillaCoder</div>
   </div>
   <div class="post" id="post-61235">
    <div class="subject"><a href="#post-61235">problems with instructions fsubr,fisubr</a></div>
    <div class="body">Available syntaxes are documented (clearly I hope) in the fasm.pdf file. And - as states my Intel Instruction Set Reference (order number 245372-007) - only fsubrp allows syntax without operand. Valid syntax is for example fsubr st1,st0</div>
    <div class="meta">Posted on 2002-10-10 13:13:31 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-61245">
    <div class="subject"><a href="#post-61245">problems with instructions fsubr,fisubr</a></div>
    <div class="body"><div class="quote"><br />Available syntaxes are documented (clearly I hope) in the fasm.pdf file. And - as states my Intel Instruction Set Reference (order number 245372-007) - only fsubrp allows syntax without operand. Valid syntax is for example fsubr st1,st0 </div><br /><br />I was wrong about the FISUBR instruction.<br />This is the code snip I was converting from (I think MASM) format to FASM format<br /><br />Mrandom proc near<br />_Mrandom label near<br />     call mbrandom<br />     mov edx,eax<br />     shr eax,12<br />     or eax,3ff00000h<br />     shl edx,20<br />     mov dword ptr ,eax<br />     mov dword ptr ,edx<br />     fld1<br />     fld qword ptr <br />     fsubr     ;??? <br />     ret<br />mrandom endp<br /><br />Original intel instruction info:<br />D8 E8+i FSUBR ST(0), ST(i) Subtract ST(0) from ST(i) and store result in ST(0)<br />DC E0+i FSUBR ST(i), ST(0) Subtract ST(i) from ST(0) and store result in ST(i)<br /><br />after looking at the info above i am kind of confused as to how a single or no operand instruction would work, but yet it is used in the code snip above.  ?????</div>
    <div class="meta">Posted on 2002-10-10 16:47:50 by GorillaCoder</div>
   </div>
   <div class="post" id="post-61284">
    <div class="subject"><a href="#post-61284">problems with instructions fsubr,fisubr</a></div>
    <div class="body">The no operand instructions such as fadd, fmul as they are in Masm can be written in Fasm as faddp st1,st0.<br /><br />Or (if I'm interepting Privalovs response correctly) you need only add the p (Never tried this though)</div>
    <div class="meta">Posted on 2002-10-11 03:25:42 by EÃ³in</div>
   </div>
  </div>
 </body>
</html>