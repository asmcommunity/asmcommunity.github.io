<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Problem Coloring Dialog Under 2K - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28552" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28552">Problem Coloring Dialog Under 2K</a></p>
   <div class="post" id="post-201964">
    <div class="subject"><a href="#post-201964">Problem Coloring Dialog Under 2K</a></div>
    <div class="body">Hey all. :)

I'm trying to set the background of my dialog box black, but I'm having a problem with it under Win2k. It works fine on 98/ME but on 2K, the dialog background is just transparent and the window caption doesn't show up. I use the same code to color the bg of my edit boxes (except I use TRANSPARENT instead of OPAQUE), and they work fine even under 2K so I don't know what the problem could be. This is what I used:

.elseif uMsg == WM_CTLCOLORDLG
  invoke SetBkMode, wParam, OPAQUE
  invoke SetBkColor, wParam, Black
  invoke CreateSolidBrush, Black

I've also tried using GetStockObject, BLACK_BRUSH in place of the CreateSolidBrush call, and using TRANSPARENT in place of OPAQUE but but it all had the same effect.

Does anyone have any idea as to what could be wrong?

Thanks! :)</div>
    <div class="meta">Posted on 2001-06-28 16:25:00 by Bl00dBaTH</div>
   </div>
   <div class="post" id="post-201965">
    <div class="subject"><a href="#post-201965">Problem Coloring Dialog Under 2K</a></div>
    <div class="body">When moving from Win9x to Win2k, the first question some of us ask is:  Are you properly saving the values of registers EBX, ESI, and EDI?</div>
    <div class="meta">Posted on 2001-07-02 22:08:00 by tank</div>
   </div>
   <div class="post" id="post-201966">
    <div class="subject"><a href="#post-201966">Problem Coloring Dialog Under 2K</a></div>
    <div class="body">Yup. I finally figured out my little problem last night after changing my code time and time again though.

I forgot to have my Message Loop return TRUE/FALSE and so the program would eat resources like crazy and have a transparent bg under 2k. All I needed was a simple

.else
mov eax, FALSE
ret
.endif

added to my Message Loop and now it works perfectly. *slap* :)

Thanks for the reply though. ;)

Regards,
Bl00dBaTH</div>
    <div class="meta">Posted on 2001-07-03 11:37:00 by Bl00dBaTH</div>
   </div>
  </div>
 </body>
</html>