<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>the past is coming back to haunt me..... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=66" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=66">the past is coming back to haunt me.....</a></p>
   <div class="post" id="post-25681">
    <div class="subject"><a href="#post-25681">the past is coming back to haunt me.....</a></div>
    <div class="body">I knew that I'd seen something about this before on this board.<br /><br />Anyways, I loathe gdi coding, but I've got a static control that I want to be red so it'll stand out a bit more.  Occasionally in the past I've used this same technique to change the colors of static controls, but this is the first time that I've ever needed to periodically update the text in that static control.  The code is already posted several times in this thread so I won't bother posting it again.<br /><br />What's happening is that when a button is pressed the text of the static control gets updated but it's overlapping the previous text.  It's almost 4am and I'm going cross-eyed.  Bottom line is I've tried a bunch of different things that when I stop to think about it, didn't make much sense at all.  Hindsight's wonderful eh.<br /><br />If I comment out the wm_ctlcolorstatic code the problem disappears.  And when the wm_ctlcolorstatic code is there, and the text gets changed, all I have to do is minimize/restore the program (presumably firing a wm_paint msg?) and it's fine.  The problem is a combination of me knowing dick about gdi coding and just plain exhaustion.  I'm guessing that I've got to handle the wm_paint message somehow?<br /><br />So if some kind soul can decipher my ramblings and solve the problem I'd appreciate it.  Otherwise I'll just remove the wm_ctlcolorstatic code cause it's not worth the headache.</div>
    <div class="meta">Posted on 2002-02-24 04:56:12 by Will</div>
   </div>
   <div class="post" id="post-25684">
    <div class="subject"><a href="#post-25684">Graphical Interface</a></div>
    <div class="body">I don't know if it is known by most coder or even if i am doing the things wrong.... When you use WM_CTLCOLORSTATIC or EDIT and you are contintenly using your program or even not....<br />I thought i had it made until i start check MEMORY being used with the System in the control Panel under Performance....<br /><br />I have a habit of check and forgot...But when i went back to doing it it will take your avarge 86% down to 46% with-in a hour of using active windows changeing.......<strong>It EAT up LIKE HELL WINDOWS MEMORY....</strong> ...<span style="font-size:9px>like a sex starved Womem</span> :)<br />Every time you move or the program re-draw IT get Worse and Worse and Worse and Worse and worse.  My question is Do anyone know how to properly write the code in so that it will help reduce this problem.....I tried all types of ways with no success to date...<br /><br />Test it for a few hours and see for yourself...</div>
    <div class="meta">Posted on 2002-02-24 06:04:16 by cmax</div>
   </div>
   <div class="post" id="post-25685">
    <div class="subject"><a href="#post-25685">Graphical Interface</a></div>
    <div class="body">cmax: You probably forgot to destroy GDI resources like brushes, pens etc.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-02-24 06:20:24 by Thomas</div>
   </div>
   <div class="post" id="post-25705">
    <div class="subject"><a href="#post-25705">Graphical Interface</a></div>
    <div class="body">cmax:<br />I have seen that with other apps.  With the wm_ctlcolorstatic (for 1 control) Window Task Manager's Mem Usage (using win2k) column shows that my program uses 837k of memory.  Without that code it shows 816k.  I've been monitoring both versions of my program simultaneously for the last 20 minutes and the numbers may go up or down a little bit if I minimize/restore/move them but for the most part they stay fairly close to the level that they started off with.<br /><br />Thomas:<br />The only brush that I was using was a stock one, returned by GetStockObject.  But according to microsoft:<br />&quot;It is not necessary (but it is not harmful) to delete stock objects by calling DeleteObject.&quot;<br /><br /><br />Again, I don't know much about gdi coding but I seriously doubt that having one single static control's color changed would bring down your system memory from 86% to 46%.....at least using the same code that I was using.<br /><br />Aah well, I removed the code anyways, but if someone does know how to fix the problem I was having I'd still be interested in a solution.</div>
    <div class="meta">Posted on 2002-02-24 12:35:30 by Will</div>
   </div>
   <div class="post" id="post-25731">
    <div class="subject"><a href="#post-25731">Graphical Interface</a></div>
    <div class="body">I figured that it a Microsoft i don't care thing.....(now go get NET)<br />I still using a 200Mz NEC from 1997 and since i started trying to be an programmer i monitier program mem use because i don't want my program to be a hog on someone who still in love with his 386...I hope some one can find an answer because i never saw a real one yet....But code is everywhere for it...But no body seem to know how to fix it..<br /><br />No Reflection on you Thomas, Not at All<br /><br />i was just curious for over 2 years...<br /><br />Thanks<br /><br />4oh4, most of any asm program open up and use 1k - 4k.  even if it's extra large COM project.  Remember back in the day.  Also i did a lot of minizing and jumping from windows to windows and every time the my a program move it seems that it get redraw, so mem ususage go's up some how.   My codes programing is always tight with out it im back to normal...My maching never fall below 82% in life so i just stop using it...There got to be another way if the fix is not out there... This is ASM.  Nothing is Imposible the way i'm dreaming with it .  I can't figure much out on my own anyway without a jump start.  I Tried Hard... But heckI got time, i can wait...(i hope)<br /><br />Se ya</div>
    <div class="meta">Posted on 2002-02-24 16:48:39 by cmax</div>
   </div>
   <div class="post" id="post-25740">
    <div class="subject"><a href="#post-25740">Graphical Interface</a></div>
    <div class="body">I can't leave like that, I forgot to say maybe I'm still doing it all wrong and could have not looked yet into what Mr. Thomas suggestion was.  <br /><br />Don't let my experence stop you... Just a note for everyone.  Keep an eye on your MeM used.  There are more 386, 486, that people going to stick with for many moons to come.  This is ASM..</div>
    <div class="meta">Posted on 2002-02-24 17:43:37 by cmax</div>
   </div>
   <div class="post" id="post-30233">
    <div class="subject"><a href="#post-30233">Graphical Interface</a></div>
    <div class="body">Hey Guys<br />I think i found out why my wm_ctlcolorstatic was eating up all of my memory.  It was in my ret.<br /><br />I don't know why because i had it there but what i did was to give it its own jump ReturnColor.  I seen someone something like it in a post.<br /><br />jum ReturnColor<br /><br />ret<br />ReturnColor:<br /><br />And it seem that its may be as it should.  I got a lot of WM_ stuff in it packed with code so it could have gotten tisted up somehow. <br /><br />It's just like a situation that i had of over flowing  buffers but everthing was layed out perfectly. 99.9% sure all DD first than DB..To The Number....  but what i had to do was (by trial and error) was to put a big 16KB emty buffer betweens the many, many of buffer and now it's just like brand new again and it seem that the code is even launching faster....  But it cost me 16k to do it.  Stranges but true... Well anyway, Masm is not perfect but that's where detirmintion luck comes in...I'll use that buffer for a help file or a picture or something if possible latter if i can't ever get rid of it... Its Working Like Mad...</div>
    <div class="meta">Posted on 2002-03-21 19:53:41 by cmax</div>
   </div>
  </div>
 </body>
</html>