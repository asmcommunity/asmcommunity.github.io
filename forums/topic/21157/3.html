<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>C question - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21157" />
  <link rel="prev" href="../?id=21157&amp;page=2" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=21157">C question</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=21157&amp;page=1" style="">&laquo;</a><a href="../?id=21157&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="21157" /><input type="number" name="page" min="1" max="3" step="1" value="3" onchange="this.form.submit();" /></form>   <div class="post" id="post-160646">
    <div class="subject"><a href="#post-160646">Re: C question</a></div>
    <div class="body"><div class="quote"><br />It&#39;s so strange, because usually the serious research projects are runnign primarily under Linux. Yann LeCun&#39;s Lush and LeNet; FFTW; Singular; etc. There must be a reason for this (which I don&#39;t know), and I don&#39;t think the money is the reason.<br /></div><br />I can think of a couple of reasons... it&#39;s not uncommon that universities more or less force their comp.sci. students to run some *u*x variant, because of the machines in the computer labs, as well as the courses they need to follow.<br /><br />Then there&#39;s the elitism aspect; many comp.sci. students are a bit... <em>eccentric</em>, and using linux and cryptic commandlines with a zillion pipes, as well as hand-crafting makefiles, make them feel special :)<br /><br />And then there&#39;s more reasonable reasons, like having source code to tinker around with (useful for people with courses compiler design or OS construction).<br /><br /><div class="quote"><br />Neither both of you did not mentioned anything about my post, in which I explain why I moved to Linux. There is a strong point there, when I try to explain the use of NOT microsoft made production softwares. AutoCAD, ModelSim, Xilinx, etc. (I&#39;m familiar with these ones). Or even MS Office.<br /></div><br />I don&#39;t have experience with that software, so I cannot comment on it.<br /><br /><div class="quote"><br />If you will start to work with such products, you will find out what windows is able to. Crash after crash also on expensive good, reliable hardware.<br /></div><br />Does windows crash, or the individual applications? There&#39;s quite a difference. I&#39;ve never seen a user-mode application take down an NT based system.<br /><br /><div class="quote"><br />The developers of Linux should try to simplify those complicated commandline switches. The syntax of VC compiler switches is not so horrible like that of gcc.<br /></div><br />I wouldn&#39;t say those commandlines are all that horrible; there&#39;s a lot to choose from though, and it takes a while tweaking and benchmarking to get the best results.<br /><br /></div>
    <div class="meta">Posted on 2005-05-31 16:42:07 by f0dder</div>
   </div>
   <div class="post" id="post-160696">
    <div class="subject"><a href="#post-160696">Re: C question</a></div>
    <div class="body"><div class="quote"><br />Then there&#39;s the elitism aspect; many comp.sci. students are a bit... <em>eccentric</em>, and using linux and cryptic commandlines with a zillion pipes, as well as hand-crafting makefiles, make them feel special :)<br /></div><br /> :lol: :lol: There is an element of truth in it :)<br /><br /><div class="quote">Does windows crash, or the individual applications? There&#39;s quite a difference.</div><br />Yes, you&#39;re right, I did not specify this. The applications are crashing, but the programs recover only after a Windows restart. And this is not uncommon, not only on my computer. You can imagine for example, when a building is loaded with I don&#39;t know how many hundred-thousand graphical objects, and you are doing some operations on them, Windows starts trudging. Windows is very good and easy for every day usage, but definitely not <em>rugged</em>, and <em>heavy-duty</em>. That&#39;s my problem.<br />But of course it depends on the personal needs, what tasks do you want to do with your computer. That&#39;s why there exist diferent kind of Operating Systems.<br /><br /><div class="quote">I&#39;ve never seen a user-mode application take down an NT based system.</div><br />My high school diploma work ;) I wrote it in 1999. It&#39;s a MS-DOS app written fully in ASM, and it uses VESA video modes. I made the VESA drivers, mouse drivers, and graphical functions like OutText, Line, and others. I made a GUI for dos. I was enthusiastic that time :) The program actualy did surface-wave simualtion (animation).<br />The only problem was, that it did not work correctly with ATI cards. I don&#39;t know why. Probable I made some bug somewhere in the page banking.<br />Once I ran the program under XP, and I did not knew that the computer had ATI card, and the XP hanged up. I couldn&#39;t do anything, but reset.&nbsp; :lol: :lol:<br />But this was the only case, otherwise the program worked under every computer (&gt;i386), and under every Windows. It never crashed.<br /><br />I attached a screenshot of the program.</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=654" target="_blank">WaveSim.gif</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-06-01 16:23:04 by bszente</div>
   </div>
   <div class="post" id="post-160697">
    <div class="subject"><a href="#post-160697">Re: C question</a></div>
    <div class="body"><div class="quote"><br />Yes, you&#39;re right, I did not specify this. The applications are crashing, but the programs recover only after a Windows restart.<br /></div><br />This sounds more like a driver issue to me... like serious resource leaks. Fortunately, &quot;normal&quot; resource leaks are recovered, otherwise a lot of programmers would have serious trouble.<br /><br /><div class="quote"><br />Windows is very good and easy for every day usage, but definitely not rugged, and heavy-duty<br /></div><br />Humm, win2k web servers with more than a year of uptime aren&#39;t rugged/heavy-duty? I have just had 12 days of uptime with constant network activity, lots of messing with visual studio, a good deal of gaming, transcoding DVD-R&#39;s, et cetera... the reason I rebooted? I installed some software that required a driver. That&#39;s rugged &amp; heavy-duty enough for me :)<br /></div>
    <div class="meta">Posted on 2005-06-01 16:31:42 by f0dder</div>
   </div>
   <div class="post" id="post-160698">
    <div class="subject"><a href="#post-160698">Re: C question</a></div>
    <div class="body"><div class="quote"><br />This sounds more like a driver issue to me...</div><br />I can assure you, that it isn&#39;t. As I said in previous post, I take extraordinarily care to drivers, and the hardware is also of good quality and I do realy take care of it. (Boxed Intel D845GBV mainboard with boxed P4).<br /><br /><div class="quote">Humm, win2k web servers with more than a year of uptime aren&#39;t rugged/heavy-duty? ... That&#39;s rugged &amp; heavy-duty enough for me :)</div><br />I believe this. That&#39;s why I said it depends on the target. However I realy have the feeling that this (not software) engineering world apps are different question. I don&#39;t know why. Also different companies (architectural - I know these through my father), have major problems, I had to do several time technical support. Not to mention when you work with big plotters (A0 size, or 2.5 meter of drawing). I can assure you, that if you take the best (x86) computer on the market, it&#39;s still not enough. A print lasts 15-20 minutes. Only the processing of the plot file lasts 5-10 minutes. And when you have to print 10 or more such big plans... And if the plot file gets corrupted (somewhere in the generating process something goes wrong) in the middle of the plot -&gt; you lost time + toner + money. You start again.<br />But this is a different world. I&#39;m realy waiting my father to quit this, because I&#39;m tired of supporting this. There are so many hazarduous problems, I&#39;m full with them.</div>
    <div class="meta">Posted on 2005-06-01 16:52:29 by bszente</div>
   </div>
   <div class="post" id="post-160699">
    <div class="subject"><a href="#post-160699">Re: C question</a></div>
    <div class="body"><div class="quote"><br /><br />My high school diploma work ;) I wrote it in 1999. It&#39;s a MS-DOS app written fully in ASM, and it uses VESA video modes. I made the VESA drivers, mouse drivers, and graphical functions like OutText, Line, and others. I made a GUI for dos. I was enthusiastic that time :) The program actualy did surface-wave simualtion (animation).<br />The only problem was, that it did not work correctly with ATI cards. I don&#39;t know why. Probable I made some bug somewhere in the page banking.<br /></div><br /><br />Or maybe there is a bug in the ATI driver that caused the NT machine to be down. That of course I don&#39;t thnik you can blame Microsoft, as the code for the driver is most probably ATI.<br /><br />I agree with f0dder that the phenomenon that you have described sounds like a resource leak - another bad application programmer is at fault.</div>
    <div class="meta">Posted on 2005-06-01 19:11:53 by roticv</div>
   </div>
   <div class="post" id="post-160700">
    <div class="subject"><a href="#post-160700">Re: C question</a></div>
    <div class="body">Both nvidia and ATi have had pretty serious driver issues, btw. NVidia likes to do bus hogging, to squeeze out a few more fps... unfortunately this causes skipping sound with some sound cards / drivers (and perhaps more serious problems as well).<br /><br />It seems like ATi haven&#39;t run their drivers through the Driver Verifier; http://www.asmcommunity.net/board/index.php?topic=17926.0 - software crashes that have the same symptoms as hardware failure.<br /><br /><div class="quote"><br />The only problem was, that it did not work correctly with ATI cards. I don&#39;t know why. Probable I made some bug somewhere in the page banking. Once I ran the program under XP, and I did not knew that the computer had ATI card, and the XP hanged up. I couldn&#39;t do anything, but reset.<br /></div><br />Again, sounds like an ATi video driver error. There might also be a few flaws in NTVDM, I can&#39;t rule that out (but at least it&#39;s a lot more stable than dos boxes on 9x).<br /><br />I wonder why you&#39;re having so much trouble with engineering software... perhaps the coders are plain lousy? :)<br /></div>
    <div class="meta">Posted on 2005-06-01 19:29:19 by f0dder</div>
   </div>
   <div class="post" id="post-160702">
    <div class="subject"><a href="#post-160702">Re: C question</a></div>
    <div class="body">Hey <strong>roticv</strong>, for my WaveSim program I don&#39;t blame Microsoft. I said that it must be my bug.<br /><br /><div class="quote">Again, sounds like an ATi video driver error. There might also be a few flaws in NTVDM</div><br />My bug is present also when I run it from noromal MS-DOS 6.22, so it&#39;s nothing relateds to any kind Windows. It&#39;s related to ATI VESA BIOS. Those ATI cards have a little bit strange behaviour, and I did not handle something in the right manner. On any other video card my program goes well (nVidia, Intel 8xx, the old Trident, Cirrus Logic, etc). I tested on many hardware in that time, ATI&#39;s VESA is the exceptions.<br />I never had any problems with my nVidia card.<br /><br /><div class="quote">I wonder why you&#39;re having so much trouble with engineering software... perhaps the coders are plain lousy? :)</div><br />I wonder too, but I&#39;m not the only one who is complaining. Another point is that those softwares are very complex (both alghoritmically and mathematically), and they have to do very <em>diversified </em>tasks. Yeah... eveybody is lousy exept Microsoft&nbsp; :lol: I don&#39;t think that Microsoft has only good programmers. Don&#39;t forget that the Software industry is a small part of the whole IT business. Computer and software users those who use only the software and do not develop software are significantly higher in number.<br />BUT I&#39;m keep saying that (at least in my case), under Linux with the SAME software and hardware, the problems are not manifesting.<br /><br />In <em>better places</em> like Germany and so on, they avoiding this problem by splitting the task (plan) in VERY small parts, to assure that the computers can deal with them, and after the parts are ready, the whole design, building, plan is put together on a bigger graphical workstation that has both software and hardware capacity. Don&#39;t ask me what kind of OS and hardware they use, I don&#39;t know that.<br /><br />The best AutoCAD version of all times was the Realease 12, that worked under MS-DOS. It eas fast, reliable, in that time to render a photo might take a whole week(!!), but they were no problems. After they switched to Windows, the problems started to appear. And this problems are increasing by the time. And yes, they have 20 years of experience (10 years under Windows). And the complexity of software did not changed much. In fact it&#39;s the same that was in the R12. Under windows the best was the Win NT4 SP6 with AutoCAD 2000. It would be nice to have also a Linux version... But it seems that Autodesk is not thinking in Linux (yet).<br /><br />Man... I&#39;m just realizing, how far are we now from <strong>audioman</strong>&#39;s question...&nbsp; :) We could split this thread to at least 3 different:<br /> - VisualC++ vs. GCC<br /> - (the old and classical) Windows vs. Linux<br /> - Software developer&#39;s opionion about Windows vs. non software developers opinion ;)</div>
    <div class="meta">Posted on 2005-06-02 05:03:35 by bszente</div>
   </div>
   <div class="post" id="post-160703">
    <div class="subject"><a href="#post-160703">Re: C question</a></div>
    <div class="body"><div class="quote"><br />eveybody is lousy exept Microsoft <br /></div><br />Hehe, never said that... There&#39;s a large number of flaws in Microsoft software; they have too many programmers. The kernel team is very competent, though.</div>
    <div class="meta">Posted on 2005-06-02 05:39:22 by f0dder</div>
   </div>
   <div class="post" id="post-160707">
    <div class="subject"><a href="#post-160707">Re: C question</a></div>
    <div class="body"><div class="quote"><br />The kernel team is very competent, though.</div><br />No question about it. It must be very difficult to keep organized that <em>army</em> of programmers. :)<br /></div>
    <div class="meta">Posted on 2005-06-02 06:19:41 by bszente</div>
   </div>
   <div class="post" id="post-160712">
    <div class="subject"><a href="#post-160712">Re: C question</a></div>
    <div class="body"><div class="quote"><br />No question about it. It must be very difficult to keep organized that <em>army</em> of programmers. :)<br /></div><br /><br />Such a giant company should have good commanders to keep up that army. :)</div>
    <div class="meta">Posted on 2005-06-02 12:28:41 by Vortex</div>
   </div>
   <div class="post" id="post-160779">
    <div class="subject"><a href="#post-160779">Re: Another test</a></div>
    <div class="body"><div class="quote"><br />It&#39;s very interestig how the performance is varying with the modification of the code.<br /></div><br /><br />When optimizing, you should know the bottleneck. You should also be aware of what your code generates and your compiler&#39;s flags. If you&#39;ll further optimize my snippet (I didn&#39;t bother, because its purpose was to be clear and concise) by applying loop unrolling, for example, you can get it to take about 1.5 seconds (from 8.8 seconds) with 5 &quot;rounds&quot; per iteration.</div>
    <div class="meta">Posted on 2005-06-04 18:41:50 by death</div>
   </div>
   <div class="post" id="post-160805">
    <div class="subject"><a href="#post-160805">Re: Another test</a></div>
    <div class="body"><div class="quote"><br />If you&#39;ll further optimize my snippet</div><br />Yes <strong>death</strong>, but don&#39;t forget, that your snippet is not compatible with my snippet. Your snippet is assuming, that the input vector is just a simple RGBRGBRGB sequence, starting with the first line, and the output vector is also a sequence only. You&#39;re right this is a fotunate situation, it can be optimized.<br /><br />BUT, when I posted the problem, I explained that you should take the parameters as it is. Consider that you are given the parameters this way:<br /> - input: an array of RGBRGBRGB, but starting with the last line <br /> - output: a bidimensional arrray (240 lines, 320 cols)<br />In that case I don&#39;t think you can achieve 1.5 seconds.<br /><br />Of course it would be even much more easyier, if the initial sequence would be RGB0RGB0, to be aligned on 32 bits, it would be faster. Or if you would use SSE to do the multiplication and sum, it would be even more faster, etc. But this is a different question.<br />I agree that it would be better to organize the data the way you did your snippet, but there are cases when you have no choice, you have to respect some specifications.</div>
    <div class="meta">Posted on 2005-06-05 09:54:22 by bszente</div>
   </div>
   <div class="post" id="post-160809">
    <div class="subject"><a href="#post-160809">Re: Another test</a></div>
    <div class="body"><div class="quote"><br />Yes <strong>death</strong>, but don&#39;t forget, that your snippet is not compatible with my snippet.<br /></div><br /><br />My code is compatible with your data structures. C and C++ don&#39;t have real multi-dimensional arrays; they have &quot;arrays of arrays&quot;. This means all the elements in your &quot;multi-dimensional&quot; array are contiguous. Now, if I accessed this array using a pointer to non- unsigned char, you might have a point, because in theory, &quot;fat pointers&quot; are allowed, and this access could cause a range check error. In practice, I only heard about one compiler that used to do range checking (Centerline). But, since I do use pointer to unsigned char for access, the issue is mute: compatibility is guaranteed by the standard.<br /><br />P.S. I missed the fact that your code is &quot;starting with the last line&quot;. With some minor changes to my code, it will be compatible... However, I wonder how that will affect performance (e.g., with regards to caching).</div>
    <div class="meta">Posted on 2005-06-05 12:54:05 by death</div>
   </div>
   <div class="post" id="post-160810">
    <div class="subject"><a href="#post-160810">Re: Another test</a></div>
    <div class="body"><div class="quote"><br />C and C++ don&#39;t have real multi-dimensional arrays; they have &quot;arrays of arrays&quot;. This means all the elements in your &quot;multi-dimensional&quot; array are contiguous.</div><br />I&#39;m sorry but I think you have not right at this point (or maybe I&#39;m missing something?). The elements in the multidimensional arrays are <strong>NOT </strong>contiguous, they are contiguous only in one row (or whatever you call it in a 3 or more dimentional array), and the rows can be at any memory locations. For example in the physical memory the second can be in front of the first, the other mixed up. You could not know where will malloc allocate the memory.<br />My code snippet starts with this (you may check it):<br /><pre><code>unsigned char** Buffer;<br />...<br />void Convert(unsigned char* Vector)<br />{<br />...etc.<br /></code></pre><br />This means that the Buffer is a bidimensional array. Now how do you create such a vector?<br /><pre><code>Buffer = (unsigned char**) malloc(240 * sizeof(unsigned char*));<br />for (i = 0; i &lt; 240; Buffer<em> = (unsigned char*) malloc(320));<br />...<br />Buffer<em> - is defined<br /></code></pre><br /><br />Your output vector was a simple <em>unsigned char*</em>, you cannot access it with the [][] indices.<br /><pre><code><br />unsigned char* out[320 * 240];<br />... or ...<br />unsigned char* out;<br />out = (unsigned char*) malloc(320 * 240);<br />...<br />out<em> - is not defined, it will access illegal memory locations.<br /></code></pre><br />This is the reason why I said that you cannot decrease significantly anymore the execution time, because you can access linearly the bidimensional array only row-by-row. I think using SSE instruction the code could be even optimized, but from arithmetical operations&#39; speed point of view. Only by rearranging the loop, I don&#39;t know if there are more options.</div>
    <div class="meta">Posted on 2005-06-05 15:05:56 by bszente</div>
   </div>
   <div class="post" id="post-160811">
    <div class="subject"><a href="#post-160811">Re: C question</a></div>
    <div class="body">I&#39;m sorry, you are correct. For some reason, I remembered your buffer having type unsigned char, which is what I was talking about. I guess you&#39;re stuck with bad data structures.</div>
    <div class="meta">Posted on 2005-06-05 15:30:09 by death</div>
   </div>
   <div class="post" id="post-160814">
    <div class="subject"><a href="#post-160814">Re: C question</a></div>
    <div class="body"><div class="quote">I&#39;m sorry</div><br />No problem... ;)<br /><br /><div class="quote">I guess you&#39;re stuck with bad data structures.</div><br />Definitely :sad:</div>
    <div class="meta">Posted on 2005-06-05 16:12:06 by bszente</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=21157&amp;page=1" style="">&laquo;</a><a href="../?id=21157&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="21157" /><input type="number" name="page" min="1" max="3" step="1" value="3" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>