<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>problem with GDI32.CreateDIBSection - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29221" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29221">problem with GDI32.CreateDIBSection</a></p>
   <div class="post" id="post-206383">
    <div class="subject"><a href="#post-206383">problem with GDI32.CreateDIBSection</a></div>
    <div class="body">My problem is that when i select the DIBSectionHandle in to my device context it appears offset from the upper left hand corner (down 100 pixels or so and to the right 50 pixels or so) i cant figure out why it is doing this pleas help me. Thanks in advance. <br /><br />;Here is the code written in RosAsm <br /><br /><br /><br /><br /><br /><br /><br /><br />call &#039;USER32.GetDC&#039; D$wHMain<br />mov D$wHDC eax<br /><br />call &#039;GDI32.CreateCompatibleDC&#039; eax<br />mov D$hMemDC eax<br /><br /> ;&lt;&lt;&lt;This function does not work yet need to fix later<br />call &#039;GDI32.CreateDIBSection&#039; D$hMemDC BITMAPINFO &amp;DIB_RGB_COLORS BitmapPointer 0 0<br />mov D$DIBSectionHandle eax<br /> <br />call &#039;GDI32.SelectObject&#039; D$hMemDC D$DIBSectionHandle <br />;the DIBSection is not in the upper left hand corner it is offset but i cant figure out why <br /><br /><br /></div>
    <div class="meta">Posted on 2008-12-03 00:22:04 by ChaosVisum</div>
   </div>
   <div class="post" id="post-206397">
    <div class="subject"><a href="#post-206397">Re: problem with GDI32.CreateDIBSection</a></div>
    <div class="body">I don&#039;t know anything about RosASM, but shouldn&#039;t that be<br />call &#039;GDI32.CreateDIBSection&#039; D$hMemDC BITMAPINFO DIB_RGB_COLORS &amp;BitmapPointer 0 0<br /><br /></div>
    <div class="meta">Posted on 2008-12-03 17:32:34 by Ultrano</div>
   </div>
   <div class="post" id="post-206404">
    <div class="subject"><a href="#post-206404">Re: problem with GDI32.CreateDIBSection</a></div>
    <div class="body">The &amp; is a convention of RosAsm, all windows constants have it as a prefix they are built into the assembler ide <br /><br />I have used nasm, fasm, goasm, spasm, masm, and radasm &quot;editor&quot;, of them all Rosasm is the coolest by far because it has a built in debugger the lets you single step through your code, very nice<br /><br />as for my code everything works except for the fact that the bitmap created by the DIBsection function when selected into the hMemDC does not appear in the upper left hand corner rather it is down and to the right of it a little.&nbsp; I dont know what causes this.<br /><br />I did try the constant value for the equate you mentioned, it had no different affect. </div>
    <div class="meta">Posted on 2008-12-04 00:36:42 by ChaosVisum</div>
   </div>
   <div class="post" id="post-206406">
    <div class="subject"><a href="#post-206406">Re: problem with GDI32.CreateDIBSection</a></div>
    <div class="body">btw, VisualStudio lets you debug MASM .asm code in single-step and whatever ;)</div>
    <div class="meta">Posted on 2008-12-04 00:50:01 by Ultrano</div>
   </div>
   <div class="post" id="post-206408">
    <div class="subject"><a href="#post-206408">Re: problem with GDI32.CreateDIBSection</a></div>
    <div class="body">i did not know that very interesting, is the asm syntax that is inlined in microsoft visual C++ 2008 express edition similar to MASM.&nbsp; Can you code directly in assembler or do you need to inline? <br /><br />I have been looking around and there seems to be something interesting about my code.&nbsp; I don&#039;t think this is supposed to happen but write after i select the DIBsection into the compatibleDC that i create it appears within the client area of my main window without calling a bitblt.&nbsp; Even more interesting if i do a bitblt of the compatibleDC to the main windowDC it does go to the upper left hand corner but the original DIBsection is still present. <br /><br /><br /></div>
    <div class="meta">Posted on 2008-12-04 02:46:45 by ChaosVisum</div>
   </div>
   <div class="post" id="post-206409">
    <div class="subject"><a href="#post-206409">Re: problem with GDI32.CreateDIBSection</a></div>
    <div class="body">In VS, you can debug both inline and separate .asm files, attached to your C/C++ project. <br />I also use VS to debug my pure-masm projects, either on exception/breakpoint , or full debug with full debug-info (requires debug-switch at ml.exe)</div>
    <div class="meta">Posted on 2008-12-04 04:50:12 by Ultrano</div>
   </div>
  </div>
 </body>
</html>