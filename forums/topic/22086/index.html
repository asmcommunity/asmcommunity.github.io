<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Is moving from MASM to FASM worth the trouble? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22086" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22086">Is moving from MASM to FASM worth the trouble?</a></p>
   <div class="post" id="post-166273">
    <div class="subject"><a href="#post-166273">Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Normally I wouldn&#39;t make a thread on voting type of thing because most of the times their kinda pointless and just take up space and annoy people but I&#39;m kinda between a rock and a hard place on this.. This is really a question for Shoo, since he was the one that told me about it. I guess it&#39;s for other&#39;s who are also using it too, anyhow the question is, is FASM really worth it? I mean I been using MASM, and there&#39;s ALOT of quirks that I really don&#39;t like about it, things don&#39;t seem to behave the way you&#39;d expect them to, which is why I usually find open source stuff more predicitable (since that stuff is developed for the people by the people instead of by a corporation like Microsoft). I been trying to convert my latest project, a demo I been working on, to FASM syntax, and I&#39;m really struggling through it, I mean I&#39;m managing to get through the compile errors but I&#39;m not certain that the lines are identical in terms of definition and result (all I know is that little by little the compiler gets a little further). Should I continue to persue making the move to FASM or should I stick with MASM? I know their is plus&#39;es and minus&#39;es to each and that theirs gonna be a pretty big divide on this, I&#39;m just looking for an overall number of how many like it versus how many don&#39;t, that sort of thing. More or less 2 main things that I need is for a compiler that deals with<br /> <br /><ul><br /><li>variable accessing the value of the element in an array (like mov ecx, variable&nbsp; ;and acctually behaving like that, not like it allows it and behaves really off the wall)</li><br /><li>Bracket usage (for the most part) meaning the value/contents of... not the memory address and that it doesn&#39;t assume that with or without brackets it means what it thinks it should mean *cough* how masm says you don&#39;t need brackets *cough*</li><br /></ul><br /><br />At the moment I think my biggest issue is with MASM assuming things and giving totally unpredictable results, and FASM&#39;s syntax.. When I say syntax for example in fasm this seems to be invalid<br />LOCAL TempVariable:DWORD<br />instead it shoudl be<br />TempVariable dw<br /><br />now to me that looks extremely bizarre, looks more like a single operand opcode to me.. and I kinda always though those 2 letter datatypes were not quite the same as the full spelled out ones.. ex: dw == dword??<br />also the sections definitions, it seems to not matter where your sections go as long as their defined, that&#39;s ok but I&#39;m not certain on this, because it&#39;s very undocumented (the compiler that is), I only gathered that info by examining the few examples the compiler does come with and that&#39;s what I&#39;ve noticed<br />And asside from the location of the section definitions, the section definitions themselves are really odd<br />ex:&nbsp;  section &#39;.bss&#39; readable writeable&nbsp; &nbsp; &nbsp; &nbsp; ;.bss wtf??<br />in MASM it was just .data?<br />I mean I guess I can gather from that, it means that the memory space for the .data? sections is readable and writeable, but it&#39;s so &quot;ugh&quot; looking.. lol&nbsp; (Guess it&#39;s prolly not to bad for someone that&#39;s a veteran asm coder, or someone that started out using it, but for me it&#39;s a headache)<br /><br />I really want to stay as true as possible the the assembly language but at the same time I&#39;d like an asm compiler that reacts a little bit more on par as something as a hll but without the hll bloat/(code)<br /><br />Cross platform would be nice, but at this point in time I&#39;d settle for something not cross platform, I&#39;m not good enough to I can fight these many language issues at once. I&#39;d like to get really really really good first, then I&#39;d feel like I&#39;m not overwhelmed with problems and results I didn&#39;t expect.</div>
    <div class="meta">Posted on 2005-09-25 14:57:21 by EtErNiTy</div>
   </div>
   <div class="post" id="post-166277">
    <div class="subject"><a href="#post-166277">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Personally I always felt more comfortable with FASM.<br /><br />P.S. FASM has macros to support LOCAL TempVariable:DWORD, though I believe you have to use lowercase for the word local.</div>
    <div class="meta">Posted on 2005-09-25 15:28:05 by EÃ³in</div>
   </div>
   <div class="post" id="post-166280">
    <div class="subject"><a href="#post-166280">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">The real question you have ask is, how many times will you come to this conclusion before you implement it ;)<br /><br />Amateur programming is as much about enjoyment as it is conformance to the tools at hand, I am sure you and many other people would love to see a FASM32 package as well... so you might want to get together with some people on that ;)</div>
    <div class="meta">Posted on 2005-09-25 15:36:15 by SpooK</div>
   </div>
   <div class="post" id="post-166282">
    <div class="subject"><a href="#post-166282">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">EtErNiTy,<br /><br />Any tool involves bothering to properly learn how it works, be it MASM, FASM GoAsm, NASM, GAS or any others. If you are interested in muliport assembler, FASM and NASM both have the capacity with FASM being a better supported tool. MASM is and will stay a Windows tool and that is primarily its advantage, it is dedicated to a platform.<br /><br />The vast majority of MASM source code is not produced by Microsoft but by programmers who use it so its a matter of style that you may personally like or dislike. If you really want open source GPL assembler programming in Linux, use (GNU)AS but note that it has few facilities for being written by hand as it is mainly a backend for GCC.</div>
    <div class="meta">Posted on 2005-09-25 20:18:42 by hutch--</div>
   </div>
   <div class="post" id="post-166286">
    <div class="subject"><a href="#post-166286">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">When I said the thing about the open source stuff, I didn&#39;t mean like the examples included are written better, I just meant that when the assembler was developed that it was prolly geared more towards what the general public wanted.<br /><br />Perhaps it&#39;s something that can be answered easily though, right now my biggest gripe with masm is the usage of registers. Now its possible is just assembly in general, but somehow I can&#39;t help but to think that it&#39;s possibly the compiler (maybe it&#39;s not strict enough during compile time?)&nbsp; <br /><br />If I do for instance<br />(I used HLL constructions only because with all the local labels and jmp&#39;ing around it made it really difficult to debug)<br /><br /><pre><code><br />&nbsp; &nbsp; &nbsp; mov TempVariable1, 0<br />&nbsp; &nbsp; &nbsp; push esi<br />&nbsp; &nbsp; &nbsp; mov esi, 0<br /><br />&nbsp; &nbsp; &nbsp; .WHILE esi &lt; tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;inc TempVariable1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;.IF TempVariable1 &gt; 4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; ;Loop through and bump each element pointer up by 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; push esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; mov esi, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; push ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; .WHILE esi &lt; tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; inc esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; mov ebx, TextElementIndex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; inc ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; .IF ebx &gt; 16<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TextElementIndex, ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; .ELSE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TextElementIndex, ebx&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add TextElementIndex, 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; &nbsp; &nbsp; .ENDIF<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; .ENDW<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; pop ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; pop esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; &nbsp; mov TempVariable1, 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;.ENDIF<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;inc ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inc esi<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;mov TempX1, 356&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;200 base width, plus 100 extra width as noted in the declarations section of the source<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TempX1, 200&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sub TempX1, esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;mov ecx, TempX1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, TextElementIndex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov IndexValue, ebx<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, TextPosOffsetMatrix<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TempY1, ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add TempY1, 20<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;mov ebx, TempY1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke	DrawLCDText, ADDR TempX1, ADDR TempY1, LCDTEXTSIZE_SMALL, ADDR tSmallText1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push tSmallText1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push LCDTEXTSIZE_SMALL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push TempY1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push TempX1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;call DrawLCDText<br /><br />&nbsp; &nbsp; &nbsp; .ENDW<br />&nbsp; &nbsp; &nbsp; pop esi<br /></code></pre><br />Holy crap look out she&#39;s gonna blow!<br /><br />but if I do...&nbsp; Hope you all can follow this, it&#39;s pretty crazy<br /><pre><code><br />&nbsp; &nbsp; &nbsp; mov TempVariable1, 0<br />&nbsp; &nbsp; &nbsp; push esi<br />&nbsp; &nbsp; &nbsp; mov esi, 0<br />&nbsp; &nbsp; &nbsp; push ecx<br />&nbsp; &nbsp; &nbsp; mov ecx, 0<br />&nbsp; &nbsp; &nbsp; jmp @WhileESI_LT_tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; @WhileESI_LT_tSmallTextCounter:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp ESI, tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; je @EndWhile1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;.WHILE esi &lt; tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inc TempVariable1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp TempVariable1, 4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jg @TempVariable1_GT_4_1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @TempVariable1_GT_4_1:&nbsp; &nbsp; &nbsp;  ;.IF TempVariable1 &gt; 4<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Loop through and bump each element pointer up by 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; push ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ecx, 0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; push ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp @TempVariable1_GT_4_2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @TempVariable1_GT_4_2:&nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inc esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp esi, tSmallTextCounter&nbsp; ;.WHILE esi &lt; tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jg&nbsp; @FinishTempVariable1While2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, TextElementIndex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inc ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cmp ebx, 16<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jge @EBX_GTET_16<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jl @EBX_LT_16<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @EBX_GTET_16:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TextElementIndex, ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp @TempVariable1_GT_4_2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @EBX_LT_16:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TextElementIndex, ebx&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add TextElementIndex, 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp @TempVariable1_GT_4_2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp @TempVariable1_GT_4_2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @FinishTempVariable1While2:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pop ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pop esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TempVariable1, 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp @ContinueWhile1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @ContinueWhile1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  inc esi<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, TextElementIndex<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov IndexValue, ebx<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;mov TempX1, 356&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;200 base width, plus 100 extra width as noted in the definitions section of the source<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TempX1, 200&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sub TempX1, esi<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;mov ecx, TemX1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov ebx, TextPosOffsetMatrix<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov TempY1, ebx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add TempY1, 20<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;mov ebx, TempY1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke	DrawLCDText, ADDR TempX1, ADDR TempY1, LCDTEXTSIZE_SMALL, ADDR tSmallText1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;invoke	DrawLCDText, TempX1, TempY1, LCDTEXTSIZE_SMALL, ADDR tSmallText1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;invoke	DrawLCDText, ecx, ebx, LCDTEXTSIZE_SMALL, ADDR tSmallText1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;invoke	DrawLCDText, , , LCDTEXTSIZE_SMALL, ADDR tSmallText1<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push tSmallText1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push LCDTEXTSIZE_SMALL<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push TempY1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;push TempX1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;call DrawLCDText<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp @WhileESI_LT_tSmallTextCounter<br />&nbsp; &nbsp; &nbsp; @EndWhile1:<br />&nbsp; &nbsp; &nbsp; &nbsp; pop ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; pop esi<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; ; --- Blit the drawn LCD onto the back buffer ---<br />	&nbsp; invoke	BitBlt, hBackDC,0,0,+WindowWidthSizeOffset, +WindowHeightSizeOffset, hLCDDC, 0,0, SRCCOPY<br /><br />	&nbsp; ; --- Blit the monochrome label onto the back buffer ---<br />&nbsp; &nbsp; 	&nbsp; invoke	BitBlt, hBackDC,0,0,+WindowWidthSizeOffset, +WindowHeightSizeOffset, hLabelDC, 0, 0, SRCAND<br /><br />	&nbsp; ;pop esi<br />&nbsp; &nbsp; &nbsp; &nbsp; ; Draw the backbuffer onto the main window:<br />	&nbsp; invoke	BitBlt, hDC,0,0,+WindowWidthSizeOffset, +WindowHeightSizeOffset, hBackDC, 0,0, SRCCOPY<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; ; Stop painting:<br />	&nbsp; invoke	EndPaint, hWnd, ADDR ps<br /></code></pre><br />It compiles and runs, but I get nothing on the LCD backdrop<br /><br />Now to me on the surface I see nothing wrong with that code other than that their may be missing brackets where need be and extra brackets where they need&#39;nt be. But with MASM being so loose on the compile rules it&#39;s tough to tell because it just lets it go through as one of the big things it boasts is that you don&#39;t need brackets.. That kinda defeats the purpose of assembly. I&#39;d like to know <em>exactly</em> what&#39;s going on in the background not what can be assumed or guestimated.. Which is why I keep leaning towards going with FASM, it seems to be a bit more strict.. It&#39;s just the syntax is different, and the requirement to introduce different sets of include files means all the variable names accrossed all the code, etc have to be renamed and so forth..<br /><br />The code above compiles and runs, but I get nothing as output on the lcd backdrop of the window. I can&#39;t help but to think if the compiler was more strict about how things are done or if it behaved more on par with what one would expect, I wouldn&#39;t be having issues like these.. I&#39;ve must&#39;ve read like 2 or 3 different tutorials on just how arrays work in asm, and they all kinda differed slightly, and I&#39;m scraping the bottom of my own personal knowledge-barrel as to what else to try. One thing has always been said accrossed all the tutorials I&#39;ve read is that there&#39;s 4 generic registers (ax,bx,cx,and dx  and in win32 it&#39;s e-prefixed for extended or ehanced).. All the tutorials say that the middle letter means a specific thing like a&nbsp; = accumulator, b = base, c = &lt;don&#39;t recall&gt; and d&nbsp; = data (that&#39;s abcd.. I find it hard to beleive that it just so happends&nbsp; that these registers go in order of the alphabet yet have the specific purpose up above mentioned.. But none of the tutorials talk about what you can use with <em>specifically</em> what type of data and in what construnction. Like they don&#39;t go into the real finite details that apparently I need&nbsp; :?: o.O<br /><br />EDIT: Added converted Non-HLL code.</div>
    <div class="meta">Posted on 2005-09-25 22:32:44 by EtErNiTy</div>
   </div>
   <div class="post" id="post-166287">
    <div class="subject"><a href="#post-166287">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">what LCD are you using?</div>
    <div class="meta">Posted on 2005-09-25 23:08:47 by comrade</div>
   </div>
   <div class="post" id="post-166288">
    <div class="subject"><a href="#post-166288">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">I&#39;m using the LCD source in Example 6.. It&#39;s pretty heavily modified though, but you should be able to peice together that source with what I did and figure out about what the source code I have now looks like, unless you want me to attach it as a file to the thread?<br /><br />The original source the LCD CD Player was written by<br />(C) 2000 by Thomas Bleeker . http://exagone.cjb.net<br /><br />More or less the only thing that&#39;s left over is the lcd functions and the empty template-shell of a standard windows app</div>
    <div class="meta">Posted on 2005-09-25 23:14:10 by EtErNiTy</div>
   </div>
   <div class="post" id="post-166293">
    <div class="subject"><a href="#post-166293">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body"><div class="quote"><br />If you really want open source GPL assembler programming in Linux, use (GNU)AS<br /></div><br />Umm, why not use FASM? Runs on and produces output for linux, bsd, win32 ...&nbsp; and is a lot more comfortable than GAS anyway.<br /><br /><div class="quote"><br />invoke	BitBlt, hBackDC,0,0,+WindowWidthSizeOffset, +WindowHeightSizeOffset, hLCDDC, 0,0, SRCCOPY<br /></div><br />That looks preeeeetty wrong to me. If this even assembles, I guess ALIGNED_WIDTH and WINDOW_HEIGHT must be constants. WindowWidthSizeOffset and WindowHeightSizeOffset probably aren&#39;t. This looks pretty nasty :)<br /><br />My suggestion would be to strip down the original MASM sample as much as you can, keeping the functionality you need, *and* keep the high-level syntax so that it still works. When you have a (working) exe with the stripped down functionality you need, <strong>then</strong> concentrate on making it work in FASM.<br /><br />To make the conversion easier, assemble with &quot;/Zi&quot; and use a decent disassembler like IDA (free version should do), and compare the low-level listing to the high-level MASM code.<br /></div>
    <div class="meta">Posted on 2005-09-26 00:55:22 by f0dder</div>
   </div>
   <div class="post" id="post-166295">
    <div class="subject"><a href="#post-166295">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">EtErNiTy,<br /><br /><div class="quote"><br />Now to me on the surface I see nothing wrong with that code other than that their may be missing brackets where need be and extra brackets where they need&#39;nt be. But with MASM being so loose on the compile rules it&#39;s tough to tell because it just lets it go through as one of the big things it boasts is that you don&#39;t need brackets.. That kinda defeats the purpose of assembly. I&#39;d like to know exactly what&#39;s going on in the background not what can be assumed or guestimated.. Which is why I keep leaning towards going with FASM, it seems to be a bit more strict.. It&#39;s just the syntax is different, and the requirement to introduce different sets of include files means all the variable names accrossed all the code, etc have to be renamed and so forth.<br /></div><br /><br />Any assembler is &quot;strict&quot; in that you have a given set of opcodes on any piece of x86 hardware that must be used in a particular way. This characteristic is dictated by hadware, not assemblers. With MASM, it uses the historical Intel syntax where local and data section memory operands are named and while it will tolerate superflous brackets, it does not use them or need them. FASM is written to use square brackets around memory operands so you must use them in FASM. The confusion arises when someone tries to use the syntax of one tool with another where it is simply a matter of learning the syntax of the tool you use.<br /><br />With FASM as in MASM, if you want to know exactly what is going on with code, you will have to avoid the high level macros and the like and code in mnemonics only. Its a lot more work, a lot more error prone and a lot slower but it will do exactly what you want. The best way I know of converting high level syntax to mnemonics is to build it in MASM with a number of NOPS in front of it, run DumpPE to get the disassembly, find the disassembled code from the nops and if you have the masm32 project, get a QE plugin that will format DumpPE output back to near human readable assembler.<br /><br />That will make your porting to FASM a lot easier as the FASM macro versions of hll syntax are not properly compatible with MASM.<br /><br />f0dder,<br /><br /><div class="quote"><br />Umm, why not use FASM? Runs on and produces output for linux, bsd, win32 ...&nbsp; and is a lot more comfortable than GAS anyway.<br /></div><br /><br />GAS has a massive user base with it being the back end for GCC and it is a very low level assembler so for someone who wants to write true low level code, it probaly cannot be beaten in Linux.<br /><br />Regards,<br /><br />hutch at movsd dot com</div>
    <div class="meta">Posted on 2005-09-26 02:28:00 by hutch--</div>
   </div>
   <div class="post" id="post-166296">
    <div class="subject"><a href="#post-166296">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />Umm, why not use FASM? Runs on and produces output for linux, bsd, win32 ...&nbsp; and is a lot more comfortable than GAS anyway.<br /></div><br />GAS has a massive user base with it being the back end for GCC and it is a very low level assembler so for someone who wants to write true low level code, it probaly cannot be beaten in Linux.<br /></div><br /><br />You don&#39;t have a lot of people actually writing code in GAS, though - exactly because it&#39;s mainly a backend for GCC and wasn&#39;t written to actually write assembly with.<br /><br />If GAS was a nice tool, people wouldn&#39;t be using nasm and fasm for linux, bsd, et cetera :)<br /></div>
    <div class="meta">Posted on 2005-09-26 02:34:52 by f0dder</div>
   </div>
   <div class="post" id="post-166300">
    <div class="subject"><a href="#post-166300">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">acctually beleive it or not<br /><br />invoke&nbsp;  BitBlt, hBackDC,0,0,+WindowWidthSizeOffset, +WindowHeightSizeOffset, hLCDDC, 0,0, SRCCOPY<br /><br />was part of the original code lol&nbsp; &nbsp; &nbsp; only thing I did was the +WindowWidthSizeOffset and Height Offsets which are denoted at the top of my source as equ&#39;s&nbsp;  I used them throughout, so it&#39;s all ok&nbsp;  -- I got tired of changing the window size back to original and modified size, now I just have to change it in one place (at the top of my source), if I change it to 0, the window goes back to the original example&#39;s size<br /><br /><br />It&#39;s not so much the macro definitions of fasm that get me, it&#39;s the whole different set of includes files, new include files mean new names for defined (objects?), eample they use WS_HREDRAW and WS_VREDRAW instead of WM, not a big deal except I had to open the include files just to figure out that the name they(whoever wrote the include files) were using was 1 letter different, and that&#39;s all throughout the code, <em>almost</em> any and all constants will have to be figured out first and then changed. The macro definition stuff I thought went pretty easily, only odd thing I thought about it though was that you don&#39;t appear to have to declare the data types of the parameters of the macro.</div>
    <div class="meta">Posted on 2005-09-26 07:05:33 by EtErNiTy</div>
   </div>
   <div class="post" id="post-166301">
    <div class="subject"><a href="#post-166301">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Actually it really is WS_HREDRAW and WS_VREDRAW - Check your include files again ;)</div>
    <div class="meta">Posted on 2005-09-26 08:01:45 by JimmyClif</div>
   </div>
   <div class="post" id="post-166314">
    <div class="subject"><a href="#post-166314">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body"><div class="quote"><br />If GAS was a nice tool, people wouldn&#39;t be using nasm and fasm for linux, bsd, et cetera.<br /></div><br /><br />I imagine if GAS was not the premium assembler tool for Linux, it would not be used for manual code in the bits of Linux kernel code I have seen.</div>
    <div class="meta">Posted on 2005-09-26 11:23:32 by hutch--</div>
   </div>
   <div class="post" id="post-166315">
    <div class="subject"><a href="#post-166315">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Wasn&#39;t the Linux kernel around before Fasm came along? <br /><br />Wouldn&#39;t it be crazy to switch assemblers for existing &#39;working&#39; code inside something as important as a Kernel even if it was a way superior piece of software?<br /><br /></div>
    <div class="meta">Posted on 2005-09-26 11:32:30 by JimmyClif</div>
   </div>
   <div class="post" id="post-166316">
    <div class="subject"><a href="#post-166316">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Exactly, Jimmy. I&#39;d wager that for ~95% of the projects where GAS is used, it&#39;s because GAS is the oldest assembler and is available on all distros.<br /><br />I don&#39;t wish to see this (d)evolve into a flamewar, but advising people to use GAS is plain wrong - it&#39;s akin to advise people to use debug.com because it&#39;s available on all windows machines.<br /></div>
    <div class="meta">Posted on 2005-09-26 11:37:29 by f0dder</div>
   </div>
   <div class="post" id="post-166320">
    <div class="subject"><a href="#post-166320">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Its the fervour in which one assembler is sold that brings the response. We all know FASM is a good tool that will keep getting better but its not the only tool and there is no pervasive argument that it is better than many others. GAS is a very well known tool in Linux and it is perfectly suitable for true low level assembler programming. It is always up to date with all of the lates instructions and it has a perfectly good preprocessor, its called GCC.<br /><br />As with MASM in Windows that has the track record at the OS production level in performance critical code, GAS has the track record in Linux with the OS production level in performance critical code.<br /><br />&gt; but advising people to use GAS is plain wrong<br /><br />Inflicting dogma of this type is ill advised at best, a programmer who choses to write low level Linux code with GAS, with or without GCC has no need to take notice of comments of this type when many assembler programmr <strong>WANT TO WRITE LOW LEVEL CODE</strong>.<br /><br />Regards,<br /><br />hutch at movsd dot com</div>
    <div class="meta">Posted on 2005-09-26 18:40:24 by hutch--</div>
   </div>
   <div class="post" id="post-166349">
    <div class="subject"><a href="#post-166349">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">EtErNiTy, regarding your initial question, my answer is positively Yes. And actually the trouble to move from Masm to Fasm equals to the time spent to read the documentation, specially the win32 specific chapter (Total read of about 12 pages)<br /><br />Fasm macros can mimick many Masm syntax constructs, however I would suggest to use a disassembled (with symbols) list (i.e. ollydbg) and then start working on it. Your code will look a lot cleaner. A spreadsheet also helps a lot on this process.<br /></div>
    <div class="meta">Posted on 2005-09-27 15:41:52 by pelaillo</div>
   </div>
   <div class="post" id="post-166351">
    <div class="subject"><a href="#post-166351">Re: Is moving from MASM to FASM worth the trouble?</a></div>
    <div class="body">Yeah I decided to suck it up and just to keep on plugging away at the conversion to fasm from my masm code. It&#39;s a hassle but the fasm compiler definatly seems to require you to be more specific about stuff which is something that I really appreciate.. Masm was awesome, but to me personally, I think it seems better for someone just getting their feet wet in assembly. <br /><br />I&#39;ve had years of just tinkering around in asm, but nothing of the sort of start to finish outright coding in asm. The experience I have had was mostly in 16bit dos stuff with interrupt vectors and basic simple stuff, and yes, my choice of assembler, was infact debug lol. It was HORRIBLE, I had to either learn how to count bytes and factor in opcode byte sizes so that my conditionals jumped to the right areas, or I had to fill in part of the code, see where the offset was, re-do the code from scratch again and use that offset.. Needless to say my progs were extremely small because of the hassle. In win32asm the experiences I have had mostly were disassembling online games to try to find packet encryption stuff to mimic a server (It was more for the challenge than anything, I bought every single one of those games) or to find hidden features. <br /><br />Masm seems like it&#39;d be really good for someone who has never even seen the 3 letter abreviation (sp?), jmp. As it allows people to focus on the language and less about the nitty gritty stuff.. Problem for me is, is at this point in my learning curve, I&#39;m past all that, it&#39;s the nity gritty stuff that I need to understand. And the nitty gritty stuff is done slightly different from one compiler to the next. And I feel if I stay in MASM I&#39;m limiting myself, because while I have no future plans to code in asm on Linux (I do know and use the OS on my other computer), the back-of-your-mind thought that you can write in it if you wanted is nice and comfy :P&nbsp; &nbsp;  I may even start to use the old-school call function instead of invoking stuff, just to really get into it :P&nbsp;  <br /><br />Now granted, I know MASM does support calls and stuff like that, but it seems like it mostly <em>encourages</em> focusing on just the language and leaving the details to itself, which is cool, I&#39;m not by any means knocking it, I knew going into writting this thread that choice of compiler is rather personal, and I think I got all the information neccessary to make an educated decision, so thanks very much guys, the input was extremly valuable! :)</div>
    <div class="meta">Posted on 2005-09-27 20:30:09 by EtErNiTy</div>
   </div>
  </div>
 </body>
</html>