<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>assembly function - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30268" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=30268">assembly function</a></p>
   <div class="post" id="post-213291">
    <div class="subject"><a href="#post-213291">assembly function</a></div>
    <div class="body">I am working on an assignment for my class. My C++ code calls the _Divide funtion to take in 2 values to divide and return into &#039;Result&#039;. To start I move -1 into eax. once I&#039;m done with the process, my eax keeps returning &#039;-1&#039; as the value. What could I be doing wrong. Here&#039;s my assem code<br /><br />public _Divide<br />.386<br />.model flat<br />.code<br />_Divide	proc<br />	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mov eax, -1<br />		mov ebx, 1<br /><br />		cdq<br />		idiv ebx<br />		ret<br />_Divide	endp<br />	end<br /><br />if you would need to see my C++ code please let me know.<br />Thanks</div>
    <div class="meta">Posted on 2010-10-05 11:18:32 by justbrianr</div>
   </div>
   <div class="post" id="post-213292">
    <div class="subject"><a href="#post-213292">Re: assembly function</a></div>
    <div class="body"><strong>justbrianr</strong>,<br /><br />You shouldn&#039;t be surprised, <strong>x/1=x</strong> for any reasonable <strong>x</strong>.</div>
    <div class="meta">Posted on 2010-10-05 11:28:48 by baldr</div>
   </div>
   <div class="post" id="post-213303">
    <div class="subject"><a href="#post-213303">Re: assembly function</a></div>
    <div class="body">We probably don&#039;t need to see your C++ code, but you need to pay attention to it! The assignment asks you to &quot;take in two values&quot;. How are you doing that? What &quot;type&quot; are the values? Then, in your asm function, you need to acquire those values - not just -1! Your code for &quot;idiv&quot; is correct, ASSuming signed integer types. The calling convention expects ebx to be preserved, so either preserve it (push/pop), or easier, use a register your function is allowed to trash - ecx would do nicely.<br /><br />If you need help doing some part of that, ask again.<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2010-10-06 14:15:37 by fbkotler</div>
   </div>
  </div>
 </body>
</html>