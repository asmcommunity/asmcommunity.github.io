<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>DDRAW  CreateSurface crushs my app what should i do ?? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14555" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=14555">DDRAW  CreateSurface crushs my app what should i do ??</a></p>
   <div class="post" id="post-112578">
    <div class="subject"><a href="#post-112578">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">It's crushing and i do not know what's wrong becouse all my previouse calls are DD_OK what should i do how to debug DirectDraw ??</div>
    <div class="meta">Posted on 2003-07-31 14:13:47 by AceEmbler</div>
   </div>
   <div class="post" id="post-112596">
    <div class="subject"><a href="#post-112596">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">Place some OutputdebugStringA calls arround and detect where exactly it is crashing, then deal with the DirectDraw's error code returned<br /><br />Output each parameter value and or structure contents and examine them as compared to what should be there... IMHO you &quot;think&quot; that they are ok but they are not ...obviousely since it crashes...<br /><br />Even if they can be annoying those clear/localized bugs are not big stuff, they are mainly becuse you did a typo error or because you do not clearly and exactly understand what the function does and/or should do...<br /><br />Logical errors are much more hard to find IMHO</div>
    <div class="meta">Posted on 2003-07-31 16:37:59 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-112656">
    <div class="subject"><a href="#post-112656">Re: DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body"><div class="quote"><br />It's crushing and i do not know what's wrong becouse all my previouse calls are DD_OK what should i do how to debug DirectDraw ?? </div><br /><br />Hi, AceEmbler!<br /><br />here is my proggy i'm writting, it has example of debugging DX7 app<br />it has console window, some debug macros, and can handle some DX error codes<br />may be it can help  :cool: <br /><br />hope my asm is beter than english :grin:</div>
    <div class="meta">Posted on 2003-08-01 05:53:11 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-114153">
    <div class="subject"><a href="#post-114153">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">It's good to be back :)<br />I was afk for a while so i couldn't post.<br /><br /><br />I still have not solved the problem. I dont know how to use S.T.A.S. example of debuging DX.<br /><br />I'm tired of this so please if someone can help me with this. I checked variables and structures before calling CreateSurface but all this stuff looks good for me.<br /><br />DX is such a pain for (DX + ASM) Beginers. <br /><br />I'm attaching some files for people who wants to help me<br />&quot;Remember to copy bitmap to use for the app.&quot;</div>
    <div class="meta">Posted on 2003-08-17 15:29:28 by AceEmbler</div>
   </div>
   <div class="post" id="post-114166">
    <div class="subject"><a href="#post-114166">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">Hi, <strong>AceEmbler</strong>!<br />I've had alot of problems at the beginning with DX<br />Then i understood that all the answers are in MS DX SDK (still C language)<br /><br />Your way of initializing DX when uMsg==WM_CHAR seems strange, I initialize DX just after CreateWindowEx.<br />After all, you need main loop with PeekMessage and draw routines.<br />(search the board, <strong>Scronty</strong> made many post about it)<br /><br />My &quot;debbugging&quot; is mDirect &amp; COMInvoke macros, they are calling Error_Test proc after invoking DX com.<br />(if ErrorTest = TRUE)<br />Error_Test looks through errors.lst file (i use MASM to generate it) and shows some info. For me it's enough.<br />You can use console (is now in DX window just press &quot;~&quot;) or commandline /CON to open console window.<br />This can show you some info, too<br /><br />I'm afraid my asm isn't a good example, but it works for me :) <br />I hope it'll work for you, too<br />Just remove everithing you don't need now. (and copy inc folder with my DX7 includes to your RadASM\inc)<br /><br />Any questions are welcome;)</div>
    <div class="meta">Posted on 2003-08-17 19:50:32 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-114167">
    <div class="subject"><a href="#post-114167">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">New version of my prog:</div>
    <div class="meta">Posted on 2003-08-17 19:54:26 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-114981">
    <div class="subject"><a href="#post-114981">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">That's a pity but youre dubugging stuf is useless for me becouse my app crushes while CreateSurface so i just dont know whats wrong but i know where.<br /><br />Can somebody give me the simplest example of displaying Bitmap using DirectDraw ??</div>
    <div class="meta">Posted on 2003-08-22 08:50:42 by AceEmbler</div>
   </div>
   <div class="post" id="post-115117">
    <div class="subject"><a href="#post-115117">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">OK i solved the problem as for now.<br /><br /><br /><br />shit but i found another one just few lines further. :(</div>
    <div class="meta">Posted on 2003-08-23 14:15:55 by AceEmbler</div>
   </div>
   <div class="post" id="post-115136">
    <div class="subject"><a href="#post-115136">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">OK,<br /><br />for others to learn let us know what was it :D<br /><br />and also tell us what is the new problem</div>
    <div class="meta">Posted on 2003-08-23 18:34:13 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-115303">
    <div class="subject"><a href="#post-115303">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">When i was invoking CreateSurface my DDSURFACEDESC2 struct was LOCAL when i changed it into global variable my app have not crushed :P.<br />( still dont know why )<br /><br />Right now my BltFast crushes my app :P. <br />But i dont have time to serch for the bugs. DD is such a pain that im going to write some tut about: how to display Bitmap with DD it will be after i will do this myself. :)</div>
    <div class="meta">Posted on 2003-08-24 16:16:07 by AceEmbler</div>
   </div>
   <div class="post" id="post-115305">
    <div class="subject"><a href="#post-115305">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">Hah<br /><br />DDraw is so damn simple that i do not get what can be considered so complicated about it<br /><br />Of course placing a global thingy on LOCAL (aka on a procedure's stack frame) never crossed my mind. <br /><br />LOCAL is actually  and i do not see how a global routine/method from directdraw interfaces can ever be assumed to acces YOUR ebp while running its own functions, this is just plain naive at last.... after all how are you telling it ebp+what? address ? eh?<br /><br />LOCAL is strictly for YOUR variables and stuff, never send them to API or even less to low level driver based routines like DirectDraw<br /><br />I am always amazed how newbies first start by &quot;organizing&quot; things, organization comes after many years of experience. Besides i am also amazed how newbies always push it to the limit thinking they will eventually get it by :P<br /><br />IMHO: Place all your DD structures and pointers and stuff in global variables, never pushit, always use small simple and stupid (if you like to call them like that) steps...and all will work ok<br /><br />I always did it like this and i never have had ANY problems with DirectDraw whatsoever<br /><br />Placing a bitmap in a surface is just as simple as it can get: <br />(ddraw helper includes from SDK/C+= do it like this also but hidden in some classes :D )<br /><br />1)Use LoadImageA with (LR_LoadFromFile) to load BMP, make an memory compatible DC for it , and select the bitmap into this GDI based  DC<br /><br />2)Create a surface with needed size, run ::GetDC Metod on this surface and use a GDI BitBlt to transfer the BMP from the GDI memory DC to the DC of the surface.<br /><br />3)Release Surface DC, then eventually release the GDI memory DC and the GDI Bitmap Handle<br /> you might want to skip releasing GDI structures is your Surface is in video memory because you will have to use them again and ::Restore method after and alt_tab in full screen mode (or when getting DDERR_SURFACELOST)<br /><br />You can now use standard DX operations on this surface like the ::Blt method<br /><br />But of course you HAVE to pushi it and try to use BltFast (because it sounds &quot;fast&quot;?) that is well documented in SDK to have some heavy limitations, and trust me is not &quot;that&quot; fast as you imagine...</div>
    <div class="meta">Posted on 2003-08-24 16:40:17 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-115817">
    <div class="subject"><a href="#post-115817">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">Finally I made it :grin:. There are still some bugs but the Bitmap is appearing.Can u tell me why this &quot;bugs&quot; are appearing. U will know what i mean when run my prog. Just press any key when the Window appears.</div>
    <div class="meta">Posted on 2003-08-27 15:22:27 by AceEmbler</div>
   </div>
   <div class="post" id="post-117866">
    <div class="subject"><a href="#post-117866">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body"><div class="quote"><br />Hah<br /><br />DDraw is so damn simple that i do not get what can be considered so complicated about it<br /><br /></div><br /><br />My two cents:<br /><br />Don't let anyone else tell you otherwise:  DirectDraw is hard.  If you don't get this stuff immediately, it doesn't mean you're slow and it doesn't mean you're not ready for Windows programming; it means your normal.  DirectX wasn't designed to be easy to use.  It was designed to be fast while allowing Windows to maintain some semblance of control over the system.  DirectX has gotten much better in recent recent versions, but it still isn't a trivial thing to pick up.  Not to mention writing it using 32 bit asm.<br /><br />Sliver</div>
    <div class="meta">Posted on 2003-09-12 12:22:29 by Sliver</div>
   </div>
   <div class="post" id="post-117903">
    <div class="subject"><a href="#post-117903">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">Can you give me one example <br />for what is &quot;so hard&quot; about DirectDraw in &quot;older versions&quot; (aka DX5,6,7) in asm ?<br /><br />It is just pushing parameters and calling some API functions IMHO<br /><br />the extra thingy i have to do every time is:<br /><pre><code><br /><br />mov eax,pThisObject<br />push eax<br />mov eax,&#91;eax&#93;<br />call &#91;eax+ThisObjectMethod&#93;<br /><br /></code></pre><br /><br />Is hardly a &quot;complicated and / or hard stuff ...<br /><br />Of course you must understand parameters and how to use the API without wrongly assuming things,<br />but that is an issue with any API. <br />:stupid:</div>
    <div class="meta">Posted on 2003-09-12 18:04:54 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-118020">
    <div class="subject"><a href="#post-118020">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body">DirectX is sux documented. And i think this is the only one difficulty but a huge one. It's my own opinion so correct me if i'm wrong:tongue:</div>
    <div class="meta">Posted on 2003-09-13 18:30:48 by AceEmbler</div>
   </div>
   <div class="post" id="post-118150">
    <div class="subject"><a href="#post-118150">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body"><div class="quote"><br />DirectX is sux documented. And i think this is the only one difficulty but a huge one. It's my own opinion so correct me if i'm wrong:tongue: </div><br />Most of DirectX stuff is commented in DirectX SDK (for C &amp; VB) and MSDN, though newer versions of DX SDK tends to C++. You'd better to find DX7/DX6 ones.<br />Other things can be found in *.h files...<br /><br />Also SDK includes some examples how to do somthing &quot;step by step&quot;.<br />C can be translated to asm, you just need some macros to get life easier. ;)</div>
    <div class="meta">Posted on 2003-09-15 00:44:40 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-118184">
    <div class="subject"><a href="#post-118184">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body"><div class="quote"><br />Can you give me one example <br />for what is &quot;so hard&quot; about DirectDraw in &quot;older versions&quot; (aka DX5,6,7) in asm ?<br /><br />....<br /><br />Of course you must understand parameters and how to use the API without wrongly assuming things, but that is an issue with any API. <br />:stupid: </div><br /><br />Why is that taken for granted when you start?  So shall we assume everyone evntering the game programming field has a background in COM? Or that everyone know the correct way to draw a line across the screen?  Or how to load a *.bmp? Maybe how to draw text? <br /><br />It all depends on what resources are available to you when you start...<br />Don't assume everyone starts at the same place... Because then you'll be sadly mistaken...<br /><br />I'm gonna make an assumtion that we're not all as quick as you are and leave it at that... How fortunate for you...<br /><br />Sliver</div>
    <div class="meta">Posted on 2003-09-15 05:40:47 by Sliver</div>
   </div>
   <div class="post" id="post-118281">
    <div class="subject"><a href="#post-118281">DDRAW  CreateSurface crushs my app what should i do ??</a></div>
    <div class="body"><div class="quote"><br />It all depends on what resources are available to you when you start...</div><br />Yes, <strong>Sliver </strong>, I have to agree with you.<br />I've got some background programming... lines, text...<br />But about COM, it would be good if I understand this :)<br />I'm just able to write some macro and... forgot about it.<br /><br />Also there are no tutors about programming DX in asm available in inet...<br />May be just ones that shows how to invoke DX methods from asm.<br />It's goot that I know how to draw char, but I'm not sure is it possible to find some example with google.:confused: <br />But the other side this isn't programming in DirectX, this is programming gfx with asm</div>
    <div class="meta">Posted on 2003-09-15 21:03:01 by S.T.A.S.</div>
   </div>
   <div class="post" id="post-120624">
    <div class="subject"><a href="#post-120624">...</a></div>
    <div class="body">dx (especially directdraw7!) is not so hard i think...<br /><br />it is well documented too (just read it very carefully).<br /><br />everything dx-related keep in global variables, because dx does some shit with stack.<br /><br />of course documentation is in c++ (or vb), but the syntax is not complicated, so u should understand the examples.<br /><br />heh, this 'shotty documentation' stuff reminds me of ACM. .. if u think that dx is not documented well enough, then try ACM (microsoft's audio compression manager - can bre found in multimedia.chm in platformsdk's helps) - it has the most shitty documentation i have ever seen.<br /><br />...<br /><br />learn some basics of c++ (the syntax for example), and your problems will solve.<br /><br />cya<br /><br />any questions about dx7, (or acm, or dx8's DirectShow, or whatever windows OS related):http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=e8bce7295bb9b5527c818551b9421bb2</div>
    <div class="meta">Posted on 2003-10-06 10:58:56 by ti_mo_n</div>
   </div>
  </div>
 </body>
</html>