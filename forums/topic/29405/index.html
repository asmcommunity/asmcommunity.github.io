<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>A way to make Assembly more programmer-friendly? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29405" />
    <link rel="next" href="../?id=29405&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=29405">A way to make Assembly more programmer-friendly?</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29405&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29405&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29405" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29405&amp;page=2">&gt;</a><a href="../?id=29405&amp;page=2">&raquo;</a></form>   <div class="post" id="post-207571">
    <div class="subject"><a href="#post-207571">A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">I have been thinking that since I started developing application for the industry rather than working on hobby programs, I have literally stopped programming with Assembly. The only reason for this is the development time. Now what if we had a high level assembly and I don&#039;t mean like HLA and OO Assembly. I am not talking about architecture and etc. I mean somehow making the assembly language more useful and faster and easier to use. So say you could program like this:<br /><br />EAX = EBX++<br />if (PointsToMemory(EAX) == FALSE){<br />&nbsp; EAX = Pointer(EBX);<br />&nbsp; Image = EAX.Image;<br />&nbsp; EAX.SaveToFile(Contentsof(ECX));<br />}<br /><br />I think you get the point. Somehow a mixture of an advance preprocessor + a high level framework + Object Oriented Programming.<br /><br />So basically instead of doing all Includes and etc and seeing what header files you have to include, you should leave that to the preprocessor. The preprocessor will take care of the includes. In this age, I don&#039;t think it is reasonable for a developer to worry about includes and etc. I am sure there is a better way of doing these small things which cause a lot of problems to developers. So we won&#039;t see anymore people in the 21st century asking how they can use printf(). I mean come on, the whole world is moving on and still we have to worry whether we want to link to this library or that. This sort of stuff has to have already been taken care of for the programmer before he starts coding with Assembly.</div>
    <div class="meta">Posted on 2009-05-11 10:33:51 by XCHG</div>
   </div>
   <div class="post" id="post-207572">
    <div class="subject"><a href="#post-207572">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">Why bother with this, since you&#039;re basically going to design a variant of C without the benefits of register allocation etc? You&#039;ve already moved away from the one line = one instruction WYCIWYG that <strong>can</strong> be a benefit in assembly.<br /></div>
    <div class="meta">Posted on 2009-05-11 10:40:47 by f0dder</div>
   </div>
   <div class="post" id="post-207573">
    <div class="subject"><a href="#post-207573">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">The difference in this dialect would be that you are writing a high-level assembly by having direct access to the registers. And the framework on top could be a series of highly optimized assembly routines that you will just call. So you ARE using assembly but in a modern way.</div>
    <div class="meta">Posted on 2009-05-11 10:57:35 by XCHG</div>
   </div>
   <div class="post" id="post-207574">
    <div class="subject"><a href="#post-207574">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">What do you think of C-- XCHG ?<br />http://www.goosee.com/cmm/<br /><br />I would also add that I have been reading every assembly output of every C program I write and I&#039;m usually satisfied by the quality of it.<br /><br />- good register allocation<br />- pro use of local variables on the stack<br />- no need for stack frames<br />- can inline the code in the same module pretty well<br />- if you have link time code generation, it can inline functions from other modules<br />- good choice of instructions in general<br />- good switch<br />- bitfields/unions/structures are very decent<br /><br />If you get used to read the generated code, it&#039;s almost like writing the assembly code yourself since you can predict what kind of code is made in advance. <br />Even after said all that, I don&#039;t believe that a compiler can outperform a human that knows what he&#039;s doing. Heck, if the compiler&#039;s better than me, i&#039;ll steal his code :D<br />95 % of the programmers you see will tell you that a compiler writes better code than a human. I&#039;m annoyed by that comment everytime because that&#039;s simply not true. People who say that have never touched assembly but that phrase alone is enough to keep them from trying it.<br /><br /><br /></div>
    <div class="meta">Posted on 2009-05-11 11:24:10 by ChaperonNoir</div>
   </div>
   <div class="post" id="post-207575">
    <div class="subject"><a href="#post-207575">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote"><br />What do you think of C-- XCHG ?<br />http://www.goosee.com/cmm/<br /><br />I would also add that I have been reading every assembly output of every C program I write and I&#039;m usually satisfied by the quality of it.<br /><br />- good register allocation<br />- pro use of local variables on the stack<br />- no need for stack frames<br />- can inline the code in the same module pretty well<br />- if you have link time code generation, it can inline functions from other modules<br />- good choice of instructions in general<br />- good switch<br />- bitfields/unions/structures are very decent<br /><br />If you get used to read the generated code, it&#039;s almost like writing the assembly code yourself since you can predict what kind of code is made in advance. <br />Even after said all that, I don&#039;t believe that a compiler can outperform a human that knows what he&#039;s doing. Heck, if the compiler&#039;s better than me, i&#039;ll steal his code :D<br />95 % of the programmers you see will tell you that a compiler writes better code than a human. I&#039;m annoyed by that comment everytime because that&#039;s simply not true. People who say that have never touched assembly but that phrase alone is enough to keep them from trying it.<br /></div><br /><br />Oh no my point isn&#039;t this. My point is to make Assembly mainstream. Something that you would pick up if you want to write a commercial application quickly. So things that generally tidy up the syntax without going too far and without changing the language too much to make you feel like you are coding in another language.</div>
    <div class="meta">Posted on 2009-05-11 11:31:07 by XCHG</div>
   </div>
   <div class="post" id="post-207578">
    <div class="subject"><a href="#post-207578">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">HLA, C-- . Otherwise, MASM is pretty damn awesome, just look at this MASM code:<br /><br /><pre><code><br /><br /><br />main proc<br />	local fileName<br />	<br />	local someFunc:IFUNC(hWnd,txt,capt,utype)<br />	local file1,fileSize<br />	local count1,tmp1<br />	local allStrings<br />	<br />	<br />	print &quot;starting up&quot;<br />	msgbox &quot;blah&quot;<br />	<br />	mov fileName,FetchFileData(&quot;configFile.txt&quot;)<br />	prints fileName ; VKDebug PrintStringByAddr<br />	<br />	mov file1,fopen(fileName,&quot;rb&quot;)<br />	mov fileSize,fsize(file1)<br />	<br />	trace &quot;Size of file %s is %d&quot;,fileName,fileSize<br />	<br />	mov allStrings,new(ObjVector)<br />	set allStrings as ObjVector<br />	<br />	fread file1,addr count1,4<br />	<br />	xor ecx,ecx<br />	.while ecx&lt;count1<br />		fread file1,addr tmp1,4<br />		mov eax,malloc(tmp1)<br />		fread file1,eax,tmp1<br />		<br />		pcall allStrings.add,eax<br />		<br />		inc ecx<br />	.endw<br />	<br />	fclose file1<br />	<br />	<br />	foreach allStrings, prints EDX<br />	<br />	<br />	mov someFunc,MessageBox<br />	<br />	invoke someFunc,0,T(&quot;blah2&quot;),0,0<br />	<br />	<br />	invoke strlen,fileName<br />	DumpDataToFile &quot;log.txt&quot;,fileName,eax<br />	<br />	ret<br />main endp<br /><br /><br />...<br />class VarVector,,C++ compatible<br />	void insert:ObjPtr,ObjSize<br />	void delete:ObjPtr,ObjSize<br />	<br />	void lock:<br />	void unlock:<br />	<br />	char isdead<br />	char locked<br />	char lock_insert<br />	char lock_delete<br />	<br />	<br />	long MyData<br />	long BytesTaken<br />	long PagesTaken<br />	<br />	long _data2<br />	long _data2_len<br />	long _data3<br />	long _data3_len<br />	<br />	void _FlushInserts:<br />	void _FlushDeletes:<br />endclass<br /></code></pre><br /><br />It&#039;s only FPU stuff and multidimensional arrays, where asm can be a pain. </div>
    <div class="meta">Posted on 2009-05-11 13:42:34 by Ultrano</div>
   </div>
   <div class="post" id="post-207579">
    <div class="subject"><a href="#post-207579">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">You wish to make ASM mainstream again, but in order to do so, you need to change it so that it is everything but ASM?<br /><br />Sounds like a bad case of nostalgia :lol:</div>
    <div class="meta">Posted on 2009-05-11 14:04:03 by SpooK</div>
   </div>
   <div class="post" id="post-207581">
    <div class="subject"><a href="#post-207581">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote">95 % of the programmers you see will tell you that a compiler writes better code than a human. I&#039;m annoyed by that comment everytime because that&#039;s simply not true. People who say that have never touched assembly but that phrase alone is enough to keep them from trying it.</div><br /><br />Well, I wouldn&#039;t be surprised if 95% of all programmers won&#039;t be able to write better code than a compiler, so in a way it&#039;s almost true :)<br />Writing code that works in assembly is one thing, but being able to optimize it to make the CPU perform as fast as possible, that&#039;s something completely different altogether.</div>
    <div class="meta">Posted on 2009-05-12 03:14:55 by Scali</div>
   </div>
   <div class="post" id="post-207583">
    <div class="subject"><a href="#post-207583">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote"><br />HLA, C-- . Otherwise, MASM is pretty damn awesome, just look at this MASM code:<br /><br /><pre><code><br /><br /><br />main proc<br />	local fileName<br />	<br />	local someFunc:IFUNC(hWnd,txt,capt,utype)<br />	local file1,fileSize<br />	local count1,tmp1<br />	local allStrings<br />	<br />	<br />	print &quot;starting up&quot;<br />	msgbox &quot;blah&quot;<br />	<br />	mov fileName,FetchFileData(&quot;configFile.txt&quot;)<br />	prints fileName ; VKDebug PrintStringByAddr<br />	<br />	mov file1,fopen(fileName,&quot;rb&quot;)<br />	mov fileSize,fsize(file1)<br />	<br />	trace &quot;Size of file %s is %d&quot;,fileName,fileSize<br />	<br />	mov allStrings,new(ObjVector)<br />	set allStrings as ObjVector<br />	<br />	fread file1,addr count1,4<br />	<br />	xor ecx,ecx<br />	.while ecx&lt;count1<br />		fread file1,addr tmp1,4<br />		mov eax,malloc(tmp1)<br />		fread file1,eax,tmp1<br />		<br />		pcall allStrings.add,eax<br />		<br />		inc ecx<br />	.endw<br />	<br />	fclose file1<br />	<br />	<br />	foreach allStrings, prints EDX<br />	<br />	<br />	mov someFunc,MessageBox<br />	<br />	invoke someFunc,0,T(&quot;blah2&quot;),0,0<br />	<br />	<br />	invoke strlen,fileName<br />	DumpDataToFile &quot;log.txt&quot;,fileName,eax<br />	<br />	ret<br />main endp<br /><br /><br />...<br />class VarVector,,C++ compatible<br />	void insert:ObjPtr,ObjSize<br />	void delete:ObjPtr,ObjSize<br />	<br />	void lock:<br />	void unlock:<br />	<br />	char isdead<br />	char locked<br />	char lock_insert<br />	char lock_delete<br />	<br />	<br />	long MyData<br />	long BytesTaken<br />	long PagesTaken<br />	<br />	long _data2<br />	long _data2_len<br />	long _data3<br />	long _data3_len<br />	<br />	void _FlushInserts:<br />	void _FlushDeletes:<br />endclass<br /></code></pre><br /><br />It&#039;s only FPU stuff and multidimensional arrays, where asm can be a pain. <br /></div><br /><br />That&#039;s a good example of what I was thinking except that is still too long to type. Things like typing void this and void that in separate lines could be made easier by doinig void this, that; Things like this could make programming so much easier although they are just macros.</div>
    <div class="meta">Posted on 2009-05-12 06:01:07 by XCHG</div>
   </div>
   <div class="post" id="post-207589">
    <div class="subject"><a href="#post-207589">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">I think all of us know about the fact that that Assembly jobs are hard to find, people who create programs from scratch in Assembly for the end-user; are hard to find. And by programs I don&#039;t mean calculators and hobby programs. Something like Open Office for example. Things like that are bothering me about Assembly. I personally will never pick Assembly as a commercial language over other languages. I know some might argue that Assembly is not supposed to be used in that way but that&#039;s my main point of argument. A way to make it more mainstream and programmer-friendly as the title says so change it in a way that if you are asked to create a program really fast for a client, you pick Assembly over C#.NET or Delphi/C++ Builder for example. Perhaps a Framework? That&#039;s the best thing that comes to my head.</div>
    <div class="meta">Posted on 2009-05-13 05:32:53 by XCHG</div>
   </div>
   <div class="post" id="post-207590">
    <div class="subject"><a href="#post-207590">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">Well, since C++ and Delphi both allow you to use inline assembly, doesn&#039;t that already give you what you want?<br />You can use an IDE to quickly design any windows, dialogs and things... and when you need assembly, you can just put it inline where you want. You use the highlevel language when you want quick and easy development.</div>
    <div class="meta">Posted on 2009-05-13 06:14:00 by Scali</div>
   </div>
   <div class="post" id="post-207591">
    <div class="subject"><a href="#post-207591">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote"><br />Well, since C++ and Delphi both allow you to use inline assembly, doesn&#039;t that already give you what you want?<br />You can use an IDE to quickly design any windows, dialogs and things... and when you need assembly, you can just put it inline where you want. You use the highlevel language when you want quick and easy development.<br /></div><br />Not really. I will code in Delphi if I pick Delphi and if there is some part of code is running REALLY slow, I <em>might</em> use some inline Assembly to optimize it. Because to me writing Assembly code takes longer than writing Delphi.<br /><br />Now imaging if you could do this:<br /><br /><pre><code>ECX = EBX + EDX * ECX + 3 / strlen(EAX);</code></pre><br /><br />This might seem not that useful. Well yeah it is not useful but my point is that small things in programming sometimes can have a big impact on the productivity of the programmer and his effectiveness, don&#039;t you think?<br /><br />So if we had for example a framework to build on, I think it would be so much better. Am I the only person who thinks like this? Come onnnnnnnnn.</div>
    <div class="meta">Posted on 2009-05-13 06:31:43 by XCHG</div>
   </div>
   <div class="post" id="post-207592">
    <div class="subject"><a href="#post-207592">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">So generally, I think a combination of Framework + adding tons of macros and putting them into the framework + a kickarse IDE would make Assembly really useful in the real-world for commercial applications.</div>
    <div class="meta">Posted on 2009-05-13 06:33:52 by XCHG</div>
   </div>
   <div class="post" id="post-207593">
    <div class="subject"><a href="#post-207593">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">Sounds like OA32/RA :)</div>
    <div class="meta">Posted on 2009-05-13 07:32:02 by Homer</div>
   </div>
   <div class="post" id="post-207594">
    <div class="subject"><a href="#post-207594">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">Yeah Homer although RadASM is RAD compared to not having an IDE at all but it is RSD (Really Slow Development) compared to a commercial IDE in my opinion. I mean it&#039;s great but not good enough. God bless OA32 though.</div>
    <div class="meta">Posted on 2009-05-13 07:37:24 by XCHG</div>
   </div>
   <div class="post" id="post-207596">
    <div class="subject"><a href="#post-207596">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote"><br />Now imaging if you could do this:<br /><br /><pre><code>ECX = EBX + EDX * ECX + 3 / strlen(EAX);</code></pre><br /></div><br /><br />Yea well, add some symbolic names for the registers, and that&#039;s EXACTLY what Delphi or C++ will do for you.<br />Besides, why would you want that, instead of just:<br /><pre><code>c = b + d * c + 3 / strlen(a);</code></pre><br />Why would you want to have the actual register names? Whatever registers the compiler picks will be fine.</div>
    <div class="meta">Posted on 2009-05-13 08:16:13 by Scali</div>
   </div>
   <div class="post" id="post-207597">
    <div class="subject"><a href="#post-207597">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body">Maybe that wasn&#039;t a good example but the reason is that you can never be sure that the compiler is going to pick a register to do these calculations or not even if you ask it to. It has the right to ignore your inputs about that, isn&#039;t that right? I don&#039;t want to get too abstract with the details to be honest I just need to know why you guys think (if at all) that Assembly is really not chose for majority of commercial applications out in stores today?<br /><br />If assembly is going to be used just for heavily optimized parts of high level language programs, then with the speed of improvements of hardware, soon Assembly is going to be phased out completely and be a memory in a couple of years. Hardware is becoming cheaper and cheaper every day. I don&#039;t think it&#039;s going to be so important for a 3D engine in about 20 years for example if it calculates the distance between a point and a line in 2 clock cycles less than the equivalent C code for example.<br /><br />So basically my point of view is not from the performance side of things.</div>
    <div class="meta">Posted on 2009-05-13 08:27:10 by XCHG</div>
   </div>
   <div class="post" id="post-207598">
    <div class="subject"><a href="#post-207598">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote">Why would you want to have the actual register names? Whatever registers the compiler picks will be fine.</div>Yeah, at least for trivial code like this - and when you need überspeed and hand allocation, just <em>how</em> often do you need to call external routines? Also, you tend to need to interleave instructions, which means you can&#039;t use the highlevel assembly construct anyway.<br /><br />The idea seems entirely pointless to me. You&#039;d only find a handful of niche developer who think this could be a good idea... most will prefer either having a strong static typed language that can detect a lot of problems at compile-time (and offers power static analysis), or a dynamic language where type information can be determined at runtime. Assembly falls flat between those two chairs (some assemblers does at least support types, but then you&#039;re stuck with retard header files that assumes everything is a DWORD).<br /><br />If you think static typing is a bad thing, you&#039;ve probably spent too much time writing boring code that does little but interface with the PlatformSDK... which is a prime example of a package that is hellish to use because of it&#039;s legacy, and could do with a nice rewrite - you <strong>do</strong> need an insane amount of typecasting all over the place when using the PSDK in anything higher but C.</div>
    <div class="meta">Posted on 2009-05-13 08:31:12 by f0dder</div>
   </div>
   <div class="post" id="post-207599">
    <div class="subject"><a href="#post-207599">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote">Now imaging if you could do this:<br /><br /><pre><code>ECX = EBX + EDX * ECX + 3 / strlen(EAX);</code></pre><br /><br />This might seem not that useful. Well yeah it is not useful but my point is that small things in programming sometimes can have a big impact on the productivity of the programmer and his effectiveness, don&#039;t you think?<br /></div><br /><br />strlen has side-effects (meaning it may change the volatile registers eax, ecx, edx) which this language does not make the programmer aware of. This will make the code very hard to read, because you, as a programmer, have to be aware of all these side-effects. That is why compilers, like Scali said, are better off to work with variables, not registers directly. The compiler should figure out best which registers to spill the variables onto and when - if you don&#039;t like that, then use inline asm.</div>
    <div class="meta">Posted on 2009-05-13 08:51:11 by comrade</div>
   </div>
   <div class="post" id="post-207600">
    <div class="subject"><a href="#post-207600">Re: A way to make Assembly more programmer-friendly?</a></div>
    <div class="body"><div class="quote"><br /><div class="quote">Now imaging if you could do this:<br /><br /><pre><code>ECX = EBX + EDX * ECX + 3 / strlen(EAX);</code></pre><br /><br />This might seem not that useful. Well yeah it is not useful but my point is that small things in programming sometimes can have a big impact on the productivity of the programmer and his effectiveness, don&#039;t you think?<br /></div><br /><br />strlen has side-effects (meaning it may change the volatile registers eax, ecx, edx) which this language does not make the programmer aware of. This will make the code very hard to read, because you, as a programmer, have to be aware of all these side-effects. That is why compilers, like Scali said, are better off to work with variables, not registers directly. The compiler should figure out best which registers to spill the variables onto and when - if you don&#039;t like that, then use inline asm.<br /></div><br /><br />Are you referring to a simple PUSH and POP? I mean that could be taken care of if the coder(s) of the framework know what they are doing.</div>
    <div class="meta">Posted on 2009-05-13 08:59:41 by XCHG</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29405&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29405&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29405" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29405&amp;page=2">&gt;</a><a href="../?id=29405&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>