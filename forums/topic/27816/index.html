<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>mbr, thunk - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27816" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27816">mbr, thunk</a></p>
   <div class="post" id="post-198168">
    <div class="subject"><a href="#post-198168">mbr, thunk</a></div>
    <div class="body">hi,

i'm looking for a way to read hd mbr under w95(i'm coding a little utility to read partitions data). 
I've already try in several way using DeviceIOControl simulating interrupt calls but none of these methods work for hd. They work only for diskette or hd absolute logical sectors reading.

After some days navigating in the net i've found a ms article that explain a workaround for this: talk about using a 'thunk' trik: application must call a 32bit dll that call a 16bit dll that perform the mbr reading.

So, i'm looking for a thunk example, with dll32 & dll16 asm code.

someone know if ther's any other easier way to read mbr under w95 ?
Could someone indicate me some example or some link for a thunk ?

infinite thx    angelo</div>
    <div class="meta">Posted on 2001-04-27 02:21:00 by angelo</div>
   </div>
   <div class="post" id="post-198169">
    <div class="subject"><a href="#post-198169">mbr, thunk</a></div>
    <div class="body">Hey,

I'm not sure, but isn't your MBR stored at a specific offset?  If it is, all you gotta do is go there and read it.</div>
    <div class="meta">Posted on 2001-04-27 11:11:00 by *unknown*</div>
   </div>
  </div>
 </body>
</html>