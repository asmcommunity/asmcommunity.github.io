<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>To Hutch - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5794" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=5794">To Hutch</a></p>
   <div class="post" id="post-41424">
    <div class="subject"><a href="#post-41424">To Hutch</a></div>
    <div class="body">Hey Hutch, had a question about the package thus far.<br /><br />Heh, I dont really want to start a HLL flame war here so be nice folks!<br /><br />Was curious as to if (for some of us that actually dont mind HLLs) that a new macro type could be introduced.  Was thinking along the lines of operators.  It would effectively split the line at the operator and you could have two globals to access them (maybe @LEFT and @RIGHT or something) like so:<br /><br /><pre><code><br />&#58;= OPERATOR<br />     invoke @RIGHT<br />     mov @LEFT, eax<br />ENDO<br /></code></pre><br /><br />Would allow some really cool stuff.  I guess the one above allows syntax like.<br /><br />hDC := GetDC, hWnd<br /><br />Just a thought.  I always wanted a language where you could define you own ops.  C++ overloading is close, but you cant define new ones...</div>
    <div class="meta">Posted on 2002-06-04 15:16:26 by Graebel</div>
   </div>
   <div class="post" id="post-41471">
    <div class="subject"><a href="#post-41471">To Hutch</a></div>
    <div class="body">I noticed NaN using something just like this in his code. I don't think its a bad idea either... when I switch working from HLL to asm I forget to put the &quot;mov blah, eax&quot; in there <br /><br />(And when I switch FROM asm, I forget to put the &quot;retval =&quot; before the call too).<br /><br />Since it's all the same code, its just a matter of taste IMHO. It's quite readable, just its not my taste.<br /><br />Hey, if I'm gonna be the weird guy in the office who made the effort and actually writes in assembler, am I gonna make it easier for the HLL wonks to read my code?  ;-)</div>
    <div class="meta">Posted on 2002-06-04 19:24:55 by Ernie</div>
   </div>
   <div class="post" id="post-41473">
    <div class="subject"><a href="#post-41473">To Hutch</a></div>
    <div class="body">in Forth you can define your own ops and language words that are primitives (have same power as any language word) from.... 1979 .. i guess ;)<br /><br />maybe C++ will evolve to that in 2050 ? ;)<br /><br />PS<br />=========<br />At the same time (1979) old FIG-Forth had a Virtual Machine made of only 3-4 asm instructions and all other primitives  (i gues basic 10) can be implemented in Forth also... someday near our days they re invented Java<br /><br />Ah and it also has OOP, its a compiler its an interpreter and.. has inline ASM and... etc etc all in about 4K of code<br /><br />standard 8086 ASM with using OOP Forth source code has only 64 lines of code or 2 pages of text</div>
    <div class="meta">Posted on 2002-06-04 19:28:37 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-41486">
    <div class="subject"><a href="#post-41486">To Hutch</a></div>
    <div class="body">I use the following macro...<br /><pre><code><br />$Invoke MACRO Func,args&#58;VAR<br />IFB args<br />  Invoke Func<br />ELSE<br />  Invoke Func,args<br />ENDIF<br />  EXITM &lt;eax&gt;<br />ENDM<br /></code></pre><br /><br />This was based on NaN's $METHOD macro which I realized was a plain cool way of doing things.<br /><br />It's done this way:<br />;hDC=GetDC(hWnd);<br />mov hDC,$Invoke(GetDC,hWnd)<br /><br />As for an 'OPERATOR' macro.... well that depends on whether MS will add such a macro to ml.exe...<br />I believe hutch has decided to always pack masm v.6.14 with all future releases of the MASM32 package but I'm not sure.<br /><br />PS<br /><div class="quote"><br /><br />PS<br />=========<br />At the same time (1979) old FIG-Forth had a Virtual Machine made of only 3-4 asm instructions and all other primitives  (i gues basic 10) can be implemented in Forth also... someday near our days they re invented Java<br /><br />Ah and it also has OOP, its a compiler its an interpreter and.. has inline ASM and... etc etc all in about 4K of code<br /><br />standard 8086 ASM with using OOP Forth source code has only 64 lines of code or 2 pages of text </div><br /><br />At approx. the same time too (late 70's IIRC) Infocom was converting Zork to the Apple ][... since the original Zork was for a UNIX computer, they had to chop off some of the original Zork, and implement a virtual computer on the Apple ][ which ran a LISP-like language they developed on UNIX specifically for Zork.  Imagine that: cramming several hundred kilobytes of programming into a 32Kb computer.  Zork's VM's words were 5-bits just to compress the data (so three words fit into 2 bytes).<br /><br />So basically a virtual computer is rather oldish concept, except that they just didn't call it a virtual machine then.  So no one remembers and they think 'the virtual machine concept is new'.</div>
    <div class="meta">Posted on 2002-06-04 22:06:44 by AmkG</div>
   </div>
   <div class="post" id="post-41510">
    <div class="subject"><a href="#post-41510">To Hutch</a></div>
    <div class="body">Using a version of NaN's @invoke macro named FUNC, you can do the following,<br /><br />mov hDC, FUNC(GetDC, hWnd)<br /><br />Looks like an ASM solution to me. :)<br /><br />The := is a Pascal operator from memory for assignment.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-06-05 02:56:50 by hutch--</div>
   </div>
   <div class="post" id="post-41512">
    <div class="subject"><a href="#post-41512">To Hutch</a></div>
    <div class="body">Maybe someone can do a preprocessor for these kind of things.<br />I'm thinking, the syntax would be something like:<br /><br />'*' OPERATOR a,b<br /> mov eax,a<br /> imul eax,b<br /> EXITM &lt;eax&gt;<br />ENDM<br /><br />However, that would make coding hard since you don't know which registers are used and such.</div>
    <div class="meta">Posted on 2002-06-05 03:52:16 by gliptic</div>
   </div>
   <div class="post" id="post-41667">
    <div class="subject"><a href="#post-41667">To Hutch</a></div>
    <div class="body">But macros ARE the pre-processor for asm.<br /><br />I just wrote a nice customiseable asm prgram for an embedded app... not a single direct line of code in the whole .asm file. It's all equates and macro invocations.<br /><br />Now even dumb people can custom compile my code for special features.</div>
    <div class="meta">Posted on 2002-06-05 21:59:34 by Ernie</div>
   </div>
   <div class="post" id="post-41670">
    <div class="subject"><a href="#post-41670">To Hutch</a></div>
    <div class="body">Heh, you learn something new every day...<br /><br />I've been thu the Macro section of the MASM ref a 100 times now, and never came across (nor thought of) defining an OPERATOR..<br /><br />Pretty cool, i have to say... ;)<br /><br />I need to piddle a bit with this new idea... but i can see it cleaning up the user interface with COM/OOP very nicely ;)<br /><br />Thanx for the thought Graebel!</div>
    <div class="meta">Posted on 2002-06-05 22:16:13 by NaN</div>
   </div>
   <div class="post" id="post-41695">
    <div class="subject"><a href="#post-41695">To Hutch</a></div>
    <div class="body">The problem I see with defining operators is that MASM filters the characters that you can use so most of the common ones that you can type in from a keyboard give you a syntax error or an invalid character when you try and define them.<br /><br />This basically leaves you with words only which will not deliver the defined operators required. Its an interesting idea though but probably only possible with a seperate preprocessor similar to the recent work by Randy Hyde.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-06-06 03:08:46 by hutch--</div>
   </div>
   <div class="post" id="post-41697">
    <div class="subject"><a href="#post-41697">To Hutch</a></div>
    <div class="body">If you write a sort of &quot;preprocessor&quot;, wich parses the ASM file before giving it to MASM, your problem is done. Just parse the ASM source, replace the operator stuff with the needed code, save it as a tmp file and assemble this one. The source will stay the same... only the assembled file is another :)</div>
    <div class="meta">Posted on 2002-06-06 03:17:50 by bazik</div>
   </div>
  </div>
 </body>
</html>