<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>trying to discribe &quot;What is a CALLBACK Function&quot; - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3758" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3758">trying to discribe &quot;What is a CALLBACK Function&quot;</a></p>
   <div class="post" id="post-25270">
    <div class="subject"><a href="#post-25270">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Hey, All<br />I am trying to discribe &quot;What is a CALLBACK Function&quot;, and the<br />best I can come up with is:<br /><br />Windows is Event driven, in other words; The Main Windows Program<br />(WinMain) posts or sends a message requesting that an <br />action take place, If at that time the Action could not be completed<br />for any of many possible reasons then the WinMain Function will continue<br />to &quot;CALLBACK&quot; the &quot;Message Handling&quot; Function/Procedure until the <br />Action is either processed or a message is sent to stop trying.<br /><br />Is this anywhere near accurate or complete ???<br /><br />Comments ???<br /><br />Thanks, <br />Brad</div>
    <div class="meta">Posted on 2002-02-21 02:51:25 by Brad</div>
   </div>
   <div class="post" id="post-25288">
    <div class="subject"><a href="#post-25288">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Forum BenchMarks :grin: <br /><br />Hey, All<br /><br />I realize that this question is NOT really an Assembley related<br />question---however it IS a Win32 related question.<br /><br />I posted this &quot;Windows Programming Theory&quot; Question<br />at two excellent Forums, and so far the &quot;BenchMarks&quot; are:<br /><br />BenchMarks:    For Answers/Comments<br />   <br />       Win32ASM           0<br />       PowerBASIC        2<br /><br /><br /><br />:grin: <br />B</div>
    <div class="meta">Posted on 2002-02-21 07:03:16 by Brad</div>
   </div>
   <div class="post" id="post-25293">
    <div class="subject"><a href="#post-25293">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Brad, your question is not specific to Win32asm, whats more a quick google search will give you plenty of answers.<br />If you can't be bothered with google for what ever reason, I'm sure MSDN will also tell you exactly what a callback function is, and of course in MS windows, who is better to describe the &quot;idea&quot; better than Bill Gates and his cronies themselves?<br /><br />What is more, the idea that you are trying to prompt for a response by comparing this message board to others is quite transparent as a method of gaining information (and often refered to as trolling I believe) is somewhat insulting.<br /><br />If you really want to describe some Windows functionality (for what I can only presume is a piece of homework, why else would you need an accurate description of a well documented feature in your own words?) I can only suggest that you read a book on the subject.<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-02-21 08:00:54 by Mirno</div>
   </div>
   <div class="post" id="post-25295">
    <div class="subject"><a href="#post-25295">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Mirno,<br /><br />Look!!!  You Guy's are &quot;Brillant Genius's&quot;<br /><br />I know any answer I would get here---would be a LOT better<br />than from google or MSDN :)<br /><br />Wasn't trying to compare----I'm already sold!!!<br /><br />These are Both two &quot;Excellant Forum's the Best on the Internet!!&quot;<br /><br />Just trying to &quot;spark&quot; some discussion :grin: <br /><br />Brad</div>
    <div class="meta">Posted on 2002-02-21 08:11:04 by Brad</div>
   </div>
   <div class="post" id="post-25296">
    <div class="subject"><a href="#post-25296">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">oCallback function is a type of functions that is called by<br />Windows, not your code.<br />Though it is possible for your code to call it directly or indirectly<br />that a prog can call it's own callback function, the main reason<br />for existing callback function is to give your OS address of the<br />fuction that should be called by OS in specified cases.<br />So the main features of callback function is that: <br />- it is called not by your code but by other code with control<br />  some events that your code doesn't (in such way your prog<br />  is given a chance to &quot;take a part&quot; on controlling the events<br />  it can not (or not supposed to) control directly<br />- it returns not to your code but to a different code - code of<br />   the caller (it , for example, can clearly explain why some regs<br />   such as ebx,edi,esi should be preserved and restored and why<br />   it is important only in callback functions, and in other code (not<br />callback) it is upto you,optionall wether to preserve them or not:<br />  since Windows callback function returns to OS code, and OS code<br />  uses ebx,edi,esi then changing them misdirect OS code when<br />  it uses values of ebx,edi,esi assuming that they have not been<br />  changed by the callback function)<br /><br />I'll say again the main reason for existing callback function type:<br /><br />To give your app a chance to take part on controlling subsequenses of OS events that your app can not control directly.</div>
    <div class="meta">Posted on 2002-02-21 08:15:31 by The Svin</div>
   </div>
   <div class="post" id="post-25297">
    <div class="subject"><a href="#post-25297">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">WOW!!! ,   Thanks, Svin   <br /><br />That Clearify's a Lot!!!<br /><br />Brad:grin:</div>
    <div class="meta">Posted on 2002-02-21 08:21:18 by Brad</div>
   </div>
   <div class="post" id="post-25299">
    <div class="subject"><a href="#post-25299">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Svin, <br />Can I have your permission to copy this to the other Forum?---<br />giving you credit----of course!!!<br /><br />They would really like it---<br />Thanks, Brad</div>
    <div class="meta">Posted on 2002-02-21 08:24:05 by Brad</div>
   </div>
   <div class="post" id="post-25301">
    <div class="subject"><a href="#post-25301">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Brad,<br /><br />This following text is written for PowerBASIC, you can have the help file after I do a bit more work on it.<br /><br />=================<br />The main message handler is often referred to as a &quot;callback&quot; and it has to do with the way Windows manages the messages for the main window. The message handler is NEVER called by the application program, its address is placed in the WNDCLASSEX structure and Windows calls the message handler back when messages need to be processed by the window. In the following schematic, if a user selects an item from the menu or clicks on a button, the message from that control or menu is sent by the operating system to the main window's message handler.<br />=================<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-02-21 08:31:17 by hutch--</div>
   </div>
   <div class="post" id="post-25302">
    <div class="subject"><a href="#post-25302">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">A callback is a pointer to some function (who under most languages will be type checked), which can then be called within some standard body of code (such as the Win32 API).<br /><br />This allows a certain level of user control within the API, and enhances functionality. It also takes the strain off the API as to how to deal with error and unexpected cases, where a separate function can be passed to the API detailing how to deal with these unusual cases.<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-02-21 08:34:12 by Mirno</div>
   </div>
   <div class="post" id="post-25306">
    <div class="subject"><a href="#post-25306">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Brad:<br />Of course, you can copy anything I post to the board to where<br />you'd like to copy it.<br />I ask just for one thing - please, correct my spelling and English commands.<br />Steve:<br />CallBack function may be not necessarilly Window callback function.<br />Many API functions asking for callback functions, ComDlg, many<br />enum functions etc.<br />And I believe, you know it. I have a blurred feeling that I saw<br />in some of your procs in M32lib that you use callback functions<br />needed for some of API calls.<br />Directory dlg may be?...</div>
    <div class="meta">Posted on 2002-02-21 09:02:01 by The Svin</div>
   </div>
   <div class="post" id="post-25311">
    <div class="subject"><a href="#post-25311">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Thanks, <br />Svin :grin: <br />and,<br />Hutch, can't wait for the HelpFile, the start Looks Great :grin: <br /><br />Brad</div>
    <div class="meta">Posted on 2002-02-21 09:25:25 by Brad</div>
   </div>
   <div class="post" id="post-25312">
    <div class="subject"><a href="#post-25312">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Alex,<br /><br />You are right but I have a partly finished help file for PowereBASIC which is where Brad is posting it and the text I posted was for the WinMain and WndProc. With general purpose callback functions, there is no real restriction on what you do with them.<br /><br />I have written them from both ends when a function in a DLL calls back a function from its parent EXE file, usually in a seperate thread as well.<br /><br />It usually means you pass the address of the callback you have written to the function in the DLL which literally calls it back from the DLL.<br /><br />It can also be done from a seperate thread in the same app for things like halting processing of another process within the calling app.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-02-21 09:30:46 by hutch--</div>
   </div>
   <div class="post" id="post-25333">
    <div class="subject"><a href="#post-25333">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">what follows might be wrong, so like Brad I'm politely asking for corrections if any :)<br /><br />A &quot;callback&quot; is not limited to OS APIs (much less Win32). The term can be applied to any 2 'codes'  (I really need a better term for that) that 'communicate' (and that :D) with each other. Take for example an application with an embedded script engine. A script for that app can define a callback function which the app can call according to a certain events within the main app (perhaps errors). The script may not, or is not supposed to call that function itself.<br /><br />hope that was clear :grin:<br /><br />.pix</div>
    <div class="meta">Posted on 2002-02-21 12:43:44 by pixelwise</div>
   </div>
   <div class="post" id="post-25340">
    <div class="subject"><a href="#post-25340">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body"><div class="quote">'codes' (I really need a better term for that)</div><br /><br />Threads - separate execution streams that share most of the program resources, like memory addresses &amp; stack or whatever<br /><br />or Proceses: where they don't share much<br /><br />Just putting words to your meaning<br /><br /><br />IMHO I like svin's definition better because it's less clinical &amp; explains things rather than defines them<br /></div>
    <div class="meta">Posted on 2002-02-21 13:03:51 by Mutant Slime</div>
   </div>
   <div class="post" id="post-25341">
    <div class="subject"><a href="#post-25341">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">:alright: <br />I'll take note of that :)</div>
    <div class="meta">Posted on 2002-02-21 13:11:53 by pixelwise</div>
   </div>
   <div class="post" id="post-25380">
    <div class="subject"><a href="#post-25380">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body"><div class="quote"><br /><br />CallBack function may be not necessarilly Window callback function.<br />Many API functions asking for callback functions, ComDlg, many<br />enum functions etc.<br />And I believe, you know it. I have a blurred feeling that I saw<br />in some of your procs in M32lib that you use callback functions<br />needed for some of API calls.<br /></div><br /><br />Hi svin, <br />well i've a little doubt about callback <br />the os provides some api to enter callback addr of the function <br />we want the os calls when something happens <br />but our code is always code by the os from the context we've created or as for SetWindowsHook() we've to decide which context we wanna be inside when the function is called <br />That means that when we install a callback with some api <br />es: <br />SetWindowsHook() <br />its requested the handle of the instance the function stays in and thats right to indentify the context ur code lives and even the thread ID the hook code has to be associated <br />That means when ur hook code is called by the os it performs a context and a thread switch right ? <br />It shouldnt be a simple: <br />push param <br />call addr_callback_function <br /><br />the os should provide some mechanism to call our code from the right context (so its context switch coz the os donest live in our context) and in the right thread <br />How is it implemented ? <br /><br />Tnx a lot <br />NikDH</div>
    <div class="meta">Posted on 2002-02-21 18:43:41 by NikDH</div>
   </div>
   <div class="post" id="post-25382">
    <div class="subject"><a href="#post-25382">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">It's a good question, but too complex to explain in short way.<br />In short:<br />- By managing kernel objects<br />- A little bit differs on different OS.<br />I haven't seen yet full and complite reference on the issue.<br />But at least a lot can be explained through works (books)<br />by Matt Pietrek (for 9x), J.Richter (for all), and M.Russinovich + D.Solomon (NT4,NT5).<br />All this tracking is done through internal system tables controlling<br />kernel objects. Even handles we get not real handles but handles<br />for us (exept may be only hWnd handles - the same for every process).</div>
    <div class="meta">Posted on 2002-02-21 19:13:46 by The Svin</div>
   </div>
   <div class="post" id="post-25384">
    <div class="subject"><a href="#post-25384">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Brad,<br /><br />By the time you exhaust the range of answers in here, you will be able to write callback functions in hex. :)<br /><br />Lets try this as an example. It is easy enough to write both an application and a DLL that work together where you pass the address of a function to the DLL and it in turn CALL BACK the function address that you passed to it.<br /><br />You write code like this if you need a result posted back to an EXE file from the DLL you have written among many other things. It is often done from a seperate thread that calls the DLL so that the operation is asynchronous. There is an app in the MASM32 example code that Jibz wrote that does exactly this without the DLL.<br /><br />The library that handles the data compression periodically sends a progress result BACK to another function which has a function written to display the progress in compression.<br /><br />With an operating system callback, the only difference is that you do not normally have access at the code that does the calling back but it effectively works the same way.<br /><br />A WNDCLASSEX structure passes the address of the Wndproc to the operating system which in turn transfers any messages that are sent to the window directly to the WndProc function. You have not written the code that does the calling back but you do write the code that is called by the operating system.<br /><br />There are enough variations in the operating system with different types of callback routines, enumeration of windows is just one of them but they work more or less the same way. Code within the operating system that calls a function that you must write that must be in a specific format to work properly.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-02-21 19:55:35 by hutch--</div>
   </div>
   <div class="post" id="post-25392">
    <div class="subject"><a href="#post-25392">trying to discribe &quot;What is a CALLBACK Function&quot;</a></div>
    <div class="body">Exactly, Hutch<br /><br />That is Precisely why I posted my question to this &quot;World Class Forum&quot;, :grin: , instead of listening to tech writers, at google &amp; MSDN, try to explain what they don't know----<br /><br />Thanks,B</div>
    <div class="meta">Posted on 2002-02-21 21:11:13 by Brad</div>
   </div>
  </div>
 </body>
</html>