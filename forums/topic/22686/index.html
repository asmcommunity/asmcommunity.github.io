<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>would you help me to implement dropfiles events? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22686" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22686">would you help me to implement dropfiles events?</a></p>
   <div class="post" id="post-170028">
    <div class="subject"><a href="#post-170028">would you help me to implement dropfiles events?</a></div>
    <div class="body">my codes are simple but I could not figure out about how to code this part(/**/)<br />-------------------------------------------------------------------------------------------------<br />WndProc proc hWin:HWND,uMsg:UINT,wParam:WPARAM,lParam:LPARAM<br />	LOCAL szURL[64]:DWORD<br />	LOCAL szDropFileName[258]:BYTE	<br />	<br />	mov		eax,uMsg<br />	.if eax==WM_INITDIALOG<br />		push	hWin<br />		pop		hWnd<br />	.elseif eax==WM_COMMAND<br />		mov		eax,wParam<br />		and		eax,0FFFFh<br />		.if eax==IDC_BTN2<br />			invoke SendMessage,hWin,WM_CLOSE,0,0<br />		.elseif eax==IDC_BTN5<br />			invoke MultiByteToWideChar,NULL,NULL,addr URL_Hpage,64,addr szURL,64<br />			invoke HlinkNavigateString,NULL,addr szURL<br />		.elseif eax==IDC_BTN1<br />		.endif<br />/*<br />	.elseif eax==WM_NOTIFY<br />		mov? ?&nbsp; ebx, lParam? ? ; Get pointer to NMHDR<br />? ? ? ? mov? ?&nbsp; eax, .NMHDR.code<br />? ? ? ? .if	eax==EN_DROPFILES? ? ? ? ? ? ? ?&nbsp; 		<br />			invoke DragQueryFile,wParam,0,ADDR szDropFileName,sizeof szDropFileName<br />			invoke SetDlgItemText,hWin,IDC_STC1,addr MSG_DROPFILE<br />		.endif<br />*/<br />	.elseif eax==WM_TIMER<br />		mov		eax,wParam<br />		and		eax,0FFFFh<br />		.if eax==IDC_TIMER1<br />		.elseif eax==IDC_TIMER2<br />		.endif		 <br />	.elseif eax==WM_CLOSE<br />		invoke DestroyWindow,hWin<br />	.elseif uMsg==WM_DESTROY<br />		invoke PostQuitMessage,NULL<br />	.else<br />		invoke DefWindowProc,hWin,uMsg,wParam,lParam<br />		ret<br />	.endif<br />	xor? ? eax,eax<br />	ret<br /><br />WndProc endp<br /><br />------------------------------------------------------------------------------------------------<br /><br />my task is <br />to open a dropped file? by? WM_NOTIFY + WM_DROPFILES.<br /><br />even though I saw a couple of time sampe codes that related to the WM_DROPFILES, I failed to code better one.<br /><br />would you point out causes?</div>
    <div class="meta">Posted on 2006-02-17 23:48:49 by dongmin</div>
   </div>
  </div>
 </body>
</html>