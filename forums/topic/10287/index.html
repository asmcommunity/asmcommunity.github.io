<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Command Line Switches Inquiry - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10287" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=10287">Command Line Switches Inquiry</a></p>
   <div class="post" id="post-77186">
    <div class="subject"><a href="#post-77186">Command Line Switches Inquiry</a></div>
    <div class="body">Hi. I'm still a newbie :grin: and would appreciate someone critiquing my command line settings. I'd like to make sure I'm not missing anything or using an option I shouldn't.<br /> <br />Environment setup: I'm using the MASM32 7.0 (MASM 6.14) package with ML and Link replaced by the ones provided in the VC++ 6 Processor Pack (MASM 6.15). I'm able to use Codeview to debug 16-bit programs and use Visual C++ 6 to debug 32-bit (specifically Win32) programs. I use the shareware editor EditPlus 2 as my IDE as ASMEdit and RadASM are a little overwhelming in their features right now, plus I have EditPlus setup for C/C++ development and other command line tools like exe2bin.<br /><br />1. These are my debug command lines for Win32 and 16-bit assembly.<br /><br />For Win32 (Iczelion's tutorials compile with these.)<br />ML /c  /coff /Cp /Zi /nologo (FileName)<br />Link /DEBUG /DEBUGTYPE:CV /PDB:NONE /SUBSYSTEM:WINDOWS /LIBPATH:d:\masm32\lib /nologo (FileNameNoExt).obj; <strong>or</strong> <br />Link /DEBUG /DEBUGTYPE:COFF /PDB:NONE /SUBSYSTEM:WINDOWS /LIBPATH:d:\masm32\lib /nologo (FileNameNoExt).obj;<br /><br />(I found Codeview output easier to follow then COFF under the VC++ 6 debugger.)<br /><br />For 16-bit<br />ML /c /Zi /Zd /Zm /Fl /nologo (FileName) <br />Link16 /CODEVIEW /nologo (FileNameNoExt).obj; (Renamed the link.exe that comes with Masm 6.11d to link16.exe)<br /><br />2. Also (if you're still reading thank you), would the optimal release command line switches be<br /><br />For Win32<br />ML /c  /coff /Cp (FileName)<br />Link /release /SUBSYSTEM:WINDOWS /LIBPATH:d:\masm32\lib /nologo (FileNameNoExt).obj;<br /><br />For 16-bit<br />ML /c /Zm /nologo (FileName) <br />Link16 /nologo (FileNameNoExt).obj;<br /><br />3. PS: Does anyone know if there's a command line that can automatically invoke VC++ 6's debugger? Is there a freeware Win32 debugger (like OllyDbg?) that can take a command line argument and symbolically debug codeview/coff?</div>
    <div class="meta">Posted on 2003-01-19 10:32:57 by Masmer</div>
   </div>
   <div class="post" id="post-77207">
    <div class="subject"><a href="#post-77207">Command Line Switches Inquiry</a></div>
    <div class="body">for the vs debugger u should be able to do this...<br /><br />&quot;%vsinstalldir%\devenv.exe&quot; mycode.asm /debugexe mycode.exe<br /><br />where mycode.asm is the path and/or filename of your source code file(s) and mycode.exe is the path and/or filename of the compiled executable</div>
    <div class="meta">Posted on 2003-01-19 12:57:43 by BubbaFate</div>
   </div>
   <div class="post" id="post-77302">
    <div class="subject"><a href="#post-77302">Command Line Switches Inquiry</a></div>
    <div class="body">I had to change devenv.exe to msdev.exe and it works. Thank you!</div>
    <div class="meta">Posted on 2003-01-20 02:33:39 by Masmer</div>
   </div>
   <div class="post" id="post-77310">
    <div class="subject"><a href="#post-77310">Command Line Switches Inquiry</a></div>
    <div class="body">Masmer,<br /><br />I advice you to use the Olly Debugger.This tool provides also souce-level debugging.<br /><br /><a target="_blank" href="http://home.t-online.de/home/Ollydbg">http://home.t-online.de/home/Ollydbg</a><br /><br />Regards,<br /><br />Vortex</div>
    <div class="meta">Posted on 2003-01-20 03:01:13 by Vortex</div>
   </div>
   <div class="post" id="post-77311">
    <div class="subject"><a href="#post-77311">Command Line Switches Inquiry</a></div>
    <div class="body">I've been trying it out the last hour. Can't seem to get the source level debugging working, but then I haven't had time to read all the FAQ. Olly Debugger appears to be rather complex, which is good. :tongue: Thanks for the recommendation.</div>
    <div class="meta">Posted on 2003-01-20 03:11:55 by Masmer</div>
   </div>
   <div class="post" id="post-77314">
    <div class="subject"><a href="#post-77314">Command Line Switches Inquiry</a></div>
    <div class="body">Masmer,<br /><br />Olly Debugger is not so difficult to use.<br /><br />Parameters for OllyDbg:<br /><br />c:\masm32\bin\ml /c /coff /Cp /Zi /Zd file.asm<br />c:\masm32\bin\link  /DEBUG /DEBUGTYPE:CV /SUBSYSTEM:WINDOWS /LIBPATH:c:\masm32\lib file.obj<br /><br />Source-level debugging:</div>
    <div class="meta">Posted on 2003-01-20 03:27:50 by Vortex</div>
   </div>
   <div class="post" id="post-77327">
    <div class="subject"><a href="#post-77327">Command Line Switches Inquiry</a></div>
    <div class="body">My source window was blank on two different PCs. But now I see you have to select View =&gt; Source Files and double-click on the source file (I was just clicking on View =&gt; Source).</div>
    <div class="meta">Posted on 2003-01-20 04:04:03 by Masmer</div>
   </div>
   <div class="post" id="post-77330">
    <div class="subject"><a href="#post-77330">Command Line Switches Inquiry</a></div>
    <div class="body">Masmer, That's O.K. :alright: <br /><br />Regards,<br /><br />Vortex</div>
    <div class="meta">Posted on 2003-01-20 04:16:27 by Vortex</div>
   </div>
   <div class="post" id="post-77448">
    <div class="subject"><a href="#post-77448">Command Line Switches Inquiry</a></div>
    <div class="body">Someone want to tell me how to get this to happen.. or am i suppose to have the up-to-date version of Olldbg (My Ver is: 1.06)<br /><br />It has a SourceFiles window and A View-&gt;Source option.  But no matter how many ways i try, i dont get it to show me anything more than the blank window mentioned above :confused:<br /><br />Here is the bat file im using:<pre><code>@echo off<br />rem DEBUG.BAT<br />rem @echo off<br /><br />if not exist rsrc.rc goto over1<br />\masm32\bin\rc /v rsrc.rc<br />\masm32\bin\cvtres /machine&#58;ix86 rsrc.res<br />&#58; over1<br /><br />if exist %1.obj del %1.obj<br />if exist %1.exe del %1.exe<br />if exist %1.pdb del %1.pdb<br />if exist %1.ilk del %1.ilk<br /><br />\masm32\bin\ml /c /coff /Cp /Zi /Zd %1.asm<br />if errorlevel 1 goto errasm<br /><br />if not exist rsrc.obj goto nores<br /><br />\masm32\bin\Link /DEBUG /DEBUGTYPE&#58;CV /SUBSYSTEM&#58;WINDOWS %1.obj rsrc.obj<br />if errorlevel 1 goto errlink<br /><br />dir %1.*<br />goto TheEnd<br /><br />&#58;nores<br />\masm32\bin\Link /DEBUG /DEBUGTYPE&#58;CV /SUBSYSTEM&#58;WINDOWS %1.obj<br />if errorlevel 1 goto errlink<br />dir %1<br />goto TheEnd<br /><br />&#58;errlink<br />echo _<br />echo Link error<br />goto TheEnd<br /><br />&#58;errasm<br />echo _<br />echo Assembly Error<br />goto TheEnd<br /><br />&#58;TheEnd</code></pre><br /><br />Its simply an edit from Hutch's builda.bat...<br /><br />It works, it builds me a directory with a .pdb, and .ilk file.. As well, manually looking at the generated exe file, there is the debug path to the pdb in the file:<div class="quote">NB10    +?,&gt;   D:\masm32\_ACTIVE\elec\elec.pdb </div><br /><br />And with all this, ollydbg just looks back at me with its empty window when i open the file??</div>
    <div class="meta">Posted on 2003-01-20 20:21:09 by NaN</div>
   </div>
   <div class="post" id="post-77482">
    <div class="subject"><a href="#post-77482">Command Line Switches Inquiry</a></div>
    <div class="body">I'm guessing as a newbie here: I *was* using the <a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcce/htm/complref_128.asp">/PDB:NONE</a> switch to include the Program Database inside the exe file, while Vortex's command line creates the PDB in the same directory as the executable. So perhaps OllyDbg (1.0.6 or currently) needs local access to the program database, not recognizing the path to the PDB file inside the executable? I'd be astonished if I'm correct. :grin:<br /><br />Edit: Or it could be this new feature in 1.0.8b: &quot;Perharps the most important new feature in OllyDbg 1.08 is its ability to read debugging information in numerous Microsoft formats, including CodeView, COFF, PDB and SYM, as implemented in dbghelp.dll. This redistributable file is included into .zip archive.&quot;</div>
    <div class="meta">Posted on 2003-01-21 03:35:25 by Masmer</div>
   </div>
  </div>
 </body>
</html>