<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Nested Menu in Radasm - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22459" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22459">Nested Menu in Radasm</a></p>
   <div class="post" id="post-168562">
    <div class="subject"><a href="#post-168562">Nested Menu in Radasm</a></div>
    <div class="body"><pre><code>Hi,all.<br />    Anyone could tell me how to solve this problem?<br />    I am creating a two-layer nested MENU in Radasm,the resource file is:<br /><pre><code><pre><br />#define IDM_FILE_OPEN             1000<br />#define IDM_FILE_SAVE             1001<br />#define IDM_FILE_SAVEAS           1002<br /><br />#define IDM_FILE_PRINT            1003<br />#define IDM_FILE_EXIT             1004<br /><br />#define IDM_EDIT_UNDO             1101<br />#define IDM_EDIT_REDO             1102<br /><br />#define IDM_EDIT_COPY             1103<br />#define IDM_EDIT_CUT              1104<br />#define IDM_EDIT_PASTE            1105<br /><br />#define IDM_VIEW_TOOLBAR          1201       <br />#define IDM_VIEW_STATUSBAR        1202       <br />#define IDM_VIEW_TOOLBOX          1203        <br />#define IDM_VIEW_OUTPUTWINDOW     1204  <br />	     <br />#define IDM_RUN_ALLCHECK          1301<br />#define IDM_RUN_REPEATING         1302<br />#define IDM_RUN_START             1303<br />            <br />#define IDM_RUN_WIDE              1304<br />#define IDM_RUN_TELE              1305<br />#define IDM_RUN_CLOSE             1306<br />			          <br />#define IDM_RUN_AFINIT            1307<br />#define IDM_RUN_AF8STEP           1308<br />#define IDM_RUN_AFCLIP            1309<br />#define IDM_RUN_AFNF              1310<br /><br />#define IDM_RUN_SHUTTERLARGE      1311<br />#define IDM_RUN_SHUTTERSMALL      1312<br />#define IDM_RUN_IRISLARGE         1313<br />#define IDM_RUN_IRISSMALL         1314<br /><br /><br />#define IDM_PARTS_MAINPCB         1401<br />#define IDM_PARTS_SHUTTER         1402<br /><br />#define IDM_PARTS_ZPI             1403<br />#define IDM_PARTS_ZPR             1404<br />#define IDM_PARTS_AFPI            1405<br />#define IDM_PARTS_AFMOTOR         1406<br />#define IDM_PARTS_ZOOMMOTOR       1407<br /><br />#define IDM_DRIVER_CONNECT        1501<br />#define IDM_DRIVER_UC11           1502<br />#define IDM_DRIVER_N2             1503<br />#define IDM_DRIVER_SL1            1504<br />#define IDM_DRIVER_D3             1505<br />#define IDM_DRIVER_OTHER          1506<br />#define IDM_DRIVER_VERSION        1507<br /><br />#define IDM_OPTION_ZOOMVOLTAGE    1601<br />#define IDM_OPTION_AFVOLTAGE      1602<br />#define IDM_OPTION_SHUTTERVOLTAGE 1603<br />#define IDM_OPTION_IRISVOLTAGE    1604<br />#define IDM_OPTION_SENSORVDD      1605<br />#define IDM_OPTION_SENSORTHRESHOLD 1606<br />#define IDM_OPTION_LOADDEFAULT    1607<br />#define IDM_OPTION_FONT           1608<br />#define IDM_OPTION_COLOR          1609<br /><br />#define IDM_HELP_ABOUT            1700<br />#define IDM_HELP_USERMANUAL       1701<br />#define IDM_HELP_ADVANCETOPIC     1702<br />#define IDM_HELP_OEMHELP          1703<br />#define IDM_HELP_CONTACT          1704<br />;Menu structure             <br />MyMenu MENU<br />	{<br />		 POPUP  &quot;&amp;File&quot;<br />	        {<br />			MENUITEM &quot;&amp;Open&quot;                  ,IDM_FILE_OPEN  <br />			MENUITEM &quot;&amp;Save&quot;                  ,IDM_FILE_SAVE<br />			MENUITEM &quot;Save &amp;As&quot;               ,IDM_FILE_SAVEAS<br />			MENUITEM SEPARATOR<br />			MENUITEM &quot;&amp;Print&quot;                 ,IDM_FILE_PRINT<br />			MENUITEM &quot;E&amp;xit&quot;                  ,IDM_FILE_EXIT<br />	        }<br />	        <br />                POPUP  &quot;&amp;Edit&quot;<br />	        {<br />			MENUITEM &quot;Undo&quot;                   ,IDM_EDIT_UNDO<br />			MENUITEM &quot;Redo&quot;                   ,IDM_EDIT_REDO<br />			MENUITEM  Separator<br />			MENUITEM &quot;Copy&quot;                   ,IDM_EDIT_COPY<br />			MENUITEM &quot;Cut&quot;                    ,IDM_EDIT_CUT<br />			MENUITEM &quot;Paste&quot;,                 ,IDM_EDIT_PASTE<br />	        }<br />	        <br />	        POPUP  &quot;&amp;View&quot;<br />	        {<br />			MENUITEM &quot;ToolBar&quot;                ,IDM_VIEW_TOOLBAR     ;Check box style<br />			MENUITEM &quot;StatusBar&quot;              ,IDM_VIEW_STATUSBAR   ;check box style<br />			MENUITEM &quot;ToolBox&quot;                ,IDM_VIEW_TOOLBOX     ;Check box style<br />			MENUITEM &quot;OutputWindow&quot;           ,IDM_VIEW_OUTPUTWINDOW;check box style<br />	        }<br />	        <br />	        POPUP  &quot;&amp;Parts&quot;<br />	        {       MENUITEM &quot;Main PCB Ass&#39;y&quot;         ,IDM_PARTS_MAINPCB<br />	                MENUITEM &quot;Shutter/Iris Ass&#39;y&quot;     ,IDM_PARTS_SHUTTER<br />	                MENUITEM SEPARATOR<br />			MENUITEM &quot;Zoom PI&quot;                ,IDM_PARTS_ZPI<br />			MENUITEM &quot;Zoom PR&quot;                ,IDM_PARTS_ZPR  ;May be grayed<br />			MENUITEM &quot;AF PI&quot;,                 ,IDM_PARTS_AFPI<br />			MENUITEM Separator <br />			menuitem  &quot;AF Motor&quot;              ,IDM_PARTS_AFMOTOR<br />			MENUITEM  &quot;Zoom Motor&quot;            ,IDM_PARTS_ZOOMMOTOR<br />	        }<br />	&nbsp; &nbsp; &nbsp;  POPUP   &quot;&amp;Driver&quot;<br />               &nbsp; &nbsp; &nbsp; &nbsp; {<br />			MENUITEM &quot;&amp;Connect/Disconnect Motor Dviver&quot;  ,IDM_DRIVER_CONNECT;Check box style<br />			POPUP    &quot;Driver Type&quot;                                       ;Mutex <br />			{<br />			          MENUITEM &quot;UC11&quot;                ,IDM_DRIVER_UC11<br />			          MENUITEM &quot;N2&quot;                  ,IDM_DRIVER_N2<br />			          MENUITEM &quot;SL1&quot;                 ,IDM_DRIVER_SL1<br />			          MENUITEM &quot;D3&quot;                  ,IDM_DRIVER_D3<br />			          MENUITEM &quot;Other...&quot;            ,IDM_DRIVER_OTHER<br />			}<br />	                            MENUITEM &quot;Driver Version&quot;         ,IDM_DRIVER_VERSION   <br />               &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br /> <br />               &nbsp; &nbsp; &nbsp; &nbsp; POPUP   &quot;&amp;Option&quot;<br />             &nbsp; &nbsp; &nbsp; &nbsp;  {<br />                       &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  POPUP    &quot;Project Selection&quot;<br />			POPUP    &quot;Voltage Setting&quot;                                   ;Pop a dialog to setting the voltage<br />			{         MENUITEM  &quot;Zoom Voltage&quot;       ,IDM_OPTION_ZOOMVOLTAGE<br />			          MENUITEM  &quot;AF Voltage&quot;         ,IDM_OPTION_AFVOLTAGE<br />			          MENUITEM  &quot;Shutter Voltage&quot;    ,IDM_OPTION_SHUTTERVOLTAGE<br />			          MENUITEM  &quot;Iris Voltage&quot;       ,IDM_OPTION_IRISVOLTAGE<br />			          MENUITEM  &quot;Senor Vdd&quot;          ,IDM_OPTION_SENSORVDD<br />			          MENUITEM  &quot;Senor On Threshold&quot; ,IDM_OPTION_SENSORTHRESHOLD<br />			}<br />			<br />			;POPUP     &quot;Speed Setting&quot;<br />			;popup     &quot;Position Setting&quot;<br />			;popup     &quot;Misc Setting&quot;<br />			MENUITEM   SEPARATOR <br />                       &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  MENUITEM  &quot;Load Default Setting&quot;         ,IDM_OPTION_LOADDEFAULT<br />                       &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  MENUITEM   SEPARATOR<br />                     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;    MENUITEM   &quot;Font&quot;                        ,IDM_OPTION_FONT<br />                     &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;    MENUITEM   &quot;Color&quot;                       ,IDM_OPTION_COLOR    <br />	        }<br />	        POPUP   &quot;&amp;Help&quot;<br />               &nbsp; &nbsp; &nbsp; &nbsp; {<br />			MENUITEM &quot;About&quot;                  ,IDM_HELP_ABOUT<br />			MenuItem &quot;User Manual&quot;            ,IDM_HELP_USERMANUAL<br />			MENUITEM &quot;Advance Topic&quot;          ,IDM_HELP_ADVANCETOPIC<br />			MENUITEM &quot;OEM Help&quot;               ,IDM_HELP_OEMHELP<br />			MENUITEM &quot;Contact&quot;                ,IDM_HELP_CONTACT<br />	        }<br />	 <br />	}</code></pre></pre></span><br /><br />  <span style="font-size:14pt>It is compiled well, but when linked, error happens as following:<br /></span><pre><code>C:\RadASM\Masm32\Bin\RC.EXE /v &quot;BARREL CHECKER.rc&quot;<br />Microsoft (R) Windows (R) Resource Compiler, Version 5.00.1823.1 - Build 1823<br /><br />Copyright (C) Microsoft Corp. 1985-1998. All rights reserved.<br /><br /><br />Using codepage 936 as default<br />Creating BARREL CHECKER.RES<br /><br />RC: RCPP -CP 936 -f C:\BARREL CHECKER\RCa01324 -g C:\BARREL CHECKER\RDa01324 -DRC_INVOKED -D_WIN32 -pc\:/ -E -I. -I . -I D:\Program Files\Microsoft Visual Studio\VC98\atl\include -I D:\Program Files\Microsoft Visual Studio\VC98\mfc\include -I D:\Program Files\Microsoft Visual Studio\VC98\include -I C:\Program Files\Microsoft Visual Studio\VC98\atl\include -I C:\Program Files\Microsoft Visual Studio\VC98\mfc\include -I C:\Program Files\Microsoft Visual Studio\VC98\include<br /><br />BARREL CHECKER.rc.<br /><br />BARREL CHECKER.rc (155): error RC2121 : BEGIN expected in menu<br /><br /><br />BARREL CHECKER.rc (155): error RC2122 : unknown menu subtype</code></pre><br /><br /><br />   <span style="font-size:12pt><span style="font-family:Verdana">It said this should use&quot; BEGIN..END&quot; structure instead of&quot;{...}&quot;  structure for two more layer MENU?<br />   <br />   What&#39;s wrong with it? How to repair?<br />  <br />  Thanks in advance.<br />   <br />  Regards!</span></span>  </div>
    <div class="meta">Posted on 2005-12-05 03:18:14 by Luckrock</div>
   </div>
   <div class="post" id="post-168563">
    <div class="subject"><a href="#post-168563">Re: Nested Menu in Radasm</a></div>
    <div class="body">A standard Menu looks a little like this:<br /><br /><pre><code><br />IDR_MYMENU MENU<br />BEGIN<br />    POPUP &quot;&amp;File&quot;<br />    BEGIN<br />        MENUITEM &quot;E&amp;xit&quot;, ID_FILE_EXIT<br />    END<br />END<br /></code></pre><br /><br />You are missing the Begin/End Blocks.<br /><br />/edit: I&#39;d say do a Find replace on { with BEGIN and } with END and try again.</div>
    <div class="meta">Posted on 2005-12-05 06:31:35 by JimmyClif</div>
   </div>
   <div class="post" id="post-168578">
    <div class="subject"><a href="#post-168578">Re: Nested Menu in Radasm</a></div>
    <div class="body">Hi,Jimmy<br />&nbsp; &nbsp; &nbsp; I had ever known the &quot;begin..end&quot; structure is the standard VC++ menu resource descript key words.<br /> And from Iczelion&#39;s TUT ,he is using a &quot;{..}&quot; structure.That&#39;s fine.<br />&nbsp; &nbsp; &nbsp; So ,I am always thinking that in Masm&nbsp; is using &quot;{,...}&quot; instead.<br />&nbsp; &nbsp; &nbsp; Well.<br />&nbsp; &nbsp; &nbsp; I have change it with &quot;begin...end&quot;,it works now.<br />&nbsp; &nbsp; &nbsp; Thanks.<br />&nbsp; &nbsp; &nbsp; </div>
    <div class="meta">Posted on 2005-12-05 18:27:20 by Luckrock</div>
   </div>
   <div class="post" id="post-168586">
    <div class="subject"><a href="#post-168586">Re: Nested Menu in Radasm</a></div>
    <div class="body">Luckrock,<br /><br />MASM in fact does not specify any menu format, if you have the tools to build a RC file and it has valid syntax for RC.EXE, you build it with RC.EXE and link it into the EXE like normal. If you are familiar with VC, you can use its resource editor with no problems at all.</div>
    <div class="meta">Posted on 2005-12-06 05:14:46 by hutch--</div>
   </div>
   <div class="post" id="post-168592">
    <div class="subject"><a href="#post-168592">Re: Nested Menu in Radasm</a></div>
    <div class="body">Hi, Hutch--<br />&nbsp; &nbsp;  Do you mean the Menu resource file is a binary file ,so it&#39;s could be compiled by other RC.exe tool?<br />&nbsp; &nbsp; Thanks<br />&nbsp; &nbsp; Regards.</div>
    <div class="meta">Posted on 2005-12-06 11:05:33 by Luckrock</div>
   </div>
   <div class="post" id="post-168608">
    <div class="subject"><a href="#post-168608">Re: Nested Menu in Radasm</a></div>
    <div class="body">hi luckrock, ????????????????????????????????http://www.hanzify.org/?Go=Show::List&amp;ID=9532<br /><br /><img src="http://www.hanzify.org/UpFiles/Images/2005-11-26_215650.gif" /></div>
    <div class="meta">Posted on 2005-12-06 20:32:00 by miaomiao</div>
   </div>
   <div class="post" id="post-168612">
    <div class="subject"><a href="#post-168612">Re: Nested Menu in Radasm</a></div>
    <div class="body">Please try to post in English. Not everyone can understand Chinese and this board is meant for everyone to access information easily. </div>
    <div class="meta">Posted on 2005-12-06 21:04:33 by roticv</div>
   </div>
   <div class="post" id="post-168613">
    <div class="subject"><a href="#post-168613">Re: Nested Menu in Radasm</a></div>
    <div class="body">Mr Roticv,<br />&nbsp; &nbsp; &nbsp;  Plz don&#39;t got angry or something about Mr mIAO, He is a buddy of mine, the infomation should be posted in English,<br /> isn&#39;t it? <br />&nbsp; &nbsp;  Thanks.<br /></div>
    <div class="meta">Posted on 2005-12-06 21:17:57 by Luckrock</div>
   </div>
   <div class="post" id="post-168615">
    <div class="subject"><a href="#post-168615">Re: Nested Menu in Radasm</a></div>
    <div class="body">No, I am not angry. I am just saying that we should keep to english as this is an international board and communicating in English would allow the information to be accessible to more people around the world. Though of course the number of chinese speakers are larger (I am one, for instance).&nbsp; ;)</div>
    <div class="meta">Posted on 2005-12-06 22:00:16 by roticv</div>
   </div>
   <div class="post" id="post-168616">
    <div class="subject"><a href="#post-168616">Re: Nested Menu in Radasm</a></div>
    <div class="body"><div class="quote"><br />.......we should keep to english as this is an international board and communicating in English would allow the information to be accessible to more people around the world. ....<br /></div><br />OK, roticv, I just know Mr&nbsp; Luckrock is a chinese too, So I wrote it in chinese. I have got it and I will not make the same mistake anymore, ;) thank you.<br /></div>
    <div class="meta">Posted on 2005-12-07 00:08:35 by miaomiao</div>
   </div>
  </div>
 </body>
</html>