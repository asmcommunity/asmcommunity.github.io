<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Device drivers - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17277" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17277">Device drivers</a></p>
   <div class="post" id="post-133901">
    <div class="subject"><a href="#post-133901">Device drivers</a></div>
    <div class="body">Not to sure if this is the place to ask, but I'm getting annoyed and confused :)<br /><br />-------<br /><br />I am working on a little 'hobby os' / 'test bed' in protected mode.<br /><br />Everything has been coming along quite nicely, with fdd and ide support, vesa support and few other necessities to keep everything running nicely.<br /><br />The problem I have is designing the device driver system, for loadable modules.<br /><br />I plan to have them as part of the kernel space, and loadable at boot time (not too worried about being able to install a new driver without rebooting at the moment). The part that I'm stuck on is 'how to create a driver interface'.<br /><br />I've had chats with a few other developers, who I have since lost contact with, and seem to have a generalized idea of the design, but I still don't 'really' understand.<br /><br />The idea of Read/Write/IOCTL functionality seems simple enough, but how does this work for things like IDE block transfers and still work for video drivers, network drivers etc....<br /><br />If someone has some experience in this area, and wouldn't mind posting a few examples of the interface usage for different devices, it would be hugely appreciated.<br /><br />In fact, any information in this area would be welcomed with open arms.<br /><br />Thanks in advance<br />Sentient</div>
    <div class="meta">Posted on 2004-02-17 13:23:30 by Sentient</div>
   </div>
   <div class="post" id="post-133909">
    <div class="subject"><a href="#post-133909">Device drivers</a></div>
    <div class="body">ioctl is a generic interface - you pass along, say, an ioctl code + buffer + buffersize to the driver, and it's then up to the driver to do with this what it wants. The idea is you have *one* way of calling into drivers, but of course the &quot;API&quot; used to communicate with the drivers will vary a lot. It's also a good idea to build an interface library around the ioctl calls, so you have stuff like &quot;SetDisplayMode&quot; instead of arbitrary-looking ioctl calls scattered all over. Quite like you have the NT native API exports NT, instead of doing the syscall interrupt.<br /><br />For an idea of what parameters you (could) need for ioctl, check out DeviceIoControl in the win32 API.</div>
    <div class="meta">Posted on 2004-02-17 13:43:44 by f0dder</div>
   </div>
   <div class="post" id="post-133938">
    <div class="subject"><a href="#post-133938">Four-F's Site</a></div>
    <div class="body"><a target="_blank" href="http://www.freewebs.com/four-f/index.htm">http://www.freewebs.com/four-f/index.htm</a></div>
    <div class="meta">Posted on 2004-02-17 16:11:11 by mrgone</div>
   </div>
   <div class="post" id="post-133942">
    <div class="subject"><a href="#post-133942">Device drivers</a></div>
    <div class="body">Thanks a lot guys.. Even with all the searching I've done i haven't been able to find this information.</div>
    <div class="meta">Posted on 2004-02-17 17:13:55 by Sentient</div>
   </div>
  </div>
 </body>
</html>