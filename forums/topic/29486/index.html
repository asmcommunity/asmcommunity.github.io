<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Linker Error with NASM .obj - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29486" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29486">Linker Error with NASM .obj</a></p>
   <div class="post" id="post-208254">
    <div class="subject"><a href="#post-208254">Linker Error with NASM .obj</a></div>
    <div class="body">Hey guys! The other day I downloaded a snippet of NASM source code. After sniffing out the NASM compiler I was finally able to compile it into an .obj file. However, upon linking the .obj to my C++ code, I received this error:<br /><br /> &#039;F:\AES TESTING\RIJNDAEL.OBJ&#039; contains invalid OMF record, type 0x4c (possibly COFF)<br /><br />I&#039;ve looked around a bit and found a topic in the NASM forum and found out the issue is the incompatibilities between the way the linker/compiler works for NASM and my IDE (Borland C++ Builder 5).<br /><br />The question I have to ask is if anyone knows of an IDE that has a linker that accepts .obj&#039;s from the NASM language/syntax. If I cannot find one that works, I&#039;ll have to convert the source syntax from NASM to TASM (which isn&#039;t too much of an issue, it&#039;s just time consuming for me :D)</div>
    <div class="meta">Posted on 2009-07-23 11:40:36 by Kamikaze</div>
   </div>
   <div class="post" id="post-208257">
    <div class="subject"><a href="#post-208257">Re: Linker Error with NASM .obj</a></div>
    <div class="body">If you want to keep on using borland&#039;s toolchain, you need to make NASM output OMF object files (check the manual). I&#039;d suggest you move to a better environment (Visual C++ is nifty, and the express editions are free + has the features most people will need), most windows development tools support COFF format.</div>
    <div class="meta">Posted on 2009-07-23 18:02:26 by f0dder</div>
   </div>
   <div class="post" id="post-208258">
    <div class="subject"><a href="#post-208258">Re: Linker Error with NASM .obj</a></div>
    <div class="body">Thanks! That helps point me out in the right direction!<br /><br />I tried using Dev C++ for the time being but it fell short where BCB5 did. <br />I&#039;ll be sure to read on the OMF section</div>
    <div class="meta">Posted on 2009-07-23 18:14:55 by Kamikaze</div>
   </div>
   <div class="post" id="post-208259">
    <div class="subject"><a href="#post-208259">Re: Linker Error with NASM .obj</a></div>
    <div class="body">Dev-C++ supports supports COFF, but there&#039;s two dialects of COFF; what GCC uses and what the rest use. Only difference I know of has to do with the way relocatable items are stored; this leads to perfect links, but corrupt code :)</div>
    <div class="meta">Posted on 2009-07-23 18:24:30 by f0dder</div>
   </div>
   <div class="post" id="post-208264">
    <div class="subject"><a href="#post-208264">Re: Linker Error with NASM .obj</a></div>
    <div class="body">Currently supported formats in the latest stable version of NASM are:<br /><br />flat-form binary files (e.g. DOS .COM, .SYS)<br />Intel hex<br />Motorola S-records<br />Linux a.out object files<br />NetBSD/FreeBSD a.out object files<br />COFF (i386) object files (e.g. DJGPP for DOS)<br />ELF32 (i386) object files (e.g. Linux)<br />ELF (short name for ELF32) <br />ELF64 (x86_64) object files (e.g. Linux)<br />Linux as86 (bin86 version 0.3) object files<br />MS-DOS 16-bit/32-bit OMF object files<br />Microsoft Win32 (i386) object files<br />Microsoft Win64 (x86-64) object files<br />Relocatable Dynamic Object File Format v2.0<br />IEEE-695 (LADsoft variant) object file format<br />NeXTstep/OpenStep/Rhapsody/Darwin/MacOS X (i386) object files<br />NeXTstep/OpenStep/Rhapsody/Darwin/MacOS X (x86_64) object files<br /><br />I&#039;ve never actually tried using NASM with Borland development tools, but NASM does support OMF/OBJ format using the command line `nasm -f obj source.asm&#039;. Try it out and see if it works is all I can tell you. IMHO, you&#039;d probably be better off either obtaining an MS/COFF compliant C++ compiler or switching to TASM.</div>
    <div class="meta">Posted on 2009-07-24 02:01:54 by Synfire</div>
   </div>
   <div class="post" id="post-208266">
    <div class="subject"><a href="#post-208266">Re: Linker Error with NASM .obj</a></div>
    <div class="body">Check out Agner Fog&#039;s Object file converter<br /><a target="_blank" href="http://www.agner.org/optimize/#objconv">http://www.agner.org/optimize/#objconv</a></div>
    <div class="meta">Posted on 2009-07-24 05:51:45 by drizz</div>
   </div>
   <div class="post" id="post-208280">
    <div class="subject"><a href="#post-208280">Re: Linker Error with NASM .obj</a></div>
    <div class="body"><div class="quote"><br />Check out Agner Fog&#039;s Object file converter<br /><a target="_blank" href="http://www.agner.org/optimize/#objconv">http://www.agner.org/optimize/#objconv</a><br /></div><br />Hey thanks! I&#039;m going to give it a try and see if it&#039;ll work<br /><br /><div class="quote"><br />Currently supported formats in the latest stable version of NASM are:<br /><br />flat-form binary files (e.g. DOS .COM, .SYS)<br />Intel hex<br />Motorola S-records<br />Linux a.out object files<br />NetBSD/FreeBSD a.out object files<br />COFF (i386) object files (e.g. DJGPP for DOS)<br />ELF32 (i386) object files (e.g. Linux)<br />ELF (short name for ELF32) <br />ELF64 (x86_64) object files (e.g. Linux)<br />Linux as86 (bin86 version 0.3) object files<br />MS-DOS 16-bit/32-bit OMF object files<br />Microsoft Win32 (i386) object files<br />Microsoft Win64 (x86-64) object files<br />Relocatable Dynamic Object File Format v2.0<br />IEEE-695 (LADsoft variant) object file format<br />NeXTstep/OpenStep/Rhapsody/Darwin/MacOS X (i386) object files<br />NeXTstep/OpenStep/Rhapsody/Darwin/MacOS X (x86_64) object files<br /><br />I&#039;ve never actually tried using NASM with Borland development tools, but NASM does support OMF/OBJ format using the command line `nasm -f obj source.asm&#039;. Try it out and see if it works is all I can tell you. IMHO, you&#039;d probably be better off either obtaining an MS/COFF compliant C++ compiler or switching to TASM.<br /></div><br />I&#039;ll probably switch over to TASM. I recompiled the files and linked them using the Visual Studio 2008 Express Compiler and it worked just fine. Once I get files down in TASM I shouldn&#039;t have any problems :D<br />And I think it&#039;s time to give Borland a rest. The pains of developing GUI apps and occasional failures has got to go...<br /><br />Thanks for your help guys! I&#039;m drowning in possibilities/options now&nbsp;  ;)</div>
    <div class="meta">Posted on 2009-07-27 18:01:52 by Kamikaze</div>
   </div>
  </div>
 </body>
</html>