<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Assembly Snippets anyone? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=662" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=662">Assembly Snippets anyone?</a></p>
   <div class="post" id="post-3967">
    <div class="subject"><a href="#post-3967">Assembly Snippets anyone?</a></div>
    <div class="body">APJ #9 is almost finished, but a couple of &quot;Assembly Snippets&quot; are still needed (and something for the &quot;Issue Challenge&quot;). Would anyone be willing to submit some pieces of great code so that this issue can be out as soon as possible? <br /><br />Thanks in advance,<br /><br />Tiago Sanches</div>
    <div class="meta">Posted on 2001-08-17 09:20:17 by Tiago Sanches</div>
   </div>
   <div class="post" id="post-4080">
    <div class="subject"><a href="#post-4080">Assembly Snippets anyone?</a></div>
    <div class="body">What exactly is APJ (internet/paper, etc.).  What kind of snippets (DOS/Win32, etc.)?</div>
    <div class="meta">Posted on 2001-08-18 22:12:34 by eet_1024</div>
   </div>
   <div class="post" id="post-4084">
    <div class="subject"><a href="#post-4084">Assembly Snippets anyone?</a></div>
    <div class="body">Is it the same one as this one?<br /><br /><a target="_blank" href="http://asmjournal.freeservers.com/">http://asmjournal.freeservers.com/</a></div>
    <div class="meta">Posted on 2001-08-18 23:29:35 by Torch</div>
   </div>
   <div class="post" id="post-4086">
    <div class="subject"><a href="#post-4086">Assembly Snippets anyone?</a></div>
    <div class="body">Wow. I used to write stuff for APJ, until they stopped publishing them.<br /><br /><br />(Actually, I just made the last issue.)<br /><br /><br />Sorry, no code snippetts available offhand. But if you DO get it back up, I'd do an 'Intro to playing with your PIC&quot; art.</div>
    <div class="meta">Posted on 2001-08-18 23:44:56 by Ernie</div>
   </div>
   <div class="post" id="post-4157">
    <div class="subject"><a href="#post-4157">Assembly Snippets anyone?</a></div>
    <div class="body">I dont have any snippets, but i got some suggestions. How about making assembly versions of the standerd C libarary using no o/s specific functions (int 21h, etc...)</div>
    <div class="meta">Posted on 2001-08-19 16:18:25 by ChimpFace9000</div>
   </div>
   <div class="post" id="post-4160">
    <div class="subject"><a href="#post-4160">Assembly Snippets anyone?</a></div>
    <div class="body">Ernie, he is putting it back..so start writting that PIC paper pleaseeeeeeeeeee :)<br /><br />Latigo</div>
    <div class="meta">Posted on 2001-08-19 16:33:28 by latigo</div>
   </div>
   <div class="post" id="post-4162">
    <div class="subject"><a href="#post-4162">Assembly Snippets anyone?</a></div>
    <div class="body">Ok heres some snippets. I wrote these. They are probably pretty crappy, but they might be of use to some one.</div>
    <div class="meta">Posted on 2001-08-19 17:43:34 by ChimpFace9000</div>
   </div>
   <div class="post" id="post-4247">
    <div class="subject"><a href="#post-4247">Assembly Snippets anyone?</a></div>
    <div class="body">Maybe you could try and convince Steve Gibson (<a target="_blank" href="http://grc.com/steve.htm">http://grc.com/steve.htm</a>) form <a target="_blank" href="www.grc.com">www.grc.com</a> to write an article or tutorial.</div>
    <div class="meta">Posted on 2001-08-20 13:52:25 by ChimpFace9000</div>
   </div>
   <div class="post" id="post-4277">
    <div class="subject"><a href="#post-4277">Assembly Snippets anyone?</a></div>
    <div class="body">Here are some CGI progs to test concepts in asm (MZ format).  Can be ran without server.  You can place them into a cgi directory or set a script alias to them.</div>
    <div class="meta">Posted on 2001-08-20 23:44:09 by eet_1024</div>
   </div>
   <div class="post" id="post-4337">
    <div class="subject"><a href="#post-4337">Assembly Snippets anyone?</a></div>
    <div class="body">Converts the given string to lowercase...<br /><br />Sorry, I am an asm newbie, so this is all I could come up with after a few days of trying to learn.</div>
    <div class="meta">Posted on 2001-08-21 13:29:57 by vcv</div>
   </div>
   <div class="post" id="post-4351">
    <div class="subject"><a href="#post-4351">Assembly Snippets anyone?</a></div>
    <div class="body">Sorry for the dealy in reply but I was out of town for a few days. <br />Good news, APJ #9 will most probably be out before the end of August if everything goes according to plan!<br /><br />Here are some replies:<br /><br /><strong>eet_1024:</strong> Check the past APJ issues to find out what it is all about. Thanks for the CGI progs, but those don't really count as snippets though :(  Maybe you could write a small article on the subject using the files you posted here :)<br /><br /><strong>Torch:</strong> Yes, APJ is the one at <a target="_blank" href="http://asmjournal.freeservers.com">http://asmjournal.freeservers.com</a>!!!<br /><br /><strong>Ernie:</strong> That would be great. Check the APJ site for guidelines on how to write the articles (in case you have forgotten them) and make sure that anything you're writting hasn't been published before! :)<br /><br /><strong>ChimpFace9000:</strong> Up until issue #4 Xbios2 was doing a column called &quot;The C standard library in Assembly&quot; but it has ended. If you want to continue his footsteps, please do so! And thanks for the snippets, it was something like that I was looking for!<br /><br /><strong>vcv:</strong> I'll give your snippet a look and we'll see :) don't place <em>invoke</em>'s and <em>include</em>'s and <em>bla, bla, bla</em> in a snippet though. Check the APJ issues for a general view of how they should be...<br /><br />Thanks everyone,<br /><br />Tiago Sanches</div>
    <div class="meta">Posted on 2001-08-21 16:22:41 by Tiago Sanches</div>
   </div>
   <div class="post" id="post-4417">
    <div class="subject"><a href="#post-4417">Assembly Snippets anyone?</a></div>
    <div class="body">I think, for many serious asm (and not only asm) programmers<br />would be interesting new implementation of useful classical<br />algorithm.<br />So, fortunatly, we all have seen recent new realisations of BM algorithm:<br />2 - by Hutch<br />1 - by bulyNaza<br /><br />With their permission I would recommend to publish all three<br />procedures as three different approaches to one of most important task  - binary string search.<br /><br />This is interesting not only to Win32asm programmers -<br />but to any programmer working in x86 32 bit machine.<br />With both scientific algorithmic point of view and proctical usage.</div>
    <div class="meta">Posted on 2001-08-22 06:07:21 by The Svin</div>
   </div>
   <div class="post" id="post-4489">
    <div class="subject"><a href="#post-4489">Assembly Snippets anyone?</a></div>
    <div class="body"><strong>The Svin:</strong> That would be great, if you want send me the files or post them here at the board in the next few days. Thanks!</div>
    <div class="meta">Posted on 2001-08-22 15:41:33 by Tiago Sanches</div>
   </div>
   <div class="post" id="post-4501">
    <div class="subject"><a href="#post-4501">Assembly Snippets anyone?</a></div>
    <div class="body">Heres some of the basic trig functions not directly supported on the FPU. If you want them.</div>
    <div class="meta">Posted on 2001-08-22 17:12:03 by EÃ³in</div>
   </div>
   <div class="post" id="post-4564">
    <div class="subject"><a href="#post-4564">Assembly Snippets anyone?</a></div>
    <div class="body"><strong>Tiago Sanches</strong>:<br />&amp;nbsp;&amp;nbsp;&amp;nbsp;I'll create a CGI message board using 32bit PE console format.  It'll highlight STDIO, Environment variables, Forms, and file I/O.  I wrote a similar app in PERL when I was first learning CGI.  I'll try to comment the hell out of it.  When is issue 9 &amp; 10 coming out?</div>
    <div class="meta">Posted on 2001-08-23 00:16:55 by eet_1024</div>
   </div>
   <div class="post" id="post-4585">
    <div class="subject"><a href="#post-4585">Assembly Snippets anyone?</a></div>
    <div class="body"><strong>Here is a simple CGI Tutoria</strong> -  I even wrote an article on it:</div>
    <div class="meta">Posted on 2001-08-23 07:40:11 by eet_1024</div>
   </div>
   <div class="post" id="post-4637">
    <div class="subject"><a href="#post-4637">Assembly Snippets anyone?</a></div>
    <div class="body">Just a thought that there might some interrest for a tutorial that covers serial/parrallel port controlling for the outside world. Ie for robotics or similar. <br />Cheers<br /><br />fiddler:alright:</div>
    <div class="meta">Posted on 2001-08-23 16:41:05 by fiddler</div>
   </div>
   <div class="post" id="post-4654">
    <div class="subject"><a href="#post-4654">Assembly Snippets anyone?</a></div>
    <div class="body">The Svin,  thanks!<br /><br />Tiago Sanches,<br />I agree with The Svin and here is the code:<br /><br /><pre><code>; Fastest binary string search algo with<br />; PPlain and PMMX type of processors<br />; &lt;c&gt; 2001 by buliaNaza           ;<br />;                                 ;<br />.data?                            ;<br /> align 4                          ; !!!<br /> skip_table   DD   256 Dup&#40;?&#41;     ; skip table<br />;				  ;<br />;.................................;<br />; Usage&#58; esi -&gt;pBuffer            ; esi-&gt;buffer with bytes to be searched through<br />;        ebp = lenBuffer          ; ebp =length of the buffer<br />;        ebx -&gt;pSrchData          ; ebx-&gt;pointer to data to be searched for<br />;        edx = lenSrchData        ; edx=length of data  to be searched for<br />;        edi -&gt;pskip_table        ; edi-&gt;pointer to skip table &#40;must be aligned&#41;<br />;        call BMCaseSNext         ;<br />;.......................................;<br />.code					;<br />BMCaseSNext&#58;                            ;<br />              cmp  edx, 4               ; edx = length of data to be searched for<br />              jg   Boyer_Moore          ;<br />;... Brute Force Search ................; for 4 digits or less only!<br />              mov  edi, &#91;ebx&#93;           ; edi = dword of data to be searched for<br />              mov  ecx, 5		;<br />              sub  ecx, edx		;<br />              lea  eax, &#91;esi+edx-1&#93;     ; eax-&gt;new starting address in pBuffer<br />              shl  ecx, 3 		; *8<br />              mov  bl,  &#91;ebx+edx-1&#93; 	; get last byte only<br />              mov  bh,  bl		; copy in bh 		<br />              bswap edi			;<br />              shr  edi, cl		;<br />              add  ebp, esi             ; ebp -&gt;end of buffer<br />              and  ebx, 0FFFFh      	; ebx = need the bx word only<br />              mov  ecx, ebx             ;<br />              mov  esi, edx             ; esi=edx = length of data to be searched for<br />              shl  ecx, 16              ;<br />              test eax, 3               ;<br />              lea  ebx, &#91;ebx+ecx&#93;       ;<br />              jz   Search_2             ;<br />Unalign_1&#58;                              ;<br />              cmp  eax, ebp             ; ebp -&gt;end of buffer<br />              jge  Not_found            ;<br />              mov  cl, &#91;eax&#93;            ;<br />              inc  eax                  ;<br />              cmp  cl, bl               ;<br />              jz   Compare_1            ;<br />Search_1&#58;                               ;<br />              test eax, 3               ;<br />              jnz  Unalign_1            ;<br />Search_2&#58;                               ;<br />              cmp  eax, ebp             ;u ebp -&gt;end of buffer<br />              jge  Not_found            ;v<br />              mov  ecx, &#91;eax&#93;           ;u scasb for the last byte from pSrchData<br />              add  eax, 4               ;v<br />              xor  ecx, ebx             ;u<br />              mov  edx, 7EFEFEFFh       ;v <br />              add  edx, ecx             ;u<br />              xor  ecx, -1              ;v<br />              xor  ecx, edx             ;u<br />              mov  edx, &#91;eax-4&#93;         ;v<br />              and  ecx, 81010100h       ;u<br />              jz   Search_2             ;v<br />					;<br />              cmp  dl, bl               ;<br />              jz   Minus_4              ;<br />              cmp  dh, bl               ;<br />              jz   Minus_3              ;<br />              shr  edx, 16              ;<br />              cmp  dl, bl               ;<br />              jz   Minus_2              ;<br />              cmp  dh, bl               ;<br />              jz   Compare_1            ;<br />              jnz  Search_2             ;<br />Minus_2&#58;                                ;<br />              dec  eax                  ;<br />              jnz  Compare_1            ;<br />Minus_4&#58;                                ;<br />              sub  eax, 3               ;<br />              jnz  Compare_1            ;<br />Minus_3&#58;                                ;<br />              sub  eax, 2               ;<br />Compare_1&#58;                              ;<br />              mov  edx, edi             ;<br />              cmp  eax, ebp             ; ebp -&gt;end of buffer<br />              jg   Not_found            ;<br />              cmp  esi, 1               ;<br />              jz   Found_1              ;<br />              cmp  dl, &#91;eax-2&#93;          ; eax-&gt;pBuffer<br />              jnz  Search_1             ;<br />              cmp  esi, 2               ;<br />              jz   Found_1              ;<br />              cmp  dh, &#91;eax-3&#93;          ; eax-&gt;pBuffer<br />              jnz  Search_1             ;<br />              cmp  esi, 3               ;<br />              jz   Found_1              ;<br />              shr  edx, 16              ;<br />              mov  cl, &#91;eax-4&#93;          ; eax-&gt;pBuffer<br />              cmp  dl, cl               ;<br />              jnz  Search_1             ;<br />Found_1&#58;                                ;<br />              sub  eax, esi             ; in eax-&gt;pointer to 1st<br />              ret                       ; occurrence of data found in pBuffer <br />;...Boyer Moore Case Sens Next Search...;<br />Boyer_Moore&#58;                            ;<br />              add  esi, ebp             ; esi-&gt;pointer to the last byte of pBuffer<br />              lea  ebx, &#91;ebx+edx-1&#93;     ; ebx-&gt;pointer to the last byte of pSrchData<br />              neg  edx                  ; edx= -lenSrchData<br />              mov  ecx, edx             ; ecx = edx = -lenSrchData<br />              add  ebp, edx             ; sub lenSrchData from lenBuffer<br />              mov  eax, 256             ; eax = counter<br />              xor  ebp, -1              ; not ebp-&gt;current negative index<br />MaxSkipLens&#58;                            ;<br />              mov  &#91;eax*4+edi-4&#93;, edx   ; filling up the skip_table with -lenSrchData<br />              mov  &#91;eax*4+edi-8&#93;, edx   ;<br />              mov  &#91;eax*4+edi-12&#93;, edx  ;<br />              mov  &#91;eax*4+edi-16&#93;, edx  ;<br />              mov  &#91;eax*4+edi-20&#93;, edx  ;<br />              mov  &#91;eax*4+edi-24&#93;, edx  ;<br />              mov  &#91;eax*4+edi-28&#93;, edx  ;<br />              mov  &#91;eax*4+edi-32&#93;, edx  ;<br />              mov  &#91;eax*4+edi-36&#93;, edx  ;<br />              mov  &#91;eax*4+edi-40&#93;, edx  ;<br />              mov  &#91;eax*4+edi-44&#93;, edx  ;<br />              mov  &#91;eax*4+edi-48&#93;, edx  ;<br />              mov  &#91;eax*4+edi-52&#93;, edx  ;<br />              mov  &#91;eax*4+edi-56&#93;, edx  ; <br />              mov  &#91;eax*4+edi-60&#93;, edx  ;<br />              mov  &#91;eax*4+edi-64&#93;, edx  ;<br />              mov  &#91;eax*4+edi-68&#93;, edx  ;<br />              mov  &#91;eax*4+edi-72&#93;, edx  ;<br />              mov  &#91;eax*4+edi-76&#93;, edx  ;<br />              mov  &#91;eax*4+edi-80&#93;, edx  ;<br />              mov  &#91;eax*4+edi-84&#93;, edx  ;<br />              mov  &#91;eax*4+edi-88&#93;, edx  ;<br />              mov  &#91;eax*4+edi-92&#93;, edx  ;<br />              mov  &#91;eax*4+edi-96&#93;, edx  ;<br />              mov  &#91;eax*4+edi-100&#93;, edx ;<br />              mov  &#91;eax*4+edi-104&#93;, edx ;<br />              mov  &#91;eax*4+edi-108&#93;, edx ;<br />              mov  &#91;eax*4+edi-112&#93;, edx ;<br />              mov  &#91;eax*4+edi-116&#93;, edx ;<br />              mov  &#91;eax*4+edi-120&#93;, edx ;<br />              mov  &#91;eax*4+edi-124&#93;, edx ;<br />              mov  &#91;eax*4+edi-128&#93;, edx ;<br />              sub  eax, 32              ;<br />              jne  MaxSkipLens          ; loop while eax=0<br />SkipLens&#58;                               ;<br />              mov  al, &#91;ecx+ebx+1&#93;      ;u filling up with the real negative offset of every<br />              inc  ecx                  ;v byte from the pSrchData, starting from the last to<br />              mov  &#91;eax*4+edi&#93;, ecx     ;u the first, at the offset in skip_table equal to the<br />              jne  SkipLens             ;v ASCII code of the byte, multiplied by 4<br />Search&#58;                                 ;  the main searching loop-&gt; FAST PART<br />              mov  al, &#91;esi+ebp&#93;        ;u get a byte  from pBuffer -&gt;esi +ebp<br />              mov  ecx, edx             ;v ecx=edx= -lenSrchData<br />              sub  ebp, &#91;eax*4+edi&#93;     ;u sub negative offset for this byte from skip_table<br />              jc   Search               ;v if dword ptr &#91;eax*4+edi&#93; AND ebp &lt;&gt; 0 loop again<br />              lea  ebp, &#91;ebp+esi+1&#93;     ;u current negative index -&gt; next byte &#40;+1&#41;<br />              jge  Not_found            ;v end of pBuffer control &#40;if ebp&gt;=0 end&#41;<br />                                        ; compare previous bytes from pSrchData &#40;-&gt;ebx&#41;<br />Compare&#58;                                ; and current offset in pBuffer &#40;-&gt;ebp&#41;-&gt;SLOW PART<br />              mov  eax, &#91;ebx+ecx+1&#93;     ; one dword from pSrchData -&gt; ebx<br />              inc  ecx                  ; ecx = -lenSrchData<br />              jz   Found                ; if ecx = 0 Found&amp;Exit<br />              cmp  al, &#91;ebp+ecx-1&#93;      ; ebp-&gt;pBuffer<br />              jnz  Not_equal            ;<br />              inc  ecx                  ; ecx = -lenSrchData<br />              jz   Found                ; if ecx = 0 Found&amp;Exit<br />              cmp  ah, &#91;ebp+ecx-1&#93;      ; ebp-&gt;pBuffer<br />              jnz  Not_equal            ;<br />              inc  ecx                  ; ecx = -lenSrchData<br />              jz   Found                ; if ecx=0 Found&amp;Exit<br />              shr  eax, 16              ;<br />              inc  ecx                  ;<br />              cmp  al, &#91;ebp+ecx-2&#93;      ; ebp-&gt;pBuffer<br />              jnz  Not_equal            ;<br />              test ecx, ecx             ; ecx = -lenSrchData<br />              jz   Found                ; if ecx=0 Found&amp;Exit<br />              cmp  ah, &#91;ebp+ecx-1&#93;      ; ebp-&gt;pBuffer<br />              jz   Compare              ;<br />Not_equal&#58;                              ;<br />              sub  eax, eax             ; eax = 0<br />              sub  ebp, esi             ; restore ebp-&gt;current negative index<br />              jl   Search               ; end of pBuffer control<br />Not_found&#58;                              ;<br />              or   eax, -1              ; Exit with flag Not_Found eax=-1<br />              ret                       ;<br />Found&#58;                                  ;<br />              lea  eax, &#91;ebp+edx&#93;       ; in eax-&gt;pointer to 1st<br />              ret                       ; occurrence  of data found in pBuffer<br /></code></pre></div>
    <div class="meta">Posted on 2001-08-23 20:30:53 by buliaNaza</div>
   </div>
   <div class="post" id="post-4870">
    <div class="subject"><a href="#post-4870">Assembly Snippets anyone?</a></div>
    <div class="body"><strong>buliaNaza &amp; The Svin:</strong> Thanks, now got both your codes and now I'm going to mail Hutch to see if I can use his, and voila! we have an issue challenge for #9 and it be complete!! :)<br /><br />Thanks guys,<br /><br />Tiago Sanches</div>
    <div class="meta">Posted on 2001-08-25 15:40:42 by Tiago Sanches</div>
   </div>
   <div class="post" id="post-4921">
    <div class="subject"><a href="#post-4921">Assembly Snippets anyone?</a></div>
    <div class="body">Tiago,<br /><br />I have the three latest versions ready to publish and have the documentation written up for them, it contains a description of how a generic Boyer Moore search algorithm works, the code and design considerations of implementing them in assembler and two variations that are based on the two seperate shifts used, a Horspool style variation and a simplified version.<br /><br />There is explanation of the 2 variations and how they perform on different processors.<br /><br />I will allow the complete document to be published but will not allow any modification of either the algorithms or the documentation attached to them.<br /><br />Let me know if you are interested, the algorithms are Copyright MASM32 and are intended for the next version.<br /><br />Regards,<br /><br />hutch@pbq,com.au</div>
    <div class="meta">Posted on 2001-08-26 02:03:35 by hutch--</div>
   </div>
  </div>
 </body>
</html>