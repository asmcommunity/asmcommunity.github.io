<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Allocate an array - Performance question - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18789" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18789">Allocate an array - Performance question</a></p>
   <div class="post" id="post-145451">
    <div class="subject"><a href="#post-145451">Allocate an array - Performance question</a></div>
    <div class="body">I have to allocate an array of pointers. The pointers are about 5000.<br />The array is about 5000*4 = 20Kb<br /><br />Should I use VirtualAlloc and waste some bytes (because of the page granularity) or should I use HeapAlloc?<br />If I call VirtualAlloc I know that my array is page aligned, wich is the best in terms of speed<br />But if I call HeapAlloc, do I have some kind of alignment?<br /><br />I need speed optimization and not size optimization</div>
    <div class="meta">Posted on 2004-07-05 13:01:36 by greenant</div>
   </div>
   <div class="post" id="post-145453">
    <div class="subject"><a href="#post-145453">Allocate an array - Performance question</a></div>
    <div class="body">For speed optimization always use VirtualAlloc it is the fastest and best. The page size is only 4KB so you are wasting an insignificant amount of memory anyway, granularity is not an issue with 20KB. though for something as small as 20K any allocation scheme is just about as fast as any other.</div>
    <div class="meta">Posted on 2004-07-05 14:00:42 by donkey</div>
   </div>
   <div class="post" id="post-145455">
    <div class="subject"><a href="#post-145455">Allocate an array - Performance question</a></div>
    <div class="body">I will use VirtualAlloc.</div>
    <div class="meta">Posted on 2004-07-05 14:32:41 by greenant</div>
   </div>
   <div class="post" id="post-145487">
    <div class="subject"><a href="#post-145487">Allocate an array - Performance question</a></div>
    <div class="body">Confirmed - HeapAlloc pages are always dword-aligned :)</div>
    <div class="meta">Posted on 2004-07-06 03:15:42 by Homer</div>
   </div>
  </div>
 </body>
</html>