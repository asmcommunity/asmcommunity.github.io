<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>can not edit B800:0000 in pure dos - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30304" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=115">DOS &amp; BIOS</a> &raquo; <a href="../?id=30304">can not edit B800:0000 in pure dos</a></p>
   <div class="post" id="post-213467">
    <div class="subject"><a href="#post-213467">can not edit B800:0000 in pure dos</a></div>
    <div class="body">Hello folks,<br /><br />I write the below sample program named &quot;h1.asm&quot;?<br /><pre><code><br />assume cs:code<br /><br />code segment<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ax,0B800H<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov ds,ax<br /> &nbsp; &nbsp; &nbsp; &nbsp;mov bx,0<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov byte ptr ds:,&#039;a&#039;<br /> &nbsp; &nbsp; &nbsp; &nbsp;inc bx<br /><br /> &nbsp; &nbsp; &nbsp; &nbsp;mov byte ptr ds:,02<br /><br />code ends<br /><br />end<br /></code></pre><br /><br />1. In Windows platform +MASM 5.0, run &quot;command&quot; and use &quot;debug.exe&quot; to see what would happen. As step by step check, I see B800:000 is not modified as expected.<br />2. In Ubuntu 10.04 + dosemu 1.4.0.1, run the program in two ways:<br /> &nbsp; a. If exec dosemu in command line as &quot;$dosemu -dumb&quot;, yes, it&#039;s in shell mode. and then use debug to check, &quot;B800:0000&quot; can be modified as expected.<br /> &nbsp; <pre><code><br /> &nbsp; D:\masm&gt;debug h1.exe<br />-d b800:0000<br />B800:0000 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0010 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0020 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0030 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0040 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0050 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0060 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0070 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />-t<br />AX=B800 &nbsp;BX=0000 &nbsp;CX=000F &nbsp;DX=0000 &nbsp;SP=0000 &nbsp;BP=0000 &nbsp;SI=0000 &nbsp;DI=0000<br />DS=07D2 &nbsp;ES=07D2 &nbsp;SS=07E2 &nbsp;CS=07E2 &nbsp;IP=0003 &nbsp; NV UP DI PL NZ NA PO NC<br />07E2:0003 8ED8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOV &nbsp; &nbsp; DS,AX<br />-t<br />AX=B800 &nbsp;BX=0000 &nbsp;CX=000F &nbsp;DX=0000 &nbsp;SP=0000 &nbsp;BP=0000 &nbsp;SI=0000 &nbsp;DI=0000<br />DS=B800 &nbsp;ES=07D2 &nbsp;SS=07E2 &nbsp;CS=07E2 &nbsp;IP=0005 &nbsp; NV UP DI PL NZ NA PO NC<br />07E2:0005 BB0000 &nbsp; &nbsp; &nbsp; &nbsp;MOV &nbsp; &nbsp; BX,0000<br />-t<br />AX=B800 &nbsp;BX=0000 &nbsp;CX=000F &nbsp;DX=0000 &nbsp;SP=0000 &nbsp;BP=0000 &nbsp;SI=0000 &nbsp;DI=0000<br />DS=B800 &nbsp;ES=07D2 &nbsp;SS=07E2 &nbsp;CS=07E2 &nbsp;IP=0008 &nbsp; NV UP DI PL NZ NA PO NC<br />07E2:0008 C60761 &nbsp; &nbsp; &nbsp; &nbsp;MOV &nbsp; &nbsp; BYTE PTR ,61 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DS:0000=00<br />-t<br />AX=B800 &nbsp;BX=0000 &nbsp;CX=000F &nbsp;DX=0000 &nbsp;SP=0000 &nbsp;BP=0000 &nbsp;SI=0000 &nbsp;DI=0000<br />DS=B800 &nbsp;ES=07D2 &nbsp;SS=07E2 &nbsp;CS=07E2 &nbsp;IP=000B &nbsp; NV UP DI PL NZ NA PO NC<br />07E2:000B 43 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INC &nbsp; &nbsp; BX<br />-t<br />AX=B800 &nbsp;BX=0001 &nbsp;CX=000F &nbsp;DX=0000 &nbsp;SP=0000 &nbsp;BP=0000 &nbsp;SI=0000 &nbsp;DI=0000<br />DS=B800 &nbsp;ES=07D2 &nbsp;SS=07E2 &nbsp;CS=07E2 &nbsp;IP=000C &nbsp; NV UP DI PL NZ NA PO NC<br />07E2:000C C60702 &nbsp; &nbsp; &nbsp; &nbsp;MOV &nbsp; &nbsp; BYTE PTR ,02 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DS:0001=00<br />-t<br />AX=B800 &nbsp;BX=0001 &nbsp;CX=000F &nbsp;DX=0000 &nbsp;SP=0000 &nbsp;BP=0000 &nbsp;SI=0000 &nbsp;DI=0000<br />DS=B800 &nbsp;ES=07D2 &nbsp;SS=07E2 &nbsp;CS=07E2 &nbsp;IP=000F &nbsp; NV UP DI PL NZ NA PO NC<br />07E2:000F 158B46 &nbsp; &nbsp; &nbsp; &nbsp;ADC &nbsp; &nbsp; AX,468B<br />-d b800:0000<br />B800:0000 &nbsp;61 02 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; a...............<br />B800:0010 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0020 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0030 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0040 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0050 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0060 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br />B800:0070 &nbsp;00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 &nbsp; ................<br /><br /> &nbsp; </code></pre><br /><br /><br /><br /> &nbsp; b. If exec dosemu in command line as &quot;$dosemu&quot;, and run the program again, the symptom is as same as 1.<br /><br />3. In Windows, I replace &quot;mov ax,0B800H&quot; to &quot;mov ax,2000H&quot; and try again, it would be edited well. So I wonder if it is coursed by &quot;B800&quot; segment address. <br /><br />All above make me confused, would you give me any suggestion?<br /><br />Thanks in advanced,<br /><br />Phillip<br /></div>
    <div class="meta">Posted on 2010-11-10 23:57:53 by Phillip</div>
   </div>
   <div class="post" id="post-213475">
    <div class="subject"><a href="#post-213475">Re: can not edit B800:0000 in pure dos</a></div>
    <div class="body"><strong>Phillip</strong>,<br /><br />In DOS (and NTVDM as well) videobuffer is <em>shared</em> between <strong>debug</strong>&#039;s output and your code&#039;s. Didn&#039;t you forgot about scrolling? Hint: use <strong>cls</strong> before running <strong>debug h1.exe</strong>, then execute code all at once with <strong>g f</strong> â€” you&#039;ll see the difference.<br /><br /><strong>t 6</strong>, while giving you details about instructions&#039; execution, will use 6*4==24 lines and happily scroll the result off screen. You may use <strong>mode con: lines=50</strong> before running <strong>debug</strong>, though.<br /><br />There are full screen debuggers that perform screen buffer swapping, you may find them useful.</div>
    <div class="meta">Posted on 2010-11-12 11:11:38 by baldr</div>
   </div>
  </div>
 </body>
</html>