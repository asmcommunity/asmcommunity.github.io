<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to add binary files together - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=547" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=547">How to add binary files together</a></p>
   <div class="post" id="post-3303">
    <div class="subject"><a href="#post-3303">How to add binary files together</a></div>
    <div class="body">Hi all<br /><br />can anybody shed some light on how to add 2 or more binary files together.<br />Under dos I think that you used to use the copy command with some switches but I have forgotten and cannot find any info anywhere.<br /><br />Cheers<br />fiddler<br />:grin:</div>
    <div class="meta">Posted on 2001-08-09 01:43:32 by fiddler</div>
   </div>
   <div class="post" id="post-3307">
    <div class="subject"><a href="#post-3307">How to add binary files together</a></div>
    <div class="body">Hi,  in a dos box type<br /><br />copy /b file1+file2[+...fileN] <br /><br />file2 gets appended to the end of file1<br />if newfilename isn't specified then file1 gets overwritten<br /><br />/b is used to indicate binary file(s). iF ascii files then use /a<br /> you can mix ascii and binary files like this<br /><br />copy /b file1 + file2 /a + file3 /b + file4 newfilename<br />hope that helps<br /><br />actually in a dos window type copy /?<br />this should give some info<br /><br />the MArtial</div>
    <div class="meta">Posted on 2001-08-09 02:14:05 by MArtial_Code</div>
   </div>
   <div class="post" id="post-3336">
    <div class="subject"><a href="#post-3336">How to add binary files together</a></div>
    <div class="body">Is there a command to extract the file back into the separate files?</div>
    <div class="meta">Posted on 2001-08-09 13:22:49 by Will</div>
   </div>
   <div class="post" id="post-3340">
    <div class="subject"><a href="#post-3340">How to add binary files together</a></div>
    <div class="body">You can use this function for splitting. It's from the heart of one of my Apps nd has some useless code in it, wich you don't need. But I'm sure, this pushes you in the correct direction :grin:<br /><pre><code><br />SplitFile proc hParent&#58;DWORD, lpDir&#58;DWORD, lpFile&#58;DWORD, lpSplit&#58;DWORD<br /><br />    cmp byte ptr &#91;lpHtml&#93;, 1<br />    jne @F<br />        invoke wsprintf, addr szHtmlPathBuffer, addr szOutputMask, \<br />                         lpDir, addr szOutputNameBuffer, addr szHtmlFile<br />        invoke CreateFile, addr szHtmlPathBuffer, GENERIC_WRITE, 0, 0, \<br />                           CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0<br />        mov hHtml, eax<br />        invoke WriteFile, hHtml, addr szHtmlStart, sizeof szHtmlStart, \<br />                          addr hWritten, 0<br />        invoke WriteFile, hHtml, addr szHtmlNewLine, 2, addr hWritten, 0<br />    @@&#58;<br /><br />    invoke CreateFile, lpFile, GENERIC_READ, FILE_SHARE_READ, 0, \<br />                       OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0<br />    mov hFile, eax ; handle der ge?ffneten datei speichern<br /><br />    invoke GetFileSize, hFile, 0<br />    mov hSize, eax ; dateigr?sse speichern<br /><br />    invoke GlobalAlloc, GHND, hSize<br />    mov hMem, eax ; speicher reservieren<br /><br />    invoke GlobalLock, eax<br />    mov pMem, eax ; pointer bekommen<br /><br />    invoke ReadFile, hFile, pMem, hSize, addr hRead, 0 ; datei lesen<br /><br />        mov esi, pMem ; buffer<br />        mov ecx, hSize ; gr?sse<br />        mov al, 84 ; mit was xor'en<br />    xorit&#58;<br />        xor &#91;esi&#93;, al ; eine super encryption &#58;-&#41;<br />        inc esi<br />        loop xorit<br /><br />    invoke atodw, lpSplit ; ascii to dword<br />    mov ecx, 1000<br />    mul ecx ; eax * ecx<br />    mov lpSize, eax<br /><br />    mov eax, 0<br />    mov lpX, eax ; lpX auf null setzen<br /><br />    mov eax, hSize<br />    mov ecx, lpSize<br />    div ecx<br />    shl eax, 16 ; gr??e in high word schieben<br />    invoke SendMessage, hProgressBar, PBM_SETRANGE, 0, eax<br /><br />    invoke GetTickCount<br />    mov lpTimerStart, eax<br /><br />    .while hSize != 0<br />        inc lpX ; counter erh?hen<br /><br />        .if lpX &lt;= 9 ; wir wollen f?hrende nullen haben<br />            invoke wsprintf, addr szlpX, addr sz00Null, lpX ; 001<br />        .elseif lpX &lt;= 99<br />            invoke wsprintf, addr szlpX, addr sz0Null, lpX ; 010<br />        .elseif lpX &lt;= 999<br />            invoke wsprintf, addr szlpX, addr szNull, lpX ; 100<br />        .else ; h?her als 999<br />            invoke MessageBox, hParent, addr szCountErrorMsg, \<br />                               addr szErrorCaption, MB_ICONERROR<br />            dec lpX<br />            .break<br />        .endif<br /><br />        invoke wsprintf, addr szOutputBuffer, addr szOutputMask, lpDir, \<br />                         addr szOutputNameBuffer, addr szlpX ; dateinamen<br /><br />            mov eax, lpSize<br /><br />            .if hSize &lt;= eax ; wenn wir am ende der datei sind ...<br />                invoke CreateFile, addr szOutputBuffer, GENERIC_WRITE, 0, 0, \<br />                                   CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0<br />                push eax<br />                invoke WriteFile, eax, pMem, hSize, addr hWritten, 0<br />                ; ... schreiben wir den rest rein<br />                pop eax<br />                invoke CloseHandle, eax<br /><br />                cmp byte ptr &#91;lpHtml&#93;, 1<br />                jne @F<br />                    invoke wsprintf, addr szHtmlTableBuffer, \<br />                                     addr szHtmlTable, \<br />                                     addr szOutputNameBuffer, addr szlpX, \<br />                                     addr szOutputNameBuffer, addr szlpX<br />                    invoke WriteFile, hHtml, addr szHtmlTableBuffer, \<br />                                      sizeof szHtmlTableBuffer, \<br />                                      addr hWritten, 0<br />                    invoke WriteFile, hHtml, addr szHtmlNewLine, 2, \<br />                                      addr hWritten, 0<br />                @@&#58;<br /><br />                .break<br />            .endif<br /><br />        invoke CreateFile, addr szOutputBuffer, GENERIC_WRITE, \<br />                           0, 0, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0<br /><br />        push eax<br />        invoke WriteFile, eax, pMem, lpSize, addr hWritten, 0<br />        pop eax<br />        invoke CloseHandle, eax<br /><br />        cmp byte ptr &#91;lpHtml&#93;, 1<br />        jne @F<br />            invoke wsprintf, addr szHtmlTableBuffer, \<br />                             addr szHtmlTable, \<br />                             addr szOutputNameBuffer, addr szlpX, \<br />                             addr szOutputNameBuffer, addr szlpX<br />            invoke WriteFile, hHtml, addr szHtmlTableBuffer, \<br />                              sizeof szHtmlTableBuffer, \<br />                              addr hWritten, 0<br />            invoke WriteFile, hHtml, addr szHtmlNewLine, 2, addr hWritten, 0<br />        @@&#58;<br /><br />        mov eax, lpSize<br />        sub hSize, eax ; size verkleinern<br />        add pMem, eax ; pointer verschieben<br /><br />        invoke SendMessage, hProgressBar, PBM_DELTAPOS, 1, 0<br />    .endw<br /><br />    invoke GetTickCount<br />    sub eax, lpTimerStart<br />    push eax<br /><br />    invoke GlobalUnlock, pMem ; speicher freigeben<br />    invoke GlobalFree, hMem<br /><br />    cmp byte ptr &#91;lpHtml&#93;, 1<br />    jne @F<br />        invoke WriteFile, hHtml, addr szHtmlEnd, sizeof szHtmlEnd, \<br />                          addr hWritten, 0<br />        invoke WriteFile, hHtml, addr szHtmlNewLine, 2, addr hWritten, 0<br />        invoke CloseHandle, hHtml<br />    @@&#58;<br /><br />    invoke CloseHandle, hFile<br /><br />    invoke SendMessage, hProgressBar, PBM_SETPOS, 0, 0<br /><br />    pop eax<br />    xchg eax, ecx<br />    mov eax, lpX<br />    ret<br />SplitFile endp<br /></code></pre></div>
    <div class="meta">Posted on 2001-08-09 15:05:00 by bazik</div>
   </div>
  </div>
 </body>
</html>