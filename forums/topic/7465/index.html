<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Bin2GreyCode -- In 3 lines of FAsm - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7465" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=7465">Bin2GreyCode -- In 3 lines of FAsm</a></p>
   <div class="post" id="post-54320">
    <div class="subject"><a href="#post-54320">Bin2GreyCode -- In 3 lines of FAsm</a></div>
    <div class="body"><pre><code>proc Bin2Grey, Bin<br />enter<br />   mov   eax, &#91;Bin&#93;<br />   shr   eax, 1<br />   xor   eax, &#91;Bin&#93;<br />return</code></pre><strong>Code used to test it with debug</strong><br /><pre><code><br />; Assume ax==0 and bx==0<br />Main&#58; inc   ax<br />      jz    Done        ; Done &#40;0xFFFF -&gt; 0x0000&#41;<br />      mov   cx, bx      ; Save bx for test<br />      mov   bx, ax<br />      shr   bx, 1<br />      xor   bx, ax      ; Grey Code = ax xor &#40;ax &gt;&gt; 1&#41;<br />      xor   cx, bx      ; cx = Bit Mask Difference<br /><br />OneBit&#58;<br />      rcr   cx, 1       ; Do bit test with Carry Flag<br />      jnc   OneBit      ; Find a Bit?<br />      jcxz  Main        ; Yes -- Any More bits?<br />      or    ax, -1      ; Yes -- Return -1 in ax<br /><br />Done&#58;<br />      int 3<br /></code></pre></div>
    <div class="meta">Posted on 2002-08-21 03:14:48 by eet_1024</div>
   </div>
  </div>
 </body>
</html>