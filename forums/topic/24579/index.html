<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Iczelion Tutorial 2 Questions - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=24579" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=24579">Iczelion Tutorial 2 Questions</a></p>
   <div class="post" id="post-179436">
    <div class="subject"><a href="#post-179436">Iczelion Tutorial 2 Questions</a></div>
    <div class="body">Near the end of tutorial 2, ADDR and OFFSET are discussed.&nbsp; I understand ADDR is able to retrieve an address for a local/global variable as long as the label is defined prior to it&#39;s use.&nbsp; I understand OFFSET is able to retrieve only global variables and can forwad reference.&nbsp; Does this mean that it&#39;s good/normal practice to use ADDR all of the time?&nbsp; <br /><br />Does ADDR use more CPU cycles than OFFSET since ADDR expands to two more instructions?<br />e.g.<br /><br />LEA EAX, localVar<br />PUSH EAX<br /><br />Thanks.</div>
    <div class="meta">Posted on 2006-04-11 15:06:02 by jr_dwj</div>
   </div>
   <div class="post" id="post-179437">
    <div class="subject"><a href="#post-179437">Re: Iczelion Tutorial 2 Questions</a></div>
    <div class="body">OFFSET is calculated at compile time. Generally you want to use OFFSET for variables that are globally defined and the address never changes. ADDR can be used on local variables (unlike OFFSET) because it calculates the address during execution.</div>
    <div class="meta">Posted on 2006-04-11 15:09:56 by Synfire</div>
   </div>
   <div class="post" id="post-179439">
    <div class="subject"><a href="#post-179439">Re: Iczelion Tutorial 2 Questions</a></div>
    <div class="body">Local variables are located in stack, because the stack use a regisrter and you dont know the value of such a register at assembly/compile time, then you dont know wich number (addres) is ebp+4 or ebp-4.<br /><br />See the diference of a label (address) at your assembly in code or data (the address can be calculated from the start of the section that will be otuput to the object file),&nbsp; in tat moment the assembler know where are &quot;the things&quot; or the numbers for such addresses.</div>
    <div class="meta">Posted on 2006-04-11 16:06:27 by rea</div>
   </div>
   <div class="post" id="post-179443">
    <div class="subject"><a href="#post-179443">Re: Iczelion Tutorial 2 Questions</a></div>
    <div class="body">Do a test:<br /><br />make 2 variables: one global (var1), and 1 local (on the stack) (var2). then do<br /><br />mov eax, variable1<br />mov ecx, variable2<br />mov edx, offset variable1<br />mov eax, addr variabl2<br /><br />then see (using a debugger) how it looks like. Seeing something yourself is much better than reading about it. ;)</div>
    <div class="meta">Posted on 2006-04-11 18:49:02 by ti_mo_n</div>
   </div>
  </div>
 </body>
</html>