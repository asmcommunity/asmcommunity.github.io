<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How do I detect when enter's pressed in a richedit control? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19835" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19835">How do I detect when enter's pressed in a richedit control?</a></p>
   <div class="post" id="post-152431">
    <div class="subject"><a href="#post-152431">How do I detect when enter's pressed in a richedit control?</a></div>
    <div class="body">Hi everybody,<br />I am writing a single-line richedit control that the user can enter some search words into and then press enter to start the search. At the moment I have sent an EM_SETEVENTMASK message with ENM_KEYEVENTS, handle the keystrokes and look for a VK_RETURN. However, when I use an IME (Input Method Editor) in say Japanese and enter some text and then convert it (from romaji into hiragana and kanji) by pressing enter, it receives a VK_RETURN too. Is there anyway I can stop this from happening, perhaps by working out if the IME is still composing when enter is pressed, or using dialog boxes or something? Does anybody know any other way of responding to a enter in the richedit control without using EM_SETEVENTMASK? Thanks.</div>
    <div class="meta">Posted on 2004-11-06 00:53:51 by StefanD</div>
   </div>
   <div class="post" id="post-152438">
    <div class="subject"><a href="#post-152438">How do I detect when enter's pressed in a richedit control?</a></div>
    <div class="body">StefanD,<br /><br />I have no way of testing a rich edit control using the IME technique but if you can acces characters as they are typed you can process what you allow and what you do not with a subclass on the edit control processing the WM_CHAR message.<br /><br />Just test the wParam of the WM_CHAR and you can accept it or return zero if you don't.</div>
    <div class="meta">Posted on 2004-11-06 05:31:57 by hutch--</div>
   </div>
   <div class="post" id="post-152440">
    <div class="subject"><a href="#post-152440">How do I detect when enter's pressed in a richedit control?</a></div>
    <div class="body">It okay, I've figured out the solution. When you press enter and finish composition in the IME, the IME sends a WM_KEYUP but not a WM_KEYDOWN message for 'enter', so I changed that and it works. By the way I'm working on a dictionary searcher for foreign languages and also for english using the international phonetic alphabet.</div>
    <div class="meta">Posted on 2004-11-06 06:00:39 by StefanD</div>
   </div>
  </div>
 </body>
</html>