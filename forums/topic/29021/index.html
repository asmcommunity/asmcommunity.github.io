<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Been out of the loop, got a question... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29021" />
    <link rel="next" href="../?id=29021&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29021">Been out of the loop, got a question...</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29021&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29021&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29021" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29021&amp;page=2">&gt;</a><a href="../?id=29021&amp;page=2">&raquo;</a></form>   <div class="post" id="post-205038">
    <div class="subject"><a href="#post-205038">Been out of the loop, got a question...</a></div>
    <div class="body">Ok, I haven&#039;t touched assembly in a couple years and I&#039;ve forgotten pretty much everything I learned before (I am, as you can see, a member, here, and did contribute for a while a long time ago, though I doubt anyone remembers me).<br /><br />I&#039;ve forgotten exactly how to do the real basic console input and output in a 32bit windows program. Pretty much all the code I&#039;ve found googling has been geared towards using actual windows, but all I want right now is the console (I don&#039;t need a fancy interface for what I&#039;m trying).<br /><br />Can anyone either give me a little bit of code, or link me to someplace that deals with 32bit console input/output (preferably geared towards NASM, as I can&#039;t stand needing to toss in a whole bunch of damn libraries and such if I don&#039;t need them, and most MASM tutorials want me to do just that).<br /><br />My goal right now is to learn enough assembly to do the necessary ASM programming required to program your own hobby operating system kernel. Most of that can be done in C, but there are parts in ASM that are unavoidable, and so I need to brush up (heavily) on my Assembly. I don&#039;t need to learn how to interface with the windows API, I just need to do basic text input and output, since my kernel will only have basic text input/output for a long time anyway.</div>
    <div class="meta">Posted on 2008-03-29 00:51:57 by Bobbias</div>
   </div>
   <div class="post" id="post-205040">
    <div class="subject"><a href="#post-205040">Re: Been out of the loop, got a question...</a></div>
    <div class="body">If you want to &quot;do the real basic console input and output in a 32bit windows program&quot; you can&#039;t avoid the win32 api.<br />If you want to &quot;program your own hobby operating system kernel&quot; then it isn&#039;t windows or even DOS - it&#039;s the BIOS or direct hardware I/O.<br />Have a look at <a target="_blank" href="http://board.flatassembler.net/forum.php?f=11">OS Construction</a> at the FASM site</div>
    <div class="meta">Posted on 2008-03-29 01:04:23 by sinsi</div>
   </div>
   <div class="post" id="post-205041">
    <div class="subject"><a href="#post-205041">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Thanks for the response, but it doesn&#039;t really help me...<br /><br />My point was that I wanted to use as little Windows API as necessary, because there&#039;s more to coding assembly than simply doing input and output. I&#039;d program in DOS if I had that on my computer, but I don&#039;t. I don&#039;t need to make a window just to output whatever calculation I might want to make. I don&#039;t even need a MessageBox. All I need is a &quot;DOS&quot; console. Plus, it&#039;s easier to take input from a console, than a window...<br /><br />I&#039;d try to get my kernel to the point where I could do basic textual I/O if it wasn&#039;t for the fact that I&#039;m currently having a hell of a time trying to get it booted in VMWare (I don&#039;t have another computer to boot it on, nor do I have an actual floppy drive in this computer, which makes some things a LOT harder).<br /><br />I don&#039;t even have linux on here (because linux seems to disagree with me and I end up breaking things like my partition tables really quickly.) So I&#039;d rather get better at assembly programming in general at the moment.<br /><br />Basically, I&#039;m just asking what I need to to to get a console application and do consol etext I/O in windows because aside from the exact calls I&#039;m going to need to make, all algorithms, text manipulation, etc. etc. etc. will more or less be the same.</div>
    <div class="meta">Posted on 2008-03-29 01:13:52 by Bobbias</div>
   </div>
   <div class="post" id="post-205044">
    <div class="subject"><a href="#post-205044">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Its easier to take input from a console than a window?<br />I disagree.<br />Common controls such as EDIT are windows.<br />Getting data from them is not more difficult than getting data from a console stream.<br /><br /><br /><br /></div>
    <div class="meta">Posted on 2008-03-29 11:57:58 by Homer</div>
   </div>
   <div class="post" id="post-205047">
    <div class="subject"><a href="#post-205047">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Bobbias, I remember you. Or your interesting nick :)<br />Console input/output is done via &quot;int 21h&quot; iirc, function 3 iirc. <br />I don&#039;t know which interrupts/&quot;functions&quot; are implemented by BIOS alone, and which are added later by DOS - you have to look-up materials like the ones Sinsi gave. <br />In the worst case, you&#039;ll handle the keyboard semi-directly and draw the screen yourself in text-mode :P (addresses A000 or B000 ?)<br />Maybe you also forget that for 32-bit, you have to switch to protected-mode. <br />It&#039;s kinda a mess initially. <br /><br />what Sinsi meant for &quot;console under windows&quot; is the WriteFile/ReadFile, which are internally used by the C funcs printf() and scanf(). Not fancy GUI. <br />I think VMWare makes things a lot easier. Faster boots, combined with some custom app to update the partition with your new kernel should be great. </div>
    <div class="meta">Posted on 2008-03-29 20:34:28 by Ultrano</div>
   </div>
   <div class="post" id="post-205053">
    <div class="subject"><a href="#post-205053">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Well, nice to see that there&#039;s some memory there, lol.<br /><br />Well, there&#039;s a whole bunch of wasted space and such setting up a window and such, I figured it would probably take less space etc. (I&#039;m trying to make this compact, not waste time dealing with unnecessary windows only stuff, etc.) to do this using the basic text I/O supported in windows using a console.<br /><br />For example, I&#039;m trying to make something that might do something like this:<br /><br /><pre><code><br />int main()<br />{<br />	int NumA, NumB, NumC;<br />	<br />	cout &lt;&lt; &quot;This is a basic demonstration of what I&#039;m talking about...&quot; &lt;&lt; endl;<br />	cout &lt;&lt; &quot;Input a number:&quot;;<br />	cin &gt;&gt; NumA;<br />	cout &lt;&lt; &quot;Now input a second number:&quot;;<br />	cin &gt;&gt; NumB;<br />	NumC = NumA + NumB;<br />	cout &lt;&lt; &quot;NumA + NumB = &quot; &lt;&lt; NumC &lt;&lt; endl;<br /><br />	return 0;<br />}</code></pre><br /><br />This is C++, and a LOT more basic than what I plan on actually doing (I&#039;ll figure out something advanced to do so that I use a lot of math, and loops, and so-forth, maybe a recursive routine), but the code serves to show you what I want to do (in windows, for now.)<br /><br />I&#039;ll tackle all the VGA textmode stuff when I&#039;m working on the OS. For now, I want to work in windows simply because it&#039;s a lot easier to test my ASM. Once I&#039;m confident that I&#039;m good enough with ASM again, I&#039;ll get back onto working on the OS.<br /><br />(Oh, and disregard anything sloppy or messed up in that C++ stuff, that was me being lazy and typing it up in notepad, so if anything&#039;s weird, just ignore it, lol. I&#039;m one of those coders constantly fixing little things like forgotten semicolons and stupid stuff like that when the compiler complains.)</div>
    <div class="meta">Posted on 2008-03-30 13:31:44 by Bobbias</div>
   </div>
   <div class="post" id="post-205055">
    <div class="subject"><a href="#post-205055">Re: Been out of the loop, got a question...</a></div>
    <div class="body">You could be using some nifty macros for input and output... Look at the following:<br /><br /><pre><code><br />.386<br />.model flat,stdcall<br />option casemap:none<br /><br />include&nbsp; &nbsp;  \masm32\include\windows.inc<br />include&nbsp; &nbsp;  \masm32\include\kernel32.inc<br />include&nbsp; &nbsp;  \masm32\include\user32.inc<br />include&nbsp; &nbsp;  \masm32\include\masm32.inc<br /><br />includelib&nbsp; \masm32\lib\kernel32.lib<br />includelib&nbsp; \masm32\lib\user32.lib<br />includelib&nbsp; \masm32\lib\masm32.lib<br /><br />cout MACRO Text, LineFeed<br />	local szText<br />	local szTextSize<br />	.data<br />	szText byte Text, LineFeed<br />	szTextSize dword sizeof szText<br />	.code<br />	invoke WriteConsole, out_handle, offset szText, szTextSize, offset written, 0<br />ENDM<br /><br />string MACRO Buffer<br />	invoke lstrlen, Buffer<br />	invoke WriteConsole, out_handle,&nbsp; Buffer, eax, offset written, 0<br />ENDM<br /><br />cin MACRO Buffer, ToRead<br />	<br />	invoke ReadConsole, in_handle,&nbsp; Buffer, ToRead, offset written, 0<br />ENDM<br /><br />.data<br />hello&nbsp; &nbsp; &nbsp;  db &#039;Hello World!&#039;,0<br /> <br />.data?<br />out_handle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; ?<br />in_handle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  dd&nbsp; ?<br />pNumberOfCharsWritten&nbsp;  dd&nbsp; ?<br />written					dd	?<br />szTemp db 128 dup (?)<br />.const<br />CRLF		equ		13, 10<br /><br />.code<br /><br />start:<br /><br />&nbsp; &nbsp; call&nbsp; &nbsp; AllocConsole<br />&nbsp; &nbsp; push 	STD_OUTPUT_HANDLE<br />&nbsp; &nbsp; call	GetStdHandle<br />&nbsp; &nbsp; mov&nbsp; &nbsp;  out_handle,eax<br />&nbsp; &nbsp; push&nbsp; &nbsp; STD_INPUT_HANDLE<br />&nbsp; &nbsp; call&nbsp; &nbsp; GetStdHandle<br />&nbsp; &nbsp; mov&nbsp; &nbsp;  in_handle,eax<br /><br />	cout &quot;This is a Test&quot;, CRLF<br />	cout &quot;Tell me your name:&quot;, 0<br />	cin offset szTemp, 30<br />	string offset szTemp<br />	cout &quot;is a very nice name&quot;, CRLF <br />	cin offset szTemp, 30<br /><br />&nbsp; &nbsp; push	0<br />&nbsp; &nbsp; call&nbsp; &nbsp; ExitProcess<br /><br />END start<br /></code></pre><br /><br />I whopped up these macros pretty quick and they could certainly be better but they do seem to do a basic job.<br />I know it&#039;s masm. Hopefully this will give you an idea and you will be able to translate it to Nasm or whatever.<br /><br />Cheers</div>
    <div class="meta">Posted on 2008-03-30 15:55:16 by JimmyClif</div>
   </div>
   <div class="post" id="post-205056">
    <div class="subject"><a href="#post-205056">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Alright, thanks. I&#039;ve actually switched over to MASM now, lol. I&#039;ll use NASM for my OS related stuff, but I&#039;ll use MASM for windows ASM, just because it&#039;s a bit easier.</div>
    <div class="meta">Posted on 2008-03-31 00:19:12 by Bobbias</div>
   </div>
   <div class="post" id="post-205058">
    <div class="subject"><a href="#post-205058">Re: Been out of the loop, got a question...</a></div>
    <div class="body"><div class="quote"><br />Alright, thanks. I&#039;ve actually switched over to MASM now, lol. I&#039;ll use NASM for my OS related stuff, but I&#039;ll use MASM for windows ASM, just because it&#039;s a bit easier.<br /></div><br /><br /><a target="_blank" href="http://www.asmcommunity.net/projects/nasmx/">NASMX</a>???</div>
    <div class="meta">Posted on 2008-03-31 07:22:21 by SpooK</div>
   </div>
   <div class="post" id="post-205060">
    <div class="subject"><a href="#post-205060">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Well, coming from a C/C++ background, .IF structures are really good for making things go quickly for me in ASM. A lot easier than doing all the cmp/jxx stuff, lol.<br />Basically, I&#039;m being lazy.</div>
    <div class="meta">Posted on 2008-03-31 19:09:36 by Bobbias</div>
   </div>
   <div class="post" id="post-205061">
    <div class="subject"><a href="#post-205061">Re: Been out of the loop, got a question...</a></div>
    <div class="body">I think that&#039;s what SpooK was hinting at:<br /><br /><pre><code>%include &#039;..\..\..\inc\nasmx.inc&#039;<br />%include &#039;..\..\..\inc\win32\windows.inc&#039;<br />%include &#039;..\..\..\inc\win32\kernel32.inc&#039;<br />%include &#039;..\..\..\inc\win32\user32.inc&#039;<br />%include &#039;..\..\..\inc\win32\stdwin.inc&#039;<br /><br />entry&nbsp; &nbsp; demo10<br /><br /><br />proc&nbsp; &nbsp; demo10<br /><br />&nbsp; &nbsp; invoke&nbsp;  GetModuleHandleA, dword NULL<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , eax<br />&nbsp; &nbsp; invoke&nbsp;  WinMain, dword hInstance, dword NULL, dword NULL, dword SW_SHOWNORMAL<br />&nbsp; &nbsp; invoke&nbsp;  ExitProcess, dword NULL<br />&nbsp; &nbsp; ret<br /><br />endproc<br /><br />proc&nbsp; &nbsp; WinMain, hinst, hpinst, cmdln, dwshow<br /><br />&nbsp; &nbsp; invoke&nbsp;  LoadIconA, dword NULL, dword IDI_APPLICATION<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; edx, eax<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; eax, dword argv(hinst)<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; ebx, dword szClass<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; ecx, dword WndProc<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , eax<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , ebx<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , ecx<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , edx<br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , edx<br /><br />&nbsp; &nbsp; invoke&nbsp;  RegisterClassExA, dword wc<br /><br />&nbsp; &nbsp; StdWindow szClass, szTitle, 100, 120, 212, 232, NULL, <br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; , eax<br /><br />&nbsp; &nbsp; invoke&nbsp;  ShowWindow, dword hWnd, dword argv(dwshow)<br />&nbsp; &nbsp; invoke&nbsp;  UpdateWindow, dword hWnd<br /><br />&nbsp; &nbsp; do<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke&nbsp;  TranslateMessage, dword message<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke&nbsp;  DispatchMessageA, dword message<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke&nbsp;  GetMessageA, dword message, dword NULL, dword NULL, dword NULL<br />&nbsp; &nbsp; while eax, !=, 0<br /><br /><br />&nbsp; &nbsp; mov&nbsp; &nbsp; &nbsp; eax, dword <br />&nbsp; &nbsp; ret<br /><br />endproc<br /><br />proc&nbsp; &nbsp; WndProc, hwnd, umsg, wparam, lparam<br /><br /><br />&nbsp; &nbsp; switch dword argv(umsg)<br />&nbsp; &nbsp; case dword WM_CREATE<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; ButtonCtl szStringA, 500, 0, 0, 100, 40, argv(hwnd), <br />&nbsp; &nbsp; &nbsp; &nbsp; ButtonCtl szStringB, 501, 100, 0, 100, 40, argv(hwnd), <br />&nbsp; &nbsp; &nbsp; &nbsp; StaticCtl szContent, 502, 0, 40, 200, 40, argv(hwnd), <br />&nbsp; &nbsp; &nbsp; &nbsp; ComboCtl szContent, 503, 0, 80, 200, 100, argv(hwnd), <br />&nbsp; &nbsp; &nbsp; &nbsp; ListBoxCtl szContent, 504, 0, 106, 200, 100, argv(hwnd), <br /><br />&nbsp; &nbsp; case dword WM_COMMAND<br />&nbsp; &nbsp; &nbsp; &nbsp; if argv(wparam), ==, dword 500<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke&nbsp;  MessageBoxA, dword NULL, dword szMessageA, dword szTitle, dword MB_OK<br />&nbsp; &nbsp; &nbsp; &nbsp; elsif argv(wparam), ==, dword 501<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; invoke	MessageBoxA, dword NULL, dword szMessageB, dword szTitle, dword MB_OK<br />&nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jmp near .defwndproc<br />&nbsp; &nbsp; &nbsp; &nbsp; endif<br /><br />&nbsp; &nbsp; case dword WM_DESTROY<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; invoke&nbsp;  PostQuitMessage, dword NULL<br /><br />&nbsp; &nbsp; default<br />&nbsp; &nbsp; &nbsp; &nbsp; .defwndproc:<br />&nbsp; &nbsp; &nbsp; &nbsp; invoke&nbsp;  DefWindowProcA, dword argv(hwnd), dword argv(umsg), dword argv(wparam), dword argv(lparam)<br /><br />&nbsp; &nbsp; endswitch<br />&nbsp; &nbsp; ret<br /><br />endproc<br /><br /><br />&nbsp; &nbsp; hInstance:&nbsp;  resd 1<br />&nbsp; &nbsp; hWnd:&nbsp; &nbsp; &nbsp; &nbsp; resd 1<br /><br /><br />&nbsp; &nbsp; szStringA:&nbsp; db&nbsp; &nbsp; &quot;Click Me!&quot;, 0x0<br />&nbsp; &nbsp; szStringB:&nbsp; db&nbsp; &nbsp; &quot;Me Too!&quot;, 0x0<br />&nbsp; &nbsp; szContent:&nbsp; db&nbsp; &nbsp; &quot;Win32Nasm Demo #10&quot;, 0x0<br />&nbsp; &nbsp; szMessageA: db&nbsp; &nbsp; &quot;With the NasmX Library...&quot;, 0x0<br />&nbsp; &nbsp; szMessageB: db&nbsp; &nbsp; &quot;Assembly is a cinche!&quot;, 0x0<br />&nbsp; &nbsp; szTitle:&nbsp; &nbsp; db&nbsp; &nbsp; &quot;Demo10&quot;, 0x0<br />&nbsp; &nbsp; szClass:&nbsp; &nbsp; db&nbsp; &nbsp; &quot;Demo10Class&quot;, 0x0<br /><br />&nbsp; &nbsp; wc:<br />&nbsp; &nbsp; istruc WNDCLASSEX<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.cbSize,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  dd&nbsp; &nbsp; WNDCLASSEX_size<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.style,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; CS_VREDRAW + CS_HREDRAW<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.lpfnWndProc,&nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.cbClsExtra,&nbsp; &nbsp; &nbsp;  dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.cbWndExtra,&nbsp; &nbsp; &nbsp;  dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.hInstance,&nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.hIcon,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.hCursor,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.hbrBackground,&nbsp; &nbsp; dd&nbsp; &nbsp; COLOR_BTNFACE + 1<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.lpszMenuName,&nbsp; &nbsp;  dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.lpszClassName,&nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at WNDCLASSEX.hIconSm,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; iend<br /><br />&nbsp; &nbsp; message:<br />&nbsp; &nbsp; istruc MSG<br />&nbsp; &nbsp; &nbsp; &nbsp; at MSG.hwnd,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at MSG.message,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at MSG.wParam,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at MSG.lParam,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at MSG.time,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; &nbsp; &nbsp; at MSG.pt,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dd&nbsp; &nbsp; NULL<br />&nbsp; &nbsp; iend</code></pre></div>
    <div class="meta">Posted on 2008-03-31 19:28:23 by Synfire</div>
   </div>
   <div class="post" id="post-205062">
    <div class="subject"><a href="#post-205062">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Hmm, I like the c style loops and such, but that  type stuff is a bit uglier than wc.hInstance.</div>
    <div class="meta">Posted on 2008-03-31 23:22:05 by Bobbias</div>
   </div>
   <div class="post" id="post-205065">
    <div class="subject"><a href="#post-205065">Re: Been out of the loop, got a question...</a></div>
    <div class="body"><pre><code>%imacro ASSUME 2<br /> %ifidni %2, NOTHING<br />&nbsp; %undef %{1}.<br /> %else<br />&nbsp; %define %{1}.(_x_) %{1} + %{2}. %+ _x_<br /> %endif<br />%endmacro</code></pre><br /><br />Then use:<br /><br /><pre><code>ASSUME wc, WNDCLASSEX<br /><br />mov wc.(hInstance), eax<br />mov wc.(lpszClassName), ebx<br />mov wc.(lpfnWndProc), ecx<br />mov wc.(hIcon), edx<br />mov wc.(hIconSm), edx<br />invoke RegisterClassExA, dword wc<br />StdWindow szClass, szTitle, 100, 120, 212, 232, NULL, wc.(hInstance)<br /><br />ASSUME wc, NOTHING</code></pre></div>
    <div class="meta">Posted on 2008-04-01 10:44:32 by Synfire</div>
   </div>
   <div class="post" id="post-205083">
    <div class="subject"><a href="#post-205083">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Time for an update:<br /><br />I&#039;ve worked things out for the most part. I&#039;ve got console input and output working, and I&#039;ve come up with some ideas on game internals.<br /><br />I&#039;m thinking of using a Linked List, or some other system to hold the data for my &quot;rooms&quot;, since I plan on using text files (possibly compressed, if I&#039;m feeling really adventurous) to describe my world (I could hard-code everything, but I really don&#039;t like that idea.)<br /><br />I&#039;m not really sure what structure would best suit my needs here, and I can&#039;t seem to find anything that actually discusses making linked lists in assembly. Could anyone give me some pointers here?</div>
    <div class="meta">Posted on 2008-04-08 22:13:51 by Bobbias</div>
   </div>
   <div class="post" id="post-205084">
    <div class="subject"><a href="#post-205084">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Linked-lists are so easy, that no discussion is necessary. <br />entry struct<br />&nbsp;  pNext dd ?<br />&nbsp;  ... the data here<br />entry ends<br /><br />Do yourself a favor and make a &quot;room-editor&quot; as soon as you&#039;ve decided on the data a room will have. I had insisted obstinately to not make editors in the beginning for my games, but right from my first commercial game it became evident that I need level-editors. (and every game after that proved it further). Takes just a day to make, saves weeks. <br />Though, man... linked-lists...</div>
    <div class="meta">Posted on 2008-04-08 22:50:19 by Ultrano</div>
   </div>
   <div class="post" id="post-205090">
    <div class="subject"><a href="#post-205090">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Lol, well, I&#039;ve never actually implemented linked lists before.<br /><br />Making a level editor would also give me a chance to work on a GUI App (since this is all text based right now) as well as let me experiment with loading and saving in different formats, before I start tossing the code into my game.</div>
    <div class="meta">Posted on 2008-04-09 13:05:52 by Bobbias</div>
   </div>
   <div class="post" id="post-205107">
    <div class="subject"><a href="#post-205107">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Sorry for the double post, but I figured this thread wouldn&#039;t get any attention if I just edited my last post.<br /><br />I&#039;ve hit a bit of a problem. I&#039;m implementing a CLS function in my little game app, and no matter what I try, I keep getting this error on an invoke:<br /><br />console.asm(188) : error A2114: INVOKE argument type mismatch : argument : 4<br /><br />This error is saying there&#039;s a type mismatch with the COORD structure.<br /><br />The line in questions is:<br /><br />invoke FillConsoleOutputCharacter,hStdOut,&#039; &#039;,nConsoleSize,cHome,offset nCharsWritten<br /><br />Windows defines a COORD structure as:<br />(pseudocode for being lazy)<br /><br />COORD<br />short x<br />short y<br />END<br /><br />But the masm32 windows.inc defines a COORD as as 2 DWORDs. I tried making my own struct and using that instead, and nothing worked. I&#039;ve tried defining them as BYTEs, WORDs, and DWORDs, and still get the error. Any idea what the heck is wrong?</div>
    <div class="meta">Posted on 2008-04-12 03:06:58 by Bobbias</div>
   </div>
   <div class="post" id="post-205121">
    <div class="subject"><a href="#post-205121">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Try passing its address, not it-itself as a value. I&#039;m not sure if that&#039;s the problem because i&#039;m not very familiar with masm syntax. To me it looks like you&#039;re trying to pass the structure &#039;by value&#039; instead of &#039;by pointer&#039;. You should add something like &quot;addr&quot; or &quot;offset&quot; to tell the compiler that it should push the pointer, not the structure.<br /><br />If it was a problem with the members&#039; sizes then it would compile and (once running) produce incorrect resutls.<br /><br /><br />(PS: I&#039;m sleepy now, so I&#039;m most likely completely wrong ^^&#039; )</div>
    <div class="meta">Posted on 2008-04-13 18:00:51 by ti_mo_n</div>
   </div>
   <div class="post" id="post-205122">
    <div class="subject"><a href="#post-205122">Re: Been out of the loop, got a question...</a></div>
    <div class="body"><div class="quote"><br />Sorry for the double post, but I figured this thread wouldn&#039;t get any attention if I just edited my last post.<br /><br />I&#039;ve hit a bit of a problem. I&#039;m implementing a CLS function in my little game app, and no matter what I try, I keep getting this error on an invoke:<br /><br />console.asm(188) : error A2114: INVOKE argument type mismatch : argument : 4<br /><br />This error is saying there&#039;s a type mismatch with the COORD structure.<br /><br />The line in questions is:<br /><br />invoke FillConsoleOutputCharacter,hStdOut,&#039; &#039;,nConsoleSize,cHome,offset nCharsWritten<br /><br />Windows defines a COORD structure as:<br />(pseudocode for being lazy)<br /><br />COORD<br />short x<br />short y<br />END<br /><br />But the masm32 windows.inc defines a COORD as as 2 DWORDs. I tried making my own struct and using that instead, and nothing worked. I&#039;ve tried defining them as BYTEs, WORDs, and DWORDs, and still get the error. Any idea what the heck is wrong?<br /></div><br /><br />The COORD structure should take up a DWORD&#039;s space, so define your own as two WORDs. I&#039;ve noticed that the second argument to FillConsoleOutputCharacter is defined as a :DWORD, are you sure that an inline single quote will work in this instance with masm? Try changing that line to:<br /><br />__COORD STRUCT<br />x WORD ?<br />y WORD ?<br />__COORD ENDS<br />...<br />mov ecx, 00000020h<br />invoke FillConsoleOutputCharacter, hStdOut, ecx, nConsoleSize, cHome, Offset nCharsWritten<br /><br />I haven&#039;t tested any of that because I don&#039;t even have a copy of MASM installed anymore. But you can give it a shot.</div>
    <div class="meta">Posted on 2008-04-13 23:24:19 by Synfire</div>
   </div>
   <div class="post" id="post-205123">
    <div class="subject"><a href="#post-205123">Re: Been out of the loop, got a question...</a></div>
    <div class="body">Welcome back Bobbias<br />&quot;been out of the loop...&quot; 2 years!!!<br />talk about really nasty branch misprediction penalty :D</div>
    <div class="meta">Posted on 2008-04-14 01:46:10 by daydreamer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29021&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=29021&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="29021" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=29021&amp;page=2">&gt;</a><a href="../?id=29021&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>