<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Sorting algorithms in Assembly - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18141" />
    <link rel="next" href="../?id=18141&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18141">Sorting algorithms in Assembly</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=18141&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=18141&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="18141" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=18141&amp;page=2">&gt;</a><a href="../?id=18141&amp;page=2">&raquo;</a></form>   <div class="post" id="post-140207">
    <div class="subject"><a href="#post-140207">Sorting algorithms in Assembly</a></div>
    <div class="body">Hello,<br /><br />today I have finished a program that allows it to compare miscellaneous sorting algorithms. It has two kinds of display: a tabular and a graphical one. Furthermore you can switch between two languages, english and german (if your windows user lange is German, the german language strings are used; the english ones otherwise).<br />In the tabular representation you can compare how the implemented algorithms behave under certain conditions (presorting and size of the data). The comparable criteria are the number of comparisons / exchanges, the needed time and the additional allocated memory. The results are displayed in form of a table and can be copied to the clipboard or saved in a file.<br />The graphical representation allows to watch the different algorithms during sorting. The representation can be created using lines or points. It is possible to set delays at certain positions (after each pass, after each comparison, after each exchange) to facilitate the tracking of the sorting process. If 'after each comparison' is selected the compared elements will be marked, so that the process is even better to understand.<br /><br />09.05.2004: The Win2000 bug is fixed now.<br /><br />The source code can be downloaded <a target="_blank" href="http://www.codingcrew.de/marty/win32asm.php#saia">here</a>.<br /><br />Comments are welcome.<br /><br />Regards, Marwin</div>
    <div class="meta">Posted on 2004-04-26 16:39:28 by Marwin</div>
   </div>
   <div class="post" id="post-140213">
    <div class="subject"><a href="#post-140213">Sorting algorithms in Assembly</a></div>
    <div class="body">Excellent! A great learning tool and very well designed and written. Good job! :alright:</div>
    <div class="meta">Posted on 2004-04-26 17:53:05 by stormix</div>
   </div>
   <div class="post" id="post-140214">
    <div class="subject"><a href="#post-140214">Sorting algorithms in Assembly</a></div>
    <div class="body">I just had a problem, though, if i go to the tabular representation, select &quot;Quicksort&quot; and presorting as 'sorted ascending' then with 50000 or more elements the program eventually exits unexpectedly.<br /><br />Also, how about adding bogosort (<a target="_blank" href="http://en.wikipedia.org/wiki/Bogosort">http://en.wikipedia.org/wiki/Bogosort</a>) to the algorithms? :grin:</div>
    <div class="meta">Posted on 2004-04-26 18:00:02 by stormix</div>
   </div>
   <div class="post" id="post-140219">
    <div class="subject"><a href="#post-140219">Sorting algorithms in Assembly</a></div>
    <div class="body">two thumbs up :alright: :alright:</div>
    <div class="meta">Posted on 2004-04-26 19:06:48 by JimmyClif</div>
   </div>
   <div class="post" id="post-140234">
    <div class="subject"><a href="#post-140234">Sorting algorithms in Assembly</a></div>
    <div class="body">Hey, like it !!!! Whot jimmy said. (two|both thumbs up!!!!!!)</div>
    <div class="meta">Posted on 2004-04-26 23:33:10 by Black iCE</div>
   </div>
   <div class="post" id="post-140237">
    <div class="subject"><a href="#post-140237">Sorting algorithms in Assembly</a></div>
    <div class="body"><pre><code>Elements&#58;             50000000<br />Initialization value&#58; 255<br /><br />Presorting&#58;           Unsorted<br /><br />Algorithm                      Comparisons  Exchanges   Time&#40;ms&#41;   Memory in byte<br />Shellsort         	       8029890575   8050766817  81922<br />2-Way Mergesort                1216417768   2471723749  19328      200000000<br />Straight 2-Way Mergesort       1220034594   2471593961  19328      200000000<br />Natural 2-Way Mergesort        2445357663   2410955548  25125      200000000<br />Radix Exchange-Sort            1598689458    228018417  10078<br />Quicksort                      1654512499    420599396  11390<br />Straight Quicksort&#40;masm32.lib&#41; 1664384567    468632866  11828       50000040<br />Combsort &#40;masm32.lib&#41;          3683333547    493118346  28578<br /><br /><br />Pre-Sorted&#58; ascending<br /><br />Algorithm                     Comparisons   Exchanges   Time in ms<br />Shellsort                       620173843   620173843   5360<br />2-Way Mergesort                 650667584  1301335168   7938<br />Straight 2-Way Mergesort        651076032  1302152064   8953<br />Natural 2-Way Mergesort          49999999           0    281<br />Radix Exchange-Sort            1600000000           0   7953<br />Quicksort                 &#40;don't try it!&#41;<br />Straight Quicksort&#40;masm32.lib&#41; 1282227869   116113921   6750<br />Combsort &#40;masm32.lib&#41;          2883333563           0  17844<br /><br /><br />Pre-Sorted&#58; descending<br /><br />Algorithm                     Comparisons   Exchanges   Time in ms<br />Shellsort                      1214780463  1248219023   8141<br />2-Way Mergesort                 632223552  1915114688  11969<br />Straight 2-Way Mergesort        632223552  1915523136  14500<br />Natural 2-Way Mergesort        1932223526  1915523136  19110<br />Radix Exchange-Sort            1600000000    25000000   7969<br />Quicksort                 &#40;don't try it!&#41;<br />Straight Quicksort&#40;masm32.lib&#41; 1282227896   141113924   6797<br />Combsort &#40;masm32.lib&#41;          2983333561   195092986  19343</code></pre>2 Ghz Athlon XP, Win XP</div>
    <div class="meta">Posted on 2004-04-27 01:01:37 by bitRAKE</div>
   </div>
   <div class="post" id="post-140279">
    <div class="subject"><a href="#post-140279">Sorting algorithms in Assembly</a></div>
    <div class="body">Thank you all for your feedback!<br /><br /><div class="quote"><br />I just had a problem, though, if i go to the tabular representation, select &quot;Quicksort&quot; and presorting as 'sorted ascending' then with 50000 or more elements the program eventually exits unexpectedly.<br /><br />Also, how about adding bogosort (<a target="_blank" href="http://en.wikipedia.org/wiki/Bogosort">http://en.wikipedia.org/wiki/Bogosort</a>) to the algorithms? :grin: </div><br /><br />Thank you for reporting this bug, I've never noticed it yet although I tested already 20.000.000 elements. I'll take a look at it. What OS do you use?<br /><br />Bogosort? :) I am sure I won't implement it. This url has convinced me! :) <br /><br />bitRAKE, what about using only 20.000.000 elements? I have only 256MB RAM, so I can't run the program with 50.000.000 elements (a double word is allocated for each element =&gt; 50.000.000*4=200.000.000 =&gt; 200MB RAM). That means the results on my PC won't be realistic, because WinXP would access the HDD too often. ;)<br /><br />Thanks and regards,<br />Marwin</div>
    <div class="meta">Posted on 2004-04-27 13:16:02 by Marwin</div>
   </div>
   <div class="post" id="post-140283">
    <div class="subject"><a href="#post-140283">Sorting algorithms in Assembly</a></div>
    <div class="body">It crashes on my win2k pc :(</div>
    <div class="meta">Posted on 2004-04-27 13:22:41 by clippy</div>
   </div>
   <div class="post" id="post-140284">
    <div class="subject"><a href="#post-140284">Sorting algorithms in Assembly</a></div>
    <div class="body">Thanks clippy, now I hear it twice that the program makes troubles under Win2000 but as I own only Win98 and WinXP I can't track the bug. Could you please post the offset where the exception occures and some other informations, too (if available)?<br /><br />Regards, Marwin</div>
    <div class="meta">Posted on 2004-04-27 13:26:29 by Marwin</div>
   </div>
   <div class="post" id="post-140286">
    <div class="subject"><a href="#post-140286">Sorting algorithms in Assembly</a></div>
    <div class="body">stormix, Quicksort (as it is implemented here: recursive, not median-of-three) *isn't very usefull* when used to sort sorted or nearly sorted data (as bitRAKE already mentioned). The problem is a stack overflow, right now I don't know how to solve this bug but I'll find a solution (I hope so ;) ).<br /><br />Regards, Marwin</div>
    <div class="meta">Posted on 2004-04-27 13:39:54 by Marwin</div>
   </div>
   <div class="post" id="post-140288">
    <div class="subject"><a href="#post-140288">Sorting algorithms in Assembly</a></div>
    <div class="body"><strong>Marwin</strong>, I had some time to play with the graphical display - it was enjoyable to see how the algorithms work visually.  I appreciate the effort you have put into this.  Attached is the results.<br /><br />Even thought comparison consist of two reads and one subtraction; and exchanges consist of two reads and two writes -- if we assume the operation of comparison and exchange take the same amount of time we see something seemingly strange.  Not only do the fastest algorithms do less operations, but they are also doing the least number of operations per ms.  The reason for this is more code is running to assist in not accessing memory.</div>
    <div class="meta">Posted on 2004-04-27 14:16:59 by bitRAKE</div>
   </div>
   <div class="post" id="post-140290">
    <div class="subject"><a href="#post-140290">Sorting algorithms in Assembly</a></div>
    <div class="body">Hi Marwin<br /><br /><br />I too had a crash on Win2k, and this pops up:</div>
    <div class="meta">Posted on 2004-04-27 14:56:55 by The SharK</div>
   </div>
   <div class="post" id="post-140291">
    <div class="subject"><a href="#post-140291">Sorting algorithms in Assembly</a></div>
    <div class="body">It's a pretty nice toy, Marwin :alright: . I guess it would be nice if you could visualize more elements, but it's not too important - nice that you added the delay feature :)<br /><br /><br />Shark, you'll probably need a stack dump or trace the app, that address is in kernel-land.</div>
    <div class="meta">Posted on 2004-04-27 15:01:31 by f0dder</div>
   </div>
   <div class="post" id="post-140293">
    <div class="subject"><a href="#post-140293">Sorting algorithms in Assembly</a></div>
    <div class="body"><div class="quote"><br />Marwin</strong>, I had some time to play with the graphical display - it was enjoyable to see how the algorithms work visually.  I appreciate the effort you have put into this.</div><br />Thank you bitRAKE.<br /><br /><div class="quote"><em>Originally posted by bitRAKE </em><br />The reason for this is more code is running to assist in not accessing memory. </div><br />Yes, that's right. But the inner loop of QuickSort is very small, and it is still &quot;slower&quot; (160 ms per 20.000.000 elements) than Radix Exchange-Sort. That's because Radix Exchange-Sort needs less exchanged than QuickSort.<br /><br />I have to mention that exchanges aren't exchanges every time. I increment the counter, too, when an element is moved (for example in Insertionsort).<br /><br /><div class="quote"><em>Originally posted by f0dder</em><br />[...] nice that you added the delay feature</div><br />Thanks f0dder. Well, what use would it have if you're running one of the faster algorithms without having a delay. You won't see anything from the sorting process.  ;)<br /><br /><div class="quote">I too had a crash on Win2k, and this pops up:<br />---<br />Shark, you'll probably need a stack dump or trace the app, that address is in kernel-land.</div><br />I hope I'll get access to an computer with Win2000 installed soon.<br /><br />Regards, Marwin</div>
    <div class="meta">Posted on 2004-04-27 15:36:29 by Marwin</div>
   </div>
   <div class="post" id="post-140294">
    <div class="subject"><a href="#post-140294">Sorting algorithms in Assembly</a></div>
    <div class="body">Here is what OllyDbg says:</div>
    <div class="meta">Posted on 2004-04-27 15:54:50 by The SharK</div>
   </div>
   <div class="post" id="post-140296">
    <div class="subject"><a href="#post-140296">Sorting algorithms in Assembly</a></div>
    <div class="body">Thanks for the effort SharK, but what I need is the API function (and the position where in the program it is called) that is called.<br /><br />Regards, Marwin</div>
    <div class="meta">Posted on 2004-04-27 16:12:18 by Marwin</div>
   </div>
   <div class="post" id="post-140297">
    <div class="subject"><a href="#post-140297">Sorting algorithms in Assembly</a></div>
    <div class="body">It happens, when your program calls DialogBoxParam.<br />When I trace, from where your program calls that API function,<br />this is where I go, and it never returns from the call to that API:</div>
    <div class="meta">Posted on 2004-04-27 16:52:00 by The SharK</div>
   </div>
   <div class="post" id="post-140299">
    <div class="subject"><a href="#post-140299">Sorting algorithms in Assembly</a></div>
    <div class="body"><div class="quote"><br />Yes, that's right. But the inner loop of QuickSort is very small, and it is still &quot;slower&quot; (160 ms per 20.000.000 elements) than Radix Exchange-Sort. That's because Radix Exchange-Sort needs less exchanged than QuickSort.<br /><br />I have to mention that exchanges aren't exchanges every time. I increment the counter, too, when an element is moved (for example in Insertionsort).</div>What I meant by more code is greater computation done in the loop that prevents the need for memory access. Isn't that the same thing as you say? ;)  It is difficult to talk in such general terms sometimes.<br /><br />Exchanges should be atleast twice as costly as comparisons.  Moves are really only an exchange/2.<br /><br />I find an error of +/- 16ms when making several consecutive runs.</div>
    <div class="meta">Posted on 2004-04-27 17:00:00 by bitRAKE</div>
   </div>
   <div class="post" id="post-140323">
    <div class="subject"><a href="#post-140323">Sorting algorithms in Assembly</a></div>
    <div class="body"><div class="quote"><br />It happens, when your program calls DialogBoxParam.<br />When I trace, from where your program calls that API function,<br />this is where I go, and it never returns from the call to that API: </div><br /><br />Should it really be DialogBoxParam? I can't image that. It means that I pass an invalid argument?<br /><br />Could you please try whether this version starts ok (the display window won't work, this intended)?<br /><br /><div class="quote"><em>Originally posted by bitRAKE </em><br />I find an error of +/- 16ms when making several consecutive runs.</div><br /><br />I already noticed that. I think that's because of task switching or do you have another thought?<br /><br />Regards, Marwin</div>
    <div class="meta">Posted on 2004-04-28 03:23:26 by Marwin</div>
   </div>
   <div class="post" id="post-140346">
    <div class="subject"><a href="#post-140346">Sorting algorithms in Assembly</a></div>
    <div class="body"><div class="quote">Could you please try whether this version starts ok (the display window won't work, this intended)?</div><br /><br />What exactly do you mean, you haven't attached anything :confused:</div>
    <div class="meta">Posted on 2004-04-28 08:57:02 by The SharK</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=18141&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=18141&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="18141" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=18141&amp;page=2">&gt;</a><a href="../?id=18141&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>