<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MASM Object Preprocessor - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12946" />
  <link rel="prev" href="../?id=12946&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=116">Windows</a> &raquo; <a href="../?id=12946">MASM Object Preprocessor</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=12946&amp;page=1" style="">&laquo;</a><a href="../?id=12946&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="12946" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-101380">
    <div class="subject"><a href="#post-101380">MASM Object Preprocessor</a></div>
    <div class="body">Im still playing with it, but as bitRAKE had put it, this is &quot;sweet&quot; :alright:<br /><br />I have one suggestion that i think you should consider:<br /><br />By the very nature of the preprocessing, you end up with &quot;true&quot; masm code files that more or less is ment to be compiled, but not viewed and edited explicitly.<br /><br />You should provide an option (perhaps a command line switch) to make two output files such that objects can be created as, well, objects (obj's).  This will make dll libraries, and static libraries easy to build.<br /><br />This can be easily achieved with a modification to your existing &quot;preprocessor.inc&quot; file:<pre><code>ifndef PREPROCESSOR_INC<br /><br />ifdef OOP_MODEL<br />   .386<br />   .model flat,stdcall<br />   option casemap&#58;none<br />endif<br />option DOTNAME<br />.data<br /><br />PREPROCESSOR_INC = 1<br />&#91;b&#93;. . .&#91;/b&#93;</code></pre><br />Like wise the output normally generated by the preprocessor would also include this at the top (before any other output):<br /><pre><code>OOP_MODEL   EQU  1<br />include preprocessor.inc</code></pre><br /><br />And at the end of the same file place an <strong>END</strong> statement.<br /><br />The second file would have the PROTO and any EQUATES found as a include header (or even better a way of assigning PUBLIC equates and PRIVATE EQUATES).  Only the public equates should make it to the header.<br /><br />I tried something like this with my OOP model, but never got it really off the ground.  It was working, but i didnt make much effort to promote it...  (at the time i was busy enough just trying to get people's heads willing to even consider OOP ;) ).<br /><br />However, from what im seeing here with your model, your really close to being able to rapidly build robust and reusable *.OBJ's for linking into other projects.  (I can do this now, but it requires the above manual modifications per OOP Class file).<br /><br />One last comment.  I want to be clear here that this idea should be an extra feature option, not to replace the current mode of operation.  This will allow it to be flexible for both coding styles that people tend to use.  <br /><br />Anywho, think about it ;) .  If you like and need help, i would be happy to assist you.<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-05 20:37:22 by NaN</div>
   </div>
   <div class="post" id="post-101394">
    <div class="subject"><a href="#post-101394">Another Question</a></div>
    <div class="body">Can your model suport Interfaces?<br /><br />ie.  Inherit a class of virtural members?  Im still fiddling, but im not 100% on format of inheritance and, nor virtual members... (forgive me if I seem slow on the learning curve here)..<br /><br />:NaN:</div>
    <div class="meta">Posted on 2003-05-05 22:18:26 by NaN</div>
   </div>
   <div class="post" id="post-101422">
    <div class="subject"><a href="#post-101422">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />Glad you like it :alright:<br /><br />Now it's my turn to be :confused: I'm sorta with you but not quite :grin:<br /><br />Do you put the class definition and methods in the same file and want them seperated automatically?<br />I write my objects with an include and source file so compiling OBJs is easy.<br /><br /><em>Can your model suport Interfaces?</em><br /><br /><pre><code><br />	CFOO_1 class<br /><br />		_data1 dd 0<br /><br />		Destructor* proto &#58;DWORD<br /><br />		Method0 proto &#58;DWORD		; static method<br />		Method1* proto &#58;DWORD		; virtual method<br />		Method2 proto &#58;DWORD = 0	; abstract method<br /><br />	CFOO_1 endc<br /><br />	CFOO_2 class CFOO_1			; inherit CFOO_1<br /><br />		_data2 dd 0<br /><br />		Destructor* proto &#58;DWORD	; overload CFOO_1 destructor<br /><br />		Method0 proto &#58;DWORD		; overload CFOO_1 static method<br />		Method1* proto &#58;DWORD		; overload CFOO_1 virtual method<br />		Method2* proto &#58;DWORD		; overload CFOO_1 abstract method<br /><br />	CFOO_2 endc<br /></code></pre><br /><br />The above demonstrates inheritance as supported by the preprocessor. Defining a method with the same name as a method in the base class will overload that method.<br />I hope this is what you meant.<br /><br />Destructors are a special case, the base class ( CFOO_1 ) must have one but derived classes only need overload the destructor if it's needed.<br />Like the destructor, if you are deriving a new class and the base class has virtual methods you don't need to overload them unless it's needed.<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-06 01:24:33 by Maelstrom</div>
   </div>
   <div class="post" id="post-101580">
    <div class="subject"><a href="#post-101580">MASM Object Preprocessor</a></div>
    <div class="body">Thanx... <br /><br />What i was tyring to get at is the ability to use &quot;MO.EXE&quot; as an obj builder as well.  I tend to use the tree style including method when i code (i.e. one file includes a bunch of other files. etc.). So all i have to do to recompile is assemble one master file.  Because of this structure, i can only have one instance of .386 and model directive (at the top of the master file). <br /><br />Any OOP classes i build in this structure can not have these directives in them or an assembler error will result.  This is fine for such projects, and is often how i develope, cause its fast to do R&amp;D in the design and testing of classes.<br /><br />However, if i decide through this method i finally have my CFILE.ASM OOP class file perfected, and working properly it would be nice to take the same file (without modifying its source to isolate it as a separate assembly model) pass it to your MO.EXE and have it insert the model info on the generated output.  This will keep the source file untouched, but the preprocessed output will have the additional requirements for stand-alone assembly. <br /><br />If you preprocessor can do this, its trivial to make a batch file to put it all together (ie.  MO.EXE  Class.asm, then ML.EXE Class_special.asm in the preprocessed output directory, then run LIB to take the OBJ and make a LIB file out of it.  If your preprocessor can also splits out the PROTO's and EQU's in a separate &quot;Class_special.inc&quot; as well, i would have everything nicely packaged and ready for future use.  All from one batch file, from when my R&amp;D into an OOP class has finished, and eventually is taken from its &quot;test bench coding model&quot; and isolated and processed into a standalown, linkable, library file.<br /><br />I hope this clears things up a bit...<br /><br /><br />As for the intefaces, thank i will play around tonight with what you have provided.  I guess my bigest problem is I've been in the land of ASM too long.  I forget the TRUE purpose for such catch phrases as &quot;virtual&quot; and &quot;abstract&quot;.. Im wondering how they are to be used proberly under your model.<br /><br />If i remeber correctly, Abstract is the Interface command.  I.e., no code proc to go along with the class definition.  Anything that inherits an Abstract method, but provide code for it, before it can be instanciated.<br /><br />As for virtual??  Im a bit lost seing the difference between virtual and abstrace at the moment.  I always thought virtual is more of a memory organization formatting more than an OOP construct.  But i could be wrong here....<br /><br /><br />Anyways, thanks for your help... im going to play some more with it tonight!<br /><br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-06 11:52:53 by NaN</div>
   </div>
   <div class="post" id="post-101587">
    <div class="subject"><a href="#post-101587">MASM Object Preprocessor</a></div>
    <div class="body"><div class="quote"><br />As for virtual?? Im a bit lost seing the difference between virtual and abstrace at the moment. I always thought virtual is more of a memory organization formatting more than an OOP construct. But i could be wrong here....<br /></div><br />Virtual means it is/can be defined in a child class, and that you can use parent interface to deal with a child object. Without virtual, you have an &quot;invariant over inheritance&quot; - both interface and implementation stays the same.<br /><br />Or well, that's how it works in C++ - I dunno if it's generic OOP lingo.</div>
    <div class="meta">Posted on 2003-05-06 12:12:46 by f0dder</div>
   </div>
   <div class="post" id="post-101676">
    <div class="subject"><a href="#post-101676">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />I see where your coming from now. I use a similar style myself but if I know it's going to be reused I compile it to a lib and link to a test proggy to debug it. Your suggestion would make testing and debugging much faster - I'll definitely look into it :alright:<br /><br />Virtual methods are simply pointers to a specific class method. As <strong>f0dder</strong> mentioned they allow you to access derived classes by using the base class. Since virtual methods are pointers, the method that's invoked is determined by the object the THIS ptr references.<br /><br /><pre><code><br />	CFOO_BASE class<br /><br />		Method* proto &#58;DWORD<br /><br />	CFOO_BASE endc<br /><br />	CFOO class CFOO_BASE<br /><br />		Method* proto &#58;DWORD<br /><br />	CFOO endc<br /><br />	SomeFunct proc USES ebx edi esi _object<br /><br />		; lets assume _object is a pointer to a CFOO object<br />		<br />		mov esi, _object &lt;CFOO_BASE&#58;&#58;foo&gt;<br /><br />		invoke foo.Method		; this invokes CFOO&#58;&#58;Method<br /><br />		.superclass foo.Method		; this invokes CFOO_BASE&#58;&#58;Method<br /><br />		.ret<br /><br />	SomeFunct endp	<br /><br /></code></pre><br /><br />Abstract methods are simply virtual methods that have no method associated with them. ie They are null pointers and need to be overloaded by a derived class.<br /><br />An example could be a CRENDER class that defines its methods as abstract. Now from CRENDER you derive COPENGL &amp; CD3D which overloads the CRENDER methods with code specific for each API.<br />Now it doesn't matter if you create a COPENGL or CD3D object, if you access the object as a CRENDER object the appropriate method will be called.<br />This polymorphic behaviour gives you a common interface to a group of classes derived from a common base class.<br /><br />I'm not sure if my lingo is correct but it sounds good :grin:<br /><br /><strong>Note</strong><br />The preprocessor will allow you to instance classes with abstract methods.<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-06 18:39:10 by Maelstrom</div>
   </div>
   <div class="post" id="post-101690">
    <div class="subject"><a href="#post-101690">MASM Object Preprocessor</a></div>
    <div class="body">Thanks for the Primer.. thats the stuff i need (i got all this jazz in my head.. just dont know what to call it ;) ~ like i said, i think I've been doing the ASM route too long ;) )<br /><br />Thanks again!<br /><br />I was thinking today about my suggestion (to make obj's).  You would probably need to provide the class structure as well in the include header file (which would compliment the obj/lib).   Im not sure how your preprocessor works internally, but to be able to reuse these objects in Lib's the preprocessor would need to somehow know just &quot;what&quot; your instanciating, and calling methods on.  Or does it even care???  Perhaps it works blindly, and trusts the linker to sort such things out....<br />Hmmm...  I will have to do some tests.... <br /><br />Anywho.. this is slowly growing on me, but its looking very impressive so far.  (im going to have to change my bat files ;)<br /><br />:alright:<br />:NaN:</div>
    <div class="meta">Posted on 2003-05-06 19:13:43 by NaN</div>
   </div>
   <div class="post" id="post-101704">
    <div class="subject"><a href="#post-101704">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />You can never do too much ASM ;)<br /><br /><em>You would probably need to provide the class structure as well in the include header file</em><br /><br />No.<br /><br />Lets assume the preprocessor adds the necessary compiler directives to the output file. If we define our class in a single file, the processed output should contain everything required to compile the object as an OBJ. However,  to use the object in a program we must include the original class definition ( CLASS/ENDC ) so the preprocessor knows how to use the object. I could have the preprocessor automatically extract the class definition and create an include file in the include directory specified on the commandline. Obviously, if we use a seperate include file for our class definition then this doesn't matter.<br /><br />Did that ramble make sense :grin:<br /><br /><em>Anywho.. this is slowly growing on me</em><br /><br />Just wait until I get templates and cloning working.<br />I'd also like to see if I can get the preprocessor to support COM.<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-06 22:17:57 by Maelstrom</div>
   </div>
   <div class="post" id="post-101710">
    <div class="subject"><a href="#post-101710">MASM Object Preprocessor</a></div>
    <div class="body">Now your talking ;)<br /><br /><br />I noticed that there is no error checking for abstract method calls.  (I think you eluded to this earlier).  You might want to think about that...  The preprocessor should have stoped me and said &quot;hey, no fucntion to call pal! ~ Like you, its abstract!&quot;... or something similar ;)<br /><br />:alright:<br />:NaN:</div>
    <div class="meta">Posted on 2003-05-06 22:40:40 by NaN</div>
   </div>
   <div class="post" id="post-101722">
    <div class="subject"><a href="#post-101722">MASM Object Preprocessor</a></div>
    <div class="body">I managed to package a class into a lib tonight.  I dont know what you have been doing, but here is what i did (and my thoughts ;) ):<br /><br /><u><strong>My OOP Class:</strong></u><pre><code>&#91;b&#93;   Math  class<br />      _Result   dd 0<br />      <br />      Destructor*    PROTO lpThis&#58;DWORD<br />      Constructor    PROTO lpThis&#58;DWORD<br />      Add_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />      Sub_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />      Mul_           PROTO lpThis&#58;DWORD, val&#58;DWORD = 0<br />      Div_           PROTO lpThis&#58;DWORD, val&#58;DWORD = 0<br />      <br />   Math  endc&#91;/b&#93;<br />   <br />Math  SEGMENT<br />   Constructor proc USES ebx edi esi _this&#58;DWORD<br />      mov ebx, _this &lt;@CurClass&#58;&#58;Math&gt;<br />      xor eax, eax<br />      mov Math.Result, eax<br />      invoke Beep, 0,0<br />      ret<br />   Constructor endp<br /><br />   Add_ proc USES ebx edi esi _this&#58;DWORD, val&#58;DWORD<br />      mov ebx, _this &lt;@CurClass&#58;&#58;Math&gt;<br />      mov eax, Math.Result<br />      add eax, val<br />      mov Math.Result, eax<br />   	ret   <br />   Add_ ENDP<br /><br />   Sub_ proc USES ebx edi esi _this&#58;DWORD, val&#58;DWORD<br />      mov ebx, _this &lt;@CurClass&#58;&#58;Math&gt;<br />      mov eax, Math.Result<br />      sub eax, val<br />      mov Math.Result, eax<br />   	ret   <br />   Sub_ ENDP<br /><br />   Destructor proc USES ebx edi esi _this&#58;DWORD<br />   	ret<br />   Destructor endp   <br />   <br />Math  ENDS <br />      <br />&#91;b&#93;MoreMath class Math<br /><br />      Destructor*    PROTO lpThis&#58;DWORD<br />      Mul_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />      Div_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br /><br />MoreMath endc&#91;/b&#93;<br /><br />MoreMath SEGMENT<br /><br />   Mul_ proc USES ebx edi esi _this&#58;DWORD, val&#58;DWORD<br />      mov ebx, _this &lt;@CurClass&#58;&#58;Math&gt;<br />      mov eax, Math.Result<br />      imul eax, val<br />      mov Math.Result, eax<br />   	ret   <br />   Mul_ ENDP<br /><br />   Div_ proc USES ebx edi esi _this&#58;DWORD, val&#58;DWORD<br />   	ret   <br />   Div_ ENDP<br /><br />   Destructor proc USES ebx edi esi _this&#58;DWORD<br />   	ret<br />   Destructor endp   <br /><br />MoreMath ENDS</code></pre><br /><br />I preprocessed this file with a test file (as discussed), and manually added the statements <strong>&quot;OOP_MODEL EQU 1; Include Preprocessor.inc&quot;</strong>, which drived the following additions to preprocessor.inc:<pre><code>ifndef PREPROCESSOR_INC<br /><br />ifdef OOP_MODEL<br />   .386<br />   .model flat,stdcall<br />   option casemap&#58;none<br />endif<br />option DOTNAME<br />.data<br /><br />PREPROCESSOR_INC = 1<br />. . .</code></pre><br /><br />But i discovered some problems when i tried to compile.  I used an API &quot;BEEP&quot; from Kerner32.  So i had to also include this to get an OBJ from this file.  I thought about this and wondered how you can do this with your tool in an automated sorta way.  I came to the concusion that you can't, with reliability.  People code in different ways, it would be a nightmare to assume all cases and gather all needed include and includelibs from a master template system.<br /><br />The alternate is to simply modify the above to include ALL typical includes and includelib's you would use.  You would simply place them between the ifdef and endif statements.  If you dont want people fussing around here you can even put a macro call there, and define the macro elsewhere.  This way you can get a 97% assurance it will work reliably for most code.  Only the specialty includes will require extra work, but this should be in the source to begin with if its that special ;)<br /><br /><br />After i compiled it, and got my OBJ, i made a LIB outa it (LIB /OUT:atest.lib math.obj).  I then wrote a completely new test scenario with no class includes, but the atest.lib):<pre><code>.386<br />.model flat,stdcall<br />option casemap&#58;none<br /><br />   ainclude D&#58;\masm32\include\_Macros_.inc<br />   INCPATH D&#58;\masm32<br />   INCHDR  windows, kernel32, user32, masm32, shell32, gdi32, debug<br />   INCLIB  kernel32, user32, masm32, shell32, gdi32, debug<br /><br />   include preprocessor.inc <br />   includelib atest.lib<br /><br />&#91;b&#93;   Math  class&#91;/b&#93;<br />      _Result   dd 0<br />      <br />      Destructor*    PROTO lpThis&#58;DWORD<br />      Constructor    PROTO lpThis&#58;DWORD<br />      Add_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />      Sub_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />      Mul_           PROTO lpThis&#58;DWORD, val&#58;DWORD = 0<br />      Div_           PROTO lpThis&#58;DWORD, val&#58;DWORD = 0<br />      <br />&#91;b&#93;   Math  endc&#91;/b&#93;<br /><br />&#91;b&#93;  MoreMath class Math&#91;/b&#93;<br />   <br />      Destructor*    PROTO lpThis&#58;DWORD<br />      Mul_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />      Div_           PROTO lpThis&#58;DWORD, val&#58;DWORD<br />   <br />&#91;b&#93;   MoreMath endc&#91;/b&#93;<br /><br />.code<br />start&#58;<br />push ebx<br /><br />.new  ebx,  MoreMath&#58;&#58;Obj<br />   PrintDec Obj.Result<br />   invoke Obj.Add_, 12<br />   PrintDec Obj.Result<br />   invoke Obj.Sub_, 6<br />   PrintDec Obj.Result<br />   invoke Obj.Mul_, 3<br />   PrintDec Obj.Result<br />.delete Obj<br /><br />pop ebx<br />invoke ExitProcess, NULL<br /><br />end start<br />end</code></pre><br /><br />From trial and error i discovered your MO.EXE *wants* to see only the pre-compiled version of the class definitions to work.  Non of the output stuff would work.  Which is great actually, since you need to provide less info as an include file! Once i figured this out, preprocessed this, and compiled/assembled it.  It worked perfectly.<br /><br />So to do my sugestion would only take:<ul><br />[*]Get the unaltered class definitions (Class/Endc) and dump them to an output include file<br />[*]Get all supporting Equates/stuctures and dump them to an output include file (should devise a way of declairing them as public or not ~ but not essential)<br />[*]Precompile and insert header lines: <strong>&quot;OOP_MODEL EQU 1; Include Preprocessor.inc&quot;</strong>, and end of file line <strong>&quot;END&quot;</strong>.<br /><br /><br />From here ML should be able to compile the ASM output file into an OJB (via batch file) and optionally make it into a LIB as well.  The final LIB output will work hand in hand with the include file generated. And viola! all is well!<br /><br />This is a small scoped test.  I think i would also be wise to place ifdef/endif statements around all class definitions that are copied to the include file.  (To get around wierd scenarios where inheritance is happening).<br /><br /><br />Anywho, i konw this is getting a bit long, but i wanted to post my findings here.  I have to say im growing very impressed with its ease of use.   I just have to think up a worthing project to really sink my teeth into it ;)<br /><br />Great work!<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-06 23:46:42 by NaN</div>
   </div>
   <div class="post" id="post-101735">
    <div class="subject"><a href="#post-101735">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />You've been reading my mind haven't you :grin:<br />I thought about using a macro to add the compiler settings, this way users could customize it to there needs.<br />It could work like you INCHDR macro, place common includes inside the macro and pass any special includes to the macro.<br /><br /><em>I noticed that there is no error checking for abstract method calls</em><br /><br />I was in two minds about this. I wanted to use abstract methods to create interface classes but I also wanted to be able to use them as user defined methods. For example you could pass a pointer to a function as a param to a class method and have the method set the abstract pointer. You could then call the function as if it was a class method.<br />Do you think this should be allowed, or should we stick to abstract overloading via inheritance?<br /><br />I have a question for ya, do you think something like the object generator you wrote for your OOP model would be useful here?<br />For example, if the preprocessor is run without arguments it opens a dialog something like your object generator and outputs the file skeleton for you to fill out?<br /><br />I'm also trying to reorganize my includes so that I can post compilable examples.<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-07 01:36:47 by Maelstrom</div>
   </div>
   <div class="post" id="post-101807">
    <div class="subject"><a href="#post-101807">MASM Object Preprocessor</a></div>
    <div class="body">I would keep your MO.EXE separate from any *tools* you decide to implement.  To be honest, im not overly keen even on the GUI dialog box that reports errors.  It doesn't lend well to IDE's (or high level text editors).<br /><br />This is one of the big assets in the MASM package.  (all the command line executables).  I would aim for a similar approach here.<br /><br /><br />As for abstract methods... I would still implement error checking... If a person wanted to cast non-method functions to an abstract structure entry, they sould instead have the class itself store the pointer and implement the call for you (internally ~ not externally as you have suggested).<br /><br />Anywho these are my thoughts... the topic is open to debate ;)<br /><br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-07 11:55:21 by NaN</div>
   </div>
   <div class="post" id="post-101875">
    <div class="subject"><a href="#post-101875">MASM Object Preprocessor</a></div>
    <div class="body">If im not assinging EBX to &lt;@CurClass::Whatever&gt; but rather to another object type, how would i do it?  Here is my guess (and outline of what im getting at):<pre><code><br />FOO  Class<br />  _lpObj  dd 0  ; Foobar class pointer<br />  funt PROTO lpTHis&#58;DWORD<br />FOO  ENDC<br /><br />FOO SEGMENT<br />  funt  PROC  USES EBX lpThis&#58;DWORD<br />   mov ebx, lpThis &lt;@CurrClass&#58;&#58;Foo&gt;<br />   mov eax, Foo.lpObj<br />   <br />   mov ebx, eax &lt;@Foobar&#58;&#58;Foobar&gt;<br />   invoke Foobar.OutaClassMethod<br />   ret<br />  funct ENDP<br /> <br />FOO ENDS</code></pre><br /><br />Can i do this? If not, what is the proper way of telling the preprocessor that im actually invoking another object other than the current segment type object.<br /><br />Thanx!<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-07 20:16:54 by NaN</div>
   </div>
   <div class="post" id="post-101900">
    <div class="subject"><a href="#post-101900">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />Simply replace @CurClass with the class name.<br /><br /><pre><code><br />	; lets assume _lpObj is a pointer to a CFILE object<br /><br />	mov ebx, _this&lt;@CurClass&#58;&#58;foo&gt;<br /><br />	mov ebx, foo._lpObj &lt;CFILE&#58;&#58;foobar&gt;<br /></code></pre><br /><br />Have you tried embedded objects yet?<br />The preprocessor gives you direct access to embedded objects.<br />Embedded objects work the same as embedded structures.<br /><br /><pre><code><br />	CFILE class<br /><br />		__handle dd 0<br /><br />		Open proto &#58;DWORD, &#58;DWORD<br /><br />	CFILE endc<br /><br />	CBLAH class<br /><br />		__file CFILE &lt;&gt; ; embed a CFILE object<br /><br />	CBLAH endc<br /><br />	mov ebx, _this &lt;CBLAH&#58;&#58;blah&gt;<br /><br />	invoke &#91;b&#93;blah._file.Open&#91;/b&#93;, addr m_fileName<br /><br />	mov edx, &#91;b&#93;blah._file._handle&#91;/b&#93;<br /></code></pre><br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-07 22:49:47 by Maelstrom</div>
   </div>
   <div class="post" id="post-101901">
    <div class="subject"><a href="#post-101901">MASM Object Preprocessor</a></div>
    <div class="body">No i havent, not in that fashion anyways...<br /><br />I accidently found some C++ source that would make an excellent starting point to really test your model with.  ( <a target="_blank" href="http://sequence.rutgers.edu/sequitur/">http://sequence.rutgers.edu/sequitur/</a> )  See the C++ example after playing with its neat interface...<br /><br />The source looks rather simple to translate.  Im approximately 70% finished.  Perhaps tomorrow i will get a test compile..  This is where and why i posted the above question.  It has two main classes, where one is often called from the other.<br /><br />Thanx!<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-07 23:07:29 by NaN</div>
   </div>
   <div class="post" id="post-102025">
    <div class="subject"><a href="#post-102025">MASM Object Preprocessor</a></div>
    <div class="body"><strong>Nan</strong><br /><br />It will be interesting to see how well the preprocessor can port C++.<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-08 16:27:11 by Maelstrom</div>
   </div>
   <div class="post" id="post-102068">
    <div class="subject"><a href="#post-102068">MASM Object Preprocessor</a></div>
    <div class="body">Its going a bit slower now.. im getting into thicker C++ stuff... <br /><br />Its really the **Var stuf that is screwing with my head.  (I once knew and understood all this ~ but since threw it all away when i came to ASM since i realized its all B.S. anyways)<br /><br />I have to &quot;comiple&quot; these symbols into the reality of ASM. :rolleyes:<br /><br />As well, im getting some wierd calls and stuff that might really challenge your model... i will point them out when im done tho... (im nervous if it will compile/work as it should)..<br /><br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2003-05-08 22:43:08 by NaN</div>
   </div>
   <div class="post" id="post-102322">
    <div class="subject"><a href="#post-102322">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />How's the translation going?<br />Lost much sanity working with the pointer indirection?<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-10 17:23:20 by Maelstrom</div>
   </div>
   <div class="post" id="post-102323">
    <div class="subject"><a href="#post-102323">MASM Object Preprocessor</a></div>
    <div class="body">I've stepped back from it to understand it a bit more...<br /><br />I also dont like some of the translations im doing, cause they are very inefficient.  Im not sure of the limits of your preprocessor as well as if im actaully translating correctly.  Having two unkowns at once is bothering me a bit....  <br /><br />:NaN:</div>
    <div class="meta">Posted on 2003-05-10 17:30:40 by NaN</div>
   </div>
   <div class="post" id="post-102326">
    <div class="subject"><a href="#post-102326">MASM Object Preprocessor</a></div>
    <div class="body"><strong>NaN</strong><br /><br />Fair enough, but we can only find the preprocessors limit if we push it into mental meltdown :grin:<br /><br />Trying to OOP the preprocessor has been an interesting exercise since I haven't written many OOP programs, but so far so good.<br /><br />I'll need your help later to see if I can add COM support since I don't know much about it.<br /><br />P.S - Thanks for the mental picture of Shrek in a thong :eek:<br /><br />Maelstrom</div>
    <div class="meta">Posted on 2003-05-10 17:58:12 by Maelstrom</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=12946&amp;page=1" style="">&laquo;</a><a href="../?id=12946&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="12946" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>