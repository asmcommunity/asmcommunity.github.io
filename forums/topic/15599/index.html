<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to get the IP address of a socket? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=15599" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=15599">How to get the IP address of a socket?</a></p>
   <div class="post" id="post-121123">
    <div class="subject"><a href="#post-121123">How to get the IP address of a socket?</a></div>
    <div class="body">I use GetPeerName and inet_ntoa, but the result is always incorrent. Anybody can give some code on that?</div>
    <div class="meta">Posted on 2003-10-12 07:33:54 by optimus</div>
   </div>
   <div class="post" id="post-121724">
    <div class="subject"><a href="#post-121724">Try this ...</a></div>
    <div class="body">.data<br />  SocketAddr          sockaddr_in &lt;&gt;<br />  SocketAddrSize    dd 0                        ;; This is the size of the above structure returned by accept()<br /><br />.code<br />  invoke accept, ListeningSocket, addr SocketAddr, addr SocketAddrSize<br /><br />  invoke inet_ntoa, dword ptr SocketAddr.sin_addr<br />  invoke MessageBox, NULL, eax, NULL, NULL<br /><br /><br />The MessageBox should show you the dot notation of your client! I don't use GetPeerName because I like to store SocketAddr.sin_addr somewhere!<br /><br />Otherwise show me the code you use and I'll take a look.</div>
    <div class="meta">Posted on 2003-10-19 01:13:54 by SubEvil</div>
   </div>
  </div>
 </body>
</html>