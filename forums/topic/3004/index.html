<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Export name mangling - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3004" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3004">Export name mangling</a></p>
   <div class="post" id="post-19594">
    <div class="subject"><a href="#post-19594">Export name mangling</a></div>
    <div class="body">This is a slightly different question to the other threads on function exporting.<br /><br />Is there a specific compiler or linker switch to turn export name mangling off? Let me tell you why i ask:<br /><br />i do all my asm development in the VC enviroment. I zipped up the directory containg all my VC project files and asm files for one particulr app, and sent it to work. I unzipped it, loaded it up, went to compile it, and for every function in the .def file i get this error:<br /><br /><div class="quote">buttons.def : error LNK2001: unresolved external symbol DllEntry<br />...etc...</div><br /><br />This is happening because i have the plain name in the .def file, but the compiler is mangling. As far as i can recall, i have got both my work and home enviroments set up the same, and running the same version of MASM. Here are my linker switches:<br /><div class="quote">/nologo /subsystem:windows /dll /incremental:yes /pdb:&quot;Debug/buttons.pdb&quot; /debug /machine:I386 /def:&quot;.\buttons.def&quot; /out:&quot;Debug/buttons.dll&quot; /implib:&quot;Debug/buttons.lib&quot; /pdbtype:sept</div><br /><br />And like i said, the VC project file is identical, which should mean it is an enviroment issue. Anyone got any clues? I am ripping my hair out....<br /><br />Cheers!</div>
    <div class="meta">Posted on 2002-01-16 20:43:09 by sluggy</div>
   </div>
   <div class="post" id="post-19599">
    <div class="subject"><a href="#post-19599">Export name mangling</a></div>
    <div class="body">Proceed functions with the following:<pre><code>__declspec&#40;dllexport&#41;</code></pre><a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vccore98/html/_core_import_into_an_application_using___declspec.28.dllimport.29.asp">(Look here...)</a></div>
    <div class="meta">Posted on 2002-01-16 21:55:59 by bitRAKE</div>
   </div>
   <div class="post" id="post-19661">
    <div class="subject"><a href="#post-19661">Export name mangling</a></div>
    <div class="body">and as far as i know, you can turn name mangling of in the .def file by simply adding NONAME behind the function name.<br /><br />correct me, if i'm wrong.<br />at least this works when you export functions as ordinals only.<br /><br />Regards, Phueghy</div>
    <div class="meta">Posted on 2002-01-17 07:11:45 by phueghy</div>
   </div>
   <div class="post" id="post-19665">
    <div class="subject"><a href="#post-19665">Export name mangling</a></div>
    <div class="body"><div class="quote"><em>you can turn name mangling of in the .def file by simply adding NONAME behind the function name.</em></div>Yeah, i tried that, but it didn't work. It's quite bizarre: on one machine it compiles fine with a normal .def file, on the other machine it will compile if i decorate the names in the .def file. And i am using identical files on both machines.  <br /><br />I'm sure there has to be a MASM command/switch that i can use to turn off mangling. Bah, i might just have to put up with decorating the names. Double d'oh :rolleyes:</div>
    <div class="meta">Posted on 2002-01-17 07:21:05 by sluggy</div>
   </div>
  </div>
 </body>
</html>