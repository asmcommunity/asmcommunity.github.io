<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>speed comparision. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10718" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=10718">speed comparision.</a></p>
   <div class="post" id="post-80621">
    <div class="subject"><a href="#post-80621">speed comparision.</a></div>
    <div class="body">Hi all..<br /> <br />         I have an interesting problem..<br />  <br />When I compare the Memory allocation routine of MASM ( Alloc and Free, Memfill ) against VC++ alloc, memset and free.. <br />       VC's routine far faster that MASM routine.. Why is it so ??<br /><br />Is it because of badly written MASM library for ( Alloc, Free, Memfill ).. <br /><br />How i have tested :-<br />--------------------------<br /><br />I have written a small procedure in MASM which is called from C routine and accepts no. of bytes to allocate ( Alloc ) memfill that allocated memory and free the block..<br /><br />With same logic I have written  a  C procedure which does the same thing using malloc, memset and free.<br /><br />I call the procedure from a Loop which i am running for large value.. and C routine simply outperform the assemble routine..<br /><br />Any ideas..<br /><br />Regards.</div>
    <div class="meta">Posted on 2003-02-09 02:35:56 by processingspeed</div>
   </div>
   <div class="post" id="post-80635">
    <div class="subject"><a href="#post-80635">speed comparision.</a></div>
    <div class="body">Well the obvious question here is what routines are you using? <br /><br />If the one in the Masm Lib are slower than VC ones then use one of the others options, GlobalAlloc, HeapAlloc or even VirtualAlloc given the right circumstances.<br /><br />In general though if you need to allocate memory quickly it may be best to come up with your own memory management.</div>
    <div class="meta">Posted on 2003-02-09 05:29:48 by EÃ³in</div>
   </div>
   <div class="post" id="post-80648">
    <div class="subject"><a href="#post-80648">speed comparision.</a></div>
    <div class="body">What you will probably find is that the C prog has a larger buffer that it allocates from so reallocating small blocks should be faster that way.<br /><br />Try using the OLE string functions for allocating memory if you want to do it that way as it is well suited for small multiple blocks.<br /><br />There are two macros in MASM32 that handle them with no problems, stralloc &amp; strfree.<br /><br />E?in's suggestion is the direction you would take if you have to allocate memory in that manner, handle a large block yourself and read and write to controlled sections of it.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2003-02-09 06:34:04 by hutch--</div>
   </div>
  </div>
 </body>
</html>