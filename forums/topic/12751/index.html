<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Floopy Disk Controler. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12751" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=12751">Floopy Disk Controler.</a></p>
   <div class="post" id="post-98613">
    <div class="subject"><a href="#post-98613">Floopy Disk Controler.</a></div>
    <div class="body">Floopy disk is at 0x3f2 ~0x3f5. Anyone have the Source sample to read sector? I want it to read MBR 1st for now.</div>
    <div class="meta">Posted on 2003-04-22 09:33:43 by realvampire</div>
   </div>
   <div class="post" id="post-99606">
    <div class="subject"><a href="#post-99606">Floopy Disk Controler.</a></div>
    <div class="body">look up INT 013h ah=02<br />in ralph brown's intterupt list <br />this will tell ya how to do it</div>
    <div class="meta">Posted on 2003-04-26 21:02:59 by rob.rice</div>
   </div>
   <div class="post" id="post-99638">
    <div class="subject"><a href="#post-99638">Ehmmm...,</a></div>
    <div class="body">I want my Win32App able to do it. It must be a Port accessing, not interupt.</div>
    <div class="meta">Posted on 2003-04-27 01:23:20 by realvampire</div>
   </div>
   <div class="post" id="post-99667">
    <div class="subject"><a href="#post-99667">Floopy Disk Controler.</a></div>
    <div class="body">That is a bad programming practice. If every Windows programmer did that, the programs would interfere with each other.<br /><br />On Windows 95/98/Me, you can call DPMI function 0x300 to simulate the interrupt. Just remember that this must be called from a 16-bit segment and with 16-bit parameters.<br />On Window NT, you can open the drive with CreateFile and read from it.</div>
    <div class="meta">Posted on 2003-04-27 06:12:14 by Sephiroth3</div>
   </div>
   <div class="post" id="post-99668">
    <div class="subject"><a href="#post-99668">Huh?</a></div>
    <div class="body">What is DPMI function 0x300?<br />I think practicing Port programming is great for Beginer.</div>
    <div class="meta">Posted on 2003-04-27 06:16:45 by realvampire</div>
   </div>
   <div class="post" id="post-100293">
    <div class="subject"><a href="#post-100293">Floopy Disk Controler.</a></div>
    <div class="body">hai realvampire, you can always access my homepage to download the source for accessing the FDC(Floppy Disk Controller), btw, its 8051 source code :grin: :grin: <br />and dont forget that i'm using DP8473.<br /><br />sheeess, i cant believe i still remembering it :grin:</div>
    <div class="meta">Posted on 2003-04-30 07:08:00 by dion</div>
   </div>
   <div class="post" id="post-100312">
    <div class="subject"><a href="#post-100312">********hu...,</a></div>
    <div class="body">Dion kemana aja nih? Kok jarang nongol? Emang apa bedanya sama pentium atau 8086 ?<br /><br /></div>
    <div class="meta">Posted on 2003-04-30 08:21:07 by realvampire</div>
   </div>
   <div class="post" id="post-100315">
    <div class="subject"><a href="#post-100315">Floopy Disk Controler.</a></div>
    <div class="body">vampire, port programming can perhaps be an interesting thing to do, but it's not the way to go about things under win32. NT has a nice easy way (CreateFile, as already mentioned), while 9x is... ho humm. This thread might be of help:<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=3473&amp;highlight=dll">http://www.asmcommunity.net/board/index.php?topic=3473&amp;highlight=dll</a></div>
    <div class="meta">Posted on 2003-04-30 08:38:00 by f0dder</div>
   </div>
   <div class="post" id="post-100317">
    <div class="subject"><a href="#post-100317">Okay.</a></div>
    <div class="body">I check it right now. Thanks Fodder.</div>
    <div class="meta">Posted on 2003-04-30 08:43:45 by realvampire</div>
   </div>
   <div class="post" id="post-100734">
    <div class="subject"><a href="#post-100734">Re: ********hu...,</a></div>
    <div class="body"><div class="quote"><br />Dion kemana aja nih? Kok jarang nongol? Emang apa bedanya sama pentium atau 8086 ?<br /><br /> </div><br /><br />well, if you really download it and read the source, its not so diff with 8085 :grin:</div>
    <div class="meta">Posted on 2003-05-02 06:31:21 by dion</div>
   </div>
   <div class="post" id="post-100766">
    <div class="subject"><a href="#post-100766">Re: Re: ********hu...,</a></div>
    <div class="body"><div class="quote"><br /><br /><br />well, if you really download it and read the source, its not so diff with 8085 :grin: </div><br /><br />Ahem..., Your site cannot be accesed. Im running on 45Kbps, weird..., I can access it yesterday.</div>
    <div class="meta">Posted on 2003-05-02 09:25:15 by realvampire</div>
   </div>
   <div class="post" id="post-100788">
    <div class="subject"><a href="#post-100788">Floopy Disk Controler.</a></div>
    <div class="body">SOLAR OS has a FDD driver using ports IN/OUT , Interupts and DMA ... functional ... <br /><br />I use INTs and DMA because they are there anyway... but i guess i still have a non INT non DMA version  somewhere lost on my HDD also... <br /><br />should not be that hard to do... <br /><br />just DISALBE INT/DMA bit in programming 8272 and then pool it for every byte read... <br /><br />of course this will waste CPU time on pooling :D but if that is what you really want to do. Speed of actual CPU's alow you to do it quite easy <br /><br />actually i guess any cpu can do it by pooling from 286/12Mhz upwards<br /><br />I would at least recomend that you do not use DMA (as this can be somehow complicated and another source of errors) but do use IRQ 6 to read data from 8272 when it is ready. <br /><br />This way you will not waste much CPU time and keep code relatively simple and fast because gains from DMA are marginal anyway (on FDD)</div>
    <div class="meta">Posted on 2003-05-02 10:58:46 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-100843">
    <div class="subject"><a href="#post-100843">....</a></div>
    <div class="body">Bogdan: IRQ 6 ? How?</div>
    <div class="meta">Posted on 2003-05-02 19:05:10 by realvampire</div>
   </div>
   <div class="post" id="post-100916">
    <div class="subject"><a href="#post-100916">Re: ....</a></div>
    <div class="body"><div class="quote"><br />Bogdan: IRQ 6 ? How? </div><br /><br />read the source, i recommend what Bogdan made. his source code was pretty really good to read :grin: :alright:</div>
    <div class="meta">Posted on 2003-05-03 06:37:35 by dion</div>
   </div>
   <div class="post" id="post-100937">
    <div class="subject"><a href="#post-100937">Floopy Disk Controler.</a></div>
    <div class="body">By standard floppy in PC's use IRQ-6 and DMA-2.<br /><br />In SOLAR OS you cand freely use all that and memory and ports because averything is in ring-o and linear memory space 0 up to 4G.<br /><br />As i said it before for Windows i do not recommend this approach unless you want to make your own VXD and SYS drivers and even then i do not know IF you could replace the original ones without restart<br /><br />Instead try and use WinIO to get acces to 8272 ports and disable IRQ and DMA just try and pool data from 8272.<br /><br />Take care commands to 8272 are multibyte and not that simple:<br />3 phases: Command phase, execution phase and result phase.<br /><br />Assuming you want to learn and make fun<br /><br />because is kind of useless to pool a device in such a way ---  since in Windows  floppy drivers work ok by using IRQs and DMA .... hmmm kind of ok<br /><br />Thanks dion<br />I try to make my examples and released source codes as easy to read as i can (comments and stuff)</div>
    <div class="meta">Posted on 2003-05-03 10:18:52 by BogdanOntanu</div>
   </div>
  </div>
 </body>
</html>