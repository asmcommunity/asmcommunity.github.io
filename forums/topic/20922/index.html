<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to Create .H files?  - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20922" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20922">How to Create .H files? </a></p>
   <div class="post" id="post-158860">
    <div class="subject"><a href="#post-158860">How to Create .H files? </a></div>
    <div class="body">Hello. I got an asm function. I did with RADASM and MASM32. It generated an obj file.<br /><br />On Devc++ (my Ide) I included the obj file. in project options<br /><br />But I dont know what should I put on this .h file and then how to call it from the main.c<br /><br />I did this but I am not sure.<br /><br />float MyProc(float var1, float var2);<br /><br /><br />This is my assembly function<br /><br /><pre><code>.386 <br />.model flat, stdcall<br />option casemap:none<br /><br /><br /><br />.data<br /><br /><br />.code<br /><br />Myproc proc var1:REAL4, var2:REAL4<br />&nbsp; &nbsp; LOCAL retval:REAL4<br />&nbsp; &nbsp; finit<br />&nbsp; &nbsp; fld var1<br />&nbsp; &nbsp; fld var2<br /><br />&nbsp; &nbsp; fadd<br />&nbsp; &nbsp; fstp retval<br />&nbsp; &nbsp; fwait&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&lt;- is this really needed?<br />&nbsp; &nbsp; mov eax, retval<br />&nbsp; &nbsp; ret<br />Myproc endp<br /><br /><br />end;</code></pre><br /><br /><br />I did this on my C program<br /><br /><pre><code>#include &quot;H:\Practica Arquitectura del Computador\include\flotantes.h&quot;<br /><br /><br />float MyProc(float, float);</code></pre><br /><br /><br /><pre><code>void sum(void)<br />{<br />&nbsp; &nbsp;  float total2;<br />&nbsp; &nbsp;  total2 = MyProc(3.2, 4.2);<br />&nbsp; &nbsp;  printf(&quot;Total is: %d&quot;, total2);<br />}</code></pre><br /><br />But I get an error<br /><br />&nbsp;  undefined reference to `MyProc&#39; <br /><br /><br />my .h file is this<br /><br /><pre><code>#ifndef _FLOTANTE_H<br />#define _FLOTANTE_H<br /><br /><br />float MyProc(float var1, float var2);<br /><br /><br />#endif</code></pre></div>
    <div class="meta">Posted on 2005-04-10 16:38:40 by luisvalencia</div>
   </div>
   <div class="post" id="post-158876">
    <div class="subject"><a href="#post-158876">Re: How to Create .H files? </a></div>
    <div class="body">You should use extern &quot;c&quot; in the c header and perhaps global/public with the name of the label in the asm file you whant to by &quot;searchable&quot; by the linker.<br /><br />perhaps http://217.160.247.193/index.php?topic=16174.0 or http://217.160.247.193/index.php?topic=460.0 will help.<br /><br />Also search the board and find the help of the assembler for know how to &quot;publicate&quot; a label in a object file.</div>
    <div class="meta">Posted on 2005-04-10 21:51:43 by rea</div>
   </div>
  </div>
 </body>
</html>