<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to get CPUUsage in masm? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20535" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20535">How to get CPUUsage in masm?</a></p>
   <div class="post" id="post-156845">
    <div class="subject"><a href="#post-156845">How to get CPUUsage in masm?</a></div>
    <div class="body">Thanks</div>
    <div class="meta">Posted on 2005-02-09 01:44:38 by Sen</div>
   </div>
   <div class="post" id="post-156855">
    <div class="subject"><a href="#post-156855">How to get CPUUsage in masm?</a></div>
    <div class="body">The same way as you would in any other language... Search the Web<br />http://www.google.com/search?ie=UTF-8&amp;oe=UTF-8&amp;q=get+cpu+usage</div>
    <div class="meta">Posted on 2005-02-09 07:15:15 by JimmyClif</div>
   </div>
   <div class="post" id="post-156899">
    <div class="subject"><a href="#post-156899">How to get CPUUsage in masm?</a></div>
    <div class="body">thanks<br />but i am very bad in C++<br />can you tell me more details?<br />thank you very much.</div>
    <div class="meta">Posted on 2005-02-10 04:31:56 by Sen</div>
   </div>
   <div class="post" id="post-156928">
    <div class="subject"><a href="#post-156928">How to get CPUUsage in masm?</a></div>
    <div class="body">Straight from Codeproject:<br /><pre><code><br />Call this &#58; <br /><br />FILETIME idleTime;<br />FILETIME kernelTime;<br />FILETIME userTime;<br />BOOL res = GetSystemTimes&#40; &amp;idleTime, &amp;kernelTime, &amp;userTime &#41;;<br /><br />and voil? you have almost what you need.<br /><br />Now you have to poll this function and make a little calculus.<br /><br />usr = userTime - last_userTime;<br />ker = kernelTime - last_kernelTime;<br />idl = idleTime - last_idleTime; <br /><br />system time is &#58;<br /><br />sys = kerl + usr<br /><br />idleTime is the rest because &quot;System Idle&quot; process is taking 100 % of cpu<br /><br />so cpu is &#58; <br /><br />cpu = int&#40; &#40;sys - idl&#41; *100 / sys &#41;;<br /></code></pre><br />If you can't translate this to masm, you might want to consider having another tut or two :)</div>
    <div class="meta">Posted on 2005-02-10 21:11:57 by JimmyClif</div>
   </div>
   <div class="post" id="post-156932">
    <div class="subject"><a href="#post-156932">How to get CPUUsage in masm?</a></div>
    <div class="body">Here:<br />sys = kerl + usr <br />Why kerl?i think this is must be a misstake<br /><br />And here:<br />cpu = int( (sys - idl) *100 / sys )<br />I no good at C++.So i don't know the function of &quot;int&quot;.How does it express in masm<br /><br />asm:<br />idleTime FILETIME ?<br />kernelTime FILETIME ?<br />userTime FILETIME ?<br /><br />invoke GetSystemTimes,offset idleTime,offset kernelTime,offset userTime<br />mov res,eax<br /><br />But FILETIME is STRUCT<br />FILETIME STRUCT<br />  dwLowDateTime     DWORD      ?<br />  dwHighDateTime    DWORD      ?<br />FILETIME ENDS<br /><br />How can i do:<br />usr = userTime - last_userTime; <br />ker = kernelTime - last_kernelTime; <br />idl = idleTime - last_idleTime; <br /><br />Which data should i choose?dwHighDateTime - dwLowDateTime?<br />Thx</div>
    <div class="meta">Posted on 2005-02-10 22:23:20 by Sen</div>
   </div>
   <div class="post" id="post-156954">
    <div class="subject"><a href="#post-156954">How to get CPUUsage in masm?</a></div>
    <div class="body"><a target="_blank" href="http://www.codeproject.com/useritems/Get_CPU_Usage.asp">Here</a>'s the link... It's only a couple lines... Translate it one line after after another... <br /><br />Also use Google for some help.. &quot;What is an int&quot; is a good question for a search engine. ;)</div>
    <div class="meta">Posted on 2005-02-11 09:35:06 by JimmyClif</div>
   </div>
   <div class="post" id="post-156956">
    <div class="subject"><a href="#post-156956">How to get CPUUsage in masm?</a></div>
    <div class="body">Hi JimmyClif,Thank you very much!<br />But now here(China) is AM5:00,i am so tried.I will try later.Thx</div>
    <div class="meta">Posted on 2005-02-11 15:14:51 by Sen</div>
   </div>
  </div>
 </body>
</html>