<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Inserting a file in an app - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=21640" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=21640">Inserting a file in an app</a></p>
   <div class="post" id="post-163324">
    <div class="subject"><a href="#post-163324">Inserting a file in an app</a></div>
    <div class="body">Hi, my app uses some functions from a dll, but I want this app to be created by my app at runtime(don&#39;t ask why, just for fun with the createfile,writefile etc APIs).<br />How can I put the hex data of my dll inside the asm file so that it can be written(as buffer) with the writefile API?<br />Thanks :D</div>
    <div class="meta">Posted on 2005-08-16 04:49:51 by falcon1</div>
   </div>
   <div class="post" id="post-163325">
    <div class="subject"><a href="#post-163325">Re: Inserting a file in an app</a></div>
    <div class="body">Check out some app called <strong>Bin2Db</strong> in your Masm32 folder.</div>
    <div class="meta">Posted on 2005-08-16 05:45:21 by JimmyClif</div>
   </div>
   <div class="post" id="post-163327">
    <div class="subject"><a href="#post-163327">Re: Inserting a file in an app</a></div>
    <div class="body">Falcon,<br /><br />You have another option in MASM32 if you have installed the latest service pack, it has a utility that creates a seperate object module from any file you like that you can link into a normal 32 bit executable. The utility is called FDA.EXE and it is in the exampl12 directory in the latest service pack. I have tested it on very large files (many megabytes) and it works fine. It supports long data names and you have the option to set the alignment of the data in the object module as well.<br /><br />You must still know the file length for write purposes and you use the EXTERNDEF masm synax to make the data visible to your own code.<br /><br />If I remember correctly its like this,<br /><br /><span class="mono"><br />&nbsp; EXTERNDEF MyDataFile:DWORD<br /></span><br /><br />Where MyDataFile is the name you set with FDA.EXE.<br />Then you can use OFFSET MyDataFile and it should work corectly.<br /><br />Regards,<br /><br />hutch at movsd dot com</div>
    <div class="meta">Posted on 2005-08-16 06:29:57 by hutch--</div>
   </div>
   <div class="post" id="post-163330">
    <div class="subject"><a href="#post-163330">Re: Inserting a file in an app</a></div>
    <div class="body">...or by your own:<br />- include the raw data as resource (nice if you want to change the raw data even after the compilation)<br />- include the raw data in your source, using Dropthis db ... .... i would use some scripting on that...<br />? add a variable like &quot;DropLength&quot; and then CreateFile, WriteFile, CloseFile, LoadLibrary, GetProcAddress it ... :)<br /><br />With standalone applications I prefer to have ONE executable, so what I do is I create a separated *.inc file on<br />each of my libraries, which holds the procedures.<br /><br />From a technical point of view I think the greatest way would be In-memory execution (is that the name!?), where<br />you load your library from memory. This way you could add the lib as variable Dropthis / DropLength and directly<br />load it from there, using two procedures that act similar to LoadLibrary/GetProcAddress but must be applied on<br />memory instead of a file.&nbsp; If you are interested in this technique i&#39;ll post code...<br />Dominik</div>
    <div class="meta">Posted on 2005-08-16 07:43:05 by Dom</div>
   </div>
   <div class="post" id="post-163347">
    <div class="subject"><a href="#post-163347">Re: Inserting a file in an app</a></div>
    <div class="body"><div class="quote"><br />Hi, my app uses some functions from a dll, but I want this app to be created by my app at runtime(don&#39;t ask why, just for fun with the createfile,writefile etc APIs).<br />How can I put the hex data of my dll inside the asm file so that it can be written(as buffer) with the writefile API?<br />Thanks :D<br /></div><br /><br />I have wrote a tool for this mabye you can find it useful<br />http://www.lilljockeprogs.webb.se&nbsp; the program name is db Tool.</div>
    <div class="meta">Posted on 2005-08-16 12:36:52 by lilljocke</div>
   </div>
  </div>
 </body>
</html>