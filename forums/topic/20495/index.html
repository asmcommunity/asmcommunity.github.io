<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>C++  CreateDiBSection Problem  (as allways) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20495" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20495">C++  CreateDiBSection Problem  (as allways)</a></p>
   <div class="post" id="post-156662">
    <div class="subject"><a href="#post-156662">C++  CreateDiBSection Problem  (as allways)</a></div>
    <div class="body">hColorImg=LoadImage(NULL,CBmpFName,IMAGE_BITMAP,NULL,NULL,LR_LOADFROMFILE);<br />		GetObject(hColorImg,sizeof(BITMAP),&amp;ColorImgStru);<br />		width= ColorImgStru.bmWidth;<br />		height=ColorImgStru.bmHeight;<br /><br />		hdcColorImg=CreateCompatibleDC(NULL);<br /><br />ZeroMemory(&amp;pBInfo,sizeof(BITMAPINFO));<br /><br />		pBInfoHead.biSize=sizeof(BITMAPINFOHEADER);<br />		pBInfoHead.biWidth=width;<br />		pBInfoHead.biHeight=height;<br />		pBInfoHead.biPlanes=1; <br />		pBInfoHead.biBitCount=24;<br />		pBInfoHead.biCompression=BI_RGB	; <br />		pBInfoHead.biSizeImage=NULL; <br />		pBInfoHead.biXPelsPerMeter=NULL; <br />		pBInfoHead.biYPelsPerMeter=NULL; <br />		pBInfoHead.biClrUsed=NULL; <br />		pBInfoHead.biClrImportant=NULL;<br /><br />		pBInfo.bmiHeader=pBInfoHead;<br /><br />		CreateDIBSection(hdcColorImg,&amp;pBInfo,DIB_RGB_COLORS,(void**)&amp;pBMBmp,NULL,NULL); <br />		int err=GetLastError();<br />		char texta[256]=&quot;&quot;;<br />		wsprintf(&amp;texta[0],&quot;%d&quot;,err);<br />		MessageBox(NULL,&quot;ERROR&quot;,&amp;texta[0],MB_OK);<br /><br /><br />this gives me error 8 (Not enough storage is available to process this command. )  Bitmap size is  560x503<br /><br /><br />I can bitBlt  hdcColorImg  on the screen. so it is loaded ok.</div>
    <div class="meta">Posted on 2005-02-03 17:41:13 by AceEmbler</div>
   </div>
  </div>
 </body>
</html>