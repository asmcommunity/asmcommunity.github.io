<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>fabs - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2047" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2047">fabs</a></p>
   <div class="post" id="post-13030">
    <div class="subject"><a href="#post-13030">fabs</a></div>
    <div class="body">How exactly do you use the fabs instruction, or is that outdated?  Is it better to use something else (i.e. your own function or macro) to get an absolute value?</div>
    <div class="meta">Posted on 2001-11-25 23:18:33 by Will</div>
   </div>
   <div class="post" id="post-13053">
    <div class="subject"><a href="#post-13053">fabs</a></div>
    <div class="body">I didnt look up in my asm book, but I think it does simply:<br /><br />st(0) = | st(0) |</div>
    <div class="meta">Posted on 2001-11-26 05:45:10 by beaster</div>
   </div>
   <div class="post" id="post-13056">
    <div class="subject"><a href="#post-13056">fabs</a></div>
    <div class="body">I'm pretty sure thats it, of course if you want to write you're own MACRO it would be pretty simple:<br /><br />fmul st,st<br />fsqrt <br /><br />But thats probably over a hundred times slower than fabs :grin:</div>
    <div class="meta">Posted on 2001-11-26 05:52:37 by Eóin</div>
   </div>
   <div class="post" id="post-13080">
    <div class="subject"><a href="#post-13080">fabs</a></div>
    <div class="body">If you have the floating point stored in memory you can do this:<br /><br /><pre><code><br />mov eax, &#91;floatVal&#93;<br />and eax, 0x7FFFFFFF<br />mov &#91;floatVal&#93;, eax<br /></code></pre><br /><br />ift only works on real4 floats (not doubles).<br /><br />If the value is in the FPU stack then use fabs.</div>
    <div class="meta">Posted on 2001-11-26 08:32:22 by dxantos</div>
   </div>
   <div class="post" id="post-13086">
    <div class="subject"><a href="#post-13086">fabs</a></div>
    <div class="body">dxantos, that could would probably work on qwords and even tbytes, just grab the highest four bytes and the sign bit should be in the same place.<br /><br />Very clever, I'd never have though of it. :alright:</div>
    <div class="meta">Posted on 2001-11-26 09:28:44 by Eóin</div>
   </div>
   <div class="post" id="post-13098">
    <div class="subject"><a href="#post-13098">fabs</a></div>
    <div class="body">Why load it into EAX first though? You can operate directly on it<br />in memory...</div>
    <div class="meta">Posted on 2001-11-26 10:03:26 by f0dder</div>
   </div>
   <div class="post" id="post-13104">
    <div class="subject"><a href="#post-13104">fabs</a></div>
    <div class="body">didn't know that you could 'and' directly on memory variables.</div>
    <div class="meta">Posted on 2001-11-26 11:05:15 by dxantos</div>
   </div>
  </div>
 </body>
</html>