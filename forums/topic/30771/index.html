<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>password input(coding error) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30771" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=30771">password input(coding error)</a></p>
   <div class="post" id="post-215433">
    <div class="subject"><a href="#post-215433">password input(coding error)</a></div>
    <div class="body">here my code ...anyone can help me solve the error?urgent<br /><br /> <div class="quote">Assembling: pw.asm<br />pw.asm(152) : error A2022: instruction operands must be the same size<br />pw.asm(157) : error A2032: invalid use of register<br />Press any key to continue . . .</div><br /><br /><br /><br /><div class="quote">.model small<br />.stack 64<br />.data<br /><br />msg4 db &#039;ASCII CHARACTERS&#039;<br /><br />msg3 db &#039;PASSWORD INCORRECT!DENIED ACCESS!$&#039;<br />msg2 db &#039;PASSWORD: $&#039;<br />msg1 db &#039;RETRY: $&#039;<br /><br />ask db &#039;#$&#039;<br />.code<br /><br />clear:<br /><br /><br />main proc<br /> mov ax,@data<br /> mov ds,ax<br />call clearScreen		;clear the screen<br />call resetCursor<br /><br />mov ah,09h		;display string<br />lea dx,msg2		;prints Enter password<br />int 21h<br /><br />mov bl,3<br /><br />again:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07		;direct keyboard input<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al		;move the input al to bh<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,0dh<br />&nbsp; &nbsp; &nbsp; &nbsp; je again<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;a&#039;		;compare bh with J<br />&nbsp; &nbsp; &nbsp; &nbsp; je again1		;if equal jump to again<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong		;if not to wrong<br /><br />again1:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,0dh<br />&nbsp; &nbsp; &nbsp; &nbsp; je invalid9<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,08h<br />&nbsp; &nbsp; &nbsp; &nbsp; je again<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;b&#039;		;compare bh with P<br />&nbsp; &nbsp; &nbsp; &nbsp; je again2<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br />again2:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;c&#039;		;compare bh with h<br />&nbsp; &nbsp; &nbsp; &nbsp; je again3<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br /><br />invalid9:<br />&nbsp; &nbsp; &nbsp; &nbsp;  call invalid8<br /><br /> again3:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;d&#039;		;compare bh with I<br />&nbsp; &nbsp; &nbsp; &nbsp; je again4<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br /><br />again4:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;P&#039;		;compare bh with C<br />&nbsp; &nbsp; &nbsp; &nbsp; je again5<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br />again5:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;e&#039;		;compare bh with E<br />&nbsp; &nbsp; &nbsp; &nbsp; je again6<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br />again6:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,&#039;f&#039;		;compare bh with s<br />&nbsp; &nbsp; &nbsp; &nbsp; je again7<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br /><br />invalid8:<br />&nbsp; &nbsp; &nbsp; &nbsp; call invalid<br /><br />again7:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,0dh	;compare the input with the enter key<br />&nbsp; &nbsp; &nbsp; &nbsp; je exit<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br /><br />wrong:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,07<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; mov bh,al<br />&nbsp; &nbsp; &nbsp; &nbsp; call asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bh,0dh	;compare the input with the enter key<br />&nbsp; &nbsp; &nbsp; &nbsp; je invalid<br />&nbsp; &nbsp; &nbsp; &nbsp; jne wrong<br /><br />invalid:<br />&nbsp; &nbsp; &nbsp; &nbsp; call clearScreen<br />&nbsp; &nbsp; &nbsp; &nbsp; call resetCursor<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,09<br />&nbsp; &nbsp; &nbsp; &nbsp; lea dx,msg1	;prints retry password<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; dec bl		;decrements bl until 3 attempts<br />&nbsp; &nbsp; &nbsp; &nbsp; cmp bl,0<br />&nbsp; &nbsp; &nbsp; &nbsp; je invalid2<br />&nbsp; &nbsp; &nbsp; &nbsp; jmp again<br /><br />invalid2:<br />&nbsp; &nbsp; &nbsp; &nbsp; call clearScreen<br />&nbsp; &nbsp; &nbsp; &nbsp; call resetCursor<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,09		;print password failed!!!<br />&nbsp; &nbsp; &nbsp; &nbsp; lea dx,msg3<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; int 20h<br /><br />exit:<br />&nbsp; &nbsp; &nbsp; &nbsp; call clearScreen<br />&nbsp; &nbsp; &nbsp; &nbsp; call resetCursor<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; ;ASCII program<br /><br />	mov ax,0600		;setting background<br />	mov bh, 30h		;color of the attribute<br />	mov cx,0000h		;where the color starts to point<br />	mov dx,184fh		;where the color ends to point<br />	int 10h			<br /><br />	mov ax,0b80h		;location of the screen<br />	mov es,ax		;location of the screen move to es register<br />	mov bx,60+(160*4)	;where the title starts to display and move to bx register<br />	mov si,msg4		;the message move to si register<br />	mov cx,16		;the numbers of letters that will display<br /><br />print:<br /><br />	mov al,bl		;the value of si is move to al register<br />	mov es:,al		;move the value of al to the location of es:<br />	inc si			;increment the si<br />	add bx,2		;add bx by 1 for the attribute<br />	loop print		;looping<br />	int 21h			;to terminate the loop<br /><br />	mov bh,0		;holds the characters<br />	mov di,160*8		;where the characters will display and move to di register<br />	mov cx,255		;the number of characetrs that will display<br /><br />char:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov al,bh		;moving bh to the al register<br />&nbsp; &nbsp; &nbsp; &nbsp; mov es:,al		;move the value of al is move to the location of es:<br />&nbsp; &nbsp; &nbsp; &nbsp; inc bh			;increment the bh<br />&nbsp; &nbsp; &nbsp; &nbsp; add di,8		;to make 20 columns<br />&nbsp; &nbsp; &nbsp; &nbsp; loop char		;looping<br />	int 20h			;to terminate the loop<br /><br /><br /><br />asterisk:			;prints asterisk<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ah,09h<br />&nbsp; &nbsp; &nbsp; &nbsp; lea dx,ask<br />&nbsp; &nbsp; &nbsp; &nbsp; int 21h<br />&nbsp; &nbsp; &nbsp; &nbsp; ret<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />mov ax,4c00h<br />int 21h<br /><br />main endp<br /><br />clearScreen proc<br />	 MOV	AX, 0600H&nbsp;  	;AH = 06 (scroll)<br />							;AL = 00 (full screen)<br />	 MOV	BH, 0BH&nbsp; &nbsp; &nbsp;  	;White background (0)<br />							;Blue foreground (1)<br /><br />	 MOV	CX, 0000H		;Upper left row:column<br />	 MOV	DX, 184FH		;Lower right row:column<br /><br />	 INT	10H				;Call interrupt service<br /><br />	 retn<br />clearScreen endp<br /><br />resetCursor proc<br />	MOV	AH, 02H				;Request set cursor<br />	MOV	BH, 00				;Page number 0<br /><br />	MOV	DX, 0000H			;Row 0, column 0<br /><br />	INT	10H					;Call interrupt service<br />	retn<br />resetCursor endp<br />end main</div><br /><br /><br /><br /></div>
    <div class="meta">Posted on 2011-11-29 00:49:23 by jove2493</div>
   </div>
   <div class="post" id="post-215459">
    <div class="subject"><a href="#post-215459">Re: password input(coding error)</a></div>
    <div class="body">I don&#039;t have PC/Windows or PC/DOS laying around nor do I use MASM very often, but let me see if I can give you some hints. The two offending lines are:<br /><br /><pre><code>mov si, msg4</code></pre><br /><br />and <br /><pre><code>mov al, bl</code></pre><br /><br />The first error looks okay to me, but I believe MASM makes various assumptions about your labels so I would say to try and prepend &#039;msg4&#039; with OFFSET. Or since you have done it elsewhere in the code, try using the LEA instruction instead.<br /><br /><pre><code>mov si, OFFSET msg4</code></pre><br /><pre><code>lea si, msg4</code></pre><br /><br />As for the second problem, I don&#039;t even know what you&#039;re trying to do here! I think you made a mistake and just added an extra &quot;bl&quot; but in case you were actually trying to use SI as an index into the address located in BL (which won&#039;t work because BL can&#039;t hold an address) then you might try using the &#039;&#039; notation. But I think what you really want is to just use:<br /><br /><pre><code>mov al, </code></pre><br /><br />That should handle your error messages.<br /><br />Regards,<br />Bryant Keller<br /></div>
    <div class="meta">Posted on 2011-11-30 22:43:49 by Synfire</div>
   </div>
   <div class="post" id="post-215463">
    <div class="subject"><a href="#post-215463">Re: password input(coding error)</a></div>
    <div class="body">thx, i get it .~!</div>
    <div class="meta">Posted on 2011-12-01 06:13:33 by jove2493</div>
   </div>
   <div class="post" id="post-215474">
    <div class="subject"><a href="#post-215474">Re: password input(coding error)</a></div>
    <div class="body">bry !! hope ur world is better than last we spoke mate</div>
    <div class="meta">Posted on 2011-12-02 02:32:59 by Homer</div>
   </div>
   <div class="post" id="post-215475">
    <div class="subject"><a href="#post-215475">Re: password input(coding error)</a></div>
    <div class="body">About the same actually mate, but still not complaining. :)</div>
    <div class="meta">Posted on 2011-12-02 03:39:23 by Synfire</div>
   </div>
  </div>
 </body>
</html>