<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>No error occurs but WriteFile doesnt work... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12575" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=12575">No error occurs but WriteFile doesnt work...</a></p>
   <div class="post" id="post-97324">
    <div class="subject"><a href="#post-97324">No error occurs but WriteFile doesnt work...</a></div>
    <div class="body">Hy, this code does't work. but why ?<br /><br /><div class="quote"><br /><br />.data<br />	filename	DB 200 DUP(0)<br />	data		DB 200 DUP(0)<br />	lenght	DB 200 DUP(0)<br />	<br />.data?<br />	hFile DWORD ?<br /><br />.code<br />PUBLIC SchreibeDaten<br /><br />SchreibeDaten	PROC Dfilename:DWORD, Ddaten:DWORD<br />				LOCAL bytes_written:DWORD<br />	INVOKE lstrcpy, ADDR filename, Dfilename<br />	INVOKE lstrcpy, ADDR data, Ddaten<br />	INVOKE CreateFile, ADDR filename, GENERIC_READ OR GENERIC_WRITE, NULL, NULL, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL<br />	.IF EAX ==INVALID_HANDLE_VALUE<br />		INVOKE MessageBox, NULL, ADDR filename, NULL, NULL<br />		RET<br />	.ENDIF<br />	MOV DW_hFile, EAX<br />	INVOKE lstrlen, ADDR data<br />	INVOKE lstrcpy, ADDR lenght, EAX<br />	INVOKE WriteFile, hFile, ADDR data, ADDR lenght, ADDR bytes_written, NULL<br />	.IF EAX != NULL<br />		INVOKE MessageBox, NULL, ADDR filename, NULL, NULL<br />		RET<br />	.ENDIF<br />	INVOKE CloseHandle, DW_hFile<br /><br /></div> <br /><br />I call the funktion with this parameters:<br />&quot;D.\Option.ini&quot; and data:&quot;Huhu @ALL&quot;<br /><br />When I call this function the file get no contens :confused: <br /><br />Regards FF</div>
    <div class="meta">Posted on 2003-04-16 14:48:33 by Forginforcer</div>
   </div>
   <div class="post" id="post-97327">
    <div class="subject"><a href="#post-97327">No error occurs but WriteFile doesnt work...</a></div>
    <div class="body">return values aren't there for CPU faeries to toy with and a value is different from a pointer.<br />you will need to go through Iczelion's tutorials at least once. Then you'll see what you're doing wrong and it will be a service to yourself :/<br /><br /><br />Teach a man to fish...</div>
    <div class="meta">Posted on 2003-04-16 14:58:14 by Hiroshimator</div>
   </div>
   <div class="post" id="post-97331">
    <div class="subject"><a href="#post-97331">No error occurs but WriteFile doesnt work...</a></div>
    <div class="body">I have found the bug.<br />I have mixed DB mixed up with DW.<br /><br />But one question:<br />Why is assembler slower than c++, at write files ?<br />I have included Assembler in C++, and the assembler routine is slower than the C++ one. In c++ I have used filestream.</div>
    <div class="meta">Posted on 2003-04-16 15:36:28 by Forginforcer</div>
   </div>
   <div class="post" id="post-97334">
    <div class="subject"><a href="#post-97334">No error occurs but WriteFile doesnt work...</a></div>
    <div class="body">WriteFile is an API, a part of windows,  call mister bill gates  :)</div>
    <div class="meta">Posted on 2003-04-16 15:54:55 by Bit7</div>
   </div>
   <div class="post" id="post-97338">
    <div class="subject"><a href="#post-97338">No error occurs but WriteFile doesnt work...</a></div>
    <div class="body"><div class="quote"><br />Why is assembler slower than c++, at write files ?<br /></div><br /><br />Maybe the C compiler generated better assembly code than you. :rolleyes:</div>
    <div class="meta">Posted on 2003-04-16 16:04:58 by bazik</div>
   </div>
   <div class="post" id="post-97342">
    <div class="subject"><a href="#post-97342">No error occurs but WriteFile doesnt work...</a></div>
    <div class="body">@bazik<br />cool, you are very funny ! I reay have to laught ! *hhihihi*<br />Your are totaly right !<br /><br />But, Its an Api call und shouldnt that slow.<br />It is so slow, becaue every call need a big inizisalisation ?<br /><br />Bye ! Your FF(but not the condom) !</div>
    <div class="meta">Posted on 2003-04-16 16:17:03 by Forginforcer</div>
   </div>
  </div>
 </body>
</html>