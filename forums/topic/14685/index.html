<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>I saw it somewhere once... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14685" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=12">The Heap</a> &raquo; <a href="../?id=14685">I saw it somewhere once...</a></p>
   <div class="post" id="post-113784">
    <div class="subject"><a href="#post-113784">I saw it somewhere once...</a></div>
    <div class="body"><pre><code>shr cx, 1<br />rep movsw<br />rcl cx, 1<br />movsb</code></pre></div>
    <div class="meta">Posted on 2003-08-12 23:22:00 by bitRAKE</div>
   </div>
   <div class="post" id="post-113787">
    <div class="subject"><a href="#post-113787">I saw it somewhere once...</a></div>
    <div class="body">It appears Im witnessing the first case of sleep-walking to your cpu, and posting random thoughts of moving data around in ones sleep...<br /><br />To bad it lacks more 'content' ;)</div>
    <div class="meta">Posted on 2003-08-12 23:59:02 by NaN</div>
   </div>
   <div class="post" id="post-113791">
    <div class="subject"><a href="#post-113791">I saw it somewhere once...</a></div>
    <div class="body">The content is for the reader to discern.<br />I'm saddened you did not find it filling.<br />Would you care to add to the conversation? ;)</div>
    <div class="meta">Posted on 2003-08-13 00:19:50 by bitRAKE</div>
   </div>
   <div class="post" id="post-113793">
    <div class="subject"><a href="#post-113793">I saw it somewhere once...</a></div>
    <div class="body">I understand the source's purpose, just not this post... :confused: <br /><br />Sorry to sadden you ;)</div>
    <div class="meta">Posted on 2003-08-13 00:34:05 by NaN</div>
   </div>
   <div class="post" id="post-113797">
    <div class="subject"><a href="#post-113797">I saw it somewhere once...</a></div>
    <div class="body">looks like VC++ 6's strcpy... I liked it too :)</div>
    <div class="meta">Posted on 2003-08-13 02:00:05 by FearHQ</div>
   </div>
   <div class="post" id="post-113818">
    <div class="subject"><a href="#post-113818">I saw it somewhere once...</a></div>
    <div class="body">Is it a generic string copy (unicode)?</div>
    <div class="meta">Posted on 2003-08-13 07:40:17 by roticv</div>
   </div>
   <div class="post" id="post-113824">
    <div class="subject"><a href="#post-113824">I saw it somewhere once...</a></div>
    <div class="body"><div class="quote"><br />Is it a generic string copy (unicode)? </div>It is a drop in replacement for &quot;REP MOSVB/STOSB&quot;.  In the case of MOVSB, the only difference is the flags are effected.  Alternate solutions would have to use another instruction, and possibly another register or memory.  Here are some alternatives I've seen:<pre><code>shr cx, 1<br />rep movsw<br />jnc @F<br />movsb<br />@@&#58;</code></pre><pre><code>push cx<br />shr cx, 1<br />rep movsw<br />pop cx<br />and cx, 1<br />movsb</code></pre><br /><br />I posted it in the heap because it's 16-bit code.  I'm always amazed at little snips of code - I don't always have a use for them, but I do enjoy looking at them.</div>
    <div class="meta">Posted on 2003-08-13 08:32:16 by bitRAKE</div>
   </div>
   <div class="post" id="post-113828">
    <div class="subject"><a href="#post-113828">I saw it somewhere once...</a></div>
    <div class="body">Shouldn't it be<br /><pre><code>shr cx, 1<br />rep movsw<br />rcl cx, 1<br />rep movsb</code></pre><br />Since movsx is not dependent on ecx unless there is a prefix F3h.</div>
    <div class="meta">Posted on 2003-08-13 10:04:36 by roticv</div>
   </div>
   <div class="post" id="post-113871">
    <div class="subject"><a href="#post-113871">I saw it somewhere once...</a></div>
    <div class="body"><strong>roticv</strong>, absolutely right - now I see why the whole thread got off track!<br />Oh, I play the fool for everyone. :grin:  Thank you!</div>
    <div class="meta">Posted on 2003-08-13 20:37:38 by bitRAKE</div>
   </div>
  </div>
 </body>
</html>