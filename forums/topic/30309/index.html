<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Where is this variable declared? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30309" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=30309">Where is this variable declared?</a></p>
   <div class="post" id="post-213479">
    <div class="subject"><a href="#post-213479">Where is this variable declared?</a></div>
    <div class="body"><pre><code>.text:004010A0 ; =============== S U B R O U T I N E =======================================<br />.text:004010A0<br />.text:004010A0<br />.text:004010A0 sub_4010A0&nbsp; &nbsp; &nbsp; proc near&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; CODE XREF: _main+1Cp<br />.text:004010A0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; _main:loc_4014ECp<br />.text:004010A0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp; ebx<br />.text:004010A1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp; esi<br />.text:004010A2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp; edi<br />.text:004010A3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp; offset Format&nbsp;  ; &quot;\n\nTo Continue, press INSERT\n&quot;<br />.text:004010A8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  call&nbsp; &nbsp; ds:printf<br />.text:004010AE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp;  ebx, ds:GetAsyncKeyState<br />.text:004010B4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp;  edi, ds:Sleep<br />.text:004010BA&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  add&nbsp; &nbsp;  esp, 4<br />.text:004010BD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp;  esi, esi<br />.text:004010BF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  nop<br />.text:004010C0<br />.text:004010C0 loc_4010C0:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; CODE XREF: sub_4010A0+36j<br />.text:004010C0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp; 2Dh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; vKey<br />.text:004010C2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  call&nbsp; &nbsp; ebx ; GetAsyncKeyState<br />.text:004010C4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  test&nbsp; &nbsp; al, 1<br />.text:004010C6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  jz&nbsp; &nbsp; &nbsp; short loc_4010CD<br />.text:004010C8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp;  esi, 1<br />.text:004010CD<br />.text:004010CD loc_4010CD:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; CODE XREF: sub_4010A0+26j<br />.text:004010CD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  push&nbsp; &nbsp; 0C8h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; dwMilliseconds<br />.text:004010D2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  call&nbsp; &nbsp; edi ; Sleep<br />.text:004010D4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  test&nbsp; &nbsp; esi, esi<br /></code></pre><br /><br /><pre><code>signed int __cdecl sub_4010A0()<br />{<br />&nbsp; signed int v0; // esi@1<br /><br />&nbsp; printf(&quot;\n\nTo Continue, press INSERT\n&quot;);<br />&nbsp; v0 = 0;<br />&nbsp; do<br />&nbsp; {<br />&nbsp; &nbsp; if ( GetAsyncKeyState(45) &amp; 1 )<br />&nbsp; &nbsp; &nbsp; v0 = 1;<br />&nbsp; &nbsp; Sleep(0xC8u);<br />&nbsp; }<br />&nbsp; while ( !v0 );<br />&nbsp; return 1;<br />}<br /></code></pre><br /><br /><br />above is the psuedocode for the assembly code above it! im curious as to WHERE the unsigned int variable v0 is declared and initalized in the above assembly code! for some reason i cant seem to find it!! -thx</div>
    <div class="meta">Posted on 2010-11-14 09:23:52 by maybnxtseasn</div>
   </div>
   <div class="post" id="post-213480">
    <div class="subject"><a href="#post-213480">Re: Where is this variable declared?</a></div>
    <div class="body">It&#039;s here<br /><pre><code><br />.text:004010C8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  mov&nbsp; &nbsp;  esi, 1<br /></code></pre></div>
    <div class="meta">Posted on 2010-11-14 09:45:45 by JimmyClif</div>
   </div>
   <div class="post" id="post-213481">
    <div class="subject"><a href="#post-213481">Re: Where is this variable declared?</a></div>
    <div class="body">i just don&#039;t see how it&#039;s declared there ^_^ i can see it&#039;s recieving the value one...but i don&#039;t see how this is the variables declaration...!</div>
    <div class="meta">Posted on 2010-11-14 11:41:15 by maybnxtseasn</div>
   </div>
   <div class="post" id="post-213482">
    <div class="subject"><a href="#post-213482">Re: Where is this variable declared?</a></div>
    <div class="body"><pre><code>.text:004010BD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  xor&nbsp; &nbsp;  esi, esi</code></pre><br /><br />is the same as:<br /><br /><pre><code>v0 ^= v0;</code></pre><br /><br />which is an optimized form of v0=0;<br /><br />in otherwords, these two instructions are the same except the xor version is smaller:<br /><br /><pre><code>xor esi, esi ; v0 ^= v0<br />mov esi, 0x00000000 ; v0 = 0</code></pre><br /><br /></div>
    <div class="meta">Posted on 2010-11-14 11:49:49 by Synfire</div>
   </div>
   <div class="post" id="post-213484">
    <div class="subject"><a href="#post-213484">Re: Where is this variable declared?</a></div>
    <div class="body"><div class="quote"><br />i just don&#039;t see how it&#039;s declared there ^_^ i can see it&#039;s recieving the value one...but i don&#039;t see how this is the variables declaration...!<br /></div><br /><br />The variable is mapped directly to the esi register. An actual variable in memory is never declared, because the compiler has optimized it away.<br />Local function variables would normally be declared as part of the stackframe. But as you might notice, there is no stack frame in the entire function. All local variables have been optimized away, and only registers are used inside the code.</div>
    <div class="meta">Posted on 2010-11-15 07:32:31 by Scali</div>
   </div>
  </div>
 </body>
</html>