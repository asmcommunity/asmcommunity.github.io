<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Visual window project possible in RadAsm? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19881" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=42">RadASM</a> &raquo; <a href="../?id=19881">Visual window project possible in RadAsm?</a></p>
   <div class="post" id="post-152672">
    <div class="subject"><a href="#post-152672">Visual window project possible in RadAsm?</a></div>
    <div class="body">Hi all,<br /><br />Can anyone of you tell me whether it is possible in RadAsm to have a visual project with a window instead of a dialog.<br />I saw you can start a win32 project, but it doesn't show a window in the editor, does it?<br /><br />Or do I understand the meaning of the word dialog wrong?<br />As far as I know, a window can have controls on it, with each control having its own font, while a dialog can only have controls having the same font the dialog has.<br /><br />Regards,<br />mdevries.</div>
    <div class="meta">Posted on 2004-11-10 15:16:02 by mdevries</div>
   </div>
   <div class="post" id="post-152676">
    <div class="subject"><a href="#post-152676">Visual window project possible in RadAsm?</a></div>
    <div class="body">Hi mdevries<br /><br />You can design a dialog with controls and then use the Dialog to Window tool.<br /><br />Example code:<br /><pre><code><br />.386<br />.model flat,stdcall     ;32 bit memory model<br />option casemap&#58;none     ;case sensitive<br /><br />;#########################################################################<br /><br />include windows.inc<br />include kernel32.inc<br />include user32.inc<br />include Comctl32.inc<br /><br />includelib user32.lib<br />includelib kernel32.lib<br />includelib Comctl32.lib<br /><br />WinMain     PROTO &#58;DWORD,&#58;DWORD,&#58;DWORD,&#58;DWORD<br />WndProc         PROTO   &#58;HWND,&#58;UINT,&#58;WPARAM,&#58;LPARAM<br /><br />;#########################################################################<br /><br />.const<br /><br />IDD_DIALOG1                     equ 101<br />IDC_GRP1                        equ 1001<br />IDC_EDT1                        equ 1002<br /><br />.data<br /><br />RichEditDLL                     db 'riched20.dll',0<br />szWinClass                      db 'WinClass',0<br />szButton                        db 'Button',0<br />szEdit                          db 'Edit',0<br />szWinCap1                       db 'DialogApp',0<br />szGroupCap1                     db 'IDC_GRP',0<br /><br />.data?<br /><br />hInstance                       dd ?<br />CommandLine                     dd ?<br />hIcon                           dd ?<br />hWnd                            dd ?<br />iccex                           INITCOMMONCONTROLSEX &lt;?&gt;<br /><br />;#########################################################################<br /><br />.code<br /><br />start&#58;<br /><br />    invoke GetModuleHandle, NULL<br />    mov     hInstance,eax<br />    invoke GetCommandLine<br />    mov     CommandLine,eax<br />    invoke InitCommonControls<br />    mov     iccex.dwSize,sizeof INITCOMMONCONTROLSEX    ;prepare common control structure<br />    mov     iccex.dwICC,ICC_DATE_CLASSES<br />    invoke InitCommonControlsEx,addr iccex<br />    invoke LoadLibrary,addr RichEditDLL<br />    mov     hRichEdDLL,eax<br />    invoke WinMain,hInstance,NULL,CommandLine,SW_SHOWDEFAULT<br />    push    eax<br />    invoke FreeLibrary,hRichEdDLL<br />    pop     eax<br />    invoke ExitProcess,eax<br /><br />;#########################################################################<br /><br />WinMain proc hInst&#58;DWORD,hPrevInst&#58;DWORD,CmdLine&#58;DWORD,CmdShow&#58;DWORD<br />    LOCAL   wc&#58;WNDCLASSEX<br />    LOCAL   msg&#58;MSG<br /><br />    invoke LoadIcon,NULL,IDI_APPLICATION<br />    mov     hIcon,eax<br />    mov     wc.cbSize,sizeof WNDCLASSEX<br />    mov     wc.style,CS_HREDRAW or CS_VREDRAW<br />    mov     wc.lpfnWndProc,offset WndProc<br />    mov     wc.cbClsExtra,NULL<br />    mov     wc.cbWndExtra,NULL<br />    push    hInst<br />    pop     wc.hInstance<br />    mov     wc.hbrBackground,COLOR_BTNFACE+1<br />    mov     wc.lpszMenuName,0<br />    mov     wc.lpszClassName,offset szWinClass<br />    push    hIcon<br />    pop     wc.hIcon<br />    invoke LoadCursor,NULL,IDC_ARROW<br />    mov     wc.hCursor,eax<br />    push    hIcon<br />    pop     wc.hIconSm<br />    invoke RegisterClassEx,addr wc<br />    invoke CreateWindowEx,0h,addr szWinClass,addr szWinCap1,14CF0800h,10,10,300,200,0,0,hInst,0<br />    mov     hWnd,eax<br />    invoke ShowWindow,hWnd,SW_SHOWNORMAL<br />    invoke UpdateWindow,hWnd<br />    .while TRUE<br />        invoke GetMessage, addr msg,NULL,0,0<br />      .break .if !eax<br />        invoke TranslateMessage, addr msg<br />        invoke DispatchMessage, addr msg<br />    .endw<br />    mov     eax,msg.wParam<br />    ret<br /><br />WinMain endp<br /><br />;#########################################################################<br /><br />WndProc proc hWin&#58;HWND,uMsg&#58;UINT,wParam&#58;WPARAM,lParam&#58;LPARAM<br />    LOCAL   rect&#58;RECT<br />    LOCAL   hDC&#58;HDC<br />    LOCAL   ps&#58;PAINTSTRUCT<br /><br />    mov     eax,uMsg<br />    .if eax==WM_CREATE<br />        invoke CreateWindowEx,0h,addr szButton,addr szGroupCap1,50000007h,0,0,130,172,hWin,IDC_GRP1,hInstance,0<br />        invoke CreateWindowEx,200h,addr szEdit,0,50010000h,132,0,160,172,hWin,IDC_EDT1,hInstance,0<br />    .elseif eax==WM_COMMAND<br />        mov     eax,wParam<br />        mov     edx,eax<br />        shr     edx,16<br />        and     eax,0FFFFh<br />        .if edx==BN_CLICKED<br />        .endif<br />    .elseif eax==WM_PAINT<br />    .elseif eax==WM_CLOSE<br />    .elseif eax==WM_DESTROY<br />        invoke PostQuitMessage,NULL<br />        xor     eax,eax<br />        ret<br />    .endif<br />    invoke DefWindowProc,hWin,uMsg,wParam,lParam<br />    ret<br /><br />WndProc endp<br /><br />;#########################################################################<br /><br />end start<br /></code></pre><br /><br />KetilO</div>
    <div class="meta">Posted on 2004-11-10 15:26:06 by KetilO</div>
   </div>
   <div class="post" id="post-152677">
    <div class="subject"><a href="#post-152677">Visual window project possible in RadAsm?</a></div>
    <div class="body">Hi KetilO,<br /><br />Thank you for your quick reply.<br /><br />Do I understand you well? Is it possible in this way to assign a font for each control by the properties window? Or can it only be done programmatically?<br /><br />Regards,<br />mdevries.</div>
    <div class="meta">Posted on 2004-11-10 15:31:25 by mdevries</div>
   </div>
   <div class="post" id="post-152679">
    <div class="subject"><a href="#post-152679">Visual window project possible in RadAsm?</a></div>
    <div class="body">It has to be done in code.<br />With the FontBuilder it's easy.<br /><br /><pre><code><br />    .data<br />    Arial_8 LOGFONT &lt;-11,0,0,0,400,0,0,0,0,3,2,1,34,'Arial'&gt;<br />    Arial_10 LOGFONT &lt;-13,0,0,0,400,0,0,0,0,3,2,1,34,'Arial'&gt;<br />    .code<br />    mov     eax,uMsg<br />    .if eax==WM_CREATE<br />        invoke CreateWindowEx,0h,addr szButton,addr szGroupCap1,50000007h,0,0,130,172,hWin,IDC_GRP1,hInstance,0<br />        push    eax<br />        invoke CreateFontIndirect,offset Arial_8<br />        pop     edx<br />        invoke SendMessage,edx,WM_SETFONT,eax,FALSE<br />        invoke CreateWindowEx,200h,addr szEdit,0,50010000h,132,0,160,172,hWin,IDC_EDT1,hInstance,0<br />        push    eax<br />        invoke CreateFontIndirect,offset Arial_10<br />        pop     edx<br />        invoke SendMessage,edx,WM_SETFONT,eax,FALSE<br /></code></pre><br /><br />KetilO</div>
    <div class="meta">Posted on 2004-11-10 15:46:26 by KetilO</div>
   </div>
   <div class="post" id="post-152680">
    <div class="subject"><a href="#post-152680">Visual window project possible in RadAsm?</a></div>
    <div class="body">Hi KetilO,<br /><br />Thanks again you for your reply.<br />Wouldn't it be a nice idea to incapsulate it in the visual editor?<br /><br />Regards,<br />mdevries.</div>
    <div class="meta">Posted on 2004-11-10 15:50:08 by mdevries</div>
   </div>
  </div>
 </body>
</html>