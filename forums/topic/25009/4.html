<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Getting Started in GameDev - a tutorial - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25009" />
  <link rel="prev" href="../?id=25009&amp;page=3" />  <link rel="next" href="../?id=25009&amp;page=5" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25009">Getting Started in GameDev - a tutorial</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=25009&amp;page=1" style="">&laquo;</a><a href="../?id=25009&amp;page=3" style="">&lt;</a><input type="hidden" name="id" value="25009" /><input type="number" name="page" min="1" max="5" step="1" value="4" onchange="this.form.submit();" /><a href="../?id=25009&amp;page=5">&gt;</a><a href="../?id=25009&amp;page=5">&raquo;</a></form>   <div class="post" id="post-184099">
    <div class="subject"><a href="#post-184099">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">This update includes all the changes I&#39;ve outlined.<br />One mesh is loaded from one xfile as a test.<br />We don&#39;t create or render any instances of it yet, however code has been included for these functions.<br /><br />Let&#39;s just clarify what&#39;s going on...<br />D3DApp owns the ResourceManager (formerly the TextureManager).<br />All ResourceManager functionality is available to D3DApp and to any class which inherits from D3DApp.<br />Our D3DGame instance inherits from D3DApp, so we can say that D3DGame owns ResourceManager.<br /><br />ResourceManager is responsible for loading and unloading filebased resources (currently Textures and Meshes), which it stores in two collections. One contains Texture objects, the other contains D3DMesh objects.<br /><br />D3DMesh objects are REFERENCE objects representing a loaded mesh.<br />Each D3DMesh object owns a collection of D3DMeshInstance objects, ie, a Reference object is responsible for managing its own Instances.<br /><br />Does that sound reasonable? :)<br /><br />There&#39;s one particular aspect of the latest code additions which I&#39;d like to point out.<br />We never have to unload D3DMesh objects !!!<br />Since they are managed by ResourceManager, and since ResourceManager ITSELF is cleaned up via our GameUnloadVolatiles callback, we can totally forget about cleaning up Meshes :)<br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1931" target="_blank">GameClient_24.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-07-28 21:23:49 by Homer</div>
   </div>
   <div class="post" id="post-184100">
    <div class="subject"><a href="#post-184100">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Ultrano - see the D3DMesh.inc in Tutorial#24..<br />I&#39;ve used a simple struct to define D3DMeshInstance&nbsp; (a runtime instance of a reference mesh, with stuff like position and orientation).<br />I&#39;ve defined the D3DMesh reference meshes as an Object which owns the pMesh, but which also owns and manages a collection of D3DMeshInstance.<br />Finally, the D3DMesh objects are managed in a similar collection by ResourceManager.<br /><br />So - we ask ResourceManager to load an xfile, it will check whether that file is already loaded, and if not, it will load it into a new D3DMesh object... D3DMesh represents a loaded Reference object.<br />Then we can ask a D3DMesh object to add one or more instances to its collection of D3DMeshInstance structs.<br />D3DMeshInstance represents a Reference to a D3DMesh object, and are grouped under that particular D3DMesh.<br /><br />Note that the meshloader uses ResourceManager&#39;s texture management code, so that mesh textures are universally shared like any other.<br /><br />I have to agree with you regarding the untidy float declarations, I thought about implenting a macro for that, but I felt it would obscure what&#39;s going on.. and decided to leave such niceties for later.<br />Similarly, I usually use macros such as &#39;SafeRelease&#39;, &#39;SafeFree&#39;, etc, which I have omitted for the same reason.<br /><br /></div>
    <div class="meta">Posted on 2006-07-28 21:37:04 by Homer</div>
   </div>
   <div class="post" id="post-184101">
    <div class="subject"><a href="#post-184101">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Another day, another update :)<br /><br />This time we&#39;re actually creating an Instance of our demo mesh and Rendering all Instances (we only made one).<br /><br />Note that we could create a million instances of the mesh , at random locations in the World, IF we wanted to.<br /><br />I&#39;ve disabled the rendering of the Sphere, and placed once instance of Tiger.x where the Sphere used to be, and modified the Camera view somewhat so that you can more easily see stuff.<br /><br />Several minor bugs were identified in D3DMesh during the implementation of Instance rendering, and were fixed immediately.<br /><br />When I first executed the bugfree code, I still could not see my Tiger, but I could see a speck of insect poo where the Tiger should be.<br />This bothered me - so I looked in the Tiger.x file (its plaintext ascii) at the values of its Vertices, and found that they were extremely small.<br />My response was to add a few more Methods to D3DMesh.<br />They are :<br /><br />CalcBounds - measures the BoundingSphere of a mesh and returns a Radius value. A boundingsphere is the smallest theoretical sphere that surrounds a given object, we&#39;ll learn how to use them later.<br /><br />ScaleMesh - applies a given Scaling factor to the mesh vertices.<br />Sure, we COULD do this with a Transformation matrix, but then we&#39;d have to apply that matrix OFTEN... much better to scale the vertices ONCE, and forget about it.<br /><br />ResizeMesh - calculates the scaling factor required in order to make our mesh a given Size, and applies it via ScaleMesh. Optionally, it can ALSO find the &#39;true center&#39; of the mesh, and shift the vertices such that the &#39;true center&#39; coincides with the mesh&#39;s local origin (ie, &#39;centralize&#39; the mesh).<br /><br />Having added those methods, I was then able to resize the Tiger mesh at loadtime so its the same size as our Boxes.<br /><br />Yay, we&#39;ve moved beyond &#39;primitive geometric entities&#39; into the land of arbitrary meshes - now its time to create a suitable Player mesh.<br />Whichever program you use to create your Meshes is your affair.<br />I like MAYA, and that&#39;s what I&#39;ll use.<br /><br />Hopefully in the next update, we&#39;ll look at our Player object, implement the Player mesh, and hook up some keyboard controls.<br /><br />In closing, I&#39;d like to point out that the Rotation values for the Mesh are to be given in RADIANS (not degrees).<br />That means the angles are somewhere between 0 and 2*PI (remember about 2*PI being a full circle?)<br />An angle of PI is 180 degrees, PI/2 is 90 degrees, etc.<br />Can you figure out how to convert degrees to radians, and radians to degrees?<br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1932" target="_blank">GameClient_25.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-07-29 02:30:41 by Homer</div>
   </div>
   <div class="post" id="post-184102">
    <div class="subject"><a href="#post-184102">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">In D3DMesh.UpdateAllInstances, shouldn&#39;t we first rotate, then translate (order of multiplication of the matrices)?<br />If so, wouldn&#39;t a matrix-multiplication be skippable, like:<br /><pre><code><br />Matrix4* Matrix4_MakeModelMatrix(Matrix4* out,Vec6* ModelVec6){<br />	short rx,ry,rz;<br />	//-----[ rotate model ]--------------------[<br />	rx = ModelVec6-&gt;rx &amp; 1023;<br />	ry = ModelVec6-&gt;ry &amp; 1023;<br />	rz = ModelVec6-&gt;rz &amp; 1023;<br />	if(rx | ry | rz)Matrix4_MakeRotHPB(out,rx,ry,rz);<br />	else Matrix4_Unit(out);<br />	//-----------------------------------------/<br />	//----[ translate model ]------------------[<br />	out-&gt;w.x+= ModelVec6-&gt;x;<br />	out-&gt;w.y+= ModelVec6-&gt;y;<br />	out-&gt;w.z+= ModelVec6-&gt;z;<br />	//-----------------------------------------/<br />	return out;<br />}<br /></code></pre><br /></div>
    <div class="meta">Posted on 2006-07-29 06:56:51 by Ultrano</div>
   </div>
   <div class="post" id="post-184109">
    <div class="subject"><a href="#post-184109">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Yes - the order of operations was DELIBERATELY wrong.<br />I hoped someone ELSE would pick up on it.<br />Not that I have any problem with you, mate... just that I wished for some beginner to notice it.<br />As for &#39;skipping&#39; the operation, I&#39;ve implemented a flag that should be set to TRUE whenever rotation and/or position changes for any Instance of any D3DMesh, this flag means &#39;I need to recalculate the combined matrix&#39;.<br /><br />Unless something changes, the matrix need not be recalculated.<br /></div>
    <div class="meta">Posted on 2006-07-29 18:24:25 by Homer</div>
   </div>
   <div class="post" id="post-184110">
    <div class="subject"><a href="#post-184110">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">I&#39;m actually a beginner at matrices, quaternions, and ... all DirectX/OpenGL coding :) . For 2 years, I&#39;ve been fooling myself with simple code that doesn&#39;t use all 3 axis of rotation. Fortunately, my ignorance helped me speed-up my simple 2.5D commercial games, and I didn&#39;t experience gimbal-lock and bad rotation. At that time I was just pondering why the heck my light would play tricks at some angles ^^&quot;. <br /></div>
    <div class="meta">Posted on 2006-07-29 19:45:33 by Ultrano</div>
   </div>
   <div class="post" id="post-184122">
    <div class="subject"><a href="#post-184122">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Homer I have some spaceships and buildings modelled in .obj file format, I found dx meshconvert from sdk, but cant get it work to convert to .x files, I also found .x file documentation how it saves animations and want to find a way to contribute with orientalstyle swordfighting animations and other things to your work<br />I use Hexagon 2, shouldnt export terrain and such&nbsp; in autocad binary format be best to use when it comes to things you want to manipulate more on lowlevel CUSTOMVERTEX level? its smaller as its not encoded in ascii as most 3dformats are and easier to readin<br /><div class="quote"><br />I&#39;m actually a beginner at matrices, quaternions...<br /></div><br />I think you speak for many of us are beginners at&nbsp; quats/matrices and all asmcoders&nbsp; love to make tinker with own code that makes very fast, but simplistic solutions<br />irony SSE was designed to be useful for quats and I instead made SSE code that made use of parallelism of simplistic rotation and RCPPS+MULPS for fast 3dtransform for 2 points simultanously&nbsp; replaced 4 division Z ops<br /><br /></div>
    <div class="meta">Posted on 2006-07-30 07:18:42 by daydreamer</div>
   </div>
   <div class="post" id="post-184141">
    <div class="subject"><a href="#post-184141">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">In the attached update, we begin to make use of our &#39;World array object&#39;. I&#39;ve implemented a new method called &#39;World.LoadBrickMapFromMemory&#39;.<br />It takes two params : a pointer to a list of TextureNames to be loaded by BrickManager, and a pointer to a 2D array of Bytes which represent the TextureID and Position of each Brick instance in a &#39;game level&#39;.<br />The value 255 is reserved by the new Method to signify &#39;an empty cell&#39; - ie &#39;no brick&#39;... any other value identifies the index of one of the textures we loaded into BrickManager.<br />I&#39;ve created a demo &#39;BrickMap&#39; for the demo 10x10 World using only the two Textures we&#39;ve already been using for Bricks, and I&#39;ve left the camera view the way it was last time.<br /><br />Have fun :)<br /><br />daydreamer - I&#39;ve written an OBJ file import/export tool in the past, but that sourcecode was destroyed. If you want help with an OBJ&lt;--&gt;X converter, I&#39;m willing to help.<br />I&#39;ll appreciate any contribution you wish to make in regards to this project framework, especially once the first simple demo game is working.<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1941" target="_blank">GameClient_26.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-07-31 03:33:01 by Homer</div>
   </div>
   <div class="post" id="post-184200">
    <div class="subject"><a href="#post-184200">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Today&#39;s update shows the loading and rendering of a Player mesh (from xfile).<br />I&#39;ve implemented this via ResourceManager, which means that we can create N instances of the Player mesh (ie multiplayer), it means that resources are cleaned up for us, and it means that lazyboy only had to add a few lines of code to implement this new entity :P<br /><br />Note: I&#39;ve moved the camera back somewhat so you can see more easily, and I am yet to hook up the player controls.<br /><br />The player mesh (which I created in Maya) is a very simple geometry.<br />It&#39;s a deformed cube.. I chose this geometry for two reasons: it&#39;s suitable for the proposed demo game, and it allows me to begin talking about a rather advanced topic that we&#39;ll be covering soon.<br /><br />You&#39;re going to have to use your imagination here, but at least you have a visual aid.<br />The &#39;deformed cube&#39; we&#39;re seeing is an example of a Frustum..we typically use a Frustum to describe what the camera is able to see.<br />Anything inside this frustum thingy is potentially visible, and anything not inside it is OFFSCREEN.<br />Imagine that the smaller face at the back of that frustum is your monitor screen..thats the Near Plane.. the distance to the larger face at the front is the viewing depth.. the larger flat face at the front is the Far Plane. Imagine that our Camera was always located in the center of the Near Plane, and that the Frustum was locked to move and rotate with the Camera.. is it starting to make sense yet?<br />What the heck do we care about this for?<br /><br />We will be implementing something called Frustum Culling.<br />We will attach a frustum to our Camera (actually, we&#39;ll be extracting the frustum from the camera view anytime the view is updated, but anyhoo..)<br />We&#39;ll determine what stuff is partially or fully inside the Frustum, and only render that stuff.. basically we won&#39;t render whatever is definitely not visible, like stuff thats behind the camera, or very far away stuff.<br />This can dramatically improve our rendering speed when the world is large and/or has a lot of stuff in it.<br />We&#39;re going to take it one step further too, instead of simply checking what stuff is inside the frustum, we&#39;ll check what &#39;World Cells&#39; are inside the frustum (because we can test these quickly).<br />If a World Cell is not visible, the stuff inside it cannot possibly be visible either.. this is known as HIERARCHICAL CULLING.<br /><br />In the next update, we&#39;ll hook up the Player controls and if I can spare the time from my schedule we&#39;ll begin looking at collision detection basics and maybe if we&#39;re lucky we&#39;ll add simple motion to the Sphere.<br />Another thing we&#39;ll need very soon is a SKYBOX, so maybe we can add that too.<br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1944" target="_blank">GameClient_27.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-02 03:44:22 by Homer</div>
   </div>
   <div class="post" id="post-184223">
    <div class="subject"><a href="#post-184223">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Now I&#39;ve hooked up some keyboard controls.<br />You can use the left and right cursors to control the &#39;local Player&#39;.<br />I&#39;ve left the up and down cursors controlling the Camera.<br /><br />The ResourceManager doesn&#39;t really give us very good access to manipulate the Mesh instances individually, so rather than adding special methods for this purpose, I&#39;ve added one line to the D3DMesh.AddInstance method so that it returns a ptr to the new D3DMeshInstance, which we can store for quicker access (rather than having to &#39;dig through pointers&#39; to get to it).<br /><br />It&#39;s time to begin talking about basic collision detection (we&#39;ll discuss collision response when it becomes appropriate).<br />The most primitive kind of collision testing we can perform involves testing the position of a Point in 3D space.<br />Points are infinitely small, they give position and nothing else.<br />Most of the more complex collision tests we can perform are based on point testing, for example, testing the collision of a Line segment can be thought of in terms of testing two points. In the field of 3D programming, we typically refer to a 3D line between two 3D points as an EDGE.<br />We can consider the Vertices of our 3D entities as Points, and we can consider our 3D entities in general as being constructed from Points, Edges and Triangular Surfaces (&#39;faces&#39;).<br />The great thing about Triangular surfaces is that they are always truly FLAT, ie, they can&#39;t be warped or twisted like more complex surfaces such as rectangles can be.<br />We can say that a Triangle always rests on a Plane.<br />What&#39;s a Plane? A plane is a theoretical flat surface in 3D space which stretches to infinity, but is always flat.<br />Planes are very important for collision testing, and we&#39;ll certainly be learning more about them as we go.. but for now, let&#39;s concentrate on the basics.<br /><br />Our first collision testing will involve Spheres.<br />The collision test for Spheres is ALMOST exactly the same as testing a Point.. assuming that we know the Radius of the Sphere, and the Position of the sphere&#39;s center in 3D space, we can perform a simple point test, but give the point some &#39;thickness&#39; equal to the radius.<br />For example: for a Sphere with a radius of 5 units, if we perform a point test using the Sphere&#39;s center and find that the point is 4 units away from the entity we&#39;re testing against, we can say YES, theres possibly a collision here, and the possible penetration depth is 1.<br />If the sphere&#39;s center was exactly 5 units away, it&#39;s rubbing up against the other entity, and if its further away than 5, theres NO COLLISION.<br />See what I mean about giving the point some &#39;thickness&#39;?<br /><br />So what I&#39;m really saying is that testing a Sphere is the same as testing a Point, except that there is a known &#39;Tolerance&#39; (margin of error) that is equal to the Sphere radius.<br /><br />Our first mission will be to detect collisions between our &#39;game ball&#39; and our &#39;bricks&#39;.<br />We won&#39;t need to perform &#39;Plane intersection tests&#39; or anything like that just yet, because we can take advantage of the fact that the Bricks are axially-aligned (ie never rotated) and are of a fixed size.<br />Essentially, I&#39;m saying that we can test a Sphere against a World Cell&#39;s boundaries very quickly, and we DO want our collision tests to be as fast as possible, we&#39;re learning good habits that will help us to avoid struggling with the problems that arise later in a game&#39;s development due to inefficient algorithms and poor planning.<br /><br />Next we&#39;ll learn another relatively advanced technique (but absolutely easy to implement) which is called Point Constraint.<br />Basically, we&#39;re going to make the game ball &#39;stick to the player&#39; until the user decides to LAUNCH the ball toward the bricks.<br />As soon as we can launch the ball, we&#39;ll want our first simplistic collision testing, otherwise the ball will just sail right through the bricks, leave the playing area, and continue travelling &#39;to infinity and beyond&#39;!!!<br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1947" target="_blank">GameClient_28.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-03 00:45:54 by Homer</div>
   </div>
   <div class="post" id="post-184240">
    <div class="subject"><a href="#post-184240">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Minor changes were made to the D3DApp.Run method.<br />Today I&#39;ve added support for a fourth user callback to D3DApp (and thus to D3DGame).<br />Its job is to periodically update the position and orientation of our entities over time.<br />More specifically: our user callback will be executed at fixed timesteps (which just happen to equal our &quot;Desired FPS&quot; ie 1/30 of a second&nbsp; in the current democode).<br />We&#39;ll call it our &quot;Physics updater&quot;, and we&#39;ll call the fixed timestep our &quot;Physics TimeStep&quot;.<br /><br />I&#39;ve desynchronized the Physics updates from the Rendering updates.<br />There&#39;s a number of very good reasons why the physics updates should occur at a fixed interval, among which:&nbsp; it allows for very accurate prediction, and it is not prone to numerical drift caused by compounded error in elapsed time evaluation (like variable timestepping schemes are).<br /><br />Note that our Rendering updates merely approximate a fixed timestep - the actual time elapsed between frame renderings is subject to a little drift.<br />Conversely, the Physics updates are time-corrected to an EXACT timestep.<br /><br />When we want to move some entity over time, whether we realize it or not, we are in fact implementing some crude physics.<br />It&#39;s better to accept this fact right up front, and design the framework accordingly.<br /><br />The position and orientation of our entities describe their &#39;Physics State&#39;.<br />We now have a place to update the Physics State of our entities using a fixed timestep and without regard to actual framerate.<br /><br />Later we&#39;ll be adding a Runge-Kutta (RK4) numerical integrator for maintaining the physics states, then we&#39;ll have &#39;real physics simulation&#39; and not just some slapped-together simple physics approximation.<br />RK4 in particular hates a variable timestep, so we&#39;re planning ahead.<br />Sure, THIS DEMO GAME doesn&#39;t really require nice physics, but future projects probably will, and our framework will support it.<br /><br />I&#39;m not going to post an update just yet, because there&#39;s no appreciable changes (visually) in the demo, so it&#39;s no fun yet.<br /><br />I&#39;m going to add support for Instancing of the Sphere next, so that we can have multiple game balls in play, and so that we can attach game balls to players at the start of the game.<br />Since spheres are a geometric primitive, we&#39;ll add support to the ResourceManager for watching over them.<br /><br />Sound fair enough?<br /><br />Well people, the progress has been a little slow, but we&#39;re getting there.. Does anyone have questions, concerns, suggestions, etc?<br /></div>
    <div class="meta">Posted on 2006-08-03 22:21:25 by Homer</div>
   </div>
   <div class="post" id="post-184242">
    <div class="subject"><a href="#post-184242">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">I&#39;ve created a new Object called D3DSphere.<br />It&#39;s a lot like D3DMesh, it represents a reference object which manages its own collection of D3DSphereInstance structures.<br />D3DSphere supports unique Radius and geometric refinement (number of slices and stacks).<br />D3DSphereInstance supports unique position and color.<br /><br />Like D3DMesh, I&#39;ve implemented D3DSphere underneath ResourceManager.<br /><br />There&#39;s a fair bit of code in there, so it probably warrants another update to the zip, even though we still have nothing new to see at runtime.<br /><br />Note that I have not yet replaced the original sphere-related code in the main asm file, nor have I implemented code which actually USES the new managed Spheres.<br /><br />Anyway, you can now create reference spheres (of fixed radius), and their instances (pretty colored balls everywhere).<br /><br />In terms of this demo game, I&#39;ll be associating one instance of a sphere with each Player... a Player will initially &#39;Own&#39; a sphere instance such that the position of the sphere may be forced to some Player-relative position using a point constraint (ie each player will initially have a game ball attached to them).<br />Once the Player has &#39;launched the ball&#39;, this association will not be enforced, and so neither will the point constraint.<br /><br />Our resourcemanager is becoming more powerful :)<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1948" target="_blank">GameClient_29.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-03 23:47:05 by Homer</div>
   </div>
   <div class="post" id="post-184246">
    <div class="subject"><a href="#post-184246">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body"><br />Tutorial number 30 already - a milestone?<br /><br />The code related to Spheres in the main asm file was replaced with code which implements the same, but using the new Managed spheres.<br /><br />We&#39;re ready to implement our first Point Constraint :)<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1949" target="_blank">GameClient_30.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-04 03:45:05 by Homer</div>
   </div>
   <div class="post" id="post-184283">
    <div class="subject"><a href="#post-184283">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">I&#39;ve implemented a Point Constraint, the position of the &#39;game ball&#39; is being constrained to the position of the local player, until you press SPACEBAR to &#39;launch the ball&#39;... obviously, I&#39;ve added a keyboard callback which is called in response to the spacebar being pressed.<br /><br />A new field was added to the Player object which is used to associate a D3DSphereInstance with a Player. The reason I implemented the association &#39;loosely&#39; the way I have is because I didn&#39;t want the Player to &#39;strictly own&#39; a ball.. once the ball has been&nbsp; &#39;launched&#39; by the player, the association between them is broken, nobody &#39;owns&#39; a ball which is in play. This way we can support multiple players and multiple balls. Everyone can start with a ball, and everyone can play with anyone&#39;s balls - now get your mind out of the gutter :P<br /><br />The code which instances a local Player was modified to correctly store the instance in the Players collection.<br /><br />I found a problem with the keyboard-checking method in D3DApp, the spacebar was generating 7 different keycodes, and not just the ascii 32 we&#39;d expect.<br /><br />I&#39;ve reworked it to use GetKeyState instead of GetKeyboardState, so now we&#39;re only checking the keys which have callbacks set up, which is an improvement over the previous method anyway.<br /><br />PS: I noticed that at some point, I had commented out one very important line of code in D3DGame.Done, which is simple &quot;ACall Done&quot; - ie, a call to D3DApp.Done. I&#39;ve just uncommented it but that change isn&#39;t in the zip I&#39;d already uploaded. The reason why it&#39;s so important is&nbsp; that the D3DApp.Done method is responsible for saving our video settings to configfile, and since we weren&#39;t doing that, the demo would &#39;forget&#39; what video settings we were using last time... d&#39;oh!!!<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1951" target="_blank">GameClient_31.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-06 01:22:27 by Homer</div>
   </div>
   <div class="post" id="post-184293">
    <div class="subject"><a href="#post-184293">It's worse than that - its Physics, Jim.</a></div>
    <div class="body"><br />Now I&#39;ve added linear motion to the game ball.<br />When you launch it, it will travel away from you.<br />It will sail away, right through the Bricks, and off into infinity.<br /><br />In fact, I added a new method to the Sphere class called ApplyVelocityToAllInstances, its job is to update the Position of each D3DSphereInstance according to its unique 3D velocity.<br />It gets called from our GameUpdateEntityPhysics callback procedure.<br /><br />We can start to get fancy about some of the similarities between different instanceable primitive structures, for example we might decide to make the assumption that all these structs have Position as the first field, and utilize a universal physics updater which follows said assumption.<br /><br />But this is a tutorial, and assumptions are bad form.<br />Linear motion is kind of boring,right?<br />It&#39;s time for collision testing :)<br /><br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1952" target="_blank">GameClient_32.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-06 12:33:01 by Homer</div>
   </div>
   <div class="post" id="post-184301">
    <div class="subject"><a href="#post-184301">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Hey Homer<br /><br />Keep em coming, I&#39;m eager to see my balls bounce :lol: :shock: ;)<br /><br />Will the demo cover sound effects?<br /><br />Maelstrom<br /></div>
    <div class="meta">Posted on 2006-08-06 22:39:56 by Maelstrom</div>
   </div>
   <div class="post" id="post-184302">
    <div class="subject"><a href="#post-184302">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">In the attached update, I&#39;ve implemented a very simple Point-based collision detection scheme for the Sphere instances.<br />It works on the follwing presumptions:<br />- we can determine whether a given 3D point is within a World cell<br />- we can determine whether a given Cell contains a Brick or not.<br />Since Bricks completely occupy World cells, an intersection with a Cell containing a Brick is equivalent to an intersection with that Brick.<br /><br />It&#39;s easiest to understand if I describe it in the same order it was implemented.<br /><br />First, I added a method called World.IdentifyCellByCoordinate<br />This method takes a 2D input coordinate of a point in worldspace which we want to test, ie, in the XZ plane, no Y component.<br />It converts that coordinate into a pair of integers representing the 2D coordinate of a Cell in the World Array, or it tries to.<br />If the input coordinate is outside the bounds of the array, it returns NULL.. but if the array coords are legal, it returns a pointer to an array element, ie, a WorldCell structure.<br /><br />Note : the WorldCell structure was modified to hold a Pointer to a Brick instance, or NULL.<br /><br />Basically, we can use the IdentifyCellByCoordinate to determine whether a given point is &quot;above a world cell&quot;, and if so, which one.<br /><br />My next move was to add code to check the position of each sphere instance&#39;s center using the new method. This code was added to the GameUpdateEntityPhysics callback.<br />Of course, simply testing for collisions with the sphere center isn&#39;t enough - we need to take its Radius into account.<br />After I got the code working for testing Sphere positions (point testing), I modified it to perform FOUR tests per sphere instance, ie, testing the +X, -X, +Z and -Z boundaries of each sphere instance.<br /><br />Since our world cells are a regular grid, and since the cells are the same size as our sphere diameter, this was simply a matter of adding or subtracting one Radius when performing the point test already described.<br /><br />POTENTIAL OPTIMIZATION :<br />If you think about it, this is really overkill, in this demo we can safely reduce that to one or two axial tests , ie only check the sphere boundaries according to the sign of the axial velocity XZ components ... ie test the sides of the sphere in the direction it&#39;s moving, and assume that the &#39;trailing edges&#39; of the sphere don&#39;t need testing.<br /><br />Now we can tell not only which world cell a sphere is above, but we can tell which world cell(s) the sphere&#39;s boundary intersects.<br /><br />I go on to check the return value for each point tested.<br />If its not NULL, we have a pointer to a World cell as I mentioned.<br />That being the case, I check the value of that World cell&#39;s pBrickInstance field, to see if the cell contains a brick.<br />If there&#39;s a brick in there, we SHOULD be destroying the brick with a nice little explosion and making the sphere bounce away from it.<br />Currently I simply spew the Brick instance pointer(s) to debug.<br /><br />Yay... it&#39;s starting to look like a Game :)<br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1954" target="_blank">GameClient_33.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-06 22:53:24 by Homer</div>
   </div>
   <div class="post" id="post-184303">
    <div class="subject"><a href="#post-184303">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">Sure, I&#39;ll cover sound effects, but until now there&#39;s been little point.<br />Sound effects are typically triggered as a response to some in-game event (such as a collision ;) )</div>
    <div class="meta">Posted on 2006-08-06 22:54:37 by Homer</div>
   </div>
   <div class="post" id="post-184304">
    <div class="subject"><a href="#post-184304">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body">The collision testing implemented so far is NOT SUFFICIENT.<br />It does not deal with cases of &#39;diagonal&#39; intersections.<br />It would have been sufficient for testing axially-aligned Boxes, but not Spheres.<br />We need to rethink the test being performed.<br />Note that this was a deliberate mistake, I wanted to show simplistic tests and the kind of thinking behind them before moving on to more robust tests, and I was attempting to show that collision testing doesn&#39;t always have to be sophisticated in order to be effective.<br />In the next update, we&#39;ll improve the collision testing implemented so far, and we&#39;ll add code to destroy any Bricks we collide with, but without performing a collision response per se - we won&#39;t bounce off them yet.<br /></div>
    <div class="meta">Posted on 2006-08-06 23:12:57 by Homer</div>
   </div>
   <div class="post" id="post-184311">
    <div class="subject"><a href="#post-184311">Re: Getting Started in GameDev - a tutorial</a></div>
    <div class="body"><br />This update contains an improved collision test.<br />The test between spheres and bricks is performed in 2D as before, but using a more accurate algorithm, which requires more information about the cubes and spheres.<br />Brick struct now contains a vPosition field like the other instanceable entity structs do.<br /><br />Next, we need to start messing around with collision response ideas.<br /><br /><br /></div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1957" target="_blank">GameClient_34.zip</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2006-08-07 09:51:21 by Homer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=25009&amp;page=1" style="">&laquo;</a><a href="../?id=25009&amp;page=3" style="">&lt;</a><input type="hidden" name="id" value="25009" /><input type="number" name="page" min="1" max="5" step="1" value="4" onchange="this.form.submit();" /><a href="../?id=25009&amp;page=5">&gt;</a><a href="../?id=25009&amp;page=5">&raquo;</a></form>  </div>
 </body>
</html>