<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Sockets under linux - documentation request - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28824" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=113">Low Level Concepts</a> &raquo; <a href="../?id=28824">Sockets under linux - documentation request</a></p>
   <div class="post" id="post-203633">
    <div class="subject"><a href="#post-203633">Sockets under linux - documentation request</a></div>
    <div class="body">For the last few months I&#039;ve been scouring the internet looking for documentation on implementation of Berkeley Sockets in ASM under Linux.<br /><br />There&#039;s plenty of documentation on ASM interfacing with Windows Sockets (thank you Iczelion, you rock) but everything dealing with sockets under Linux assumes I&#039;m writing in C/C++.<br /><br />Anyone? Bueller?</div>
    <div class="meta">Posted on 2007-11-17 16:47:30 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203635">
    <div class="subject"><a href="#post-203635">Re: Sockets under linux - documentation request</a></div>
    <div class="body">The defactor socket guide is probably <a target="_blank" href="http://beej.us/guide/bgnet/">beej&#039;s</a>. It&#039;s not asm-specific, but you ought to be able to read C and translate it to Asm if you need - otherwise you&#039;re not going to get far with anything :)<br /></div>
    <div class="meta">Posted on 2007-11-17 17:25:45 by f0dder</div>
   </div>
   <div class="post" id="post-203638">
    <div class="subject"><a href="#post-203638">Re: Sockets under linux - documentation request</a></div>
    <div class="body">Thanks. I&#039;ve seen his explanation before - what I&#039;m looking for specifically is an explanation of the mechanics of the socketcall() function. I can&#039;t imagine there isn&#039;t documentation at the ASM level somewhere, but I&#039;ve been coming to the reluctant conclusion that I might just have to piece it together from the C include files on my system.</div>
    <div class="meta">Posted on 2007-11-17 19:21:52 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203640">
    <div class="subject"><a href="#post-203640">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />Thanks. I&#039;ve seen his explanation before - what I&#039;m looking for specifically is an explanation of the mechanics of the socketcall() function. I can&#039;t imagine there isn&#039;t documentation at the ASM level somewhere, but I&#039;ve been coming to the reluctant conclusion that I might just have to piece it together from the C include files on my system.<br /></div><br /><br />Well, that may force you to draw incorrect conclusions. A better, yet more extensive, approach would be to download the latest Linux kernel source files and take a gander at how such system calls are implemented.</div>
    <div class="meta">Posted on 2007-11-17 20:29:00 by SpooK</div>
   </div>
   <div class="post" id="post-203642">
    <div class="subject"><a href="#post-203642">Re: Sockets under linux - documentation request</a></div>
    <div class="body">C level and ASM level of <strong>using</strong> sockets is pretty much the same - even if you choose the stupid way of directly doing syscalls, there isn&#039;t much difference, really.<br /><br />If you&#039;re talking about how the stuff is <strong>implemented</strong>, kernel level, then it&#039;s a completely different matter - but it&#039;s still not done in assembly :)</div>
    <div class="meta">Posted on 2007-11-17 21:48:46 by f0dder</div>
   </div>
   <div class="post" id="post-203644">
    <div class="subject"><a href="#post-203644">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />Well, that may force you to draw incorrect conclusions. A better, yet more extensive, approach would be to download the latest Linux kernel source files and take a gander at how such system calls are implemented.<br /></div><br /><br />Yep. I&#039;ve been trying to get an idea of what I&#039;m doing by going through the source included in the latest distribution of Ubuntu (7.10) and seeing if I can find the definitions for the socket functions.<br /><br />It&#039;s slow and frustrating work, but if it&#039;s what I gotta do, then it&#039;s what I gotta do.</div>
    <div class="meta">Posted on 2007-11-18 00:20:09 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203645">
    <div class="subject"><a href="#post-203645">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />C level and ASM level of <strong>using</strong> sockets is pretty much the same - even if you choose the stupid way of directly doing syscalls, there isn&#039;t much difference, really.<br /></div><br /><br />OK, I&#039;m curious; why is that the &#039;stupid&#039; way?</div>
    <div class="meta">Posted on 2007-11-18 00:21:33 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203646">
    <div class="subject"><a href="#post-203646">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />OK, I&#039;m curious; why is that the &#039;stupid&#039; way?<br /></div><br />I guess because of portability through different distros or builds of a kernel. <br />Syscalls opposed to importing dynamically-linked sources. <br /><br />Btw, last time I checked the kernel drivers&#039; sources for two of the most common adapters, they were a mess :). Opposed to the clean professional style the rest of the 1.0 kernel had (iirc). </div>
    <div class="meta">Posted on 2007-11-18 01:32:43 by Ultrano</div>
   </div>
   <div class="post" id="post-203647">
    <div class="subject"><a href="#post-203647">Re: Sockets under linux - documentation request</a></div>
    <div class="body">http://forum.int6.net/index.php?topic=93.0</div>
    <div class="meta">Posted on 2007-11-18 02:31:59 by Dite</div>
   </div>
   <div class="post" id="post-203649">
    <div class="subject"><a href="#post-203649">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />C level and ASM level of <strong>using</strong> sockets is pretty much the same - even if you choose the stupid way of directly doing syscalls, there isn&#039;t much difference, really.<br /></div><br />OK, I&#039;m curious; why is that the &#039;stupid&#039; way?<br /></div><br />Ultrano already answered that, but let me add that you don&#039;t gain anything from using syscalls directly as opposed to the libc interface. You won&#039;t be able to measure any speed difference, and you run the risk of app breakage on new kernel version etc.<br /></div>
    <div class="meta">Posted on 2007-11-18 06:46:31 by f0dder</div>
   </div>
   <div class="post" id="post-203657">
    <div class="subject"><a href="#post-203657">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />I guess because of portability through different distros or builds of a kernel. <br />Syscalls opposed to importing dynamically-linked sources. <br /></div><br /><br />Ah. Gotcha - makes a certain amount of sense. Fortunately, I&#039;m coding this project as a learning experiment, and it&#039;ll never see the light of day.<br /><br /><div class="quote"><br />Btw, last time I checked the kernel drivers&#039; sources for two of the most common adapters, they were a mess :). Opposed to the clean professional style the rest of the 1.0 kernel had (iirc). <br /></div><br /><br />Yep. I&#039;ve been looking at some of that code and it&#039;s making my eyes cross.</div>
    <div class="meta">Posted on 2007-11-18 14:17:53 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203658">
    <div class="subject"><a href="#post-203658">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />http://forum.int6.net/index.php?topic=93.0<br /></div><br /><br />Thank you. I may have already seen this, but I&#039;ll know for sure as soon as I pull a reader capable of handling its format. Bulletins as events warrant.</div>
    <div class="meta">Posted on 2007-11-18 14:19:25 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203659">
    <div class="subject"><a href="#post-203659">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />Ultrano already answered that, but let me add that you don&#039;t gain anything from using syscalls directly as opposed to the libc interface. You won&#039;t be able to measure any speed difference, and you run the risk of app breakage on new kernel version etc.<br /></div><br /><br />Makes sense. Mostly I&#039;m just trying to get a hands-on feel for what&#039;s going on on the processor when sockets are in play. I&#039;m not so much worried about speed over libc or possible breakage on new kernels if the syscall table changes. Thanks for clarifying.</div>
    <div class="meta">Posted on 2007-11-18 14:21:46 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203660">
    <div class="subject"><a href="#post-203660">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br />http://forum.int6.net/index.php?topic=93.0<br /></div><br /><br />OK, I got it. Looks like I&#039;ve got some reading to do. Thank you so much!</div>
    <div class="meta">Posted on 2007-11-18 14:29:16 by Carl Hamlin</div>
   </div>
   <div class="post" id="post-203661">
    <div class="subject"><a href="#post-203661">Re: Sockets under linux - documentation request</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />Ultrano already answered that, but let me add that you don&#039;t gain anything from using syscalls directly as opposed to the libc interface. You won&#039;t be able to measure any speed difference, and you run the risk of app breakage on new kernel version etc.<br /></div><br /><br />Makes sense. Mostly I&#039;m just trying to get a hands-on feel for what&#039;s going on on the processor when sockets are in play. I&#039;m not so much worried about speed over libc or possible breakage on new kernels if the syscall table changes. Thanks for clarifying.<br /></div><br />Ah, so it&#039;s the behind-the-scenes stuff you&#039;re interested in...<br /><br />Well, there&#039;s a <strong>lot</strong> of stuff going on, it&#039;s a multi-layered architecture. You have the socket abstraction, which can be used for multiple protocols (IP4, IP6, IPX, local/unix sockets, ...), you have the raw transport device driver (ethernet, ATM, FDDI, ...), various parts of the kernel (IRQ handling, memory handling, ...) and so on. It&#039;s a pretty big scheme of things :)<br /></div>
    <div class="meta">Posted on 2007-11-18 14:29:35 by f0dder</div>
   </div>
  </div>
 </body>
</html>