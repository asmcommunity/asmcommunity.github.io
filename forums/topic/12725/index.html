<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>invoking CreateFile and the prog crashs - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=12725" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=12725">invoking CreateFile and the prog crashs</a></p>
   <div class="post" id="post-98370">
    <div class="subject"><a href="#post-98370">invoking CreateFile and the prog crashs</a></div>
    <div class="body">Hello could you look at my code, and say me, why it chrashs ?<br /><pre><code><br />.data<br />    log DB &quot;C&#58;\tmep.txt&quot;, 0<br />    File DWORD 0<br /><br />.code<br />    INVOKE CreateFile, ADDR log, GENERIC_WRITE, NULL, CREATE_NEW, NULL, FILE_ATTRIBUTE_NORMAL, NULL<br />    .IF EAX != INVALID_HANDLE_VALUE                       MOV File, EAX<br />        INVOKE CloseHandle, File<br />    .ENDIF<br /></code></pre><br />Regard FF<br /><br />Red,<br /><br />I just formatted your code to make it easier to read. Get used to the tags to set you code as a block.<br /><br />    yourcode<br /><br /><br />Use CODE in place of &quot;tagname&quot; inside the square brackets.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2003-04-21 08:52:40 by Forginforcer</div>
   </div>
   <div class="post" id="post-98373">
    <div class="subject"><a href="#post-98373">invoking CreateFile and the prog crashs</a></div>
    <div class="body">Afternoon, Forginforcer.<br /><br /><pre><code><br />    invoke CreateFile, ADDR log, GENERIC_WRITE, FILE_SHARE_WRITE,<br />                       NULL, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL<br /></code></pre><br />?<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2003-04-21 09:01:47 by Scronty</div>
   </div>
   <div class="post" id="post-98376">
    <div class="subject"><a href="#post-98376">invoking CreateFile and the prog crashs</a></div>
    <div class="body">alright ?</div>
    <div class="meta">Posted on 2003-04-21 09:04:13 by Forginforcer</div>
   </div>
   <div class="post" id="post-98898">
    <div class="subject"><a href="#post-98898">invoking CreateFile and the prog crashs</a></div>
    <div class="body">i had similar problem, the function crashed due to direction flag was set, If you use a descending rep command or call function in nonstandard library try to put additional CLD befor call</div>
    <div class="meta">Posted on 2003-04-23 13:20:17 by _Servil_</div>
   </div>
   <div class="post" id="post-98899">
    <div class="subject"><a href="#post-98899">invoking CreateFile and the prog crashs</a></div>
    <div class="body">The problem is that you're passing 1 for the security attributes (which should be 0 or a pointer to a SECURITY_ATTRIBUTES structure), and 0 for the creation disposition (which should be in the range 1-5)</div>
    <div class="meta">Posted on 2003-04-23 13:34:20 by Sephiroth3</div>
   </div>
   <div class="post" id="post-98900">
    <div class="subject"><a href="#post-98900">invoking CreateFile and the prog crashs</a></div>
    <div class="body">Should be :<pre><code>INVOKE CreateFile, ADDR log, GENERIC_WRITE, NULL,  NULL, CREATE_NEW, \<br />	FILE_ATTRIBUTE_NORMAL, NULL</code></pre></div>
    <div class="meta">Posted on 2003-04-23 13:42:20 by donkey</div>
   </div>
   <div class="post" id="post-98901">
    <div class="subject"><a href="#post-98901">invoking CreateFile and the prog crashs</a></div>
    <div class="body">All right ! Thanks !</div>
    <div class="meta">Posted on 2003-04-23 13:55:33 by Forginforcer</div>
   </div>
  </div>
 </body>
</html>