<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Bug in MultiByteToWideChar - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29544" />
  <link rel="prev" href="../?id=29544&amp;page=1" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29544">Bug in MultiByteToWideChar</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29544&amp;page=1" style="">&laquo;</a><a href="../?id=29544&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="29544" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>   <div class="post" id="post-208666">
    <div class="subject"><a href="#post-208666">Re: Bug in MultiByteToWideChar</a></div>
    <div class="body"><div class="quote"><br />Told ya :)<br />The beer is strong in us tonight :P</div>Haha :)<br /><br />I did the testing ~9 hours ago, after just getting out of bed from a nap before work (suffered from insomnia last night, once again) - pretty brainfscked and in a slight hurry to get to work in time, I obviously didn&#039;t check the results properly (shame on me). I&#039;ve edited my previous posts to remove the bug-accusations (well, striked them out so you can still see how silly I was :)). Let&#039;s see some feedback from Homer...<br /><br />PS: I hope you use lengthof and not sizeof for the <em>cchWideChar</em> argument in your production code :P<br /><br /><div class="quote">The whole world would collapse if that func was buggy in that way. </div>Probably would (there&#039;s too many people who haven&#039;t left nul-terminated strings yet) - which is why I was considering this to be a pretty serious bug :)</div>
    <div class="meta">Posted on 2009-09-08 19:01:21 by f0dder</div>
   </div>
   <div class="post" id="post-208667">
    <div class="subject"><a href="#post-208667">Re: Bug in MultiByteToWideChar</a></div>
    <div class="body"><div class="quote">Ugh... that&#039;s pretty bad coding practice. When the compiler tells you there&#039;s an issue, there&#039;s usually a reason for it (C++ and the PlatformSDK is painful, though - less so in C mode). But doing this as a general coding practice is <strong>bad</strong>.</div><br /><br />Lol, I&#039;ve never been accused of writing clean/legible code. :P (nor would I try to admit to it). It honestly started with stupid functions like malloc that try to be type-independent through the use of void* but yet the compiler I was using at the time would complain if you didn&#039;t typecast. I just got so tired of those things popping up that I just started typecasting everything. lol<br /><br /><div class="quote">You might want to move to a decent compiler, or at least a more recent version of GCC? With VC2008 (and also lot older versions, I expect) introducing the temporary variable results in exactly the same code as doing the one-liner.</div><br /><br />I&#039;ll run an update of GCC later and see if it&#039;s any better. You are actually probably right on this behalf as most of my software on this box is source builds and it&#039;s a bit difficult to keep everything updated. I should probably install apt-get or gdebi one of these days to ease the burden of updating. You should see my /usr/share/nasm/src folder XD<br /><br /><pre><code>bkeller@assembly.ath.cx ~<br />$ ls /usr/share/nasm/src/<br />nasm-0.99.05.tar.gz &nbsp;nasm-2.04rc1.tar.gz &nbsp; nasm-2.06rc15.tar.gz<br />nasm-0.99.06.tar.gz &nbsp;nasm-2.04rc2.tar.gz &nbsp; nasm-2.06rc16.tar.gz<br />nasm-2.00rc1.tar.gz &nbsp;nasm-2.04rc3.tar.gz &nbsp; nasm-2.06rc1.tar.gz<br />nasm-2.00rc2.tar.gz &nbsp;nasm-2.04rc4.tar.gz &nbsp; nasm-2.06rc2.tar.gz<br />nasm-2.00rc3.tar.gz &nbsp;nasm-2.04rc5.tar.gz &nbsp; nasm-2.06rc3.tar.gz<br />nasm-2.00.tar.gz &nbsp; &nbsp; nasm-2.04rc6.tar.gz &nbsp; nasm-2.06rc4.tar.gz<br />nasm-2.01rc1.tar.gz &nbsp;nasm-2.04.tar.gz &nbsp; &nbsp; &nbsp;nasm-2.06rc5.tar.gz<br />nasm-2.01rc2.tar.gz &nbsp;nasm-2.05.01.tar.gz &nbsp; nasm-2.06rc6.tar.gz<br />nasm-2.01.tar.gz &nbsp; &nbsp; nasm-2.05rc1.tar.gz &nbsp; nasm-2.06rc7.tar.gz<br />nasm-2.02rc1.tar.gz &nbsp;nasm-2.05rc2.tar.gz &nbsp; nasm-2.06rc8.tar.gz<br />nasm-2.02rc2.tar.gz &nbsp;nasm-2.05rc3.tar.gz &nbsp; nasm-2.06rc9.tar.gz<br />nasm-2.02.tar.gz &nbsp; &nbsp; nasm-2.05rc4.tar.gz &nbsp; nasm-2.06.tar.gz<br />nasm-2.03.01.tar.gz &nbsp;nasm-2.05rc5.tar.gz &nbsp; nasm-2.07rc1.tar.gz<br />nasm-2.03rc1.tar.gz &nbsp;nasm-2.05rc6.tar.gz &nbsp; nasm-2.07rc2.tar.gz<br />nasm-2.03rc2.tar.gz &nbsp;nasm-2.05rc7.tar.gz &nbsp; nasm-2.07rc3.tar.gz<br />nasm-2.03rc3.tar.gz &nbsp;nasm-2.05rc8.tar.gz &nbsp; nasm-2.07rc4.tar.gz<br />nasm-2.03rc4.tar.gz &nbsp;nasm-2.05.tar.gz &nbsp; &nbsp; &nbsp;nasm-2.07rc5.tar.gz<br />nasm-2.03rc5.tar.gz &nbsp;nasm-2.06rc10.tar.gz &nbsp;nasm-2.07rc6.tar.gz<br />nasm-2.03rc6.tar.gz &nbsp;nasm-2.06rc11.tar.gz &nbsp;nasm-2.07rc7.tar.gz<br />nasm-2.03rc7.tar.gz &nbsp;nasm-2.06rc12.tar.gz &nbsp;nasm-2.07.tar.gz<br />nasm-2.03rc8.tar.gz &nbsp;nasm-2.06rc13.tar.gz<br />nasm-2.03.tar.gz &nbsp; &nbsp; nasm-2.06rc14.tar.gz</code></pre><br /><br /> :| . o O ( speaking of which I should find out what the latest version is.... )<br /></div>
    <div class="meta">Posted on 2009-09-08 19:07:54 by Synfire</div>
   </div>
   <div class="post" id="post-208668">
    <div class="subject"><a href="#post-208668">Re: Bug in MultiByteToWideChar</a></div>
    <div class="body"><div class="quote"><br />PS: I hope you use lengthof and not sizeof for the <em>cchWideChar</em> argument in your production code :P<br /></div><br /><br />The code is:<br /><br />z2 dw 40 dup (0CCCCh) ; 40 words<br />...<br />invoke MultiByteToWideChar,CP_ACP,0,addr z1,-1,addr z2,40;<br />&quot;cchWideChar - Specifies the size, in wide characters,&quot;<br /><br />No prob there either :P</div>
    <div class="meta">Posted on 2009-09-08 19:08:09 by Ultrano</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29544&amp;page=1" style="">&laquo;</a><a href="../?id=29544&amp;page=1" style="">&lt;</a><input type="hidden" name="id" value="29544" /><input type="number" name="page" min="1" max="2" step="1" value="2" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>