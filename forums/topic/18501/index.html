<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>inline assembler and preserving the ebx register? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18501" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18501">inline assembler and preserving the ebx register?</a></p>
   <div class="post" id="post-143195">
    <div class="subject"><a href="#post-143195">inline assembler and preserving the ebx register?</a></div>
    <div class="body">im using inline assembler in VS .net 7.1 and i modify the ebx register wich result in a warning by the compiler but in normal compile mode i never get an error since if ebx, esi, edi is modifyed the compiler preserv those automaticly.<br /><br />But if i compile in debug mode (edit and cont.) i get errors if the ebx register is modifyed. If i push the ebx register the compiler cant access pointers or variables in the inline asm code.<br /><br />example:<br />int test[2]={1,2};<br />int *pointer=&amp;test[0];<br /><br /><br />_asm{<br />mov ebx,0<br />mov eax,pointer<br />loop:<br />.<br />.<br />.<br />.<br />commands<br />.<br />.<br />.<br />jnz loop<br />}<br /><br />In debug mode i get a crash at &quot;mov eax,pointer&quot; anyone familar with this problem? It seems ebx holds some informations and if overwritte i cant use some variables inside the asm code... This only happens in debug compile mode.</div>
    <div class="meta">Posted on 2004-06-08 05:17:31 by Andy2222</div>
   </div>
   <div class="post" id="post-143198">
    <div class="subject"><a href="#post-143198">inline assembler and preserving the ebx register?</a></div>
    <div class="body">yeah i've had some problems using ebx in inline asm in msvc6, and 7 i think. Theoretically it should work as a placeholder, but i just switched it to esi/edi, and i didn't have much problems. as for access variables, i've always done &quot;mov reg,dword ptr &quot;, in mostly every case, i'm not sure if this pertains to your case, since int *pointer is already a pointer. try it.</div>
    <div class="meta">Posted on 2004-06-08 06:06:46 by Drocon</div>
   </div>
  </div>
 </body>
</html>