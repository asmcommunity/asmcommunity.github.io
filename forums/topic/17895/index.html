<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Arrays ... (again) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17895" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17895">Arrays ... (again)</a></p>
   <div class="post" id="post-138190">
    <div class="subject"><a href="#post-138190">Arrays ... (again)</a></div>
    <div class="body">Hello everyone!<br /><br />I have a small problem, taking up good ol' winasm again and i struck my wall to the head at the first 100 lines...<br /><br />I have a loop in the code, and i want to add a string (atm just 1 char) to an array, and then I want to get this string out of the array again.. and i can't get it to work... :(<br /><br /><pre><code><br />mov hHandleArray&#91;ecx&#93;,ebx<br />...<br />lea edx, hHandleArray&#91;ecx&#93;<br />...<br /></code></pre><br /><br />But they are empty ... i do something wrong i know .. but can't figure out what ... <br /><br />Thanks!<br /><br />PS. f0dder thanks alot for your help earlier! :alright:</div>
    <div class="meta">Posted on 2004-04-07 04:24:02 by cTT</div>
   </div>
   <div class="post" id="post-138194">
    <div class="subject"><a href="#post-138194">Arrays ... (again)</a></div>
    <div class="body">I use these two MACROs to DWORDS arrays and i have no problem with them.<br /><br /><pre><code><br />DATA?<br />array1 DWORD ?<br />;...<br />SetIndexValue MACRO array,index,val<br />	mov ecx,index<br />	shl ecx,2<br />	mov array&#91;ecx&#93;,val	<br />endm<br /><br />GetIndexValue MACRO array,index<br />	mov ecx,index<br />	shl ecx,2<br />	mov eax,array&#91;ecx&#93;<br />endm<br />;...<br />SetIndexValue array1,0,2<br />GetIndexValue array1,0<br /> </code></pre> <br />hope this helps :notsure:</div>
    <div class="meta">Posted on 2004-04-07 04:53:45 by bj1500</div>
   </div>
   <div class="post" id="post-138199">
    <div class="subject"><a href="#post-138199">Arrays ... (again)</a></div>
    <div class="body">Helped alot! Thank you! :D</div>
    <div class="meta">Posted on 2004-04-07 06:54:38 by cTT</div>
   </div>
   <div class="post" id="post-138208">
    <div class="subject"><a href="#post-138208">Arrays ... (again)</a></div>
    <div class="body">Lol, you can't be serious!</div>
    <div class="meta">Posted on 2004-04-07 08:55:11 by Sephiroth3</div>
   </div>
   <div class="post" id="post-138210">
    <div class="subject"><a href="#post-138210">Arrays ... (again)</a></div>
    <div class="body">Sure can! :)</div>
    <div class="meta">Posted on 2004-04-07 09:20:53 by cTT</div>
   </div>
   <div class="post" id="post-138256">
    <div class="subject"><a href="#post-138256">Arrays ... (again)</a></div>
    <div class="body"><div class="quote"><br />Lol, you can't be serious! </div><br /><br />everyone has to start somewhere Sephiroth3.<br /><br />Welcome cTT and don't worry, it will all come back to you soon :alright:</div>
    <div class="meta">Posted on 2004-04-07 16:08:08 by Hiroshimator</div>
   </div>
   <div class="post" id="post-138266">
    <div class="subject"><a href="#post-138266">Arrays ... (again)</a></div>
    <div class="body">Probly will ... ;) Waiting for it is painful tho hehe :)</div>
    <div class="meta">Posted on 2004-04-07 17:30:21 by cTT</div>
   </div>
   <div class="post" id="post-138267">
    <div class="subject"><a href="#post-138267">Arrays ... (again)</a></div>
    <div class="body">Actually I was referring not to cTT but to bj1500's molesting of the assembly programming language :P<br />Well, I guess that's the trend these days.</div>
    <div class="meta">Posted on 2004-04-07 17:33:10 by Sephiroth3</div>
   </div>
   <div class="post" id="post-138269">
    <div class="subject"><a href="#post-138269">Arrays ... (again)</a></div>
    <div class="body">What is wrong with my code? please explain!<br /><br />if I do something wrong please let me know so i can be better on this.<br /><br />just writing &quot;lol you cant be serious&quot; dosent help me very much.<br />I know i'm a &quot;noob&quot; or &quot;newbie&quot; (or what ever you call it) in assembler but i like to program in assembler and really want to learn alot about this. so please send me a message or something when i'm doing something wrong while trying to help other people on this board.</div>
    <div class="meta">Posted on 2004-04-07 18:51:26 by bj1500</div>
   </div>
   <div class="post" id="post-138273">
    <div class="subject"><a href="#post-138273">Arrays ... (again)</a></div>
    <div class="body">Hmm okay, well, what I meant was it takes longer to type the name of the macro than typing the appropriate instruction :P I'm sure you'll get tired of writing SetIndexValue all over your code instead of mov. Most people would prefer to use macros to save headaches. For example, you could use a macro to enter names of imported functions accessed through the import libraries included with MASM like this:<br /><pre><code>imp macro name&#58;REQ,np&#58;REQ<br />bleh textequ @CatStr&#40;&lt;__imp__&amp;name&amp;@&gt;,%np*4&#41;<br />%extrn bleh&#58;dword<br />%name equ bleh<br />endm</code></pre><br />Another use for a macro could be entering data for an Interrupt Descriptor Table, where the high word of the ISR address does not directly follow the low word.<br /><br />Remember that you can use a register (except for ESP) multiplied by 1, 2, 4 or 8 in an address with a 32-bit offset or another register and a 8-bit or 32-bit offset. An example of this addressing mode would be . I'm sure you can figure out the rest...</div>
    <div class="meta">Posted on 2004-04-07 19:27:37 by Sephiroth3</div>
   </div>
   <div class="post" id="post-138275">
    <div class="subject"><a href="#post-138275">Arrays ... (again)</a></div>
    <div class="body">actually I use this macro to make my code more readable.<br />I dont understand why you cant do like this <br />and if i should do this &quot;by hand&quot; I would have very hard to read my own code... <br />This code make it easier for me.<br /><br />and its true that i'm come from a high level language like VB and delphi.</div>
    <div class="meta">Posted on 2004-04-07 19:31:43 by bj1500</div>
   </div>
   <div class="post" id="post-138277">
    <div class="subject"><a href="#post-138277">Arrays ... (again)</a></div>
    <div class="body"><div class="quote"><br />Hmm okay, well, what I meant was it takes longer to type the name of the macro than typing the appropriate instruction :P I'm sure you'll get tired of writing SetIndexValue all over your code instead of mov. Most people would prefer to use macros to save headaches. For example, you could use a macro to enter names of imported functions accessed through the import libraries included with MASM like this:<br /><pre><code>imp macro name&#58;REQ,np&#58;REQ<br />bleh textequ @CatStr&#40;&lt;__imp__&amp;name&amp;@&gt;,%np*4&#41;<br />%extrn bleh&#58;dword<br />%name equ bleh<br />endm</code></pre><br />Another use for a macro could be entering data for an Interrupt Descriptor Table, where the high word of the ISR address does not directly follow the low word.<br /><br />Remember that you can use a register (except for ESP) multiplied by 1, 2, 4 or 8 in an address with a 32-bit offset or another register and a 8-bit or 32-bit offset. An example of this addressing mode would be . I'm sure you can figure out the rest... </div><br /><br />Okey but i'm still used to write long function names from highlevel language.<br />actully writing mov everywhere should give me a headache :grin:<br /><br />But now lets end this discussion.<br />I code like i use to do and you code like you use do to :tongue:</div>
    <div class="meta">Posted on 2004-04-07 19:37:56 by bj1500</div>
   </div>
   <div class="post" id="post-138279">
    <div class="subject"><a href="#post-138279">Arrays ... (again)</a></div>
    <div class="body">if you think he molests it, u aint seen my rapin and pillaging yet ...<br /><br />sephiroth, that name sounds familliar, are you from the gamedev forum?</div>
    <div class="meta">Posted on 2004-04-07 20:26:00 by drarem</div>
   </div>
   <div class="post" id="post-138281">
    <div class="subject"><a href="#post-138281">Arrays ... (again)</a></div>
    <div class="body">Lol ok, well I've seen a lot of weird shit on this board anyway.<br />I've never been to the gamedev.net board, but Sephiroth is a very common Internet name. It became popular due to the last boss in the Final Fantasy 7 video game for the Playstation, whom many players found to be quite a striking character. I had just played that game when I got my Internet account, so I went with the name Sephiroth3 (there were two Sephiroths already on the board I first went to :P)</div>
    <div class="meta">Posted on 2004-04-07 20:48:03 by Sephiroth3</div>
   </div>
   <div class="post" id="post-138291">
    <div class="subject"><a href="#post-138291">Arrays ... (again)</a></div>
    <div class="body">bj,<br /><br />Keep using those long names. Just make sure they say what they mean.<br /><br />I've worked with production assembly code with lots of long names. And it is extremely helpful when you're passing code from one person to another.<br /><br />Just an optimization:<br /><br /><pre><code>SetIndexValue MACRO array,index,val<br />	mov ecx,index<br />	mov array&#91;ecx*4&#93;,val	<br />endm<br /><br />GetIndexValue MACRO array,index<br />	mov ecx,index<br />	mov eax,array&#91;ecx*4&#93;<br />endm<br /></code></pre></div>
    <div class="meta">Posted on 2004-04-07 22:24:25 by tenkey</div>
   </div>
   <div class="post" id="post-138303">
    <div class="subject"><a href="#post-138303">Arrays ... (again)</a></div>
    <div class="body">Thanks tenkey, even better :)<br />And yeah, bj1500, forts?tt anv?nda l?nga namn :) B?de f?r dig och mig :alright:</div>
    <div class="meta">Posted on 2004-04-08 00:16:50 by cTT</div>
   </div>
   <div class="post" id="post-138335">
    <div class="subject"><a href="#post-138335">Arrays ... (again)</a></div>
    <div class="body">Tja indeksen er jo ofte allerede i et register og da blir det jo bare teit :P</div>
    <div class="meta">Posted on 2004-04-08 07:48:44 by Sephiroth3</div>
   </div>
   <div class="post" id="post-138338">
    <div class="subject"><a href="#post-138338">Arrays ... (again)</a></div>
    <div class="body">S? snak dog Engelsk, i Svenske hunde ;)</div>
    <div class="meta">Posted on 2004-04-08 08:56:13 by f0dder</div>
   </div>
   <div class="post" id="post-138339">
    <div class="subject"><a href="#post-138339">Arrays ... (again)</a></div>
    <div class="body">Actually, i didnt understand shit of your danish sentence there f0dd... :)<br /><br />Speh, well, that right too ... hmm ... well i use long name for it now ... change it when i get used to this again ... :)</div>
    <div class="meta">Posted on 2004-04-08 09:15:07 by cTT</div>
   </div>
   <div class="post" id="post-138344">
    <div class="subject"><a href="#post-138344">Arrays ... (again)</a></div>
    <div class="body">Btw, the macros could probably be improved by using of masm's parameter checking feature thingamajig (OPATTR, I think) on the index: if it's a constant, use it directly. If it's a register, use it directly. If it's a memory value, load it into a register and then use it.</div>
    <div class="meta">Posted on 2004-04-08 09:44:00 by f0dder</div>
   </div>
  </div>
 </body>
</html>