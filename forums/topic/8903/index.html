<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>A big help on my proc again - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=8903" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=8903">A big help on my proc again</a></p>
   <div class="post" id="post-65435">
    <div class="subject"><a href="#post-65435">A big help on my proc again</a></div>
    <div class="body">first thanks for thoses who helped me with my MaxColor checking proc<br /><br />now here's a proc i'll use in my project if i can fix the problems i have<br /><br />1st assume src point to a picture pixels array (in mem)<br />      assume dest point to the dest data array (in mem)<br />      assume num is the len of the src in byte<br />      assume src size is equal to dest size<br />      assume cantbl is a byte array looking like that  db color_code,color_code_replacement<br />      assume the len of cantbl is 2*num2<br />      assume num2 is the number of color for the replacement<br /><br />now that i whant to do is to scan the src pic<br />check for each pixel the color code<br />compare to the cantabl|color_code] and if equal then wrote the cantbl index to the dest<br />and if it's not equal to any of the cantbl color_code then wrote 0 to the dest<br /><br />so for the dest a 0 is non replace able color code else the index in the tabl for the replacement<br /><br />please help me again and don't esitate to ask me some questions on my mail<br /><br /> and if it's not enough clear for you i can post the whole project .<br /><br />here's my func but it's only putting 01 or 00 to dest<br /><br />i attach a txt file describe the format of the layer file i'll produce and a layer for one of my pic<br /><br />it can certainly help you<br /><br /><br />ProfileDatamap proc,src:dword,dest:dword,num:dword,cantbl:dword,num2:dword<br />.data<br />profiledatamapindex dd 0<br />.code<br />pusha<br />mov esi,src<br />mov edi,dest<br />mov ecx,num<br />xor eax,eax<br />ProfileDatamapBou:<br />lodsb<br />mov data1,eax<br />pusha<br />mov esi,cantbl<br />mov ecx,num2<br />mov ebx,data1<br />xor eax,eax<br />ProfileDatamapBou1:<br />lodsb<br />cmp eax,ebx<br />jne ProfileDatamapBou1R0<br />inc esi<br />jmp ProfileDatamapBou1R1<br />ProfileDatamapBou1R0:<br />mov eax,num2<br />sub eax,ecx<br />mov data2,eax<br />jmp ProfileDatamapBou1R3<br /><br />ProfileDatamapBou1R1:<br />loop ProfileDatamapBou1<br />mov eax,0<br />mov data2,eax<br />ProfileDatamapBou1R3:<br />popa<br />mov eax,data2<br />stosb<br />loop ProfileDatamapBou <br />popa<br />ret<br />ProfileDatamap endp</div>
    <div class="meta">Posted on 2002-11-11 17:20:57 by Thor0Asgard</div>
   </div>
   <div class="post" id="post-65443">
    <div class="subject"><a href="#post-65443">A big help on my proc again</a></div>
    <div class="body">Can your table cantbl be rearranged so that instead of interleaving it like color,replacement,color,replacement.., it is color,color,color....,replacement,replacement,replacement.  In other words, the colors are together, followed by the replacements also together in the same order.  If you do that, it would make the code much easier and simpler.  Ratch</div>
    <div class="meta">Posted on 2002-11-11 19:19:27 by Ratch</div>
   </div>
   <div class="post" id="post-65480">
    <div class="subject"><a href="#post-65480">i post the whole project code</a></div>
    <div class="body">here's the whole code all the bitmap manipulation functions are into bitmap.dll (bitmap.asm)<br /><br />so feel free to modify the code as you want the important thing matter to me is to fix that problem<br /><br />thanks and go on<br />please help me</div>
    <div class="meta">Posted on 2002-11-12 03:43:28 by Thor0Asgard</div>
   </div>
   <div class="post" id="post-65539">
    <div class="subject"><a href="#post-65539">A big help on my proc again</a></div>
    <div class="body">I am not going to plow through all the code you send me.  I assume that I can change the tables a little.  I changed the compare table format to be color,color,color,....,change, change,change.... .  In other words, for each color entry, there is a twin change entry located in the same order, but at the end of the color entries.  You should be getting the idea of how these programs can be coded.  Notice that the code is much easier to read when the control instructions are indented.  I am passing the code to you as an attachement.  Hopefully, the spaces will not be compressed out like it seems to be in the messages.  Ratch</div>
    <div class="meta">Posted on 2002-11-12 13:54:27 by Ratch</div>
   </div>
  </div>
 </body>
</html>