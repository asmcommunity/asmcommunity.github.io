<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Making your own Custom Control - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27483" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27483">Making your own Custom Control</a></p>
   <div class="post" id="post-196525">
    <div class="subject"><a href="#post-196525">Making your own Custom Control</a></div>
    <div class="body">Hi there, I wrote my own custom control in asm by registering a class with RegisterClassEx and my own proc. 
No by default only certain messages seem to be sent to it like WM_PAINT, WM_CREATE, WM_DESTROY, etc... but I'm not recieving WM_KEYDOWN, WM_KEYUP, or any keyboard input codes. I also noticed that if you subclass a static control you don't get those either, but if you subclass a button you do!?!?

How do I set which messages a control will recieve?
Thanks,
Ben</div>
    <div class="meta">Posted on 2001-03-31 16:50:00 by cyberben</div>
   </div>
   <div class="post" id="post-196526">
    <div class="subject"><a href="#post-196526">Making your own Custom Control</a></div>
    <div class="body">Ben,

From experience, the best approach to designing a custom control
is to start with a bare CreateWindowEx window as you have no
restrictions at all. I have done one as an example in the MASM32
example code that works well with 2 bitmaps as a button and it
was coded from scratch.

In the longer term, you have a lot less hassles when you don't
start with the assumptions built into standard controls.

Regards,

hutch@pbq.com.au</div>
    <div class="meta">Posted on 2001-03-31 16:58:00 by hutch--</div>
   </div>
   <div class="post" id="post-196527">
    <div class="subject"><a href="#post-196527">Making your own Custom Control</a></div>
    <div class="body">In order to receive keyboard messages like WM_KEYDOWN, a window needs to have the keyboard focus.

You may set your window to having the focus with the SetFocus method.


--------------------------
"I saw this in a movie about a bus that had to speed around a city, keeping its speed over fifty, and if it's speed dropped, it would explode! I think it was called "The bus that couldn't slow down."</div>
    <div class="meta">Posted on 2001-03-31 20:47:00 by Ernie</div>
   </div>
   <div class="post" id="post-196528">
    <div class="subject"><a href="#post-196528">Making your own Custom Control</a></div>
    <div class="body">Doesn't the TranslateMessage function translate WM_KEYUP WM_KEYDOWN messages into WM_CHAR messages? This might be the reason you are not recieving those messages, but i am not sure?</div>
    <div class="meta">Posted on 2001-03-31 22:08:00 by George</div>
   </div>
   <div class="post" id="post-196529">
    <div class="subject"><a href="#post-196529">Making your own Custom Control</a></div>
    <div class="body">I have started from scratch with a CreateWindowEx function but it's still not getting the keyboard stuff, I'll look over it again and try setting the keyboard focus. Then I'll post again.
Thanks for the pointers.
- Ben</div>
    <div class="meta">Posted on 2001-03-31 23:26:00 by cyberben</div>
   </div>
   <div class="post" id="post-196530">
    <div class="subject"><a href="#post-196530">Making your own Custom Control</a></div>
    <div class="body">SetFocus did the trick....

Thanks once again!
See ya,
Ben</div>
    <div class="meta">Posted on 2001-03-31 23:51:00 by cyberben</div>
   </div>
   <div class="post" id="post-214144">
    <div class="subject"><a href="#post-214144">Re: Making your own Custom Control</a></div>
    <div class="body">Old thread but same problem. SetFocus was the solution.&nbsp; :lol:</div>
    <div class="meta">Posted on 2011-03-05 08:45:02 by Nordwind64</div>
   </div>
  </div>
 </body>
</html>