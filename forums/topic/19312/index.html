<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>fastest even/odd - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19312" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=5">Algorithms &amp; Source Code</a> &raquo; <a href="../?id=19312">fastest even/odd</a></p>
   <div class="post" id="post-149069">
    <div class="subject"><a href="#post-149069">fastest even/odd</a></div>
    <div class="body">So what's the fastest way to test a number for being even or odd?<br /><br />I see there is a parity flag but haven't been able to get 'jpo' to work as expected.  I do need this to work for both positive and negative numbers.<br /><br />I've tried:<br /><br />(1)<br />mov eax, thenumber<br />test eax, eax<br />jpo odd<br /><br />(2)<br />mov eax, thenumber<br />test eax, 1<br />jnz odd<br /><br />really not sure why the parity thing isn't working (edit: ok it's just an even/odd number of 1's in base2.  guess the parity flag isn't useful here).  but is there some real fast trick or anything or is 'and eax, 1' the best thing to use?</div>
    <div class="meta">Posted on 2004-09-03 07:22:28 by grv575</div>
   </div>
   <div class="post" id="post-149071">
    <div class="subject"><a href="#post-149071">fastest even/odd</a></div>
    <div class="body">Please read up on parity flag. It is not used to see whether the data is even or odd.<br /><br />The and/test is the best I guess.</div>
    <div class="meta">Posted on 2004-09-03 07:29:43 by roticv</div>
   </div>
   <div class="post" id="post-149074">
    <div class="subject"><a href="#post-149074">fastest even/odd</a></div>
    <div class="body">In other words, use your second routine to test if odd. You want to test whether the least significant bit is 1.<br /><br />The first routine seems to test whether any bits are set at all in eax. I have not tried it but it may only fail with a value of zero.</div>
    <div class="meta">Posted on 2004-09-03 08:54:38 by V Coder</div>
   </div>
   <div class="post" id="post-149075">
    <div class="subject"><a href="#post-149075">fastest even/odd</a></div>
    <div class="body">mov eax, number<br />shr eax, 1<br />jc odd</div>
    <div class="meta">Posted on 2004-09-03 09:26:48 by JimmyClif</div>
   </div>
   <div class="post" id="post-149078">
    <div class="subject"><a href="#post-149078">fastest even/odd</a></div>
    <div class="body">indeed, parity is something totally different.</div>
    <div class="meta">Posted on 2004-09-03 10:25:02 by lifewire</div>
   </div>
   <div class="post" id="post-149081">
    <div class="subject"><a href="#post-149081">fastest even/odd</a></div>
    <div class="body">Shr eax,1, shr al,1 and test al,1 are the same size, but it might be that the latter is faster since it does not change the register.</div>
    <div class="meta">Posted on 2004-09-03 11:01:37 by Sephiroth3</div>
   </div>
   <div class="post" id="post-149321">
    <div class="subject"><a href="#post-149321">fastest even/odd</a></div>
    <div class="body">BT EAX, 0<br />JC HowOdd<br /><br />...is another way, but might be slower.  Usually there is a way to eliminate the branch.</div>
    <div class="meta">Posted on 2004-09-07 22:54:53 by bitRAKE</div>
   </div>
   <div class="post" id="post-149327">
    <div class="subject"><a href="#post-149327">Re: fastest even/odd</a></div>
    <div class="body"><div class="quote">So what's the fastest way to test a number for being even or odd?<br /><br />I see there is a parity flag but haven't been able to get 'jpo' to work as expected.  I do need this to work for both positive and negative numbers.<br /><br />I've tried:<br /><br />(1)<br />mov eax, thenumber<br />test eax, eax<br />jpo odd<br /><br />(2)<br />mov eax, thenumber<br />test eax, 1<br />jnz odd<br /><br />really not sure why the parity thing isn't working (edit: ok it's just an even/odd number of 1's in base2.  guess the parity flag isn't useful here).  but is there some real fast trick or anything or is 'and eax, 1' the best thing to use?</div><br /><br />the parity bit in flag is telling the NUMBER that eax contains '1' is even or odd, <br />but not means whether eax is even or odd, which is same to its least significant bit is '0' or '1'.</div>
    <div class="meta">Posted on 2004-09-08 01:28:16 by crquan</div>
   </div>
   <div class="post" id="post-149336">
    <div class="subject"><a href="#post-149336">fastest even/odd</a></div>
    <div class="body">it also depends on what your action to be taken is when you know if the number is either odd or even.  faster would be not doing a conditional jmp at all, but rather doing something like a CMOVcc, where possible.</div>
    <div class="meta">Posted on 2004-09-08 02:54:35 by lifewire</div>
   </div>
   <div class="post" id="post-149339">
    <div class="subject"><a href="#post-149339">fastest even/odd</a></div>
    <div class="body">To test odd or even, just test the lowest bit can simply do.<br /><br />test eax,1<br />jz IsEven</div>
    <div class="meta">Posted on 2004-09-08 03:57:26 by optimus</div>
   </div>
   <div class="post" id="post-149383">
    <div class="subject"><a href="#post-149383">Re: fastest even/odd</a></div>
    <div class="body"><div class="quote"><br />the parity bit in flag is telling the NUMBER that eax contains '1' is even or odd...</div><br />Actually no. The parity is always obtained only from the least-significant byte of the result.</div>
    <div class="meta">Posted on 2004-09-08 15:20:02 by MazeGen</div>
   </div>
  </div>
 </body>
</html>