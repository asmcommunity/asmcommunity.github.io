<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>BSWAP nomore? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26525" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26525">BSWAP nomore?</a></p>
   <div class="post" id="post-191953">
    <div class="subject"><a href="#post-191953">BSWAP nomore?</a></div>
    <div class="body">I was trying to use the BSWAP in my program like this:

 ax = 16 bit lo-hi value that I want to convert to hi-lo

 shl eax, 16
 bswap eax


Then the compiler says, 'instruction or register not accepted in current CPU mode'. Is the instruction not supported anymore (my reference book is quite old)?

Anyone know a better way to do the lo-hi -> hi-lo convertion maybe?

regards mars_matrix</div>
    <div class="meta">Posted on 2001-01-07 10:57:00 by mars_matrix</div>
   </div>
   <div class="post" id="post-191954">
    <div class="subject"><a href="#post-191954">BSWAP nomore?</a></div>
    <div class="body">Of course I know that..

mov bx, ax
mov ah, bl
mov al, bh

would do it but I want something prettier ;)</div>
    <div class="meta">Posted on 2001-01-07 11:08:00 by mars_matrix </div>
   </div>
   <div class="post" id="post-191955">
    <div class="subject"><a href="#post-191955">BSWAP nomore?</a></div>
    <div class="body">If i remember bswap is not supported on 386, so i suppose that you define .386 at the begining of your code, if so, try .486 or .586
hope this help
(s)</div>
    <div class="meta">Posted on 2001-01-07 11:23:00 by (scalp) </div>
   </div>
   <div class="post" id="post-191956">
    <div class="subject"><a href="#post-191956">BSWAP nomore?</a></div>
    <div class="body">rol ax,8</div>
    <div class="meta">Posted on 2001-01-07 12:34:00 by Larrry </div>
   </div>
   <div class="post" id="post-191957">
    <div class="subject"><a href="#post-191957">BSWAP nomore?</a></div>
    <div class="body">It should work. It does with Spasm Assembler:

mov eax 012345678
shl eax 16
bswap eax
hexprint eax  ; >>> 07856

So, like Scalp said, review your definitions.

betov.</div>
    <div class="meta">Posted on 2001-01-07 14:29:00 by Betov</div>
   </div>
   <div class="post" id="post-191958">
    <div class="subject"><a href="#post-191958">BSWAP nomore?</a></div>
    <div class="body">Unless your concerned with clock cycles, make a macro of your not-so-pretty solution and stick it in an include file...

NaN</div>
    <div class="meta">Posted on 2001-01-08 02:11:00 by NaN</div>
   </div>
   <div class="post" id="post-191959">
    <div class="subject"><a href="#post-191959">BSWAP nomore?</a></div>
    <div class="body">Ok, the BSWAP is _not_ supported in 386.
Good idea NaN, but I think Ill go with the rol ax :).

Thanks.</div>
    <div class="meta">Posted on 2001-01-08 17:38:00 by mars_matrix </div>
   </div>
   <div class="post" id="post-191960">
    <div class="subject"><a href="#post-191960">BSWAP nomore?</a></div>
    <div class="body">due to the number of 386 that are still running out there with Win9x, i think that you can define .486, so you can use bswap
(s)</div>
    <div class="meta">Posted on 2001-01-09 13:25:00 by (scalp) </div>
   </div>
   <div class="post" id="post-191961">
    <div class="subject"><a href="#post-191961">BSWAP nomore?</a></div>
    <div class="body">I believe Win98 requires a 486.  Some function called InterlockedIncrement or some similar name uses an instruction introduced in the 486.</div>
    <div class="meta">Posted on 2001-01-09 14:32:00 by tank </div>
   </div>
  </div>
 </body>
</html>