<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Funny DX Results - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16715" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=16715">Funny DX Results</a></p>
   <div class="post" id="post-129837">
    <div class="subject"><a href="#post-129837">Funny DX Results</a></div>
    <div class="body">i am porting my win32C emulator to Win32ASM (fun :D)<br />but i am getting some funcky results on my surface.<br />what i usually do ,is  clearing the surface with black (wm_paint)<br />on my drawing proc i set the pixel color i want (white / black only!)<br />and using surface pointer to copy the pixel to the right x,y location.<br /><br /><pre><code><br /> offset = &#40;posy*ddsd.lPitch + posx&#41;;<br /> *&#40;szSurface+offset&#41; = Pixel_Color; <br /></code></pre><br /><br /><pre><code><br />      mov ecx,posy<br />      imul ecx,ddsd.lPitch<br />      add ecx,posx  <br />      mov esi,ecx<br />      add esi,szSurface<br />      mov byte ptr &#91;esi&#93;,al ; Pixel color<br /></code></pre></div>
    <div class="meta">Posted on 2004-01-05 14:42:49 by wizzra</div>
   </div>
   <div class="post" id="post-129840">
    <div class="subject"><a href="#post-129840">Funny DX Results</a></div>
    <div class="body">Shouldn't you multiply posx with bytes_per_pixel also ?<br />And since you are in Windowed mode you can not assume bytes_per_pixel :D</div>
    <div class="meta">Posted on 2004-01-05 15:31:27 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-129846">
    <div class="subject"><a href="#post-129846">Funny DX Results</a></div>
    <div class="body">BogdanOntanu,<br />no need, thus u can 'force' the bits (user), but it could make it uglier.<br /><br />anyway i found the bug,<br />i was streching the pixels with Y insted of X (in some part of the loop)<br />now it looks great.<br />pic below.<br /><br />/me gives KetilO give hug on creating fantastic &amp; easy DE ;)<br />not forgetting WinASM studio which is great too, but it takes time to adjust to it ;P</div>
    <div class="meta">Posted on 2004-01-05 16:16:22 by wizzra</div>
   </div>
   <div class="post" id="post-129849">
    <div class="subject"><a href="#post-129849">Funny DX Results</a></div>
    <div class="body">heres a pic ;)</div>
    <div class="meta">Posted on 2004-01-05 16:26:41 by wizzra</div>
   </div>
  </div>
 </body>
</html>