<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Porting Win32 MASM project to Linux - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17254" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17254">Porting Win32 MASM project to Linux</a></p>
   <div class="post" id="post-133736">
    <div class="subject"><a href="#post-133736">Porting Win32 MASM project to Linux</a></div>
    <div class="body">What is the easiest way com port a Win32 MASM program to Linux ?<br /><br />Is there a way convert OBJ files generated by MASM to Linux's  format and link it ?<br />Or will I have to rewrite my entire program inNASM or FASM syntax ?<br /><br />Thanks in advance<br />Waka</div>
    <div class="meta">Posted on 2004-02-16 16:45:08 by Waka</div>
   </div>
   <div class="post" id="post-133737">
    <div class="subject"><a href="#post-133737">Porting Win32 MASM project to Linux</a></div>
    <div class="body">Build a version of binutils for linux supporting COFF object files - if binutils doesn't support mscoff, you'll have to write a tool to convert the parts of the object files containing relocations to the gnu coff thingy.<br /><br />Probably easier to just port to fasm syntax - you're not going to get any API code stuff running under linux anyway, and when dealing with algorithmic stuff the difference between fasm and masm syntax shouldn't be any big deal.</div>
    <div class="meta">Posted on 2004-02-16 16:51:27 by f0dder</div>
   </div>
   <div class="post" id="post-133744">
    <div class="subject"><a href="#post-133744">Porting Win32 MASM project to Linux</a></div>
    <div class="body">The problem is I use *a lot* of macros !<br />Every instruction of my Gameboy Z80 core is implemented with a macro...<br /><br />I don't know FASM macro syntax, and even if I did, it would be too much trouble translating everything.<br /><br />Could you please tell me more about using binutils to convert MSCOFF to linux COFF ?<br /><br />Thx</div>
    <div class="meta">Posted on 2004-02-16 17:43:48 by Waka</div>
   </div>
   <div class="post" id="post-133747">
    <div class="subject"><a href="#post-133747">Porting Win32 MASM project to Linux</a></div>
    <div class="body">Waka,<br /><br />Agner Fog posted a method of converting object modules written in MASM to linux.<br /><br />Have a look here as it may save you some work.<br /><br /><a target="_blank" href="http://www.masmforum.com/viewtopic.php?t=1985">http://www.masmforum.com/viewtopic.php?t=1985</a><br /><br />Regards,<br />http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=2f46ed9f24413347f14439b64bdc03fd</div>
    <div class="meta">Posted on 2004-02-16 18:23:12 by hutch--</div>
   </div>
   <div class="post" id="post-133763">
    <div class="subject"><a href="#post-133763">Porting Win32 MASM project to Linux</a></div>
    <div class="body">So there is a version of binutils supporting ms-coff after all ^_^ - and do remember what Jibz said about license if you, like most people, got ml.exe from the Windows DDK (which you did, if you go it from the masm32 package).<br /><br />Btw, I think ID Software made a masm -&gt; gas syntax converter thingy for use with either the doom or (more probably) quake 1 source. I doubt it supports all the macro stuff etc, but it might be worth investigating - this would also free you from the legal trouble with masm.</div>
    <div class="meta">Posted on 2004-02-17 00:27:12 by f0dder</div>
   </div>
   <div class="post" id="post-133831">
    <div class="subject"><a href="#post-133831">Porting Win32 MASM project to Linux</a></div>
    <div class="body">The syntax is not the unique problem to port a MASM project<br />to Linux. If you have used the win32 api your proyect will<br />be incompatible. You can write some libraries (I've used some<br />routines from MASM32.LIB) or use other libraries like the<br />gnome-gtk that is ported to windows (if you want some GUI).<br />Is not much what you have to change to tranlate to NASM or<br />FASM syntax here.<br /><br />Btw, in the low level assembler language I prefer use NASM or<br />FASM.<br /><br />The Agner Fog method looks fine, but for me is always best<br />to use GAS or NASM. I've never used FASM, but I suppose that<br />it works fine. Is not only a problem of high level syntax<br />nor open source philosophy.</div>
    <div class="meta">Posted on 2004-02-17 07:05:31 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-133934">
    <div class="subject"><a href="#post-133934">Porting Win32 MASM project to Linux</a></div>
    <div class="body"><div class="quote"><br />The problem is I use *a lot* of macros !<br />Every instruction of my Gameboy Z80 core is implemented with a macro...<br /><br />I don't know FASM macro syntax, and even if I did, it would be too much trouble translating everything.<br /><br />Could you please tell me more about using binutils to convert MSCOFF to linux COFF ?<br /><br />Thx </div><br /><br />You wrote a GB Z80 CPU emulator? I'm writing a Z80 emu for my SMS emulator, despite the fact that it failed many tests in ZEXALL, many games are running, the list includes Space Harrier, Sonic 2, Sonic Chaos, Phantasy Star, Outrun etc., I may need help, since the GBZ80 and regular Z80 are essentially the same microprocessors with only minor differences, if possible please keep in contact with me: my email ishttp://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=25f9dd3d9da26cdb509447fe980984d0 it is also my MSN account.</div>
    <div class="meta">Posted on 2004-02-17 16:01:07 by x86asm</div>
   </div>
   <div class="post" id="post-133954">
    <div class="subject"><a href="#post-133954">Porting Win32 MASM project to Linux</a></div>
    <div class="body">Hi, x86asm<br /><br />I've actually written 2 Z80 CPU cores ! <br /><br />One was used in my SMS emulator (Written mostly in C) which can be downloaded here: <br /><br /><a target="_blank" href="http://wakateam.emubr.net/downloads.html">http://wakateam.emubr.net/downloads.html</a><br /><br />Warning: It needs DirectX 7 and 32BPP to work in windowed mode !. It passes all ZexAll tests and runs most SMS and GG games.<br /><br />The other one was written for my new Gameboy Emulator (written in 100% Win32 ASM), which already runs quite a few comercial games (the list is growing up every day !).<br /><br />If you have any questions or need help with Z80 emulation just ask !<br />http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=c4920dfcbabd0e8a38672efba2ad3ccf</div>
    <div class="meta">Posted on 2004-02-17 19:06:22 by Waka</div>
   </div>
   <div class="post" id="post-133955">
    <div class="subject"><a href="#post-133955">Porting Win32 MASM project to Linux</a></div>
    <div class="body">Thanks for the answers !<br /><br />When time comes, I'll port the emulator to linux, using either way.<br /><br />n u M I T_o r , I'm aware that all Windows stuff would have to be reprogrammed. I would be really cool to have everything translated to NASM or FASM, as I really like them (despite the fact I've never used them). <br />I guess the GUI stuff would not be so time consuming once I get to know GTK or other API. If I ever write a Linux version, I'll probably use C for GUI suff.<br /><br />Translating the Z80 core to NASM or whatever would imply rewriting everything. Too much work for someone who only wishes to write a Linux version for the sake of learning. It would be only a secondary version. The win32 version would be my main focus.<br /><br />Please don't ask me why I didn't write everything in NASM or FASM from the beginning !  :) <br />A Linux version was not intended back then.</div>
    <div class="meta">Posted on 2004-02-17 19:18:42 by Waka</div>
   </div>
   <div class="post" id="post-133963">
    <div class="subject"><a href="#post-133963">Porting Win32 MASM project to Linux</a></div>
    <div class="body"><div class="quote"><br />Hi, x86asm<br /><br />I've actually written 2 Z80 CPU cores ! <br /><br />One was used in my SMS emulator (Written mostly in C) which can be downloaded here: <br /><br /><a target="_blank" href="http://wakateam.emubr.net/downloads.html">http://wakateam.emubr.net/downloads.html</a><br /><br />Warning: It needs DirectX 7 and 32BPP to work in windowed mode !. It passes all ZexAll tests and runs most SMS and GG games.<br /><br />The other one was written for my new Gameboy Emulator (written in 100% Win32 ASM), which already runs quite a few comercial games (the list is growing up every day !).<br /><br />If you have any questions or need help with Z80 emulation just ask !<br /><br />http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=c4920dfcbabd0e8a38672efba2ad3ccf </div><br /><br />The Shifts and Rotates are splitting my brain, I'll ask you some questions later on I'll keep your email and contacnt you later. Thanks! Also some pointers on the noise channel, the periodic noise sounds pretty much perfect on your emu.</div>
    <div class="meta">Posted on 2004-02-17 21:12:02 by x86asm</div>
   </div>
  </div>
 </body>
</html>