<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>howto: change image gamma value - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16586" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=16586">howto: change image gamma value</a></p>
   <div class="post" id="post-128961">
    <div class="subject"><a href="#post-128961">howto: change image gamma value</a></div>
    <div class="body">I have tried to convert this to pure asm but i dont understand that <strong><span style="font-size:18px>C++</span></strong><br />pImage buffer contains pure RGB data<br /><pre><code><br />for&#40;int i = 0; i &lt; size / 3; i++, pImage += 3&#41; <br />&#123;<br />	float scale = 1.0f, temp = 0.0f;<br />	float r = 0, g = 0, b = 0;<br />	// extract the current RGB values<br />	r = &#40;float&#41;pImage&#91;0&#93;;<br />	g = &#40;float&#41;pImage&#91;1&#93;;<br />	b = &#40;float&#41;pImage&#91;2&#93;;<br />	// Multiply the factor by the RGB values, while keeping it to a 255 ratio<br />	r = r * factor / 255.0f;<br />	g = g * factor / 255.0f;<br />	b = b * factor / 255.0f;<br />	// Check if the the values went past the highest value<br />	if&#40;r &gt; 1.0f &amp;&amp; &#40;temp = &#40;1.0f/r&#41;&#41; &lt; scale&#41; scale=temp;<br />	if&#40;g &gt; 1.0f &amp;&amp; &#40;temp = &#40;1.0f/g&#41;&#41; &lt; scale&#41; scale=temp;<br />	if&#40;b &gt; 1.0f &amp;&amp; &#40;temp = &#40;1.0f/b&#41;&#41; &lt; scale&#41; scale=temp;<br />	// Get the scale for this pixel and multiply it by our pixel values<br />	scale*=255.0f;		<br />	r*=scale;	g*=scale;	b*=scale;<br />	// Assign the new gamma'nized RGB values to our image<br />	pImage&#91;0&#93; = &#40;byte&#41;r;<br />	pImage&#91;1&#93; = &#40;byte&#41;g;<br />	pImage&#91;2&#93; = &#40;byte&#41;b;<br />&#125;<br /></code></pre></div>
    <div class="meta">Posted on 2003-12-26 07:05:27 by zabnik</div>
   </div>
   <div class="post" id="post-128965">
    <div class="subject"><a href="#post-128965">howto: change image gamma value</a></div>
    <div class="body">tell me too~~</div>
    <div class="meta">Posted on 2003-12-26 08:32:12 by super maymay</div>
   </div>
   <div class="post" id="post-128992">
    <div class="subject"><a href="#post-128992">howto: change image gamma value</a></div>
    <div class="body">Hi,<br /><br />seems, the routine works with a byte array of a DIB image.<br />Look for GetDIBits / SetDIBits...<br /><br />Regards,<br />Nordwind64</div>
    <div class="meta">Posted on 2003-12-26 13:41:25 by Nordwind64</div>
   </div>
   <div class="post" id="post-129054">
    <div class="subject"><a href="#post-129054">yes it is</a></div>
    <div class="body">Yes, I wrote that the buffer contains pure RGB data(data array or smt..)<br />But the problem IS that i got <strong>DARK</strong> image this C++ function converts <strong>DARK</strong> image to <strong>LIGHT</strong> image, and I dont know how it works, or If somebody knows better algo pls write. <br /><br />Thank you</div>
    <div class="meta">Posted on 2003-12-27 07:47:36 by zabnik</div>
   </div>
  </div>
 </body>
</html>