<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Command Com Error - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16309" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=16309">Command Com Error</a></p>
   <div class="post" id="post-126687">
    <div class="subject"><a href="#post-126687">Command Com Error</a></div>
    <div class="body">Hi All,<br /><br />New to this forum and HLA, hope someone can help.  Have just installed HLA, MASM32 etc. and run HW test prog. Compiled okay and HW.exe runs okay, however system reports errors that Command.Com is invalid and halts the system.  Runtime report below, any assistance to cause of error would be grateful.<br /><br />Thanks<br /><br />MArc<br /><br />******************<br /><br /><br /><br />C:\hla&gt;hla -v hw<br />HLA (High Level Assembler)<br />Released to the public domain by Randall Hyde.<br />Version Version 1.59 build 8265 (prototype)<br />Win32 COFF output<br />Using MASM assembler<br />MASM output<br /><br />Files:<br />1: hw.hla<br /><br />Compiling 'hw.hla' to 'hw.asm'<br />using command line <br />HLA (High Level Assembler) Parser<br />Released to the public domain by Randall Hyde.<br />Version Version 1.59 build 8264 (prototype)<br />File: hw.hla<br />Output Path: &quot;&quot;<br /><br />Compiling &quot;hw.hla&quot; to &quot;hw.asm&quot;<br />Compilation complete, 6059 lines,   1.082 seconds,    5600 lines/second<br /><br />Assembling &quot;hw.asm&quot; to &quot;hw.obj&quot; via <br />Bad command or file name<br />Linking via <br />Bad command or file name<br />File not found<br />Invalid COMMAND.COM<br /><br />Cannot load COMMAND, system halted<br /><br /><br /><br />***************************************************</div>
    <div class="meta">Posted on 2003-12-05 13:51:12 by Krug</div>
   </div>
   <div class="post" id="post-126700">
    <div class="subject"><a href="#post-126700">New To HLA - Command Com Error</a></div>
    <div class="body">Strange error, what version of windows are you running?</div>
    <div class="meta">Posted on 2003-12-05 15:03:27 by Odyssey</div>
   </div>
   <div class="post" id="post-126756">
    <div class="subject"><a href="#post-126756">New To HLA - Command Com Error</a></div>
    <div class="body">That is odd.  Are you sure it's compiling or was  there a preexisting HW.exe in the folder?  Try deleting HW.exe and try to compile it again.<br /><br />From the output, it seems that HLA can't find ML.exe and link.exe, in which case you have to set a global environment path to the masm32\bin folder.</div>
    <div class="meta">Posted on 2003-12-05 22:32:33 by Kain</div>
   </div>
   <div class="post" id="post-126807">
    <div class="subject"><a href="#post-126807">Command.Com Error - Follow Up</a></div>
    <div class="body">Hi All,<br /><br />Thanks for reading: -<br /><br />Current O/S is Windows XP Professional<br /><br />Path to Masm32\bin - okay.  Deleted HW.exe and recompiled, following generated - <br /><br />Microsoft Windows XP <br />(C) Copyright 1985-2001 Microsoft Corp.<br /><br />C:\Documents and Settings\Marc Abbott&gt;cd\<br /><br />C:\&gt;cd hla<br /><br />C:\hla&gt;ihla<br /><br />C:\hla&gt;path=c:\hla;c:\masm32\bin;C:\FSC\PCOBOL32;%SystemRoot%\system32;%SystemRo<br />ot%;%SystemRoot%\system32\WBEM;%SYSTEMROOT%\COMMAND;C:\Program Files\Common File<br />s\Adaptec Shared\System;C:\Program Files\Panda Software\Panda Antivirus Titanium<br />;C:\Program Files\Microsoft SQL Server\80\Tools\Binn\;c:\hla;c:\hla\radasm;c:\hl<br />a\radasm\addins;c:\program files\devstudio\sharedide\bin\ide;c:\program files\de<br />vstudio\sharedide\bin;c:\program files\devstudio\vc\bin;c:\fsc\pcobol32<br /><br />C:\hla&gt;set lib=c:\masm32\lib;c:\hla\hlalib;c:\program files\devstudio\vc\lib;c:\<br />fsc\pcobol32;;c:\hla\hlalib<br /><br />C:\hla&gt;set include=c:\hla\include;c:\masm32\include;c:\program files\devstudio\v<br />c\include;c:\program files\devstudio\vc\atl\include;c:\program files\devstudio\v<br />c\mfc\include;%include%<br /><br />C:\hla&gt;set hlainc=c:\hla\include<br /><br />C:\hla&gt;set hlalib=c:\hla\hlalib\hlalib.lib<br /><br />C:\hla&gt;dir<br /> Volume in drive C has no label.<br /> Volume Serial Number is 6802-FE65<br /><br /> Directory of C:\hla<br /><br />05/12/2003  19:35    &lt;DIR&gt;          .<br />05/12/2003  19:35    &lt;DIR&gt;          ..<br />16/10/2003  21:05            53,248 hla.exe<br />05/12/2003  18:55    &lt;DIR&gt;          hlalib<br />16/10/2003  21:05         1,372,160 hlaparse.exe<br />05/12/2003  19:35             1,301 hw.asm<br />05/12/2003  19:35                 0 hw.bss.inc<br />05/12/2003  19:35               170 hw.consts.inc<br />05/12/2003  19:35               284 hw.data.inc<br />05/12/2003  19:35             6,144 hw.exe<br />05/12/2003  19:35               776 hw.extpub.inc<br />04/12/2003  20:29               144 hw.hla<br />05/12/2003  19:35               181 hw.link<br />05/12/2003  19:35               248 hw.link._.link<br />05/12/2003  19:35               964 hw.obj<br />05/12/2003  19:35                 0 hw.ro.inc<br />04/12/2003  12:57               195 IHLA.bat<br />05/12/2003  18:55    &lt;DIR&gt;          include<br />19/03/1998  17:28           462,899 LINK.EXE<br />22/07/2001  06:31             9,687 ML.ERR<br />29/03/1999  18:45           372,736 ML.EXE<br />10/06/1998  07:50           157,456 MSPDB50.DLL<br />16/10/2003  12:45            24,576 PatchRadASM.exe<br />05/12/2003  18:55    &lt;DIR&gt;          RadASM<br />05/12/2003  18:55            14,042 unins000.dat<br />17/12/2002  04:00            82,253 unins000.exe<br />              21 File(s)      2,559,464 bytes<br />               5 Dir(s)     788,542,976 bytes free<br /><br /><br />C:\hla&gt;hla -v hw<br />HLA (High Level Assembler)<br />Released to the public domain by Randall Hyde.<br />Version Version 1.59 build 8265 (prototype)<br />Win32 COFF output<br />Using MASM assembler<br />MASM output<br /><br />Files:<br />1: hw.hla<br /><br />Compiling 'hw.hla' to 'hw.asm'<br />using command line <br />HLA (High Level Assembler) Parser<br />Released to the public domain by Randall Hyde.<br />Version Version 1.59 build 8264 (prototype)<br />File: hw.hla<br />Output Path: &quot;&quot;<br /><br />Compiling &quot;hw.hla&quot; to &quot;hw.asm&quot;<br />Compilation complete, 6059 lines,   1.092 seconds,    5549 lines/second<br /><br />Assembling &quot;hw.asm&quot; to &quot;hw.obj&quot; via <br />Microsoft (R) Macro Assembler Version 6.14.8444<br />Copyright (C) Microsoft Corp 1981-1997.  All rights reserved.<br /><br /> Assembling: hw.asm<br />Linking via <br />Microsoft (R) Incremental Linker Version 5.12.8078<br />Copyright (C) Microsoft Corp 1992-1998. All rights reserved.<br /><br />-heap:0x1000000,0x1000000<br />-stack:0x1000000,0x1000000<br />-base:0x4000000<br />-entry:HLAMain<br />-section:.text,ER<br />-section:.data,RW<br />-section:.bss,RW<br />kernel32.lib<br />user32.lib<br />gdi32.lib<br />-subsystem:console<br />-out:hw.exe<br />c:\hla\hlalib\hlalib.lib<br />hw.obj<br />File not found<br />Invalid COMMAND.COM<br /><br />Cannot load COMMAND, system halted<br /><br />*************************************<br />HW compiles and runs okay, however command shell &quot;hangs&quot; until cleared using ctrl/alt/del.<br /><br />Any suggestions would be appreciated<br /><br />Thanks<br /><br />Marc</div>
    <div class="meta">Posted on 2003-12-06 10:23:34 by Krug</div>
   </div>
   <div class="post" id="post-126814">
    <div class="subject"><a href="#post-126814">Re: Command.Com Error - Follow Up</a></div>
    <div class="body"><div class="quote"><br />Hi All,<br /><br />-subsystem:console<br />-out:hw.exe<br />c:\hla\hlalib\hlalib.lib<br />hw.obj<br />File not found<br />Invalid COMMAND.COM<br /><br />Cannot load COMMAND, system halted<br /><br />*************************************<br />HW compiles and runs okay, however command shell &quot;hangs&quot; until cleared using ctrl/alt/del.<br /><br />Any suggestions would be appreciated<br /><br />Thanks<br /><br />Marc </div><br /><br />try running command.com by itself from your command prompt.  What result do you get?</div>
    <div class="meta">Posted on 2003-12-06 12:00:19 by Kain</div>
   </div>
   <div class="post" id="post-126849">
    <div class="subject"><a href="#post-126849">Attn. Randy</a></div>
    <div class="body">On opening a Command Window, Windows converts %System Root% to c:\Windows, or C:\WINNT, etc... Thus, when you type path in a Command window, you should see actual path names not %System Root etc... In order for this to work, Windows expects to find %System Root%, etc to be at the beginning of the line, and refuses to translate it if it appears in the middle of the line.<br /><br />So, here's the problem. Randy's installer adds the paths to HLA at the start of the path (in front of %System Root, instead of at the end. Thus when Windows opens a Command Window, Command com cannot be accessed. (Neither can anything else...)<br /><br />The path should be corrected... in the System Variables Section of the Environment Variables Section in Advanced in System Properties (Right-Click My Computer and choose Properties, then the Advanced pane, then Environment Variables, scroll down to path in System Variables).<br /><br />Simply, move the &quot;c:\hla;c:\masm32\bin;C:\FSC\PCOBOL32;&quot; from the start of the path in the Environment variables as above, to the end.<br /><br />Close Command Window. Reboot perhaps, I cannot remember.<br /><br />It should work now.</div>
    <div class="meta">Posted on 2003-12-06 19:47:50 by V Coder</div>
   </div>
   <div class="post" id="post-126860">
    <div class="subject"><a href="#post-126860">New To HLA - Command Com Error</a></div>
    <div class="body">Hi All,<br /><br />That is very strange, because on an XP system command.com shouldn't be called.  The command shell is cmd.exe.  I have never seen ihla.bat do what you have posted on my XP Pro system.  OTOH, I have not done a full install/re-install of HLA in a long time (v1.46).  My path has c:\hla first; and having it first has not caused any problems on my system (and I add and remove stuff frequently).  V coder, you are probably right that the later installer has a bug in its path string handler. <br /><br />Krug, did you install HLA from an admin (super user/ Administrators group) account?  When you install programs as a regular user, XP will not necessarily add your new path values to the system path; it may only add to the user specific path.  When you look at your environment variables, check the path string in *both* locations (system and user) if you are using a regular user account (not a member of the Administrators group).<br /><br />HTH,<br /><br />Charles</div>
    <div class="meta">Posted on 2003-12-06 22:27:28 by cdquarles</div>
   </div>
   <div class="post" id="post-127046">
    <div class="subject"><a href="#post-127046">New To HLA - Command Com Error</a></div>
    <div class="body">For a new install, download the SETUPHLA.EXE program and run that. <br />Do *NOT* install HLA manually as you've done. Manual installation is for upgrading, not for initial installation.<br /><br />Where &quot;command.com&quot; is bugging out is a good question. AFAIK, it only gets invoked under Windows when you run 16-bit code (e.g., a &quot;DOS-box&quot; application). <br /><br />Also, it turns out that it's not a good idea to put any paths before %systemroot%. So try moving the HLA path (and other paths) to the end of the path= statement.<br />Cheers,<br />Randy Hyde</div>
    <div class="meta">Posted on 2003-12-08 10:46:38 by rhyde</div>
   </div>
   <div class="post" id="post-127100">
    <div class="subject"><a href="#post-127100">New To HLA - Command Com Error</a></div>
    <div class="body">I saw this, posted earlier<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=16347">http://www.asmcommunity.net/board/index.php?topic=16347</a></div>
    <div class="meta">Posted on 2003-12-08 23:39:05 by eet_1024</div>
   </div>
  </div>
 </body>
</html>