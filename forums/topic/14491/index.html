<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>porting to Linux - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14491" />
    <link rel="next" href="../?id=14491&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=117">Unix</a> &raquo; <a href="../?id=14491">porting to Linux</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=14491&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14491&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14491" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14491&amp;page=2">&gt;</a><a href="../?id=14491&amp;page=2">&raquo;</a></form>   <div class="post" id="post-112118">
    <div class="subject"><a href="#post-112118">porting to Linux</a></div>
    <div class="body">Hi all,<br /><br />          I have a *.asm file coded in MASM it's consists of about 7K lines.. now I have to port this assembly file to linux. So I google for Masm2as but it didn't work out.<br /><br />then I thought with little modification will convert the code to NASM style and since NASM is available for both the OS and platform so it will be easy.<br /><br />But I got stuck since i am not familiar with NASM coding syntax on win32. can anybody help me out of this situation.. <br /><br />regards</div>
    <div class="meta">Posted on 2003-07-28 00:19:36 by processingspeed</div>
   </div>
   <div class="post" id="post-112121">
    <div class="subject"><a href="#post-112121">porting to Linux</a></div>
    <div class="body">Try FASM instead of NASM. NASM is an old assembler without support. FASM have Linux version and have very easy and full documented syntax. Also good online support. <br /><br /><a target="_blank" href="http://www.flatassembler.net">http://www.flatassembler.net</a> - main site of FASM<br /><a target="_blank" href="http://board.flatassembler.net">http://board.flatassembler.net</a> - FASM board where you can take support and help.</div>
    <div class="meta">Posted on 2003-07-28 01:15:09 by JohnFound</div>
   </div>
   <div class="post" id="post-112318">
    <div class="subject"><a href="#post-112318">porting to Linux</a></div>
    <div class="body">Since I have to use NASM, <br /><br />So i found out the solution,<br /><br />many tutorials are avaiable so I dont' find any problem porting MASM compatible code to NASM. It's working fine and as efficient as MASM generated code.<br /><br />If someone is struggling with similar problem, do see the NASM development site as sourceforge. answer is there...<br /><br />regards</div>
    <div class="meta">Posted on 2003-07-29 06:47:31 by processingspeed</div>
   </div>
   <div class="post" id="post-112387">
    <div class="subject"><a href="#post-112387">porting to Linux</a></div>
    <div class="body">&gt; NASM is an old assembler without support.<br /><br />What?<br /><br />NASM has support. I think that it's more diffused than any other<br />asembler for Linux (except gnu as, that is other option to port between<br />Windows and Linux).<br /><br />But I don't want waste my time speaking about what is better, NASM or<br />FASM. I only say that I use NASM and I have written codes that runs <br />fine in any ix86+  platform. I love its -fbin option :)<br /><br />NASM is ever in progress.<br /><br />NASM includes a option for TASM compatibility, and is not so hard<br />to write macros for MASM instructions like &quot;invoke&quot;, &quot;.if&quot;, &quot;while&quot;, &quot;proc&quot;,<br />&quot;local&quot;, and anything that you want use from MASM.<br /><br />processingspeed, I don't understand what is you problem to port your<br />code from MASM to NASM. But if you want to know anything about this<br />only ask for here or at my email:http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=9d18fe5103248ba0997650f8b70cb749<br /><br />greestings!</div>
    <div class="meta">Posted on 2003-07-29 23:16:03 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112661">
    <div class="subject"><a href="#post-112661">porting to Linux</a></div>
    <div class="body">Hi     n u M I T_o r,<br /><br />       In order to assemble my masm code i have to make hell lot of changes in masm code as result the code lost it readibiliy, which i don't want and it started looking ugly and scary.<br /><br />so I want to use macros for the same code. Can it be possible for u to provide these macros so that I can maintain my source code and certain others will definitely get benefits from this also.<br /><br />regards</div>
    <div class="meta">Posted on 2003-08-01 06:54:05 by processingspeed</div>
   </div>
   <div class="post" id="post-112731">
    <div class="subject"><a href="#post-112731">porting to Linux</a></div>
    <div class="body">uuu... one more time.. i will not say what append with my original post lol...<br /><br />ok , you can see this: <a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=9951">http://www.asmcommunity.net/board/index.php?topic=9951</a><br /><br />also i see that the page of the original pakage win32n.zip is down.. alot of info and examples..<br /><br />I have a modified version of funct that work ok and more easy, also can &quot;export&quot; easy the names for call from a programm in C.<br /><br />Also can try <a target="_blank" href="http://www.drpaulcarter.com/pcasm/">http://www.drpaulcarter.com/pcasm/</a><br /><br />Nice day.</div>
    <div class="meta">Posted on 2003-08-01 22:04:55 by rea</div>
   </div>
   <div class="post" id="post-112775">
    <div class="subject"><a href="#post-112775">porting to Linux</a></div>
    <div class="body">processingspeed:<br /><br />If you want assembly portable source codes, you must consider some facts.<br />The readibility of a assembly source code does not depend of the assembler,<br />does depend of the programmer and his knowledge of assemble language and<br />of the assembler that he uses. Without use MASM macro instructions you can<br />obtain a very readible ix86 portable source codes.<br /><br />With NASM you have many posibilities using its preprocessor to write <br />macros; the best, I think, is what you have created, because you know <br />exactly what is happening with each macro, and each programmer has his<br />preferences and program specifications. It's impossible to find something<br />so abstract and general that be usefull for all.<br /><br />I advise you read this article of mammon_:<br /><a target="_blank" href="http://www.eccentrix.com/members/mammon/Text/nasm_apj.txt">http://www.eccentrix.com/members/mammon/Text/nasm_apj.txt</a><br /><br />and look at some interesting .inc files, e.g., nagoa.inc:<br /><a target="_blank" href="http://sapp.telepac.pt/win32asm/">http://sapp.telepac.pt/win32asm/</a><br /><br />In NAGOA page you will find some usefull info about NASM.<br /><br />You can look at the codes that I attach here. Are NASM<br />source codes with macros to write a gtk-gnome application. These<br />macros are very simple to use. I don't include macros for<br />control constructs because I use it not much. You can use<br />a macro instruction &quot;invoke&quot; like MASM to call extern functions<br />and a macro directive &quot;PROC - ENDP&quot; to declare procedures and <br />easily handle local variables.</div>
    <div class="meta">Posted on 2003-08-02 12:12:31 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112776">
    <div class="subject"><a href="#post-112776">the atach</a></div>
    <div class="body">Here is the attach</div>
    <div class="meta">Posted on 2003-08-02 12:14:08 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112777">
    <div class="subject"><a href="#post-112777">porting to Linux</a></div>
    <div class="body">Hi hgb!<br /><br />I discovered why some NASM users are not agreed about changes to the<br />NASM source code to get a intuitivest way to use structures and unions.<br />Some guys have written macros to do it. They use it since a year ago.<br />They think publish it soon with a full porting of the MASM32 window.inc <br />to NASM.<br /><br />You know something about this?</div>
    <div class="meta">Posted on 2003-08-02 12:23:43 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112904">
    <div class="subject"><a href="#post-112904">porting to Linux</a></div>
    <div class="body">n u M I T_o r,<br /><br />            Thanks alot for those macros. Actually by readibility i mean to say that .. since i have to replace all the invokes and .if macros with plain assembly instructions so the code started looking ugly. Since the entire code is somewhat about 10K lines so it was pretty tought for me to add the comments to increase the visibility of logic to other.<br /><br />But anyways those links provided by you is not working.<br /><br />Once again..thanks alot.<br /><br />regards</div>
    <div class="meta">Posted on 2003-08-03 23:45:57 by processingspeed</div>
   </div>
   <div class="post" id="post-112924">
    <div class="subject"><a href="#post-112924">porting to Linux</a></div>
    <div class="body">well, try this link:<br /><br /><a target="_blank" href="http://www.eccentrix.com/members/mammon/">http://www.eccentrix.com/members/mammon/</a><br /><br />and look at the pappers:<br />APJ: Extending NASM. Using and abusing the NASM preprocessor.<br /><br />About NAGOA, I don't know what is happenig :(<br /><br />I atach here the nagoa.inc in a zip. Maybe is not the last version,<br />but must include some macros for control structures like if, for,<br />and while. Anyway, the papper of mammon_ explains well how to<br />write this macros. Now is easiest write it because the NASM<br />preprocessor has more features.</div>
    <div class="meta">Posted on 2003-08-04 03:40:53 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112926">
    <div class="subject"><a href="#post-112926">Extending NASM</a></div>
    <div class="body">If the link fails, here is the papper...</div>
    <div class="meta">Posted on 2003-08-04 03:42:28 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-112986">
    <div class="subject"><a href="#post-112986">porting to Linux</a></div>
    <div class="body"><div class="quote"><em>Originally posted by n u M I T_o r </em><br /><br />Some guys have written macros to do it. They use it since a year ago.<br />They think publish it soon with a full porting of the MASM32 window.inc <br />to NASM.<br /><br />You know something about this?</div><br /><br /><br />If I am not wrong you are calling about xstruct???, if is this the case, yes i know about it, also other peple are clening it up and try a best thing, i dont know the advances about this approach, but aparenly will look good ;). But also i dont agree completely with the form f use, lke you say, is not much intuitive.... :(, also i try modificate that  macro but i get in troubles in the way that i whant, also is a little more fast the assembly time implement in the code this.<br /><br />In fact the only thing left to the change i do is let the user initialize its structs, unions with the way like &lt; 45, &quot;hola&quot;&gt;, etc, is the only left thing.. I see that i can do for structs.. near to easy, but the problem comes with unions, is a little more hard to implement and will need more work, then I choice to stop or implement the initialization for both or not implement nothing of initializet data in the code with structs unions, and I choise the second.. also is not the final thing that i will try, i am rethinking and planing a secon way.. I dont know how many time this will take me.<br /><br />You can visit my page, now i dont have nothing more than some example and the win32n modificated, but not the source code that i modificate ... I will ask if I can put or they whant a diff with the actual code...and some one if whant to use.. simply patch the code and compile in his machine.. also the code dont cut the normal use of nasm, you can continue using struc or any other macro that you have ;).<br /><br />Nice day dude.</div>
    <div class="meta">Posted on 2003-08-04 11:34:50 by rea</div>
   </div>
   <div class="post" id="post-113035">
    <div class="subject"><a href="#post-113035">porting to Linux</a></div>
    <div class="body">&gt; If I am not wrong you are calling about xstruct???<br /><br />Yes, is that work. And the authors have a packet that includes a NASM<br />version of masm32's WINDOWS.INC<br /><br />&gt; also the code dont cut the normal use of nasm, you can continue using<br />&gt; struc or any other macro that you have<br /><br />That is important, because, imagine!, what would happen with the old<br />NASM source codes that use struct?<br /><br />I've look at the ALINK sources, and I found &amp; fixed some bugs. I advised<br />to the author, though I go on working on that. I fixed problems in the <br />code section characteristics and in the resources section virtual address<br />value.<br /><br />If you want, I can send you this version.<br /><br />greetings!</div>
    <div class="meta">Posted on 2003-08-04 22:13:46 by n u M I T_o r</div>
   </div>
   <div class="post" id="post-113089">
    <div class="subject"><a href="#post-113089">porting to Linux</a></div>
    <div class="body">Heh, heh, heh,...<br /><br />&quot;NASM is old&quot;,&quot;NASM hasnt got support&quot;,...<br /><br />Sorry If I sound like too rude, but THATS BULLSHIT... Those are just some library phrases that someone once said and now a lot of people ( people who really dont know ENOUGH about NASM and its support ) follow and copy&amp;paste as zealots...<br /><br />See, me and Jibz have been translating WINDOWS.INC from MASM32 ( yes, MASM32 has a big support, although I dislike its syntax - as I dislikes FASM?s - cos they are simply non real, plain and raw ASM, NASM IS ). And we will publish it in a few days time ( in a complete ready to use package ). Maybe today...<br /><br />Jibz XSTRUC macros are really cool and powerfull ( also, they ARE INTUITIVE... and obly people to learn the structs... every asm writer should do this... )<br /><br />P.S.: I could give anyone some guidelines of the criteria that I use to know what &quot;real&quot; ASM syntax is... ( mov eax,Var == mov eax, &gt;&gt; this is pure shit, not real asm... ).<br /><br />Bye, hoping truth doesnt hurt...</div>
    <div class="meta">Posted on 2003-08-05 09:45:25 by sheroc</div>
   </div>
   <div class="post" id="post-113105">
    <div class="subject"><a href="#post-113105">porting to Linux</a></div>
    <div class="body">--This is not a flame, simply my personal disagreement, I hope it doesn't burn--<br /><div class="quote"><br />as I dislikes FASM?s - cos they are simply non real, plain and raw ASM, NASM IS ).</div><br />FASM is asm! FASM is real, fasm in plain, raw and 1:1 (when no macros are used).<br />If NASM isn't dead now it has been revived, because it was dead for a while, I sure looked for it, but all I found was dead links and a dead &quot;official site&quot;, or did Google give me the wrong non-real non-asm results?<br /><br /><div class="quote"><br />P.S.: I could give anyone some guidelines of the criteria that I use to know what &quot;real&quot; ASM syntax is... ( mov eax,Var == mov eax, &gt;&gt; this is pure shit, not real asm... ).</div><br />FASM syntax:<br />mov eax, Var ; mov address of var to eax<br />mov eax,  ; mov the dword at Var to eax<br />Isn't this real asm? Then what is real asm?</div>
    <div class="meta">Posted on 2003-08-05 13:14:40 by scientica</div>
   </div>
   <div class="post" id="post-113112">
    <div class="subject"><a href="#post-113112">porting to Linux</a></div>
    <div class="body"><div class="quote"><em>Originally posted by sheroc </em><br />I could give anyone some guidelines of the criteria that I use to know what &quot;real&quot; ASM syntax is... ( mov eax,Var == mov eax, &gt;&gt; this is pure shit, not real asm... ).</div><br />If your assembler has the capacity for the OFFSET directive then <strong>mov eax,VAR</strong> generally does not mov the address into eax, in some assemblers (i.e. GoAsm) it will just throw an error. Since most assemblers that use the OFFSET directive will not allow the direct mov of an address in this manner why not have the assembler assume that you have put [] around VAR, it does not affect anything else. As for what is asm syntax, well, that depends on how you look at it. I exchanged some emails with Intel Developper Support and they tend to lean towards MASM syntax since they got rid of their assembler though they do not have a real preference. Since Intel never provided a standard for syntax, and since they no longer have an assembler, they basically said that they don't really care much either way. Intel has left it up to each assembler author to decide on his/her own syntactical structure so the correct answer is all assembler syntaxes are the correct syntax and none are.<br /><div class="quote"><em>From Elizabeth S.<br />Intel Developper support </em><br />...Intel does not have a preference, since we do not have an assembler any more.<br />The syntax is determined by the assembler; all Intel cares about is that the<br />encoding of the instruction is correct. <br /><br />I am unaware of any Intel provided standards for IA32 processor-specific<br />assemblers.  You may find the processor manuals, especially the optimization<br />guide useful...</div><br />They are the first and last word in x86 syntax, end of argument.</div>
    <div class="meta">Posted on 2003-08-05 13:42:21 by donkey</div>
   </div>
   <div class="post" id="post-113115">
    <div class="subject"><a href="#post-113115">porting to Linux</a></div>
    <div class="body">The problem is that MASM and others let you do it in both or even 3 ways... so? ambiguosness.<br /><br />Also, if intel is lazy/careless ( they weren?t so some time ago ), I am also careless to say that the machine itself dictates some strict rules &amp; concepts, and even if theres is not a ONLY syntax, MASM and others piss off over theese rules.<br /><br />I see lots of misunderstanding problems ( mostly with newcomers to x86 ASM ) with memory addresses and indirections ( as with memory operand sizes... ) and some other things? why does this happen? most of them start using MASM ( believe it or not ).<br /><br />Cos MASM gives variables more abstraction than the needed ( among other inconsistences ) and is the double sided blade ( yes, it simplifies things a bit or so it seems ) cos its more &quot;user friendly&quot; and the user doesnt need to bother with those facts/small concepts... but it makes people not to dive into the deepest little details<br /><br />This is my last end too... people who comes from the old era knows what I am talking about and they know that to learn ASM is also to think at machine code level concepts in a strict way ( yes: from the first beginning ).<br /><br />Bye.<br /><br />P.S.: Yes, I tried FASM and it has a lot of common thing with NASM; for FASM I just said I dislike its syntax ( and import/exports... ) although is the second assembler I would use if there was no NASM.</div>
    <div class="meta">Posted on 2003-08-05 14:05:44 by sheroc</div>
   </div>
   <div class="post" id="post-113116">
    <div class="subject"><a href="#post-113116">porting to Linux</a></div>
    <div class="body">The release I promised... If someone wants to try it ( just last NASM with a structured package and complete include file -Tamas Kaproncai?s win32n.inc is cool but its far lesser than WINDOWS.INC- and Jibz XSTRUC macros ).<br /><br />for those who try it and want to contribute with bugs, possible additions,...<br /><br />see the mail address in the package ( its a RAR SFX .EXE, although I had to zip it to be able to attatch it here ;) )<br /><br />Bye.</div>
    <div class="meta">Posted on 2003-08-05 14:14:43 by sheroc</div>
   </div>
   <div class="post" id="post-113117">
    <div class="subject"><a href="#post-113117">porting to Linux</a></div>
    <div class="body">No MASM does not let you do it in both ways.<br /><br />mov eax,VAR will never mov the address of VAR into eax. MASM does it the right way. If you wish to mov an address into eax that is only known at run time you use lea, if you wish to mov the offset of a variable that is known at compile time you use OFFSET (after all when it is assembled it is an offset and not an address until the PE loader is done), all other forms mov a value. You can go the route of GoAsm and throw an error or the route of A386 and just muddle the whole thing by basing it on whether the label was declared with a colon (<strong>:</strong>) or not. But I like MASM's way of doing it, a personal preference yes, but it is also the personal preference of 90+% of all assembly programmers. The only way in an x86 processor you can use a referenced address is from within a register so that is the only place in MASM that the [] rule for dereferencing is applied. All other applications of the [] are just idiosyncracies of the assembler author, nothing more.</div>
    <div class="meta">Posted on 2003-08-05 14:29:21 by donkey</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=14491&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=14491&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="14491" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=14491&amp;page=2">&gt;</a><a href="../?id=14491&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>