<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>need some guidance for proper assembler and code - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17430" />
    <link rel="next" href="../?id=17430&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17430">need some guidance for proper assembler and code</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=17430&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=17430&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="17430" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=17430&amp;page=2">&gt;</a><a href="../?id=17430&amp;page=2">&raquo;</a></form>   <div class="post" id="post-134957">
    <div class="subject"><a href="#post-134957">need some guidance for proper assembler and code</a></div>
    <div class="body">i am an assemly noobie.  currently i am taking a class that concerns itself with different types of programming languages and the midterm project for me is to make a program in C and assembly, compare and contrast the programs, and compare and contrast the languages.  problem is, i have no clue how to work with assembly.  i have looked at some tutorials and i have downloaded at least ten free assemblers/compilers but i cannot even write enough proper code for any of the assemblers to get one measly line to appear in the command prompt.  i have found code examples but i do not know how to implement the code for the assemlers i have. <br /><br />i need to know:<br /><br />a.   the best assembler/compiler i can get without paying for it.  <br />b.   where i can find a list of the basic functions and routines (if any) appropriate to that assembler<br />c.   how to implement a stack in assembly<br />d.   how to read data from a file in assembly<br />e.   anything else anyone is willing to give me.  advice, code examples, assemblers, etc etc etc. <br /><br />aim sn:  Blumdude<br />e-mail: http://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=061d78231868196edb0fef01d73ac9ba orhttp://www.asmcommunity.net/board/cryptmail.php?tauntspiders=in.your.face@nomail.for.you&amp;id=5ac224afa4626df4fb03785300f0c2af<br /><br />if you dont posta  reply here, please send me an e-mail with teh subject &quot;Assembly help&quot;<br /><br />note:   i can also use a unix assembler, if its easier to do assembly in unix.</div>
    <div class="meta">Posted on 2004-02-27 23:34:17 by blumdude</div>
   </div>
   <div class="post" id="post-134959">
    <div class="subject"><a href="#post-134959">need some guidance for proper assembler and code</a></div>
    <div class="body">start ---&gt;programs --&gt;command prompt<br /><br />cd\ ---&gt; go to root ie c:\&gt;<br /><br />type debug.exe   <br />you will the prompt change to - from c:\&gt;<br /><br />now type <br />a 100          -------&gt; this is command for assembling 100 means it assembles at address 100<br />you will see this<br />116C:0100<br /><br /><br />now type what ever is shown below<br />116C:0100 DB B4    --------&gt; db means define byte   and 0xb4 is the byte you define <br />116C:0101 DB 09    -------&gt; 0x09 is the byte you define here  and so on<br />116C:0102 DB BA<br />116C:0103 DB 09<br />116C:0104 DB 1<br />116C:0105 DB CD<br />116C:0106 DB 21<br />116C:0107 DB C3<br />116C:0108 DB 20<br />116C:0109 DB 48<br />116C:010A DB 69<br />116C:010B DB 2C<br />116C:010C DB 57<br />116C:010D DB 6F<br />116C:010E DB 72<br />116C:010F DB 6C<br />116C:0110 DB 64<br />116C:0111 DB 21<br />116C:0112 DB 24<br /><br /><br />you want to see what you have assembled <br />type u 100  u == un assemble 100 is address <br />-U 100<br />116C:0100 B409          MOV     AH,09<br />116C:0102 BA0901        MOV     DX,0109<br />116C:0105 CD21          INT     21<br />116C:0107 C3            RET<br />116C:0108 204869        AND     ,CL<br />116C:010B 2C57          SUB     AL,57<br />116C:010D 6F            DB      6F<br />116C:010E 726C          JB      017C<br />116C:0110 64            DB      64<br />116C:0111 2124          AND     ,SP<br /><br />you want to see this in dat format <br />type d 100<br /><br /><br />-D 100<br />116C:0100  B4 09 BA 09 01 CD 21 C3-20 48 69 2C 57 6F 72 6C   ......!. Hi,Worl<br />116C:0110  64 21 24 09 01 CD 21 C3-20 69 2C 57 34 00 5B 11   d!$...!. i,W4.[.<br /><br /><br />do you want run step by step <br />do g 100  ----&gt; goes to 100 and executes one instruction<br /><br /><br />or use t ----&gt; trace<br /><br /><br />or if you want to run this assembled program<br /><br />type just g<br /><br />-G 100<br /><br />AX=0000  BX=0000  CX=0000  DX=0000  SP=FFEE  BP=0000  SI=0000  DI=0000<br />DS=116C  ES=116C  SS=116C  CS=116C  IP=0100   NV UP EI PL NZ NA PO NC<br />116C:0100 B409          MOV     AH,09<br />-G<br />Hi,World!<br />Program terminated normally<br />-<br /><br /><br />well if you have successfully compleated and understood what is above you have done your first assembler program<br /><br />which displays hi,world on console<br /><br /><br />now some basics<br /><br />to see all commands in debug.exe use debug/?<br />the string is always terminated by $ == 0x24 not null as in ascii string <br />if you use int 21h<br />this is  16 bit assembly <br />well this is enough for now<br />more on queries<br />;)</div>
    <div class="meta">Posted on 2004-02-28 01:46:04 by bluffer</div>
   </div>
   <div class="post" id="post-134961">
    <div class="subject"><a href="#post-134961">good news and bad news and thank yous</a></div>
    <div class="body">good news:   it ran it worked the computer said hi world to me, and i was overjoyed<br />bad news:     i have no idea how to implement what i just learned within my larger scale program, that is, using assembly to implement a stack to read mathematical expressions in infix form, and evaluate it using postfix on the stack.  in C this is so incredibly easy.  assembly is quite different.<br /><br />but i woudl like to thank you, because at least i know someone how to do something.  is there any program i can use that i create a regular blah.asm file and it will compile and link it?  hmmm.</div>
    <div class="meta">Posted on 2004-02-28 03:11:33 by blumdude</div>
   </div>
   <div class="post" id="post-134962">
    <div class="subject"><a href="#post-134962">need some guidance for proper assembler and code</a></div>
    <div class="body">bluffer, he meant he wants <strong>nowadays</strong> asm, not to be scared. <br />blumdude, go to <a target="_blank" href="http://www.masm32.com/">http://www.masm32.com/</a> , there download MASM. From there on, you have dozens of options for IDE (if you want one). See the &quot;IDEs&quot; section on this board for downloads and comparisons. Coding in asm is similar to coding in C when you're calling API and using &quot;if&quot; statement. Since you asked how to open a file, I see you probably use &quot;fopen&quot; in C. There's no fopen in asm, you'll have to use the Win32 API &quot;CreateFile&quot; or &quot;OpenFile&quot;....<br />In the MASM8 package, there are many tutorials - read them , you'll see how easy it is to code. <br />Also, don't forget to write in your project that asm has OOP, too. And there actually is a wide variety of OOP frameworks for asm. Using some special &quot;header&quot; files, coded by people on this board, asm can act like C++ . Asm coders get called handycapped as regards programming design, that they only rule the lowest level, and can't understand the high-level functions. On an interview for work I was told <strong>&quot;you asm coders aren't good programmers at all&quot; </strong>. Well, not anymore. (and I proved him wrong). <br />Have fun with your project :)</div>
    <div class="meta">Posted on 2004-02-28 03:18:10 by Ultrano</div>
   </div>
   <div class="post" id="post-134964">
    <div class="subject"><a href="#post-134964">downloaded</a></div>
    <div class="body">ok, i downloaded it and installed it, and i am reading the info that comes with it.  if i have any more ?s i will either post here or start another thread, thanks!</div>
    <div class="meta">Posted on 2004-02-28 03:34:39 by blumdude</div>
   </div>
   <div class="post" id="post-134980">
    <div class="subject"><a href="#post-134980">need some guidance for proper assembler and code</a></div>
    <div class="body">Hi Blundude,<br /><br />You will also need a few things...<br /><br /><strong>Windows API reference:</strong><br /><br />The best reference available is the <a target="_blank" href="http://www.microsoft.com/msdownload/platformsdk/sdkupdate/default.htm?p=/msdownload/platformsdk/sdkupdate/home.htm">Platform SDK</a> or MSDN library. The Library costs money but you can download the PSDK directly from Microsoft. It is rather large so you will probably need broadband.<br /><br />If you want a smaller reference, there is the Win32.hlp file. This is available at Borland's site but it is quite old and not all of the available functions are represented. Generally it only includes those API functions up to Win95:<br /><br /><a target="_blank" href="http://info.borland.com/devsupport/delphi/downloads/">http://info.borland.com/devsupport/delphi/downloads/</a><br /><br />You will find it near the bottom of the page (8MB)<br /><br /><strong>Intel IA32 instruction reference:</strong><br /><br />You can order the IA32 architecture manuals from Intel, I believe they are still free for the P4.<br /><br />There is a small HLP file that is quite good also though it only encompasses the instruction set up to the 486. You can download it from my site :<br /><br /><a target="_blank" href="http://www.nt.net/donkey/files/x86eas.zip">http://www.nt.net/donkey/files/x86eas.zip</a><br /><br /><strong>Development environment</strong><br /><br />There are many excellent IDEs available, these will significantly reduce the learning curve with code completion and other RAD tools. I use <a target="_blank" href="http://radasm.visualassembler.com/">RadASM</a> but there is also WinAsm Studio, AsmEdit, EasyCode and others. See the <a target="_blank" href="http://www.asmcommunity.net/board/forumdisplay.php?s=&amp;forumid=24">IDEs: usage &amp; development </a> forum to get your hands on a free IDE. Note that all IDEs I mentioned are specific to MASM except RadASM, it can handle different assemblers if you later decide that another suits you better.<br /><br /><strong>Examples and tutorials:</strong><br /><br /><a target="_blank" href="http://spiff.tripnet.se/~iczelion/">Iczelion</a><br /><a target="_blank" href="http://www.madwizard.org/view.php?page=tutorials.contents">Mad Wizard</a></div>
    <div class="meta">Posted on 2004-02-28 09:29:55 by donkey</div>
   </div>
   <div class="post" id="post-134987">
    <div class="subject"><a href="#post-134987">cant i just make something appear in a command prompt?</a></div>
    <div class="body">i think using the windows api would be kind of out of the scope of what i need to do.  but is that required with masm32 or radASM?  all i really need in the end is a executable, preferably from the command prompt that will display all the 'answers' to the user directly in the console.  i'm not really interested in the gui parts of the program, unless of course they are absolutely needed.  <br /><br />i downloaded radasm, i'm taking a look at it when i get back from work, thanks.</div>
    <div class="meta">Posted on 2004-02-28 10:35:52 by blumdude</div>
   </div>
   <div class="post" id="post-134989">
    <div class="subject"><a href="#post-134989">need some guidance for proper assembler and code</a></div>
    <div class="body">It depends what you want to do. If you are running in DOS mode the Windows API will not be of much use. But the Console is a part of Windows not DOS and it's functions are part of the API. The API is not only the GUI functions, it is also memory allocation, input/output etc... You are probably better off running your program in the console than in DOS. Win NT does not have a true DOS mode like Win9x and many things will not work in 2K/XP that will in 9x. The Windows console may be your best bet and for that you need the API reference. Also you should be aware that the current MASM32 package will not link 16 bit code, you will require an older link.exe in order to do DOS code.</div>
    <div class="meta">Posted on 2004-02-28 10:41:09 by donkey</div>
   </div>
   <div class="post" id="post-134991">
    <div class="subject"><a href="#post-134991">hmmm ok</a></div>
    <div class="body">ok, well that's a problem.<br /><br />i am going to be coding on a winXP p4, and my program will need to work on windows2000 p3.  will that be a problem as well?</div>
    <div class="meta">Posted on 2004-02-28 10:47:32 by blumdude</div>
   </div>
   <div class="post" id="post-134994">
    <div class="subject"><a href="#post-134994">Re: hmmm ok</a></div>
    <div class="body"><div class="quote"><br />ok, well that's a problem.<br /><br />i am going to be coding on a winXP p4, and my program will need to work on windows2000 p3.  will that be a problem as well? </div><br /><br />Nope, Console mode is for all versions of Windows. If you have acceptable output on Win2K then generally it will work on all platforms. There is a console template in RadASM for both MASM32 and GoAsm that you can use to get a head start building your application. Just have to use WriteFile and the console handle to send output to the console window. Most assemby programmers write console apps, I am an exception in that I only ever write GUI applications but you will be able to get alot of help with any problems here.</div>
    <div class="meta">Posted on 2004-02-28 11:01:34 by donkey</div>
   </div>
   <div class="post" id="post-134996">
    <div class="subject"><a href="#post-134996">thanks</a></div>
    <div class="body">alright, thanks, now i need to leave, more information is welcome from anyone!</div>
    <div class="meta">Posted on 2004-02-28 11:04:39 by blumdude</div>
   </div>
   <div class="post" id="post-135022">
    <div class="subject"><a href="#post-135022">need some guidance for proper assembler and code</a></div>
    <div class="body">Also if Windows XP is an NT-based operating system, application run in a different way on Windows 2000!<br /><br />Many ppl are coding on XP today. And the result are crashing applications on 2K.<br /><br />Long time i used the following syntax:<br /><br /><pre><code><br />myFunction proc &#91;b&#93;uses&#91;/b&#93; edi edx myParameter&#58;DWORD<br />...<br />ret<br />myFunction endp<br /></code></pre><br />....and applications still keep crashing in 2K. After using<br /><pre><code><br />myFunction proc myParameter&#58;DWORD<br />local myReturnvalue&#58;DWORD<br />pushad<br />...<br />popad<br />mov  eax,myReturnvalue<br />ret<br />myFunction endp<br /></code></pre><br />.... things become better. And the code needs less bytes!<br /><br />In addition to this, M$ is <strong>perfect</strong> in not naming problems! <br />Simple test: GetModuleHandleA<br />Registers affected on NT/2K/XP/2K3 : EAX<br />Registers affected on 95/98/ME : EAX, ECX, EDX<br />Quicklook in Win32.HLP -&gt; <strong>one</strong> return value !!<br /><br />And now we can imagine why high level languages needs tons of SEH crap to blow up the exe size....<br /><br />Think about this possible errors when searching a solution for crashing apps...</div>
    <div class="meta">Posted on 2004-02-28 16:19:44 by cu.Pegasus</div>
   </div>
   <div class="post" id="post-135025">
    <div class="subject"><a href="#post-135025">need some guidance for proper assembler and code</a></div>
    <div class="body">You shouldn't depend on the values in ECX and EDX after calling a normal Windows API function, they can be anything. This is stated in the manual. Similarly, your callback functions can change EAX, ECX and EDX to whatever.</div>
    <div class="meta">Posted on 2004-02-28 17:08:20 by Sephiroth3</div>
   </div>
   <div class="post" id="post-135036">
    <div class="subject"><a href="#post-135036">need some guidance for proper assembler and code</a></div>
    <div class="body">cu.Pegasus, <a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=6670">http://www.asmcommunity.net/board/index.php?topic=6670</a> - search for &quot;Register preservation&quot;. After reading that, it should be obvious what your errors are. And that there's no reason to blame Microsoft, nor to use the silly zealot abbreviation &quot;M$&quot;.</div>
    <div class="meta">Posted on 2004-02-28 19:19:37 by f0dder</div>
   </div>
   <div class="post" id="post-135048">
    <div class="subject"><a href="#post-135048">need some guidance for proper assembler and code</a></div>
    <div class="body">cu.Pegasus,<br /><br />Your application is probably crashing in win2k because you made use of ebx but never preserve it. And of course Sephiroth3 is right, you should always assume that eax, edx, ecx is not preserved after you call an api.</div>
    <div class="meta">Posted on 2004-02-28 21:29:27 by roticv</div>
   </div>
   <div class="post" id="post-135068">
    <div class="subject"><a href="#post-135068">need some guidance for proper assembler and code</a></div>
    <div class="body">what is eax edx ecx?!?!  <br /><br />and why do i need to use them???</div>
    <div class="meta">Posted on 2004-02-29 02:55:29 by blumdude</div>
   </div>
   <div class="post" id="post-135069">
    <div class="subject"><a href="#post-135069">need some guidance for proper assembler and code</a></div>
    <div class="body">Hi,<br /><br />EAX,EBX,ECX,EDX,EDI,ESI,EBP,ESP and EIP are registers. The ESP and EBP registers are used for handling the stack, the EIP register is the instruction pointer and the rest are general purpose registers used to manipulate data. The x86 family of microprocessors is not capable of moving data directly from memory to memory, all data must first either pass through a register or the stack. Also registers are required for specific functions, many math functions such as MUL or DIV work only with numbers in EAX. ESI and EDI are the source and destination indexes, they are used for many functions available to REP. ECX is a general purpose register that is also used as a counter in many instructions. EDX is used to hold the high order DWORD of some operations or the remainder of a DIV.<br /><br />EAX,<strong>EBX</strong>,EDX,ECX -&gt; use them for anything<br /><strong>ESI,EDI</strong> -&gt; use them for most things but also for REP<br /><strong>EBP,ESP</strong> -&gt; you can modify these but best not to until you understand the stack<br /><strong>EIP</strong> -&gt; don't play with it<br /><br />Registers in bold <strong>must</strong> be preserved in a callback (ie DlgProc)<br /><br />If you are not familiar with registers and their uses, you will have alot of problems in asm, they are at the heart of it all. You should check out the WIKI book, I think there is a section on them.<br /><br />Also register instructions are smaller and using them where you can instead of memory is much much much faster.</div>
    <div class="meta">Posted on 2004-02-29 03:08:05 by donkey</div>
   </div>
   <div class="post" id="post-135072">
    <div class="subject"><a href="#post-135072">jeez</a></div>
    <div class="body">yeah i have downloaded many tutorials and basically got an overview of things, but its really all confusing, not having taken any sort of class yet.  i have written one program so far!  but it was cut and pasted, and i have yet to comment it for myself yet.  how in the world do people do this.  its so tedious.</div>
    <div class="meta">Posted on 2004-02-29 03:25:09 by blumdude</div>
   </div>
   <div class="post" id="post-135073">
    <div class="subject"><a href="#post-135073">need some guidance for proper assembler and code</a></div>
    <div class="body">Hi Blumdude,<br /><br />You will find that most asm programmers have a single trait in common, the fanatical obsession with detail. You cannot get far in assembly language if you are expecting to have all of the tasks taken care of behind the scenes like in HLLs. In assembler everything is done by you, there are very few exceptions. You will find as you get more familiar with the structure and syntax that it becomes more intuitive and easy to understand but you still must handle all the details yourself. This can be seen two ways, if you are a control freak like most people here it fits your personality well, if you like to have the minutia taken care of by the compiler, well, it will be a long tedious road.</div>
    <div class="meta">Posted on 2004-02-29 03:30:53 by donkey</div>
   </div>
   <div class="post" id="post-135074">
    <div class="subject"><a href="#post-135074">need some guidance for proper assembler and code</a></div>
    <div class="body">this is all just frustrating, because after reading and downloading examples and learning about a million new things, i still spent two hours fixing two lines of code.   i look at all the commented code, and all the totorials and it all is way over my head.  guess i'll have to break down and buy myself a assembly for dummies book, i'm sure thats been made (maybe titled differently).   thanks for everyones help, but even if i buy myself a textbook or some other form of learning guide, i think i'm pretty much hopelessly lost.</div>
    <div class="meta">Posted on 2004-02-29 04:01:15 by blumdude</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=17430&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=17430&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="17430" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=17430&amp;page=2">&gt;</a><a href="../?id=17430&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>