<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Wininet problem (How to keep connection?) - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=10259" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=8">Networking</a> &raquo; <a href="../?id=10259">Wininet problem (How to keep connection?)</a></p>
   <div class="post" id="post-77001">
    <div class="subject"><a href="#post-77001">Wininet problem (How to keep connection?)</a></div>
    <div class="body">I want to log in to a FTP server permanently. I want to stay connected in the server even if the server time-out comes. But how? The InternetConnect function with the 7'th parameter as &quot;INTERNET_FLAG_PASSIVE | INTERNET_FLAG_KEEP_CONNECTION&quot; doesn't work in the way I want it. The server time-out still throws me out of the server. <br /><br />My program needs to be stay connected in the server all the time, several days straight. And when the user does something (presses a button to write a file to the server) then I need to know if I am in the server or not (if the time-out has disconnected him). So, is there some function to get known if I am in the server or not?<br /><br />(I have another (bad) solution in reserve too, but first I wanted to ask advice from you).<br /><br />Thanks in advance.</div>
    <div class="meta">Posted on 2003-01-18 06:57:10 by president</div>
   </div>
   <div class="post" id="post-77003">
    <div class="subject"><a href="#post-77003">Wininet problem (How to keep connection?)</a></div>
    <div class="body">This should actually be posted in the &quot;Network&quot; forum and not here.<br />I have never bothered to use the Wininet api mainly because it sucks<br />when it comes to performance and control. Why dont you use the<br />real deal? (Winsock). IMO, The Wininet api is there when you need<br />some simple/small functions. <br /><br />Server time-out:<br />When the ftp-server times-out a connection there is really nothing<br />good you can do to keep the connection. Other then some commands<br />wich are now not working with most servers. Some servers time-out<br />because of session-time-out or idle-time-out. The session-time-out<br />cant be stopped. However the idle-timeout can be stopped by e.g<br />jumping in and out of directories before the time-out occures.<br /><br />Goto this site for information about Winsocks: <a target="_blank" href="www.madwizard.org">www.madwizard.org</a><br />this topic has probably been talked about before so visit the network<br />section or use the search button.</div>
    <div class="meta">Posted on 2003-01-18 07:09:42 by natas</div>
   </div>
   <div class="post" id="post-77019">
    <div class="subject"><a href="#post-77019">Wininet problem (How to keep connection?)</a></div>
    <div class="body">But is there any special function to know if I am connected to a server or not?</div>
    <div class="meta">Posted on 2003-01-18 09:41:49 by president</div>
   </div>
   <div class="post" id="post-77032">
    <div class="subject"><a href="#post-77032">Wininet problem (How to keep connection?)</a></div>
    <div class="body">why do you need to keep connected for so long time anyway? it's a rather unpolite thing to do.</div>
    <div class="meta">Posted on 2003-01-18 11:06:19 by f0dder</div>
   </div>
   <div class="post" id="post-77137">
    <div class="subject"><a href="#post-77137">Wininet problem (How to keep connection?)</a></div>
    <div class="body">In the ftp protocol there is a keep alive command named &quot;NOOP&quot; which you can use to inform the server you're still active. It works for the purpose you want but if the server got a rule to skip this command and ignore it then it can and will still kick you and then there is nothing you can do about it. The only other way to make sure you are not kicked is making small data transfers so a timeout never happens but thats not a good way since it will eat your bandwidth.<br /><br />// CyberHeg</div>
    <div class="meta">Posted on 2003-01-19 01:53:06 by CyberHeg</div>
   </div>
   <div class="post" id="post-77739">
    <div class="subject"><a href="#post-77739">Wininet problem (How to keep connection?)</a></div>
    <div class="body">The &quot;NOOP&quot; command is common knowledge to ftp-servers and are usually<br />always skipped because they dont want idlers on their ftp site. If there isnt<br />a session timeout then you could ofcourse just transfer a file limited to 1KbpSec.<br />You could start the transfer after a given time(10s before timeout maybe) and<br />then stop the transfer, wait and start the transfer again, in a loop. This wouldnt<br />eat anyones bandwidth, and youre connection would be kept-alive so to speak.</div>
    <div class="meta">Posted on 2003-01-22 08:08:09 by natas</div>
   </div>
  </div>
 </body>
</html>