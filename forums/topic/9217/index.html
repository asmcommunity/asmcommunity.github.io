<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>[NEWBIE]Pushing address of STRUCT - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9217" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=9217">[NEWBIE]Pushing address of STRUCT</a></p>
   <div class="post" id="post-67790">
    <div class="subject"><a href="#post-67790">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">Hi,<br /><br />   I need to use 'call' instead of 'invoke'.<br /><br />   How can I convert the following snippet to push the address of '_st' ?<br /><br />   Thanks for your help.<br /><br />   flyingtiger<br /><br />init proc<br />local _st:SYSTEMTIME<br />local temp:dword<br />invoke GetSystemTime,addr _st<br />...</div>
    <div class="meta">Posted on 2002-11-27 11:55:27 by flyingtiger</div>
   </div>
   <div class="post" id="post-67792">
    <div class="subject"><a href="#post-67792">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">If it wasn't a local you could do:<br /><br /><pre><code><br />init proc<br />local _st&#58;SYSTEMTIME<br />local temp&#58;dword<br /><br />push offset _st<br />call GetSystemTime<br /></code></pre><br /><br />Now you have to:<br /><br /><pre><code><br />init proc<br />local _st&#58;SYSTEMTIME<br />local temp&#58;dword<br /><br />lea eax,_st<br />push eax<br />call GetSystemTime<br /></code></pre><br /><br />Haha Mirno, beat you :) </div>
    <div class="meta">Posted on 2002-11-27 12:11:05 by Qweerdy</div>
   </div>
   <div class="post" id="post-67793">
    <div class="subject"><a href="#post-67793">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">If its a global struct &quot;push offset whatever&quot; - because the assembler can determine the address at assemble time.<br /><br />If its local &quot;lea eax, whatever&quot; followed by &quot;push eax&quot; - because the address is not known, but is relative to ebp, so this will assemble to &quot;lea eax, &quot;<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-11-27 12:11:29 by Mirno</div>
   </div>
   <div class="post" id="post-67795">
    <div class="subject"><a href="#post-67795">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">Hi Qweerdy, Mirno,<br /><br />  Thanks to both of you for your help.<br /><br />  Where can I learn all about these neat tricks (local, global, struct...) ?<br /><br />  flyingtiger.</div>
    <div class="meta">Posted on 2002-11-27 12:23:48 by flyingtiger</div>
   </div>
   <div class="post" id="post-67798">
    <div class="subject"><a href="#post-67798">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">Reading other people's source, mostly. It's all in \masm32\help\masm32.hlp too, though. May be a bit much too read all of it, but it's a good reference.<br /><br />In fact, when you open it and click the topmost link (&quot;Using invoke&quot;), you'll see &quot;addr&quot; and &quot;offset&quot; explained right there :)</div>
    <div class="meta">Posted on 2002-11-27 12:40:33 by Qweerdy</div>
   </div>
   <div class="post" id="post-67850">
    <div class="subject"><a href="#post-67850">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">Maybe try the MASM documentation, though i forgot the site. But i can post it online.</div>
    <div class="meta">Posted on 2002-11-27 19:27:28 by roticv</div>
   </div>
   <div class="post" id="post-67852">
    <div class="subject"><a href="#post-67852">[NEWBIE]Pushing address of STRUCT</a></div>
    <div class="body">Please post the url.<br /><br />Thanks,<br /><br />flyingtiger</div>
    <div class="meta">Posted on 2002-11-27 19:35:44 by flyingtiger</div>
   </div>
  </div>
 </body>
</html>