<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>TypeAhead  (Entering asm &amp; API code)  Update - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=553" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=553">TypeAhead  (Entering asm &amp; API code)  Update</a></p>
   <div class="post" id="post-3338">
    <div class="subject"><a href="#post-3338">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">The test program has been changed to AsmTypeA.<br /><br />I placed the routine in a DLL, so it could easily<br />be used for most homegrown editors.<br /><br />I added a couple of options that will allow you<br />to set the indent and spaces.<br /><br />Fixed a couple of bugs and made some changes to<br />the Keyword array, plus added many more assembler<br />Inructions to the array.<br /><br />You can also create your own custom Keywords that<br />will allow you to enter a partial or complete<br />Function with a minimum of two keystrokes.<br /><br />To MovingFulcrum, I fixed you e problem.<br /><br />You can download AsmTypeA from my web site at:<br /><br /><a target="_blank" href="http://www20.brinkster.com/ewayne/AsmLoad.html">http://www20.brinkster.com/ewayne/AsmLoad.html</a><br /><br />Read the Readme file.<br /><br />Play with it and let me know what you think, it<br />could be a good addon tool for all of us <br />writting editors.<br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-09 14:49:17 by Ewayne</div>
   </div>
   <div class="post" id="post-3346">
    <div class="subject"><a href="#post-3346">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Hey i like... wel kinda.. :)<br /><br />Constructive feedback here...<br /><br />I think you have a exellent start on a handy feature, but i still find it a bit cumbersome, so here are my 'problems' for you to think about..<br /><br /> 1) The auto indent looks nice, but i find it gets annoying to keep your code in line when trying to nest .if's (since you have to remind yourself not to tab all the way in first).<br /><br /> 2) The autocomplete should have user control.  I tried to write a macro called 'LOOK_AT_THIS' and no matter how i tried to start it off, i always got this.. &quot;loopK_AT_THIS&quot;.  This problem shows up elsewhere, like &quot;movv&quot;.    <br /><br /> 3) To the effect of #2, perhaps the 3 letter standard asm commands can be left out?, after all, they <em>are</em> only 3 letters?.  <br /><br />My suggestions:<br /><br /> How hard would it be to have the same basic functionality (with out the tabbing), but intead of finishing the word started (and leaving the cursor at the end), have it finish it in a different shade (say red), and have the curror in the same place, waiting for a space or a tab, which would indicate &quot;yes, this is the word i want&quot;, and then copy it black, and into memory.  If not, the user keeps typing and it tries to find a autocoplete if it can...<br /><br />ie)<br /><br />invoke    (two key presses, cursor after 'n')<br /><br />If i want it: hit space --&gt; INVOKE (is placed)<br />If not, i keep typing   --&gt; int 21h  (not likely, but possible 'in' solution)<br /><br />As well, if i dont hit space and simply type invoke, it replaces it anyways after im done...<br /><br /><br />These are a few helpful thoughts (as your hard work seems to be leaving a quite wake since your post yesterday :)  )<br /><br />Good Luck, and great start.<br /><br />:alright: <br />NaN</div>
    <div class="meta">Posted on 2001-08-09 18:11:22 by NaN</div>
   </div>
   <div class="post" id="post-3347">
    <div class="subject"><a href="#post-3347">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Also, try typing:<br /><br />in.. (and hold the v down for a sec and then let go.. )<br /><br />you get:  invvvvvvvvv                     INVOKE            <br /><br />Just pointing out the bug...<br /><br />NaN</div>
    <div class="meta">Posted on 2001-08-09 18:17:43 by NaN</div>
   </div>
   <div class="post" id="post-3349">
    <div class="subject"><a href="#post-3349">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">MaN,<br /><br />Thanks for the feedback, thats what I need to get<br />it working right.<br /><br />Suggestion 1.)<br /><br />I'm working on the code to nest .if's &amp; .while's.<br /><br />Suggestion 2.)<br /><br />&quot;loopK_AT_THIS&quot;.<br /><br />I just need to include the p in the match field<br />for the loop group.<br />loop instead of loo.<br /><br />&quot;movv&quot;<br /><br />That was one of my concerns that the user would<br />enter a varable name with the same prefix as a<br />Keyword. I'll have to think about that one.<br /><br />Suggestion 2.) last part<br /><br />I will probably put that in as an option, because<br />I want to keep it as automated as posible.<br /><br />Thanks,<br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-09 18:38:39 by Ewayne</div>
   </div>
   <div class="post" id="post-3351">
    <div class="subject"><a href="#post-3351">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">At least you get something meaningful INVOKE<br />instead of invvvvvvvvv. :grin: <br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-09 18:46:15 by Ewayne</div>
   </div>
   <div class="post" id="post-3353">
    <div class="subject"><a href="#post-3353">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Why don't you transverse the MASM grammar, and limit the possible input by that context?  It's very similar to creating the front-end of an assembler. :grin:</div>
    <div class="meta">Posted on 2001-08-09 19:28:08 by bitRAKE</div>
   </div>
   <div class="post" id="post-3355">
    <div class="subject"><a href="#post-3355">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">I thought about that, but what if someone wanted<br />to enter jmptopatch. Would it not make some folks<br />angry if they could not enter what they wanted to.<br /><br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-09 20:02:07 by Ewayne</div>
   </div>
   <div class="post" id="post-3356">
    <div class="subject"><a href="#post-3356">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Why wouldn't that be possible?  Anything that MASM could parse the front-end could parse.  <em>If you programmed it like I suggest.</em>  It's involved to create, but you seem to have the time and drive. :)  Use the BNF grammar in the appendix of the documentation of MASM to create a context tree.  Each leaf in the tree points to lists and functions.  Many things could be done with this code: <em>smart</em> highlighting / completion, real-time nonlinear assembler :), detect all syntax errors before the code goes to the assembler.<br /><br />I've been slowly working on the idea myself.  I'm concerned about creating something that is easy to modify / add or fix features.  Maybe, I'll code it in a HLL?  Or, I need to create the tools to build the grammar tree from the BNF?  <strong>NaN</strong>'s object work should really help me, too. :)</div>
    <div class="meta">Posted on 2001-08-09 20:04:25 by bitRAKE</div>
   </div>
   <div class="post" id="post-3367">
    <div class="subject"><a href="#post-3367">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Side Note... Its getting even more powerful :) :grin: :)<br /><br />I revamped the macros a touch and upgraded the CString and CFile classes.  To handle InString search, and InFile Search...   (only took about 10 lines of code + hutches BMB Search algorithm.)<br /><br />So now if i have a sample file like this (openme.txt):<br /><pre><code>&#91;NAN&#93;<br />01 rum and cokes!<br /><br />&#91;IMPORTANT&#93;<br />101 Intro to CPU'n - Hurray!<br />I have the correct lines of data!<br /></code></pre><br /><br />This is the code needed to seach for hearders like an INI file.<br /><pre><code> mov hFile1, $NEWOBJECT&#40; CFile, SADD&#40;&quot;openme.txt&quot;&#41;, CFILE_READ, 64 &#41;<br /> <br /> METHOD hFile1, CFile, InFile, SADD&#40;&quot;&#91;IMPORTANT&#93;&quot;&#41;<br /> .if&#40;eax==TRUE&#41;<br />    METHOD hFile1, CFile, LoadData, addr AData, SIZEOF ASTRUCT  <br /> .endif<br /> <br /> METHOD hFile1, CFile, SetFileOffset, NULL<br /> METHOD hFile1, CFile, InFile, SADD&#40;&quot;&#91;NAN&#93;&quot;&#41;<br /> .if&#40;eax==TRUE&#41;<br />    METHOD hFile1, CFile, LoadData, addr AData2, SIZEOF ASTRUCT<br /> .endif<br /> DESTROY hFile1<br /></code></pre><br /><br />AData1 and AData2 is a four-byte structure...  (playing around a bit here)..  I find  first, Load 4 bytes of data into a memory stucture, then i reset the offset pointer, and search for the  and do the same..<br /><br />The last bit of test code is:<br /><pre><code> xor eax, eax<br /> mov al, AData.d1<br /> DPrintValH eax, &quot;D1&quot;<br /> mov al, AData.d2<br /> DPrintValH eax, &quot;D2&quot;<br /> mov al, AData2.d1<br /> DPrintValH eax, &quot;D3&quot;<br /> mov al, AData2.d2<br /> DPrintValH eax, &quot;D4&quot;<br /></code></pre><br /><br />So im mixing the first 2 bytes of each loaded header data to produce the current year.. (20 + 01) or 2001. :)<br /><br />Kinda pointless.. but eh.. doesnt take much work to do anymore :)<br /><br />NaN</div>
    <div class="meta">Posted on 2001-08-09 22:56:51 by NaN</div>
   </div>
   <div class="post" id="post-3370">
    <div class="subject"><a href="#post-3370">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Here is a quit little example of the new macro's. I made 4 extra  macros that have the same purpse (to the METHOD routine).  They are $EAX(), $EBX(), $EDI(), $ESI().<br /><br />The reason for this is when doing in-line macro's i found that if you have more than one inline macro, the later over writes the first before the method/function is called. (MASM will write the macro code first, then the function it was found in).<br /><br /><pre><code>invoke MessageBox, NULL, $METHOD&#40;hString, CString, Address&#41;, \<br />                      $METHOD&#40;hString, CString, Address&#41;, MB_OK</code></pre><br />will turn into this:<br /><pre><code><br />  .. Macro code..<br />  EAX == String 1 address<br />  .. Macro code..<br />  EAX == String 2 address<br /><br />  invoke MessageBox, NULL, eax, eax, MB_OK</code></pre><br /><br />Thus, I get only String 2 displayed in both fields..<br /><br />The above solution allows the return to NOT be eax (and does no protection incase of eax is corrupted..)  So long story short, if you only want one inline method macro.. use $EAX().. <br /><pre><code>invoke MessageBox, NULL, $EAX&#40;hString, CString, Address&#41;, SADD&#40;&quot;NaN!&quot;&#41;, MB_OK</code></pre><br /><br />If you want to do multiple ones, use $EDI(), $ESI(), $(EBX),  and if still needed $EAX() last to preserve eax for the function they are in-line with...<br /><br />Anywho.. on with the example...<br /><pre><code> mov hFile1, $NEWOBJECT&#40; CFile, SADD&#40;&quot;openme1.txt&quot;&#41;, CFILE_READ, 64 &#41;<br /> mov hFile2, $NEWOBJECT&#40; CFile, SADD&#40;&quot;openme2.txt&quot;&#41;, CFILE_READ, 64 &#41;<br /><br />push esi<br />push edi<br /><br />invoke MessageBox, NULL, \<br />           $ESI&#40;hFile1, CFile, ReadLine&#41;, \<br />           $EDI&#40;hFile2, CFile, ReadLine&#41;, \<br />           MB_OK<br /><br />pop edi<br />pop esi<br /><br />DESTROY hFile1<br />DESTROY hFile2</code></pre><br /><br />This will load the first line of file 1 and display it as the message, with the first line of file 2 as the caption in the message box..<br /><br />I have also provided <strong>SetMethod</strong> and <strong>ReleaseMethod</strong> macros which simply push's ebx, esi, edi, and pop's them respectively.  I didnt want to cram alot of overhead into the method calls.. so i left out pushing and poping these in the $() macro's..<br /><br />Actually if people are worried about overhead.. every method gets translated, (worst case ~ no parameters) into 3 lines of code:<br /><br />mov edx, hFile<br />push edx<br />call <br /><br />parameters, like invokes will add more pushes...<br /><br />Anywho.. this is not my thread... so as excited as i am with all this new stuff, i will surrender the floor back to Ewayne and his work. <br /><br />BTW: Ewayne, if you think you may have a need for objects and unsure how to start with this, E-Mail/post me a message, and i will happily work out some solutions for you (if i can).<br /><br />NaN</div>
    <div class="meta">Posted on 2001-08-09 23:23:07 by NaN</div>
   </div>
   <div class="post" id="post-3373">
    <div class="subject"><a href="#post-3373">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Nan,<br /><br />I was starting to get a little confused about<br />what you were talking about and the conection to<br />my Type Ahead routine.<br />:confused: <br />But it looks like all good stuff anyway.<br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-09 23:56:00 by Ewayne</div>
   </div>
   <div class="post" id="post-3407">
    <div class="subject"><a href="#post-3407">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Sorry, it doesnt directly...  Im only trying to advertise its usefullness if there is merit for it... there may not be any, but then again, maybe there is...<br /><br />Really you need to examine the work ahead of you and decide if there is parts that would be better suited for OOP..  The CFile class i just finished has parsing routines withing using hutch's BMB search, this may be an asset reducing work..  Since its a class i can make many unique instances and open many files at once.  Since they are all of the same type of class, they will all have the same method names, so functions don't need to &quot;know&quot; exactly which file its working with when called...<br /><br />I really dont know how your code works (abstractly), so i can't give you suggestions, but i do know your loading and comparing strings..  <br /><br />Anywho, i was only offering what i know if you think you need it..  I think your work so far is good as is.. but it looks like its a big enough project, and my experience with bigger projects suggest the OOP models are better managed...<br /><br />NaN</div>
    <div class="meta">Posted on 2001-08-10 15:50:29 by NaN</div>
   </div>
   <div class="post" id="post-3412">
    <div class="subject"><a href="#post-3412">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">NaN<br />Thanks for the info.<br /><br />I would like to keep the code plain assembler as<br />much as posible, plus I know nothing about Ally<br />OOP.<br /><br />I fixed the nested .if's &amp; .while's problem.<br /><br />I put the routine in my AsmEdit program and <br />entering new code works good except if there is<br />a label or variable with the same prefix as a <br />Keyword. I need to come up with a fairly easy<br />solution.<br /><br />I might take your suggestion with the<br />highlighting or bitRAKE's or my own, still<br />thinking.<br /><br />Right now on working on a fix to enter code in an<br />existing program or routine and get the proper<br />indent.<br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-10 16:32:55 by Ewayne</div>
   </div>
   <div class="post" id="post-3425">
    <div class="subject"><a href="#post-3425">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Its all good :)<br /><br />However, you now have me a bit inspired... Im doing a cheap verion of the same type of idea.. (except im heading towards the coloring ahead i talked about above)..  Not to challenge you, but to more or less see how well my existing classes would hold up to such a project...  <br /><br />I have the search routine done, works well in debugger mode.  But im having a f'n frustrating time with rich edit itself..  <br /><br />Im using the ENM_KEYEVENTS to catch WM_CHAR events, and then work on them...  the problem is when i try to select and replace portions of text i get what i select.. but i alway end up with the character pressed after my handler finishes...  <br /><br />Long story short, i need my handler to kick in AFTER the char is placed and recognized in memory..   any suggestions how to handle this better??<br /><br />Example:<br /><br />If i type:  inv<br /><br />the prgram recognizes it as 'invoke' and replaces the last 3 from the cursor postion.  But the problem is this, i get the last char placed after this..<br /><br />invokev  <br /><br />???<br />Anythoughts?<br /><br />I wrote a test routine to replace each new char with &quot;#'.. this is its output: (typing 'abcd' )<br /><br />#a<br />##b<br />###c<br />####d<br /><br /><br />NaN<br />NaN</div>
    <div class="meta">Posted on 2001-08-10 20:07:55 by NaN</div>
   </div>
   <div class="post" id="post-3428">
    <div class="subject"><a href="#post-3428">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">NaN<br /><br />I had the same problem, what I done to overcome<br />is was to intercept the WM_CHAR and save the<br />wparam and then send that plus the wparam of<br />WM_KEYUP when that message is received, I only<br />use the wparam of WM_CHAR for special characters.<br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-10 21:22:06 by Ewayne</div>
   </div>
   <div class="post" id="post-3432">
    <div class="subject"><a href="#post-3432">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">I haven't done it, so I hate opening my mouth just yet, but what about processing selection change messages?  It certainly seems like it would be harder, but offer a great deal more flexiblity?  Like if you backspace and try a new keyword, or do some cut-n-paste and edit the structure references.  The auto-complete could take take into account the adjacent text.</div>
    <div class="meta">Posted on 2001-08-10 21:40:45 by bitRAKE</div>
   </div>
   <div class="post" id="post-3434">
    <div class="subject"><a href="#post-3434">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">bitRAKE<br /><br />That might be a good idea, I already have<br />selection change in my AsmEdit program, I'll<br />check it out.<br /><br />Thanks,<br /><br />Ewayne</div>
    <div class="meta">Posted on 2001-08-10 21:59:42 by Ewayne</div>
   </div>
   <div class="post" id="post-3438">
    <div class="subject"><a href="#post-3438">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">Thanx for the tip...<br /><br />Between you and me,  I think monkeys designed the message structure of Rich Edit :rolleyes: <br /><br /><img src="http://www.sandiegozoo.org/postcards/pix/zoo_card-35bc4b0988006.jpg" /> <br /><br />:stupid: <br />NaN</div>
    <div class="meta">Posted on 2001-08-10 23:11:14 by NaN</div>
   </div>
   <div class="post" id="post-3440">
    <div class="subject"><a href="#post-3440">TypeAhead  (Entering asm &amp; API code)  Update</a></div>
    <div class="body">I don't think the monkeys you speak of were so cute. :)</div>
    <div class="meta">Posted on 2001-08-10 23:21:29 by bitRAKE</div>
   </div>
  </div>
 </body>
</html>