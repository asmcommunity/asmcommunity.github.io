<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>ToC of a FDD/HDD? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9283" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=9283">ToC of a FDD/HDD?</a></p>
   <div class="post" id="post-68442">
    <div class="subject"><a href="#post-68442">ToC of a FDD/HDD?</a></div>
    <div class="body">my mp3Player is almost done now, so i started another project. :cool:<br />i started playing around with the master boot record (mbr) of a floppy. i created some bootcode and wrote &quot;hello world&quot; on the screen - at bootup. finally i thought of making some kind of a OS. so i want to launch my core by reading it from the disk and jumping to the entry point.<br /><br />i can read the TOC of the disk and i printed it on the screen, but i can't interpret it - where do i really (which C.H.S) get this file?<br />i've searched the board &amp; the internet for it, but couln't find matching things.<br />does anyone have related links or tipps/suggestions?</div>
    <div class="meta">Posted on 2002-12-01 10:29:51 by hartyl</div>
   </div>
   <div class="post" id="post-68448">
    <div class="subject"><a href="#post-68448">can you post your mp3 player</a></div>
    <div class="body">please post your mp3 player please<br />thanks</div>
    <div class="meta">Posted on 2002-12-01 11:09:20 by Thor0Asgard</div>
   </div>
   <div class="post" id="post-68647">
    <div class="subject"><a href="#post-68647">ToC of a FDD/HDD?</a></div>
    <div class="body">i can't upload anything, becaus my IE would hang the system.<br />but i still want to know how i can interpret the (&amp; get) the ToC of a FDD or HDD!</div>
    <div class="meta">Posted on 2002-12-02 12:53:53 by hartyl</div>
   </div>
   <div class="post" id="post-68652">
    <div class="subject"><a href="#post-68652">ToC of a FDD/HDD?</a></div>
    <div class="body"><strong>Thor0Asgard</strong>, I have attached three mp3-players. Not very pretty<br />to look at. But they play mp3's(none coded by me).</div>
    <div class="meta">Posted on 2002-12-02 13:07:03 by natas</div>
   </div>
   <div class="post" id="post-68653">
    <div class="subject"><a href="#post-68653">ToC of a FDD/HDD?</a></div>
    <div class="body">could you please stop converting my &quot;ToC of a FloppyDisk&quot;-thread into a mp3Player-thread?<br />thanks.</div>
    <div class="meta">Posted on 2002-12-02 13:30:39 by hartyl</div>
   </div>
   <div class="post" id="post-68654">
    <div class="subject"><a href="#post-68654">ToC of a FDD/HDD?</a></div>
    <div class="body"><strong>Hartyl</strong>, dont get all crazy on me now? this is not<br />the first thread were someone asks a question wich<br />jumps out of the topic? so lighten up. ( :) )<br /><br />Anyway, you say you have searched all over the net etc.<br />Well have you checked out this webpage?<br /><a target="_blank" href="http://www.programmersheaven.com/zone5/cat469/index.htm">http://www.programmersheaven.com/zone5/cat469/index.htm</a><br />I think you should be able to find anything you need there.</div>
    <div class="meta">Posted on 2002-12-02 13:52:50 by natas</div>
   </div>
   <div class="post" id="post-68777">
    <div class="subject"><a href="#post-68777">ToC of a FDD/HDD?</a></div>
    <div class="body">Hi, <br /><br />since this job is really interesting I recommed two things.<br />- first search the web for &quot;FatFormat.pdf&quot; from M$- second search the board for &quot;MenuetOS&quot; which is the <br />  first step just to get an idea of coding an own OS which <br />  as far as I remember already includes FAT support.<br /><br />Bye Miracle</div>
    <div class="meta">Posted on 2002-12-03 04:17:49 by miracle</div>
   </div>
   <div class="post" id="post-68852">
    <div class="subject"><a href="#post-68852">ToC of a FDD/HDD?</a></div>
    <div class="body">no problem at all - but i didn't like it, that the first answer i heard, was offtopic...<br /><br />SURE! why didn't i think of it myself? a fdd/hdd uses the FATFormat - i've always searched for &quot;read ToC of Floppy&quot; or fimilar. brilliant idea! i already got menuetOS (brilliant thing too), but i don't want to copy it, and i want to completely understand what i'm doing.</div>
    <div class="meta">Posted on 2002-12-03 12:54:00 by hartyl</div>
   </div>
   <div class="post" id="post-68861">
    <div class="subject"><a href="#post-68861">ToC of a FDD/HDD?</a></div>
    <div class="body"><a target="_blank" href="http://www.nondot.org/sabre/os/articles">Operating System Resource Center</a><br /><br />The floppy disk may or may not be formatted in FAT12. The only real way to detect what format a floppy disk is in is to try all the various ways a floppy disk can be formatted... FAT12 seems to be the PC standard though.<br /><br />As for the hard disk, there is also a standard for it. In the MBR, offset 0x01BE through offset 0x01FD is the 64 byte partition table (old standard). Starting at 0x01BE, the partitions are 16 bytes long and there are 4 of them.<br /><br />Sounds easy, but you are stepping into a world of hurt by worrying about such things in the order of creating an operating system.<br /><br /><u>Typical First Steps</u><br />-Hard Code a simple floppy bootsector in assembly, it doesn't have to be dynamic, it can know how big your kernel is in size and where it is on the floppy disk and where to load it to.<br /><br />-Write a Kernel in Assembly, C, or Both... but remember not to #include any files when you are doing C since your kernel will not support libraries... not yet at least.<br /><br />-Decide what processor you will first run it on, and what possible modes of the processer... (i.e. intel 80386 in 16-bit segmented mode, intel 80386 in 16-bit flat-unreal mode, intel 80386 in 32-bit protected mode)<br /><br />-In case of 32-bit protected mode, you will need a Global Descriptor Table, this tells how memory is split up and what kind of code can execute it or call it. Currently, there are 4 levels called &quot;Rings&quot;. Ring-0 is the highest level and is considered Kernel Mode execution. Ring-3 is the lowest level and is considered Application Mode execution. Ring-1 and Ring-2 can be used by adds for extra wait cycles and confusion.<br /><br />-Intel Architecture is interrupt driven, there are <strong>exceptions</strong> (internal to the CPU), and <strong>interrupts</strong> (external to the CPU). <strong>Exceptions</strong> are usually triggered by INT, BOUND or processor errors. <strong>Interrupts</strong> are triggered by hardware externel to the CPU, which could be from RAM in case of data parity errors and many other things as well. The IDTR (Interrupt Descriptor Table Register) holds the offset in memory of the IDT (Interrupt Descriptor Table) base. The IDT is a series of 4-byte tables in 16-bit real/unreal mode (In which case it is called the IVT and is mapped by the BIOS from boot), or a series of 8-bytes tables in 32-bit protected mode. Exceptions and Interrupts are indexed from the base of the IDT, this indices points to an offset in memory in which the actual code to process the exception/interrupt exists. Think of the IDT as one giant CALL table. The IDT and its handlers are the key to how well your operating system development will proceed.<br /><br />-Video and User I/O should be next on the list. This is where operating system begins to become more of an artform than a science, there are dozens of ways to implement video and user I/O.<br /><br />-Finally you will get to Drive I/O which beyond the standards for reading a disk/disc drive, is even more of an artform... there are hundreds of ways to implement this.<br /><br />I do not expect you to understand all this stuff yet, but you can come back and use this as you learn more and more.<br /><br />PS: I've heard of a tool called <a target="_blank" href="http://www.varianmusic.com/xinix/">Kernel Builder</a>, it is suppose to help you make a kernel easily... but don't ask me how it works... never used it.</div>
    <div class="meta">Posted on 2002-12-03 13:33:49 by SpooK</div>
   </div>
   <div class="post" id="post-68872">
    <div class="subject"><a href="#post-68872">ToC of a FDD/HDD?</a></div>
    <div class="body">you wrote down exactly what i thought about to do (even in the same order :))!<br />i don't have enough time yet, to try this, but i will! i've actually started writing my bootcode loading my core (i wont call it kernel, sounds like &quot;kern?l&quot; :)) i already know about the main structure of an OS (the exeptions, interrupts, IVT, etc.). <br />but i want to develop it on my own; indeed, i want no sample code. datasheets like the fatformat.pdf sould be the only information for me :)</div>
    <div class="meta">Posted on 2002-12-03 14:59:16 by hartyl</div>
   </div>
   <div class="post" id="post-68882">
    <div class="subject"><a href="#post-68882">ToC of a FDD/HDD?</a></div>
    <div class="body">I don't call mine the &quot;kernel&quot; either... I call it the &quot;core&quot;.<br /><br />I am working on an Operating System myself... have been for about 9 months on and off. So far it has been 100% assembly (NASM/hand translated). I have about 75% of a CUI (Console User Interface) done, what type of card is installed (Monochrome/CGA/EGA/VGA), it knows what the base of video memory is depending on what card is installed, what mode the card is in, moves the console cursor, accepts keyboard input, has a command buffer, and is entirely from my ideas.<br /><br />Next step is to implement basic drive I/O, advanced drive I/O, and filesystem recognition.<br /><br />GL with your OS.<br /><br />PS: Anything OS Design/Implementation specific goes into The Heap :)</div>
    <div class="meta">Posted on 2002-12-03 15:59:17 by SpooK</div>
   </div>
  </div>
 </body>
</html>