<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Zero terminated string and WriteConsoleA - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14211" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14211">Zero terminated string and WriteConsoleA</a></p>
   <div class="post" id="post-109926">
    <div class="subject"><a href="#post-109926">Zero terminated string and WriteConsoleA</a></div>
    <div class="body">Hi,<br /><br />when I call WriteConsoleA with a zero terminated string i get an incorrect output.<br /><br /><pre><code><br />szWriteText 	db 'Hello, world!&quot;, 0<br /><br />push	0<br />push	0<br />push	16d<br />push	offset szWriteText<br />push	hStdout<br />call	WriteConsoleA<br /></code></pre><br /><br /><br />Output: &quot;Hello, world!    t&quot;<br />Why is there a <strong>t</strong> at the end? :)<br /><br /><pre><code><br />sWriteText	db 'Hello, world!'<br /><br />push	0<br />push	0<br />push	16d<br />push	offset sWriteText<br />push	hStdout<br />call	WriteConsoleA<br /></code></pre><br />Output: &quot;Hello, world!&quot;<br />Correct. Good but why? :)<br /><br />Regards,<br />Paris</div>
    <div class="meta">Posted on 2003-07-10 02:12:40 by Parasight</div>
   </div>
   <div class="post" id="post-109930">
    <div class="subject"><a href="#post-109930">Zero terminated string and WriteConsoleA</a></div>
    <div class="body">don't need zero terminate . <br />your string wants to print have length is 13d.<br />why do you?<br /><pre><code><br />push	16d<br /></code></pre><br /><br />it is <br /><pre><code><br />push	13d<br /></code></pre><br /><br />SC</div>
    <div class="meta">Posted on 2003-07-10 03:10:40 by h4ng4m3</div>
   </div>
   <div class="post" id="post-109931">
    <div class="subject"><a href="#post-109931">Zero terminated string and WriteConsoleA</a></div>
    <div class="body">Parasight, WriteConsole doesn't stop at NUL, it stops when it has written the amount of bytes you tell it to. Pushing a hardcoded 16 == pretty bad code.</div>
    <div class="meta">Posted on 2003-07-10 03:22:44 by f0dder</div>
   </div>
   <div class="post" id="post-109932">
    <div class="subject"><a href="#post-109932">Zero terminated string and WriteConsoleA</a></div>
    <div class="body">Thanks! Pardon my stupidity ;)</div>
    <div class="meta">Posted on 2003-07-10 03:38:19 by Parasight</div>
   </div>
   <div class="post" id="post-109942">
    <div class="subject"><a href="#post-109942">Zero terminated string and WriteConsoleA</a></div>
    <div class="body">Parasight,<br /><br />You can use the StdOut function from the masm32 lib. :)</div>
    <div class="meta">Posted on 2003-07-10 04:29:32 by Vortex</div>
   </div>
  </div>
 </body>
</html>