<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Bootsector - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2394" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2394">Bootsector</a></p>
   <div class="post" id="post-15184">
    <div class="subject"><a href="#post-15184">Bootsector</a></div>
    <div class="body">Hossa<br /><br />how can i code a function that makes a backup of my actual bootsektor ?<br />Someone has information on this or a idea how to do it ?<br />I try hours searching infos on this and found only how to destroy my bootsector but now how to safe them to disk :-(<br /><br />norton use such a function to protect the bootsector and i like to understand and code such a function ,too :-)<br /><br />Thanks</div>
    <div class="meta">Posted on 2001-12-17 04:35:39 by Max</div>
   </div>
   <div class="post" id="post-15185">
    <div class="subject"><a href="#post-15185">Bootsector</a></div>
    <div class="body">Under NT and above, it's oh so very easy. You simply use CreateFile<br />with a special name (\\.\PHYSICALDRIVE0), and you can read (and<br />possibly write?) your drive directly... have a look at the CreateFile<br />PlatformSDK infomation.<br /><br />Under 9x I dunno, but I guess you'd have to write a VxD or mess <br />with the thunk stuff - I believe there were some earlier posts here<br />on thunking.</div>
    <div class="meta">Posted on 2001-12-17 04:40:10 by f0dder</div>
   </div>
   <div class="post" id="post-15188">
    <div class="subject"><a href="#post-15188">Bootsector</a></div>
    <div class="body">Hossa<br /><br />youre magic arent you ?<br />because i press on post message and when the page refreshed i see your posting as answer :-)<br />very fast.<br /><br />hm im using win98 and at this time i try to translate the word &quot;thunking&quot; to find more info on what you told me.<br /><br />when i understand you right ,there is a &quot;api&quot; call for read/write the bootsector.<br />so i think its better to make a hook on it and dont allow any changes to it ,if user press the forbidden button.<br /><br />i will see what i find and post infos here<br /><br />Thanks</div>
    <div class="meta">Posted on 2001-12-17 04:48:09 by Max</div>
   </div>
   <div class="post" id="post-15196">
    <div class="subject"><a href="#post-15196">Bootsector</a></div>
    <div class="body">maybe <br /><a target="_blank" href="http://www.nondot.org/sabre/os/articles/TheBootProcess/">this link</a> will help:</div>
    <div class="meta">Posted on 2001-12-17 07:36:42 by mob</div>
   </div>
   <div class="post" id="post-15209">
    <div class="subject"><a href="#post-15209">Bootsector</a></div>
    <div class="body">Max, about reading MBR reading under W95,<br />you could take a look to my stupid program.<br /><br />To read the MBR i've chose this way:<br /><br />1-Created a 16bit dll where i've put a function that perfomr a call to DPMI service int31h that can emulate a call to bios int13h physical sector reading.<br />2-From32 bit code i call the function inside the 16bit dll, using the undocumented QT_Thunk function.<br /><br />What i've done is translating to asm one of the many C examples.<br /><br />There will probably be some faster trik that some wizard of asm know.<br /><br />My program is in development :) but if you do &quot;Tools-&gt;Edit Sector-&gt;Read Sector&quot;, you will see your MBR.<br /><br />Hope it help, Good Luck ! :alright:</div>
    <div class="meta">Posted on 2001-12-17 12:25:28 by Bit7</div>
   </div>
   <div class="post" id="post-15287">
    <div class="subject"><a href="#post-15287">Bootsector</a></div>
    <div class="body">----------<br />Max, about reading MBR reading under W95, <br />you could take a look to my stupid program. <br />----------<br /><br />Stupid Program ?!?<br />whoa wish it was from me ;)<br /><br />your tool is very usefull for me ,im shure if you publish it you get good responce.<br /><br />i use now 2 com files (found in web) who save/write the bootsector but i like it more if i understand what exactly happend so i start soon learning more about the bootsector :)<br /><br />Thanks</div>
    <div class="meta">Posted on 2001-12-18 07:52:26 by Max</div>
   </div>
  </div>
 </body>
</html>