<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>InString blues - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=20022" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=20022">InString blues</a></p>
   <div class="post" id="post-153516">
    <div class="subject"><a href="#post-153516">InString blues</a></div>
    <div class="body">I have some code which calls InString within a nested loop.<br />Psuedocode looks something like:<br /><br /><pre><code><br />while not Done,<br />    fetch a line of text from textfile<br />    break if we failed to read a line of text     <br />    for each string in stringarray,<br />        if string is a substring of textline<br />           do something<br />        endif<br />    endfor<br />endwhile<br /></code></pre><br /><br />InString is crashing after several iterations... any ideas?<br />(If I comment out the InString compare, everything is groovy - also, I have no registers that I don't mind clobbering aside from ebp/esp, so whats going on?)</div>
    <div class="meta">Posted on 2004-11-30 21:58:13 by Homer</div>
   </div>
   <div class="post" id="post-153519">
    <div class="subject"><a href="#post-153519">InString blues</a></div>
    <div class="body">I have just replaced it with Hutch's InStringx variant procedure.<br />The problem is gone - I can only assume InString either messes up the stack or clobbers the stack pointer...<br /><br />Was InString replaced in any recent version of the masm lib?</div>
    <div class="meta">Posted on 2004-11-30 22:19:32 by Homer</div>
   </div>
   <div class="post" id="post-153521">
    <div class="subject"><a href="#post-153521">InString blues</a></div>
    <div class="body">EvilHomer2K, the code you have posted looks well. Post your code to let us see if we can help you. <br /><br />Some comment to find where the problem is:<br /><br />- Check what happend if Done==TRUE at the end of loop<br />- InString is a 1 based character index, so check what do you do to create the line of text (example: replacing CRLF with NULL may be cause an error).<br />- Check what happend with flags and values while comparing ocurre.<br /><br />I am trying to imagine some common errors, and if I post every thing that can be causing the problem, I will be writing for ever, so please, post the code.</div>
    <div class="meta">Posted on 2004-11-30 22:42:27 by Kecol</div>
   </div>
   <div class="post" id="post-153533">
    <div class="subject"><a href="#post-153533">InString blues</a></div>
    <div class="body">Scratch this post, I made a simple addressing error.</div>
    <div class="meta">Posted on 2004-12-01 05:35:07 by Homer</div>
   </div>
  </div>
 </body>
</html>