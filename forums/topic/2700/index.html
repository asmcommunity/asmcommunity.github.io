<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>C exe Size - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2700" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2700">C exe Size</a></p>
   <div class="post" id="post-17182">
    <div class="subject"><a href="#post-17182">C exe Size</a></div>
    <div class="body">ACtually my first question here is unrelated:<br /><br />How to center a window? Isn't there a WS_CENTERWINDOW or something? I can't find it on MSDN.<br /><br />Main question:<br /><br />Somebody (I think it was bitRAKE) said something about somebody (I think it was f0dder) knew how to make C progs smaller in exe size. Can I get an explanation (or the likes) on that?<br /><br />thanks</div>
    <div class="meta">Posted on 2002-01-01 21:48:39 by lackluster</div>
   </div>
   <div class="post" id="post-17184">
    <div class="subject"><a href="#post-17184">C exe Size</a></div>
    <div class="body">Well, for the biggest reduction...<br /><br />Compile your C programs in a C compiler like lcc. Not a C++ compiler.<br /><br /><pre><code>C   &#58; 3kb<br />C++ &#58; 50kb</code></pre></div>
    <div class="meta">Posted on 2002-01-01 22:32:50 by ChimpFace9000</div>
   </div>
   <div class="post" id="post-17186">
    <div class="subject"><a href="#post-17186">C exe Size</a></div>
    <div class="body"><pre><code><br />CenterScreen proc hwnd&#58;HWND<br />LOCAL DlgHeight&#58;DWORD<br />LOCAL DlgWidth&#58;DWORD<br />LOCAL DlgRect&#58;RECT<br />LOCAL DesktopRect&#58;RECT<br />     <br />     invoke GetWindowRect,hwnd,ADDR DlgRect<br />     invoke GetDesktopWindow<br />     mov ecx,eax<br />     invoke GetWindowRect,ecx,addr DesktopRect<br />     push 0<br />     mov eax,DlgRect.bottom<br />     sub eax,DlgRect.top<br />     mov DlgHeight,eax<br />     push eax<br />     mov eax,DlgRect.right<br />     sub eax,DlgRect.left<br />     mov DlgWidth,eax<br />     push eax<br />     mov eax,DesktopRect.bottom<br />     sub eax,DlgHeight<br />     shr eax,1<br />     push eax<br />     mov eax,DesktopRect.right<br />     sub eax,DlgWidth<br />     shr eax,1<br />     push eax<br />     push hwnd<br />     call MoveWindow<br />     ret<br />CenterScreen endp<br /></code></pre><br /><br />Iczelion wrote this one in one of his tuts...</div>
    <div class="meta">Posted on 2002-01-01 23:51:58 by JimmyClif</div>
   </div>
   <div class="post" id="post-17187">
    <div class="subject"><a href="#post-17187">C exe Size</a></div>
    <div class="body">Talk about size, check out the 512 byte OpenGL Demo on the Hugi Disk Mag 24!</div>
    <div class="meta">Posted on 2002-01-02 00:10:12 by bitRAKE</div>
   </div>
   <div class="post" id="post-17188">
    <div class="subject"><a href="#post-17188">C exe Size</a></div>
    <div class="body"><div class="quote"><br />Compile your C programs in a C compiler like lcc. Not a C++ compiler. <br /></div><br /><br />That makes no difference, as long as you know your compiler+linker<br />settings, and code &quot;properly&quot;.<br /><br />I bet some of the &quot;how to get stuff small&quot; threads pop up if you<br />search the board for FILEALIGN .<br /><br />And as for the 512byte hugi thingy... that probably isn't compatible<br />with all windows versions, making it useless (but still fun ;) )</div>
    <div class="meta">Posted on 2002-01-02 00:11:43 by f0dder</div>
   </div>
   <div class="post" id="post-17191">
    <div class="subject"><a href="#post-17191">C exe Size</a></div>
    <div class="body">He did versions for compatiblity.  (Even XP)  :rolleyes:<br />It's cool for 512 bytes - check it out!</div>
    <div class="meta">Posted on 2002-01-02 00:58:52 by bitRAKE</div>
   </div>
   <div class="post" id="post-17207">
    <div class="subject"><a href="#post-17207">C Win32 EXE Size</a></div>
    <div class="body">Contrary to popular belief a C\Win32 EXE can be as small as<br />an ASM\Win32 EXE.<br /><br />The methods employed to create compact C\Win32 EXE's are:-<br /><br />--File alignment (Linker setting)<br /><br />--Optimise for size instead of speed (compiler setting)<br /><br />--Compile for DLL runtime library (on VC++ 6)<br /><br />--PE Segment merging (Not recommended)<br /><br />--Start-up code removal, ie define your own entry point<br /><br />--Intelligent coding (the hardest part)<br /><br />Using the above methods you can create a Win32 &quot;Hello World!&quot;<br />ie. display a message box, in under 2Kb.</div>
    <div class="meta">Posted on 2002-01-02 04:31:29 by fybo</div>
   </div>
   <div class="post" id="post-17285">
    <div class="subject"><a href="#post-17285">Do you have any examples of Small C programs</a></div>
    <div class="body">Using the above methods you can create a Win32 &quot;Hello World!&quot;<br />ie. display a message box, in under 2Kb. <br /><br />Hi FYBO<br /><br />Do you have maybe the Visual C++ workspace, and C fileof this 2 k Hello World, that you could share,if you can I know you have to<br />send then up as textfiles, or paste them on the board because , of the types of files allowed to be uploaded ,but that would be cool,<br />I tried to follow the things you said but I got loss,<br />But I'm kind of familiar with Visual C console projects<br /><br />Thanks Andy</div>
    <div class="meta">Posted on 2002-01-02 15:44:26 by andy981</div>
   </div>
   <div class="post" id="post-17297">
    <div class="subject"><a href="#post-17297">C exe Size</a></div>
    <div class="body"><strong>JimmyClif</strong>,<br /><br />Is that the only way to center a window? I mean I want it to start center screen, like when I do createwindow(ex) there's no like WS_EX_CENTERSCREEN style or anything?<br /><br />&lt;hr&gt;<br /><br />-Beware of Newbie Question-<br /><br />What exactly is FILEALIGN (looking for brief or in-depth explanation (or link))?</div>
    <div class="meta">Posted on 2002-01-02 19:01:30 by lackluster</div>
   </div>
   <div class="post" id="post-17299">
    <div class="subject"><a href="#post-17299">optimizing</a></div>
    <div class="body">If you want to optimize with visual C++ make sure you have at least the professional edition I have the standard eddition and I found it it dosen't include the optimizing compiler.</div>
    <div class="meta">Posted on 2002-01-02 19:37:11 by Quantum</div>
   </div>
   <div class="post" id="post-17300">
    <div class="subject"><a href="#post-17300">C exe Size</a></div>
    <div class="body">Well, I'm kinda poor so I only have borland's freecommandlinetools. :(</div>
    <div class="meta">Posted on 2002-01-02 19:40:28 by lackluster</div>
   </div>
   <div class="post" id="post-17305">
    <div class="subject"><a href="#post-17305">C exe Size</a></div>
    <div class="body">For an in-depth explanation of filealign, see the PE documentation.<br /><br />If you want a good free compiler, check out <a target="_blank" href="www.openwatcom.org">www.openwatcom.org</a> .<br />Watcom used to be the best compiler in the old days, and now that<br />it's free, it's probably at least the best *free* compiler.</div>
    <div class="meta">Posted on 2002-01-02 20:16:46 by f0dder</div>
   </div>
   <div class="post" id="post-17337">
    <div class="subject"><a href="#post-17337">thanx</a></div>
    <div class="body">thanx for that link fodder I've had it with the buggy lcc-win32</div>
    <div class="meta">Posted on 2002-01-03 00:32:38 by Quantum</div>
   </div>
   <div class="post" id="post-17342">
    <div class="subject"><a href="#post-17342">C exe Size</a></div>
    <div class="body"><strong>f0dder</strong>, that is very impressive.  The FTP has full docs, and can't wait to browse the source code.  SciTech is a nice group of people (I lived in Chico for five years, and met some of the people that worked there at the bars :)).  They did some work on NASM, too.</div>
    <div class="meta">Posted on 2002-01-03 01:14:09 by bitRAKE</div>
   </div>
   <div class="post" id="post-17351">
    <div class="subject"><a href="#post-17351">C exe Size</a></div>
    <div class="body">Sorry for the wait... I was busy killing na*is in RTCW ;)<br /><br />For the centering:<br /><br />I guess so :( afaik for normal CreateWindow it is.<br /><br />A Dialog on the other hand can get Centered using the <br />DS_CENTER (0x0800L) style.</div>
    <div class="meta">Posted on 2002-01-03 02:25:04 by JimmyClif</div>
   </div>
  </div>
 </body>
</html>