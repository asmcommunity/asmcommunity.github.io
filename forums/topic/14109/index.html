<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Countdown Timer to kill Window - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=14109" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=14109">Countdown Timer to kill Window</a></p>
   <div class="post" id="post-109041">
    <div class="subject"><a href="#post-109041">Countdown Timer to kill Window</a></div>
    <div class="body">How do I make it so when a Countdown Timer hits 0, it closes the main window and posts a messagebox notifying the user that the time is up.<br />I've tried this<br />        .if TimerVal==0<br />            Invoke KillTimer,hWin,TimerID<br />            Invoke MessageBox,NULL,Addr Toolong,Addr AppName,MB_OK<br />            Invoke ExitProcess,NULL<br />        .endif<br />and it runs the Window in the background and allows the user to still run the program by moving the messagebox. I've also tried<br />        .if TimerVal==0<br />            Invoke KillTimer,hWin,TimerID<br />            Invoke DestroyWindow,hWnd<br />            Invoke MessageBox,NULL,Addr Toolong,Addr AppName,MB_OK<br />            Invoke ExitProcess,NULL<br />        .endif<br />but this causes the MessageBox not to appear.<br /><br />How would I make it so the Message box comes up after the window closes?</div>
    <div class="meta">Posted on 2003-07-02 12:22:53 by EEDOK</div>
   </div>
   <div class="post" id="post-109043">
    <div class="subject"><a href="#post-109043">Countdown Timer to kill Window</a></div>
    <div class="body">.IF uMsg==WM_DESTROY<br />invoke MessageBox,NULL,addr AppName,addr AppName,MB_OK<br /><br />make message during WM_DESTROY</div>
    <div class="meta">Posted on 2003-07-02 12:32:16 by AceEmbler</div>
   </div>
   <div class="post" id="post-109044">
    <div class="subject"><a href="#post-109044">One more question</a></div>
    <div class="body">Thank you very much<br /><br />One more question, I got this function<br />mov eax, Val#<br />sub HP#,eax<br />a whole bunch of times can I make it into a proc so I could invoke it like this without getting whacked out values? Plus making them all use the same  sub function is something I'd also like.<br /><br />invoke DecHP, addr HP#, addr Val#</div>
    <div class="meta">Posted on 2003-07-02 12:39:44 by EEDOK</div>
   </div>
   <div class="post" id="post-109180">
    <div class="subject"><a href="#post-109180">Countdown Timer to kill Window</a></div>
    <div class="body">That would be no smaller. Push #+ Push #+ Call is 15 bytes, while mov eax, + sub ,eax is 11 bytes.</div>
    <div class="meta">Posted on 2003-07-03 13:39:22 by Sephiroth3</div>
   </div>
   <div class="post" id="post-109184">
    <div class="subject"><a href="#post-109184">Countdown Timer to kill Window</a></div>
    <div class="body">I'm not quite sure of what you want to do... I think you have a bunch of variables, all one next to the other, and a second similar group of variables, and you want to substract the first bunch from the second, is that it?<br />If that's so, you can do it in a loop, you can think of it as an array...<br /><br /><pre><code><br />push ebx<br />push esi<br />mov esi,offset HP<br />mov ebx,offset Val<br />.repeat<br />    lodsd<br />    sub &#91;ebx&#93;,eax<br />    add ebx,4<br />.until ebx &gt;= offset wherever_HP_vars_end<br />pop ebx<br />pop esi<br /></code></pre><br /><br />But it would only be useful if you really have a HUGE amout of variables...</div>
    <div class="meta">Posted on 2003-07-03 13:48:48 by QvasiModo</div>
   </div>
   <div class="post" id="post-109215">
    <div class="subject"><a href="#post-109215">Countdown Timer to kill Window</a></div>
    <div class="body">well it's more to protect my program from ppl that are cheating, cause I know if the comp and you, have the same functions to decrease health I'll have made it so they can't cheat :P</div>
    <div class="meta">Posted on 2003-07-03 22:35:23 by EEDOK</div>
   </div>
   <div class="post" id="post-109269">
    <div class="subject"><a href="#post-109269">Countdown Timer to kill Window</a></div>
    <div class="body">I'm sorry, I still can't follow you...</div>
    <div class="meta">Posted on 2003-07-04 19:18:10 by QvasiModo</div>
   </div>
   <div class="post" id="post-109272">
    <div class="subject"><a href="#post-109272">Countdown Timer to kill Window</a></div>
    <div class="body">umm I seen it used in games before, but they used a diff function, fsub I do believe, how is that used?</div>
    <div class="meta">Posted on 2003-07-04 22:45:06 by EEDOK</div>
   </div>
   <div class="post" id="post-109555">
    <div class="subject"><a href="#post-109555">Countdown Timer to kill Window</a></div>
    <div class="body">You mean you want some sort of checksum, so if a cheater changes the values but not the diff, you will kno what's going on? If that's so, you should use a better algo than simply substracting, or cheaters will find out how your scheme works and defeat it easily...</div>
    <div class="meta">Posted on 2003-07-07 09:50:45 by QvasiModo</div>
   </div>
   <div class="post" id="post-109578">
    <div class="subject"><a href="#post-109578">Countdown Timer to kill Window</a></div>
    <div class="body">nah that's too easy to bypass, cause they just nop the checksum(that's what I got right now), but I know they were unable to hack Grand Theft Auto 3 cause it used something like fsub and fsptr to make everyones health value use the same sub fuction. I just want to know how to do it.</div>
    <div class="meta">Posted on 2003-07-07 13:18:17 by EEDOK</div>
   </div>
   <div class="post" id="post-109658">
    <div class="subject"><a href="#post-109658">Countdown Timer to kill Window</a></div>
    <div class="body">I don't know much about cracking, but I think a program that's impossible to crack is a theorical impossibility... probably GTA3 is very hard to crack, but not impossible. Anyway, I think it does not matter much what instructions you use in your algo (fsub and the others are floating point instruction, by the way, there's a help file included un MASM32 that shows how to use those, FPHELP.HLP). GTA3 protection scheme could be based in the fact that since it's such a big game, you can basically hide dozens of checksums everywhere, making it very hard to crack...</div>
    <div class="meta">Posted on 2003-07-08 08:50:50 by QvasiModo</div>
   </div>
  </div>
 </body>
</html>