<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Assembling on DosBox - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30861" />
  <link rel="prev" href="../?id=30861&amp;page=2" />   </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=115">DOS &amp; BIOS</a> &raquo; <a href="../?id=30861">Assembling on DosBox</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=30861&amp;page=1" style="">&laquo;</a><a href="../?id=30861&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="30861" /><input type="number" name="page" min="1" max="3" step="1" value="3" onchange="this.form.submit();" /></form>   <div class="post" id="post-215886">
    <div class="subject"><a href="#post-215886">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote">Both MASM and TASM use this syntax (although TASM also offers an &#039;ideal&#039; mode, which is a slight variation).<br />Problem with assemblers like NASM is... I have never seen a proper definition of its syntax. Same with GAS. Yes, it uses AT&amp;T syntax, but I&#039;ve always found myself guessing what the syntax would be for some instructions. I have never seen a good reference for the entire instructionset, unlike Intel syntax, where the Intel manuals themselves ARE the reference.</div><br />Agreed. I&#039;ve recently had an unhappy experience with gas with the fsub bug (details at www.mindfruit.co.uk/2012/03/trouble-with-fsub.html) which has led me to want to abandon the assembler in favour of something else. Nasm seemed the best-supported, but I had some issues with its 64-bit RIP-relative addressing; YASM seemed to have better support in this area but my results were mixed (almost certainly the problem was BCAC, but the documentation is somewhat thin in this area). <br /><br />It turns out (ha, famous last words) that the unexpected behaviour I referred to in the Gnu assembler are not present when you use the .intel_syntax directive, so I&#039;m going to try that for size and see how it works out. I&#039;m looking forward to coding something in &quot;proper&quot; Intel syntax, and having documentation which is directly applicable to it. Of course, that is, until I hit the next bug...<br /></div>
    <div class="meta">Posted on 2012-03-13 06:33:07 by michaelg</div>
   </div>
   <div class="post" id="post-215887">
    <div class="subject"><a href="#post-215887">Re: Assembling on DosBox</a></div>
    <div class="body">Thanks for the reply, Frank.<br /><br />But geez, now I&#039;m so confused, many compilers when each person I ask says the different and opposes the others&#039;. I wanted to firstly use MASM because it seemed the simplest and classic way, also because my book has been suggesting to use that to have a good working field where I can the registers and my work generally.<br /><br />The thing is, if I do use MASM, I&#039;ll have to read tutorials about it, of how to work with it, considering that I might waste my time and it won&#039;t be such a good source, but that&#039;s how it goes, gotta risk it. From what Scali talks of, I understand that I should still carry on with the 16-bit codes and just know I will be easily able to switch to other bits versions.<br /><br />And the book I was saying I&#039;m reading about, is a book I can&#039;t say its name because its from my country, not in english, but you can be sure it teaches properly about the 16-bit ASM coding, explaining about the micro-processor, the registers, flags, memory layouts, and just everything else is needed for theory, and ofcourse coding...<br /><br />Got any suggestions then to start off or any comments about what I said?<br /><br />p1Mp.</div>
    <div class="meta">Posted on 2012-03-13 10:54:35 by p1Mp</div>
   </div>
   <div class="post" id="post-215888">
    <div class="subject"><a href="#post-215888">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote"><br />But geez, now I&#039;m so confused, many compilers when each person I ask says the different and opposes the others&#039;.</div><br /><br />An assembler is not a compiler (hint: you don&#039;t compile assembly language).</div>
    <div class="meta">Posted on 2012-03-13 11:57:42 by Scali</div>
   </div>
   <div class="post" id="post-215889">
    <div class="subject"><a href="#post-215889">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote"><br /><div class="quote"><br />But geez, now I&#039;m so confused, many compilers when each person I ask says the different and opposes the others&#039;.</div><br /><br />An assembler is not a compiler (hint: you don&#039;t compile assembly language).<br /></div><br /><br />Woops my bad, I&#039;ve used the wrong word, used to it from C / C++.</div>
    <div class="meta">Posted on 2012-03-14 04:26:30 by p1Mp</div>
   </div>
   <div class="post" id="post-215890">
    <div class="subject"><a href="#post-215890">Re: Assembling on DosBox</a></div>
    <div class="body">Yes its confusing, its one of the reasons that pure C was created, so everyone talks the same. When you get some ASM source, you need to know already what assembler it was meant for, and no, there are not really good tools to convert ASM, even though this is a trivial job, because ASM coders don&#039;t like to admit they are so fragmented from each other.</div>
    <div class="meta">Posted on 2012-03-14 04:42:24 by Homer</div>
   </div>
   <div class="post" id="post-215892">
    <div class="subject"><a href="#post-215892">Re: Assembling on DosBox</a></div>
    <div class="body">Not to mention that tools such as disassemblers and debuggers might not speak the same dialect as your assembler.<br />All disassemblers and debuggers I&#039;ve used were either Intel/MASM/TASM syntax or AT&amp;T. Haven&#039;t seen one that does NASM or other dialects.</div>
    <div class="meta">Posted on 2012-03-14 05:54:58 by Scali</div>
   </div>
   <div class="post" id="post-215893">
    <div class="subject"><a href="#post-215893">Re: Assembling on DosBox</a></div>
    <div class="body">Have ya seen Agner Fog&#039;s &quot;objconv&quot;? Among other tricks, it&#039;ll disassemble to Masm, Nasm, Yasm, and &quot;Gasm&quot;. :) <br /><br />http://www.agner.org/optimize/#objconv<br /><br />(oh, and for 64-bit Windows, p1ranha&#039;s NASMX package is a start)<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2012-03-14 06:22:51 by fbkotler</div>
   </div>
   <div class="post" id="post-215894">
    <div class="subject"><a href="#post-215894">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote"><br />Have ya seen Agner Fog&#039;s &quot;objconv&quot;? Among other tricks, it&#039;ll disassemble to Masm, Nasm, Yasm, and &quot;Gasm&quot;. :)</div><br /><br />So... to convert source code from assembler A to B, you need to assemble it with A, then disassemble it to B... great :P<br /><br />I have two simple rules:<br />1) When in a Microsoft environment (DOS/Windows), I use Intel Syntax. Visual Studio comes with MASM, inline-assembly, a debugger and a disassembler that all speak the same syntax. As do many other tools on the platform (IDA, Win32Dasm, TASM, Borland C++ etc). MASM/Intel Syntax is the &#039;native&#039; syntax for the platform.<br /><br />2) When in a *nix environment (OS X, BSD, linux etc, or even when writing multi-platform code on Windows), I use AT&amp;T syntax. These environments come with GCC or something closely related, with gas, inline-assembly, a debugger etc which all speak AT&amp;T syntax. So AT&amp;T syntax is the &#039;native&#039; syntax for the platform.<br /><br />When you look at my CPUInfo code: http://sourceforge.net/projects/cpuinfo/<br />It&#039;s actually a hybrid of the two. I wanted the code to work in Visual Studio on Windows, and with GCC on the other platforms. So there&#039;s some portable C, with inline-assembly routines in both Visual Studio and GCC-style.<br />This way developers don&#039;t need to install any &#039;odd&#039; tools on their platform to get the code working. Most developers on Windows will use Visual Studio, and most developers on *nix will at least have GCC installed. So now they don&#039;t need to try and set up GCC on Windows (and make it integrate with the rest of their code which they may have written in Visual Studio), and on *nix, they won&#039;t need to install additional assemblers, or use experimental/unsupported features like GCC&#039;s intel syntax mode.</div>
    <div class="meta">Posted on 2012-03-14 06:53:51 by Scali</div>
   </div>
   <div class="post" id="post-215896">
    <div class="subject"><a href="#post-215896">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote"><br />I have two simple rules:<br />1) When in a Microsoft environment (DOS/Windows), I use Intel Syntax. Visual 2) When in a *nix environment (OS X, BSD, linux etc, or even when writing multi-platform code on Windows), I use AT&amp;T syntax.</div><br /><br />I too have 2 simple rules:<br />1) When working in MS env, I use <strong>Nasm</strong> syntax.<br />2) When working in *nix env, I use <strong>Nasm</strong> syntax.<br /><br /> :lol:&nbsp; :lol:&nbsp; :lol:</div>
    <div class="meta">Posted on 2012-03-14 09:42:15 by p1ranha</div>
   </div>
   <div class="post" id="post-215897">
    <div class="subject"><a href="#post-215897">Re: Assembling on DosBox</a></div>
    <div class="body">I don&#039;t get it.... You say each tool has another syntax. What to use then?? Nasm? Masm? Whateverasm?</div>
    <div class="meta">Posted on 2012-03-14 11:07:11 by p1Mp</div>
   </div>
   <div class="post" id="post-215898">
    <div class="subject"><a href="#post-215898">Re: Assembling on DosBox</a></div>
    <div class="body">Tool use depends on your program requirements.<br />Which CPU: x86, x64, PPC, 68000?<br />Which OS: Linux, Windows, DOS, Amiga?<br />Bitness:&nbsp; 16, 32, or 64 bit?<br />Language interface: C, BASIC, Pascal?<br /><br />Beyond basic assembler syntax you&#039;ll encounter a slew of design choices and calling conventions you may not even be aware of.&nbsp; High level language compilers hide a lot of bare metal complexity and Operating System dependencies...<br /><br /></div>
    <div class="meta">Posted on 2012-03-14 11:41:53 by p1ranha</div>
   </div>
   <div class="post" id="post-215900">
    <div class="subject"><a href="#post-215900">Re: Assembling on DosBox</a></div>
    <div class="body">&quot;Whateverasm&quot; sounds good, but I don&#039;t think it&#039;s been written yet. :)<br /><br />Seriously, it&#039;s mostly a matter of opinion. Strong opinions, in some cases. Besides personal preferences (I have &quot;preferences&quot;, you have &quot;biases&quot; :) ), one real difference is &quot;what OS will it run on?&quot; Another is &quot;what linkable object formats will it produce?&quot; Masm and Tasm are &quot;dos/doze only&quot;, as far as I know. Masm will produce OMF and msCOFF formats. I think Tasm is OMF only. Almost all the others are available to run on multiple OSen, and produce multiple linkable formats. If you like Masm syntax, but want something that&#039;ll run on Linux, Japheth&#039;s JWASM will do it. So you have plenty of choices (or &quot;confusing decisions&quot; if you look at it that way).<br /><br />You won&#039;t go very far wrong, no matter which assembler you chose. Ultimately, they all do the same thing, and it isn&#039;t that difficult to switch from one to another, if you have to (want to). The only &quot;wrong&quot; decision, IMO, would be &quot;I&#039;m going to forget about asm &#039;cause I&#039;m not the right kind of person&quot;, and I don&#039;t think you&#039;re going to do that. :)<br /><br />Best,<br />Frank<br /><br /></div>
    <div class="meta">Posted on 2012-03-14 14:52:46 by fbkotler</div>
   </div>
   <div class="post" id="post-215901">
    <div class="subject"><a href="#post-215901">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote"><br />Ultimately, they all do the same thing, and it isn&#039;t that difficult to switch from one to another, if you have to (want to).</div><br /><br />Yea, once you&#039;re reasonably familiar with asm it&#039;s mostly trivial to switch from one assembler to the next.<br />Until then, I suggest you stick with one set of tools, to avoid confusion (if your assembler uses a different syntax than your book/tutorial, it may be difficult to get code working... and if your debugger uses a different syntax from your assembler, it may be difficult to see why your code doesn&#039;t do what you expect it to).</div>
    <div class="meta">Posted on 2012-03-14 15:23:38 by Scali</div>
   </div>
   <div class="post" id="post-215902">
    <div class="subject"><a href="#post-215902">Re: Assembling on DosBox</a></div>
    <div class="body">I&#039;ve been following this thread for a little bit, and was wondering if one of p1mps problems finding<br />asm related material to read on the net could be his home country blocking some info that he is able<br />to access on the web?</div>
    <div class="meta">Posted on 2012-03-14 21:43:07 by rags</div>
   </div>
   <div class="post" id="post-215903">
    <div class="subject"><a href="#post-215903">Re: Assembling on DosBox</a></div>
    <div class="body"><div class="quote"><br />I&#039;ve been following this thread for a little bit, and was wondering if one of p1mps problems finding<br />asm related material to read on the net could be his home country blocking some info that he is able<br />to access on the web?<br /></div><br /><br />Perhaps.<br />Anyway, I decided to take Tasm followed by a friend&#039;s recommendation.<br />Thanks to all of you, for the time and help :)<br /><br />p1Mp.</div>
    <div class="meta">Posted on 2012-03-16 07:47:36 by p1Mp</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=30861&amp;page=1" style="">&laquo;</a><a href="../?id=30861&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="30861" /><input type="number" name="page" min="1" max="3" step="1" value="3" onchange="this.form.submit();" /></form>  </div>
 </body>
</html>