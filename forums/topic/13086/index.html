<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Link.exe set base address - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13086" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13086">Link.exe set base address</a></p>
   <div class="post" id="post-101701">
    <div class="subject"><a href="#post-101701">Link.exe set base address</a></div>
    <div class="body">I was wondering whether for DLL's it is better to specify a base address of 10000000h, that seems to be where they end up anyway and if you specify this at assembly then there should logically be less time used relocating at run-time. Anybody ever use the /base switch with link ?<br /><br />/BASE:{address|@filename,key}<br /><br />I'm assuming that it would be<br /><br />/BASE:268435456<br /><br />but what is the filename,key ?<br /><br />I'm wondering how to set it up. I realize that they should be alligned on 4K boundaries so I was thinking that if I had several DLL's I could save load time by specifying a different base address for each and avoiding alot of relocating.</div>
    <div class="meta">Posted on 2003-05-06 21:52:23 by donkey</div>
   </div>
   <div class="post" id="post-101751">
    <div class="subject"><a href="#post-101751">Link.exe set base address</a></div>
    <div class="body"><a target="_blank" href="http://msdn.microsoft.com/library/en-us/vccore/html/_core_.2f.base.asp">http://msdn.microsoft.com/library/en-us/vccore/html/_core_.2f.base.asp</a><br />The filename, key specifies a line in a text file that contains the base address for all DLLs you compile. See the link above. The rebase utility documentation has some suggested base addresses:<br /><a target="_blank" href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/tools/tools/rebase.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/tools/tools/rebase.asp</a><br /><pre><code><br />The system DLLs are currently based in memory from 0x70000000 to 0x78000000<br />&#40;0x68000000 to 0x78000000 on MIPS&#41;. Therefore, you should base your DLLs <br />from 0x60000000 to 0x68000000. One possible scheme is to choose a base <br />address based on the first letter of the DLL name.<br /><br />First letter   Base address <br />A - C          0x60000000<br />D - F          0x61000000<br />G - I          0x62000000<br />J - L          0x63000000<br />M - O          0x64000000<br />P - R          0x65000000<br />S - U          0x66000000<br />V - X          0x67000000<br />Y - Z          0x68000000</code></pre><br /><br />Thomas</div>
    <div class="meta">Posted on 2003-05-07 03:28:11 by Thomas</div>
   </div>
   <div class="post" id="post-101769">
    <div class="subject"><a href="#post-101769">Link.exe set base address</a></div>
    <div class="body">Thanks Thomas,<br /><br />Those articles answer my questions. Yes there is a performance gain to be had. And I guess I should have figured out that link sets the address at 10000000h by default so it would be better to use a different set of addresses.</div>
    <div class="meta">Posted on 2003-05-07 07:26:31 by donkey</div>
   </div>
  </div>
 </body>
</html>