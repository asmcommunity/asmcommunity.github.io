<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>addr operator - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=9064" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=9064">addr operator</a></p>
   <div class="post" id="post-66575">
    <div class="subject"><a href="#post-66575">addr operator</a></div>
    <div class="body">Hi,<br />this is one of means to HLL procedure parameters passing.<br />Example:<br />...<br />.buf rb str_size<br />...<br />stdcall ,addr[.buf],str<br />...<br />Alteration in macro &quot;stdcall&quot;:<br />macro stdcall procname,<br />{common<br />addr equ<br />ADDR equ<br />if ~ arg eq<br />    reverse<br />    if _#arg in &lt;_addr arg,_ADDR arg&gt;<br />        lea     edx,arg<br />        push    edx<br />    else<br />        push    arg<br />    end if<br />    common<br />end if<br />call procname}</div>
    <div class="meta">Posted on 2002-11-20 06:28:44 by tserk</div>
   </div>
   <div class="post" id="post-66582">
    <div class="subject"><a href="#post-66582">addr operator</a></div>
    <div class="body">:alright: That's really very nice! This is the first time I see someone's using the fasm's macro power better than me :grin: <br />You can also put &quot;addr equ&quot; and &quot;ADDR equ&quot; outside the macro, just after (or before) its definition, so it won't be repeated each time you use this macro (but will become vulnerable for the user redefinition of those constants).</div>
    <div class="meta">Posted on 2002-11-20 07:00:31 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-66615">
    <div class="subject"><a href="#post-66615">addr operator</a></div>
    <div class="body">To Privalov,<br />making an use case...<br />Help me, please...</div>
    <div class="meta">Posted on 2002-11-20 10:00:13 by tserk</div>
   </div>
   <div class="post" id="post-66621">
    <div class="subject"><a href="#post-66621">addr operator</a></div>
    <div class="body">Well... right, the parser was still a bit too strict. I've put a small corrections in several places and now it's OK (please download fasm141.zip once again to have the latest version, with such small and not-so-important fixes I often change only the release date), please try replacing appropriate lines in your macro with the following:<br /><pre><code><br />else if var1 in &lt;REGISTERS&gt; &amp; ~ var2 in &lt;REGISTERS&gt;<br />    if var2 eq +var2<br />       if ~ var2<br />           test    var1,var1<br />       else<br />           cmp     var1,var2<br />       end if<br />    end if<br />else<br />    cmp     var1,var2<br />end if<br /></code></pre></div>
    <div class="meta">Posted on 2002-11-20 10:51:41 by Tomasz Grysztar</div>
   </div>
   <div class="post" id="post-66712">
    <div class="subject"><a href="#post-66712">addr operator</a></div>
    <div class="body">Result is ok.<br />times 8 db 'Thank you!'</div>
    <div class="meta">Posted on 2002-11-21 01:50:35 by tserk</div>
   </div>
  </div>
 </body>
</html>