<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>File Mapping - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29318" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=29318">File Mapping</a></p>
   <div class="post" id="post-207056">
    <div class="subject"><a href="#post-207056">File Mapping</a></div>
    <div class="body">I am using file mapping to get text from a file and I am having problems with the file mapping over writing my other variables in my program.&nbsp; How would I fix this?&nbsp; Below is my current code.<br /><pre><code>invoke CreateFile,addr FilePath,GENERIC_READ,0,0,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0<br />mov hFile,eax<br />invoke GetFileSize,hFile,0<br />mov FileSize,eax<br />invoke CreateFileMapping,hFile,0,PAGE_READONLY,0,0,0<br />mov hMap,eax<br />invoke MapViewOfFile,hMap,FILE_MAP_READ,0,0,0<br />mov hMapView,eax<br />invoke UnmapViewOfFile,hMapView<br />invoke CloseHandle,hMap<br />invoke CloseHandle,hFile</code></pre><br /></div>
    <div class="meta">Posted on 2009-03-14 11:42:39 by antihaxer</div>
   </div>
   <div class="post" id="post-207057">
    <div class="subject"><a href="#post-207057">Re: File Mapping</a></div>
    <div class="body">Your code looks correct (except that lack of error checking ;) ).<br /><br />Can you post a small complete (assemblable) program snippet that demonstrates the problem?</div>
    <div class="meta">Posted on 2009-03-14 13:12:29 by f0dder</div>
   </div>
   <div class="post" id="post-207058">
    <div class="subject"><a href="#post-207058">Re: File Mapping</a></div>
    <div class="body">Nevermind.&nbsp; I thought it was the file being mapped that was corrupting my buffers but it was another piece of code.&nbsp; Thanks for taking a look though.</div>
    <div class="meta">Posted on 2009-03-14 13:56:30 by antihaxer</div>
   </div>
  </div>
 </body>
</html>