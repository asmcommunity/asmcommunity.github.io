<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Replace text - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4839" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4839">Replace text</a></p>
   <div class="post" id="post-33938">
    <div class="subject"><a href="#post-33938">Replace text</a></div>
    <div class="body">Hi !<br /><br />I want to write a function to replace a string to another in a big text:<br /><br />String 1: &quot;rrr&quot;<br />String 2: &quot;zugtr&quot;<br /><br />ttt eee rrr tttrtorui ptrzzu uzotiu rrrr rrrr rrr ieu<br /><br />replace strings in the text to...<br /><br />ttt eee zugtr tttrtorui ptrzzu uzotiu zugrtr zugrtr zugrt ieu<br /><br />Is there out a good and fast replace funktion ??<br /><br /><br />Greetings, Nordwind64</div>
    <div class="meta">Posted on 2002-04-18 09:47:30 by Nordwind64</div>
   </div>
   <div class="post" id="post-33940">
    <div class="subject"><a href="#post-33940">Replace text</a></div>
    <div class="body">You seem to be replacing rrrr (x4 r) the same as you would rrr (the string, and x3 r).<br />So:<br />rrr -&gt; zugtr<br />rrrr -&gt; zugtr<br /><br />Not:<br />rrrr -&gt; zugtrr<br /><br />Is this deliberate or a typo?<br /><br />Mirno</div>
    <div class="meta">Posted on 2002-04-18 10:01:36 by Mirno</div>
   </div>
   <div class="post" id="post-33942">
    <div class="subject"><a href="#post-33942">Replace text</a></div>
    <div class="body">Hi,<br /><br />rrr -&gt; zugtr <br />rrrr -&gt; zugtrr <br /><br />or rrrrrr -&gt; zugtrzugtr<br /><br />or rrrrr -&gt; zugtrrr<br /><br />Greetings,<br />Nordwind64</div>
    <div class="meta">Posted on 2002-04-18 10:07:52 by Nordwind64</div>
   </div>
   <div class="post" id="post-33951">
    <div class="subject"><a href="#post-33951">Replace text</a></div>
    <div class="body">future ref. use real words... :)<br />They're easier to follow and understand in replace functions...<br /><br />saying &quot;rrr&quot; and &quot;sfdgaf&quot; takes more to follow then a simple sentence...<br /><br />Sliver</div>
    <div class="meta">Posted on 2002-04-18 12:48:14 by Sliver</div>
   </div>
   <div class="post" id="post-33955">
    <div class="subject"><a href="#post-33955">Replace text</a></div>
    <div class="body">Hi,<br /><br />that were real words, in my timbuktu home language...<br />No, ok, sorry !<br /><br /><br />String 1 = &quot;whenever&quot;<br />String 2 = &quot;may not have&quot;<br /><br />&quot;emails sent to you whenever someone replies. &quot;<br /><br />  -&gt;<br /><br />&quot;emails sent to you may not have someone replies. &quot; <br /><br />Ok ?<br /><br />Greetings, Frank</div>
    <div class="meta">Posted on 2002-04-18 13:07:20 by Nordwind64</div>
   </div>
   <div class="post" id="post-33958">
    <div class="subject"><a href="#post-33958">Replace text</a></div>
    <div class="body">Why search and replace when you can simply ask what your looking for first :grin:<br /><br /><pre><code><br />.data<br />  szEmail  db &quot;emails sent to %s someone replies.&quot;,0<br />  szWhen  db &quot;whenever&quot;,0<br />  szNot    db &quot;may not have&quot;,0<br /><br />.data?<br />   Buffer db 256 dup&#40;?&#41;<br /><br />.code<br /><br />.if&#40; Flag == TRUE&#41;<br />; Do whenever<br />  invoke wsprintf, addr Buffer, addr szEmail, addr szWhen<br /><br />.else<br />; Do may not have<br />  invoke wsprintf, addr Buffer, addr szEmail, addr szNot<br /><br />.endif<br /><br />; Show it<br />invoke StdOut, addr Buffer  ; or however you want to use the string<br /></code></pre><br /><br />Just a sugestion...<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-04-18 13:34:35 by NaN</div>
   </div>
   <div class="post" id="post-33963">
    <div class="subject"><a href="#post-33963">Replace text</a></div>
    <div class="body">Hi NaN<br /><br />;-) <br />That was only an example, I need a complete replace funktion for two strings in a big text, but I don't know how to...<br /><br />Sorry, english is not my mother language, so it could give translation problems ???<br /><br />Greetings,<br />Nordwind64</div>
    <div class="meta">Posted on 2002-04-18 14:13:15 by Nordwind64</div>
   </div>
   <div class="post" id="post-33966">
    <div class="subject"><a href="#post-33966">Replace text</a></div>
    <div class="body">I will leave this one for other learned people to tackle. (I have an economics exam tomorrow, and the solution wont be all to simple (as i perceive it anyways) ).<br /><br />If your still hanging come saturday, I'll help you then... <br /><br />Good Luck.<br />:alright:<br />NaN</div>
    <div class="meta">Posted on 2002-04-18 14:47:24 by NaN</div>
   </div>
   <div class="post" id="post-33988">
    <div class="subject"><a href="#post-33988">Replace text</a></div>
    <div class="body">Searched the site for &quot;replace&quot; &quot;string&quot; and came up with this from the algor. section (There's alot that can be done in the optimization area, but the author says it works)<br /><br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=3424&amp;highlight=replace+string">Replace String</a> <br /><br />I'm gonna try my hand at a more optimized version so tell me if that works...<br /><br />Sliver</div>
    <div class="meta">Posted on 2002-04-18 17:52:11 by Sliver</div>
   </div>
   <div class="post" id="post-34002">
    <div class="subject"><a href="#post-34002">Replace text</a></div>
    <div class="body">Just my 2 cents :grin:<br /><br />Use a string search algorithm then just use EM_SETSEL to select the text then use EM_REPLACESEL.<br /><br />Select = StartingPointOfTheText -&gt; StartingPointOfTheText + strlen of the first string.<br /><br />Replace = StartingPointOfTheText<br /><br />I don't know if this works but it's just a theory. :grin:</div>
    <div class="meta">Posted on 2002-04-18 22:05:53 by stryker</div>
   </div>
   <div class="post" id="post-34014">
    <div class="subject"><a href="#post-34014">Replace text</a></div>
    <div class="body">There are a number of problems with a replace function, if the replacement is the same length or shorter, you just find the source string in the first buffer, write the replacement string at its offset, in the second buffer, step to the next character after the source and do it again until you have reached the end.<br /><br />It becomes more complex when the replacement is longer than the source as you need some memory strategy to handle the extra length. What I have in mind when I have time is to use one of the boyer moore derivations that counts the number of specified patterns in a source, do the arithmetic and reallocate the extra memory needed for the second buffer and then run a replacement algo like the one mentioned above.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-04-19 02:21:12 by hutch--</div>
   </div>
   <div class="post" id="post-34015">
    <div class="subject"><a href="#post-34015">Replace text</a></div>
    <div class="body">Hey stryker, nice to see they let you on the net in martian prison :tongue:</div>
    <div class="meta">Posted on 2002-04-19 02:26:05 by NaN</div>
   </div>
   <div class="post" id="post-34038">
    <div class="subject"><a href="#post-34038">Replace text</a></div>
    <div class="body">Hi,<br /><br />ok, I've finished my function. It's a Dll function, here is it...<br />Thank you to all !<br /><br />Nordwind64<br /><br />; ______________________________________________<br />   Replace proc<br />; ??????????????????????????????????????????????<br />;Dll function: Replace (source text,<br />;                       lenght of source text,<br />;                       destinationtext,<br />;                       search-string,<br />;                       lenght of search-string,<br />;                       replace-text<br />;                       lenght of replace-text<br />;                       )<br /><br />push ebp<br />mov  ebp,esp<br /><br />  mov   zahler,0<br /><br />  mov   ebx,       ;ebx = Pointer to the textmemory<br />  mov   eax,<br />  add   ,eax       ; = End of textmemory<br />  mov   edi,      ;edi = Pointer to the new textmemory<br />  mov   edx,      ;edx = Pointer to search-string<br />                          ; = Bytes in the search-string<br />  mov   esi,      ;esi = Pointer to replace-string<br />                          ; = Bytes in the replace-string<br />  mov   eax,0<br /><br />  wfhastloop:<br />  mov   al,<br />  cmp   al,<br />  je    wfhastig<br />  wfhastweiter:<br />  mov   ,al<br />  inc   ebx<br />  inc   edi<br />  add   zahler,1<br />  cmp   ebx,<br />  je    wfendehastig<br />  jmp   wfhastloop<br />  wfhastig:<br />  mov   ecx,0<br />  wfhastig2:<br />  mov   al,<br />  cmp   al,<br />  jne   wfhastweiter<br />  inc   ecx<br />  cmp   ecx,<br />  jne   wfhastig2<br /><br />  wfgollo:<br />  add   ebx,ecx<br />  mov   ecx,0<br />  wbrastig:<br />  mov   al,<br />  mov   ,al<br />  inc   ecx<br />  inc   edi<br />  add   zahler,1<br />  cmp   ecx,<br />  jne   wbrastig<br />  <br />  jmp   wfhastloop<br />  wfendehastig:<br /><br />  mov   eax,zahler    ;  -&gt; Return: Number of bytes in the new text memory <br /><br />pop ebp<br />ret 28<br />Replace endp</div>
    <div class="meta">Posted on 2002-04-19 08:39:52 by Nordwind64</div>
   </div>
  </div>
 </body>
</html>