<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>VXD , How do i customize The bluescreen,shellmessage,doblue - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=19243" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=19243">VXD , How do i customize The bluescreen,shellmessage,doblue</a></p>
   <div class="post" id="post-148625">
    <div class="subject"><a href="#post-148625">VXD , How do i customize The bluescreen,shellmessage,doblue</a></div>
    <div class="body">Compiler: Masmv8.2<br />Hi there..<br /><br />I want to know how i can stay in BlueScreenMode and how i can write custom messages to the blue screen without a default message. (using shellmessage in vmm.inc)The main Goal is that i can ENTER blue screenmode.And i must be able 2 write strings 2 it!After i call lets say a function i must be able to exit the blue screen mode.I use loader.asm and Deviceio(handle,ID,,,,,where id = Function_doBlueScreenPopup equ 4 etc. <br /><br />Thanks Josh</div>
    <div class="meta">Posted on 2004-08-27 23:21:09 by j0sh</div>
   </div>
   <div class="post" id="post-148639">
    <div class="subject"><a href="#post-148639">VXD , How do i customize The bluescreen,shellmessage,doblue</a></div>
    <div class="body">To enter blue screen mode, you must send system control message 0x10.<br />Now, you can use the following functions to draw to the screen:<br />VDD_Msg_ClrScrn (EAX=background color, EBX=VM handle)<br />Clears the screen<br />VDD_Msg_BakColor (EAX=background color, EBX=VM handle)<br />Sets the text background color<br />VDD_Msg_ForColor (EAX=foreground color, EBX=VM handle)<br />Sets the text foreground color<br />VDD_Msg_SetCursPos (EAX=row, EDX=column, EBX=VM handle)<br />Sets the cursor position<br />VDD_Msg_TextOut (EAX=row, ECX=length, EDX=column, EBX=VM handle, ESI=string)<br />The following functions do keyboard related tasks:<br />VKD_Get_Msg_Key (EBX=must be the virtual machine that has the keyboard focus)<br />Returns a scan code in AL and some flags in AH. Bits 2, 3, 4 and 7 indicate shift, ctrl, alt and extended keys respectively.<br />If no key was pressed, this function returns 0.<br />VKD_Peek_Msg_Key (EBX=same as above)<br />This does the same as the previous function, but doesn't remove the key.<br />VKD_Flush_Msg_Key_Queue (EBX=same as above)<br />This function flushes the key queue.<br /><br />When you're done, send system control message 0x11.</div>
    <div class="meta">Posted on 2004-08-28 06:40:36 by Sephiroth3</div>
   </div>
  </div>
 </body>
</html>