<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>DIALOGEX problem... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17451" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17451">DIALOGEX problem...</a></p>
   <div class="post" id="post-135126">
    <div class="subject"><a href="#post-135126">DIALOGEX problem...</a></div>
    <div class="body">Hello all!<br />Im having some trouble with my resource script..<br />heres the code im using:<br /><pre><code><br />;---------------------------------------------------------------<br />; resoucre file<br />;---------------------------------------------------------------<br />#include &quot;/asm/resource.h&quot;<br /><br />; data<br />#define IDC_Sdata	10001<br /><br />#define IDC_Svagn1D	10101<br />#define IDC_SAchk1	10102<br />#define IDC_Smassa1	10103<br />#define IDC_Slangd1	10104<br /><br />#define IDC_Sst1	10105<br />#define IDC_Skg1	10106<br />#define IDC_Sm1		10107<br /><br />#define IDC_st1		10108<br />#define IDC_kg1		10109<br />#define IDC_m1		10110<br /><br />#define IDC_delare	10002<br /><br />#define IDC_Svagn2D	10201<br />#define IDC_SAchk2	10202<br />#define IDC_Smassa2	10203<br />#define IDC_Slangd2	10204<br /><br />#define IDC_Sst2	10205<br />#define IDC_Skg2	10206<br />#define IDC_Sm2		10207<br /><br />#define IDC_st2		10208<br />#define IDC_kg2		10209<br />#define IDC_m2		10210<br /><br />Dialogen DIALOGEX 10, 10, 320, 110<br />CAPTION &quot;PrjArb GUIsheisse&quot;<br />FONT 8,&quot;MS Sans Serif&quot;<br />CLASS &quot;dlgklass&quot;<br />STYLE 0x10CF0000<br />EXSTYLE 0x00000000<br />BEGIN<br />	CONTROL &quot;Data&quot;,IDC_Sdata,&quot;Button&quot;,0x50000007,10,10,300,90,0x00000000<br />	<br />	CONTROL &quot;Vagn 1 &#40;com 1&#41;&quot;,IDC_Svagn1D,&quot;Static&quot;,0x50000000,50,20,50,10,0x00000000<br />	CONTROL &quot;Antal checks&quot;,IDC_SAchk1,&quot;Static&quot;,0x50000000,20,40,60,10,0x00000000<br />	CONTROL &quot;Massa&quot;,IDC_Smassa1,&quot;Static&quot;,0x50000000,20,55,60,10,0x00000000<br />	CONTROL &quot;L?ngd&quot;,IDC_Slangd1,&quot;Static&quot;,0x50000000,20,70,60,10,0x00000000<br /><br />	CONTROL &quot;st&quot;,IDC_Sst1,&quot;Static&quot;,0x50000000,115,40,15,10,0x00000000<br />	CONTROL &quot;kg&quot;,IDC_Skg1,&quot;Static&quot;,0x50000000,115,55,15,10,0x00000000<br />	CONTROL &quot;m&quot;,IDC_Sm1,&quot;Static&quot;,0x50000000,115,70,15,10,0x00000000<br /><br />	CONTROL &quot;&quot;,IDC_st1,&quot;Edit&quot;,0x50810000,80,40,30,10,0x00000000<br />	CONTROL &quot;&quot;,IDC_kg1,&quot;Edit&quot;,0x50810000,80,55,30,10,0x00000000<br />	CONTROL &quot;&quot;,IDC_m1,&quot;Edit&quot;,0x50810000,80,70,30,10,0x00000000<br /><br />	CONTROL &quot;&quot;,IDC_delare,&quot;ReBarWindow32&quot;,0x50000000,147,20,6,70,0x00000000<br /><br />	CONTROL &quot;Vagn 2 &#40;com 2&#41;&quot;,IDC_Svagn2D,&quot;Static&quot;,0x58000000,200,20,50,10,0x00000000<br /><br />	CONTROL &quot;Antal checks&quot;,IDC_SAchk2,&quot;Static&quot;,0x58000000,170,40,60,10,0x00000000<br />	CONTROL &quot;Massa&quot;,IDC_Smassa2,&quot;Static&quot;,0x58000000,170,55,60,10,0x00000000<br />	CONTROL &quot;L?ngd&quot;,IDC_Slangd2,&quot;Static&quot;,0x58000000,170,70,60,10,0x00000000<br /><br />	CONTROL &quot;st&quot;,IDC_Sst2,&quot;Static&quot;,0x58000000,265,40,15,10,0x00000000<br />	CONTROL &quot;kg&quot;,IDC_Skg2,&quot;Static&quot;,0x58000000,265,55,15,10,0x00000000<br />	CONTROL &quot;m&quot;,IDC_Sm2,&quot;Static&quot;,0x58000000,265,70,15,10,0x00000000<br /><br />	CONTROL &quot;&quot;,IDC_st2,&quot;Edit&quot;,0x58810000,230,40,30,10,0x00000000<br />	CONTROL &quot;&quot;,IDC_kg2,&quot;Edit&quot;,0x58810000,230,55,30,10,0x00000000<br />	CONTROL &quot;&quot;,IDC_m2,&quot;Edit&quot;,0x58810000,230,70,30,10,0x00000000<br />END<br />;---------------------------------------------------------------<br />; EOF<br />;---------------------------------------------------------------<br /><br />;---------------------------------------------------------------<br />; proggy.asm<br />;---------------------------------------------------------------<br />.386<br />.model flat,stdcall<br />option casemap&#58;none<br /><br />include \masm32\include\windows.inc<br /><br />include \masm32\include\kernel32.inc<br />include \masm32\include\user32.inc<br /><br />includelib \masm32\lib\kernel32.lib<br />includelib \masm32\lib\user32.lib<br /><br />WinMain		PROTO &#58;DWORD,&#58;DWORD,&#58;DWORD,&#58;DWORD<br />WndProc		PROTO &#58;DWORD,&#58;DWORD,&#58;DWORD,&#58;DWORD<br /><br />.data<br />HdlgC	db 'dlgklass',0<br />HdlgN	db 'Dialogen',0<br /><br />.data?<br />programHT	HINSTANCE ?<br />CmdLn		LPSTR ?<br /><br />.code<br />start_mf&#58;<br />	invoke GetModuleHandle,NULL<br />	mov programHT,eax<br />	invoke GetCommandLine<br />	mov CmdLn,eax<br />	invoke WinMain,programHT,NULL,CmdLn,SW_SHOWDEFAULT<br />	invoke ExitProcess,eax<br />	<br />	WinMain proc pHT&#58;HINSTANCE,prevpHT,cmdln&#58;LPSTR,showStyle&#58;DWORD<br />		LOCAL wc&#58;WNDCLASSEX<br />		LOCAL msg&#58;MSG<br />		LOCAL hDlg&#58;HWND<br /><br />		mov wc.cbSize,sizeof WNDCLASSEX<br />		mov wc.style,CS_HREDRAW or CS_VREDRAW<br />		mov wc.lpfnWndProc,WndProc<br />		mov wc.cbClsExtra,NULL<br />		mov wc.cbWndExtra,DLGWINDOWEXTRA	<br />		push pHT<br />		pop wc.hInstance<br />		invoke LoadIcon,NULL,IDI_APPLICATION	<br />		mov wc.hIcon,eax<br />		mov wc.hIconSm,eax<br />		invoke LoadCursor,NULL,IDC_ARROW<br />		mov wc.hCursor,eax<br />		mov wc.hbrBackground,COLOR_BTNFACE+1<br />		mov wc.lpszMenuName,NULL<br />		mov wc.lpszClassName,offset HdlgC<br />		invoke RegisterClassEx,addr wc<br />		invoke CreateDialogParam,programHT,addr HdlgN,NULL,addr WndProc,NULL <br />		mov hDlg,eax <br />		invoke ShowWindow,hDlg,SW_SHOWNORMAL<br />		invoke UpdateWindow,hDlg<br />		messageloop&#58;<br />			invoke GetMessage,addr msg,NULL,0,0<br />			cmp eax,0<br />			je exitdisshit<br />			invoke TranslateMessage,addr msg<br />			invoke DispatchMessage,addr msg<br />		jmp messageloop<br />		exitdisshit&#58;<br />		mov eax,msg.wParam<br />		ret<br />	WinMain endp<br />	<br />	WndProc proc hWnd&#58;HWND, uMsg&#58;UINT, wParam&#58;WPARAM, lParam&#58;LPARAM<br />		<br />		cmp uMsg,WM_DESTROY					<br />		jne chk_blah<br />		invoke PostQuitMessage,NULL<br />		jmp die_bitch_die<br />		<br />		chk_blah&#58;<br />		cmp uMsg,WM_COMMAND<br />		jne rerun<br />			...<br />		<br />		rerun&#58;<br />		invoke DefWindowProc,hWnd,uMsg,wParam,lParam<br />		ret<br />		<br />		die_bitch_die&#58;<br />		xor eax,eax<br />		ret<br />	WndProc endp<br />end start_mf<br />;---------------------------------------------------------------<br />; EOF<br />;---------------------------------------------------------------<br /></code></pre><br />The problem is that nothing is shown... another problem is that quits almost immediatly (wndproc runs seven times then it quits), it was working with another resource script using DIALOG instead of DIALOGEX. What is the diffrence between the two, and how can i make this work :confused:?</div>
    <div class="meta">Posted on 2004-03-01 12:07:40 by sluggo</div>
   </div>
   <div class="post" id="post-135143">
    <div class="subject"><a href="#post-135143">DIALOGEX problem...</a></div>
    <div class="body">You should invoke InitCommonControls/InitCommonControlsEx first</div>
    <div class="meta">Posted on 2004-03-02 04:22:37 by Morris</div>
   </div>
   <div class="post" id="post-135147">
    <div class="subject"><a href="#post-135147">DIALOGEX problem...</a></div>
    <div class="body">tried that but it didnt work =(..</div>
    <div class="meta">Posted on 2004-03-02 05:23:57 by sluggo</div>
   </div>
   <div class="post" id="post-135180">
    <div class="subject"><a href="#post-135180">DIALOGEX problem...</a></div>
    <div class="body">Your resource file uses ReBar control, so you shoud call InitCommonControlsEx with ICC_COOL_CLASSES flag.<br />Example:<br />.data<br />...<br />comCtrls    INITCOMMONCONTROLSEX &lt;0&gt;<br /><br />.code<br /><br />start:<br />    mov     comCtrls.dwSize, sizeof comCtrls<br />    mov     comCtrls.dwICC, ICC_COOL_CLASSES<br />    invoke  InitCommonControlsEx, OFFSET comCtrls<br />...<br /><br />I was check your code and add above code. It run fine.<br />Best regards</div>
    <div class="meta">Posted on 2004-03-03 00:24:14 by TQN</div>
   </div>
   <div class="post" id="post-135181">
    <div class="subject"><a href="#post-135181">DIALOGEX problem...</a></div>
    <div class="body">Your resource file uses ReBar control, so you shoud call InitCommonControlsEx with ICC_COOL_CLASSES flag.<br />Example:<br />.data<br />...<br />comCtrls    INITCOMMONCONTROLSEX &lt;0&gt;<br /><br />.code<br /><br />start:<br />    mov     comCtrls.dwSize, sizeof comCtrls<br />    mov     comCtrls.dwICC, ICC_COOL_CLASSES<br />    invoke  InitCommonControlsEx, OFFSET comCtrls<br />...<br /><br />Good luck</div>
    <div class="meta">Posted on 2004-03-03 00:24:16 by TQN</div>
   </div>
   <div class="post" id="post-135207">
    <div class="subject"><a href="#post-135207">DIALOGEX problem...</a></div>
    <div class="body">Thank you! Thank you! Thank you! :alright:<br />Thank you TQN!! works splendidly!</div>
    <div class="meta">Posted on 2004-03-03 15:13:30 by sluggo</div>
   </div>
  </div>
 </body>
</html>