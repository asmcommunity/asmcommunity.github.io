<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>question about 3DNow! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=18500" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=18500">question about 3DNow!</a></p>
   <div class="post" id="post-143179">
    <div class="subject"><a href="#post-143179">question about 3DNow!</a></div>
    <div class="body">i want to convert some c++ code to the appropriate 3DNow! instructions, is there any method of realizing it?<br />thanks in advance.</div>
    <div class="meta">Posted on 2004-06-08 01:29:11 by freeia</div>
   </div>
   <div class="post" id="post-143186">
    <div class="subject"><a href="#post-143186">question about 3DNow!</a></div>
    <div class="body">Use inline assembly. There is no compiler that can generate 3dnow! code, as far as I know. VC++ may have intrinsics for it, but they are almost as hard to use as asm, and don't give very good results, so you might aswell use asm.</div>
    <div class="meta">Posted on 2004-06-08 02:19:36 by Scali</div>
   </div>
   <div class="post" id="post-143228">
    <div class="subject"><a href="#post-143228">question about 3DNow!</a></div>
    <div class="body">I'm talking about MS VC++ 6<br />Visual c++ processor pack has support from c++ of 3DNow and other SIMD instructions<br />But if you install VC6SP6 it overwrites VCPP Processor Pack</div>
    <div class="meta">Posted on 2004-06-08 14:45:42 by greenant</div>
   </div>
   <div class="post" id="post-143238">
    <div class="subject"><a href="#post-143238">question about 3DNow!</a></div>
    <div class="body">The support for VC++ is limited to using intrinsics/inline asm 3dnow! instructions, so you have to code manually. You cannot compile regular C/C++ code to 3dnow!-optimized code with any compiler afaik, but there are some that can do it for MMX/SSE/SSE2/SSE3. Most notably Intel's own compiler.</div>
    <div class="meta">Posted on 2004-06-08 15:53:41 by Scali</div>
   </div>
   <div class="post" id="post-143249">
    <div class="subject"><a href="#post-143249">question about 3DNow!</a></div>
    <div class="body">hrm, does vc6 without the processor pack support 3dnow stuff?<br /><br />Anyway, who cares, and who still uses VC6, when vc2003 is available for free?</div>
    <div class="meta">Posted on 2004-06-08 17:44:30 by f0dder</div>
   </div>
   <div class="post" id="post-143276">
    <div class="subject"><a href="#post-143276">question about 3DNow!</a></div>
    <div class="body">iirc VC6 doesn't support any SIMD without the pp. Not even MMX. Not even in inline asm.</div>
    <div class="meta">Posted on 2004-06-09 03:05:29 by Scali</div>
   </div>
   <div class="post" id="post-143283">
    <div class="subject"><a href="#post-143283">question about 3DNow!</a></div>
    <div class="body">pp?</div>
    <div class="meta">Posted on 2004-06-09 07:01:32 by comrade</div>
   </div>
   <div class="post" id="post-143287">
    <div class="subject"><a href="#post-143287">question about 3DNow!</a></div>
    <div class="body">if i use masm, in the following directives, which directive can enable 3DNow! instructions? .XMM or .K3D?<br /><br />.686P .K3D .MMX <br />.XMM .NO87</div>
    <div class="meta">Posted on 2004-06-09 08:33:57 by freeia</div>
   </div>
   <div class="post" id="post-143290">
    <div class="subject"><a href="#post-143290">question about 3DNow!</a></div>
    <div class="body">freeia, .k3d would sound reasonable... k and in k6, 3d as in 3dnow? :)<br /><br />comrade, read previous post? ;) pp = vcpp = visual c++ processor pack</div>
    <div class="meta">Posted on 2004-06-09 09:15:18 by f0dder</div>
   </div>
   <div class="post" id="post-143292">
    <div class="subject"><a href="#post-143292">question about 3DNow!</a></div>
    <div class="body">.686P is for Pentium Pro (686) instructions (most notably cmov, I suppose), including privileged ones (p).<br />.K3D is for K6 3DNow! or sumething like that. Enables 3DNow! anyway (I believe also the 3DNow!+ of Athlons).<br />.MMX is for MMX (obviously :))<br />.XMM is for SSE/SSE2. The name is a bit strange, but the SSE/SSE2 registers are called xmm0-xmm7, so it probably refers to that (note that some SSE instructions are also included in MMX+ on Athlons).<br />.NO87 will disable x87 (FPU) instructions.</div>
    <div class="meta">Posted on 2004-06-09 09:30:26 by Scali</div>
   </div>
   <div class="post" id="post-143297">
    <div class="subject"><a href="#post-143297">question about 3DNow!</a></div>
    <div class="body">VC6 = Compiler + IDE + many other things<br />VC2003 = Compiler only<br /><br />Anyway, I have some code that works perfectly with VC6 but doesn't compile with VC2003 toolkit. Dont know why</div>
    <div class="meta">Posted on 2004-06-09 11:22:53 by greenant</div>
   </div>
   <div class="post" id="post-143303">
    <div class="subject"><a href="#post-143303">question about 3DNow!</a></div>
    <div class="body">well, shouldn't be too much trouble integrating vc2003 toolkit into the VC6 ide... and it shoudl certainly be worth it.<br /><br />Hm, trouble compiling old stuff? VC6 had a number of problems that required hacks to get around... perhaps you can give some examples of the errors, so they can be fixed? :)</div>
    <div class="meta">Posted on 2004-06-09 13:25:14 by f0dder</div>
   </div>
   <div class="post" id="post-143304">
    <div class="subject"><a href="#post-143304">question about 3DNow!</a></div>
    <div class="body">Now I will reinstall VC2003 and copy&amp;paste the error messages</div>
    <div class="meta">Posted on 2004-06-09 14:06:41 by greenant</div>
   </div>
   <div class="post" id="post-143307">
    <div class="subject"><a href="#post-143307">question about 3DNow!</a></div>
    <div class="body"><pre><code><br />liste.cpp<br />listview.cpp<br />Generating Code...<br />Linking...<br />LINK &#58; warning LNK4224&#58; /PDB&#58;NONE is no longer supported;  ignored<br />   Creating library Debug/liquide.lib and object Debug/liquide.exp<br />listview.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_Shutdown<br />database.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_Shutdown<br />graph.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_Shutdown<br />product.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_Shutdown<br />liste.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_Shutdown<br />listview.obj &#58; error LNK2019&#58; unresolved external symbol __RTC_InitBase referenced in function &quot;public&#58; __thiscall listview&#58;&#58;listview&#40;struct HINSTANCE__ *,struct HWND__ *,class product *&#41;&quot; &#40;??0listview@@QAE@PAUHINSTANCE__@@PAUHWND__@@PAVproduct@@@Z&#41;<br />database.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_InitBase<br />graph.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_InitBase<br />product.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_InitBase<br />liste.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_InitBase<br />database.obj &#58; error LNK2019&#58; unresolved external symbol @_RTC_CheckStackVars@8 referenced in function &quot;public&#58; bool __thiscall product&#58;&#58;Leggi&#40;class stack *,struct AnalisiFiltro *&#41;&quot; &#40;?Leggi@product@@QAE_NPAVstack@@PAUAnalisiFiltro@@@Z&#41;<br />graph.obj &#58; error LNK2001&#58; unresolved external symbol @_RTC_CheckStackVars@8<br />product.obj &#58; error LNK2001&#58; unresolved external symbol @_RTC_CheckStackVars@8<br />listview.obj &#58; error LNK2001&#58; unresolved external symbol @_RTC_CheckStackVars@8<br />listview.obj &#58; error LNK2019&#58; unresolved external symbol __RTC_CheckEsp referenced in function &quot;public&#58; __thiscall listview&#58;&#58;listview&#40;struct HINSTANCE__ *,struct HWND__ *,class product *&#41;&quot; &#40;??0listview@@QAE@PAUHINSTANCE__@@PAUHWND__@@PAVproduct@@@Z&#41;<br />database.obj &#58; error LNK2019&#58; unresolved external symbol __RTC_CheckEsp referenced in function &quot;public&#58; bool __thiscall product&#58;&#58;Leggi&#40;class stack *,struct AnalisiFiltro *&#41;&quot; &#40;?Leggi@product@@QAE_NPAVstack@@PAUAnalisiFiltro@@@Z&#41;<br />graph.obj &#58; error LNK2019&#58; unresolved external symbol __RTC_CheckEsp referenced in function &quot;void __stdcall GraphShow&#40;struct HINSTANCE__ *,struct HWND__ *,struct GraphStruct *&#41;&quot; &#40;?GraphShow@@YGXPAUHINSTANCE__@@PAUHWND__@@PAUGraphStruct@@@Z&#41;<br />product.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_CheckEsp<br />liste.obj &#58; error LNK2001&#58; unresolved external symbol __RTC_CheckEsp<br />product.obj &#58; error LNK2019&#58; unresolved external symbol __ftol2 referenced in function &quot;void __stdcall SingolaFreq&#40;float,float,float *,int,int *,int&#41;&quot; &#40;?SingolaFreq@@YGXMMPAMHPAHH@Z&#41;<br />Debug/liquide.dll &#58; fatal error LNK1120&#58; 5 unresolved externals<br />Error executing link.exe.<br /><br />Besaleel.exe - 21 error&#40;s&#41;, 11 warning&#40;s&#41;<br /></code></pre><br /><br />This only in Debug mode. In release mode I don't have problems<br />I don't use mfc or other strange library. Only WIN32 api and 2 functions from cmath (that are expanded inline)</div>
    <div class="meta">Posted on 2004-06-09 14:15:05 by greenant</div>
   </div>
   <div class="post" id="post-143319">
    <div class="subject"><a href="#post-143319">question about 3DNow!</a></div>
    <div class="body"><div class="quote">2 functions from cmath (that are expanded inline)</div><br /><br />Not in Debug mode, I'm sure.<br />Which probably also explains why only debug has problems.<br />It seems that your C lib is not compatible with the version of the compiler you are using (they are all debug-related functions, RTC is RunTime Check or such).<br />You are probably trying to link against the VC6 version of the C lib, while compiling with the new compiler. That won't work, you must have the new C lib aswell.</div>
    <div class="meta">Posted on 2004-06-09 15:59:18 by Scali</div>
   </div>
   <div class="post" id="post-143336">
    <div class="subject"><a href="#post-143336">question about 3DNow!</a></div>
    <div class="body">Scali, thank you for your help.</div>
    <div class="meta">Posted on 2004-06-09 18:31:23 by freeia</div>
   </div>
   <div class="post" id="post-143352">
    <div class="subject"><a href="#post-143352">question about 3DNow!</a></div>
    <div class="body">I removed include &lt;cmath&gt; and commented all the lines that use cmath procedures (only sqrt) but I still have the same problem</div>
    <div class="meta">Posted on 2004-06-10 00:53:50 by greenant</div>
   </div>
   <div class="post" id="post-143357">
    <div class="subject"><a href="#post-143357">question about 3DNow!</a></div>
    <div class="body">*sigh*<br />You have to link to the proper C lib. Like I already told you.<br />Don't you see that a debug build contains calls to runtime check-functions? It's no use removing parts of your sourcecode, because the code that is called is not called from your sourcecode. It is inserted by the compiler, in debug mode.<br />Don't you get it?</div>
    <div class="meta">Posted on 2004-06-10 02:26:46 by Scali</div>
   </div>
   <div class="post" id="post-143380">
    <div class="subject"><a href="#post-143380">question about 3DNow!</a></div>
    <div class="body">greenant, you need to overwrite the VC6 libc files with the ones from the vc2003 toolkit - some of the various compiler-support routines have changed (like adding support for the buffer-overflow catching, run-time typechecking, etc)</div>
    <div class="meta">Posted on 2004-06-10 08:48:44 by f0dder</div>
   </div>
  </div>
 </body>
</html>