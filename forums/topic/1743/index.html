<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>CMOVcc Instructions and pointer jumping - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=1743" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=1743">CMOVcc Instructions and pointer jumping</a></p>
   <div class="post" id="post-11129">
    <div class="subject"><a href="#post-11129">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">I've been trying to use the CMOV instructions in my program, but masm tells be that the instructions isnt allowed in the current cpu mode. <br /><br />Do I need something like .mmx  to use them? <br /><br />Secondly, I've read that the danger of conditional jumpiong is that if it's mis predicted then something has to be completly reloaded and thats very expensive. <br /><br />Well what happens if the cpu comes across an instruction like jmp dword ptr  or worse again je dword ptr .<br /><br />The second thing is just a curiosity for the moment, but the CMOV instructions would be of great help to me.<br /><br />Thanks.</div>
    <div class="meta">Posted on 2001-11-04 07:58:31 by EÃ³in</div>
   </div>
   <div class="post" id="post-11130">
    <div class="subject"><a href="#post-11130">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">Use the &quot;.686&quot; directive to enable the cmovcc instruction.</div>
    <div class="meta">Posted on 2001-11-04 08:31:52 by Dr. Manhattan</div>
   </div>
   <div class="post" id="post-11143">
    <div class="subject"><a href="#post-11143">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">E?in,<br /><br />You are no worse off with the CMOVxx family of instructions than you are with the normal conditional jumps in terms of mispredictions. As long as the logic of your algo requires some form of conditional code, you will have at least some situations where one branch is predicted better than the other.<br /><br />Where you do have a win is in the reduction of jumps if you can structure the code that way. You can usually clock the difference by jump reduction if the rest of the code works OK.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2001-11-04 14:10:56 by hutch--</div>
   </div>
   <div class="post" id="post-11151">
    <div class="subject"><a href="#post-11151">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">Hi !<br /><br />I just want ot add that CMOVcc will not work on every CPU ! Normal pentiums (I) and AMD-K6 didn't support these functions.<br /><br />You can check the CMOVcc-ability of a cpu using the CPUID-instruction !<br /><br />Greetings, CALEB</div>
    <div class="meta">Posted on 2001-11-04 16:58:40 by Caleb</div>
   </div>
   <div class="post" id="post-11175">
    <div class="subject"><a href="#post-11175">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">and care, that even not all CPUs support the CPUID instruction.<br /><br />Nice examples for determing the cpu caps can be found at the <br />AMD webpage.</div>
    <div class="meta">Posted on 2001-11-05 08:54:14 by beaster</div>
   </div>
   <div class="post" id="post-11339">
    <div class="subject"><a href="#post-11339">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">Btw, CMOVcc can give dramatic speed improvements if used correctly.<br />I had sorta been ignoring CMOVcc as it took quite some time before<br />I had a CPU that supported them. I was working on speeding up<br />an algorithm used in a bruteforcer. VC and my hand-optimized code<br />were about the same result. Just for fun, I ran my C code through<br />GCC with a lot of funky optimization switches... and almost lost my<br />jaw when I got a 3x speed improvement. The main algorithm was<br />pretty tight, and had a few conditional jumps. GCC had inlined and<br />unrolled it. Big deal, both me and VC had done that. But GCC had<br />also been smart enough to use CMOVcc instead of conditional jumps,<br />which VC for some reason hadn't, even though I had told it that it<br />would be OK to use PPro+ instructions...</div>
    <div class="meta">Posted on 2001-11-07 04:16:31 by f0dder</div>
   </div>
   <div class="post" id="post-11352">
    <div class="subject"><a href="#post-11352">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">Interesting.</div>
    <div class="meta">Posted on 2001-11-07 08:52:09 by dxantos</div>
   </div>
   <div class="post" id="post-12976">
    <div class="subject"><a href="#post-12976">CMOVcc Instructions and pointer jumping</a></div>
    <div class="body">Hi !<br /><br />This time I only want to add a small asm file which may help you to recognize the abilities of your CPU. I'm sure that there have been released many versions of that, but it's always good to keep the differences of common CPUs in mind, also if they are all x86-compatible.<br /><br />Until now only extended abilities of AMD-CPUs are recognized (except of SSE and MMX - they are defined in the standard feature-flags) ... but feel free to extend this !<br /><br /><br />Greetings CALEB</div>
    <div class="meta">Posted on 2001-11-25 08:02:50 by Caleb</div>
   </div>
  </div>
 </body>
</html>