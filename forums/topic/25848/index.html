<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>compair inputs - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=25848" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=25848">compair inputs</a></p>
   <div class="post" id="post-188513">
    <div class="subject"><a href="#post-188513">compair inputs</a></div>
    <div class="body">Hi I am new to ASM;<br /><br />I need some help, I am trying to write a program that takes two strings as input and compair them then gives a message.<br /><br />I wrote the program but I have a porbelm I will explain what I wrote then I will write the problem:<br /><br />-first I ask for the lengh of the string and I save it on cx( done) <br />-then I input the first string and save it using push (done)<br />-second I input the second string and save it on memory location (here I have the problem ) I will write the code for this one <br />&nbsp;  mov&nbsp;  AH, 9	&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;<br />&nbsp;  mov&nbsp;  DX, OFFSET Now&nbsp;  ;Display the message &quot;&quot;enter your name&quot;&quot;<br />&nbsp;  int&nbsp;  21h&nbsp; <br />&nbsp; &nbsp; <br />&nbsp;  mov si,400h<br />&nbsp;  mov cx,di&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; I get the value of the counter to match <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ;the lengh of the ref string lengh<br />&nbsp; &nbsp; mov bx,2h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; I set the value of bx to 2 to use it in mem shift<br />num:&nbsp; 	&nbsp; <br />&nbsp; &nbsp; mov ah,01h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; now we enter the name from keyboard<br />&nbsp; &nbsp; int 21h <br />&nbsp; &nbsp;  <br />&nbsp; &nbsp; mov ,ax&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; the data on ax from keyboard is saved on mem<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; on mem location of SI<br />&nbsp; &nbsp; push &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; another try of me to get the start address of the string<br />&nbsp; &nbsp; lea si,[800h+bx]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; I saved the effective address in SI<br />&nbsp; &nbsp; add bx,02h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; we need to shift the mem addres two byte&nbsp; &nbsp; &nbsp; &nbsp;  <br />&nbsp; &nbsp; dec cx<br />&nbsp; &nbsp; jnz num&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; keep getting more charaters till cx is zero<br /><br />----------------------------------------------------------------------<br />so far its good now I have two strings one saved using push and the other one is saved by mem location saved on SI (after using pop command )or the last charater of the string is saved on memory locatoin SI (the current value of SI)<br />------------------------------------------------------------------------<br />for some reason I can not make the pointer to point to the first charater of the string I saved on the memory location neither using pop or I made a small commads to try to decrement the pointer to point first charater <br />here is what i have done <br />I tried to decrement  twice <br />did not work....<br /><br />I need your help on understand how to make the pointer points to the first charater I have saved on the memory ... the probelm I can not push IP or CS ?<br /><br />any help is really appriated this is my first programe and I spend 3 days try to solove this problem but no use <br /><br />Regards,<br />Alan<br /><br /><br /><br /><br /><br /></div>
    <div class="meta">Posted on 2007-03-20 09:41:42 by mimime</div>
   </div>
   <div class="post" id="post-188514">
    <div class="subject"><a href="#post-188514">Re: compair inputs</a></div>
    <div class="body">by the way I am not allowred to buffer the input</div>
    <div class="meta">Posted on 2007-03-20 09:47:34 by mimime</div>
   </div>
   <div class="post" id="post-188515">
    <div class="subject"><a href="#post-188515">Re: compair inputs</a></div>
    <div class="body"><div class="quote"><br />by the way I am not allowred to buffer the input<br /></div><br /><br />Smells like homework. Don&#39;t expect any direct answers from this community when it comes to homework, only more questions that inspire you to solve the problem yourself :)<br /><br />Anyhow...<br /><br />Do you mean you are not allowed to save the input of the stream to a simple memory location instead of being forced to use stack memory as a buffer via PUSH/POP??? Then you are not allowed to simply and efficiently use CMPSB to check if both strings are equal??? If so, tell your instructor that there are better and more useful ways to demonstrate DOS assembly language programming.<br /><br />Well...<br /><br />1) Where *exactly* are you trying to store the string? As I see references to 400h and 800h.<br />2) Why are you using BX instead of simply incrementing SI?<br />3) Why are you copying the input character to the address referenced by SI and then PUSHing that same value by referencing SI again? Which one is ultimately going to hold the input string???<br />4) Give many specifics as you possibly can.</div>
    <div class="meta">Posted on 2007-03-20 10:13:01 by SpooK</div>
   </div>
   <div class="post" id="post-188517">
    <div class="subject"><a href="#post-188517">Re: compair inputs</a></div>
    <div class="body">Spook, <br /><br />I did not expect a direct answer, and yes its my homework but I was not asking for a solution I did the software by my self and planning to finish it by my self .... that why I did not post the whole code.<br /><br />I am facing a problem and was seeking help, I am not asking for a code I just need to understand how to :<br /><br />if I save to a memory location a chrater then increment the adrdress by two and do this process x number of times. at the end I end up with the pointer at the top of the memory location which is my last charater, what want is to be able to know how to move to the first memory location I mean the first charater I inputed.<br />-I tired to save the efficeted address at the start (did not work )<br />-I can not push the (IP) <br />-I tried dectrement the address I have also did not work.<br /><br />I am not sure where I am going worng.... I AM NOT ASKING FOR A CODE , i just need to know how to go back to the first memory location where I save the first charater.<br /><br /><br />1) Where *exactly* are you trying to store the string? (just charaters like a name ) As I see references to 400h and 800h , 400h and 800h I was just shifitng the memory to seek for empty location on the memory<br />2) Why are you using BX instead of simply incrementing SI? I need to shift the address 2 each time I save, this is the way when i tested and I found it works<br />3) Why are you copying the input character to the address referenced by SI and then PUSHing that same value by referencing SI again? Which one is ultimately going to hold the input string??? i push the address at the start to see if i can retrive the address of the first charater, but it did not work<br />4) Give many specifics as you possibly can.<br /><br />All I want is how to :<br />when you save data on memory, and you incrementing the address how on the end to go back to the start address of the first charater you have saved ? this is the porblem.</div>
    <div class="meta">Posted on 2007-03-20 12:49:32 by mimime</div>
   </div>
   <div class="post" id="post-188518">
    <div class="subject"><a href="#post-188518">Re: compair inputs</a></div>
    <div class="body">I will try to explain the problem in another way:<br /><br />- I already wrote a program using int 21,0A which buffer the keyboard but now the treacher think that was kind of playing smart.<br />- I have two inputs lets say NameA and NameB <br /><br />I ask the user to input namea then i save it and I save the lenght of it, then i ask him again to input nameb (i use the lengh of namea to limit the name size)<br /><br />I first save in namea in a stack uinsg push ( later i will retrive this name using pop) <br />i saved nameb on a memory location <br /><br />now I need to compair the two names so for the first one which namea is easy to get the data using pops <br />for the second nameb my pointer is pointing to the last charater saved of the name lets say its letter b .... now I need to know how get the first address of nameb which lets say letter n ... having the addrees of the last letter which is p..... I tried pushing the effective address when I first start saving nameb (did not work) I tried then decrementing the address that I have also did not work ....<br /><br />All I need to be able to point to the first charater of the second name whcih is nameb having the address of the last letter whcih letter b <br /></div>
    <div class="meta">Posted on 2007-03-20 13:11:17 by mimime</div>
   </div>
   <div class="post" id="post-188519">
    <div class="subject"><a href="#post-188519">Re: compair inputs</a></div>
    <div class="body"><div class="quote"><br />All I need to be able to point to the first charater of the second name whcih is nameb having the address of the last letter whcih letter b<br /></div><br /><br />Save that address in another register/variable and reference it later. In this case, it would make sense to have 3 variables, start of the first string, end of the first (start of the second) and end of the second. That way, you can also do a quick size calculation to determine if it is even worth bothering to attempt a comparison (if the strings are not even the same length, they won&#39;t match). You can also use that same size calculation to fuel the counter for whichever comparison routine you use.</div>
    <div class="meta">Posted on 2007-03-20 13:36:03 by SpooK</div>
   </div>
   <div class="post" id="post-188520">
    <div class="subject"><a href="#post-188520">Re: compair inputs</a></div>
    <div class="body">Great, but how to save the address this is my point, what i tried is <br />push  to save the effective address it did not work <br />I tried lea si,[800h+bx]&nbsp; which is the current address also did not work <br />and I can not push the ip to save the address , so how can I save the address ?this is my point what is the command , i tried LEA I tried push , none works ? so my simple question will be how to save the current address at some point ? cause I tried LEA and in asm it does not allow push of ip</div>
    <div class="meta">Posted on 2007-03-20 13:55:53 by mimime</div>
   </div>
   <div class="post" id="post-188521">
    <div class="subject"><a href="#post-188521">Re: compair inputs</a></div>
    <div class="body">I found the solution,&nbsp; :D and by my self <br />I had to <br />&nbsp; &nbsp; push&nbsp; &nbsp; ds<br />&nbsp; &nbsp; push&nbsp; &nbsp; es&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;Save these for later<br />&nbsp; &nbsp; push&nbsp; &nbsp; di<br />&nbsp; &nbsp; push&nbsp; &nbsp; ax<br /><br />to save the current address </div>
    <div class="meta">Posted on 2007-03-20 14:54:22 by mimime</div>
   </div>
   <div class="post" id="post-188523">
    <div class="subject"><a href="#post-188523">Re: compair inputs</a></div>
    <div class="body">The state and usage of the segment registers is useful information. For instance, a regular COM file has a program origin of 0x100 and a small program can easily fit all data into that respective 64KB segment. However, with larger programs and EXE files, you run into code that can/will set the segment registers to needed values.<br /><br />As for the IP (instruction pointer), that is the address of the currently executing instruction in memory. The mere mention of this suggests that what you are doing is quite different from what you *think* you are doing. However, if you are really that interested, look-up the CALL instruction (i.e. how it affects the stack.)<br /><br />As for the &quot;buffered input&quot; comment, I now realize you are talking about things like INT 0x21/0x0A. It&#39;s been ages since I done any real DOS programming :P<br /><br />Here is a list of suggestions to improve your scanner, assuming that the entire code+data is in one 64KB segment and CS=DS=ES.<br /><br />1) Set SI to the memory location of the first expected string<br />2) Set DI to the memory location of the second expected string<br />3) Copy SI/DI to BX depending on which loop iteration call<br />4) Call a loop that retrieves input via INT 0x21/0x01 and stores it to the appropriate string location, store character in  and increment BX each time through<br />5) Subtract BX from SI/DI to determine the String Length (store for later)<br />6) Retrieve String Lengths and compare, fail out if not equal<br />7) Since SI and DI are already set, simply use them as comparison indexes<br />8a) Create a loop loading a byte from  and comparing it to  for equality per iteration<br />*****OR*****<br />8b) Use REPZ + CMPSB with the count in CX to do an &quot;automatic&quot; comparison between DS:SI and ES:DI<br /><br />HtH :)</div>
    <div class="meta">Posted on 2007-03-20 15:43:05 by SpooK</div>
   </div>
   <div class="post" id="post-188525">
    <div class="subject"><a href="#post-188525">Re: compair inputs</a></div>
    <div class="body">Thanks a lot spook for you advice ... I understand what you wrote cause I read some advanced chaperters in our book, yet&nbsp; i am not allowed to do it, since I am not allowed to use the commands that were not explained in the class ( well not yet explaind ), I did that before and the teacher though I am trying to show off&nbsp; ( although I am not I am just reading and trying to find a solution.<br /><br />I solved the porblem and the program is running ( still some small things I need to fix).<br />So far I don&#39;t know how to create two stacks so I will need to read about it more ...<br /><br /> I am still new ASM, this is a great place to seek advice from experts and thanks a lot spook, I will not ask for a homework solution for sure, but i will ask for advice on how things works so I can get a better understanding.<br /><br />Again thanks for you time to reply to my post <br />Have a nice day <br /></div>
    <div class="meta">Posted on 2007-03-20 16:10:19 by mimime</div>
   </div>
   <div class="post" id="post-188526">
    <div class="subject"><a href="#post-188526">Re: compair inputs</a></div>
    <div class="body"><div class="quote"><br />I solved the porblem and the program is running ( still some small things I need to fix).<br />So far I don&#39;t know how to create two stacks so I will need to read about it more ...<br /></div><br /><br />That is usually the beauty of programming, there is more than one way to do things and it is up-to you to find the most efficient way :)</div>
    <div class="meta">Posted on 2007-03-20 19:06:11 by SpooK</div>
   </div>
  </div>
 </body>
</html>