<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>(AMD)OS for x86-64 - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16894" />
    <link rel="next" href="../?id=16894&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=34">OS Development</a> &raquo; <a href="../?id=16894">(AMD)OS for x86-64</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=16894&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=16894&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="16894" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=16894&amp;page=2">&gt;</a><a href="../?id=16894&amp;page=2">&raquo;</a></form>   <div class="post" id="post-131030">
    <div class="subject"><a href="#post-131030">(AMD)OS for x86-64</a></div>
    <div class="body">Hi<br /><br />My only current machine is an Opteron :-), u know : that 64-bit uproc from AMD. I use Win9x and DOS and FASM/yasm.<br /><br />I am currently coding a tiny kernel, first step is to enter long-mode... and it is *not* easy.<br />Well, I start from MS-DOS, I go from RM to 16-bit PM, then to 32-bit PM, (copying my kernel code to XMS) then to &quot;compatibility (32-bit) long-mode&quot;.<br />Now to enter &quot;64-bit long-mode&quot;, I have a pb. AMD docs say u cannot make a &quot;direct jmp far&quot;, u must use an &quot;indirect jmp far&quot;. So I put a fword ptr to memory and I make a &quot;jmp far fword ptr&quot; but it reboots :-(<br />jmp near  works fine. Certainly a pb with segment selectors :confused: <br /><br />Now I hope I'll find the bug. Then I'll be able to execute code generated by fantastic yasm :-) !!! <br /><br />BUT MY REAL PB IS ... IS THERE ANYONE ON EARTH THAT DOES/DID THE SAME THING AS ME ?!<br />(I respect Linux but I just want sthg simpler and full ring0)<br /><br />Thx</div>
    <div class="meta">Posted on 2004-01-19 05:45:00 by valy</div>
   </div>
   <div class="post" id="post-131033">
    <div class="subject"><a href="#post-131033">(AMD)OS for x86-64</a></div>
    <div class="body">Why the heck have you bought an Opteron if you're running 9x on it?</div>
    <div class="meta">Posted on 2004-01-19 06:31:20 by f0dder</div>
   </div>
   <div class="post" id="post-131048">
    <div class="subject"><a href="#post-131048">(AMD)OS for x86-64</a></div>
    <div class="body">I am working on such an OS also but curently i do NOT have an Opteron to test on :(<br />so i stopped at 32 bits ring0 until i get my Opteron :tongue:</div>
    <div class="meta">Posted on 2004-01-19 10:16:55 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-131049">
    <div class="subject"><a href="#post-131049">(AMD)OS for x86-64</a></div>
    <div class="body">f0dder, because XP-64 isn't out :P<br />he could try linux though ..</div>
    <div class="meta">Posted on 2004-01-19 11:51:13 by wizzra</div>
   </div>
   <div class="post" id="post-131050">
    <div class="subject"><a href="#post-131050">(AMD)OS for x86-64</a></div>
    <div class="body">Well, what's the point of a 64bit CPU and not even running full 32bit?</div>
    <div class="meta">Posted on 2004-01-19 11:56:21 by f0dder</div>
   </div>
   <div class="post" id="post-131093">
    <div class="subject"><a href="#post-131093">(AMD)OS for x86-64</a></div>
    <div class="body"><div class="quote"><br />Why the heck have you bought an Opteron if you're running 9x on it? </div><br />Maybe because he had it already and don't want to waste his money :)</div>
    <div class="meta">Posted on 2004-01-19 21:12:53 by pelaillo</div>
   </div>
   <div class="post" id="post-131094">
    <div class="subject"><a href="#post-131094">(AMD)OS for x86-64</a></div>
    <div class="body"><strong>valy</strong>, what have you set-up?  Volume 2, page 426 lists the code to get into long mode.  Please read very carefully as there are many pitfalls on your way.  I will hopefully get a Opteron soon.</div>
    <div class="meta">Posted on 2004-01-19 21:31:49 by bitRAKE</div>
   </div>
   <div class="post" id="post-131106">
    <div class="subject"><a href="#post-131106">(AMD)OS for x86-64</a></div>
    <div class="body"><div class="quote"><br />Maybe because he had it already and don't want to waste his money :)<br /></div><br />But then he has wasted his money on a CPU which he's not taking very much advantage of :P</div>
    <div class="meta">Posted on 2004-01-20 01:28:30 by f0dder</div>
   </div>
   <div class="post" id="post-131117">
    <div class="subject"><a href="#post-131117">(AMD)OS for x86-64</a></div>
    <div class="body">I think that very little peope has knowledge about 64-bit asm.</div>
    <div class="meta">Posted on 2004-01-20 04:47:30 by Vortex</div>
   </div>
   <div class="post" id="post-131136">
    <div class="subject"><a href="#post-131136">(AMD)OS for x86-64</a></div>
    <div class="body"><div class="quote"><br />I think that very little peope has knowledge about 64-bit asm. </div>There is nothing more fun then undiscovered country.<br />Pioneers all around! ;)</div>
    <div class="meta">Posted on 2004-01-20 09:23:19 by bitRAKE</div>
   </div>
   <div class="post" id="post-131199">
    <div class="subject"><a href="#post-131199">(AMD)OS for x86-64</a></div>
    <div class="body">RTFM (that's what the linux-developers for x86-64 told me)</div>
    <div class="meta">Posted on 2004-01-20 18:06:38 by Jan</div>
   </div>
   <div class="post" id="post-131251">
    <div class="subject"><a href="#post-131251">(AMD)OS for x86-64</a></div>
    <div class="body">There is nothing more fun then undiscovered country.<br />Pioneers all around! <br /><br />YES !!!<br /><br /><br />Well, I have all AMD64 pdf's, I do not like big O/S, I like simplicity and freedom. I just want to code pure 64-bit assembler. <br />I also look at linux kernel pages on the Web, I hope it will help. A pb with CS segment selector, I think.<br /><br />I only updated my CPU and a few things around, so it costed me less than 1000 $  ;)<br /><br />I like your OS, Bogdan, but my SVGA card not (1.2 VESA)  :(</div>
    <div class="meta">Posted on 2004-01-21 06:03:20 by valy</div>
   </div>
   <div class="post" id="post-131263">
    <div class="subject"><a href="#post-131263">(AMD)OS for x86-64</a></div>
    <div class="body">Bogdan still hasn't implemented paging-based bank-switching emulation of LFB for non-lfb cards/vesa versions? shame.</div>
    <div class="meta">Posted on 2004-01-21 08:21:52 by f0dder</div>
   </div>
   <div class="post" id="post-132684">
    <div class="subject"><a href="#post-132684">(AMD)OS for x86-64</a></div>
    <div class="body">Hi valy,<br /><br />you said AMD docu, do you refer to x86-64_overview.pdf from AMD?<br /><br />and BTW, yes I'm trying the same on my Athlon64 :-)<br /><br />Miracle</div>
    <div class="meta">Posted on 2004-02-05 10:11:38 by miracle</div>
   </div>
   <div class="post" id="post-132688">
    <div class="subject"><a href="#post-132688">(AMD)OS for x86-64</a></div>
    <div class="body">Well Fodder i do not need paging to enable bank switching VESA 1.2 old video boards<br />All i need is a bank switch routine for doing the finnal video copy from system backbuffer into video memory.<br /><br />This can be very easy done IF you have the code to do bank switch for your video card. It is only ONE single and simple function to change in the whole OS. <br /><br />This is because i do all my drawing in a system backbuffer first so copying to banked memory can not be that hard: bank0 -&gt; copy big part 1; bank1-&gt; copy part1 etc.. .pretty simple function IMHO, no need for paging trick and generating a pagefault every now and then :grin:<br /><br />But since i do not have the code to bank switch his card... and i did not fell like researching this code for every video board out there.... i have left this task for each user of old cards.<br /><br />I will be more than happy to implement it into next SOLOS version if somebody has the code and dosent know how to do it. If somebody needs is fast is will do a fast version for himself alone.<br /><br /><br />As we have talked before I do NOT like paging. It is my right to be different! And i see no point to make the things i do no like first. <br /><br />But i have stated before that i will make them for ppl that like it... and i will in due time <br /><br />I know i will be forced into paging in AMD64bits mode and then i will make it so (not that i like beeing forced very much)<br /><br />I feel no shame i know no shame :tongue: for nothing on this Earth.<br /><br /><strong> So valy if you need a bank routine for SolOS on your PC please let me know </strong><br /><br />Besides that i would really like to have an AMD64 myself for testing <br />:rolleyes:</div>
    <div class="meta">Posted on 2004-02-05 11:00:16 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-132689">
    <div class="subject"><a href="#post-132689">(AMD)OS for x86-64</a></div>
    <div class="body"><div class="quote"><br />But since i do not have the code to bank switch his card... and i did not fell like researching this code for every video board out there.... i have left this task for each user of old cards.<br /></div><br />Using vesa bank switching routines should be enough, shouldn't it? And old cards not supporting vesa... oh well.</div>
    <div class="meta">Posted on 2004-02-05 11:06:16 by f0dder</div>
   </div>
   <div class="post" id="post-132701">
    <div class="subject"><a href="#post-132701">(AMD)OS for x86-64</a></div>
    <div class="body">Hi f0dder,<br /><br />Unfortunately, bank switching for VESA 1.2 is <strong>NOT</strong> running in full 32bits modes and i will hate to have to return to real mode just to do the switch... i hardly imagine returning from 64bits to realmode<br /><br />I also presume i could also do a V86 machine just for that also :P .<br /><br />Also theoretically it is possible to define some 16bits segments and then call some VESA 1.2 protected mode interfaces, but they are usually buggy (since they are almost never used) and some VESA 1.2 do not have those interfaces neither...<br /><br />That is why i would need a simple routine (for each video board) to switch banks while beeing in 32bit protected mode (aka in ring-0). This routine is usually just a few OUTs but it is hardware dependant :grin:<br /><br />But since having your own OS  means most likely having your own 32bit drivers anyway (and lately 64bit)...<br />i will prefer maing my own drivers and/or users with specific hardware send me such routines or implement them themselves<br /><br />If i have no other solution i will return to realmode for a small timeslice just to controll such devices but that is hardly a priority for me now... since i feel very well in flat 32bit mode as it is :grin:</div>
    <div class="meta">Posted on 2004-02-05 12:53:28 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-132756">
    <div class="subject"><a href="#post-132756">(AMD)OS for x86-64</a></div>
    <div class="body">! Somebody, making what I currently make... it's miracle !<br />I have the whole collection : the 5 volumes, the 20734, 30888 and other nice AMD manuals.<br />I upload my current code ASAP.<br /><br />I do not like paging too, just doing it for entering 64-bit long mode.<br />And no thx bogdan, I should buy a more modern video card, no modern OS should support oldish material like that.</div>
    <div class="meta">Posted on 2004-02-06 06:39:35 by valy</div>
   </div>
   <div class="post" id="post-132923">
    <div class="subject"><a href="#post-132923">(AMD)OS for x86-64</a></div>
    <div class="body">Here it is.</div>
    <div class="meta">Posted on 2004-02-08 12:48:52 by valy</div>
   </div>
   <div class="post" id="post-132935">
    <div class="subject"><a href="#post-132935">(AMD)OS for x86-64</a></div>
    <div class="body">I just buy a 64 bit OS built by professionals.</div>
    <div class="meta">Posted on 2004-02-08 15:28:00 by Henk-Jan</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=16894&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=16894&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="16894" /><input type="number" name="page" min="1" max="2" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=16894&amp;page=2">&gt;</a><a href="../?id=16894&amp;page=2">&raquo;</a></form>  </div>
 </body>
</html>