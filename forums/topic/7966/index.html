<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Fasm and conditional assembly. - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7966" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=7966">Fasm and conditional assembly.</a></p>
   <div class="post" id="post-58180">
    <div class="subject"><a href="#post-58180">Fasm and conditional assembly.</a></div>
    <div class="body">Under masm I can define a value on the command line and pass it to the assembler.<br /><br />for example<br /><pre><code><br />ml /c /Cp /DDEBUG myasm.asm<br /></code></pre><br /><br />Thus when I have a conditional directive like this:<br /><br /><pre><code><br />ifdef DEBUG<br />  ; do some debug things<br />else<br />  ; do some release things<br />endif<br /></code></pre><br /><br />Could it be possible to add the ability to define equates on the command line of fasm? something like:<br /><br /><pre><code><br />fasm source.asm target.exe -DDEBUG=0<br /></code></pre><br />for release<br /><br />and<br /><br /><pre><code><br />fasm source.asm target.exe -DDEBUG=1<br /></code></pre><br /><br />for debug<br /><br />so we can have directives like<br /><br /><pre><code><br />if DEBUG &gt; 0<br />  ; do debug stuff<br />else<br />  ; do release stuff<br />endif<br /></code></pre><br /><br />without need to mantain 2 separate sources or edit the source every time one needs to change between debug and release versions</div>
    <div class="meta">Posted on 2002-09-16 14:31:38 by dxantos</div>
   </div>
   <div class="post" id="post-58183">
    <div class="subject"><a href="#post-58183">Fasm and conditional assembly.</a></div>
    <div class="body">I wont like a compiler switch because on of the main advantages of FASM is the avability to set such options in the source file itself :)<br /><br />But IIRC there is a conditional assembly function, isnt it? (you read the docs? )</div>
    <div class="meta">Posted on 2002-09-16 14:57:51 by bazik</div>
   </div>
   <div class="post" id="post-58195">
    <div class="subject"><a href="#post-58195">Fasm and conditional assembly.</a></div>
    <div class="body">I agree with <strong>dxantos</strong> that such a feature would be useful. <strong>Bazik</strong>, it wouldn't be compulsory to use it, if you don't find it useful. ;)</div>
    <div class="meta">Posted on 2002-09-16 16:49:42 by Maverick</div>
   </div>
   <div class="post" id="post-58197">
    <div class="subject"><a href="#post-58197">Fasm and conditional assembly.</a></div>
    <div class="body"><strong>bazik</strong> yes I have read the docs, and the conditional assembly exist like this:<br /><br /><pre><code><br />DEBUG=0<br /><br />if DEBUG &gt; 0<br />  ; do debug stuff<br />else<br />  ; do release stuff<br />endif<br /></code></pre><br /><br />Problem is that you must edit the file every time you change from one mode to another.  But if one can define it as a command line option if will improve FASM usability for make files. (since you will not need to edit the sourcecode for conditional compilation).</div>
    <div class="meta">Posted on 2002-09-16 17:24:55 by dxantos</div>
   </div>
   <div class="post" id="post-58241">
    <div class="subject"><a href="#post-58241">Fasm and conditional assembly.</a></div>
    <div class="body">Is it possible to use Env Vars? %DEBUG%</div>
    <div class="meta">Posted on 2002-09-16 23:17:36 by eet_1024</div>
   </div>
   <div class="post" id="post-58249">
    <div class="subject"><a href="#post-58249">Fasm and conditional assembly.</a></div>
    <div class="body">or include a file in your source which is generated by a batch file that takes the parameters your want and calls the real fasm after...<br /><br /><pre><code><br />@Echo DEBUG=0 &gt; DbgConf.inc<br />@Echo if DEBUG == 0 &gt;&gt; DbgConf.inc<br /></code></pre><br /><br />It may not be the most elegant solution and it is a bit tricky, but it actually works...<br /><br />Note: the use of '&gt;' or '&lt;' or '&gt;&gt;' and '&lt;&lt;' characters in the line to be outputed may be problematic here (maybe there is a workaround using some features of batch files I don't remember...)</div>
    <div class="meta">Posted on 2002-09-17 00:57:29 by JCP</div>
   </div>
  </div>
 </body>
</html>