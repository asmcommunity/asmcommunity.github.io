<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>assert - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=5494" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=5494">assert</a></p>
   <div class="post" id="post-39001">
    <div class="subject"><a href="#post-39001">assert</a></div>
    <div class="body">Does anyone know how to implement the C assert function in asm?<br />Thanks</div>
    <div class="meta">Posted on 2002-05-20 08:50:19 by yoursguideline</div>
   </div>
   <div class="post" id="post-39128">
    <div class="subject"><a href="#post-39128">assert</a></div>
    <div class="body">interesting question, so I did a small research:<br /><br />ASSERT is defined as:<pre><code>#define _ASSERT&#40;__expr&#41;							    \<br />	    if&#40; !&#40;__expr&#41; &#41; &#123;						    \<br />		_CrtDbgReport&#40; _CRT_ASSERT, __FILE__, __LINE__,		    \<br />			       NULL, NULL &#41;;				    \<br />	    &#125;</code></pre>The CrtDbgReport function does this:<div class="quote">_CrtDbgReport can send the debug report to three different destinations: a debug report file, a debug monitor (the Visual Studio debugger), or a debug message window. Two configuration functions, _CrtSetReportMode and _CrtSetReportFile, are used to specify the destination or destinations for each report type. These functions allow the reporting destination or destinations for each report type to be separately controlled. For example, it is possible to specify that a reportType of _CRT_WARN only be sent to the debug monitor, while a reportType of _CRT_ASSERT be sent to a debug message window and a user-defined report file.</div>the function is pesent in the clib library and will probably be not useful from asm.</div>
    <div class="meta">Posted on 2002-05-21 04:01:00 by beaster</div>
   </div>
   <div class="post" id="post-39132">
    <div class="subject"><a href="#post-39132">assert</a></div>
    <div class="body">Dont wast your time hacking thu this, instead wait shortly for VKim to finish his next debug update.  Trust me, it will be worth the wait ;)<br /><br />NaN</div>
    <div class="meta">Posted on 2002-05-21 04:16:27 by NaN</div>
   </div>
   <div class="post" id="post-39159">
    <div class="subject"><a href="#post-39159">assert</a></div>
    <div class="body">VKim's debugging window rocks!  Really makes dbshow obsolete.<br /><br />NaN what's he adding into it now?</div>
    <div class="meta">Posted on 2002-05-21 08:13:29 by AmkG</div>
   </div>
   <div class="post" id="post-39246">
    <div class="subject"><a href="#post-39246">assert</a></div>
    <div class="body">He never gave me the freedoms to say so ;)<br /><br />So i wont.  I will only say that there is an assert-like macro being developed.  And a handfull of other powerful command tools to really help development.<br /><br />Sorry, guess you'll have to wait.  I believe he plans on releasing it with hutch's next masm package, but he may release it beforehand as well..  I really dont know his full intentions, or how close to finish he feels his updates are, so i cant give you anything more than this. <br /><br />All i can say, is its worth the wait ;)<br /><br />NaN</div>
    <div class="meta">Posted on 2002-05-21 14:08:41 by NaN</div>
   </div>
   <div class="post" id="post-39333">
    <div class="subject"><a href="#post-39333">assert</a></div>
    <div class="body">Hi all!<br />I am preparing the new version of the debugging tool. There are some new features and macros:<br />- A very serious bug has been fixed. In the current version if you close the window while minimized then the registry values are trashed and the window doesn't display next time DBGWIN is executed. Now if the window cannot appear on the screen by its registry settings then it appears by force.<br />- NaN has fixed a bug in PrintHex macro.<br />- PrintDouble macro has been added.<br />- The current version cannot be used simultaneously in different files of a project. The new version doesn't have this very inconvenient feature.<br />- In the new version the window has two additional buttons ?&quot;Save file&quot; &amp; &quot;Open file&quot;. So you can save debugging information in a separate file.<br />- ASSERT macro has been added. :)<br />- NaN has added some very useful macros.<br />- All macros use conditional compilation. There is a switch DBGWIN_DEBUG_ON. If it has value 0 then any debugging information will be removed from your program. So you can get release version of your program by switching off DBGWIN_DEBUG_ON.<br />- There is a switch DBGWIN_EXTRA_INFO for adding some extra debugging information. If it has value 1 then macro will print a file name and number of line.<br />I know that Steve Hutchesson is going to release a service pack for MASM32. I hope the new version will be included.<br />Now I am waiting for any suggestions and ideas. My e-mail is <a href="mailto:vkim@aport2000.ru">vkim@aport2000.ru</a></div>
    <div class="meta">Posted on 2002-05-22 05:42:33 by vkim</div>
   </div>
   <div class="post" id="post-39354">
    <div class="subject"><a href="#post-39354">assert</a></div>
    <div class="body">Hi vkim,<br /><br />I use both Ewayne's AsmEdit and ketil0's RadASM.<br /><br />In AsmEdit I added the DbgDump Macro by Thomas Bleeker, but I haven't had the time to adapt it into your debug routine in RadASM (it needs to be passed 2 parameters instead of one). I find it very useful at times and was wondering if you <br />were going to include something similar in your new Debug program?<br /><br />Keep up the great work!</div>
    <div class="meta">Posted on 2002-05-22 08:02:56 by gscundiff</div>
   </div>
   <div class="post" id="post-39371">
    <div class="subject"><a href="#post-39371">assert</a></div>
    <div class="body">Vladimir,<br /><br />I am sure that many people already like your debug system so with a new one, it will also be popular. I am currently writing a new toy for MASM32 to do dialogs quickly in much the same way as the Prostart wizard and there is already a number of library modules to add to MASM32, Ernie Murphy's new image loading module being just one of them.<br /><br />When I get it all together I intend to release a service pack with all of the new stuff but there is now a large demand on the bandwidth to do this so I wil have to be careful to get it right.<br /><br />Regards and thanks for doing the extra research and development work.<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-05-22 10:19:16 by hutch--</div>
   </div>
   <div class="post" id="post-39374">
    <div class="subject"><a href="#post-39374">assert</a></div>
    <div class="body">I've got an array of error strings of equal length. When I call a function it returns a code  which I use to calculate the index into the array.  at the mo. I'm using the following to print the error string<br /><br /><pre><code> messagebox,hWnd,szErrors&#91;eax&#93;,NULL,MB_ICONERROR</code></pre><br /><br />I've decided to see what the hype was about vKims degug macros<br />And I must say they're very impressive.<br /><br />It can't however do<br /><pre><code><br />PrintStringByAddr szErrors&#91;eax&#93;<br /></code></pre><br /><br />I'd have a go at modifying the macro but I'm afraid my macro skills are all but non-existent... anybody have any ideas how to achieve this?<br /><br />without explicitly adding the address of szErrors to eax?</div>
    <div class="meta">Posted on 2002-05-22 11:55:39 by MArtial_Code</div>
   </div>
   <div class="post" id="post-39375">
    <div class="subject"><a href="#post-39375">assert</a></div>
    <div class="body"><strong>MArtial_Code</strong>, create a list of error code pointers:<pre><code>MySillyErrorCodes \<br />    dd cTXT&#40;&quot;Not enough coffee&quot;&#41;<br />    dd cTXT&#40;&quot;Low on sugar&quot;&#41;<br />    dd cTXT&#40;&quot;Boss is near&quot;&#41;<br />    dd cTXT&#40;&quot;Deadline too close&quot;&#41;</code></pre>...then just use:<br />; when eax is the error number<br />invoke DebugPrint, MySillyErrorCodes</div>
    <div class="meta">Posted on 2002-05-22 12:05:28 by bitRAKE</div>
   </div>
   <div class="post" id="post-39393">
    <div class="subject"><a href="#post-39393">assert</a></div>
    <div class="body">Cheers BitRake.  I did think of using Pointers but I didn't wan't to creat another array. <br /><br />As it turns out creating another array would be more memory efficient.</div>
    <div class="meta">Posted on 2002-05-22 13:44:02 by MArtial_Code</div>
   </div>
   <div class="post" id="post-39437">
    <div class="subject"><a href="#post-39437">assert</a></div>
    <div class="body">MArtial_Code,<br />Look at this example of using PrintStringByAddr macro:<br /><pre><code><br />.386<br />.model flat, stdcall<br />option casemap&#58; none<br /><br />include \masm32\include\windows.inc<br />include \masm32\include\kernel32.inc<br />include \masm32\include\masm32.inc<br />include \masm32\include\debug.inc<br /><br />includelib \masm32\lib\kernel32.lib<br />includelib \masm32\lib\masm32.lib<br />includelib \masm32\lib\debug.lib<br /><br />.data<br />szErr1 byte &quot;First error&quot;, 0<br />szErr2 byte &quot;Second error&quot;, 0<br />szErr3 byte &quot;Third error&quot;, 0<br />pErrors dword 3 dup&#40;0&#41;<br /><br />.code<br />main&#58;<br />    mov pErrors&#91;0&#93;, offset szErr1<br />    mov pErrors&#91;4&#93;, offset szErr2<br />    mov pErrors&#91;8&#93;, offset szErr3        <br />    xor eax, eax<br />    .while eax &lt;= 2<br />        PrintStringByAddr pErrors&#91;eax*4&#93;<br />        inc eax<br />    .endw<br />    ret<br />end main<br /></code></pre><br />I hope it will help you. :)</div>
    <div class="meta">Posted on 2002-05-22 21:41:29 by vkim</div>
   </div>
   <div class="post" id="post-39515">
    <div class="subject"><a href="#post-39515">assert</a></div>
    <div class="body">Cheers vkim.  From now on I'll definitely be using those macros...<br /><br />EDIT...<br />Any thing wrong with this code?  It works but just checking if there's any pitfalls which I should look out for:<br /><br /><pre><code><br />.data<br />szFT_OK		    db 'FT_OK',0<br />szFT_INV_HAN	    db 'FT_INVALID_HANDLE',0<br />szFT_DEV_NOT_FOU    db 'FT_DEVICE_NOT_FOUND',0<br />szFT_DEV_NOT_OPE    db 'FT_DEVICE_NOT_OPENED',0<br />szFT_IO_ERR	    db 'FT_IO_ERROR',0<br />szFT_INS_RES	    db 'FT_INSUFFICIENT_RESOURCES',0<br />szFT_INV_PAR	    db 'FT_INVALID_PARAMETER',0<br /><br />pszFTErrors dd offset szFT_OK<br />	    dd offset szFT_INV_HAN<br />	    dd offset szFT_DEV_NOT_FOU<br />	    dd offset szFT_DEV_NOT_OPE<br />	    dd offset szFT_IO_ERR<br />	    dd offset szFT_INS_RES<br />	    dd offset szFT_INV_PAR<br /></code></pre></div>
    <div class="meta">Posted on 2002-05-23 10:00:19 by MArtial_Code</div>
   </div>
  </div>
 </body>
</html>