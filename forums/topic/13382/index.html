<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>funktion wich have the same names but different counts of Pa - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13382" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13382">funktion wich have the same names but different counts of Pa</a></p>
   <div class="post" id="post-103699">
    <div class="subject"><a href="#post-103699">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">Hi, the topic says all, its possoble?<br /><br />Well D???????????????????????????????????????ne!</div>
    <div class="meta">Posted on 2003-05-18 08:41:01 by Forginforcer</div>
   </div>
   <div class="post" id="post-103705">
    <div class="subject"><a href="#post-103705">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">*yawn* asm is no hll. Thus, I doubt the above is possible.</div>
    <div class="meta">Posted on 2003-05-18 09:16:36 by roticv</div>
   </div>
   <div class="post" id="post-103709">
    <div class="subject"><a href="#post-103709">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">I'm not sure exactly what you mean, but look up<br />VARARG in your MASM references.</div>
    <div class="meta">Posted on 2003-05-18 09:29:06 by anon</div>
   </div>
   <div class="post" id="post-103710">
    <div class="subject"><a href="#post-103710">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">in c++ ist possible...</div>
    <div class="meta">Posted on 2003-05-18 09:32:15 by Forginforcer</div>
   </div>
   <div class="post" id="post-103711">
    <div class="subject"><a href="#post-103711">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">Try it and see what happens:grin: <br /><br />best regards<br /><br />czDrillard</div>
    <div class="meta">Posted on 2003-05-18 09:34:31 by czDrillard</div>
   </div>
   <div class="post" id="post-103719">
    <div class="subject"><a href="#post-103719">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">I dont want to make something wrong.<br />I have got a server and i dont want to let crash it.<br />Its at the moment off, but i'm veryy afraid! :grin: :grin: :grin: <br /><br />Jokes by side, i will test it!</div>
    <div class="meta">Posted on 2003-05-18 10:05:29 by Forginforcer</div>
   </div>
   <div class="post" id="post-103725">
    <div class="subject"><a href="#post-103725">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">function overloading in eg C++ is handled through name mangling, so at object/linker level, the function names are no longer the same.</div>
    <div class="meta">Posted on 2003-05-18 10:29:53 by f0dder</div>
   </div>
   <div class="post" id="post-103726">
    <div class="subject"><a href="#post-103726">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">error A2111: conflicting parameter definition :eek:</div>
    <div class="meta">Posted on 2003-05-18 10:30:54 by Forginforcer</div>
   </div>
   <div class="post" id="post-103728">
    <div class="subject"><a href="#post-103728">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">so its defenitiv not possible to do that ?</div>
    <div class="meta">Posted on 2003-05-18 10:31:48 by Forginforcer</div>
   </div>
   <div class="post" id="post-103732">
    <div class="subject"><a href="#post-103732">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body"><div class="quote"><br />so its defenitiv not possible to do that ? </div>Only with MACROs is it possible and it is MUCH work to get right - may as well build a new assembler.</div>
    <div class="meta">Posted on 2003-05-18 11:12:47 by bitRAKE</div>
   </div>
   <div class="post" id="post-103734">
    <div class="subject"><a href="#post-103734">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">No MASM is pretty coool !<br /><br />A nother way would be to create a programm, wich get startet before the assembler wich changes the programm names.<br /><br />But I will leave it, I will give the funktion diferent names.</div>
    <div class="meta">Posted on 2003-05-18 11:15:36 by Forginforcer</div>
   </div>
   <div class="post" id="post-103738">
    <div class="subject"><a href="#post-103738">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">Afternoon, Forginforcer.<br /><br />As anon suggested, you can do it using VARARG.<br /><br />However... you will still need to tell your code what to do.<br /><br />One way would be to use the first arg to tell your proc how many args there are in total.<br />Another way would be to do what wsprintf seems to do, and that is to know how many extra args there are depending upon the supplied formatting string.<br /><br />Note that this isn't the same as how you do it in C++.<br />As f0dder has mentioned, the C++ compiler mangles the names of the various functions which have the same name so that in the end, no function actually has the same name (it's done transparently so you never know it's doing this).<br /><br />With asm and VARARG, you'll have to do everything within the same proc.<br /><br />The prototype could be possibly:<br /><pre><code><br />myFormattingProc PROTO C &#58;DWORD, &#58;DWORD, &#58;VARARG<br /></code></pre><br /><br />The proc itself, if using a formatting string to grab the number of args, could be something like this:<br /><pre><code><br />myFormattingProc PROC C outputbuffer&#58;DWORD, formatstring&#58;DWORD, args&#58;VARARG<br />.data<br />    mylittlebuffer  db  128 dup &#40;0&#41;<br />    thefMtStrinG    db &quot;%lu&quot;,0<br />.code<br /><br /><br />    ; first arg is a pointer to a buffer<br />    ; second arg is a pointer to a string with formatting info<br />    ; the number of extra args is dependant upon how many %'s are in the formatting string<br /><br />    push esi<br />    push edi<br />    mov esi, formatstring<br />    mov edi, outputbuffer<br /><br />    xor edx, edx        ; offset to formatting args<br />    @formatbuffer&#58;<br /><br />    lodsb               ; grab the byte at esi<br /><br />    cmp al, '%'         ; is it a formatting character?<br />    jnz @storechar      ; nope<br /><br />    lodsb               ; yep, so find out what type of data this is<br />    cmp al, 'd'         ; it's a number?<br />    jnz @nexttype       ; nope<br /><br />    push edx            ; &quot;wsprintf&quot; destroys our offset value, so save/restore it<br />    lea eax, args<br />    add eax, edx<br />    invoke wsprintf, ADDR mylittlebuffer, ADDR thefMtStrinG, DWORD PTR &#91;eax&#93;<br />    push esi<br />    mov esi, offset mylittlebuffer<br />    invoke lstrlen, ADDR mylittlebuffer<br />    mov ecx, eax<br />    rep movsb<br />    <br />    pop esi<br />    pop edx<br /><br />    jmp @grabnextchar<br />    <br />    @nexttype&#58; <br />    ; check for next type of possible data<br />    ; since this proc only handles numbers &#40;%d&#41; ...<br />    ; return an empty buffer if we find something<br />    ; we don't know how to handle<br />    mov edi, outputbuffer<br />    mov BYTE PTR &#91;edi&#93;, 0<br />    pop edi<br />    pop esi<br />    ret<br /><br />@grabnextchar&#58;<br /><br />    add edx, 4          ; update offset to next possible formatting arg<br />    jmp @formatbuffer<br /><br />    @storechar&#58;<br />    stosb               ; store character in outputbuffer<br />    cmp al, 0           ; finished?<br />    jnz @formatbuffer   ; nope. check next character    <br /><br />    pop edi<br />    pop esi<br /><br />    ret<br />myFormattingProc ENDP<br /></code></pre><br /><br />And you'd call it like so:<br /><pre><code><br />.data<br />    szOK            db  &quot;OK&quot;,0<br />    szoutputbuffer  db  256 dup &#40;0&#41;<br />    szformatstring  db  &quot;1st Arg&#58;%d&quot;,13,10,<br />                        &quot;2nd Arg&#58;%d&quot;,13,10,<br />                        &quot;3rd Arg&#58;%d&quot;,0<br />.code<br />    invoke myFormattingProc, ADDR szoutputbuffer, ADDR szformatstring, 10, 5, 243<br />    invoke MessageBox, NULL, ADDR szoutputbuffer, ADDR szOK, MB_OK<br /></code></pre><br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2003-05-18 11:24:36 by Scronty</div>
   </div>
   <div class="post" id="post-103740">
    <div class="subject"><a href="#post-103740">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">WOW:alright: <br /><br />Thanks, looks very interisting!</div>
    <div class="meta">Posted on 2003-05-18 11:46:59 by Forginforcer</div>
   </div>
   <div class="post" id="post-103744">
    <div class="subject"><a href="#post-103744">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">Use JAVA :tongue:</div>
    <div class="meta">Posted on 2003-05-18 11:55:56 by bazik</div>
   </div>
   <div class="post" id="post-103747">
    <div class="subject"><a href="#post-103747">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">I do not understand what you tip should be? bazik!<br /><br />I want to programm in JAVA</div>
    <div class="meta">Posted on 2003-05-18 12:18:14 by Forginforcer</div>
   </div>
   <div class="post" id="post-103763">
    <div class="subject"><a href="#post-103763">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body"><div class="quote"><br />function overloading in eg C++ is handled through name mangling, so at object/linker level, the function names are no longer the same. </div><br /><br />amm i have a question, the the names are changed, ok, but how are they exported??, like i understand for example if you use.. for example:<br /><br />global _externlabel ;this with 4 dword args<br />_externlabel:<br /><br />global _externlabel ;this only with 3<br />_externlabel:<br /><br />i think here i will obtain a error, remember that function overloading works only for the param count/the diference of the arguments...<br /><br />eg void uno(int); void uno(char); can be but void uno(int) int uno(int) can't<br /><br />mm i think the solution if i dont understand bad.. is @numberOfBytesOfTheArgs eg:<br /><br />global _externlabel@16 ;this with 4 dword args<br />_externlabel@16:<br /><br />global _externlabel@12 ;this only with 3<br />_externlabel@12:<br /><br /><br />But here is a problem i think.. what append if two diferent proc at the end have the same number of bytes in theis arguments???, how is this handled, eg void uno(DWORD); void uno(WORD, WORD);<br /><br /><br />mmm, ok the other question is.. if i do some like that??, how i can link?? for example if in other file i want call _externlabel, WORD1, WORD2 how the linker know what of the both are and not call the wrong???<br /><br />== how i can refer to a specific label, only callin the name, without the count.. and if is the correct count.. how i distingue betwen the diferent types  of data???</div>
    <div class="meta">Posted on 2003-05-18 13:26:47 by rea</div>
   </div>
   <div class="post" id="post-103783">
    <div class="subject"><a href="#post-103783">funktion wich have the same names but different counts of Pa</a></div>
    <div class="body">Afternoon, hgb.<br /><br /><div class="quote">== how i can refer to a specific label, only callin the name, without the count.. and if is the correct count.. how i distingue betwen the diferent types of data???</div><br />You can't.<br />That is a feature of C++, not asm.<br />The compiler would have to understand the differences between data types (Float, Unsigned Char, Int, etc) to be able to mangle the function names correctly. It doesn't just go by the param count.<br />A normal C function != overloaded C++ function.<br /><br />It would be a huge job to build a preprocessor for an asm file to mangle up overloaded procs.<br /><br />Far easier to just send the same proc a variable to tell it which section of code to execute.<br />i.e. myProc proc C versiontype:DWORD, args:VARARG<br />where &quot;versiontype&quot; could be:<br />1 for a single param: a single int;<br />2 for two params: two floats;<br />3 for varied params, but two minimum: an output string, a formatting string, and varied number of args for formatting.<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2003-05-18 17:22:13 by Scronty</div>
   </div>
  </div>
 </body>
</html>