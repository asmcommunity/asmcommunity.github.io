<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Duplex - an IOCP Server/Client - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26024" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26024">Duplex - an IOCP Server/Client</a></p>
   <div class="post" id="post-189631">
    <div class="subject"><a href="#post-189631">Duplex - an IOCP Server/Client</a></div>
    <div class="body">I&#39;ve been spending some time away from Project XASM in order to regroup and collect my thoughts.<br />During this interval, I dusted off my IOCP server engine (an old copy, from before I made it modular), and began tinkering with it.<br /><br />Duplex is an IOCP Server/Client core which supports some very nice features:<br />-is 100% asynchronous<br />-can Listen on multiple Ports<br />-can handle multiple Protocols on the same Port<br />-can assign different Protocol Handlers to each individual TCP Session<br />-can change the assigned Protocol Handler at any time<br />-can make outgoing connections<br />-is immune to Zombie DoS attacks<br />-can support tens of thousands of concurrent TCP Sessions (up to Windows Handle Limit)<br />-does not rely on CRAP such as &#39;Scavenger Threads&#39;<br /><br />Duplex began life as a VOIP engine, and inherently supports full duplex audio streaming with TruSpeech compression (8khz, 16 bit), I just got carried away with the network support.<br /><br />If this sounds interesting, and you&#39;d like to see the sourcecode and/or test the binary, say so!<br /></div>
    <div class="meta">Posted on 2007-06-16 00:06:03 by Homer</div>
   </div>
   <div class="post" id="post-189633">
    <div class="subject"><a href="#post-189633">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body"><div class="quote"><br />-is immune to Zombie DoS attacks<br /></div><br />If you find a way to immunize against bandwidth saturation, let me know :P<br /><br /><div class="quote"><br />-does not rely on CRAP such as &#39;Scavenger Threads&#39;<br /></div><br />Scavenger threads?<br /></div>
    <div class="meta">Posted on 2007-06-16 04:54:37 by f0dder</div>
   </div>
   <div class="post" id="post-189638">
    <div class="subject"><a href="#post-189638">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body">f0dder,<br /><br /><div class="quote">If you find a way to immunize against bandwidth saturation, let me know :P</div><br /><br />Last time I talked to Homer about the VOIP Engine project he had going, we were discussing various bandwidth optimization possibilities. He stated at the time he was going to try and get it to eventually be capable of running on a shared network of dialups so bandwidth was always an issue. At that time, most of the ideas were geared towards the audio itself rather than the protocol, but being as long as it&#39;s been I wouldn&#39;t doubt if he&#39;s put some form of bandwidth optimization and protection in place..<br /><br />** If not that would be something interesting for the next time your bored, Homer ;)<br /><br /><div class="quote">Scavenger threads?</div><br /><br />In short, a thread that gathers information/data from the thread pool. Handy in some cases, but tend to lead to hard to track down bugs if your not careful. There are several of them implemented in IIS and even in the Windows NT5.0 scheduler (iirc).<br /><br />Regards,<br />Bryant Keller<br /></div>
    <div class="meta">Posted on 2007-06-16 19:14:51 by Synfire</div>
   </div>
   <div class="post" id="post-189639">
    <div class="subject"><a href="#post-189639">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body">hmm wouldnt mind seeing the source and playing with it homer plz</div>
    <div class="meta">Posted on 2007-06-17 09:51:54 by evlncrn8</div>
   </div>
   <div class="post" id="post-189640">
    <div class="subject"><a href="#post-189640">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body"><strong>Synfire:</strong> I was talking about guarding against people maliciously flooding you from a zombie botnet, not optimizing the protocol :)<br /></div>
    <div class="meta">Posted on 2007-06-17 10:42:01 by f0dder</div>
   </div>
   <div class="post" id="post-189645">
    <div class="subject"><a href="#post-189645">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body"><div class="quote"><strong>Synfire:</strong> I was talking about guarding against people maliciously flooding you from a zombie botnet, not optimizing the protocol :)</div><br /><br />Ah, okay. When you said saturation my first thought was of the flooding that occurs naturally by low bandwidth hosts, which is why I thought you meant about optimizing the protocol. In the case of neutralizing a botnet.. yeah, that would be a bit difficult. The only solutions I can think of are kinda out there and not really plausable for your average server setup (and it wouldn&#39;t even be that effective against larger botnets anyways).</div>
    <div class="meta">Posted on 2007-06-18 18:33:12 by Synfire</div>
   </div>
   <div class="post" id="post-189696">
    <div class="subject"><a href="#post-189696">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body">I&#39;ve almost literally driven myself crazy over IOCP - so yes, I&#39;d definately like to check it out.&nbsp; Does your method require a window (visible or invisible) to function?&nbsp; I noticed that you specified TCP connections being supported - does it also support UDP listener or server sockets?&nbsp; Anyway, thanks - I look forward to checking it out.</div>
    <div class="meta">Posted on 2007-06-27 22:53:43 by Jascwa</div>
   </div>
   <div class="post" id="post-189700">
    <div class="subject"><a href="#post-189700">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body">Beieng horribly naive - but interested, I found the below of some<br />use in understanding what the hell you ppl were on about.<br /><br />http://www.codeproject.com/internet/iocp.asp</div>
    <div class="meta">Posted on 2007-06-29 01:47:32 by Draakie</div>
   </div>
   <div class="post" id="post-189738">
    <div class="subject"><a href="#post-189738">Re: Duplex - an IOCP Server/Client</a></div>
    <div class="body"><br />Although there is no real requirement for a window of any kind, my Duplex.Init method does expect a hWnd or hDlg, although it does not actually do anything with it, other than set that handle as &#39;pOwner&#39; for the instance of the Duplex object, which in turn allows any derived protocol objects that you might create to find that window later.. if you didn&#39;t care, you could just pass any value you wanted.<br /><br />My implementation does not support UDP, although that could be done too.<br /><br />Spent a long while looking for a silly bug - since this is a &#39;just for fun, until I need it&#39; project, I&#39;ve been pretty relaxed about the timeframe, but hang in there, I&#39;ll post full source very soon, I&#39;m almost done implementing the VOIP protocol handler.<br /><br />I&#39;m still asking myself why anyone would wish to do some of the funky stuff that Duplex can do, but it tickles me that I can implement crazy stuff like switching protocols midway thru a session anyway :P<br /><br /></div>
    <div class="meta">Posted on 2007-07-03 12:22:16 by Homer</div>
   </div>
  </div>
 </body>
</html>