<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>changing syscolors only for prog - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=7238" />
    <link rel="next" href="../?id=7238&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=7238">changing syscolors only for prog</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=7238&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=7238&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="7238" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=7238&amp;page=2">&gt;</a><a href="../?id=7238&amp;page=3">&raquo;</a></form>   <div class="post" id="post-52385">
    <div class="subject"><a href="#post-52385">changing syscolors only for prog</a></div>
    <div class="body">to explain the header nearer:<br /><br />i want to change the syscolors, so that only MY OWN app uses these colors - and the rest of the programs should keep their own colors. using SetSysColor changes everything and i don't know other routines. i alos don't know exactly how to ownerdraw everything (especially the window itselfs!)<br /><br /><br /><br /><br />i've edited the image in relation to the cr*cking related material... now it's just a black window!<br /><img src="http://www.8ung.at/3dsmax/example.jpg" /><br /></div>
    <div class="meta">Posted on 2002-08-09 13:31:06 by hartyl</div>
   </div>
   <div class="post" id="post-52396">
    <div class="subject"><a href="#post-52396">changing syscolors only for prog</a></div>
    <div class="body">Have a look at this thread (they color a listbox but it can help you on the way), there are aslo some links to other threads there:<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=6201&amp;highlight=Color+Listbox">http://www.asmcommunity.net/board/index.php?topic=6201&amp;highlight=Color+Listbox</a></div>
    <div class="meta">Posted on 2002-08-09 14:28:00 by scientica</div>
   </div>
   <div class="post" id="post-52400">
    <div class="subject"><a href="#post-52400">changing syscolors only for prog</a></div>
    <div class="body">WM_CTLCOLOR*</div>
    <div class="meta">Posted on 2002-08-09 15:10:56 by comrade</div>
   </div>
   <div class="post" id="post-52402">
    <div class="subject"><a href="#post-52402">changing syscolors only for prog</a></div>
    <div class="body">Depending on exactly what you want to change there are a number of ways to handle this.<br /><br />For the Non-Client Area (caption bar, frame) you'll probably wanna intercept WM_NCPAINT and call DrawCaption and/or DrawFrameControl or some custom procedure<br /><br />For Menus, you can use SetMenuInfo to set the background brush and other things. Also, you can intercept WM_DRAWITEM and WM_MEASUREITEM and set the menu items to OWNERDRAWN<br /><br />For controls there are the WM_CTLCOLORxxx message that'll let you change their appearance.<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-08-09 15:18:17 by chorus</div>
   </div>
   <div class="post" id="post-52408">
    <div class="subject"><a href="#post-52408">changing syscolors only for prog</a></div>
    <div class="body">Take a look at an proggie i wrote to test owner drawing</div>
    <div class="meta">Posted on 2002-08-09 16:01:34 by ante</div>
   </div>
   <div class="post" id="post-52495">
    <div class="subject"><a href="#post-52495">changing syscolors only for prog</a></div>
    <div class="body">grml... with your WM_CTLCOLORxxx-message i can only give window a brush to draw my costom-colored background and text. have you seen the image above? there's everything changed - the borders, the backgrounds, even the close and minimize-buttons! THAT's what i want. seems that i have to owner-draw everything - how?</div>
    <div class="meta">Posted on 2002-08-10 09:56:31 by hartyl</div>
   </div>
   <div class="post" id="post-52496">
    <div class="subject"><a href="#post-52496">changing syscolors only for prog</a></div>
    <div class="body">Maybe you could use superclassing for buttons etc.<br /><br />btw. the minimize and close buttons are just bitmaps stored as resources and everything in the window is subclassed/superclassed.</div>
    <div class="meta">Posted on 2002-08-10 10:00:30 by ante</div>
   </div>
   <div class="post" id="post-52513">
    <div class="subject"><a href="#post-52513">changing syscolors only for prog</a></div>
    <div class="body">Ernie has a tutorial on his web page for his Timer program. It's very good.<br /><br /><br /><a target="_blank" href="http://ourworld.compuserve.com/homepages/ernies_world/a.htm">http://ourworld.compuserve.com/homepages/ernies_world/a.htm</a><br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-08-10 11:36:39 by chorus</div>
   </div>
   <div class="post" id="post-52535">
    <div class="subject"><a href="#post-52535">HOW???</a></div>
    <div class="body">you tell me, on which way i could get to my finish - but you dont tell me HOW?!<br />i've never done superclassing and subclassing, so i don't know how it works!<br /><br />@chours: have you exactly viewed your link? the program, you mentioned, shows how to use a bitmap as a background. it looks like there are normal buttons on the window, but they're on the bitmap and cant be used...</div>
    <div class="meta">Posted on 2002-08-10 14:14:14 by hartyl</div>
   </div>
   <div class="post" id="post-52537">
    <div class="subject"><a href="#post-52537">changing syscolors only for prog</a></div>
    <div class="body">hartyl, did you <strong>download</strong> the executable and install it. Or did you just post this message? The buttons are perfectly usable. It's right in front of me. They even depress when you click the mouse buttons. Oooh nifty.<br /><br />If you want to learn about superclassing and subclassing go to Iczelions page: <a target="_blank" href="http://win32asm.cjb.net">http://win32asm.cjb.net</a> and go to the tutorials section. The relevent information is clearly labelled.<br /><br />Furthermore, you can look into the APIs and WM_xxx message I mentioned earlier.<br /><br />Both Ernie's and Iczelion's tutorials are quite infomative. I don't know what else you want short of somebody programming the app for you.<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-08-10 14:54:28 by chorus</div>
   </div>
   <div class="post" id="post-52552">
    <div class="subject"><a href="#post-52552">changing syscolors only for prog</a></div>
    <div class="body">I've tried this:<br /><pre><code><br />	.ELSEIF 	uMsg==WM_CTLCOLOREDIT		|| \<br />		uMsg==WM_CTLCOLORSTATIC		|| \<br />		uMsg==WM_CTLCOLORBTN<br />			invoke SetBkMode,wParam,TRANSPARENT<br />			;invoke CreatePatternBrush,hBmpRegion<br />			;invoke GetStockObject,NULL_BRUSH<br />		<br />			mov eax,hBackBrush<br />			ret<br /></code></pre><br /><br />for a dialog on WinXP. hBackBrush is the pattern brush I created for the hbrBackground <br />member of the window class of my dialog. (I've also tried the latter two)<br /><br />It works for radio buttons and static controls but not for push buttons (they're still standard grey) and<br />my edit box is colored but text and background get smeared when scrolling.<br /><br />Will I have to owner draw those controls ?<br /><br />chorus:<br />SetMenuInfo is real cool :alright: <br /><br />Regards,<br /><br />goofee</div>
    <div class="meta">Posted on 2002-08-10 17:25:45 by goofee</div>
   </div>
   <div class="post" id="post-52555">
    <div class="subject"><a href="#post-52555">changing syscolors only for prog</a></div>
    <div class="body">Have your program(s) save and set the syscolors.<br /><br /><br />BOOL WINAPI SetSysColors(<br />  int cElements,                 // number of elements to change<br />  CONST INT *lpaElements,        // address of array of elements<br />  CONST COLORREF *lpaRgbValues   // address of array of RGB values<br />);<br /> <br />GetSysColors..........<br /><br />Hope this helps you.</div>
    <div class="meta">Posted on 2002-08-10 18:02:38 by Roy Cline</div>
   </div>
   <div class="post" id="post-52556">
    <div class="subject"><a href="#post-52556">changing syscolors only for prog</a></div>
    <div class="body">No, actually it doesn't. ;) <br /><br />I'm trying to use Bitmap as background.</div>
    <div class="meta">Posted on 2002-08-10 18:06:44 by goofee</div>
   </div>
   <div class="post" id="post-52559">
    <div class="subject"><a href="#post-52559">changing syscolors only for prog</a></div>
    <div class="body">goofee<br /><br />I think you blit the bitmap to the DC.<br /><br />Also, maybe you could dosplashscreen and hold that as<br />your background - of this I am not sure.<br /><br />Hope this helps.</div>
    <div class="meta">Posted on 2002-08-10 18:42:42 by Roy Cline</div>
   </div>
   <div class="post" id="post-52563">
    <div class="subject"><a href="#post-52563">changing syscolors only for prog</a></div>
    <div class="body">I've tried this:<br /><br /><br /><pre><code><br />	invoke  LoadBitmap,hInstance,751<br />	mov hBmpRegion,eax<br />	invoke CreatePatternBrush,eax<br />	mov hBackBrush,eax<br />	mov wc.hbrBackground,eax	;COLOR_BTNFACE+1<br /><br />	.<br />	.<br />	.<br /><br />	.ELSEIF 	uMsg==WM_CTLCOLOREDIT		|| \<br />		uMsg==WM_CTLCOLORSTATIC		|| \<br />		uMsg==WM_CTLCOLORBTN<br />			invoke SetBkMode,wParam,TRANSPARENT<br />			;invoke CreatePatternBrush,hBmpRegion<br />			;invoke GetStockObject,NULL_BRUSH<br />		<br />			mov eax,hBackBrush<br />			ret<br /></code></pre><br /><br /><div class="quote"><br />It works for radio buttons and static controls but not for push buttons (they're still standard grey) and<br />my edit box is colored but text and background get smeared when scrolling.<br /></div><br /><br /><div class="quote"><br />hBackBrush is the pattern brush I created for the hbrBackground <br />member of the window class of my dialog.<br /></div><br /><br />As you can see I am not blitting the bitmap myself.<br /><br />My problem is somewhat similar to this one:<br /><a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=5043&amp;highlight=WMCTLCOLOREDIT">http://www.asmcommunity.net/board/index.php?topic=5043&amp;highlight=WMCTLCOLOREDIT</a><br />except I'm not having problems with the input itself but with the scrolling in the listbox.<br /><br />I'll attach the file and a .d85 file wich you can open from the File Menu to see what I mean. (There will be errors but that's ok.)<br /><br /><br /><br />Accidently messed s.th. up before posting:<br /><br />		invoke SetBkMode,wParam,TRANSPARENT<br />		invoke CreatePatternBrush,hBmpRegion<br />		invoke GetStockObject,NULL_BRUSH<br />must be<br />		invoke SetBkMode,wParam,TRANSPARENT<br />		;invoke CreatePatternBrush,hBmpRegion<br />		;invoke GetStockObject,NULL_BRUSH<br /></div>
    <div class="meta">Posted on 2002-08-10 19:27:02 by goofee</div>
   </div>
   <div class="post" id="post-52565">
    <div class="subject"><a href="#post-52565">changing syscolors only for prog</a></div>
    <div class="body">Listbox messed up after scrolling and buttons don't get colored at all :confused: <br />This is what it looks like:</div>
    <div class="meta">Posted on 2002-08-10 19:47:24 by goofee</div>
   </div>
   <div class="post" id="post-52582">
    <div class="subject"><a href="#post-52582">changing syscolors only for prog</a></div>
    <div class="body">Ok, from what I finally found after searching the board for hours :o it look I <strong>will</strong> have to use owner drawn buttons.<br />Quite a few for edit contrls, too, but nothing useful for my edit problem.<br /><br />Would be nice if somone had a look at it and suprises me when I get up - 6 a.m., bedtime - I'll see you tomorrow. :o</div>
    <div class="meta">Posted on 2002-08-10 22:50:06 by goofee</div>
   </div>
   <div class="post" id="post-52591">
    <div class="subject"><a href="#post-52591">changing syscolors only for prog</a></div>
    <div class="body">Goofee,<br /> the smearing is caused by a null background brush to the list box. Or if you're subclassing it you might be intercepting the WM_ERASEBKGND message... I didn't really look at your code yet, but I've seen this problem before and I'm sure it's one of those two.<br /><br />If the list box is owner drawn, you must erase the background either by passing a non-null brush or by painting the list box items yourself and calling FillRect or similar.<br /><br />As you've already discovered, buttons are nasty for changing the background. From what I know you <strong>must</strong> owner draw them to change the background.<br /><br />And yes, SetMenuInfo is very cool (you wouldn't believe how long it took me to find that API...)<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-08-10 23:46:17 by chorus</div>
   </div>
   <div class="post" id="post-52592">
    <div class="subject"><a href="#post-52592">changing syscolors only for prog</a></div>
    <div class="body">Just downloaded the program and I see it's not a list box but an edit control. So never mind that bit about drawing the list box items ;)<br /><br />It's the background brush that needs to be changed<br /><br />--Chorus</div>
    <div class="meta">Posted on 2002-08-10 23:50:34 by chorus</div>
   </div>
   <div class="post" id="post-52614">
    <div class="subject"><a href="#post-52614">changing syscolors only for prog</a></div>
    <div class="body">Morning, I just got out of bed.<br /><br />Changed to what and why ?<br />It works for the other two single line edit controls ... :confused: <br />You can type only numbers but deleting and rewriting is fine...<br /><br />I've also noticed that when the window is redrawn (like when you <br />move it out the screen) the listbox is redrawn correctly, too. confused: :confused: <br />(btw passing a null brush don't help).:</div>
    <div class="meta">Posted on 2002-08-11 05:27:40 by goofee</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=7238&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=7238&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="7238" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=7238&amp;page=2">&gt;</a><a href="../?id=7238&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>