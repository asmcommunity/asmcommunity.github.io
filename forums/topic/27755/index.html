<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to assemble a program in MASM32 for DOS? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=27755" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=27755">How to assemble a program in MASM32 for DOS?</a></p>
   <div class="post" id="post-197829">
    <div class="subject"><a href="#post-197829">How to assemble a program in MASM32 for DOS?</a></div>
    <div class="body">How to assemble a program in MASM32 for DOS?

Is it possible to use MASM32 to make programs for DOS?

I would be much obliged for any example codes 
and ‘MakeIt.bat’ files.</div>
    <div class="meta">Posted on 2001-04-22 16:27:00 by Ol</div>
   </div>
   <div class="post" id="post-197830">
    <div class="subject"><a href="#post-197830">How to assemble a program in MASM32 for DOS?</a></div>
    <div class="body">Yes, it's possible.  But you must use MS's old OMF linker, founder under icz's downloads.  Then when you use masm, instead off passing the command, /COFF, use /OMF instead.

That should do the trick.</div>
    <div class="meta">Posted on 2001-04-22 17:50:00 by Jon Richardson</div>
   </div>
   <div class="post" id="post-197831">
    <div class="subject"><a href="#post-197831">How to assemble a program in MASM32 for DOS?</a></div>
    <div class="body">Absolutely.  Just don't use the directive .model flat (use tiny,
small, compact, large, or huge instead).  You can still use
.386 if you want, however you may run into some warnings and
conversion problems if .386 is before the beginning of your 
code/data segments.  The problem comes in two forms.  The first
is that MASM will always chain to it's linker.  You'll have to
create a specific batch file to use the /c option for MASM (but
you might not want to use the /coff switch).  The second problem
is the linker itself.  The linker which comes in MASM32 is only
tooled to handle 32 bit protected mode programs.  If you look
online, you can probably find a free, useful DOS linker, or I
believe that Iczelion's site has a Microsoft '16 bit' linker
program for download.  (I hate the term '16 bit' when referring
to DOS based programs because there is such a thing as 16 bit
protected mode, not to mention 32 bit real mode. :))</div>
    <div class="meta">Posted on 2001-04-22 17:55:00 by Racso</div>
   </div>
   <div class="post" id="post-197832">
    <div class="subject"><a href="#post-197832">How to assemble a program in MASM32 for DOS?</a></div>
    <div class="body">How do you make a Win32 console app using the current "ml" and "link"?</div>
    <div class="meta">Posted on 2001-04-22 18:49:00 by HeroInc</div>
   </div>
  </div>
 </body>
</html>