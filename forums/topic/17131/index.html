<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>reading files - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17131" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=17131">reading files</a></p>
   <div class="post" id="post-132845">
    <div class="subject"><a href="#post-132845">reading files</a></div>
    <div class="body">Hi, im new here :)<br /><br />I'm trying to get into assembly programming, so to start off I want to make a program that reads a text file and displays the output. I've already written a hello world program, and have a pretty good understanding of the basics of assembly.<br /><br />(I'm using the gas assembler which is AT&amp;T syntax)<br /><br />1) I don't know how to read the file. I know I need to read (syscall 3) and write (syscall 4). What I'm stuck on is what do I use for *buf?<pre><code>ssize_t read&#40;int fd, void *buf, size_t count&#41;;</code></pre>Would I use an .ascii and read some of the file, write it to stdout, and continue looping until end of file(I think when read returns 0)?<br /><br />2) Where is  a listing of mnemonics? Like mov, add, etc and their meanings?<br /><br />Thank you !<br />--monkey</div>
    <div class="meta">Posted on 2004-02-07 15:29:24 by ninmonkey</div>
   </div>
   <div class="post" id="post-132848">
    <div class="subject"><a href="#post-132848">reading files</a></div>
    <div class="body">You sound confused with some *nix-based OS.<br />In Windows you would use the CreateFile()/ReadFile()/CloseHandle() APIs, etc.<br />The buf variable is ofcourse a pointer to the buffer that the data should be read into.<br /><br />For a list of mnemonics, download the Intel Instruction Reference manual from their website somewhere (in PDF form).<br /><br />And I would suggest learning a simpler language first, and master the art of programming itself, so your only questions will be asm-related, rather than &quot;how do I read a file?&quot;.</div>
    <div class="meta">Posted on 2004-02-07 16:52:44 by Henk-Jan</div>
   </div>
   <div class="post" id="post-132876">
    <div class="subject"><a href="#post-132876">reading files</a></div>
    <div class="body">Yeah, maybe this thread needs to be moved to Heap so that syscall stuff can be discussed.  :)<br /><br />Anyhow, as for the first question, how do you do that in C?  If you know it, it is a simple matter of translation.  Really a no-brainer even for a newbie.  And if you use GAS, you _have to_ read gas manual, because you cannot directly copy and paste Intel manual stuff.</div>
    <div class="meta">Posted on 2004-02-08 00:34:36 by Starless</div>
   </div>
   <div class="post" id="post-132886">
    <div class="subject"><a href="#post-132886">reading files</a></div>
    <div class="body">Hi Ninmonkey,<br /><br />Seems like you are indeed a newbie to assembler programming. My suggestion is you start reading some tut's concerning the subject. To start out learning the basics of asm-mnemonics take a peek at this site: <br /><a target="_blank" href="http://exagone.cjb.net">http://exagone.cjb.net</a><br />it covers basic info about mnemonics including examples of their use (just download the html-help in the tutorial-section).<br />And off course there is the 'queen' of tutorials on Win32asm programming, Iczelions great tutorials on windows programming in assembler. You 'll find them here:<br /><a target="_blank" href="http://win32asm.cjb.net">http://win32asm.cjb.net</a><br /><br />And remeber: At first it 'll feel like you are learning Swahilli or something, but once you get the feel for it, it 'll be as easy as drinking a glass of milk! (meaning: don't give up!, the start is the hardest part!)<br /><br />Just another tip: As you are just starting out, why not concider to use another assembler in combination with an assembler IDE. I personally use Masm (because of its pseudo-high-level-code) and Winasm-IDE. It makes things just so much more comfortable! You 'll find plenty of info about Masm and Winasm on this board. you can also check out these urls:<br /><br /><a target="_blank" href="www.movsd.com">www.movsd.com</a><br /><a target="_blank" href="www.code4u.net/winasm/index.html">www.code4u.net/winasm/index.html</a><br />(off course this is a personal choice, jus check out whitch assembler and/or IDE fits you most).<br /><br /><br />Finally I suggest you get yourself a copy of the Windows API refference (check the board). A must for win32asm-programming!<br /><br />Wish you the best in asm-programming,<br /><br />Friendly greetings,<br /><br />Lovesong.</div>
    <div class="meta">Posted on 2004-02-08 03:32:26 by lovesong</div>
   </div>
   <div class="post" id="post-132887">
    <div class="subject"><a href="#post-132887">reading files</a></div>
    <div class="body">Just question, are you programming for linux or windows?</div>
    <div class="meta">Posted on 2004-02-08 04:10:13 by roticv</div>
   </div>
   <div class="post" id="post-132914">
    <div class="subject"><a href="#post-132914">reading files</a></div>
    <div class="body">roticv: sorry about the confusion :P I forgot to say this was for linux.  But, I was wondering, if I use libc and standard c functions, would a program be pretty easily compiled for linux and windows? (I have gcc, ld, as, etc., the needed binaries to compile from windows)<br />	<br />Henk-Jan: I do know other languages pretty well. I can easily do this in others, but I want to learn assembly.<br /><br />The part that is confusing is I can't find any basic examples on datatypes/how ever you handle them in assembly. Take the .ascii/.string for example, would I be able to modify their sizes/data during runtime? Are they like c-strings? (char arrays) or like std::string?(c++ strings) or something else?<br /><br />Starless: I have the gnu gas manual so I'm okay there :) <br /><br />So basically<br />a) Do you know about assembly+libc on windows and linux or have any usefull links?<br />b) What datatype would I use to store what read(), reads?<br /><br />Thanks</div>
    <div class="meta">Posted on 2004-02-08 11:06:43 by ninmonkey</div>
   </div>
   <div class="post" id="post-132916">
    <div class="subject"><a href="#post-132916">reading files</a></div>
    <div class="body"><div class="quote">Henk-Jan: I do know other languages pretty well. I can easily do this in others, but I want to learn assembly.</div><br /><br />You obviously can't do it in the language that matters though: C.<br />If you know C, asm is just a formality, when it comes to calling API functions. Mind you, one should ask himself why he would use asm at all in such a case. Especially if you are using the C library.<br /><br />What you need is a book on computer organization. Learn how the computer (CPU + memory) works, then asm is simple. You could try reading the first chapters of Art of Assembly, they deal with this subject. You can find it somewhere on the web for free download, google is your friend.</div>
    <div class="meta">Posted on 2004-02-08 11:22:44 by Henk-Jan</div>
   </div>
   <div class="post" id="post-132943">
    <div class="subject"><a href="#post-132943">reading files</a></div>
    <div class="body">Henk-Jan, all: Here's what I have so far, does this look right If i'm reading from stdin?<pre><code>/* reads from stdin */<br />.data<br /><br />buf&#58; <br />  .byte <br /><br />.text<br />  .global _start<br />  <br />_start&#58;<br />  <br />  movl $3,%eax /* syscall read */<br />  movl $0,%ebx /* stdin, buf, 1 byte */<br />  movl $buf,%ecx<br />  movl $1,%edx<br />  int  $0x80<br />  <br />/* if return == 0, then EOF, jump to quit */       <br />  cmp $0,%eax<br />  je _quit<br /><br />/*and print*/<br />  <br />  movl $4,%eax /* sys write */<br />  movl $1,%ebx /* stdout, buf, 1 byte */<br />  movl $buf,%ecx <br />  movl $1,%edx<br />  int  $0x80<br />  <br />/* read again */<br />  jmp _start<br /><br />/*quit*/<br />_quit&#58;<br /><br />  movl $1,%eax /* sys_exit */<br />  movl $0,%ebx /* return 0 */<br />  int  $0x80</code></pre></div>
    <div class="meta">Posted on 2004-02-08 17:00:15 by ninmonkey</div>
   </div>
  </div>
 </body>
</html>