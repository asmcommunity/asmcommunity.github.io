<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>stack - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3419" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3419">stack</a></p>
   <div class="post" id="post-22640">
    <div class="subject"><a href="#post-22640">stack</a></div>
    <div class="body">I know that when a proc ends all the LOCALS are cleared up but what about the arguments? Will they be cleaned up my masm when et is called.</div>
    <div class="meta">Posted on 2002-02-03 11:39:58 by Quantum</div>
   </div>
   <div class="post" id="post-22642">
    <div class="subject"><a href="#post-22642">stack</a></div>
    <div class="body">Yes, the STDCALL method which most windows API functions use, adjust the stack to eliminate the arguments.  MASM hides most of this from the programmer making changes to PROCs easier, and use of them less error prone.</div>
    <div class="meta">Posted on 2002-02-03 12:03:28 by bitRAKE</div>
   </div>
   <div class="post" id="post-22648">
    <div class="subject"><a href="#post-22648">Exception</a></div>
    <div class="body">The most notable exception to this rule is:<br />wsprintfA function that has C calling conventions... <br /><br />so you have to balance the stack at the end for this function (add esp,nr_params*4)</div>
    <div class="meta">Posted on 2002-02-03 12:21:56 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-22677">
    <div class="subject"><a href="#post-22677">stack</a></div>
    <div class="body">Only if you use a gay assembler. Works wonderfully automatically<br />in masm.</div>
    <div class="meta">Posted on 2002-02-03 16:00:39 by f0dder</div>
   </div>
   <div class="post" id="post-22697">
    <div class="subject"><a href="#post-22697">stack</a></div>
    <div class="body">Quantum,<br /><br />basically the stack is temporary storage space for parameters and local variables that is constructed at the beginning of the procedure. The caller pushes the parameters onto the stack and the proc has the space for locals allocated on the stack so when a procedure is finished, neither the locals or the arguments are accessible as the top of the stack is reset back to another location.<br /><br />Regards,<br /><br /><a href="mailto:hutch@movsd.com">hutch@movsd.com</a></div>
    <div class="meta">Posted on 2002-02-03 17:16:27 by hutch--</div>
   </div>
   <div class="post" id="post-22738">
    <div class="subject"><a href="#post-22738">hehe</a></div>
    <div class="body">fodder, what is &quot;a gay&quot; assembler? :D<br /><br />i was doing it even when i used MASM, i guess i missed something, like i should define the PROC C instead of STDCALL is that it? ...</div>
    <div class="meta">Posted on 2002-02-04 01:13:59 by BogdanOntanu</div>
   </div>
   <div class="post" id="post-22759">
    <div class="subject"><a href="#post-22759">stack</a></div>
    <div class="body">To: Super Moderator<br />From: Super Swine<br />------------------------------<br />The method he mentioned only worked with invoke.<br />And you're right about C type - it needed to be declared with proto.<br />SomeCconvProc proto C :DWORD,:VARARG<br />invoke SomeCconvProc h,a,g<br /><br />will result in<br /> push g<br /> push a<br /> push h<br /> call SomeCconvProc<br /> add esp 12 ;! automatically generated!<br /><br />But if you forget either C in proto or use invoke it will not be generated by MASM.<br />I think TASM could do it too.<br /><br />Chao!</div>
    <div class="meta">Posted on 2002-02-04 05:35:32 by The Svin</div>
   </div>
  </div>
 </body>
</html>