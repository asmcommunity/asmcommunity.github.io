<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>infant Hybrid Engine gasps for life - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=17351" />
    <link rel="next" href="../?id=17351&amp;page=2" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=17351">infant Hybrid Engine gasps for life</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=17351&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=17351&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="17351" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=17351&amp;page=2">&gt;</a><a href="../?id=17351&amp;page=3">&raquo;</a></form>   <div class="post" id="post-134420">
    <div class="subject"><a href="#post-134420">infant Hybrid Engine gasps for life</a></div>
    <div class="body">I've been working on my engine some more :)<br />It now supports the following features:<br /><br />-referenced textures (N materials share a texture)<br />-referenced meshes  (N meshes share a reference mesh)<br />-instanced dynamic objects (objects have unique physics)<br />-bounding box and bounding sphere culling options (option for a third layer, simplified shell geometry around complex object)<br />-object-relative &quot;mouse pick ray&quot; intersection testing<br /><br />Intersection tests with &quot;mouse pick ray&quot; are only performed on objects which have passed initial culling test(s).<br /><br />At the moment I can drop objects with the left mouse, and select objects with the right mouse. Multiple object selection is possible (grouped selections).<br /><br />There's currently a small issue with deleting selected objects to be sorted out, and then I'll be continuing toward a simple rigid object physics simulation engine :)<br /><br />All source is object-oriented and is based in Ultrano's ATC oop support.<br />Show your interest, and I'll show my source :)</div>
    <div class="meta">Posted on 2004-02-22 00:28:17 by Homer</div>
   </div>
   <div class="post" id="post-134426">
    <div class="subject"><a href="#post-134426">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Afternoon, EvilHomer2k.<br /><br />I'm showing my interest.<br />Now show your source :).<br /><br />Cheers,<br />Scronty</div>
    <div class="meta">Posted on 2004-02-22 03:10:11 by Scronty</div>
   </div>
   <div class="post" id="post-134444">
    <div class="subject"><a href="#post-134444">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Hi Evilhomer2k<br />I am showing my interest<br />show your code<br />its probably better than my 2d .bmp to 3d method<br />redrawing map, whenever I crush windows+ render to floor texture with splinter, texture info also stored in .bmp<br />objects#/textures# coded in .bmp<br /><br /><br />DayDreamer</div>
    <div class="meta">Posted on 2004-02-22 06:50:18 by daydreamer</div>
   </div>
   <div class="post" id="post-134445">
    <div class="subject"><a href="#post-134445">infant Hybrid Engine gasps for life</a></div>
    <div class="body">I was planning to clean up the codebase before I made it public, but nonetheless, here is the link to the complete project source, less libci.lib and uuid.lib, some 5 and a bit megs..<br />I'll still clean up the code and repost it later, as I'm not satisfied with this code yet.I'm wander off now and make a link , u can find it at <a target="_blank" href="http://homer.ultrano.com">http://homer.ultrano.com</a><br /><br />We are playing with a single object in this example, but adding new ones is not difficult. The object has 2 Materials, this source assumes that if a meshed object has &gt;1 materials, that the last material is to be alphablended. I took the liberty of providing a textured box with a textured translucent surface. The art is crap, it isn't the point. Use left mouse to drop an object where you stand, now use the cursors to move so you can see it (lol) , use space to drop craploads of objects while moving fast to make walls, and use right mouse to &quot;select&quot; objects, should work in any screen resolution, window size, and full screen, this demo it will rotate the object(s) selected, I'll work on some tools as I go, right now I'm trying to decide which rotation model to go with for objects as far as implementing rigid body dynamics is concerned:P <br />(Oh I forgot, middle mouse button to &quot;regrip&quot; the world window, little buggy)<br /> If anyone wants to get involved with this source as far as some kind of public project is concerned, I'm open to that, on the proviso that the source remains completely free of any and all legal obligation and remains available to all.<br />You may carry with you any posted code from this project and use it as you see fit, but you may not express ownership of any code which you contribute. <br />Your source must be made available to other programmers to use as they see fit, with no legal repercussions from or on the behalf of any contributor or contributors.<br />Anyone may profit from this source in any way, but must not deny anyone else the opportunity to do so.</div>
    <div class="meta">Posted on 2004-02-22 06:55:45 by Homer</div>
   </div>
   <div class="post" id="post-134474">
    <div class="subject"><a href="#post-134474">infant Hybrid Engine gasps for life</a></div>
    <div class="body"><strong>EvilHomer2k</strong>, your interest is obviously bigger than my interest.  So, showing mine would only make me feel inferior by comparision.  Can I just stand here with a blank look on my face until I understand what you are talking about? :grin:</div>
    <div class="meta">Posted on 2004-02-22 11:53:11 by bitRAKE</div>
   </div>
   <div class="post" id="post-134510">
    <div class="subject"><a href="#post-134510">infant Hybrid Engine gasps for life</a></div>
    <div class="body">pmsl :grin: <br />Sure but once you figure out what I'm on about, can you please explain it to me?<br />lol, currently reading for the maybe 50th time in my life the section on dynamics, mechanics and properties of matter in my 1971 print of Nelkon &amp; Parker's Advanced Level Physics, one of my more weighty and more favored tomes. I expect to have implemented some kind of scenegraph-based dynamic simulation of rigid bodies pretty soon, just trying to decide which math method to follow.</div>
    <div class="meta">Posted on 2004-02-22 22:21:31 by Homer</div>
   </div>
   <div class="post" id="post-134513">
    <div class="subject"><a href="#post-134513">infant Hybrid Engine gasps for life</a></div>
    <div class="body">What do you think of the method employed by Hitman?<br /><a target="_blank" href="http://www.ioi.dk/Homepages/thomasj/publications/">http://www.ioi.dk/Homepages/thomasj/publications/</a></div>
    <div class="meta">Posted on 2004-02-22 22:38:25 by bitRAKE</div>
   </div>
   <div class="post" id="post-134516">
    <div class="subject"><a href="#post-134516">infant Hybrid Engine gasps for life</a></div>
    <div class="body">They used a Verlette integrator function, whereas I would think about implementing staged integration aka Runge - Kutta integration.<br />They used the notions of molecular physics equations applied as weightings of clusters of vertices, I would think the same way.<br />They used a &quot;convergence&quot; (plug and pray) method of solving simultaneous multiple constraints, I would suggest this is inconsistant and again would think in Runge - Kutta terms (look at it as a simultaneous differential equation, similar to how their IK solver works).<br />They built their models such that the model's origin coincides with its center of mass, such that object rotations are simplified in terms of all &quot;molecules&quot; having the same angular velocity at all times. I would suggest that this leads to a rather cheap simulation due to incorrect behaviour of rotating dynamic objects (think of an axe spinning through the air, its center of rotation is its center of mass, nowhere near its &quot;geographical center&quot; aka BB center, due to the Axe Head having much higher density than the handle).<br />Their particle effects were probably a little underused in the game itself.<br />The water and cloth simulations were superb.<br />The modelling was excellent.<br />Whoever made the textures should be shot.<br /><br />Opinions, heh, they're like assholes, everyone has one and feels compelled to voice it in a public forum... <br /><br />All up I found it to be a quite compelling game, with very good AI, particularly in terms of pathfinding. It could have benefited from more local fx, even simple stuff like volumetric fog would have given it much greater depth.<br />The sequel to the game, Hitman 2, seemed to use pretty much the same engine, with little to boast about (what's new).<br /><br />We stand apon the shoulders of Giants, but we still can't see past the end of our own nose.</div>
    <div class="meta">Posted on 2004-02-22 23:01:07 by Homer</div>
   </div>
   <div class="post" id="post-134517">
    <div class="subject"><a href="#post-134517">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Hi EvilHomer2k,<br /><br />I am interested but the source would be over my head. I'm still waiting for your Game Dev Tutorial in CHM format so I can look through it and begin to understand a bit about what's going on here. I was not a science major so I have no physics to speak of except what I pick up on the road of life (and that isn't much) but I am intersted in advanced graphics.</div>
    <div class="meta">Posted on 2004-02-22 23:03:25 by donkey</div>
   </div>
   <div class="post" id="post-134519">
    <div class="subject"><a href="#post-134519">infant Hybrid Engine gasps for life</a></div>
    <div class="body">I'm not sure I am the right man to write that CHM after all... I have no formal qualification as a programmer, and everything I have learned, I learned the hard way.<br />I have found GameDev to be unlike almost any other field of programming, I see it more as an artform than a science.<br />You put yourself together a basic game engine, and then you spend the rest of your life tweaking it, never really satisfied with the result. There's no hard and fast rules, in fact, you can throw the rulebook right out the window. We don't care how much cpu time we consume, provided its all being used to achieve our goals. We DO care about resource management and structure.<br />We are basically creating a kind of database, and manipulating its content over time. We are furthermore creating associations between some database elements, and applying constraints to them to force their output to a given range. What kind of database is it? You can use whatever you like, be it simple flat arrays, lookup tables, linkedlists and trees, anything you like. Personally I am taken with the idea of closely integrating some of the hierarchy structure into the supporting Classes themselves.<br />An example of this would be my CMesh class, which provides support for rendering objects from meshes, but keeps internally a linkedlist of &quot;unique&quot; CMesh instances from which it can clone duplicates on demand with the lowest possible resource usage.<br />Simply describing a game skeleton with its main loop and user input and render code would not be enough to describe gamedev in generic terms, although it might help.<br />In closing, I feel gamedev is a specialist field of programming, much as dynamics is a specialist field of physics.<br />Just because you can program does not mean you can write a winner game, you still require aesthetic ability, because you are both programmer and artist, even if the actual graphic art is not your own, you are a sculptor, and the program is clay. Build on it, shape it, form it to your will, fire it in Vulcan's Forge, and it will still look like an ashtray made by a nine year old. The best gamedev projects are written by small close teams rather than by large disparate teams or individuals - unfortunately the workload / timeframe is not justifiable for an individual anymore.<br /><br />That being said, most commercial game programmers are crap.<br />They're game programmers, not GOOD programmers.<br />Some of the shortcuts they take are in the interest of expediency rather than an attempt to shave cycles and put them to better use, and generally are a requirement to meet a minimal framerate due to fatally slow core code. Maybe this is why they didn't play up the particle engine in Hitman.</div>
    <div class="meta">Posted on 2004-02-22 23:24:09 by Homer</div>
   </div>
   <div class="post" id="post-134520">
    <div class="subject"><a href="#post-134520">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Hi EvilHomer2k,<br /><br />I guess I should have further qualified my area of interest, I am more interested in the advanced graphics than in the gaming stuff. I have little to no interest in games (don't even own one) and absolutely no interest in writing one. My interest is purely out of wanting to know a bit more about the subject not because I have any particular application in mind for the information.<br /><br />But that said, thanks for your reply.</div>
    <div class="meta">Posted on 2004-02-22 23:30:06 by donkey</div>
   </div>
   <div class="post" id="post-134553">
    <div class="subject"><a href="#post-134553">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Heh. That sounds familiar to me. I'm not sure if I want to write games either, but the programming fields it incorporates intruige me, and the association of them as modules of a larger engine further intruiges me.<br />I'm personally interested in the mechanics of the beast, in some ways I see even a state engine based game as a primitive neural network. They too fascinate me, yet they are nothing more than scenegraphs, even the feedback learning methods can be evaluated in scenegraph terms. Everything relates to something else I'm interested in, and working on each small part is probably more fun than tweaking the final result I guess, but nonetheless I'm having a blast:)</div>
    <div class="meta">Posted on 2004-02-23 07:21:04 by Homer</div>
   </div>
   <div class="post" id="post-134612">
    <div class="subject"><a href="#post-134612">infant Hybrid Engine gasps for life</a></div>
    <div class="body">I am missing math3dx8 something _dkt.def when compiling</div>
    <div class="meta">Posted on 2004-02-23 17:07:42 by daydreamer</div>
   </div>
   <div class="post" id="post-134642">
    <div class="subject"><a href="#post-134642">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Glad you asked, since this file had some minor alteration by me due to duplication of names of macros in this include with some dx functions.<br />The file is from Caleb's DX8 includes, and contains a bunch of handy fpu macros which make good fast replacements for dx functions in some cases.<br />I've attached it for you below.<br />You may also find some issues in Scronty's DX8.1 includes when you try to build.<br />If you get &quot;incorrect #params&quot; errors, look for the PROTO for the offending function and fix it, Scronty's DX8.1 includes contain numerous minor errors which are a legacy of it being built on his DX8.0 includes, and due to m$ adding extra params to some of the functions. If you have any more issues, just yell out :)</div>
    <div class="meta">Posted on 2004-02-23 22:19:11 by Homer</div>
   </div>
   <div class="post" id="post-134644">
    <div class="subject"><a href="#post-134644">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Don't be put off by the amount of code presented, as a lot of it is yet to be implemented.<br />Do spend time examining the CLASS structures, and take note of which classes inherit from which other classes (look at the opening line of the class definitions).<br /><br />Note that you don't need to have function entries for class object contructor and destructor methods (classname_classname and classname_$classname), but those procs NEED to be defined for ALL classes, even if they contain nothing but a RET statement.<br /><br />I'll keep supporting ATC and promoting OOP in ASM, I'm sure that some of you will see the benefits of this kind of coding, especially for highly structured, complex database dependant code, modular code, etc... as well as the benefits of being able to write cross-language code modules for VB, C and C++ under a single, easy to understand system, with rather low call overhead.<br /><br />pcall BeerGlass.Refill, fp100</div>
    <div class="meta">Posted on 2004-02-23 22:31:20 by Homer</div>
   </div>
   <div class="post" id="post-134716">
    <div class="subject"><a href="#post-134716">infant Hybrid Engine gasps for life</a></div>
    <div class="body">DXbase.def<br />after commenting out things:<br />Winextra.def<br />after commenting out that:<br />\OOParticles\Homer=Developer\BSP\CTexture\CTexture.inc<br />this is lost because I had this earlier on my old PII and recently got a amd xp2400</div>
    <div class="meta">Posted on 2004-02-24 11:21:16 by daydreamer</div>
   </div>
   <div class="post" id="post-134751">
    <div class="subject"><a href="#post-134751">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Ah yes, I'd left out CTexture because I was unhappy with it - you see, it was my first attempt at writing a Class which manages its own ref-object instancing, and I used my old LinkedList support module which was cowritten with Scronty some time ago.<br />I apologise for the oversight - that class is actually at the top of my ToDo list.<br />I'm going to post it here and now in its current form, and I'll immediately begin reworking it to clean it up, I'll repost the whole source when its done, since there'll be repairs made to several other classes, and this time I'll post it in zipped modules which will contain one folder worth of files each. It will be up to you to download what you need from there, this will save having to download the whole lot again.<br /><br />Feel free to alter the path for this include to something more reasonable for the purposes of just getting it built for demo, I'll be altering the path myself when I've sorted it out.</div>
    <div class="meta">Posted on 2004-02-24 22:33:21 by Homer</div>
   </div>
   <div class="post" id="post-134752">
    <div class="subject"><a href="#post-134752">infant Hybrid Engine gasps for life</a></div>
    <div class="body">Here's the other stuff you requested, from memory they came from Scronty's DX includes.</div>
    <div class="meta">Posted on 2004-02-24 22:36:33 by Homer</div>
   </div>
   <div class="post" id="post-134770">
    <div class="subject"><a href="#post-134770">infant Hybrid Engine gasps for life</a></div>
    <div class="body">I'm pretty sure I've nailed down CTexture this time around. I'll test it thoroughly before I repost it all the same.<br />CTexture no longer depends on LinkedList.inc, instead it now works just like CMesh - it keeps a global linkedlist of unique entries which is searched each time a texture load is attempted.<br />If the texture is new, we add to the list.. if not, we clone it.<br />Unlike CMesh, CTexture keeps count of instances of those unique entries.<br /><br />What this means is that we don't need to call any function external to the class to provide management of the list when we want to load a texture - it's all done inside CTexture. We can simply create a new CTexture and then either call its Load method (to load texture by name) or call its Create method (to create a &quot;blank&quot; texture which we can manipulate with pixel operators).<br /><br />It's still not safe to inherit CTexture from CMesh, simply because that means the CMesh would only ever have a single texture, and chances are it has more.<br />Therefore CMesh retains its array of pointers to CTexture instances.</div>
    <div class="meta">Posted on 2004-02-25 04:55:21 by Homer</div>
   </div>
   <div class="post" id="post-134856">
    <div class="subject"><a href="#post-134856">infant Hybrid Engine gasps for life</a></div>
    <div class="body">As promised, here is the revised CTexture class, as well as a modified CMesh (since CMesh depends on CTexture, although it does not explicitly inherit from it).<br /><br />Changes were likewise made to the Demo_Init function, which loads some stuff we use in the demo, like default textures and meshes...<br /><br />Since I'm a lazy prick, I'm going to spam that file here - you can hate me later.<br /><br /><pre><code><br />.data<br />        d3dpp         D3DPRESENT_PARAMETERS &lt;NULL&gt;<br />        d3ddm          D3DDISPLAYMODE                 &lt;NULL&gt;    <br />        g_pVertexBuffer dd NULL<br />        matView D3DXMATRIX &lt;NULL&gt;<br />        matProj D3DXMATRIX  &lt;NULL&gt;<br /><br />        fppidiv4 FLOAT 0.7853981633974483096f<br />        fp2 FLOAT 2.0f<br />        fp200 FLOAT 200.0f<br />        pScene dd 0<br />        pPlayer dd 0<br />        pPlayer2 dd 0<br />        pTerrains dd 256 dup &#40;0&#41;<br />        TerrainLoaderThreadID dd 0<br />        pCLoadingTexture dd 0<br />.code<br /><br />if TERRAIN_ENABLE<br />TerrainLoaderThread proc MyParam&#58;DWORD<br />local ind&#58;DWORD<br />local pterrain&#58;DWORD<br />;Build array of 16x16 <br />mov ind,0<br />.while ind&lt;16*16<br />        mov pterrain, new &#40;TerrainEngine&#41;<br />        .if pterrain              <br />  ;              $Message &quot;Created TerrainEngine Instance %lu&quot;,ind<br />                mov ebx,ind                  <br />                m2m pTerrains&#91;ebx*4&#93;,pterrain<br />        .else<br />                Error &quot;Out of Mem&quot;<br />        .endif        <br />        inc ind<br />.endw<br />;Swizzle the Mesh vertices on the Y axis and build terrain textures<br />invoke BuildPatches,CTEXT&#40;&quot;Maps\TestHeightMap.jpg&quot;&#41;,<br />                                  CTEXT&#40;&quot;Textures\SnowTest.jpg&quot;&#41;,<br />                                  CTEXT&#40;&quot;Textures\RockTest.jpg&quot;&#41;,<br />                                  CTEXT&#40;&quot;Textures\GrassTest.jpg&quot;&#41;,<br />                                  CTEXT&#40;&quot;Textures\SandTest.jpg&quot;&#41;<br />;Message &quot;Patches Built&quot;<br />mov CApp_StateFlag, GS_CHANGETO_RUNNING<br />m2m g_StartedChange, g_dCurTime<br />ret<br />TerrainLoaderThread endp<br />endif<br /><br /><br />init proc uses eax ebx ecx edx esi edi me,hWnd<br />local pVertices,ind,pterrain&#58;DWORD<br />local ErrBuf&#91;256&#93;&#58;BYTE<br />local pDevice&#58;DWORD<br />        invoke Direct3DCreate8, D3D_SDK_VERSION         ;   Create the D3D object.      <br />        mov ecx,me  <br />        mov &#91;ecx&#93;.CApp.g_pD3D,eax<br />        mcall &#91;ecx&#93;.CApp.g_pD3D, IDirect3D8_GetAdapterDisplayMode, D3DADAPTER_DEFAULT, addr d3ddm<br /><br />        ZeroMemory &amp;d3dpp, sizeof d3dpp<br />        mov d3dpp.SwapEffect , D3DSWAPEFFECT_DISCARD<br />        mov d3dpp.MultiSampleType , D3DMULTISAMPLE_NONE<br />        mov d3dpp.Windowed , TRUE<br />        m2m d3dpp.BackBufferFormat, d3ddm.Format<br />        mov d3dpp.BackBufferCount , 1<br />        m2m d3dpp.hDeviceWindow , hWnd<br />        mov d3dpp.AutoDepthStencilFormat , D3DFMT_D16<br />        mov d3dpp.EnableAutoDepthStencil , TRUE<br /><br />        mov ecx,me<br />        mcall &#91;ecx&#93;.CApp.g_pD3D,IDirect3D8_CreateDevice, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL,  hWnd,   \<br />		D3DCREATE_SOFTWARE_VERTEXPROCESSING, addr d3dpp, addr &#91;ecx&#93;.CApp.g_pd3dDevice<br />        .if eax ==D3D_OK<br />                mov ecx,CApp_OnlyInstance<br />                m2m pDevice, &#91;ecx&#93;.CApp.g_pd3dDevice<br />                iCall me,CApp,InitDevice<br />        .else<br />                return FALSE<br />        .endif  <br /><br />        ;Fetch the Device Capabilities for later<br />        mov ecx,me<br />        mcall &#91;ecx&#93;.CApp.g_pd3dDevice,IDirect3DDevice8_GetDeviceCaps,addr &#91;ecx&#93;.CApp.m_d3dCaps <br />	<br />        invoke D3DXMatrixLookAtLH, addr matView, addr g_vEye,addr g_vLook ,addr g_vUp <br />        mcall pDevice,IDirect3DDevice8_SetTransform, D3DTS_VIEW, addr matView<br /><br />        invoke D3DXMatrixPerspectiveFovLH, addr matProj, fppidiv4 , fp1, fp1, fp200 <br />        mcall pDevice,IDirect3DDevice8_SetTransform, D3DTS_PROJECTION, addr matProj<br /><br />        <br /><br />;	//<br />;	// Load a couple of textures for the floor and the &quot;Loading&quot; SplashScreen<br />;	//<br />        mov pCFloorTexture,new &#40;CTexture&#41;<br />  ;      mov pCLoadingTexture,new &#40;CTexture&#41;<br />        icall pCFloorTexture, CTexture, Load, CTEXT&#40;&quot;textures\dx.bmp&quot;&#41;, 0, 0<br />  ;      icall pCLoadingTexture, CTexture, Load, CTEXT&#40;&quot;textures\Loading.jpg&quot;&#41;, 0, 0<br /><br />;	//<br />;	// Create the floor geometry...<br />;	//<br />        mcall pDevice,IDirect3DDevice8_CreateVertexBuffer, &#40;4*sizeof Vertex&#41;, D3DUSAGE_WRITEONLY, FVF_VERTEX, D3DPOOL_DEFAULT, addr g_pVertexBuffer<br />        mcall g_pVertexBuffer,IDirect3DVertexBuffer8_Lock, 0, sizeof g_floorVertices, addr pVertices, 0<br />        invoke RtlMoveMemory, pVertices, addr g_floorVertices, sizeof g_floorVertices<br />        mcall g_pVertexBuffer,IDirect3DVertexBuffer8_Unlock<br /><br />;	//<br />;	// Initialize a Font for 2D Text Output to screen<br />;	//<br />        .data<br />        pFont dd NULL<br />        .code<br /><br />        invoke CreateFont,32, 10, 0, 0, FW_NORMAL, FALSE, FALSE, \<br />           FALSE, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,\<br />           DEFAULT_QUALITY, DEFAULT_PITCH,  CTEXT &#40;'Comic Sans MS'&#41;<br />        push eax            ; Save the font handle<br />        invoke D3DXCreateFont, pDevice, eax, ADDR pFont<br />        .if eax != D3D_OK<br />            pop eax<br />            return E_FAIL<br />        .endif<br />        call DeleteObject       ; Destroy the font handle &#40;param is already on Stack&#41;<br /><br />   ;     invoke LoadHierarchicalObjectFromXFile ,CTEXT&#40;&quot;Tank.x&quot;&#41;<br /><br />;   mov pScene,new &#40;CScene&#41;<br />;   icall pScene, CScene, Load, CTEXT&#40;&quot;ScriptDesign\TestScript.txt&quot;&#41;<br /><br />if SKINMESH_ENABLE<br />mov pPlayer, new &#40;CSkinMesh&#41;<br />set pPlayer as CSkinMesh<br />pcall pPlayer.RestoreDeviceObjects<br />pcall pPlayer.SetPath,CTEXT&#40;&quot;Objects\Tiny.x&quot;&#41;<br />pcall pPlayer.LoadMeshHierarchy<br />endif<br /><br />if TERRAIN_ENABLE<br />invoke CreateThread,0,0,addr TerrainLoaderThread,0,0,addr TerrainLoaderThreadID<br />__LoadFloat3 g_vEyeLoad<br />__StoreFloat3 g_vEye<br />else<br />mov CApp_StateFlag, GS_CHANGETO_RUNNING<br />endif<br /><br />if BOUNDTEST_ENABLE<br />;Create two default objects in the center of the room for testing purposes<br /><br />mov pPlayer,new &#40;CCullableThing&#41;<br />mov ebx,CApp_OnlyInstance<br />icall pPlayer, CCullableThing, Load, &#91;ebx&#93;.CApp.g_pd3dDevice,CTEXT&#40;&quot;Objects\NewCube.x&quot;&#41;      ;&#40;&quot;Objects\ShieldCube2.x&quot;&#41;<br />icall pPlayer, CCullableThing, InitBB<br />mov ebx,pPlayer<br />fld fp1<br />fst &#91;ebx&#93;.CCullableThing.m_fRotX <br />fst &#91;ebx&#93;.CCullableThing.m_fRotY<br />fstp &#91;ebx&#93;.CCullableThing.position.y<br />icall pPlayer, CCullableThing, UpdateMatrix<br />Message &quot;Demo_init&quot;<br /><br /><br />mov pPlayer2,new &#40;CCullableThing&#41;<br />mov ebx,CApp_OnlyInstance<br />icall pPlayer2, CCullableThing, Load, &#91;ebx&#93;.CApp.g_pd3dDevice,CTEXT&#40;&quot;Objects\NewCube.x&quot;&#41;      ;&#40;&quot;Objects\ShieldCube2.x&quot;&#41;<br />icall pPlayer2, CCullableThing, InitBB<br />mov ebx,pPlayer2<br />fld fp2<br />fst &#91;ebx&#93;.CCullableThing.m_fRotX <br />fst &#91;ebx&#93;.CCullableThing.m_fRotY<br />fstp &#91;ebx&#93;.CCullableThing.position.y<br />icall pPlayer2, CCullableThing, UpdateMatrix<br /><br />mov CApp_StateFlag, GS_CHANGETO_RUNNING<br />m2m g_StartedChange, g_dCurTime<br /><br />endif<br /><br />ret<br />init endp<br /></code></pre></div>
    <div class="meta">Posted on 2004-02-26 09:08:34 by Homer</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=17351&amp;page=1" style="visibility:hidden;">&laquo;</a><a href="../?id=17351&amp;page=0" style="visibility:hidden;">&lt;</a><input type="hidden" name="id" value="17351" /><input type="number" name="page" min="1" max="3" step="1" value="1" onchange="this.form.submit();" /><a href="../?id=17351&amp;page=2">&gt;</a><a href="../?id=17351&amp;page=3">&raquo;</a></form>  </div>
 </body>
</html>