<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>0000h:[046Ch] how ? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16157" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=16157">0000h:[046Ch] how ?</a></p>
   <div class="post" id="post-125287">
    <div class="subject"><a href="#post-125287">0000h:[046Ch] how ?</a></div>
    <div class="body">Help, how to get the value from 0000h:046Ch address in memory?<br />I tryed but my program halt right at mov eax,es:[046Ch],<br />and is it the same as GetTickCount ?<br /><pre><code><br />push es<br />xor ax,ax<br />mov es,ax<br />mov eax,es&#58;&#91;046Ch&#93;<br />pop es<br /></code></pre><br /><br />p.s.: This is done in Win32 not in DOS.</div>
    <div class="meta">Posted on 2003-11-24 06:01:40 by zabnik</div>
   </div>
   <div class="post" id="post-125293">
    <div class="subject"><a href="#post-125293">0000h:[046Ch] how ?</a></div>
    <div class="body">win32 is protected mode 32 bit, you cant access memory like that, also i think the 0000-&gt;1mb range isnt accessable and will probably cause a crash, debug gettickcount and you'll see it reads from a completely different area</div>
    <div class="meta">Posted on 2003-11-24 07:35:21 by evlncrn8</div>
   </div>
   <div class="post" id="post-125311">
    <div class="subject"><a href="#post-125311">Are you in ring0?</a></div>
    <div class="body">that is priviledge level zero. What is that parameter? The mouse position? because I get different values from the video buffer. <br /><br /><br />00000000  16 E8 00 F0 16 E8 00 F0-C3 E2 00 F0 16 E8 00 F0   ................<br />00000010  16 E8 00 F0 54 FF 00 F0-68 7E 00 F0 16 E8 00 F0   ....T...h~......<br />00000020  A5 FE 00 F0 87 E9 00 F0-6F EF 00 F0 6F EF 00 F0   ........o...o...<br />00000030  6F EF 00 F0 6F EF 00 F0-57 EF 00 F0 6F EF 00 F0   o...o...W...o...<br />00000040  DD 10 00 C0 4D F8 00 F0-41 F8 00 F0 34 98 00 F0   ....M...A...4...<br />00000050  39 E7 00 F0 59 F8 00 F0-2E E8 00 F0 D2 EF 00 F0   9...Y...........<br />00000060  A4 E7 00 F0 F2 E6 00 F0-6E FE 00 F0 53 FF 00 F0   ........n...S...<br />00000070  53 FF 00 F0 A4 F0 00 F0-C7 EF 00 F0 D4 51 00 C0   S............Q..<br />00000080  F2 E6 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000090  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000000A0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000000B0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000000C0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000000D0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000000E0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000000F0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000100  59 EC 00 F0 E5 EF 00 F0-65 F0 00 F0 D4 63 00 C0   Y.......e....c..<br />00000110  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000120  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000130  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000140  6F EF 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   o...............<br />00000150  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000160  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000170  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />00000180  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000190  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000001A0  16 E8 00 F0 16 E8 00 F0-16 E8 00 F0 16 E8 00 F0   ................<br />000001B0  16 E8 00 F0 DD 10 00 C0-16 E8 00 F0 16 E8 00 F0   ................<br />000001C0  60 BA 00 F0 F3 EC 00 F0-6F EF 00 F0 6F EF 00 F0   `.......o...o...<br />000001D0  89 EE 00 F0 FC F0 00 F0-00 ED 00 F0 24 ED 00 F0   ............$...<br />000001E0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000001F0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000200  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000210  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000220  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000230  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000240  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000250  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000260  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000270  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000280  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000290  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000002A0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000002B0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000002C0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000002D0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000002E0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />000002F0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000300  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000310  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000320  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000330  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000340  00 00 00 00 00 00 00 00-00 00 00 00 6E 89 A9 89   ............n...<br />00000350  1A EF 00 60 06 E8 00 80-E6 4B 00 00 70 03 00 00   ...`.....K..p...<br />00000360  19 EF 00 80 81 01 00 00-01 00 53 F7 B7 89 1A EF   ..........S.....<br />00000370  00 60 07 E8 00 80 E6 00-00 22 ED 00 F0 86 00 3C   .`.......&quot;.....&lt;<br />00000380  08 82 ED 00 F0 02 02 B0-08 8E 00 9B 03 D8 03 0A   ................<br />00000390  05 0A 05 22 ED 00 F0 86-00 3C C0 4E ED 00 F0 02   ...&quot;.....&lt;.N....<br />000003A0  02 BF A2 72 A3 98 99 54-BA 0A 05 22 ED 00 F0 86   ...r...T...&quot;....<br />000003B0  00 2C C0 56 ED 00 F0 46-02 B0 A2 BF A2 87 9F 00   .,.V...F........<br />000003C0  00 80 00 00 00 01 00 00-00 00 7C 00 80 01 02 00   ..........|.....<br />000003D0  80 02 00 10 C4 00 02 01-E6 4B 00 00 00 7C 01 00   .........K...|..<br />000003E0  80 00 00 00 00 00 00 00-05 00 01 00 80 00 01 00   ................<br />000003F0  00 7C 92 4F 8E 4D 00 F0-02 05 37 4D 25 4D 02 00   .|.O.M....7M%M..<br />00000400  F8 03 F8 02 00 00 00 00-78 03 00 00 00 00 C0 9F   ........x.......<br />00000410  27 44 00 7F 02 00 00 20-00 00 22 00 22 00 E0 50   'D.... ..&quot;.&quot;..P<br />00000420  0D 1C 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000430  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000440  00 00 C0 00 00 00 00 00-4D 12 50 00 00 A0 00 00   ........M.P.....<br />00000450  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00   ................<br />00000460  00 00 00 D4 03 29 30 F4-03 00 F0 04 C6 58 0B 00   .....)0......X..</div>
    <div class="meta">Posted on 2003-11-24 10:52:42 by mrgone</div>
   </div>
   <div class="post" id="post-125320">
    <div class="subject"><a href="#post-125320">Re: 0000h:[046Ch] how ?</a></div>
    <div class="body"><div class="quote"><br />Help, how to get the value from 0000h:046Ch address in memory?<br />I tryed but my program halt right at mov eax,es:[046Ch],<br />and is it the same as GetTickCount ?<br /><pre><code><br />push es<br />xor ax,ax<br />mov es,ax<br />mov eax,es&#58;&#91;046Ch&#93;<br />pop es<br /></code></pre><br /><br />p.s.: This is done in Win32 not in DOS. </div><br /><br />You have to remember that win32 is operating in protected mode. So ds,es,fs and gs are not used as in real mode, where they point directly to memory. Instead they hold a descriptor, that indirectly points to a place in memory. As such, you'll need to find a descriptor with the right security attributes ... and make sure that the page you want to read from is accesible. In fact, unless you want to do a driver, or do some dirty ring0 hack, you should stay away from manually trying to read memory like that. I should probably modify that and say: unless you're willing to study some system architecture, stay away from low-level programming, just use GetTickCount.<br /><br />Fake</div>
    <div class="meta">Posted on 2003-11-24 11:26:14 by Fake51</div>
   </div>
   <div class="post" id="post-125324">
    <div class="subject"><a href="#post-125324">0000h:[046Ch] how ?</a></div>
    <div class="body"><div class="quote">stay away from low-level programming</div><br /><br />hmmm ...isn't that what this forum is all about :grin:</div>
    <div class="meta">Posted on 2003-11-24 11:38:50 by The SharK</div>
   </div>
   <div class="post" id="post-125439">
    <div class="subject"><a href="#post-125439">i debuged GetTickCount</a></div>
    <div class="body"><pre><code><br />push ds<br />mov ax,01677h<br />mov ds,ax<br />mov ax,word ptr ds&#58;&#91;0002h&#93;<br />mov ds,ax<br />mov eax,dword ptr ds&#58;&#91;00000000h&#93;<br />pop ds <br /></code></pre><br /><br />I removed some unknown cmp and jmp and it works!<br />BUT! only at Win98SE in Win2000 it halts at mov ds,ax <br /><br />It can be minimized more:<br /><br /><pre><code><br />push ds<br />mov ax,010Bh<br />mov ds,ax<br />mov eax,dword ptr ds&#58;&#91;00000000h&#93;<br />pop ds <br /></code></pre><br /><br />Same value, I also compared it with GetTickCount, exactly same value :p<br /><br />PS: h8 XP</div>
    <div class="meta">Posted on 2003-11-25 09:50:07 by zabnik</div>
   </div>
   <div class="post" id="post-125440">
    <div class="subject"><a href="#post-125440">0000h:[046Ch] how ?</a></div>
    <div class="body">Why don't you just use rdtsc?</div>
    <div class="meta">Posted on 2003-11-25 10:13:06 by Aaro</div>
   </div>
  </div>
 </body>
</html>