<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>To Hutch - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=26617" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=26617">To Hutch</a></p>
   <div class="post" id="post-192353">
    <div class="subject"><a href="#post-192353">To Hutch</a></div>
    <div class="body">szLeft is Hutch's proc.I can't understand the lines with ??.
My_szLeft is mine.Is there any part of it wrong?
I'm new to assembly.I shall be grateful if you explain the lines
with ??.
I think this forum is for those who are good in assembly,and this 
question is a beginner one, but I need help.
Thanks in advance.

; ########################################################################
szLeft proc lpszSource:DWORD,lpszTarget:DWORD,ln:DWORD

    push esi
    push edi

    cld

    mov esi, lpszSource
    mov edi, lpszTarget
    mov ecx, ln

    shr ecx, 2  ;??
    rep movsd   

    mov ecx, ln
    and ecx, 3  ;??
    rep movsb

    mov al, 0
    mov , al

    pop edi
    pop esi

    ret

szLeft endp

; ###########################################################################
; ########################################################################

My_szLeft proc lpszSource:DWORD,lpszTarget:DWORD,ln:DWORD

    push esi
    push edi

    cld

    mov esi, lpszSource
    mov edi, lpszTarget
    mov ecx, ln

    rep movsB 

    mov al, 0
    mov , al
    
pop edi
    pop esi

    ret

My_szLeft endp

; ###########################################################################</div>
    <div class="meta">Posted on 2001-01-17 20:37:00 by Nada</div>
   </div>
   <div class="post" id="post-192354">
    <div class="subject"><a href="#post-192354">To Hutch</a></div>
    <div class="body">Nada,

shr ecx, 2

divides ECX by 4 as the following MOVSD moves 4 bytes at a time,

mov ecx, ln
and ecx, 3
rep movsb

calculates the remainder if the byte length is not evenly divided by 4 so that you have the correct count in ECX.

Regards,

hutch@pbq.com.au</div>
    <div class="meta">Posted on 2001-01-18 03:16:00 by Steve Hutchesson </div>
   </div>
   <div class="post" id="post-192355">
    <div class="subject"><a href="#post-192355">To Hutch</a></div>
    <div class="body">Much thanks Sir.</div>
    <div class="meta">Posted on 2001-01-18 07:16:00 by a.nada </div>
   </div>
  </div>
 </body>
</html>