<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>BHM File Format - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=29830" />
  <link rel="prev" href="../?id=29830&amp;page=2" />  <link rel="next" href="../?id=29830&amp;page=4" /> </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=10">Graphics &amp; Game Development</a> &raquo; <a href="../?id=29830">BHM File Format</a></p>
<form class="pagination" action="../" method="get"><a href="../?id=29830&amp;page=1" style="">&laquo;</a><a href="../?id=29830&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="29830" /><input type="number" name="page" min="1" max="7" step="1" value="3" onchange="this.form.submit();" /><a href="../?id=29830&amp;page=4">&gt;</a><a href="../?id=29830&amp;page=7">&raquo;</a></form>   <div class="post" id="post-211462">
    <div class="subject"><a href="#post-211462">Re: BHM File Format</a></div>
    <div class="body">Last night I tried a linuxmint live CD, to see if my code would work on linux, and to get an idea of performance.<br />Apparently make/gcc work slightly differently on linux, compared to FreeBSD, so I had to make a few minor changes to the makefile and the sourcecode.<br /><br />Anyway, after everything was built, I managed to get a whopping 417 fps out of it (that is with the official ATi binary drivers, without installing those, MesaGL just ran in software, at 7 fps). I&#039;m not sure how representative that is for linux in general... I&#039;ve heard that ATi&#039;s linux drivers weren&#039;t that hot... but roughly a factor 17 slower than Windows?<br />I tried to test it on the Pentium 4 with GeForce card aswell, as nVidia drivers are supposed to be very good in linux... but sadly the DVD drive didn&#039;t want to read the live CD.<br />It will be interesting to hear from people who compile it on their linux installations. I&#039;d like to know what a proper linux installation can do.<br /><br />I&#039;ve also had this idea of making a cross-platform 3DMark-like benchmarking application... perhaps this OpenGL framework is a good first step. You can run the exact same code on Windows and linux/FreeBSD/OS X/Solaris. I would need to find some artists who can make some nice 3DMark-like scenes.</div>
    <div class="meta">Posted on 2010-04-26 02:29:35 by Scali</div>
   </div>
   <div class="post" id="post-211538">
    <div class="subject"><a href="#post-211538">Re: BHM File Format</a></div>
    <div class="body">I have committed a first version of the BHM 3D skinning sample to SourceForge.<br />You can find it here: http://bhmfileformat.svn.sourceforge.net/viewvc/bhmfileformat/trunk/BHM3DSample/<br /><br />The code is not fully commented yet, I&#039;m still working on that (it is Doxygen-compliant so far though, so try running Doxygen on it). But I have written a <a target="_blank" href="http://bhmfileformat.svn.sourceforge.net/viewvc/bhmfileformat/trunk/BHM3DSample/README.txt?revision=20">README.txt</a> file, which explains the basic ideas behind the design of the file format, the rendering/animation framework, and the implementation of the matrix palette skinning process. It should guide you through the code, as I don&#039;t think the code is all that large and complicated. Most of the OpenGL-related code is hidden away in deeper layers, so most of it can be read and understood without any API-crud getting in the way, so you can focus on the actual BHM data and how the animation and rendering work.</div>
    <div class="meta">Posted on 2010-04-30 18:49:48 by Scali</div>
   </div>
   <div class="post" id="post-211553">
    <div class="subject"><a href="#post-211553">Re: BHM File Format</a></div>
    <div class="body">I&#039;ve tried another linux live CD, this time the freshly released Ubuntu 10.04 LTS AMD64.<br />This seemed to be quite an improvement over linuxmint earlier.<br />I now got around 700 fps using the default desktop settings (with moderate &#039;eyecandy&#039; for the desktop, probably most fair when comparing against Windows Vista/7 with Aero enabled). As someone suggested, it might be faster when you disable all the desktop effects. So I did, and indeed I got about 1000 fps now.<br />Still a long way from Windows though...<br />In fact, I hooked up my old Athlon XP 1800+ with Radeon 9600XT, running Windows XP, just to see if it could run OpenGL, and if so, what performance.<br />I got about 750 fps for the GLSL version, and 850 fps for the assembly version. Not bad at all.<br /><br />I will now try to implement the full per-pixel blinn-phong lighting algorithm that I also used in the D3D version. Then it will be interesting to see if OpenGL can maintain its high framerates in Windows. If it does, then that means that in Windows XP, D3D vs OpenGL is a toss-up in terms of performance. In Windows Vista/7 there appears to be a penalty for OpenGL... this may be a result of the desktop itself being accelerated by D3D, and the OpenGL context having to be drawn into it. Either that, or the Radeon OpenGL drivers haven&#039;t been fully optimized for Vista/7 yet. Perhaps we can tell if someone compares with a high-end nVidia card with the latest drivers.</div>
    <div class="meta">Posted on 2010-05-02 07:48:16 by Scali</div>
   </div>
   <div class="post" id="post-211565">
    <div class="subject"><a href="#post-211565">Re: BHM File Format</a></div>
    <div class="body">I have split off the GLUX library that I made for the BHM 3D skinning sample, and put it into its own project:<br />http://sourceforge.net/projects/glux/<br /><br />The functionality at this point is limited to the things that I required for the BHM sample, but I think this library has real potential as a community project.<br />You can easily expand the math and texture handling capabilities by just building on the current code. The datatypes and basic function layout are all there, so most things will be little more than copy-paste, with a few modifications here and there.<br /><br />I might do more of this myself, when I decide to take the BHM sample to the next level... an idea that I&#039;ve been playing with for many years now: a 3DMark-like benchmark, but multi-platform and open source.<br />Multi-platform, so that you can compare different OSes on the same hardware.<br />Open source, so that people can contribute new tests when new hardware/features emerge... and so that nobody can make claims about the benchmark unfairly favouring one brand over the other... after all, the source can be inspected by anyone.<br /><br />I&#039;m not quite sure how to avoid cheaters though... people could modify tests to generate much higher scores, and then recompile. For Windows it should be easy: just distribute binaries as &#039;official&#039; benchmarks, with some kind of watermark feature in them.<br />For other OSes, such as linux, it&#039;s difficult to distribute binaries that work everywhere. So they&#039;ll have to be compiled on the target machine. Which means you don&#039;t really know what the binary will look like. And any kind of check that you can think of in the sourcecode, can be modified before compiling.</div>
    <div class="meta">Posted on 2010-05-03 07:47:02 by Scali</div>
   </div>
   <div class="post" id="post-211605">
    <div class="subject"><a href="#post-211605">Re: BHM File Format</a></div>
    <div class="body">I still have an old Celeron Northwood-based laptop with a Radeon IGP340M. I figured it&#039;d be a nice idea to try and run it there.<br />I found&nbsp; a few glitches in the existing codebase, which prevented it from running. The chip only supports OpenGL 1.3-level functionality, no shaders or vertex buffer objects.<br />I&#039;ve also split up my Mesh class in a legacy mesh and one that uses VBOs. The VertexDescriptor class has been modified to only set vertex attributes when shaders/programs are supported.<br />After those fixes, the old laptop could run it, although the skinning obviously didn&#039;t work, it just rendered the mesh as-is, in its rest pose.<br /><br />So I then figured it&#039;d be a good idea to do a CPU-based implementation of skinning. The GLUX library only supports the functionality that I needed in the sample, which means that even most of the basic vector/matrix operations aren&#039;t implemented.<br />For the CPU skinning, I had to implement those, so the GLUX library is now more complete.<br /><br />Funny enough, the CPU-based skinning is actually considerably faster than the shader-based stuff on my other laptop with Intel X3100 (which I used for development here). With the CPU path it could reach over 220 fps, while the asm program path is at about 160 fps, and the GLSL path at 83 fps.</div>
    <div class="meta">Posted on 2010-05-07 11:39:46 by Scali</div>
   </div>
   <div class="post" id="post-211618">
    <div class="subject"><a href="#post-211618">Re: BHM File Format</a></div>
    <div class="body"><br />That&#039;s a curious observation - you should attempt to determine where the bottleneck is for your shader implementation.<br />And how do these results look when the cpu is under extreme loading (by some other process with equal priority)?<br /></div>
    <div class="meta">Posted on 2010-05-08 00:00:56 by Homer</div>
   </div>
   <div class="post" id="post-211622">
    <div class="subject"><a href="#post-211622">Re: BHM File Format</a></div>
    <div class="body"><div class="quote"><br /><br />That&#039;s a curious observation - you should attempt to determine where the bottleneck is for your shader implementation.<br />And how do these results look when the cpu is under extreme loading (by some other process with equal priority)?<br /><br /></div><br /><br />Not that curious considering that I mentioned a while ago that switching the D3D9 version to software vertexprocessing also boosted the framerate from about 170 fps to 350ish.<br />The shaders on the Intel chip are just very much underpowered. By using CPU skinning instead of shaders, I suspect that it also uses the CPU for the legacy fixed function T&amp;L afterwards (my skinning code only performs the actual skinning itself, so I set up the positions and normals, then let OpenGL process the projection and lighting as usual).<br />Either that, or the fixed function T&amp;L is running on the hardware, but it is far more optimized than the code that the shader compiler generates.<br />I believe there are registry keys to force software T&amp;L for a certain process. I&#039;d have to look into that. I&#039;m not sure if that works for OpenGL aswell as D3D, but I know they force certain games to software because it&#039;s much faster.<br /><br />Here&#039;s some documents on that from Intel:<br />http://www.intel.com/assets/pdf/whitepaper/318888.pdf<br />And a list of software that they have determined to run better in software:<br />http://www.intel.com/support/graphics/sb/CS-028231.htm</div>
    <div class="meta">Posted on 2010-05-08 04:44:26 by Scali</div>
   </div>
   <div class="post" id="post-212015">
    <div class="subject"><a href="#post-212015">Re: BHM File Format</a></div>
    <div class="body">Hum, I just realized that I never actually built a release package from the current codebase. And as a result, there still is no download link on the project page.<br />Remind me to do this tonight :)<br />I think the current codebase is mature enough for a first release. I&#039;ve tested it on Windows, linux and FreeBSD... someone also reported some small bugs/issues, which I&#039;ve fixed.<br />I still want to improve the lighting model at some point, but that&#039;s icing on the cake more than anything.<br />I should remember to update the README.txt first though, as I&#039;ve added extra fallback paths for non-VBO and non-programmable hardware, so virtually all of the extensions I listed are now optional, rather than hard requirements.</div>
    <div class="meta">Posted on 2010-06-10 04:51:50 by Scali</div>
   </div>
   <div class="post" id="post-212031">
    <div class="subject"><a href="#post-212031">Re: BHM File Format</a></div>
    <div class="body">D&#039;oh, the Visual Studio projects weren&#039;t in quite as good a shape as I thought. I hadn&#039;t updated the VS2005 project in ages, and I need to fix up some of the paths, so it works with the newer project layout, else it won&#039;t compile out-of-the-box.<br />I also had some minor changes on my local copy... had to rethink some of the design of the renderer... Do I want materials to be part of a mesh, or part of an object? I&#039;ve chosen mesh for now, that way is less error-prone with regard to different vertex formats. Especially in D3D, a shader doesn&#039;t exist in a vacuum, but needs to know the vertex format to work on. So the same shader may have to be compiled multiple times for different vertex formats in different meshes.<br />So I&#039;ll have some more work to do before I can make a proper release.</div>
    <div class="meta">Posted on 2010-06-11 02:10:52 by Scali</div>
   </div>
   <div class="post" id="post-213710">
    <div class="subject"><a href="#post-213710">Re: BHM File Format</a></div>
    <div class="body">Hum, totally forgot to build that release. Perhaps I&#039;ll find the time to do that next week... assuming I don&#039;t forget about it again :)<br />I could update the code a bit as well, by merging some of the changes I&#039;ve made for the Croissant 9 thing.<br /><br />Oh yea, and I mustn&#039;t forget to add some gratuitous CPUInfo stuff to the example program, just to promote that project as well. You know, give it some of that whizz-bang factor that the *nix crowd is so fond of... printing lots of meaningless information about the CPU on startup and all that.</div>
    <div class="meta">Posted on 2010-12-24 02:43:08 by Scali</div>
   </div>
   <div class="post" id="post-213810">
    <div class="subject"><a href="#post-213810">Re: BHM File Format</a></div>
    <div class="body">Sadly I&#039;ve not had time to build a proper release yet, with all the new projects I&#039;ve taken on a few weeks ago.<br />However, for the <a target="_blank" href="http://www.asmcommunity.net/board/index.php?topic=30124.msg213786#msg213786">VJ tool which I spoke of here</a>, we are planning to use BHM for storage and communication purposes.<br />The first result of this choice has already emerged: we now have a parser in C# as well, and a small tool which can load a BHM file and display its contents with a treeview and a list for the data chunks. It&#039;s a nice tool for inspecting and verifying the contents of a BHM file, and I&#039;m planning to include it in the open source project.</div>
    <div class="meta">Posted on 2011-01-05 05:54:14 by Scali</div>
   </div>
   <div class="post" id="post-214225">
    <div class="subject"><a href="#post-214225">Re: BHM File Format</a></div>
    <div class="body">Hi ,Scali<br />I download the BHMSample-20100424.zip file ,and open the skin.bhm data file&nbsp; .<br />I want to know the relationships between the data and BHM structure .<br /><br />data:<br />42484D00 64000000 BC040000<br />05000000 00000000 01000000<br />07000000 <br />01000000 00110000 00000000<br />02000000 20110000 00000000<br />03000000 18110000 00000000<br />04000000 12110000 00000000<br />05000000 13110000 00000000<br />06000000 15110000 00000000<br />07000000 19110000 00000000<br />08000000 11110000 0A000000<br />09000000 00110000 00000000<br />0A000000 20110000 00000000<br />0B000000 01120000 00000000<br />0C000000 12110000 00000000<br />0D000000 13110000 00000000<br />0E000000 11110000 04000000<br />0F000000 00110000 00000000<br />10000000 20110000 00000000<br />.......<br />struct:<br />typedef struct {<br />	char description[4];<br />	unsigned int version;<br />	unsigned int treesize;<br />} FileInfo;<br /><br />typedef struct {<br />	unsigned int numchildren;<br /><br />	unsigned int chunkid;<br />	unsigned int type;<br />} TreeNodeInfo;<br /><br />typedef struct {<br />	unsigned int id;<br />	unsigned int type;<br /><br />	unsigned int datasize;<br />	unsigned int totalsize;<br /><br />	unsigned int dataoffs;<br />} ChunkInfo;<br /><br /></div>
    <div class="meta">Posted on 2011-03-26 04:12:16 by G-Spider</div>
   </div>
   <div class="post" id="post-214226">
    <div class="subject"><a href="#post-214226">Re: BHM File Format</a></div>
    <div class="body">Well, it starts with the FileInfo struct.<br />This contains &quot;BHM&quot; in the description.<br />Then the version and the treesize.<br />The treesize is number of bytes for TreeNodeInfo structs that follow (so you can find where the chunks start in the file).<br />They are stored as depth-first. So you can parse then recursively. There is always one root node. So you start by parsing the first node, then you just parse the number of children for each node recursively, until all nodes are parsed (meaning you have parsed all children of the root node, which should also be as many bytes as the FileInfo said).<br />Then you will find the chunks in sequential order. Each chunk is a ChunkInfo node, followed by a raw blob of data bytes, the size of which is in the ChunkInfo. The next chunk follows immediately after the last byte of the previous chunk data.</div>
    <div class="meta">Posted on 2011-03-27 13:02:04 by Scali</div>
   </div>
   <div class="post" id="post-214228">
    <div class="subject"><a href="#post-214228">Re: BHM File Format</a></div>
    <div class="body">aha? :P Thx.<br />data:<br />42484D00 64000000 BC040000 ;//=101<br />;//101 TreeNodeInfo;<br />05000000 00000000 01000000<br />07000000 01000000 00110000 <br />00000000 02000000 20110000 <br />00000000 03000000 18110000 <br />00000000 04000000 12110000 <br />00000000 05000000 13110000 <br />00000000 06000000 15110000 <br />00000000 07000000 19110000 <br />00000000 08000000 11110000 <br />0A000000 09000000 00110000 <br />00000000 0A000000 20110000 <br />.......<br />00000000 63000000 15110000<br />00000000 64000000 11110000<br />;-------------------------<br />;//ChunkInfo<br />64000000 11110000 C0000000<br />C0000000 00000000 00000100<br />02000300 02000100 .......<br /><br />63000000 15110000 C8000000<br />C8000000 00000000 00000000<br />0000403F 00000000 .......<br />......<br /></div>
    <div class="meta">Posted on 2011-03-27 23:00:17 by G-Spider</div>
   </div>
   <div class="post" id="post-214536">
    <div class="subject"><a href="#post-214536">Re: BHM File Format</a></div>
    <div class="body">I finally took some time to update the GLUX project.<br />Some small code updates, but more importantly, I&#039;ve added a VS2010 solution, and a zip file download, including the source, docs and pre-built libraries for Windows:<br />http://sourceforge.net/projects/glux/<br /><br />I will also update the BHM project itself shortly. I got stuck when I wanted to update it earlier, because I was trying to support 3 different versions of Visual Studio at the time. I&#039;ve decided to give that up, and only support VS2010. My code works in the free Express version of Visual Studio, so people won&#039;t have to buy a new version of Visual Studio if they want to build my code, just a free download.</div>
    <div class="meta">Posted on 2011-07-06 15:18:45 by Scali</div>
   </div>
   <div class="post" id="post-214543">
    <div class="subject"><a href="#post-214543">Re: BHM File Format</a></div>
    <div class="body">Right, the BHM file format project has been updated as well, and I have created a zip file for download:<br />http://sourceforge.net/projects/bhmfileformat/<br /><br />Same as above, includes the source, makefiles, VS2010 solution, pre-built libraries and binaries for Windows, docs etc.<br /><br />edit:<br />While I&#039;m at it, I&#039;ll also make a list of things I want to do for a next release:<br />- Update the readme file... The code went ahead of the readme file and already contains a CPU fallback path for skinning etc on non-shader hardware, and a fallback for no VBO extensions. Basically this means there is only the ARB_multitexture requirement left (and I don&#039;t quite remember why, as I don&#039;t use multitexturing... but it might introduce some functionality related to textures and shaders that I use... but probably not when the CPU fallback is in effect). DONE<br />- Replace cml math code with my own math, to remove the dependency on cml. DONE<br />- Add CPUInfo functionality, so some basic info about the CPU/cache/memory is displayed... combined with a slightly fancier handling of FPS, it could serve as a simple benchmark program... first step towards an open source 3DMark.<br />- Create an object for the main class as well, rather than just a main.cpp that is procedural in nature.<br />- Try to use an OpenGL 4.x context, instead of running in legacy OpenGL mode. Would also be a nice exercise in cleaning up the code perhaps.<br />- Add viewing tool for BHM files, to compensate for the only(?) downside of BHM compared to XML: human readability.</div>
    <div class="meta">Posted on 2011-07-08 08:58:02 by Scali</div>
   </div>
   <div class="post" id="post-214548">
    <div class="subject"><a href="#post-214548">Re: BHM File Format</a></div>
    <div class="body">By the way, any OS X users on these boards?<br />If so, could you please try to build the BHM3DSample from this project?<br />I&#039;ve tested it on Windows, linux and FreeBSD. It should also work on OS X, but I&#039;ve never been able to verify that. Found out that OS X doesn&#039;t come with gcc preinstalled, unlike most other *nix-like OSes. So I can&#039;t just test it on a random OS X machine, it really needs to be set up for development, with the proper Xcode and UNIX commandline tools installed.<br />I know the CPUInfo project works on OS X, someone tested that a while ago, so I&#039;m reasonably sure that this code will work as well... There may just be some slight glitches (as with CPUInfo initially), which I&#039;d like to iron out.</div>
    <div class="meta">Posted on 2011-07-09 05:47:32 by Scali</div>
   </div>
   <div class="post" id="post-214549">
    <div class="subject"><a href="#post-214549">Re: BHM File Format</a></div>
    <div class="body">Environment:<br /><ul><br /><li>Mac OS X 10.7 Developer GM (11A511)</li><br /><li>Xcode 4.1 Developer Preview for 10.7 (gcc 4.2.1)</li><br /><li>GLEW 1.6.0 - Compiled/Installed from source</li><br /><li>FreeImage - Compiled/Installed via Mac Ports</li><br /><li>CML 1.0.3 - Downloaded from SourceForge</li><br /></ul><br /><br />Changes needed to compile:<br /><ul><br /><li>Mac Ports places files under /opt/local/ instead of /usr/local; add <strong>-I/opt/local/includes</strong> and <strong>-L/opt/local/lib</strong> to the Makefile, immediately following their /usr/local counterparts, for maximum compatbility</li><br /><li>Remove <strong>-lrt</strong> from Makefile <strong>LIBRARIES</strong> argument listing</li><br /><li>Apply workaround for unsupported POSIX clock_gettime() as follows...</li><br /></ul><br /><br /><pre><code><br />/*<br /> BHM 3D Sample<br /> Author: Scali<br /><br /> This code is released under the BSD license. See COPYRIGHT.txt for more information.<br /> */<br /><br />#ifdef _WINDOWS<br />#include &lt;windows.h&gt;<br />#include &lt;Mmsystem.h&gt;<br />#elif defined(__APPLE__)<br />#include &lt;sys/time.h&gt;<br />#else<br />#include &lt;time.h&gt;<br />#endif<br />#include &lt;GL/glew.h&gt;<br />#include &lt;GL/glut.h&gt;<br />#include &lt;stdio.h&gt;<br /><br />#include &quot;GL/GLUX.h&quot;<br />#include &quot;GL/GLTypes.h&quot;<br />#include &quot;Geometry/Object3D.h&quot;<br />#include &quot;Geometry/BHMObject.h&quot;<br />#include &quot;State.h&quot;<br /><br />#define lengthof(x) (sizeof(x)/sizeof(x[0]))<br />#define WIDTH 640<br />#define HEIGHT 480<br /><br />BHMObject* pBHM = NULL;<br /><br />#ifndef _WINDOWS<br />unsigned int timeGetTime()<br />{<br />	struct timespec time;<br /><br />#if defined(_POSIX_TIMERS) &amp;&amp; _POSIX_TIMERS &gt; 0<br />	clock_gettime(CLOCK_REALTIME, &amp;time);<br />#else<br />	struct timeval tv;<br />	gettimeofday(&amp;tv, NULL);<br />	time.tv_sec = tv.tv_sec;<br />	time.tv_nsec = (tv.tv_usec * 1000);<br />#endif<br /><br />	return (time.tv_sec*1000L) + (time.tv_nsec / 1000000L);<br />}<br />#endif<br /></code></pre><br /><br />Compilation results are as follows:<br /><br /><pre><code><br />c++ -Wall -I/usr/X11R6/include/ -I/usr/local/include -I/opt/local/include -I. -I../BHMFile -I../ -g -c -L/usr/X11R6/lib -L/usr/local/lib -L/opt/local/lib -L../ -L. GL/GLTypes.h GL/GLUX.cpp GL/GLUXMath.cpp<br />ar rv libglux.a GLUX.o GLUXMath.o<br />ar: creating archive libglux.a<br />a - GLUX.o<br />a - GLUXMath.o<br />ranlib libglux.a<br />c++ -Wall -I/usr/X11R6/include/ -I/usr/local/include -I/opt/local/include -I. -I../BHMFile -I../ -g -o BHM3DSample -L/usr/X11R6/lib -L/usr/local/lib -L/opt/local/lib -L../ -L. State.h Main.cpp State.cpp Geometry/Object3D.cpp Geometry/Mesh.cpp Geometry/BHMObject.cpp Geometry/VertexDescriptor.cpp Geometry/Buffer.cpp Geometry/VBOMesh.cpp Material/Material.cpp Material/FFMaterial.cpp Material/ShaderMaterial.cpp Material/SkinnedMaterial.cpp Material/ASMMaterial.cpp Material/Texture.cpp Material/ASMShader.cpp Material/Shader.cpp Material/Program.cpp Material/SkinnedASMMaterial.cpp Anim/Interpolate.cpp Anim/Movable.cpp -lX11 -lglut -lGL -lGLU -lGLEW -lm -lfreeimage -lbhmfile -lglux<br />Geometry/Mesh.h: In constructor ‘Mesh::Mesh()’:<br />Geometry/Mesh.h:74: warning: ‘Mesh::pSkinVertexBuffer’ will be initialized after<br />Geometry/Mesh.h:70: warning:&nbsp;  ‘Material* Mesh::pMaterial’<br />Geometry/Mesh.cpp:13: warning:&nbsp;  when initialized here<br />Geometry/Mesh.cpp: In destructor ‘virtual Mesh::~Mesh()’:<br />Geometry/Mesh.cpp:33: warning: deleting ‘GLvoid*’ is undefined<br />Geometry/Mesh.cpp:39: warning: deleting ‘GLvoid*’ is undefined<br />Geometry/Mesh.cpp: In member function ‘void Mesh::SetSkinVertex(VertexDescriptor*, GLsizei, GLsizei)’:<br />Geometry/Mesh.cpp:104: warning: deleting ‘GLvoid*’ is undefined<br />Geometry/Mesh.cpp: In member function ‘virtual void Mesh::CreateVertexBuffer(void*, unsigned int)’:<br />Geometry/Mesh.cpp:121: warning: deleting ‘GLvoid*’ is undefined<br />Material/ShaderMaterial.cpp: In static member function ‘static Shader* ShaderMaterial::LoadShader(const char*, GLenum)’:<br />Material/ShaderMaterial.cpp:48: warning: format not a string literal and no format arguments<br />Material/ShaderMaterial.cpp:48: warning: format not a string literal and no format arguments<br />Material/ShaderMaterial.cpp: In member function ‘virtual void ShaderMaterial::LinkShaders()’:<br />Material/ShaderMaterial.cpp:72: warning: format not a string literal and no format arguments<br />Material/ShaderMaterial.cpp:72: warning: format not a string literal and no format arguments<br />Material/ASMMaterial.cpp: In static member function ‘static ASMShader* ASMMaterial::LoadShader(const char*, GLenum)’:<br />Material/ASMMaterial.cpp:45: warning: format not a string literal and no format arguments<br />Material/ASMMaterial.cpp:45: warning: format not a string literal and no format arguments<br /></code></pre><br /><br />The end result is a file (BHM3DSample) that starts under X11 and loops a claw-like hand grasping a ball/sphere as it emerges from a table/plane below.</div>
    <div class="meta">Posted on 2011-07-09 10:37:11 by SpooK</div>
   </div>
   <div class="post" id="post-214550">
    <div class="subject"><a href="#post-214550">Re: BHM File Format</a></div>
    <div class="body">Okay, thanks for testing. Nothing too big, apparently. No problems with OpenGL/GLUT on OS X at least, that was something I was not sure of.<br />I can&#039;t quite recall why -lrt was added to the libraries... perhaps that&#039;s the one where clock_gettime() resides? I&#039;d have to see if it can be removed altogether. Else I&#039;d have to make some kind of Mac-specific Makefile options.<br />A bit surprising to find that it is not supported on OS X, seeing as I wrote and this on FreeBSD, and OS X is supposed to be built on BSD.<br />Oh well, I will just use your workaround in timeGetTime(), might fix the same problem on other systems as well.<br />I&#039;ll also add the /opt paths. I&#039;ve seen those on other OSes as well, such as Solaris and HP-UX. Won&#039;t hurt to have them in there.<br /><br />And yea, your description of the animation sounds about right. I forgot to mention it, but I put a video of it on YouTube: http://www.youtube.com/watch?v=VB3pElOLFzo<br />That&#039;s what it should look like.<br /><br />I was thinking of including an OS X binary together with the Windows binaries, but on second thought... Not sure how feasible that is. It&#039;s going to require X11, GLEW and FreeImage to be installed, and whatever other dependencies those pull in. Not easy to just include a binary and some libs in the zip file and have it run out-of-the-box, like the Windows version, I suppose?<br /><br />Edit: I can remove -lrt from FreeBSD at any rate. I think I added it for linux compatibility, but I don&#039;t have a linux system to test on. I might have to fire up a live CD at some point and see what gives.<br />README.txt is updated at any rate, as is Main.cpp, to fix the timeGetTime() issues.<br /><br />Edit2: Fired up an Ubuntu live CD, doesn&#039;t seem to mind when I remove -lrt from the Makefile, so I&#039;ve now updated the Makefile.<br />Also made a small fix to Mesh.cpp. It used memcpy() without explicitly importing string.h... For some reason the Ubuntu gcc complained (perhaps it suppresses previously included headers somehow, so it compiles as if each file is built in a separate session, rather than everything using the same header cache), yet neither OS X nor FreeBSD did, apparently. Ubuntu is right though, so I&#039;ve fixed that now.</div>
    <div class="meta">Posted on 2011-07-09 12:10:04 by Scali</div>
   </div>
   <div class="post" id="post-214551">
    <div class="subject"><a href="#post-214551">Re: BHM File Format</a></div>
    <div class="body"><div class="quote"><br />I was thinking of including an OS X binary together with the Windows binaries, but on second thought... Not sure how feasible that is. It&#039;s going to require X11, GLEW and FreeImage to be installed, and whatever other dependencies those pull in. Not easy to just include a binary and some libs in the zip file and have it run out-of-the-box, like the Windows version, I suppose?<br /></div><br /><br />That&#039;s basically what an installer or basic downloadable application (.app file) is for. The .app file is actually a folder of other contents/resources/dependencies, but the Mac OS X GUI will treat opening a .app file as opening the underlying executable. This obviously creates a dependency on using XCode, so yes, I would avoid that scenario.<br /><br />Basic static linking should be achievable as well. From what I have experienced, as long as you target a common architecture (e.g. Intel/32-bit), the binary will pretty much be universally supported from 10.5 up, without having to deal directly with fat/universal binaries or the <em>lipo</em> tool. There are exceptions that break this simplicity, of course, based on which dependencies are included.<br /><br />As for X11, I think it comes installed by default, as of 10.6. However, I have worked with OpenGL/GLUT and Quartz (native) directly, so I know it is possible with minimal effort. I will take a look at your example again and let you know what the process/result is for that.</div>
    <div class="meta">Posted on 2011-07-09 14:34:06 by SpooK</div>
   </div>
<form class="pagination" action="../" method="get"><a href="../?id=29830&amp;page=1" style="">&laquo;</a><a href="../?id=29830&amp;page=2" style="">&lt;</a><input type="hidden" name="id" value="29830" /><input type="number" name="page" min="1" max="7" step="1" value="3" onchange="this.form.submit();" /><a href="../?id=29830&amp;page=4">&gt;</a><a href="../?id=29830&amp;page=7">&raquo;</a></form>  </div>
 </body>
</html>