<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>calling conventions help... - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=2083" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=2083">calling conventions help...</a></p>
   <div class="post" id="post-13235">
    <div class="subject"><a href="#post-13235">calling conventions help...</a></div>
    <div class="body">hi all,<br /><br />i need some help about calling conventions:<br />i have the following 32bit code where i use STDCALL convention. I need to call the dll function MyProc but in the DLL i use windows pascal convention. So i get confused ...<br /><br /><pre><code><br />model flat,stdcall<br /><br />.data<br />A	BYTE	1<br />B	DWORD	2<br />C	DWORD	3<br />....<br />....<br />....<br />call	MyProc	A,B,C<br />....<br /></code></pre><br /><br />the DLL start as follow<br /><br /><pre><code><br />model flat,windows pascal<br />...<br />...<br /><br />MyProc  A&#58;BYTE, B&#58;DWORD, C&#58;DWORD<br />...<br />...<br />...<br />ret<br />MyProc	endp<br /></code></pre><br /><br />Is the order of the parameters declared after MyProc correct or have i to invert them ?<br /><br />Thanks,     B7</div>
    <div class="meta">Posted on 2001-11-27 14:06:48 by Bit7</div>
   </div>
   <div class="post" id="post-13247">
    <div class="subject"><a href="#post-13247">calling conventions help...</a></div>
    <div class="body">I think INVOKE knows the difference. So as long as you use INVOKE to call the PROC, you shouldn't have to worry about it.<br /><br />Add the /Sg flag to ML and check out the generated code in the listing. :)</div>
    <div class="meta">Posted on 2001-11-27 14:43:51 by S/390</div>
   </div>
   <div class="post" id="post-13248">
    <div class="subject"><a href="#post-13248">calling conventions help...</a></div>
    <div class="body">You'll probably have to set up a prototype for the function in the<br />DLL, telling your assembler that it deviates from the stdcall and<br />is actually using pascal calling convention.</div>
    <div class="meta">Posted on 2001-11-27 14:45:29 by f0dder</div>
   </div>
   <div class="post" id="post-13253">
    <div class="subject"><a href="#post-13253">calling conventions help...</a></div>
    <div class="body">thanks,<br /><br />S/390, the problem is that i'm unfortunately using tasm :( and i can't use INVOKE. I will try with a prototype declaration.<br />Bye</div>
    <div class="meta">Posted on 2001-11-27 15:20:09 by Bit7</div>
   </div>
  </div>
 </body>
</html>