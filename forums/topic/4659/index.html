<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>interrupts and win32 assembly - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=4659" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=4659">interrupts and win32 assembly</a></p>
   <div class="post" id="post-32725">
    <div class="subject"><a href="#post-32725">interrupts and win32 assembly</a></div>
    <div class="body">maybe an easy-to-solve problem, but quite a cracker for me :rolleyes: :<br /><br />i was trying to implement some calls to int 03 in my programs as the most basic protection from softice. but whenever the program gets to that point, it crashes.<br />besides, i was trying to make myself a little proggie which checks for softice using several methods. some of those methods implement an interrupt (int 41h/68h). and when the ints are called, the program crashes.<br />so my question is actually obvious: how do i get those routines to work without crashing?<br /><br />tia</div>
    <div class="meta">Posted on 2002-04-07 12:35:39 by Donnerwolf</div>
   </div>
   <div class="post" id="post-32728">
    <div class="subject"><a href="#post-32728">interrupts and win32 assembly</a></div>
    <div class="body">int3 = trap to debugger. You'll get an exception if no debugger is<br />present. You can trap this by setting up a SEH.<br /><br />Don't bother with softice detection. It's very trivial to defeat, and<br />will only piss off legitimate softice users. It's a bit annoying having<br />to reboot your box (to get rid of softice) just to run some app.</div>
    <div class="meta">Posted on 2002-04-07 12:47:05 by f0dder</div>
   </div>
   <div class="post" id="post-32729">
    <div class="subject"><a href="#post-32729">interrupts and win32 assembly</a></div>
    <div class="body">tnx, can you give me a code sample for that :rolleyes: ?<br />somebody once told me it was possible to call interrupts from ring0? any idea how to achieve that, how to get there? normally i work on ring3.</div>
    <div class="meta">Posted on 2002-04-07 12:49:56 by Donnerwolf</div>
   </div>
   <div class="post" id="post-32733">
    <div class="subject"><a href="#post-32733">interrupts and win32 assembly</a></div>
    <div class="body">SEH involves playing with the contents of  - I think there's some<br />code at win32asm.cjb.net, otherwise google for &quot;SEH in asm&quot;.<br />Don't bother with ring0, the only clean way to go there is writing<br />a VXD for 9x and KMD for NT, and requiring the admin to install a<br />KMD on NT just to run some app == lame. You can call interrupts just<br />fine from ring3, but the win32 API is through the API calls, not interrupts,<br />and there aren't really any documented interrupt usage... so just<br />stick to the API.</div>
    <div class="meta">Posted on 2002-04-07 12:59:12 by f0dder</div>
   </div>
   <div class="post" id="post-32734">
    <div class="subject"><a href="#post-32734">interrupts and win32 assembly</a></div>
    <div class="body">Don't ask questions on SEH, since I myself haven't tried it yet. Anyway I found this .asm file on my HD and possibly this might help you.<br /><br />Assemble: TASM /M /Q /T SEHxmpl.asm<br />Link: TLINK32 /x SEHxmpl,,,,SEHxmpl<br /><br />:)</div>
    <div class="meta">Posted on 2002-04-07 13:24:07 by stryker</div>
   </div>
   <div class="post" id="post-32766">
    <div class="subject"><a href="#post-32766">more sources</a></div>
    <div class="body">A simpler example.</div>
    <div class="meta">Posted on 2002-04-07 21:56:52 by grv575</div>
   </div>
   <div class="post" id="post-32767">
    <div class="subject"><a href="#post-32767">interrupts and win32 assembly</a></div>
    <div class="body">Jeremy Gordon wrote a good article on SEH.  You can download his zip file from his site:   <a target="_blank" href="http://www.godevtool.com">http://www.godevtool.com</a> <br /><br />best regards,<br /><br />czDrillard</div>
    <div class="meta">Posted on 2002-04-07 21:59:12 by czDrillard</div>
   </div>
  </div>
 </body>
</html>