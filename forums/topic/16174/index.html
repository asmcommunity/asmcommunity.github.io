<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Calling Assembly from C++ - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=16174" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=16174">Calling Assembly from C++</a></p>
   <div class="post" id="post-125445">
    <div class="subject"><a href="#post-125445">Calling Assembly from C++</a></div>
    <div class="body">Hi,<br /><br />I created a Static Library with a couple of funcionts in MASM32.<br /><br />I use this def file:<br />LIBRARY XRT<br />EXPORTS<br />printline<br /><br />The function has no parameters and I return a value in eax.<br /><br /><br />I'm trying to 'prototype' it in VC++ like this:<br /><br />extern __stdcall unsigned int printline(void);<br />or<br />extern __stdcall void printline(void);<br /><br />But I'm having problems at linking time:<br />error LNK2001: unresolved external symbol &quot;unsigned int __stdcall printline(void)&quot; (?printline@@YAIXZ)<br /><br /><br />:confused: <br /><br />I got this :  _printline@0 from DUMPBIN /exports.<br /><br />How can I 'prototype' it??<br /><br />Regards,<br />Mariano.</div>
    <div class="meta">Posted on 2003-11-25 11:00:22 by Eternal Idol Birmingham</div>
   </div>
   <div class="post" id="post-125448">
    <div class="subject"><a href="#post-125448">inline assembly</a></div>
    <div class="body">I think masm renames your function call for you.....<br /><br />I think you need to call it by the same name that dumbbin returns. <br /><br />ie _printline@0 .<br /><br />Hope this helps</div>
    <div class="meta">Posted on 2003-11-25 11:16:34 by -=Integrity=-</div>
   </div>
   <div class="post" id="post-125449">
    <div class="subject"><a href="#post-125449">Calling Assembly from C++</a></div>
    <div class="body">Nope, but thanks anyway man.<br /><br />:) <br />:alright:</div>
    <div class="meta">Posted on 2003-11-25 11:20:12 by Eternal Idol Birmingham</div>
   </div>
   <div class="post" id="post-125450">
    <div class="subject"><a href="#post-125450">last try</a></div>
    <div class="body">I have a published example that has the following prototype:-<br /><br />extern &quot;C&quot; funcName(params);<br /><br />good luck<br /><br />obviously asumeing you have added relevant file to the project as well.</div>
    <div class="meta">Posted on 2003-11-25 11:35:12 by -=Integrity=-</div>
   </div>
   <div class="post" id="post-125452">
    <div class="subject"><a href="#post-125452">Calling Assembly from C++</a></div>
    <div class="body">I guess we are getting closer to make it.<br /><br /><br />error LNK2001: unresolved external symbol _printline<br /><br />Thanks man.<br /><br /><br />:alright:</div>
    <div class="meta">Posted on 2003-11-25 11:43:41 by Eternal Idol Birmingham</div>
   </div>
   <div class="post" id="post-125455">
    <div class="subject"><a href="#post-125455">Calling Assembly from C++</a></div>
    <div class="body">For the record (if someone ever have this issue):<br /><br />I took out the .DEF file because if you export the functions their suppouse to go a .DLL<br /><br />Then I 'prototyped' like this:<br /><br />extern &quot;C&quot; void __stdcall printline(void);<br /><br />And it worked!!<br /><br />:grin: :grin: :grin:</div>
    <div class="meta">Posted on 2003-11-25 12:02:15 by Eternal Idol Birmingham</div>
   </div>
   <div class="post" id="post-125458">
    <div class="subject"><a href="#post-125458">Calling Assembly from C++</a></div>
    <div class="body">--- I removed the duplicate post in the heap - please don't crosspost..<br /><br />Thomas</div>
    <div class="meta">Posted on 2003-11-25 13:58:58 by Thomas</div>
   </div>
  </div>
 </body>
</html>