<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Beginning assembly - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=28976" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=28976">Beginning assembly</a></p>
   <div class="post" id="post-204837">
    <div class="subject"><a href="#post-204837">Beginning assembly</a></div>
    <div class="body">Hey<br /><br />I&#039;m using NASM and UBuntu.<br /><br />I&#039;m trying to make a loop that writes to the console for each iteration. My current asm code is as follows:<br /><br />----------------------------------------------------------<br />section .data<br />&nbsp; &nbsp; &nbsp; &nbsp; prompt1:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;Type how many times you want hej to be printed&#039;, 10<br />&nbsp; &nbsp; &nbsp; &nbsp; promptLen1:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; equ&nbsp; &nbsp;  $-prompt1<br />&nbsp; &nbsp; &nbsp; &nbsp; prompt2:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; &#039;hej&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; promptLen2:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; equ&nbsp; &nbsp;  $-prompt2<br />&nbsp; &nbsp; &nbsp; &nbsp; zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; db&nbsp; &nbsp; &nbsp; 0<br /><br />section .bss<br />&nbsp; &nbsp; &nbsp; &nbsp; input&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  resd&nbsp; &nbsp; 10<br /><br />section .text<br />&nbsp; &nbsp; &nbsp; &nbsp; global _start<br />_start:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov eax,4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; The system call for write (sys_write)<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ebx,1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; File descriptor 1 - standard output<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ecx,prompt1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; Put the offset of prompt in ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; mov edx,promptLen1&nbsp; &nbsp; &nbsp; &nbsp; ; promptLen is a constant, so we don&#039;t need to say<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; mov edx, to get it&#039;s actual value<br />&nbsp; &nbsp; &nbsp; &nbsp; int 80h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Call the kernel<br /><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov eax,3<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ebx,1<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ecx,input<br />&nbsp; &nbsp; &nbsp; &nbsp; mov edx,2<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; int 80h<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ecx, <br />&nbsp; &nbsp; &nbsp; &nbsp; cmp ecx,0<br />&nbsp; &nbsp; &nbsp; &nbsp; je end<br /> beginning:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov eax,4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; The system call for write (sys_write)<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ebx,1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; File descriptor 1 - standard output<br />&nbsp; &nbsp; &nbsp; &nbsp; mov ecx,prompt2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Put the offset of prompt in ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; mov edx,promptLen2&nbsp; &nbsp; &nbsp; &nbsp; ; promptLen is a constant, so we don&#039;t need to say<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; mov edx, to get it&#039;s actual value<br />&nbsp; &nbsp; &nbsp; &nbsp; int 80h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ; Call the kernel<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ecx, <br />&nbsp; &nbsp; &nbsp; &nbsp; dec ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; jnz beginning<br /> <br />end:<br />&nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp;  eax,1<br />&nbsp; &nbsp; &nbsp; &nbsp; mov&nbsp; &nbsp;  ebx,0<br />&nbsp; &nbsp; &nbsp; &nbsp; int&nbsp; &nbsp; &nbsp; &nbsp; 80h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; Exit<br />----------------------------------------------------------<br /><br />I want to be able to prompt the user for a number X. The loop should then iterate X times. Where am I going wrong?</div>
    <div class="meta">Posted on 2008-02-21 06:09:50 by Herter</div>
   </div>
   <div class="post" id="post-204839">
    <div class="subject"><a href="#post-204839">Re: Beginning assembly</a></div>
    <div class="body">Not that I had a intense look but one error is here:<br /><br /><pre><code><br />&nbsp; &nbsp; &nbsp; &nbsp; mov ecx, <br />&nbsp; &nbsp; &nbsp; &nbsp; dec ecx<br />&nbsp; &nbsp; &nbsp; &nbsp; jnz beginning<br /></code></pre><br /><br /> never gets decreased. At each loop you reuse the same value (10). After you decrease ecx you need to store it in  again. Or decrease  directly.</div>
    <div class="meta">Posted on 2008-02-21 18:07:50 by JimmyClif</div>
   </div>
  </div>
 </body>
</html>