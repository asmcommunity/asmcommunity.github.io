<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Question about pure &quot;RET&quot; - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=13989" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=13989">Question about pure &quot;RET&quot;</a></p>
   <div class="post" id="post-108100">
    <div class="subject"><a href="#post-108100">Question about pure &quot;RET&quot;</a></div>
    <div class="body">After the procedure RET is returning pointer to my code but what heappened with stack filled with our variable befor call-ing ?? Are they poped out form the stack ??</div>
    <div class="meta">Posted on 2003-06-24 08:32:02 by AceEmbler</div>
   </div>
   <div class="post" id="post-108101">
    <div class="subject"><a href="#post-108101">Question about pure &quot;RET&quot;</a></div>
    <div class="body">RET/RETF - Return From Procedure<br />Usage:  RET     nBytes<br />             RETF    nBytes<br />             RETN    nBytes<br />Modifies flags: None<br /><br />Transfers control from a procedure back to the instruction address<br />saved on the stack.  &quot;n bytes&quot; is an optional number of bytes to<br />release.  Far returns pop the IP followed by the CS, while near<br />returns pop only the IP register.<br /><br />Note: try checking a file called opcodes.hlp in masm32\help, if you're using the masm package that is. Would save you and the board from questions like these.<br /><br />Fake</div>
    <div class="meta">Posted on 2003-06-24 08:40:40 by Fake51</div>
   </div>
   <div class="post" id="post-108103">
    <div class="subject"><a href="#post-108103">Question about pure &quot;RET&quot;</a></div>
    <div class="body">So RET leaves stuff on the stuck ???</div>
    <div class="meta">Posted on 2003-06-24 09:03:05 by AceEmbler</div>
   </div>
   <div class="post" id="post-108108">
    <div class="subject"><a href="#post-108108">Question about pure &quot;RET&quot;</a></div>
    <div class="body">no, it remove stuffs from the stack.<br /><br />retn 8 = <br />pop eip ;if there is such a command :)<br />add esp, 8</div>
    <div class="meta">Posted on 2003-06-24 09:52:52 by roticv</div>
   </div>
   <div class="post" id="post-108112">
    <div class="subject"><a href="#post-108112">Question about pure &quot;RET&quot;</a></div>
    <div class="body">Yeah, RET - by itself - removes only the return address from the stack - parameters passed on the stack remain (ex. C calling convention <strong>wsprintf</strong>).</div>
    <div class="meta">Posted on 2003-06-24 10:27:23 by bitRAKE</div>
   </div>
   <div class="post" id="post-108128">
    <div class="subject"><a href="#post-108128">Question about pure &quot;RET&quot;</a></div>
    <div class="body">So when i call proc with variables (using pure RET) in loop the stuck will be overload ???</div>
    <div class="meta">Posted on 2003-06-24 12:43:58 by AceEmbler</div>
   </div>
   <div class="post" id="post-108131">
    <div class="subject"><a href="#post-108131">Question about pure &quot;RET&quot;</a></div>
    <div class="body">ret is a marco I think. When assembled and looking at the disassembled code, it would be something like retn xx with xx being the numberofparameters*sizeofparameters.</div>
    <div class="meta">Posted on 2003-06-24 13:02:00 by roticv</div>
   </div>
   <div class="post" id="post-108132">
    <div class="subject"><a href="#post-108132">Question about pure &quot;RET&quot;</a></div>
    <div class="body"><div class="quote"><br />ret is a marco I think. When assembled and looking at the disassembled code, it would be something like retn xx with xx being the numberofparameters*sizeofparameters. </div>True!  Within an MASM PROC the programmer doesn't need to do anthing but RET - by itself.</div>
    <div class="meta">Posted on 2003-06-24 13:06:39 by bitRAKE</div>
   </div>
   <div class="post" id="post-108148">
    <div class="subject"><a href="#post-108148">Question about pure &quot;RET&quot;</a></div>
    <div class="body">so when i use &quot;RET 0&quot; in MASM then no data will be removed from my stuck ???</div>
    <div class="meta">Posted on 2003-06-24 14:58:15 by AceEmbler</div>
   </div>
   <div class="post" id="post-108151">
    <div class="subject"><a href="#post-108151">Question about pure &quot;RET&quot;</a></div>
    <div class="body">Well yeah, but &quot;ret 0&quot; would be a stupid thing to write, since just &quot;ret&quot; does the same and is 1 byte long as opposed to 3.</div>
    <div class="meta">Posted on 2003-06-24 15:18:56 by Sephiroth3</div>
   </div>
   <div class="post" id="post-108158">
    <div class="subject"><a href="#post-108158">Question about pure &quot;RET&quot;</a></div>
    <div class="body">0 means 0 bytes to release so im leaving all the numbers on the stuck.</div>
    <div class="meta">Posted on 2003-06-24 16:33:21 by AceEmbler</div>
   </div>
   <div class="post" id="post-108160">
    <div class="subject"><a href="#post-108160">Question about pure &quot;RET&quot;</a></div>
    <div class="body"><strong>AceEmbler</strong>, use OlyDbg and take a look - you can watch it happen!<br />(Single Step  on my box)</div>
    <div class="meta">Posted on 2003-06-24 16:42:48 by bitRAKE</div>
   </div>
   <div class="post" id="post-108203">
    <div class="subject"><a href="#post-108203">Question about pure &quot;RET&quot;</a></div>
    <div class="body">Can you just tell me. Im not used to Olly. Simply i dont know how to use it :tongue:.<br />I'm using radbg and vkdebug.</div>
    <div class="meta">Posted on 2003-06-25 06:44:41 by AceEmbler</div>
   </div>
   <div class="post" id="post-108209">
    <div class="subject"><a href="#post-108209">Question about pure &quot;RET&quot;</a></div>
    <div class="body">for example<br /><pre><code><br />test proc var1&#58;DWORD,var2&#58;DWORD<br />ret<br />endp<br /></code></pre><br />Would look like the following in a disassembler<br /><pre><code><br />push ebp<br />mov ebp, esp<br />leave<br />retn 8<br /></code></pre><br />the leave opcode remove the stack frame set up by the masm assembler. It works like<br /><pre><code><br />mov esp, ebp<br />pop ebp</code></pre><br />Let me touch on the retn 8. retn on itself it pop return address of the stack into eip. When the retn opode has an immediate (let the immediate be w since the maximum size of the immediate is 1 word), then the retn opcode would do add esp, w. Thus doing retn 0 is stupid since it takes up 3 bytes when you could just use retn (C3h).</div>
    <div class="meta">Posted on 2003-06-25 07:35:46 by roticv</div>
   </div>
   <div class="post" id="post-108214">
    <div class="subject"><a href="#post-108214">Question about pure &quot;RET&quot;</a></div>
    <div class="body"><div class="quote"><br />Can you just tell me. Im not used to Olly. Simply i dont know how to use it :tongue:.<br />I'm using radbg and vkdebug. </div>This is a simple task to get you started - no time like the present.  Open your EXE and start pushing F7/F8.  The stack window is in the lower right, registers upper right.</div>
    <div class="meta">Posted on 2003-06-25 08:34:07 by bitRAKE</div>
   </div>
  </div>
 </body>
</html>