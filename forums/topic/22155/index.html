<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>How to capture physical Power Button message?? - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=22155" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=22155">How to capture physical Power Button message??</a></p>
   <div class="post" id="post-166746">
    <div class="subject"><a href="#post-166746">How to capture physical Power Button message??</a></div>
    <div class="body">Hi all<br />In normal situration, when press Power Button, operation system goes to shutdown<br />But how can i write a program to let Power Button function fail ?<br />is this need any driver support ?<br />TKS</div>
    <div class="meta">Posted on 2005-10-07 02:19:03 by jordanc</div>
   </div>
   <div class="post" id="post-166753">
    <div class="subject"><a href="#post-166753">Re: How to capture physical Power Button message??</a></div>
    <div class="body">I have built a filter driver just for that purpose.<br /><br />I have a bad keyboard where the Power/Sleep/Wake keys are in a really uncomfortable position, and frequently I pressed them by accident. The filter driver that I wrote is based on kbfiltr example from Win2000 DDK, and it changes some system properties of the keyboard device.<br /><br />I will post it here once I get home.</div>
    <div class="meta">Posted on 2005-10-07 11:50:28 by comrade</div>
   </div>
   <div class="post" id="post-166754">
    <div class="subject"><a href="#post-166754">Re: How to capture physical Power Button message??</a></div>
    <div class="body">You are talking about the system Power Button on the front of your system case?<br /><br />What do you want to do ?&nbsp; Because you are going to forcing the user to use the power cord removal method for power control, which I don&#39;t recommend.&nbsp; In shutdown, apps do get a message so they can clean up.<br /><br />Regards,&nbsp; P1&nbsp; 8)</div>
    <div class="meta">Posted on 2005-10-07 12:35:12 by Pone</div>
   </div>
   <div class="post" id="post-166755">
    <div class="subject"><a href="#post-166755">Re: How to capture physical Power Button message??</a></div>
    <div class="body"><div class="quote"><br />What do you want to do ?&nbsp; Because you are going to forcing the user to use the power cord removal method for power control, which I don&#39;t recommend.&nbsp; In shutdown, apps do get a message so they can clean up.<br /></div><br />Even if the ATX powerbutton message is ignored, the user can still keep the button pressed for 3-5seconds, which will force a shutdown anyway.<br /></div>
    <div class="meta">Posted on 2005-10-07 12:44:51 by f0dder</div>
   </div>
   <div class="post" id="post-166757">
    <div class="subject"><a href="#post-166757">Re: How to capture physical Power Button message??</a></div>
    <div class="body"><div class="quote"><br />Even if the ATX powerbutton message is ignored, the user can still keep the button pressed for 3-5seconds, which will force a shutdown anyway.</div>This is true.&nbsp; But the point I was making, users need some TLC from the programmer so that they do not shoot our programs in the foot.&nbsp; &nbsp; :shock:<br /><br />Regards,&nbsp; P1&nbsp; 8)</div>
    <div class="meta">Posted on 2005-10-07 13:09:41 by Pone</div>
   </div>
   <div class="post" id="post-166758">
    <div class="subject"><a href="#post-166758">Re: How to capture physical Power Button message??</a></div>
    <div class="body">Here is the project. It disables some kind of power-control bits for the keyboard device. Perhaps you can find a way to do it for the whole system.</div>
    <div class="attachments">Attachments:
     <ul>
      <li><a href="../../attachments/?id=1051" target="_blank">kbfiltr.rar</a></li>
     </ul>
    </div>
    <div class="meta">Posted on 2005-10-07 15:52:14 by comrade</div>
   </div>
   <div class="post" id="post-166762">
    <div class="subject"><a href="#post-166762">Re: How to capture physical Power Button message??</a></div>
    <div class="body">thanks Comrade&#39;s sample, i&#39;ll try it<br />And my question is no consider for hardware shutdown<br />since press power button 4 second shutdown is hardware operation<br />not control by operation system<br /></div>
    <div class="meta">Posted on 2005-10-07 21:40:31 by jordanc</div>
   </div>
  </div>
 </body>
</html>