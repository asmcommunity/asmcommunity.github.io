<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>NASM - Official Recursive Macro Support! - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=30298" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=47">Assemblers</a> &raquo; <a href="../?id=30298">NASM - Official Recursive Macro Support!</a></p>
   <div class="post" id="post-213454">
    <div class="subject"><a href="#post-213454">NASM - Official Recursive Macro Support!</a></div>
    <div class="body">This is an official announcement regarding the rewrite/revamp of the NASM preprocessor, now available as part of the official/main NASM source code starting with NASM 2.10rc2.<br /><br />This rewrite addresses issues with implementing recursive macros (%rmacro/%irmacro) as previously attempted, %exitmacro and also makes room for new directives.<br /><br /><strong>New NASM Directives:</strong><br /><ul><br /><li><strong>%rmacro</strong>: <strong>R</strong>ecursive <strong>Macro</strong>, can be called arbitrarily deep (really high limit [2^20] set to catch infinite loops.)</li><br /><li><strong>%irmacro</strong>: Same as above, except case-insensitive like %imacro.</li><br /><li><strong>%exitmacro</strong>: Terminates the current macro invocation, much like %exitrep; can be nested in other preprocessor directives (e.g. %if/%endif) within the macro, with exception of another macro, of course.</li><br /><li><strong>%while/%endwhile/%exitwhile</strong>: A fusion between %rep and %if.</li><br /><li><strong>%comment/%endcomment</strong>: Comment block for long/multi-line comments. A little syntactic sugar, if you will.</li><br /><li><strong>%final</strong>: Causes rest of line after <strong>%final</strong> to be preprocessed after all other &quot;normal&quot; preprocessing is complete. Multiple <strong>%final</strong> directives work like the x86 stack, LIFO/FILO.</li><br /></ul><br /><br />This rewrite also addresses efficiency issues with heavy/nested macro invocations.<br /><br />Please help us test this rewrite further by downloading/compiling the NASM 2.10rc2 and testing it against your NASM code/snippets.<br /><br />NASM 2.10rc2 is available for download (source and binaries) at <a target="_blank" href="http://www.nasm.us/pub/nasm/releasebuilds/2.10rc2/">http://www.nasm.us/pub/nasm/releasebuilds/2.10rc2/</a><br /><br />Please note that the official documentation will be updated over the next few weeks as we approach an official/stable NASM 2.10 release.<br /><br />If there are any questions/comments/concerns, please reply to this thread.<br /><br />Thanks. -SpooK</div>
    <div class="meta">Posted on 2010-11-08 11:23:39 by SpooK</div>
   </div>
   <div class="post" id="post-213456">
    <div class="subject"><a href="#post-213456">Re: NASM - Official Recursive Macro Support!</a></div>
    <div class="body">Congratulations on reaching this milestone, I&#039;ll make time to play around with this stuff :)<br /></div>
    <div class="meta">Posted on 2010-11-08 18:43:20 by Homer</div>
   </div>
  </div>
 </body>
</html>