<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>Disk imaging - Forums - ASM Community</title>
  <link rel="stylesheet" type="text/css" href="../../../style.css" />
  <link rel="canonical" href="../?id=3087" />
     </head>
 <body>
  <div id="header">
   <h1><a href="../../../">ASM Community</a></h1>
  </div>
  <div id="content">
   <p class="breadcrumbs"><a href="../../../">Home</a> &raquo; <a href="../../">Forums</a> &raquo; <a href="../../board/?id=3">MAIN</a> &raquo; <a href="../?id=3087">Disk imaging</a></p>
   <div class="post" id="post-20226">
    <div class="subject"><a href="#post-20226">Disk imaging</a></div>
    <div class="body">anyone have any idea how i could dump the raw data from a floppy disk and write it back? i'm trying to create an imaging program like winimage, only needs to work for floppies.. anyone that can help at all let me know. thanks in advance</div>
    <div class="meta">Posted on 2002-01-21 00:42:13 by mc</div>
   </div>
   <div class="post" id="post-20228">
    <div class="subject"><a href="#post-20228">Disk imaging</a></div>
    <div class="body">take a look at my <br /><br /><a target="_blank" href="http://bit7italy.tripod.com/fimage001.zip">http://bit7italy.tripod.com/fimage001.zip</a><br /><br /><br />B7</div>
    <div class="meta">Posted on 2002-01-21 00:56:04 by Bit7</div>
   </div>
   <div class="post" id="post-20239">
    <div class="subject"><a href="#post-20239">Disk imaging</a></div>
    <div class="body">bit7, is this win32 compatible? nice prog...</div>
    <div class="meta">Posted on 2002-01-21 03:18:17 by mob</div>
   </div>
   <div class="post" id="post-20276">
    <div class="subject"><a href="#post-20276">Disk imaging</a></div>
    <div class="body">Some days ago I wrote a simple piece of code in a few minutes that reads a floppy disk and writes it to a file. I wrote it because someone had a disk from a sony mavica camera that was damaged. <br />It only works on NT/2k and the code doesn't check for anything...<br /><pre><code><br />invoke  CreateFile, CTXT&#40;&quot;disk.dat&quot;&#41;, GENERIC_WRITE,\<br />            FILE_SHARE_READ, NULL, CREATE_ALWAYS, 0,0<br />mov     edi, eax<br />invoke  CreateFile, CTXT&#40;&quot;\\.\A&#58;&quot;&#41;, GENERIC_READ, \<br />            FILE_SHARE_READ OR FILE_SHARE_WRITE,\<br />            NULL, OPEN_EXISTING, 0, 0<br />mov     ebx, eax<br />xor     esi, esi<br />.WHILE  esi&lt;1434<br />        mov     eax, esi<br />        shl     eax, 10<br />        invoke  SetFilePointer, ebx, eax,0, FILE_BEGIN<br />        invoke  ReadFile, ebx, addr buffer, 1024, addr bytesWritten, 0<br />        invoke  WriteFile, edi, addr buffer, bytesWritten, addr buffer1,0<br />        inc     esi<br />.ENDW<br />invoke  CloseHandle, edi<br />invoke  CloseHandle, ebx<br /></code></pre></div>
    <div class="meta">Posted on 2002-01-21 08:04:14 by Thomas</div>
   </div>
   <div class="post" id="post-20300">
    <div class="subject"><a href="#post-20300">Disk imaging</a></div>
    <div class="body">Thomas: anything on writing the file back to a floppy? would just reversing the loop work? (ie: put \\.\a: in edi and disk.dat in ebx) also, any ideas how to make it work on win9x?<br /><br />Bit7: your program looks nice, but on my system it appears to not do anything but fill the progress bar, is it win9x only?<br /><br />well thanks to you both, maybe i can do some os checking and use bits of code from what each of you gave me. much thanks.</div>
    <div class="meta">Posted on 2002-01-21 13:30:54 by mc`</div>
   </div>
   <div class="post" id="post-20310">
    <div class="subject"><a href="#post-20310">Disk imaging</a></div>
    <div class="body"><div class="quote">Thomas: anything on writing the file back to a floppy? would just reversing the loop work? (ie: put \.\a: in edi and disk.dat in ebx)<br /></div><br /><br />Yes I think so.<br /><br /><div class="quote">also, any ideas how to make it work on win9x? </div><br /><br />No, sorry. It is possible and there have been previous threads on this subject, try searching the board.<br /><br />Thomas</div>
    <div class="meta">Posted on 2002-01-21 14:43:50 by Thomas</div>
   </div>
   <div class="post" id="post-20338">
    <div class="subject"><a href="#post-20338">Disk imaging</a></div>
    <div class="body">mc,<br /><br />Attached is a file which works on win95 and winxp<br />which will back up a file from the hard drive to <br />floppy disks by splitting it up into pieces which <br />will fit on the floppy in the floppy drive.  It <br />will delete any files already on the floppy and<br />set the volume label, in a weak attempt to keep <br />the user from forgetting to change the floppy when<br />necessary.  The program checks for existing space<br />on the floppy and writes that much to the floppy.<br />It keeps asking for floppies until the process<br />is completed.<br /><br />hth<br /><br />farrier</div>
    <div class="meta">Posted on 2002-01-21 18:53:49 by farrier</div>
   </div>
   <div class="post" id="post-20390">
    <div class="subject"><a href="#post-20390">sorry,</a></div>
    <div class="body">hi, i'm sorry, i've tested my program only on w95/98.<br /><br />b7</div>
    <div class="meta">Posted on 2002-01-22 07:50:57 by Bit7</div>
   </div>
  </div>
 </body>
</html>